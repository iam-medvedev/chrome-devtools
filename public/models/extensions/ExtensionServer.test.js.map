{"version":3,"file":"ExtensionServer.test.js","sourceRoot":"","sources":["../../../../../../front_end/models/extensions/ExtensionServer.test.ts"],"names":[],"mappings":"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","sourcesContent":["// Copyright 2022 The Chromium Authors. All rights reserved.\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\n\nimport type {Chrome} from '../../../extension-api/ExtensionAPI.js';\nimport * as Common from '../../core/common/common.js';\nimport * as Platform from '../../core/platform/platform.js';\nimport * as SDK from '../../core/sdk/sdk.js';\nimport * as Protocol from '../../generated/protocol.js';\nimport {createTarget, expectConsoleLogs} from '../../testing/EnvironmentHelpers.js';\nimport {\n  describeWithDevtoolsExtension,\n  getExtensionOrigin,\n} from '../../testing/ExtensionHelpers.js';\nimport {MockProtocolBackend} from '../../testing/MockScopeChain.js';\nimport {addChildFrame, FRAME_URL, getMainFrame} from '../../testing/ResourceTreeHelpers.js';\nimport {encodeSourceMap} from '../../testing/SourceMapEncoder.js';\nimport * as UI from '../../ui/legacy/legacy.js';\nimport * as Bindings from '../bindings/bindings.js';\nimport * as Extensions from '../extensions/extensions.js';\nimport type * as HAR from '../har/har.js';\nimport * as Logs from '../logs/logs.js';\nimport * as TextUtils from '../text_utils/text_utils.js';\nimport * as Workspace from '../workspace/workspace.js';\n\nconst {urlString} = Platform.DevToolsPath;\n\ndescribeWithDevtoolsExtension('Extensions', {}, context => {\n  it('are initialized after the target is initialized and navigated to a non-privileged URL', async () => {\n    // This check is a proxy for verifying that the extension has been initialized. Outside of the test the extension\n    // API is available as soon as the extension page is loaded, which we don't do in the test.\n    assert.isUndefined(context.chrome.devtools);\n\n    const addExtensionStub = sinon.stub(Extensions.ExtensionServer.ExtensionServer.instance(), 'addExtension');\n    createTarget().setInspectedURL(urlString`http://example.com`);\n    assert.isTrue(addExtensionStub.calledOnceWithExactly(context.extensionDescriptor));\n  });\n\n  it('are not initialized before the target is initialized and navigated to a non-privileged URL', async () => {\n    // This check is a proxy for verifying that the extension has been initialized. Outside of the test the extension\n    // API is available as soon as the extension page is loaded, which we don't do in the test.\n    assert.isUndefined(context.chrome.devtools);\n\n    const addExtensionStub = sinon.stub(Extensions.ExtensionServer.ExtensionServer.instance(), 'addExtension');\n    createTarget().setInspectedURL(urlString`chrome://version`);\n    assert.isTrue(addExtensionStub.notCalled);\n  });\n\n  it('defers loading extensions until after navigation from a privileged to a non-privileged host', async () => {\n    const addExtensionSpy = sinon.spy(Extensions.ExtensionServer.ExtensionServer.instance(), 'addExtension');\n    const target = createTarget({type: SDK.Target.Type.FRAME});\n    target.setInspectedURL(urlString`chrome://abcdef`);\n    assert.isTrue(addExtensionSpy.notCalled, 'addExtension not called');\n\n    target.setInspectedURL(allowedUrl);\n    assert.isTrue(addExtensionSpy.calledOnce, 'addExtension called once');\n    assert.isTrue(addExtensionSpy.returned(true), 'addExtension returned true');\n  });\n\n  it('only returns page resources for allowed targets', async () => {\n    const urls = ['http://example.com', 'chrome://version'] as Platform.DevToolsPath.UrlString[];\n    const targets = urls.map(async url => {\n      const target = createTarget({url});\n      const resourceTreeModel = target.model(SDK.ResourceTreeModel.ResourceTreeModel);\n      assert.isNotNull(resourceTreeModel);\n      await resourceTreeModel.once(SDK.ResourceTreeModel.Events.CachedResourcesLoaded);\n      target.setInspectedURL(url);\n      resourceTreeModel.mainFrame?.addResource(new SDK.Resource.Resource(\n          resourceTreeModel, null, url, url, null, null, Common.ResourceType.resourceTypes.Document, 'application/text',\n          null, null));\n      return target;\n    });\n\n    await Promise.all(targets);\n\n    const resources =\n        await new Promise<Chrome.DevTools.Resource[]>(r => context.chrome.devtools!.inspectedWindow.getResources(r));\n\n    assert.deepEqual(resources.map(r => r.url), ['https://example.com/', 'http://example.com']);\n  });\n\n  describe('Resource.setFunctionRangesForScript API', () => {\n    const validFunctionRanges = [{start: {line: 0, column: 0}, end: {line: 10, column: 1}, name: 'foo'}];\n    it('correctly calls DebuggerWorkspaceBindings.setFunctionRanges via Resource.setFunctionRangesForScript API',\n       async () => {\n         const target = createTarget();\n         const inspectedUrl = urlString`https://www.example.com/`;\n         const scriptUrl = urlString`https://example.com/foo.js.map/foo.js`;\n         target.setInspectedURL(inspectedUrl);\n\n         const project = new Bindings.ContentProviderBasedProject.ContentProviderBasedProject(\n             Workspace.Workspace.WorkspaceImpl.instance(), target.id(), Workspace.Workspace.projectTypes.Network, '',\n             false /* isServiceProject */);\n\n         const targetManager = target.targetManager();\n         const resourceMapping =\n             new Bindings.ResourceMapping.ResourceMapping(targetManager, Workspace.Workspace.WorkspaceImpl.instance());\n         Bindings.DebuggerWorkspaceBinding.DebuggerWorkspaceBinding.instance(\n             {forceNew: true, resourceMapping, targetManager});\n         // create a mock uiSourceCode for the sourceMap script\n         project.addUISourceCode(\n             new Workspace.UISourceCode.UISourceCode(\n                 project, scriptUrl, Common.ResourceType.resourceTypes.SourceMapScript),\n         );\n         const uiSourceCode = project.uiSourceCodeForURL(scriptUrl);\n         assert.exists(uiSourceCode);\n         assert.exists(context.chrome.devtools);\n\n         const resources = await new Promise<Chrome.DevTools.Resource[]>(\n             r => context.chrome.devtools?.inspectedWindow.getResources(r));\n\n         const nonSourceMapScripts = resources.filter(r => r.type !== 'sm-script');\n         const sourceMapScripts = resources.filter(r => r.type === 'sm-script');\n\n         const workspaceBindingSetFunctionRangesStub =\n             sinon.stub(Bindings.DebuggerWorkspaceBinding.DebuggerWorkspaceBinding.instance(), 'setFunctionRanges');\n\n         // The assert.throws() helper does not work with async/await, hence the manual try catch\n         let didThrow = false;\n         try {\n           // Should throw if called with a non-sourceMap script\n           await nonSourceMapScripts[0].setFunctionRangesForScript(validFunctionRanges);\n         } catch (e) {\n           didThrow = true;\n           assertIsStatus(e);\n           assert.strictEqual(e.code, 'E_BADARG');\n         }\n         assert.isTrue(didThrow, 'SetFunctionRangesForScript did not throw an error as expected.');\n\n         try {\n           // Should throw if called with invalid/empty ranges\n           await sourceMapScripts[0].setFunctionRangesForScript([/** empty ranges */]);\n         } catch (e) {\n           didThrow = true;\n           assertIsStatus(e);\n           assert.strictEqual(e.code, 'E_BADARG');\n         }\n         assert.isTrue(didThrow, 'SetFunctionRangesForScript did not throw an error as expected.');\n         assert.isTrue(workspaceBindingSetFunctionRangesStub.notCalled);\n         await sourceMapScripts[0].setFunctionRangesForScript(validFunctionRanges);\n         assert.isTrue(workspaceBindingSetFunctionRangesStub.calledOnceWithExactly(uiSourceCode, validFunctionRanges));\n       });\n  });\n});\n\ndescribeWithDevtoolsExtension('Extensions', {}, context => {\n  expectConsoleLogs({\n    warn: ['evaluate: the main frame is not yet available'],\n    error: ['Extension server error: Object not found: <top>'],\n  });\n  beforeEach(() => {\n    createTarget().setInspectedURL(urlString`http://example.com`);\n  });\n\n  it('can register a recorder extension for export', async () => {\n    class RecorderPlugin {\n      async stringify(recording: object) {\n        return JSON.stringify(recording);\n      }\n      async stringifyStep(step: object) {\n        return JSON.stringify(step);\n      }\n    }\n    const extensionPlugin = new RecorderPlugin();\n    await context.chrome.devtools?.recorder.registerRecorderExtensionPlugin(extensionPlugin, 'Test', 'text/javascript');\n\n    const manager = Extensions.RecorderPluginManager.RecorderPluginManager.instance();\n    assert.lengthOf(manager.plugins(), 1);\n    const plugin = manager.plugins()[0];\n\n    const result = await plugin.stringify({\n      name: 'test',\n      steps: [],\n    });\n\n    const stepResult = await plugin.stringifyStep({\n      type: 'scroll',\n    });\n\n    assert.lengthOf(manager.plugins(), 1);\n    assert.strictEqual(manager.plugins()[0].getMediaType(), 'text/javascript');\n    assert.strictEqual(manager.plugins()[0].getName(), 'Test');\n    assert.deepEqual(manager.plugins()[0].getCapabilities(), ['export']);\n    assert.deepEqual(result, '{\"name\":\"test\",\"steps\":[]}');\n    assert.deepEqual(stepResult, '{\"type\":\"scroll\"}');\n\n    await context.chrome.devtools?.recorder.unregisterRecorderExtensionPlugin(extensionPlugin);\n  });\n\n  it('can register a recorder extension for replay', async () => {\n    class RecorderPlugin {\n      replay(_recording: object) {\n        return;\n      }\n    }\n    const extensionPlugin = new RecorderPlugin();\n    await context.chrome.devtools?.recorder.registerRecorderExtensionPlugin(extensionPlugin, 'Replay');\n\n    const manager = Extensions.RecorderPluginManager.RecorderPluginManager.instance();\n    assert.lengthOf(manager.plugins(), 1);\n    const plugin = manager.plugins()[0];\n\n    await plugin.replay({\n      name: 'test',\n      steps: [],\n    });\n\n    assert.lengthOf(manager.plugins(), 1);\n    assert.deepEqual(manager.plugins()[0].getCapabilities(), ['replay']);\n    assert.strictEqual(manager.plugins()[0].getName(), 'Replay');\n\n    await context.chrome.devtools?.recorder.unregisterRecorderExtensionPlugin(extensionPlugin);\n  });\n\n  it('can create and show a panel for Recorder', async () => {\n    const panel = await new Promise<Chrome.DevTools.ExtensionPanel>(\n        resolve => context.chrome.devtools?.panels.create('Test', 'test.png', 'test.html', resolve));\n    class RecorderPlugin {\n      replay(_recording: object) {\n        panel?.show();\n      }\n    }\n    const extensionPlugin = new RecorderPlugin();\n    await context.chrome.devtools?.recorder.registerRecorderExtensionPlugin(extensionPlugin, 'Replay');\n    const manager = Extensions.RecorderPluginManager.RecorderPluginManager.instance();\n\n    assert.lengthOf(manager.plugins(), 1);\n\n    const plugin = manager.plugins()[0];\n\n    const stub = sinon.stub(UI.InspectorView.InspectorView.instance(), 'showPanel').callsFake(() => Promise.resolve());\n    await plugin.replay({\n      name: 'test',\n      steps: [],\n    });\n\n    assert.isTrue(stub.called);\n\n    await context.chrome.devtools?.recorder.unregisterRecorderExtensionPlugin(extensionPlugin);\n  });\n\n  it('can create and show a view for Recorder', async () => {\n    const view = await context.chrome.devtools?.recorder.createView('Test', 'test.html');\n    class RecorderPlugin {\n      replay(_recording: object) {\n        view?.show();\n      }\n    }\n    const extensionPlugin = new RecorderPlugin();\n    await context.chrome.devtools?.recorder.registerRecorderExtensionPlugin(extensionPlugin, 'Replay');\n    const manager = Extensions.RecorderPluginManager.RecorderPluginManager.instance();\n\n    assert.lengthOf(manager.plugins(), 1);\n    assert.lengthOf(manager.views(), 1);\n\n    const plugin = manager.plugins()[0];\n    const onceShowRequested = manager.once(Extensions.RecorderPluginManager.Events.SHOW_VIEW_REQUESTED);\n    await plugin.replay({\n      name: 'test',\n      steps: [],\n    });\n    const viewDescriptor = await onceShowRequested;\n    assert.deepEqual(viewDescriptor.title, 'Test');\n\n    await context.chrome.devtools?.recorder.unregisterRecorderExtensionPlugin(extensionPlugin);\n  });\n\n  it('can not show a view for Recorder without using the replay trigger', async () => {\n    const view = await context.chrome.devtools?.recorder.createView('Test', 'test.html');\n    class RecorderPlugin {\n      replay(_recording: object) {\n      }\n      stringify(recording: object) {\n        return JSON.stringify(recording);\n      }\n    }\n    const extensionPlugin = new RecorderPlugin();\n    await context.chrome.devtools?.recorder.registerRecorderExtensionPlugin(extensionPlugin, 'Replay');\n    const manager = Extensions.RecorderPluginManager.RecorderPluginManager.instance();\n\n    assert.lengthOf(manager.plugins(), 1);\n    assert.lengthOf(manager.views(), 1);\n\n    const events: object[] = [];\n    manager.addEventListener(Extensions.RecorderPluginManager.Events.SHOW_VIEW_REQUESTED, event => {\n      events.push(event);\n    });\n    view?.show();\n\n    // Sending inspectedWindow.eval should flush the message queue and make sure\n    // that the ShowViewRequested command was not actually dispatched.\n    await new Promise(resolve => context.chrome.devtools?.inspectedWindow.eval('1', undefined, resolve));\n\n    assert.deepEqual(events, []);\n    await context.chrome.devtools?.recorder.unregisterRecorderExtensionPlugin(extensionPlugin);\n  });\n\n  it('can dispatch hide and show events', async () => {\n    const view = await context.chrome.devtools?.recorder.createView('Test', 'test.html');\n\n    const onShownCalled = sinon.promise();\n    const onShown = () => onShownCalled.resolve(true);\n    const onHiddenCalled = sinon.promise();\n    const onHidden = () => onHiddenCalled.resolve(true);\n\n    view?.onHidden.addListener(onHidden);\n    view?.onShown.addListener(onShown);\n\n    class RecorderPlugin {\n      replay(_recording: object) {\n        view?.show();\n      }\n    }\n    const extensionPlugin = new RecorderPlugin();\n    await context.chrome.devtools?.recorder.registerRecorderExtensionPlugin(extensionPlugin, 'Replay');\n    const manager = Extensions.RecorderPluginManager.RecorderPluginManager.instance();\n\n    const plugin = manager.plugins()[0];\n    const onceShowRequested = manager.once(Extensions.RecorderPluginManager.Events.SHOW_VIEW_REQUESTED);\n    await plugin.replay({\n      name: 'test',\n      steps: [],\n    });\n    const viewDescriptor = await onceShowRequested;\n    assert.deepEqual(viewDescriptor.title, 'Test');\n\n    const descriptor = manager.getViewDescriptor(viewDescriptor.id);\n\n    descriptor?.onShown();\n    await onShownCalled;\n\n    descriptor?.onHidden();\n    await onHiddenCalled;\n\n    await context.chrome.devtools?.recorder.unregisterRecorderExtensionPlugin(extensionPlugin);\n  });\n\n  it('reload only the main toplevel frame', async () => {\n    const target = SDK.TargetManager.TargetManager.instance().primaryPageTarget();\n    assert.isNotNull(target);\n    const secondTarget = createTarget();\n\n    const secondResourceTreeModel = secondTarget.model(SDK.ResourceTreeModel.ResourceTreeModel);\n    assert.isNotNull(secondResourceTreeModel);\n    const secondReloadStub = sinon.stub(secondResourceTreeModel, 'reloadPage');\n    const resourceTreeModel = target.model(SDK.ResourceTreeModel.ResourceTreeModel);\n    assert.isNotNull(resourceTreeModel);\n    const reloadStub = sinon.stub(resourceTreeModel, 'reloadPage');\n    const reloadPromise = new Promise(resolve => reloadStub.callsFake(resolve));\n    context.chrome.devtools!.inspectedWindow.reload();\n    await reloadPromise;\n    assert.isTrue(reloadStub.calledOnce);\n    assert.isTrue(secondReloadStub.notCalled);\n  });\n\n  it('correcly installs blocked extensions after navigation', async () => {\n    const target = SDK.TargetManager.TargetManager.instance().primaryPageTarget();\n    assert.isOk(target);\n    target.setInspectedURL(urlString`chrome://version`);\n    const extensionServer = Extensions.ExtensionServer.ExtensionServer.instance();\n\n    const addExtensionSpy = sinon.spy(extensionServer, 'addExtension');\n\n    assert.isUndefined(extensionServer.addExtension({\n      startPage: 'about:blank',\n      name: 'ext',\n      exposeExperimentalAPIs: false,\n    }));\n    target.setInspectedURL(urlString`http://example.com`);\n\n    assert.deepEqual(addExtensionSpy.returnValues, [undefined, true]);\n  });\n\n  it('correcly reenables extensions after navigation', async () => {\n    const target = SDK.TargetManager.TargetManager.instance().primaryPageTarget();\n    assert.isOk(target);\n    const extensionServer = Extensions.ExtensionServer.ExtensionServer.instance();\n\n    assert.isTrue(extensionServer.isEnabledForTest);\n    target.setInspectedURL(urlString`chrome://version`);\n    assert.isFalse(extensionServer.isEnabledForTest);\n    target.setInspectedURL(urlString`http://example.com`);\n    assert.isTrue(extensionServer.isEnabledForTest);\n  });\n});\n\nconst allowedUrl = FRAME_URL;\nconst blockedUrl = urlString`http://web.dev`;\nconst hostsPolicy = {\n  runtimeAllowedHosts: [allowedUrl],\n  runtimeBlockedHosts: [allowedUrl, blockedUrl],\n};\n\nfunction waitForFunction<T>(fn: () => T): Promise<T> {\n  return new Promise<T>(r => {\n    const check = () => {\n      const result = fn();\n      if (result) {\n        r(result);\n      } else {\n        setTimeout(check);\n      }\n    };\n    check();\n  });\n}\n\ndescribeWithDevtoolsExtension('Runtime hosts policy', {hostsPolicy}, context => {\n  expectConsoleLogs({error: ['Extension server error: Operation failed: Permission denied']});\n\n  for (const protocol of ['devtools', 'chrome', 'chrome-untrusted', 'chrome-error', 'chrome-search']) {\n    it(`blocks API calls on blocked protocols: ${protocol}`, async () => {\n      assert.isUndefined(context.chrome.devtools);\n      const target = createTarget({type: SDK.Target.Type.FRAME});\n      const addExtensionStub = sinon.stub(Extensions.ExtensionServer.ExtensionServer.instance(), 'addExtension');\n\n      target.setInspectedURL(urlString`${`${protocol}://foo`}`);\n      assert.isTrue(addExtensionStub.notCalled);\n      assert.isUndefined(context.chrome.devtools);\n    });\n  }\n\n  it('blocks API calls on blocked hosts', async () => {\n    assert.isUndefined(context.chrome.devtools);\n    const target = createTarget({type: SDK.Target.Type.FRAME});\n    const addExtensionStub = sinon.spy(Extensions.ExtensionServer.ExtensionServer.instance(), 'addExtension');\n\n    target.setInspectedURL(blockedUrl);\n    assert.isTrue(addExtensionStub.alwaysReturned(undefined));\n    assert.isUndefined(context.chrome.devtools);\n  });\n\n  it('allows API calls on allowlisted hosts', async () => {\n    const target = createTarget({type: SDK.Target.Type.FRAME});\n    target.setInspectedURL(allowedUrl);\n    {\n      const result = await new Promise<object>(cb => context.chrome.devtools?.network.getHAR(cb));\n      assert.hasAnyKeys(result, ['entries']);\n    }\n  });\n\n  it('allows API calls on non-blocked hosts', async () => {\n    const target = createTarget({type: SDK.Target.Type.FRAME});\n    target.setInspectedURL(urlString`http://example.com2`);\n    {\n      const result = await new Promise<object>(cb => context.chrome.devtools?.network.getHAR(cb));\n      assert.hasAnyKeys(result, ['entries']);\n    }\n  });\n\n  it('defers loading extensions until after navigation from a blocked to an allowed host', async () => {\n    const addExtensionSpy = sinon.spy(Extensions.ExtensionServer.ExtensionServer.instance(), 'addExtension');\n    const target = createTarget({type: SDK.Target.Type.FRAME});\n    target.setInspectedURL(blockedUrl);\n    assert.isTrue(addExtensionSpy.calledOnce, 'addExtension called once');\n    assert.deepEqual(addExtensionSpy.returnValues, [undefined]);\n\n    target.setInspectedURL(allowedUrl);\n    assert.isTrue(addExtensionSpy.calledTwice, 'addExtension called twice');\n    assert.deepEqual(addExtensionSpy.returnValues, [undefined, true]);\n  });\n\n  it('does not include blocked hosts in the HAR entries', async () => {\n    Logs.NetworkLog.NetworkLog.instance();\n    const target = createTarget({type: SDK.Target.Type.FRAME});\n    target.setInspectedURL(urlString`http://example.com2`);\n    const networkManager = target.model(SDK.NetworkManager.NetworkManager);\n    assert.exists(networkManager);\n    const frameId = 'frame-id' as Protocol.Page.FrameId;\n    createRequest(networkManager, frameId, 'blocked-url-request-id' as Protocol.Network.RequestId, blockedUrl);\n    createRequest(networkManager, frameId, 'allowed-url-request-id' as Protocol.Network.RequestId, allowedUrl);\n    {\n      const result = await new Promise<object>(cb => context.chrome.devtools?.network.getHAR(cb)) as HAR.Log.LogDTO;\n      assert.exists(result.entries.find(e => e.request.url === allowedUrl));\n      assert.notExists(result.entries.find(e => e.request.url === blockedUrl));\n    }\n  });\n\n  async function setUpFrame(\n      name: string, url: Platform.DevToolsPath.UrlString, parentFrame?: SDK.ResourceTreeModel.ResourceTreeFrame,\n      executionContextOrigin?: Platform.DevToolsPath.UrlString) {\n    const parentTarget = parentFrame?.resourceTreeModel()?.target();\n    const target = createTarget({id: `${name}-target-id` as Protocol.Target.TargetID, parentTarget});\n    const frame = parentFrame ? await addChildFrame(target, {url}) : getMainFrame(target, {url});\n\n    if (executionContextOrigin) {\n      executionContextOrigin = urlString`${new URL(executionContextOrigin).origin}`;\n      const parentRuntimeModel = target.model(SDK.RuntimeModel.RuntimeModel);\n      assert.exists(parentRuntimeModel);\n      parentRuntimeModel.executionContextCreated({\n        id: 0 as Protocol.Runtime.ExecutionContextId,\n        origin: executionContextOrigin,\n        name: executionContextOrigin,\n        uniqueId: executionContextOrigin,\n        auxData: {frameId: frame.id, isDefault: true},\n      });\n    }\n\n    return frame;\n  }\n\n  it('blocks evaluation on blocked subframes', async () => {\n    assert.isUndefined(context.chrome.devtools);\n    const parentFrameUrl = allowedUrl;\n    const childFrameUrl = blockedUrl;\n    const parentFrame = await setUpFrame('parent', parentFrameUrl);\n    await setUpFrame('child', childFrameUrl, parentFrame);\n\n    const result = await new Promise<{result: unknown, error?: {details: unknown[]}}>(\n        r => context.chrome.devtools?.inspectedWindow.eval(\n            '4', {frameURL: childFrameUrl}, (result, error) => r({result, error})));\n\n    assert.deepEqual(result.error?.details, ['Permission denied']);\n  });\n\n  it('doesn\\'t block evaluation on blocked sub-executioncontexts with useContentScriptContext', async () => {\n    assert.isUndefined(context.chrome.devtools);\n\n    const parentFrameUrl = allowedUrl;\n    const childFrameUrl = urlString`${`${allowedUrl}/2`}`;\n    const childExeContextOrigin = blockedUrl;\n    const parentFrame = await setUpFrame('parent', parentFrameUrl, undefined, parentFrameUrl);\n    const childFrame = await setUpFrame('child', childFrameUrl, parentFrame, childExeContextOrigin);\n\n    // Create a fake content script execution context, i.e., a non-default context with the extension's (== window's)\n    // origin.\n    const runtimeModel = childFrame.resourceTreeModel()?.target().model(SDK.RuntimeModel.RuntimeModel);\n    assert.exists(runtimeModel);\n    runtimeModel.executionContextCreated({\n      id: 1 as Protocol.Runtime.ExecutionContextId,\n      origin: window.location.origin,\n      name: window.location.origin,\n      uniqueId: window.location.origin,\n      auxData: {frameId: childFrame.id, isDefault: false},\n    });\n    const contentScriptExecutionContext = runtimeModel.executionContext(1);\n    assert.exists(contentScriptExecutionContext);\n    sinon.stub(contentScriptExecutionContext, 'evaluate').returns(Promise.resolve({\n      object: SDK.RemoteObject.RemoteObject.fromLocalObject(4),\n    }));\n\n    const result = await new Promise<{result: unknown, error?: {details: unknown[]}}>(\n        r => context.chrome.devtools?.inspectedWindow.eval(\n            '4', {frameURL: childFrameUrl, useContentScriptContext: true}, (result, error) => r({result, error})));\n\n    assert.deepEqual(result.result, 4);\n  });\n\n  it('blocks evaluation on blocked sub-executioncontexts with explicit scriptExecutionContextOrigin', async () => {\n    assert.isUndefined(context.chrome.devtools);\n\n    const parentFrameUrl = allowedUrl;\n    const childFrameUrl = urlString`${`${allowedUrl}/2`}`;\n    const parentFrame = await setUpFrame('parent', parentFrameUrl, undefined, parentFrameUrl);\n    const childFrame = await setUpFrame('child', childFrameUrl, parentFrame, parentFrameUrl);\n\n    // Create a non-default context with a blocked origin.\n    const childExeContextOrigin = blockedUrl;\n    const runtimeModel = childFrame.resourceTreeModel()?.target().model(SDK.RuntimeModel.RuntimeModel);\n    assert.exists(runtimeModel);\n    runtimeModel.executionContextCreated({\n      id: 1 as Protocol.Runtime.ExecutionContextId,\n      origin: childExeContextOrigin,\n      name: childExeContextOrigin,\n      uniqueId: childExeContextOrigin,\n      auxData: {frameId: childFrame.id, isDefault: false},\n    });\n\n    const result = await new Promise<{result: unknown, error?: {details: unknown[]}}>(\n        r => context.chrome.devtools?.inspectedWindow.eval(\n            // The typings don't match the implementation, so we need to cast to any here to make ts happy.\n            // eslint-disable-next-line @typescript-eslint/no-explicit-any\n            '4', {frameURL: childFrameUrl, scriptExecutionContext: childExeContextOrigin} as any,\n            (result, error) => r({result, error})));\n\n    assert.deepEqual(result.error?.details, ['Permission denied']);\n  });\n\n  it('blocks evaluation on blocked sub-executioncontexts', async () => {\n    assert.isUndefined(context.chrome.devtools);\n\n    const parentFrameUrl = allowedUrl;\n    const childFrameUrl = urlString`${`${allowedUrl}/2`}`;\n    const childExeContextOrigin = blockedUrl;\n    const parentFrame = await setUpFrame('parent', parentFrameUrl, undefined, parentFrameUrl);\n    await setUpFrame('child', childFrameUrl, parentFrame, childExeContextOrigin);\n\n    const result = await new Promise<{result: unknown, error?: {details: unknown[]}}>(\n        r => context.chrome.devtools?.inspectedWindow.eval(\n            '4', {frameURL: childFrameUrl}, (result, error) => r({result, error})));\n\n    assert.deepEqual(result.error?.details, ['Permission denied']);\n  });\n\n  async function createUISourceCode(\n      project: Bindings.ContentProviderBasedProject.ContentProviderBasedProject, url: Platform.DevToolsPath.UrlString) {\n    const mimeType = 'text/html';\n    const dataProvider = () =>\n        Promise.resolve(new TextUtils.ContentData.ContentData('content', /* isBase64 */ false, mimeType));\n    project.addUISourceCodeWithProvider(\n        new Workspace.UISourceCode.UISourceCode(project, url, Common.ResourceType.resourceTypes.Document),\n        new TextUtils.StaticContentProvider.StaticContentProvider(\n            url, Common.ResourceType.resourceTypes.Document, dataProvider),\n        null, mimeType);\n    await project.uiSourceCodeForURL(url)?.requestContentData();\n  }\n\n  it('blocks getting resource contents on blocked urls', async () => {\n    const target = createTarget({id: 'target' as Protocol.Target.TargetID});\n    target.setInspectedURL(allowedUrl);\n\n    const project = new Bindings.ContentProviderBasedProject.ContentProviderBasedProject(\n        Workspace.Workspace.WorkspaceImpl.instance(), target.id(), Workspace.Workspace.projectTypes.Network, '',\n        false /* isServiceProject */);\n    await createUISourceCode(project, blockedUrl);\n    await createUISourceCode(project, allowedUrl);\n\n    assert.exists(context.chrome.devtools);\n    const resources =\n        await new Promise<Chrome.DevTools.Resource[]>(r => context.chrome.devtools?.inspectedWindow.getResources(r));\n    assert.deepEqual(resources.map(r => r.url), [blockedUrl, allowedUrl]);\n\n    const resourceContents = await Promise.all(resources.map(\n        resource => new Promise<{url: string, content?: string, encoding?: string}>(\n            r => resource.getContent((content, encoding) => r({url: resource.url, content, encoding})))));\n\n    assert.deepEqual(resourceContents, [\n      {url: blockedUrl, content: undefined, encoding: undefined},\n      {url: allowedUrl, content: 'content', encoding: ''},\n    ]);\n  });\n\n  function createRequest(\n      networkManager: SDK.NetworkManager.NetworkManager, frameId: Protocol.Page.FrameId,\n      requestId: Protocol.Network.RequestId, url: Platform.DevToolsPath.UrlString): void {\n    const request = SDK.NetworkRequest.NetworkRequest.create(requestId, url, url, frameId, null, null, undefined);\n    const dataProvider = () =>\n        Promise.resolve(new TextUtils.ContentData.ContentData('content', false, request.mimeType));\n    request.setContentDataProvider(dataProvider);\n    networkManager.dispatchEventToListeners(SDK.NetworkManager.Events.RequestStarted, {request, originalRequest: null});\n    request.finished = true;\n    networkManager.dispatchEventToListeners(SDK.NetworkManager.Events.RequestFinished, request);\n  }\n\n  it('does not include blocked hosts in onRequestFinished event listener', async () => {\n    const frameId = 'frame-id' as Protocol.Page.FrameId;\n    const target = createTarget({id: 'target' as Protocol.Target.TargetID});\n    target.setInspectedURL(allowedUrl);\n\n    const requests: HAR.Log.EntryDTO[] = [];\n    // onRequestFinished returns a type of Request. However in actual fact, the returned object contains HAR data\n    // which result type mismatch due to the Request type not containing the respective fields in HAR.Log.EntryDTO.\n    // Therefore, cast through unknown to resolve this.\n    // TODO: (crbug.com/1482763) Update Request type to match HAR.Log.EntryDTO\n    context.chrome.devtools?.network.onRequestFinished.addListener(\n        r => requests.push(r as unknown as HAR.Log.EntryDTO));\n    await waitForFunction(\n        () => Extensions.ExtensionServer.ExtensionServer.instance().hasSubscribers(\n            Extensions.ExtensionAPI.PrivateAPI.Events.NetworkRequestFinished));\n\n    const networkManager = target.model(SDK.NetworkManager.NetworkManager);\n    assert.exists(networkManager);\n    createRequest(networkManager, frameId, 'blocked-url-request-id' as Protocol.Network.RequestId, blockedUrl);\n    createRequest(networkManager, frameId, 'allowed-url-request-id' as Protocol.Network.RequestId, allowedUrl);\n\n    await waitForFunction(() => requests.length >= 1);\n\n    assert.lengthOf(requests, 1);\n    assert.exists(requests.find(e => e.request.url === allowedUrl));\n    assert.notExists(requests.find(e => e.request.url === blockedUrl));\n  });\n\n  it('blocks setting resource contents on blocked urls', async () => {\n    const target = createTarget({id: 'target' as Protocol.Target.TargetID});\n    target.setInspectedURL(allowedUrl);\n\n    const project = new Bindings.ContentProviderBasedProject.ContentProviderBasedProject(\n        Workspace.Workspace.WorkspaceImpl.instance(), target.id(), Workspace.Workspace.projectTypes.Network, '',\n        false /* isServiceProject */);\n    await createUISourceCode(project, blockedUrl);\n    await createUISourceCode(project, allowedUrl);\n\n    assert.exists(context.chrome.devtools);\n    const resources =\n        await new Promise<Chrome.DevTools.Resource[]>(r => context.chrome.devtools?.inspectedWindow.getResources(r));\n    assert.deepEqual(resources.map(r => r.url), [blockedUrl, allowedUrl]);\n\n    assert.deepEqual(project.uiSourceCodeForURL(allowedUrl)?.content(), 'content');\n    assert.deepEqual(project.uiSourceCodeForURL(blockedUrl)?.content(), 'content');\n    const responses = await Promise.all(resources.map(\n                          resource => new Promise<Object|undefined>(r => resource.setContent('modified', true, r)))) as\n        Array<undefined|{code: string, details: string[]}>;\n\n    assert.deepEqual(responses.map(response => response?.code), ['E_FAILED', 'OK']);\n    assert.deepEqual(responses.map(response => response?.details), [['Permission denied'], []]);\n\n    assert.deepEqual(project.uiSourceCodeForURL(allowedUrl)?.content(), 'modified');\n    assert.deepEqual(project.uiSourceCodeForURL(blockedUrl)?.content(), 'content');\n  });\n});\n\ndescribe('ExtensionServer', () => {\n  it('can correctly expand resource paths', async () => {\n    // Ideally this would be a chrome-extension://, but that doesn't work with URL in chrome headless.\n    const extensionOrigin = urlString`chrome://abcdef`;\n    const almostOrigin = urlString`${`${extensionOrigin}/`}`;\n    const expectation = urlString`${`${extensionOrigin}/foo`}`;\n    assert.isUndefined(\n        Extensions.ExtensionServer.ExtensionServer.expandResourcePath(extensionOrigin, 'http://example.com/foo'));\n    assert.strictEqual(\n        expectation, Extensions.ExtensionServer.ExtensionServer.expandResourcePath(extensionOrigin, expectation));\n    assert.strictEqual(\n        expectation, Extensions.ExtensionServer.ExtensionServer.expandResourcePath(extensionOrigin, '/foo'));\n    assert.strictEqual(\n        expectation, Extensions.ExtensionServer.ExtensionServer.expandResourcePath(extensionOrigin, 'foo'));\n\n    assert.isUndefined(\n        Extensions.ExtensionServer.ExtensionServer.expandResourcePath(almostOrigin, 'http://example.com/foo'));\n    assert.strictEqual(\n        expectation, Extensions.ExtensionServer.ExtensionServer.expandResourcePath(almostOrigin, expectation));\n    assert.strictEqual(\n        expectation, Extensions.ExtensionServer.ExtensionServer.expandResourcePath(almostOrigin, '/foo'));\n    assert.strictEqual(expectation, Extensions.ExtensionServer.ExtensionServer.expandResourcePath(almostOrigin, 'foo'));\n  });\n\n  it('cannot inspect chrome webstore URLs', () => {\n    const blockedUrls = [\n      'http://chrome.google.com/webstore',\n      'https://chrome.google.com./webstore',\n      'http://chrome.google.com/webstore',\n      'https://chrome.google.com./webstore',\n      'http://chrome.google.com/webstore/foo',\n      'https://chrome.google.com./webstore/foo',\n      'http://chrome.google.com/webstore/foo',\n      'https://chrome.google.com./webstore/foo',\n      'http://chromewebstore.google.com/',\n      'https://chromewebstore.google.com./',\n      'http://chromewebstore.google.com/',\n      'https://chromewebstore.google.com./',\n      'http://chromewebstore.google.com/foo',\n      'https://chromewebstore.google.com./foo',\n      'http://chromewebstore.google.com/foo',\n      'https://chromewebstore.google.com./foo',\n    ];\n    const allowedUrls = [\n      'http://chrome.google.com/webstor',\n      'https://chrome.google.com./webstor',\n      'http://chrome.google.com/webstor',\n      'https://chrome.google.com./webstor',\n      'http://chrome.google.com/',\n      'https://chrome.google.com./',\n      'http://chrome.google.com/',\n      'https://chrome.google.com./',\n      'http://google.com/webstore',\n      'https://google.com./webstore',\n      'http://google.com/webstore',\n      'https://google.com./webstore',\n      'http://chromewebstor.google.com/',\n      'https://chromewebstor.google.com./',\n      'http://chromewebstor.google.com/',\n      'https://chromewebstor.google.com./',\n    ];\n    for (const url of blockedUrls as Platform.DevToolsPath.UrlString[]) {\n      assert.isFalse(Extensions.ExtensionServer.ExtensionServer.canInspectURL(url), url);\n    }\n    for (const url of allowedUrls as Platform.DevToolsPath.UrlString[]) {\n      assert.isTrue(Extensions.ExtensionServer.ExtensionServer.canInspectURL(url), url);\n    }\n  });\n\n  it('cannot inspect non-HTTP URL schemes', () => {\n    const blockedUrls = [\n      'devtools://devtools/bundled/front_end/devtools_app.html',\n      'devtools://devtools/anything',\n      'chrome://extensions',\n      'chrome-untrusted://extensions',\n      'chrome-error://crash',\n      'chrome-search://foo/bar',\n    ];\n    for (const url of blockedUrls as Platform.DevToolsPath.UrlString[]) {\n      assert.isFalse(Extensions.ExtensionServer.ExtensionServer.canInspectURL(url), url);\n    }\n  });\n});\n\nfunction assertIsStatus<T>(value: T|\n                           Extensions.ExtensionServer.Record): asserts value is Extensions.ExtensionServer.Record {\n  if (value && typeof value === 'object' && 'code' in value) {\n    assert.isTrue(value.code === 'OK' || Boolean(value.isError), `Value ${value} is not a status code`);\n  } else {\n    assert.fail(`Value ${value} is not a status code`);\n  }\n}\n\ndescribeWithDevtoolsExtension('Wasm extension API', {}, context => {\n  let stopId: unknown;\n  beforeEach(() => {\n    const target = createTarget();\n    target.setInspectedURL(urlString`http://example.com`);\n    const targetManager = target.targetManager();\n    const resourceMapping =\n        new Bindings.ResourceMapping.ResourceMapping(targetManager, Workspace.Workspace.WorkspaceImpl.instance());\n    Bindings.DebuggerWorkspaceBinding.DebuggerWorkspaceBinding.instance(\n        {forceNew: true, resourceMapping, targetManager});\n\n    const callFrame = sinon.createStubInstance(SDK.DebuggerModel.CallFrame);\n    callFrame.debuggerModel = new SDK.DebuggerModel.DebuggerModel(target);\n    sinon.stub(callFrame, 'id').get(() => '0' as Protocol.Debugger.CallFrameId);\n    sinon.stub(callFrame.debuggerModel.agent, 'invoke_evaluateOnCallFrame')\n        .returns(\n            Promise.resolve({result: {type: Protocol.Runtime.RemoteObjectType.Undefined}, getError: () => undefined}));\n    stopId = Bindings.DebuggerWorkspaceBinding.DebuggerWorkspaceBinding.instance().pluginManager.stopIdForCallFrame(\n        callFrame);\n  });\n\n  function captureError(expectedMessage: string): sinon.SinonStub {\n    const original = console.error;\n    return sinon.stub(console, 'error').callsFake((message, ...args) => {\n      if (expectedMessage !== message) {\n        original(message, ...args);\n      }\n    });\n  }\n\n  it('getWasmGlobal does not block on invalid indices', async () => {\n    const log = captureError('Extension server error: Invalid argument global: No global with index 0');\n    const result = await context.chrome.devtools?.languageServices.getWasmGlobal(0, stopId);\n    assertIsStatus(result);\n    assert.isTrue(log.calledOnce);\n    assert.strictEqual(result.code, 'E_BADARG');\n    assert.strictEqual(result.details[0], 'global');\n  });\n\n  it('getWasmLocal does not block on invalid indices', async () => {\n    const log = captureError('Extension server error: Invalid argument local: No local with index 0');\n    const result = await context.chrome.devtools?.languageServices.getWasmLocal(0, stopId);\n    assertIsStatus(result);\n    assert.isTrue(log.calledOnce);\n    assert.strictEqual(result.code, 'E_BADARG');\n    assert.strictEqual(result.details[0], 'local');\n  });\n\n  it('getWasmOp does not block on invalid indices', async () => {\n    const log = captureError('Extension server error: Invalid argument op: No operand with index 0');\n    const result = await context.chrome.devtools?.languageServices.getWasmOp(0, stopId);\n    assertIsStatus(result);\n    assert.isTrue(log.calledOnce);\n    assert.strictEqual(result.code, 'E_BADARG');\n    assert.strictEqual(result.details[0], 'op');\n  });\n});\n\nclass StubLanguageExtension implements Chrome.DevTools.LanguageExtensionPlugin {\n  async addRawModule(): Promise<string[]|{missingSymbolFiles: string[]}> {\n    return [];\n  }\n  async sourceLocationToRawLocation(): Promise<Chrome.DevTools.RawLocationRange[]> {\n    return [];\n  }\n  async rawLocationToSourceLocation(): Promise<Chrome.DevTools.SourceLocation[]> {\n    return [];\n  }\n  async getScopeInfo(): Promise<Chrome.DevTools.ScopeInfo> {\n    throw new Error('Method not implemented.');\n  }\n  async listVariablesInScope(): Promise<Chrome.DevTools.Variable[]> {\n    return [];\n  }\n  async removeRawModule(): Promise<void> {\n  }\n  async getFunctionInfo(): Promise<{frames: Chrome.DevTools.FunctionInfo[], missingSymbolFiles: string[]}|\n                                   {missingSymbolFiles: string[]}|{frames: Chrome.DevTools.FunctionInfo[]}> {\n    return {frames: []};\n  }\n  async getInlinedFunctionRanges(): Promise<Chrome.DevTools.RawLocationRange[]> {\n    return [];\n  }\n  async getInlinedCalleesRanges(): Promise<Chrome.DevTools.RawLocationRange[]> {\n    return [];\n  }\n  async getMappedLines(): Promise<number[]|undefined> {\n    return undefined;\n  }\n  async evaluate(): Promise<Chrome.DevTools.RemoteObject|Chrome.DevTools.ForeignObject|null> {\n    return null;\n  }\n  async getProperties(): Promise<Chrome.DevTools.PropertyDescriptor[]> {\n    return [];\n  }\n  async releaseObject(): Promise<void> {\n  }\n}\n\ndescribeWithDevtoolsExtension('Language Extension API', {}, context => {\n  it('reports loaded resources', async () => {\n    const target = createTarget();\n    target.setInspectedURL(urlString`http://example.com`);\n\n    const pageResourceLoader =\n        SDK.PageResourceLoader.PageResourceLoader.instance({forceNew: true, loadOverride: null, maxConcurrentLoads: 1});\n    const spy = sinon.spy(pageResourceLoader, 'resourceLoadedThroughExtension');\n    await context.chrome.devtools?.languageServices.reportResourceLoad('test.dwo', {success: true, size: 10});\n\n    assert.isTrue(spy.calledOnce);\n    assert.strictEqual(pageResourceLoader.getNumberOfResources().resources, 1);\n\n    const resource = spy.args[0][0];\n    const extensionId = getExtensionOrigin();\n    const expectedInitiator = {target: null, frameId: null, initiatorUrl: urlString`${extensionId}`, extensionId};\n    const expectedResource = {\n      url: urlString`test.dwo`,\n      initiator: expectedInitiator,\n      success: true,\n      size: 10,\n      duration: null,\n      errorMessage: undefined,\n    };\n    assert.deepEqual(resource, expectedResource);\n  });\n});\n\nfor (const allowFileAccess of [true, false]) {\n  describeWithDevtoolsExtension(\n      `Language Extension API with {allowFileAccess: ${allowFileAccess}}`, {allowFileAccess}, context => {\n        let target: SDK.Target.Target;\n        beforeEach(() => {\n          target = createTarget();\n          const targetManager = target.targetManager();\n          const workspace = Workspace.Workspace.WorkspaceImpl.instance();\n          const resourceMapping = new Bindings.ResourceMapping.ResourceMapping(targetManager, workspace);\n          target.setInspectedURL(urlString`http://example.com`);\n          const debuggerWorkspaceBinding = Bindings.DebuggerWorkspaceBinding.DebuggerWorkspaceBinding.instance(\n              {forceNew: true, targetManager, resourceMapping});\n          Bindings.IgnoreListManager.IgnoreListManager.instance({forceNew: true, debuggerWorkspaceBinding});\n        });\n\n        it('passes allowFileAccess to the LanguageExtensionEndpoint', async () => {\n          const endpointSpy =\n              sinon.spy(Extensions.LanguageExtensionEndpoint.LanguageExtensionEndpoint.prototype, 'handleScript');\n          const plugin = new StubLanguageExtension();\n          await context.chrome.devtools?.languageServices.registerLanguageExtensionPlugin(plugin, 'plugin', {\n            language: Protocol.Debugger.ScriptLanguage.JavaScript,\n            symbol_types: [Protocol.Debugger.DebugSymbolsType.SourceMap],\n          });\n\n          const debuggerModel = target.model(SDK.DebuggerModel.DebuggerModel);\n          assert.isOk(debuggerModel);\n          debuggerModel.parsedScriptSource(\n              '0' as Protocol.Runtime.ScriptId, urlString`file:///source/url`, 0, 0, 100, 100, 0, '', {}, false,\n              'file:///source/url.map', false, false, 200, true, null, null,\n              Protocol.Debugger.ScriptLanguage.JavaScript, [{\n                type: Protocol.Debugger.DebugSymbolsType.SourceMap,\n                externalURL: 'file:///source/url.map',\n              }],\n              null);\n\n          assert.isTrue(endpointSpy.calledOnce);\n          assert.strictEqual(\n              (endpointSpy.thisValues[0] as Extensions.LanguageExtensionEndpoint.LanguageExtensionEndpoint)\n                  .allowFileAccess,\n              allowFileAccess);\n        });\n      });\n}\n\ndescribeWithDevtoolsExtension('validate attachSourceMapURL ', {}, context => {\n  it('correctly attaches a source map to a registered script', async () => {\n    const sourceRoot = 'http://example.com';\n    const scriptName = 'script.ts';\n    const scriptInfo = {\n      url: urlString`${sourceRoot}/script.js`,\n      content: 'function f(x) { console.log(x); } function ignore(y){ console.log(y); }',\n    };\n    const sourceMap = encodeSourceMap(\n        [\n          `0:9 => ${scriptName}:0:1`,\n          `1:0 => ${scriptName}:4:0`,\n          `1:2 => ${scriptName}:4:2`,\n          `2:0 => ${scriptName}:2:0`,\n        ],\n        sourceRoot);\n\n    const sourceMapString = {\n      version: 3,\n      names: ['f', 'console', 'log', 'ignore'],\n      sources: [scriptInfo.url],\n      mappings: sourceMap.mappings,\n      file: `${scriptInfo.url}.map`,\n    };\n\n    const target = createTarget({type: SDK.Target.Type.FRAME});\n    const targetManager = target.targetManager();\n    const workspace = Workspace.Workspace.WorkspaceImpl.instance();\n    const resourceMapping = new Bindings.ResourceMapping.ResourceMapping(targetManager, workspace);\n    const debuggerWorkspaceBinding = Bindings.DebuggerWorkspaceBinding.DebuggerWorkspaceBinding.instance(\n        {forceNew: false, resourceMapping, targetManager});\n    const backend = new MockProtocolBackend();\n    Bindings.IgnoreListManager.IgnoreListManager.instance({forceNew: false, debuggerWorkspaceBinding});\n\n    // Before any script is registered, there shouldn't be any uiSourceCodes.\n    assert.isNull(Workspace.Workspace.WorkspaceImpl.instance().uiSourceCodeForURL(scriptInfo.url));\n\n    // Create promise to await the uiSourceCode given the url and its target.\n    const uiSourceCodePromise = debuggerWorkspaceBinding.waitForUISourceCodeAdded(scriptInfo.url, target);\n\n    // Register the script.\n    const currentScript = await backend.addScript(target, scriptInfo, null);\n\n    // Await the promise for sourceCode to be added.\n    await uiSourceCodePromise;\n\n    assert.exists(context.chrome.devtools);\n\n    const resources = await new Promise<Chrome.DevTools.Resource[]>(r => {\n      context.chrome.devtools?.inspectedWindow.getResources(r);\n    });\n\n    // Validate that resource is registered.\n    assert.isTrue(resources && resources.length > 0);\n\n    // Script should not have a source map url attached yet.\n    assert.notExists(currentScript.sourceMapURL);\n\n    // Call attachSourceMapURL with encoded source map as a dataURL\n    const scriptResource = resources.find(item => item.url === scriptInfo.url.toString());\n    const encodedSourceMap = `data:text/plain;base64,${btoa(JSON.stringify(sourceMapString))}`;\n\n    await scriptResource?.attachSourceMapURL(encodedSourceMap);\n\n    // Validate that the script has the sourcemap dataURL attached.\n    assert.deepEqual(currentScript.sourceMapURL, encodedSourceMap);\n  });\n});\n"]}