{"version":3,"file":"DebuggerLanguagePlugins.test.js","sourceRoot":"","sources":["../../../../../../front_end/models/bindings/DebuggerLanguagePlugins.test.ts"],"names":[],"mappings":"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","sourcesContent":["// Copyright 2023 The Chromium Authors\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\n\nimport type {Chrome} from '../../../extension-api/ExtensionAPI.js';\nimport * as Platform from '../../core/platform/platform.js';\nimport * as SDK from '../../core/sdk/sdk.js';\nimport type * as Protocol from '../../generated/protocol.js';\nimport {createTarget} from '../../testing/EnvironmentHelpers.js';\nimport {TestPlugin} from '../../testing/LanguagePluginHelpers.js';\nimport {describeWithMockConnection} from '../../testing/MockConnection.js';\nimport {MockProtocolBackend} from '../../testing/MockScopeChain.js';\nimport {protocolCallFrame, stringifyFrame} from '../../testing/StackTraceHelpers.js';\nimport {createContentProviderUISourceCode} from '../../testing/UISourceCodeHelpers.js';\nimport * as StackTrace from '../stack_trace/stack_trace.js';\nimport type * as StackTraceImpl from '../stack_trace/stack_trace_impl.js';\nimport * as Workspace from '../workspace/workspace.js';\n\nimport * as Bindings from './bindings.js';\n\nconst {urlString} = Platform.DevToolsPath;\n\ndescribe('ExtensionRemoteObject', () => {\n  describe('isLinearMemoryInspectable', () => {\n    it('yields false when the extension object has no linear memory address', () => {\n      const callFrame = sinon.createStubInstance(SDK.DebuggerModel.CallFrame);\n      const extensionObject: Chrome.DevTools.RemoteObject = {\n        type: 'object',\n        hasChildren: false,\n      };\n      const plugin = new TestPlugin('TestPlugin');\n      const remoteObject =\n          new Bindings.DebuggerLanguagePlugins.ExtensionRemoteObject(callFrame, extensionObject, plugin);\n      assert.isFalse(remoteObject.isLinearMemoryInspectable());\n    });\n\n    it('yields true when the extension object has a linear memory address', () => {\n      const callFrame = sinon.createStubInstance(SDK.DebuggerModel.CallFrame);\n      const extensionObject: Chrome.DevTools.RemoteObject = {\n        type: 'object',\n        linearMemoryAddress: 42,\n        hasChildren: false,\n      };\n      const plugin = new TestPlugin('TestPlugin');\n      const remoteObject =\n          new Bindings.DebuggerLanguagePlugins.ExtensionRemoteObject(callFrame, extensionObject, plugin);\n      assert.isTrue(remoteObject.isLinearMemoryInspectable());\n    });\n  });\n});\n\ndescribe('DebuggerLanguagePluginManager', () => {\n  describeWithMockConnection('getFunctionInfo', () => {\n    let target: SDK.Target.Target;\n    let pluginManager: Bindings.DebuggerLanguagePlugins.DebuggerLanguagePluginManager;\n\n    const MISSING_DWO_FILE = 'test.dwo';\n    const MISSING_DEBUG_FILES: SDK.DebuggerModel.MissingDebugFiles = {\n      resourceUrl: urlString`${MISSING_DWO_FILE}`,\n      initiator: {\n        target: null,\n        frameId: null,\n        extensionId: 'chrome-extension-id',\n        initiatorUrl: urlString`chrome-extension-id`,\n      },\n    };\n    const FUNCTION_NAME = 'test';\n\n    class Plugin extends TestPlugin {\n      override getFunctionInfo(_rawLocation: Chrome.DevTools.RawLocation):\n          Promise<{frames: Chrome.DevTools.FunctionInfo[], missingSymbolFiles: string[]}|\n                  {frames: Chrome.DevTools.FunctionInfo[]}|{missingSymbolFiles: string[]}> {\n        return Promise.resolve({missingSymbolFiles: []});\n      }\n      override handleScript(_: SDK.Script.Script) {\n        return true;\n      }\n      override addRawModule(_rawModuleId: string, _symbolsURL: string, _rawModule: Chrome.DevTools.RawModule):\n          Promise<string[]> {\n        return Promise.resolve(['https://script-host/script.js']);\n      }\n    }\n\n    beforeEach(() => {\n      target = createTarget();\n      const workspace = Workspace.Workspace.WorkspaceImpl.instance();\n      const targetManager = target.targetManager();\n      const resourceMapping = new Bindings.ResourceMapping.ResourceMapping(targetManager, workspace);\n      const ignoreListManager = Workspace.IgnoreListManager.IgnoreListManager.instance({forceNew: true});\n      const debuggerWorkspaceBinding = Bindings.DebuggerWorkspaceBinding.DebuggerWorkspaceBinding.instance({\n        forceNew: true,\n        resourceMapping,\n        targetManager,\n        ignoreListManager,\n      });\n      pluginManager = debuggerWorkspaceBinding.pluginManager;\n    });\n\n    function createAndRegisterScript(): SDK.Script.Script {\n      const debuggerModel = target.model(SDK.DebuggerModel.DebuggerModel) as SDK.DebuggerModel.DebuggerModel;\n      const scriptUrl = urlString`https://script-host/script.js`;\n      return debuggerModel.parsedScriptSource(\n          '0' as Protocol.Runtime.ScriptId, scriptUrl, 0, 0, 0, 0, 0, '', null, false, undefined, false, false, 0, null,\n          null, null, null, null, null, null);\n    }\n\n    it('correctly processes missing debug info if available', async () => {\n      const plugin = new Plugin('TestPlugin');\n      sinon.stub(plugin, 'getFunctionInfo').returns(Promise.resolve({missingSymbolFiles: [MISSING_DWO_FILE]}));\n      pluginManager.addPlugin(plugin);\n\n      const script = createAndRegisterScript();\n\n      const location = sinon.createStubInstance(SDK.DebuggerModel.Location);\n      const result = await pluginManager.getFunctionInfo(script, location);\n      assert.exists(result);\n      assert.deepEqual(result, {missingSymbolFiles: [MISSING_DEBUG_FILES]});\n    });\n\n    it('correctly returns frames if available', async () => {\n      const plugin = new Plugin('TestPlugin');\n      sinon.stub(plugin, 'getFunctionInfo').returns(Promise.resolve({frames: [{name: FUNCTION_NAME}]}));\n      pluginManager.addPlugin(plugin);\n\n      const script = createAndRegisterScript();\n      const location = sinon.createStubInstance(SDK.DebuggerModel.Location);\n\n      const result = await pluginManager.getFunctionInfo(script, location);\n      assert.exists(result);\n      assert.deepEqual(result, {frames: [{name: FUNCTION_NAME}]});\n    });\n\n    it('correctly returns frames and missing debug info if both are available', async () => {\n      const plugin = new Plugin('TestPlugin');\n      sinon.stub(plugin, 'getFunctionInfo')\n          .returns(Promise.resolve({frames: [{name: FUNCTION_NAME}], missingSymbolFiles: [MISSING_DWO_FILE]}));\n      pluginManager.addPlugin(plugin);\n\n      const script = createAndRegisterScript();\n      const location = sinon.createStubInstance(SDK.DebuggerModel.Location);\n\n      const result = await pluginManager.getFunctionInfo(script, location);\n      assert.exists(result);\n      assert.deepEqual(result, {frames: [{name: FUNCTION_NAME}], missingSymbolFiles: [MISSING_DEBUG_FILES]});\n    });\n  });\n\n  describeWithMockConnection('translateRawFramesStep', () => {\n    function setup() {\n      const target = createTarget();\n      const backend = new MockProtocolBackend();\n      const debuggerWorkspaceBinding =\n          sinon.createStubInstance(Bindings.DebuggerWorkspaceBinding.DebuggerWorkspaceBinding);\n      const workspace = sinon.createStubInstance(Workspace.Workspace.WorkspaceImpl);\n      const pluginManager = new Bindings.DebuggerLanguagePlugins.DebuggerLanguagePluginManager(\n          target.targetManager(), workspace, debuggerWorkspaceBinding);\n      return {target, backend, pluginManager};\n    }\n\n    it('returns false if no plugin is registered for the top-most frame', async () => {\n      const {target, backend, pluginManager} = setup();\n      const script = await backend.addScript(target, {url: urlString`foo.js`, content: ''}, null);\n      const rawFrames = [protocolCallFrame(`${script.sourceURL}:${script.scriptId}:foo:1:10`)];\n\n      assert.isFalse(await pluginManager.translateRawFramesStep(rawFrames, [], target));\n      assert.lengthOf(rawFrames, 1);\n    });\n\n    it('identity maps the frame with a NO_INFO status when the plugin returns an empty array', async () => {\n      const {target, backend, pluginManager} = setup();\n      const script = await backend.addScript(target, {url: urlString`foo.js`, content: ''}, null);\n      const plugin = new (class extends TestPlugin {\n        override getFunctionInfo(_rawLocation: Chrome.DevTools.RawLocation):\n            Promise<{frames: Chrome.DevTools.FunctionInfo[], missingSymbolFiles: string[]}|\n                    {frames: Chrome.DevTools.FunctionInfo[]}|{missingSymbolFiles: string[]}> {\n          return Promise.resolve({frames: []});\n        }\n        override handleScript(_: SDK.Script.Script) {\n          return true;\n        }\n      })('TestPlugin');\n      pluginManager.addPlugin(plugin);\n      const rawFrames = [protocolCallFrame(`${script.sourceURL}:${script.scriptId}:foo:1:10`)];\n      const translatedFrames: Awaited<ReturnType<StackTraceImpl.StackTraceModel.TranslateRawFrames>> = [];\n\n      assert.isTrue(await pluginManager.translateRawFramesStep(rawFrames, translatedFrames, target));\n\n      assert.lengthOf(rawFrames, 0);\n      assert.lengthOf(translatedFrames, 1);\n      assert.strictEqual(translatedFrames[0].map(stringifyFrame).join('\\n'), 'at foo (foo.js:1:10)');\n      assert.strictEqual(\n          translatedFrames[0][0].missingDebugInfo?.type, StackTrace.StackTrace.MissingDebugInfoType.NO_INFO);\n    });\n\n    it('identity maps the frame with a PARTIAL_INFO status when the plugin returns missing debug symbols', async () => {\n      const {target, backend, pluginManager} = setup();\n      const script = await backend.addScript(target, {url: urlString`foo.js`, content: ''}, null);\n      const plugin = new (class extends TestPlugin {\n        override getFunctionInfo(_rawLocation: Chrome.DevTools.RawLocation):\n            Promise<{frames: Chrome.DevTools.FunctionInfo[], missingSymbolFiles: string[]}|\n                    {frames: Chrome.DevTools.FunctionInfo[]}|{missingSymbolFiles: string[]}> {\n          return Promise.resolve({missingSymbolFiles: ['foo.dwo']});\n        }\n        override handleScript(_: SDK.Script.Script) {\n          return true;\n        }\n      })('TestPlugin');\n      pluginManager.addPlugin(plugin);\n      const rawFrames = [protocolCallFrame(`${script.sourceURL}:${script.scriptId}:foo:1:10`)];\n      const translatedFrames: Awaited<ReturnType<StackTraceImpl.StackTraceModel.TranslateRawFrames>> = [];\n\n      assert.isTrue(await pluginManager.translateRawFramesStep(rawFrames, translatedFrames, target));\n\n      assert.lengthOf(rawFrames, 0);\n      assert.lengthOf(translatedFrames, 1);\n      assert.strictEqual(translatedFrames[0].map(stringifyFrame).join('\\n'), 'at foo (foo.js:1:10)');\n      assert.deepEqual(translatedFrames[0][0].missingDebugInfo, {\n        type: StackTrace.StackTrace.MissingDebugInfoType.PARTIAL_INFO,\n        missingDebugFiles: [{resourceUrl: urlString`foo.dwo`, initiator: plugin.createPageResourceLoadInitiator()}],\n      });\n    });\n\n    it('translates one frame at a time', async () => {\n      const {target, backend, pluginManager} = setup();\n      sinon.stub(pluginManager, 'uiSourceCodeForURL')\n          .callsFake(\n              (_model, url) => createContentProviderUISourceCode({url, target, mimeType: 'text/plain'}).uiSourceCode);\n      const script = await backend.addScript(target, {url: urlString`foo.js`, content: ''}, null);\n      const plugin = new (class extends TestPlugin {\n        override getFunctionInfo(rawLocation: Chrome.DevTools.RawLocation):\n            Promise<{frames: Chrome.DevTools.FunctionInfo[], missingSymbolFiles: string[]}|\n                    {frames: Chrome.DevTools.FunctionInfo[]}|{missingSymbolFiles: string[]}> {\n          const name = rawLocation.codeOffset === 10 ? 'foo' : rawLocation.codeOffset === 20 ? 'bar' : 'unknown';\n          return Promise.resolve({frames: [{name}]});\n        }\n        override handleScript(_: SDK.Script.Script) {\n          return true;\n        }\n        override rawLocationToSourceLocation(rawLocation: Chrome.DevTools.RawLocation):\n            Promise<Chrome.DevTools.SourceLocation[]> {\n          const sourceFileURL = rawLocation.codeOffset === 10 ? 'foo.cc' :\n              rawLocation.codeOffset === 20                   ? 'bar.cc' :\n                                                                'unknown';\n          return Promise.resolve([{\n            rawModuleId: rawLocation.rawModuleId,\n            sourceFileURL,\n            lineNumber: rawLocation.codeOffset / 10,\n            columnNumber: rawLocation.codeOffset / 2,\n          }]);\n        }\n      })('TestPlugin');\n      pluginManager.addPlugin(plugin);\n      const rawFrames = [\n        `${script.sourceURL}:${script.scriptId}::0:10`,\n        `${script.sourceURL}:${script.scriptId}::0:20`,\n      ].map(protocolCallFrame);\n      const translatedFrames: Awaited<ReturnType<StackTraceImpl.StackTraceModel.TranslateRawFrames>> = [];\n\n      assert.isTrue(await pluginManager.translateRawFramesStep(rawFrames, translatedFrames, target));\n\n      assert.lengthOf(rawFrames, 1);\n      assert.lengthOf(translatedFrames, 1);\n      assert.strictEqual(translatedFrames[0].map(stringifyFrame).join('\\n'), 'at foo (foo.cc:1:5)');\n\n      assert.isTrue(await pluginManager.translateRawFramesStep(rawFrames, translatedFrames, target));\n\n      assert.lengthOf(rawFrames, 0);\n      assert.lengthOf(translatedFrames, 2);\n      assert.strictEqual(translatedFrames[1].map(stringifyFrame).join('\\n'), 'at bar (bar.cc:2:10)');\n    });\n\n    it('translates inlined frames correctly', async () => {\n      const {target, backend, pluginManager} = setup();\n      sinon.stub(pluginManager, 'uiSourceCodeForURL')\n          .callsFake(\n              (_model, url) => createContentProviderUISourceCode({url, target, mimeType: 'text/plain'}).uiSourceCode);\n      const script = await backend.addScript(target, {url: urlString`foo.js`, content: ''}, null);\n      const plugin = new (class extends TestPlugin {\n        override getFunctionInfo(_rawLocation: Chrome.DevTools.RawLocation):\n            Promise<{frames: Chrome.DevTools.FunctionInfo[], missingSymbolFiles: string[]}|\n                    {frames: Chrome.DevTools.FunctionInfo[]}|{missingSymbolFiles: string[]}> {\n          return Promise.resolve({frames: [{name: 'foo'}, {name: 'bar'}]});\n        }\n        override handleScript(_: SDK.Script.Script) {\n          return true;\n        }\n        override rawLocationToSourceLocation(rawLocation: Chrome.DevTools.RawLocation):\n            Promise<Chrome.DevTools.SourceLocation[]> {\n          const sourceFileURL = rawLocation.inlineFrameIndex === 0 ? 'foo.cc' :\n              rawLocation.inlineFrameIndex === 1                   ? 'bar.cc' :\n                                                                     'unknown';\n          return Promise.resolve([{\n            rawModuleId: rawLocation.rawModuleId,\n            sourceFileURL,\n            lineNumber: (rawLocation.inlineFrameIndex + 1) * 2,\n            columnNumber: (rawLocation.inlineFrameIndex + 1) * 5,\n          }]);\n        }\n      })('TestPlugin');\n      pluginManager.addPlugin(plugin);\n      const rawFrames = [protocolCallFrame(`${script.sourceURL}:${script.scriptId}::0:10`)];\n      const translatedFrames: Awaited<ReturnType<StackTraceImpl.StackTraceModel.TranslateRawFrames>> = [];\n\n      assert.isTrue(await pluginManager.translateRawFramesStep(rawFrames, translatedFrames, target));\n\n      assert.lengthOf(rawFrames, 0);\n      assert.lengthOf(translatedFrames, 1);\n      assert.deepEqual(translatedFrames[0].map(stringifyFrame), [\n        'at foo (foo.cc:2:5)',\n        'at bar (bar.cc:4:10)',\n      ]);\n    });\n  });\n});\n"]}