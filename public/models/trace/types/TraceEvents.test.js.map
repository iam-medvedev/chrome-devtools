{"version":3,"file":"TraceEvents.test.js","sourceRoot":"","sources":["../../../../../../../front_end/models/trace/types/TraceEvents.test.ts"],"names":[],"mappings":"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","sourcesContent":["// Copyright 2023 The Chromium Authors. All rights reserved.\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\n\nimport {describeWithEnvironment} from '../../../testing/EnvironmentHelpers.js';\nimport {TraceLoader} from '../../../testing/TraceLoader.js';\nimport * as Trace from '../trace.js';\n\ndescribeWithEnvironment('TraceEvent types', function() {\n  const {Phase, isNestableAsyncPhase, isPhaseAsync, isFlowPhase} = Trace.Types.Events;\n  it('is able to determine if a phase is a nestable async phase', function() {\n    assert.isTrue(isNestableAsyncPhase(Phase.ASYNC_NESTABLE_START));\n    assert.isTrue(isNestableAsyncPhase(Phase.ASYNC_NESTABLE_END));\n    assert.isTrue(isNestableAsyncPhase(Phase.ASYNC_NESTABLE_INSTANT));\n  });\n\n  it('is able to determine if a phase is not a nestable async phase', function() {\n    assert.isFalse(isNestableAsyncPhase(Phase.BEGIN));\n    assert.isFalse(isNestableAsyncPhase(Phase.END));\n    assert.isFalse(isNestableAsyncPhase(Phase.ASYNC_BEGIN));\n  });\n\n  it('is able to determine if a phase is an async phase', function() {\n    assert.isTrue(isPhaseAsync(Phase.ASYNC_NESTABLE_START));\n    assert.isTrue(isPhaseAsync(Phase.ASYNC_NESTABLE_END));\n    assert.isTrue(isPhaseAsync(Phase.ASYNC_NESTABLE_INSTANT));\n    assert.isTrue(isPhaseAsync(Phase.ASYNC_BEGIN));\n    assert.isTrue(isPhaseAsync(Phase.ASYNC_STEP_INTO));\n    assert.isTrue(isPhaseAsync(Phase.ASYNC_STEP_PAST));\n    assert.isTrue(isPhaseAsync(Phase.ASYNC_END));\n  });\n\n  it('is able to determine if a phase is not an async phase', function() {\n    assert.isFalse(isPhaseAsync(Phase.BEGIN));\n    assert.isFalse(isPhaseAsync(Phase.METADATA));\n    assert.isFalse(isPhaseAsync(Phase.OBJECT_CREATED));\n  });\n\n  it('is able to determine if a phase is a flow phase', function() {\n    assert.isTrue(isFlowPhase(Phase.FLOW_START));\n    assert.isTrue(isFlowPhase(Phase.FLOW_STEP));\n    assert.isTrue(isFlowPhase(Phase.FLOW_END));\n  });\n\n  it('is able to determine if a phase is not a flow phase', function() {\n    assert.isFalse(isFlowPhase(Phase.ASYNC_STEP_INTO));\n    assert.isFalse(isFlowPhase(Phase.ASYNC_NESTABLE_START));\n    assert.isFalse(isFlowPhase(Phase.BEGIN));\n  });\n\n  it('is able to determine that an event is a synthetic user timing event', async function() {\n    const {parsedTrace} = await TraceLoader.traceEngine(this, 'timings-track.json.gz');\n    const timingEvent = parsedTrace.UserTimings.performanceMeasures[0];\n    assert.isTrue(Trace.Types.Events.isSyntheticUserTiming(timingEvent));\n    const consoleEvent = parsedTrace.UserTimings.consoleTimings[0];\n    assert.isFalse(Trace.Types.Events.isSyntheticUserTiming(consoleEvent));\n  });\n\n  it('is able to determine that an event is a synthetic console event', async function() {\n    const {parsedTrace} = await TraceLoader.traceEngine(this, 'timings-track.json.gz');\n    const consoleEvent = parsedTrace.UserTimings.consoleTimings[0];\n    assert.isTrue(Trace.Types.Events.isSyntheticConsoleTiming(consoleEvent));\n    const timingEvent = parsedTrace.UserTimings.performanceMeasures[0];\n    assert.isFalse(Trace.Types.Events.isSyntheticConsoleTiming(timingEvent));\n  });\n\n  it('is able to detemrine that an event is a synthetic network request event', async function() {\n    const {parsedTrace} = await TraceLoader.traceEngine(this, 'lcp-images.json.gz');\n    const networkEvent = parsedTrace.NetworkRequests.byTime[0];\n    assert.isTrue(Trace.Types.Events.isSyntheticNetworkRequest(networkEvent));\n    const otherEvent = parsedTrace.Renderer.allTraceEntries[0];\n    assert.isFalse(Trace.Types.Events.isSyntheticNetworkRequest(otherEvent));\n  });\n\n  it('is able to determine that an event is a synthetic layout shift event', async function() {\n    const {parsedTrace} = await TraceLoader.traceEngine(this, 'cls-single-frame.json.gz');\n    const syntheticLayoutShift = parsedTrace.LayoutShifts.clusters[0].events[0];\n    assert.isTrue(Trace.Types.Events.isSyntheticLayoutShift(syntheticLayoutShift));\n  });\n\n  it('is able to identify that an event is a legacy timeline frame', async function() {\n    const {parsedTrace} = await TraceLoader.traceEngine(this, 'web-dev-with-commit.json.gz');\n    const frame = parsedTrace.Frames.frames.at(0);\n    assert.isOk(frame);\n    assert.isTrue(Trace.Types.Events.isLegacyTimelineFrame(frame));\n\n    const networkEvent = parsedTrace.NetworkRequests.byTime.at(0);\n    assert.isOk(networkEvent);\n    assert.isFalse(Trace.Types.Events.isLegacyTimelineFrame(networkEvent));\n  });\n});\n"]}