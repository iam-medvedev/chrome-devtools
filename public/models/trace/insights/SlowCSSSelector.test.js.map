{"version":3,"file":"SlowCSSSelector.test.js","sourceRoot":"","sources":["../../../../../../../front_end/models/trace/insights/SlowCSSSelector.test.ts"],"names":[],"mappings":"AAAA,4DAA4D;AAC5D,yEAAyE;AACzE,6BAA6B;AAE7B,OAAO,EAAC,uBAAuB,EAAC,MAAM,wCAAwC,CAAC;AAC/E,OAAO,EAAC,iBAAiB,EAAE,YAAY,EAAC,MAAM,oCAAoC,CAAC;AAEnF,uBAAuB,CAAC,uBAAuB,EAAE;IAC/C,EAAE,CAAC,0BAA0B,EAAE,KAAK;QAClC,MAAM,EAAC,IAAI,EAAE,QAAQ,EAAC,GAAG,MAAM,YAAY,CAAC,IAAI,EAAE,wBAAwB,CAAC,CAAC;QAC5E,MAAM,CAAC,WAAW,CAAC,QAAQ,CAAC,IAAI,EAAE,CAAC,CAAC,CAAC;QACrC,MAAM,OAAO,GACT,iBAAiB,CAAC,iBAAiB,EAAE,QAAQ,EAAE,IAAI,CAAC,IAAI,CAAC,yBAAyB,CAAC,MAAM,EAAE,CAAC,IAAI,EAAE,CAAC,KAAK,CAAC,CAAC;QAE9G,MAAM,CAAC,WAAW,CAAC,OAAO,CAAC,cAAc,EAAE,GAAG,CAAC,CAAC;QAChD,MAAM,CAAC,WAAW,CAAC,OAAO,CAAC,kBAAkB,EAAE,IAAI,CAAC,CAAC;QACrD,MAAM,CAAC,WAAW,CAAC,OAAO,CAAC,eAAe,EAAE,GAAG,CAAC,CAAC;QAEjD,MAAM,oBAAoB,GAAG,OAAO,CAAC,oBAAoB,CAAC;QAC1D,MAAM,wBAAwB,GAAG,OAAO,CAAC,wBAAwB,CAAC;QAElE,MAAM,CAAC,MAAM,CAAC,oBAAoB,CAAC,CAAC;QACpC,MAAM,CAAC,SAAS,CAAC,wBAAwB,CAAC,CAAC;QAE3C,MAAM,CAAC,WAAW,CAAC,wBAAwB,CAAC,QAAQ,EAAE,sBAAsB,CAAC,CAAC;QAC9E,MAAM,CAAC,WAAW,CAAC,wBAAwB,CAAC,cAAc,EAAE,GAAG,CAAC,CAAC;IACnE,CAAC,CAAC,CAAC;IAEH,EAAE,CAAC,sCAAsC,EAAE,KAAK;QAC9C,MAAM,EAAC,IAAI,EAAE,QAAQ,EAAC,GAAG,MAAM,YAAY,CAAC,IAAI,EAAE,mCAAmC,CAAC,CAAC;QACvF,MAAM,CAAC,WAAW,CAAC,QAAQ,CAAC,IAAI,EAAE,CAAC,CAAC,CAAC;QACrC,MAAM,OAAO,GACT,iBAAiB,CAAC,iBAAiB,EAAE,QAAQ,EAAE,IAAI,CAAC,IAAI,CAAC,yBAAyB,CAAC,MAAM,EAAE,CAAC,IAAI,EAAE,CAAC,KAAK,CAAC,CAAC;QAE9G,MAAM,CAAC,WAAW,CAAC,OAAO,CAAC,cAAc,EAAE,KAAK,CAAC,CAAC;QAClD,MAAM,CAAC,WAAW,CAAC,OAAO,CAAC,kBAAkB,EAAE,EAAE,CAAC,CAAC;QACnD,MAAM,CAAC,WAAW,CAAC,OAAO,CAAC,eAAe,EAAE,EAAE,CAAC,CAAC;QAEhD,MAAM,oBAAoB,GAAG,OAAO,CAAC,oBAAoB,CAAC;QAC1D,MAAM,wBAAwB,GAAG,OAAO,CAAC,wBAAwB,CAAC;QAElE,MAAM,CAAC,MAAM,CAAC,oBAAoB,CAAC,CAAC;QACpC,MAAM,CAAC,SAAS,CAAC,wBAAwB,CAAC,CAAC;QAE3C,MAAM,CAAC,WAAW,CAAC,wBAAwB,CAAC,QAAQ,EAAE,QAAQ,CAAC,CAAC;QAChE,MAAM,CAAC,WAAW,CAAC,wBAAwB,CAAC,cAAc,EAAE,CAAC,CAAC,CAAC;IACjE,CAAC,CAAC,CAAC;AACL,CAAC,CAAC,CAAC","sourcesContent":["// Copyright 2024 The Chromium Authors. All rights reserved.\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\n\nimport {describeWithEnvironment} from '../../../testing/EnvironmentHelpers.js';\nimport {getInsightOrError, processTrace} from '../../../testing/InsightHelpers.js';\n\ndescribeWithEnvironment('SelectorStatsInsights', function() {\n  it('generates slow selectors', async function() {\n    const {data, insights} = await processTrace(this, 'selector-stats.json.gz');\n    assert.strictEqual(insights.size, 1);\n    const insight =\n        getInsightOrError('SlowCSSSelector', insights, data.Meta.navigationsByNavigationId.values().next().value);\n\n    assert.strictEqual(insight.totalElapsedMs, 0.1);\n    assert.strictEqual(insight.totalMatchAttempts, 2444);\n    assert.strictEqual(insight.totalMatchCount, 465);\n\n    const topSelectorElapsedMs = insight.topSelectorElapsedMs;\n    const topSelectorMatchAttempts = insight.topSelectorMatchAttempts;\n\n    assert.isNull(topSelectorElapsedMs);\n    assert.isNotNull(topSelectorMatchAttempts);\n\n    assert.strictEqual(topSelectorMatchAttempts.selector, '.gb_Bd > :only-child');\n    assert.strictEqual(topSelectorMatchAttempts.match_attempts, 169);\n  });\n\n  it('generates slow selectors by frame ID', async function() {\n    const {data, insights} = await processTrace(this, 'selector-stats-frame-test.json.gz');\n    assert.strictEqual(insights.size, 1);\n    const insight =\n        getInsightOrError('SlowCSSSelector', insights, data.Meta.navigationsByNavigationId.values().next().value);\n\n    assert.strictEqual(insight.totalElapsedMs, 0.017);\n    assert.strictEqual(insight.totalMatchAttempts, 32);\n    assert.strictEqual(insight.totalMatchCount, 16);\n\n    const topSelectorElapsedMs = insight.topSelectorElapsedMs;\n    const topSelectorMatchAttempts = insight.topSelectorMatchAttempts;\n\n    assert.isNull(topSelectorElapsedMs);\n    assert.isNotNull(topSelectorMatchAttempts);\n\n    assert.strictEqual(topSelectorMatchAttempts.selector, 'iframe');\n    assert.strictEqual(topSelectorMatchAttempts.match_attempts, 4);\n  });\n});\n"]}