{"version":3,"file":"DOMSize.test.js","sourceRoot":"","sources":["../../../../../../../front_end/models/trace/insights/DOMSize.test.ts"],"names":[],"mappings":"AAAA,4DAA4D;AAC5D,yEAAyE;AACzE,6BAA6B;AAE7B,OAAO,EAAC,uBAAuB,EAAC,MAAM,wCAAwC,CAAC;AAC/E,OAAO,EAAC,eAAe,EAAE,iBAAiB,EAAE,YAAY,EAAC,MAAM,oCAAoC,CAAC;AAEpG,uBAAuB,CAAC,SAAS,EAAE;IACjC,EAAE,CAAC,6DAA6D,EAC7D,KAAK,IAAI,EAAE;QACT,MAAM,EAAC,IAAI,EAAE,QAAQ,EAAC,GAAG,MAAM,YAAY,CAAC,IAAI,EAAE,kBAAkB,CAAC,CAAC;QAEtE,+DAA+D;QAC/D,CAAC;YACC,MAAM,OAAO,GAAG,iBAAiB,CAAC,SAAS,EAAE,QAAQ,CAAC,CAAC;YACvD,MAAM,CAAC,QAAQ,CAAC,OAAO,CAAC,kBAAkB,EAAE,CAAC,CAAC,CAAC;YAC/C,MAAM,CAAC,QAAQ,CAAC,OAAO,CAAC,iBAAiB,EAAE,CAAC,CAAC,CAAC;QAChD,CAAC;QAED,8DAA8D;QAC9D,CAAC;YACC,MAAM,OAAO,GACT,iBAAiB,CAAC,SAAS,EAAE,QAAQ,EAAE,eAAe,CAAC,IAAI,CAAC,IAAI,CAAC,yBAAyB,CAAC,MAAM,EAAE,CAAC,CAAC,CAAC;YAC1G,MAAM,CAAC,QAAQ,CAAC,OAAO,CAAC,kBAAkB,EAAE,CAAC,CAAC,CAAC;YAC/C,MAAM,CAAC,QAAQ,CAAC,OAAO,CAAC,iBAAiB,EAAE,CAAC,CAAC,CAAC;QAChD,CAAC;IACH,CAAC,CAAC;QACD,8EAA8E;QAC9E,cAAc;SACb,OAAO,CAAC,MAAM,CAAC,CAAC;AACvB,CAAC,CAAC,CAAC","sourcesContent":["// Copyright 2024 The Chromium Authors. All rights reserved.\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\n\nimport {describeWithEnvironment} from '../../../testing/EnvironmentHelpers.js';\nimport {getFirstOrError, getInsightOrError, processTrace} from '../../../testing/InsightHelpers.js';\n\ndescribeWithEnvironment('DOMSize', function() {\n  it('finds layout reflows and style recalcs affected by DOM size',\n     async () => {\n       const {data, insights} = await processTrace(this, 'dom-size.json.gz');\n\n       // 1 large DOM update was triggered before the first navigation\n       {\n         const insight = getInsightOrError('DOMSize', insights);\n         assert.lengthOf(insight.largeLayoutUpdates, 1);\n         assert.lengthOf(insight.largeStyleRecalcs, 1);\n       }\n\n       // 1 large DOM update was triggered after the first navigation\n       {\n         const insight =\n             getInsightOrError('DOMSize', insights, getFirstOrError(data.Meta.navigationsByNavigationId.values()));\n         assert.lengthOf(insight.largeLayoutUpdates, 1);\n         assert.lengthOf(insight.largeStyleRecalcs, 1);\n       }\n     })\n      // Processing the above trace can take a while due to a performance bottleneck\n      // b/382545507\n      .timeout(30_000);\n});\n"]}