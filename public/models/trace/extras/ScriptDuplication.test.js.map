{"version":3,"file":"ScriptDuplication.test.js","sourceRoot":"","sources":["../../../../../../../front_end/models/trace/extras/ScriptDuplication.test.ts"],"names":[],"mappings":"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","sourcesContent":["// Copyright 2025 The Chromium Authors. All rights reserved.\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\n\nimport * as Platform from '../../../core/platform/platform.js';\nimport * as SDK from '../../../core/sdk/sdk.js';\nimport type * as Protocol from '../../../generated/protocol.js';\nimport {describeWithEnvironment} from '../../../testing/EnvironmentHelpers.js';\nimport {fetchFixture} from '../../../testing/TraceLoader.js';\nimport * as Trace from '../trace.js';\n\nasync function loadScriptFixture(\n    name: string, modify?: (fixture: {content: string, sourceMapJson: SDK.SourceMap.SourceMapV3Object}) => void):\n    Promise<Trace.Handlers.ModelHandlers.Scripts.Script> {\n  const content =\n      await fetchFixture(new URL(`../../../panels/timeline/fixtures/traces/scripts/${name}.js.gz`, import.meta.url));\n  const mapText = await fetchFixture(\n      new URL(`../../../panels/timeline/fixtures/traces/scripts/${name}.js.map.gz`, import.meta.url));\n  const sourceMapJson = JSON.parse(mapText) as SDK.SourceMap.SourceMapV3Object;\n  const fixture = {content, sourceMapJson};\n  if (modify) {\n    modify(fixture);\n  }\n\n  const compiledUrl = Platform.DevToolsPath.urlString`${name}.js`;\n  const mapUrl = Platform.DevToolsPath.urlString`${name}.js.map`;\n  return {\n    isolate: 'iso',\n    scriptId: `1.${name}` as Protocol.Runtime.ScriptId,\n    frame: 'abcdef',\n    ts: 0 as Trace.Types.Timing.Micro,\n    content: fixture.content,\n    sourceMap: new SDK.SourceMap.SourceMap(compiledUrl, mapUrl, fixture.sourceMapJson),\n  };\n}\n\ndescribeWithEnvironment('ScriptDuplication', function() {\n  describe('computeGeneratedFileSizes', () => {\n    it('works (simple map)', async function() {\n      const script = await loadScriptFixture('foo.min');\n      const results = Trace.Extras.ScriptDuplication.computeGeneratedFileSizes(script);\n      assert.deepEqual(results, {\n        files: {\n          'node_modules/browser-pack/_prelude.js': 480,\n          'src/bar.js': 104,\n          'src/foo.js': 98,\n        },\n        totalBytes: 718,\n        unmappedBytes: 36,\n      });\n    });\n\n    it('works (complex map)', async function() {\n      const script = await loadScriptFixture('squoosh');\n      const results = Trace.Extras.ScriptDuplication.computeGeneratedFileSizes(script);\n      assert.deepEqual(results, {\n        files: {\n          'webpack:///node_modules/comlink/comlink.js': 4117,\n          'webpack:///node_modules/linkstate/dist/linkstate.es.js': 412,\n          'webpack:///node_modules/pointer-tracker/dist/PointerTracker.mjs': 2672,\n          'webpack:///node_modules/pretty-bytes/index.js': 635,\n          'webpack:///src/codecs/browser-bmp/encoder-meta.ts': 343,\n          'webpack:///src/codecs/browser-bmp/encoder.ts': 101,\n          'webpack:///src/codecs/browser-gif/encoder-meta.ts': 343,\n          'webpack:///src/codecs/browser-gif/encoder.ts': 101,\n          'webpack:///src/codecs/browser-jp2/encoder-meta.ts': 349,\n          'webpack:///src/codecs/browser-jp2/encoder.ts': 101,\n          'webpack:///src/codecs/browser-jpeg/encoder-meta.ts': 282,\n          'webpack:///src/codecs/browser-jpeg/encoder.ts': 115,\n          'webpack:///src/codecs/browser-jpeg/options.ts': 35,\n          'webpack:///src/codecs/browser-pdf/encoder-meta.ts': 349,\n          'webpack:///src/codecs/browser-pdf/encoder.ts': 101,\n          'webpack:///src/codecs/browser-png/encoder-meta.ts': 268,\n          'webpack:///src/codecs/browser-png/encoder.tsx': 101,\n          'webpack:///src/codecs/browser-tiff/encoder-meta.ts': 347,\n          'webpack:///src/codecs/browser-tiff/encoder.ts': 101,\n          'webpack:///src/codecs/browser-webp/encoder-meta.ts': 358,\n          'webpack:///src/codecs/browser-webp/encoder.ts': 115,\n          'webpack:///src/codecs/browser-webp/options.ts': 34,\n          'webpack:///src/codecs/decoders.ts': 206,\n          'webpack:///src/codecs/encoders.ts': 336,\n          'webpack:///src/codecs/generic/quality-option.tsx': 398,\n          'webpack:///src/codecs/generic/util.ts': 159,\n          'webpack:///src/codecs/identity/encoder-meta.ts': 46,\n          'webpack:///src/codecs/imagequant/options.tsx': 1052,\n          'webpack:///src/codecs/imagequant/processor-meta.ts': 40,\n          'webpack:///src/codecs/input-processors.ts': 11,\n          'webpack:///src/codecs/mozjpeg/encoder-meta.ts': 436,\n          'webpack:///src/codecs/mozjpeg/options.tsx': 4416,\n          'webpack:///src/codecs/optipng/encoder-meta.ts': 59,\n          'webpack:///src/codecs/optipng/options.tsx': 366,\n          'webpack:///src/codecs/preprocessors.ts': 75,\n          'webpack:///src/codecs/processor-worker/index.ts': 50,\n          'webpack:///src/codecs/processor.ts': 2380,\n          'webpack:///src/codecs/resize/options.tsx': 3970,\n          'webpack:///src/codecs/resize/processor-meta.ts': 225,\n          'webpack:///src/codecs/resize/processor-sync.ts': 462,\n          'webpack:///src/codecs/resize/util.ts': 134,\n          'webpack:///src/codecs/rotate/processor-meta.ts': 18,\n          'webpack:///src/codecs/tiny.webp': 89,\n          'webpack:///src/codecs/webp/encoder-meta.ts': 660,\n          'webpack:///src/codecs/webp/options.tsx': 5114,\n          'webpack:///src/components/Options/index.tsx': 2176,\n          'webpack:///src/components/Options/style.scss': 410,\n          'webpack:///src/components/Output/custom-els/PinchZoom/index.ts': 3653,\n          'webpack:///src/components/Output/custom-els/TwoUp/index.ts': 2088,\n          'webpack:///src/components/Output/custom-els/TwoUp/styles.css': 75,\n          'webpack:///src/components/Output/index.tsx': 5199,\n          'webpack:///src/components/Output/style.scss': 447,\n          'webpack:///src/components/checkbox/index.tsx': 247,\n          'webpack:///src/components/checkbox/style.scss': 106,\n          'webpack:///src/components/compress/custom-els/MultiPanel/index.ts': 3461,\n          'webpack:///src/components/compress/custom-els/MultiPanel/styles.css': 105,\n          'webpack:///src/components/compress/index.tsx': 8782,\n          'webpack:///src/components/compress/result-cache.ts': 611,\n          'webpack:///src/components/compress/style.scss': 132,\n          'webpack:///src/components/expander/index.tsx': 901,\n          'webpack:///src/components/expander/style.scss': 66,\n          'webpack:///src/components/range/index.tsx': 566,\n          'webpack:///src/components/range/style.scss': 200,\n          'webpack:///src/components/results/FileSize.tsx': 445,\n          'webpack:///src/components/results/index.tsx': 1538,\n          'webpack:///src/components/results/style.scss': 780,\n          'webpack:///src/components/select/index.tsx': 291,\n          'webpack:///src/components/select/style.scss': 103,\n          'webpack:///src/custom-els/RangeInput/index.ts': 2138,\n          'webpack:///src/custom-els/RangeInput/styles.css': 180,\n          'webpack:///src/lib/clean-modify.ts': 331,\n          'webpack:///src/lib/icons.tsx': 2531,\n          'webpack:///src/lib/util.ts': 4043,\n        },\n        totalBytes: 83748,\n        unmappedBytes: 10061,\n      });\n    });\n\n    it('fault tolerance (null source)', async function() {\n      const script = await loadScriptFixture('foo.min', fixture => {\n        const map = fixture.sourceMapJson;\n        // @ts-expect-error\n        map.sources[1] = null;\n      });\n      const results = Trace.Extras.ScriptDuplication.computeGeneratedFileSizes(script);\n      assert.deepEqual(results, {\n        files: {\n          'node_modules/browser-pack/_prelude.js': 480,\n          null: 104,\n          'src/foo.js': 98,\n        },\n        totalBytes: 718,\n        unmappedBytes: 36,\n      });\n    });\n\n    it('fault tolerance (bogus mappings)', async function() {\n      const script = await loadScriptFixture('foo.min', fixture => {\n        fixture.sourceMapJson.mappings = 'blahblah blah';\n      });\n      const results = Trace.Extras.ScriptDuplication.computeGeneratedFileSizes(script);\n      assert.deepEqual(results, {\n        files: {},\n        totalBytes: 718,\n        unmappedBytes: 718,\n      });\n    });\n\n    it('fault tolerance (mismatched content/map 1)', async function() {\n      const script = await loadScriptFixture('foo.min', fixture => {\n        fixture.content = 'blahblah blah';\n      });\n      const results = Trace.Extras.ScriptDuplication.computeGeneratedFileSizes(script);\n      assert.deepEqual(results, {\n        errorMessage: 'foo.min.js.map mapping for last column out of bounds: 1:14',\n      });\n    });\n\n    it('fault tolerance (mismatched content/map 2)', async function() {\n      const script = await loadScriptFixture('foo.min', fixture => {\n        fixture.content = '';\n      });\n      const results = Trace.Extras.ScriptDuplication.computeGeneratedFileSizes(script);\n      assert.deepEqual(results, {\n        errorMessage: 'foo.min.js.map mapping for column out of bounds: 1:1',\n      });\n    });\n\n    it('fault tolerance (mismatched content/map 3)', async function() {\n      const script = await loadScriptFixture('foo.min', fixture => {\n        const newMappings = fixture.sourceMapJson.mappings.split(',');\n        assert.strictEqual(newMappings[1], 'SAAAA');\n        // Make the column offset very big, force out of bounds.\n        // See https://www.mattzeunert.com/2016/02/14/how-do-source-maps-work.html\n        newMappings[1] = 'kD' +\n            'AAAA';\n        fixture.sourceMapJson.mappings = newMappings.join(',');\n      });\n      const results = Trace.Extras.ScriptDuplication.computeGeneratedFileSizes(script);\n      assert.deepEqual(results, {\n        errorMessage: 'foo.min.js.map mapping for last column out of bounds: 1:685',\n      });\n    });\n\n    it('fault tolerance (mismatched content/map 4)', async function() {\n      const script = await loadScriptFixture('foo.min', fixture => {\n        const newMappings = fixture.sourceMapJson.mappings.split(',');\n        assert.strictEqual(newMappings[1], 'SAAAA');\n        // Make the line offset very big, force out of bounds.\n        // See https://sourcemaps.info/spec.html#:~:text=broken%20down%20as%20follows\n        fixture.sourceMapJson.mappings = ';'.repeat(10) + fixture.sourceMapJson.mappings;\n      });\n      const results = Trace.Extras.ScriptDuplication.computeGeneratedFileSizes(script);\n      assert.deepEqual(results, {\n        errorMessage: 'foo.min.js.map mapping for line out of bounds: 11',\n      });\n    });\n\n    it('fault tolerance (bad names)', async function() {\n      const script = await loadScriptFixture('foo.min', fixture => {\n        fixture.sourceMapJson.names = ['blah'];\n      });\n      const results = Trace.Extras.ScriptDuplication.computeGeneratedFileSizes(script);\n      assert.deepEqual(results, {\n        files: {\n          'node_modules/browser-pack/_prelude.js': 480,\n          'src/bar.js': 104,\n          'src/foo.js': 98,\n        },\n        totalBytes: 718,\n        unmappedBytes: 36,\n      });\n    });\n  });\n\n  describe('computeScriptDuplication', () => {\n    it('works (simple, no duplication)', async () => {\n      const scriptsData: Trace.Handlers.ModelHandlers.Scripts.ScriptsData = {\n        scripts: [await loadScriptFixture('foo.min')],\n      };\n\n      const results = Object.fromEntries(Trace.Extras.ScriptDuplication.computeScriptDuplication(scriptsData));\n      assert.deepEqual(results, {});\n    });\n\n    it('works (complex, lots of duplication)', async () => {\n      const scriptsData: Trace.Handlers.ModelHandlers.Scripts.ScriptsData = {\n        scripts: [await loadScriptFixture('coursehero-bundle-1'), await loadScriptFixture('coursehero-bundle-2')],\n      };\n\n      const results = Object.fromEntries(\n          Trace.Extras.ScriptDuplication.computeScriptDuplication(scriptsData).entries().map(([key, value]) => {\n            return [key, value.map(v => ({scriptId: v.script.scriptId as string, resourceSize: v.resourceSize}))];\n          }));\n      assert.deepEqual(results, {\n        'coursehero:///Control/assets/js/vendor/ng/select/select.js': [\n          {scriptId: '1.coursehero-bundle-1', resourceSize: 48513},\n          {scriptId: '1.coursehero-bundle-2', resourceSize: 48513}\n        ],\n        'coursehero:///Control/assets/js/vendor/ng/select/angular-sanitize.js': [\n          {scriptId: '1.coursehero-bundle-1', resourceSize: 9135},\n          {scriptId: '1.coursehero-bundle-2', resourceSize: 9135}\n        ],\n        'node_modules/@babel/runtime/helpers/inherits.js': [\n          {scriptId: '1.coursehero-bundle-1', resourceSize: 528}, {scriptId: '1.coursehero-bundle-2', resourceSize: 528}\n        ],\n        'node_modules/@babel/runtime/helpers/typeof.js': [\n          {scriptId: '1.coursehero-bundle-1', resourceSize: 992}, {scriptId: '1.coursehero-bundle-2', resourceSize: 992}\n        ],\n        'coursehero:///js/src/utils/service/amplitude-service.ts': [\n          {scriptId: '1.coursehero-bundle-1', resourceSize: 1348},\n          {scriptId: '1.coursehero-bundle-2', resourceSize: 1325}\n        ],\n        'coursehero:///js/src/utils/service/gsa-inmeta-tags.ts': [\n          {scriptId: '1.coursehero-bundle-1', resourceSize: 591}, {scriptId: '1.coursehero-bundle-2', resourceSize: 563}\n        ],\n        'coursehero:///js/src/search/results/store/filter-actions.ts': [\n          {scriptId: '1.coursehero-bundle-2', resourceSize: 956}, {scriptId: '1.coursehero-bundle-1', resourceSize: 946}\n        ],\n        'coursehero:///js/src/search/results/store/item/resource-types.ts': [\n          {scriptId: '1.coursehero-bundle-1', resourceSize: 783}, {scriptId: '1.coursehero-bundle-2', resourceSize: 775}\n        ],\n        'coursehero:///js/src/search/results/store/filter-store.ts': [\n          {scriptId: '1.coursehero-bundle-1', resourceSize: 12717},\n          {scriptId: '1.coursehero-bundle-2', resourceSize: 12650}\n        ],\n        'coursehero:///js/src/search/results/view/filter/autocomplete-list.tsx': [\n          {scriptId: '1.coursehero-bundle-2', resourceSize: 1143},\n          {scriptId: '1.coursehero-bundle-1', resourceSize: 1134}\n        ],\n        'coursehero:///js/src/search/results/view/filter/autocomplete-filter.tsx': [\n          {scriptId: '1.coursehero-bundle-1', resourceSize: 3823},\n          {scriptId: '1.coursehero-bundle-2', resourceSize: 3812}\n        ],\n        'coursehero:///js/src/search/results/view/filter/autocomplete-filter-with-icon.tsx': [\n          {scriptId: '1.coursehero-bundle-1', resourceSize: 2696},\n          {scriptId: '1.coursehero-bundle-2', resourceSize: 2693}\n        ],\n        'coursehero:///js/src/search/results/service/api/filter-api-service.ts': [\n          {scriptId: '1.coursehero-bundle-1', resourceSize: 554}, {scriptId: '1.coursehero-bundle-2', resourceSize: 534}\n        ],\n        'coursehero:///js/src/common/component/school-search.tsx': [\n          {scriptId: '1.coursehero-bundle-2', resourceSize: 5840},\n          {scriptId: '1.coursehero-bundle-1', resourceSize: 5316}\n        ],\n        'coursehero:///js/src/common/component/search/abstract-taxonomy-search.tsx': [\n          {scriptId: '1.coursehero-bundle-1', resourceSize: 3103},\n          {scriptId: '1.coursehero-bundle-2', resourceSize: 3098}\n        ],\n        'coursehero:///js/src/common/component/search/course-search.tsx': [\n          {scriptId: '1.coursehero-bundle-2', resourceSize: 545}, {scriptId: '1.coursehero-bundle-1', resourceSize: 544}\n        ]\n      });\n    });\n  });\n\n  describe('normalizeDuplication', () => {\n    it('removes entries with just one value', () => {\n      const duplication = new Map([['1', [{resourceSize: 100}]]]) as Trace.Extras.ScriptDuplication.ScriptDuplication;\n      Trace.Extras.ScriptDuplication.normalizeDuplication(duplication);\n      const results = Object.fromEntries(duplication);\n      assert.deepEqual(results, {});\n    });\n\n    it('sorts entries based on resource size', () => {\n      const duplication = new Map([\n                            ['1', [{resourceSize: 250}, {resourceSize: 200}]],\n                            ['2', [{resourceSize: 200}, {resourceSize: 250}]],\n                          ]) as Trace.Extras.ScriptDuplication.ScriptDuplication;\n      Trace.Extras.ScriptDuplication.normalizeDuplication(duplication);\n      const results = Object.fromEntries(duplication);\n      assert.deepEqual(results, {});\n    });\n\n    it('removes duplication if size is much smaller than the largest', () => {\n      const duplication = new Map([\n                            ['1', [{resourceSize: 200}, {resourceSize: 1}, {resourceSize: 250}]],\n                            ['2', [{resourceSize: 250}, {resourceSize: 1}]],\n                          ]) as Trace.Extras.ScriptDuplication.ScriptDuplication;\n      Trace.Extras.ScriptDuplication.normalizeDuplication(duplication);\n      const results = Object.fromEntries(duplication);\n      assert.deepEqual(results, {});\n    });\n  });\n\n  it('normalizeSource', () => {\n    const testCases = [\n      ['test.js', 'test.js'],\n      ['node_modules/othermodule.js', 'node_modules/othermodule.js'],\n      ['node_modules/somemodule/node_modules/othermodule.js', 'node_modules/othermodule.js'],\n      [\n        'node_modules/somemodule/node_modules/somemodule2/node_modules/othermodule.js',\n        'node_modules/othermodule.js',\n      ],\n      ['webpack.js?', 'webpack.js'],\n    ];\n    for (const [input, expected] of testCases) {\n      assert.strictEqual(Trace.Extras.ScriptDuplication.normalizeSource(input), expected);\n    }\n  });\n});\n"]}