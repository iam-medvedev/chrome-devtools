{"version":3,"file":"SelectElementAccessibilityIssue.test.js","sourceRoot":"","sources":["../../../../../../front_end/models/issues_manager/SelectElementAccessibilityIssue.test.ts"],"names":[],"mappings":"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","sourcesContent":["// Copyright 2025 The Chromium Authors. All rights reserved.\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\n\nimport type * as SDK from '../../core/sdk/sdk.js';\nimport * as Protocol from '../../generated/protocol.js';\nimport {describeWithLocale, expectConsoleLogs} from '../../testing/EnvironmentHelpers.js';\nimport {MockIssuesModel} from '../../testing/MockIssuesModel.js';\nimport * as IssuesManager from '../issues_manager/issues_manager.js';\n\ndescribeWithLocale('SelectElementAccessibilityIssue', () => {\n  const mockModel = new MockIssuesModel([]) as unknown as SDK.IssuesModel.IssuesModel;\n\n  function createProtocolIssueWithoutDetails(): Protocol.Audits.InspectorIssue {\n    return {\n      code: Protocol.Audits.InspectorIssueCode.SelectElementAccessibilityIssue,\n      details: {},\n    };\n  }\n\n  function createProtocolIssueWithDetails(\n      selectElementAccessibilityIssueDetails: Protocol.Audits.SelectElementAccessibilityIssueDetails):\n      Protocol.Audits.InspectorIssue {\n    return {\n      code: Protocol.Audits.InspectorIssueCode.SelectElementAccessibilityIssue,\n      details: {selectElementAccessibilityIssueDetails},\n    };\n  }\n\n  expectConsoleLogs({\n    warn: ['Select Element Accessibility issue without details received.'],\n  });\n\n  it('can be created for various reasons', () => {\n    const reasons = [\n      Protocol.Audits.SelectElementAccessibilityIssueReason.DisallowedSelectChild,\n      Protocol.Audits.SelectElementAccessibilityIssueReason.DisallowedOptGroupChild,\n      Protocol.Audits.SelectElementAccessibilityIssueReason.NonPhrasingContentOptionChild,\n      Protocol.Audits.SelectElementAccessibilityIssueReason.InteractiveContentOptionChild,\n      Protocol.Audits.SelectElementAccessibilityIssueReason.InteractiveContentLegendChild,\n    ];\n    for (const reason of reasons) {\n      const issueDetails = {\n        nodeId: 1 as Protocol.DOM.BackendNodeId,\n        selectElementAccessibilityIssueReason: reason,\n        hasDisallowedAttributes: false,\n      };\n      const issue = createProtocolIssueWithDetails(issueDetails);\n      const selectIssues =\n          IssuesManager.SelectElementAccessibilityIssue.SelectElementAccessibilityIssue.fromInspectorIssue(\n              mockModel, issue);\n      assert.lengthOf(selectIssues, 1);\n      const selectIssue = selectIssues[0];\n\n      assert.strictEqual(selectIssue.getCategory(), IssuesManager.Issue.IssueCategory.OTHER);\n      assert.deepEqual(selectIssue.details(), issueDetails);\n      assert.strictEqual(selectIssue.getKind(), IssuesManager.Issue.IssueKind.PAGE_ERROR);\n      assert.isNotNull(selectIssue.getDescription());\n    }\n  });\n\n  it('adds a disallowed select child issue without details', () => {\n    const inspectorIssueWithoutGenericDetails = createProtocolIssueWithoutDetails();\n    const selectIssues =\n        IssuesManager.SelectElementAccessibilityIssue.SelectElementAccessibilityIssue.fromInspectorIssue(\n            mockModel, inspectorIssueWithoutGenericDetails);\n\n    assert.isEmpty(selectIssues);\n  });\n\n  it('adds an interactive content attributes select child issue with valid details', () => {\n    const issueDetails = {\n      nodeId: 1 as Protocol.DOM.BackendNodeId,\n      selectElementAccessibilityIssueReason:\n          Protocol.Audits.SelectElementAccessibilityIssueReason.InteractiveContentOptionChild,\n      hasDisallowedAttributes: true,\n    };\n    const issue = createProtocolIssueWithDetails(issueDetails);\n    const selectIssues =\n        IssuesManager.SelectElementAccessibilityIssue.SelectElementAccessibilityIssue.fromInspectorIssue(\n            mockModel, issue);\n    assert.lengthOf(selectIssues, 1);\n    const selectIssue = selectIssues[0];\n\n    assert.strictEqual(selectIssue.getCategory(), IssuesManager.Issue.IssueCategory.OTHER);\n    assert.deepEqual(selectIssue.details(), issueDetails);\n    assert.strictEqual(selectIssue.getKind(), IssuesManager.Issue.IssueKind.PAGE_ERROR);\n    assert.isNotNull(selectIssue.getDescription());\n  });\n});\n"]}