{"version":3,"file":"FunctionCodeResolver.test.js","sourceRoot":"","sources":["../../../../../../front_end/models/source_map_scopes/FunctionCodeResolver.test.ts"],"names":[],"mappings":"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","sourcesContent":["// Copyright 2025 The Chromium Authors\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\n\nimport * as Platform from '../../core/platform/platform.js';\nimport * as SDK from '../../core/sdk/sdk.js';\nimport {createTarget} from '../../testing/EnvironmentHelpers.js';\nimport {describeWithMockConnection} from '../../testing/MockConnection.js';\nimport {MockProtocolBackend} from '../../testing/MockScopeChain.js';\nimport {SnapshotTester} from '../../testing/SnapshotTester.js';\nimport * as Bindings from '../bindings/bindings.js';\nimport * as Workspace from '../workspace/workspace.js';\n\nimport * as SourceMapScopes from './source_map_scopes.js';\n\nconst {urlString} = Platform.DevToolsPath;\n\ndescribeWithMockConnection('FunctionCodeResolver', function() {\n  const snapshotTester = new SnapshotTester(this, import.meta);\n\n  const URL = urlString`file:///tmp/example.js`;\n  let target: SDK.Target.Target;\n  let backend: MockProtocolBackend;\n\n  beforeEach(() => {\n    const workspace = Workspace.Workspace.WorkspaceImpl.instance();\n    const targetManager = SDK.TargetManager.TargetManager.instance();\n    const resourceMapping = new Bindings.ResourceMapping.ResourceMapping(targetManager, workspace);\n    const ignoreListManager = Workspace.IgnoreListManager.IgnoreListManager.instance({forceNew: true});\n    Bindings.DebuggerWorkspaceBinding.DebuggerWorkspaceBinding.instance({\n      forceNew: true,\n      resourceMapping,\n      targetManager,\n      ignoreListManager,\n      workspace,\n    });\n    backend = new MockProtocolBackend();\n    target = createTarget();\n  });\n\n  // This was minified with 'esbuild --sourcemap=linked --minify' v0.25.9.\n  const exampleSource =\n      `\"use strict\";function fibonacci(e){return e<=1?1:fibonacci(e-1)+fibonacci(e-2)}const btn=document.querySelector(\"button\"),params=new URLSearchParams(location.search);btn.addEventListener(\"click\",()=>{console.log(fibonacci(Number(params.get(\"x\")))),btn.style.backgroundColor=\"red\"});const input=document.querySelector('input[type=\"text\"]');input.addEventListener(\"input\",()=>{console.log(fibonacci(Number(params.get(\"x\"))))});\\n//# sourceMappingURL=file:///tmp/example.js.min.map`;\n  const exampleRawPerformanceData = new Map([\n    [\n      1, new Map([\n        [1, 1],       // \"use strict\"\n        [35, 67],     // starting } of fibonacci\n        [43, 23],     // e<=1\n        [50, 1000],   // fibonacci(e-1)\n        [65, 999],    // fibonacci(e-2)\n        [79, 13],     // ending } of fibonacci\n        [213, 5000],  // fibonacci(Number(params.get(\"x\")))\n        [274, 333],   // btn.style.backgroundColor=\"red\"\n      ])\n    ],\n  ]);\n  const exampleSourceMap = {\n    version: 3,\n    sources: ['index.js'],\n    sourcesContent: [\n      'function fibonacci(num) {\\n  if (num <= 1) return 1;\\n\\n  return fibonacci(num - 1) + fibonacci(num - 2);\\n}\\n\\nconst btn = document.querySelector(\\'button\\');\\nconst params = new URLSearchParams(location.search);\\n\\nbtn.addEventListener(\\'click\\', () => {\\n  console.log(fibonacci(Number(params.get(\\'x\\'))));\\n  btn.style.backgroundColor = \\'red\\';\\n});\\n\\nconst input = document.querySelector(\\'input[type=\"text\"]\\');\\ninput.addEventListener(\\'input\\', () => {\\n  console.log(fibonacci(Number(params.get(\\'x\\'))));\\n});\\n'\n    ],\n    mappings:\n        'aAAA,SAAS,UAAUA,EAAK,CACtB,OAAIA,GAAO,EAAU,EAEd,UAAUA,EAAM,CAAC,EAAI,UAAUA,EAAM,CAAC,CAC/C,CAEA,MAAM,IAAM,SAAS,cAAc,QAAQ,EACrC,OAAS,IAAI,gBAAgB,SAAS,MAAM,EAElD,IAAI,iBAAiB,QAAS,IAAM,CAClC,QAAQ,IAAI,UAAU,OAAO,OAAO,IAAI,GAAG,CAAC,CAAC,CAAC,EAC9C,IAAI,MAAM,gBAAkB,KAC9B,CAAC,EAED,MAAM,MAAQ,SAAS,cAAc,oBAAoB,EACzD,MAAM,iBAAiB,QAAS,IAAM,CACpC,QAAQ,IAAI,UAAU,OAAO,OAAO,IAAI,GAAG,CAAC,CAAC,CAAC,CAChD,CAAC',\n    names: ['num']\n  };\n\n  describe('getFunctionCodeFromLocation', () => {\n    const source = exampleSource;\n    const sourceMapUrl = 'file:///tmp/example.js.min.map';\n    const sourceMapContent = JSON.stringify(exampleSourceMap);\n    const sourceMapContentButNoSources = JSON.stringify({...exampleSourceMap, sourcesContent: undefined});\n\n    const testCases = [\n      {\n        name: '[no source maps] lookup named function',\n        url: URL,\n        line: 0,\n        column: 35,\n        sourceMap: null,\n        expectedCode: `(e) {\\n\\treturn e <= 1 ? 1 : fibonacci(e - 1) + fibonacci(e - 2)\\n}\\n`\n      },\n      {\n        name: '[no source maps] lookup anonymous function',\n        url: URL,\n        line: 0,\n        column: 201,\n        sourceMap: null,\n        expectedCode:\n            `() => {\\n\\tconsole.log(fibonacci(Number(params.get(\\\"x\\\")))),\\n\\tbtn.style.backgroundColor = \\\"red\\\"\\n}\\n`\n      },\n\n      {\n        name: '[source maps] lookup named function with generated location',\n        url: URL,\n        line: 0,\n        column: 35,\n        sourceMap: {url: sourceMapUrl, content: sourceMapContent},\n        expectedCode:\n            `fibonacci(num) {\\n  if (num <= 1) return 1;\\n\\n  return fibonacci(num - 1) + fibonacci(num - 2);\\n}\\n\\n`\n      },\n      {\n        name: '[source maps] lookup named function with original location',\n        url: urlString`file:///tmp/index.js`,\n        line: 1,\n        column: 5,\n        sourceMap: {url: sourceMapUrl, content: sourceMapContent},\n        expectedCode:\n            `fibonacci(num) {\\n  if (num <= 1) return 1;\\n\\n  return fibonacci(num - 1) + fibonacci(num - 2);\\n}\\n\\n`\n      },\n\n      {\n        name: '[source maps, no source contents] lookup named function with generated location',\n        url: URL,\n        line: 0,\n        column: 35,\n        sourceMap: {url: sourceMapUrl, content: sourceMapContentButNoSources},\n        // TODO: createFromAst does not include function identifiers in the created scope start position.\n        expectedCode: `(e) {\\n\\treturn e <= 1 ? 1 : fibonacci(e - 1) + fibonacci(e - 2)\\n}\\n`\n      },\n      {\n        name: '[source maps, no source contents] lookup named function with original location',\n        url: urlString`file:///tmp/index.js`,\n        line: 1,\n        column: 5,\n        sourceMap: {url: sourceMapUrl, content: sourceMapContentButNoSources},\n        expectedCode: `(e) {\\n\\treturn e <= 1 ? 1 : fibonacci(e - 1) + fibonacci(e - 2)\\n}\\n`\n      },\n\n      {\n        name: '[source maps] lookup anonymous function with generated location',\n        url: URL,\n        line: 0,\n        column: 201,\n        sourceMap: {url: sourceMapUrl, content: sourceMapContent},\n        expectedCode:\n            `() => {\\n  console.log(fibonacci(Number(params.get('x'))));\\n  btn.style.backgroundColor = 'red';\\n}`\n      },\n      {\n        name: '[source maps] lookup anonymous function with original location',\n        url: urlString`file:///tmp/index.js`,\n        line: 10,\n        column: 3,\n        sourceMap: {url: sourceMapUrl, content: sourceMapContent},\n        expectedCode:\n            `() => {\\n  console.log(fibonacci(Number(params.get('x'))));\\n  btn.style.backgroundColor = 'red';\\n}`\n      },\n\n      {\n        name: '[source maps, no source contents] lookup anonymous function with generated location',\n        url: URL,\n        line: 0,\n        column: 201,\n        sourceMap: {url: sourceMapUrl, content: sourceMapContentButNoSources},\n        expectedCode:\n            `() => {\\n\\tconsole.log(fibonacci(Number(params.get(\\\"x\\\")))),\\n\\tbtn.style.backgroundColor = \\\"red\\\"\\n}\\n`\n      },\n      {\n        name: '[source maps, no source contents] lookup anonymous function with original location',\n        url: urlString`file:///tmp/index.js`,\n        line: 10,\n        column: 3,\n        sourceMap: {url: sourceMapUrl, content: sourceMapContentButNoSources},\n        expectedCode:\n            `() => {\\n\\tconsole.log(fibonacci(Number(params.get(\\\"x\\\")))),\\n\\tbtn.style.backgroundColor = \\\"red\\\"\\n}\\n`\n      },\n    ];\n\n    for (const testCase of testCases) {\n      it(testCase.name, async function() {\n        const script = await backend.addScript(target, {url: URL, content: source}, testCase.sourceMap);\n\n        // TODO(crbug.com/368222773): this should probably be done inside backend.addScript, but currently\n        // some tests fail (BreakpointManager.test.ts, NamesResolver.test.ts)\n        const sourceMap = script.sourceMap();\n        if (sourceMap) {\n          sourceMap.hasScopeInfo();  // Trigger source map processing.\n          await sourceMap.scopesFallbackPromiseForTest;\n        }\n\n        // Add raw performance data to script's UISourceCode.\n        const uiSourceCode =\n            Bindings.DebuggerWorkspaceBinding.DebuggerWorkspaceBinding.instance().uiSourceCodeForScript(script);\n        assert.isOk(uiSourceCode);\n        uiSourceCode.setDecorationData(Workspace.UISourceCode.DecoratorType.PERFORMANCE, exampleRawPerformanceData);\n\n        // Add mapped performance data to source map url's UISourceCode.\n        if (sourceMap) {\n          const debuggerModel = target.model(SDK.DebuggerModel.DebuggerModel);\n          assert.isOk(debuggerModel);\n          const url = sourceMap.sourceURLForSourceIndex(0);\n          assert.isOk(url);\n          const uiSourceCode =\n              Bindings.DebuggerWorkspaceBinding.DebuggerWorkspaceBinding.instance().uiSourceCodeForSourceMapSourceURL(\n                  debuggerModel, url, false);\n          assert.isOk(uiSourceCode);\n\n          const mappedPerformanceData =\n              Workspace.UISourceCode.createMappedProfileData(exampleRawPerformanceData, (line, column) => {\n                const entry = sourceMap.findEntry(line, column);\n                if (entry?.sourceURL) {\n                  return [entry.sourceLineNumber, entry.sourceColumnNumber];\n                }\n\n                return null;\n              });\n          uiSourceCode.setDecorationData(Workspace.UISourceCode.DecoratorType.PERFORMANCE, mappedPerformanceData);\n        }\n\n        const code = await SourceMapScopes.FunctionCodeResolver.getFunctionCodeFromLocation(\n            target, testCase.url, testCase.line, testCase.column, {contextLength: 30, appendProfileData: true});\n        assert.isOk(code);\n        assert.strictEqual(code.code, testCase.expectedCode);\n        snapshotTester.assert(this, code.codeWithContext);\n      });\n    }\n  });\n});\n"]}