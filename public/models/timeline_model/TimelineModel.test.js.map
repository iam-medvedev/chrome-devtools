{"version":3,"file":"TimelineModel.test.js","sourceRoot":"","sources":["../../../../../../front_end/models/timeline_model/TimelineModel.test.ts"],"names":[],"mappings":"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","sourcesContent":["// Copyright 2022 The Chromium Authors. All rights reserved.\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\n\nconst {assert} = chai;\n\nimport * as Platform from '../../core/platform/platform.js';\nimport type * as Protocol from '../../generated/protocol.js';\nimport * as TimelineModel from '../timeline_model/timeline_model.js';\nimport * as TraceEngine from '../trace/trace.js';\nimport {describeWithEnvironment} from '../../testing/EnvironmentHelpers.js';\nimport {\n  DevToolsTimelineCategory,\n  makeFakeSDKEventFromPayload,\n  StubbedThread,\n} from '../../testing/TraceHelpers.js';\nimport {TraceLoader} from '../../testing/TraceLoader.js';\n\n// Various events listing processes and threads used by all the tests.\nconst preamble = [\n  {\n    'args': {'name': 'CrBrowserMain'},\n    'cat': '__metadata',\n    'name': 'thread_name',\n    'ph': 'M',\n    'pid': 1537480,\n    'tid': 1537480,\n    'ts': 0,\n  },\n  {\n    'args': {'name': 'CrRendererMain'},\n    'cat': '__metadata',\n    'name': 'thread_name',\n    'ph': 'M',\n    'pid': 1537729,\n    'tid': 1,\n    'ts': 0,\n  },\n  {\n    'args': {'name': 'AuctionV8HelperThread'},\n    'cat': '__metadata',\n    'name': 'thread_name',\n    'ph': 'M',\n    'pid': 1538739,\n    'tid': 7,\n    'ts': 0,\n  },\n  {\n    'args': {'name': 'AuctionV8HelperThread'},\n    'cat': '__metadata',\n    'name': 'thread_name',\n    'ph': 'M',\n    'pid': 1538738,\n    'tid': 7,\n    'ts': 0,\n  },\n  // A child thread in the worklet process which has some events, it's supposed to\n  // be skipped.\n  {\n    'args': {'name': 'Chrome_ChildIOThread'},\n    'cat': '__metadata',\n    'name': 'thread_name',\n    'ph': 'M',\n    'pid': 1538738,\n    'tid': 4,\n    'ts': 0,\n  },\n  {\n    'args': {},\n    'cat': 'disabled-by-default-devtools.timeline',\n    'dur': 94,\n    'name': 'RunTask',\n    'ph': 'X',\n    'pid': 1538738,\n    'tdur': 93,\n    'tid': 4,\n    'ts': 962632609083,\n    'tts': 3006,\n  },\n  {\n    'args': {'name': 'Renderer'},\n    'cat': '__metadata',\n    'name': 'process_name',\n    'ph': 'M',\n    'pid': 1537729,\n    'tid': 0,\n    'ts': 0,\n  },\n  {\n    'args': {'name': 'Browser'},\n    'cat': '__metadata',\n    'name': 'process_name',\n    'ph': 'M',\n    'pid': 1537480,\n    'tid': 0,\n    'ts': 0,\n  },\n  {\n    'args': {'name': 'Service: auction_worklet.mojom.AuctionWorkletService'},\n    'cat': '__metadata',\n    'name': 'process_name',\n    'ph': 'M',\n    'pid': 1538739,\n    'tid': 0,\n    'ts': 0,\n  },\n  {\n    'args': {'name': 'Service: auction_worklet.mojom.AuctionWorkletService'},\n    'cat': '__metadata',\n    'name': 'process_name',\n    'ph': 'M',\n    'pid': 1538738,\n    'tid': 0,\n    'ts': 0,\n  },\n  {\n    'args': {\n      'data': {\n        'frameTreeNodeId': 7,\n        'frames': [{\n          'frame': '76213A7F71B7ACD4C6551AC68B888978',\n          'name': '',\n          'processId': 1537729,\n          'url': 'https://192.168.0.105/run.html',\n        }],\n        'persistentIds': true,\n      },\n    },\n    'cat': 'disabled-by-default-devtools.timeline',\n    'name': 'TracingStartedInBrowser',\n    'ph': 'I',\n    'pid': 1537480,\n    's': 't',\n    'tid': 1537480,\n    'ts': 962632191080,\n    'tts': 23601918,\n  },\n  {\n    'args': {\n      'data': {\n        'frame': '76213A7F71B7ACD4C6551AC68B888978',\n        'name': '',\n        'processId': 1537729,\n        'url': 'https://192.168.0.105/run.html',\n      },\n    },\n    'cat': 'disabled-by-default-devtools.timeline',\n    'name': 'FrameCommittedInBrowser',\n    'ph': 'I',\n    'pid': 1537480,\n    's': 't',\n    'tid': 1537480,\n    'ts': 962632244598,\n    'tts': 23622650,\n  },\n];\n\nclass TrackSummary {\n  name: string = '';\n  type: TimelineModel.TimelineModel.TrackType = TimelineModel.TimelineModel.TrackType.Other;\n  forMainFrame: boolean = false;\n  url: Platform.DevToolsPath.UrlString = Platform.DevToolsPath.EmptyUrlString;\n  threadName: string = '';\n  threadId: number = -1;\n  processId: number = -1;\n  processName: string = '';\n}\n\nfunction summarize(track: TimelineModel.TimelineModel.Track): TrackSummary {\n  return {\n    name: track.name,\n    type: track.type,\n    forMainFrame: track.forMainFrame,\n    url: track.url,\n    threadName: track.thread ? track.thread.name() : '(no thread)',\n    threadId: track.thread ? track.thread.id() : -1,\n    processId: track.thread ? track.thread.process().id() : -1,\n    processName: track.thread ? track.thread.process().name() : '(no thread)',\n  };\n}\n\nfunction summarizeArray(tracks: TimelineModel.TimelineModel.Track[]): TrackSummary[] {\n  return tracks.map(summarize);\n}\n\ndescribeWithEnvironment('TimelineModel', function() {\n  function traceWithEvents(events: readonly TraceEngine.TracingManager.EventPayload[]): {\n    tracingModel: TraceEngine.Legacy.TracingModel,\n    timelineModel: TimelineModel.TimelineModel.TimelineModelImpl,\n  } {\n    const tracingModel = new TraceEngine.Legacy.TracingModel();\n    const timelineModel = new TimelineModel.TimelineModel.TimelineModelImpl();\n    tracingModel.addEvents((preamble as unknown as TraceEngine.TracingManager.EventPayload[]).concat(events));\n    tracingModel.tracingComplete();\n    timelineModel.setEvents(tracingModel);\n    return {\n      tracingModel,\n      timelineModel,\n    };\n  }\n  describe('isMarkerEvent', function() {\n    it('is true for a timestamp event', async function() {\n      // Note: exact trace does not matter here, but we need a real one so all the metadata is set correctly on the TimelineModel\n      const {timelineModel} = await TraceLoader.allModels(this, 'slow-interaction-button-click.json.gz');\n\n      const timestampEvent = makeFakeSDKEventFromPayload({\n        categories: [DevToolsTimelineCategory],\n        name: TimelineModel.TimelineModel.RecordType.TimeStamp,\n        ph: TraceEngine.Types.TraceEvents.Phase.COMPLETE,\n        ts: 1,\n      });\n      assert.isTrue(timelineModel.isMarkerEvent(timestampEvent));\n    });\n    it('is true for a Mark First Paint event that is on the main frame', async function() {\n      const {timelineModel, traceParsedData} =\n          await TraceLoader.allModels(this, 'slow-interaction-button-click.json.gz');\n      const markFirstPaintEventOnMainFrame = makeFakeSDKEventFromPayload({\n        categories: [DevToolsTimelineCategory],\n        name: TimelineModel.TimelineModel.RecordType.MarkFirstPaint,\n        ph: TraceEngine.Types.TraceEvents.Phase.COMPLETE,\n        ts: 1,\n        args: {\n          frame: traceParsedData.Meta.mainFrameId,\n          data: {},\n        },\n      });\n      assert.isTrue(timelineModel.isMarkerEvent(markFirstPaintEventOnMainFrame));\n    });\n\n    it('is true for a Mark FCP event that is on the main frame', async function() {\n      const {timelineModel, traceParsedData} =\n          await TraceLoader.allModels(this, 'slow-interaction-button-click.json.gz');\n      const markFCPEventOnMainFrame = makeFakeSDKEventFromPayload({\n        categories: [DevToolsTimelineCategory],\n        name: TimelineModel.TimelineModel.RecordType.MarkFCP,\n        ph: TraceEngine.Types.TraceEvents.Phase.COMPLETE,\n        ts: 1,\n        args: {\n          frame: traceParsedData.Meta.mainFrameId,\n          data: {},\n        },\n      });\n      assert.isTrue(timelineModel.isMarkerEvent(markFCPEventOnMainFrame));\n    });\n\n    it('is false for a Mark FCP event that is not on the main frame', async function() {\n      const {timelineModel} = await TraceLoader.allModels(this, 'slow-interaction-button-click.json.gz');\n      const markFCPEventOnOtherFrame = makeFakeSDKEventFromPayload({\n        categories: [DevToolsTimelineCategory],\n        name: TimelineModel.TimelineModel.RecordType.MarkFCP,\n        ph: TraceEngine.Types.TraceEvents.Phase.COMPLETE,\n        ts: 1,\n        args: {\n          frame: 'not-main-frame',\n          data: {},\n        },\n      });\n      assert.isFalse(timelineModel.isMarkerEvent(markFCPEventOnOtherFrame));\n    });\n\n    it('is false for a Mark First Paint event that is not on the main frame', async function() {\n      const {timelineModel} = await TraceLoader.allModels(this, 'slow-interaction-button-click.json.gz');\n      const markFirstPaintEventOnOtherFrame = makeFakeSDKEventFromPayload({\n        categories: [DevToolsTimelineCategory],\n        name: TimelineModel.TimelineModel.RecordType.MarkFirstPaint,\n        ph: TraceEngine.Types.TraceEvents.Phase.COMPLETE,\n        ts: 1,\n        args: {\n          frame: 'not-main-frame',\n          data: {},\n        },\n      });\n      assert.isFalse(timelineModel.isMarkerEvent(markFirstPaintEventOnOtherFrame));\n    });\n\n    it('is true for a MarkDOMContent event is set to isMainFrame', async function() {\n      const {timelineModel} = await TraceLoader.allModels(this, 'slow-interaction-button-click.json.gz');\n      const markDOMContentEvent = makeFakeSDKEventFromPayload({\n        categories: [DevToolsTimelineCategory],\n        name: TimelineModel.TimelineModel.RecordType.MarkDOMContent,\n        ph: TraceEngine.Types.TraceEvents.Phase.COMPLETE,\n        ts: 1,\n        args: {\n          data: {\n            isMainFrame: true,\n          },\n        },\n      });\n      assert.isTrue(timelineModel.isMarkerEvent(markDOMContentEvent));\n    });\n\n    it('is true for a MarkDOMContent event that set to isOutermostMainFrame', async function() {\n      const {timelineModel} = await TraceLoader.allModels(this, 'slow-interaction-button-click.json.gz');\n      const markDOMContentEvent = makeFakeSDKEventFromPayload({\n        categories: [DevToolsTimelineCategory],\n        name: TimelineModel.TimelineModel.RecordType.MarkDOMContent,\n        ph: TraceEngine.Types.TraceEvents.Phase.COMPLETE,\n        ts: 1,\n        args: {\n          data: {\n            isOutermostMainFrame: true,\n          },\n        },\n      });\n      assert.isTrue(timelineModel.isMarkerEvent(markDOMContentEvent));\n    });\n\n    it('is false for a MarkDOMContent event that set to isOutermostMainFrame=false', async function() {\n      const {timelineModel} = await TraceLoader.allModels(this, 'slow-interaction-button-click.json.gz');\n      const markDOMContentEvent = makeFakeSDKEventFromPayload({\n        categories: [DevToolsTimelineCategory],\n        name: TimelineModel.TimelineModel.RecordType.MarkDOMContent,\n        ph: TraceEngine.Types.TraceEvents.Phase.COMPLETE,\n        ts: 1,\n        args: {\n          data: {\n            isOutermostMainFrame: false,\n          },\n        },\n      });\n      assert.isFalse(timelineModel.isMarkerEvent(markDOMContentEvent));\n    });\n\n    it('is false for a MarkDOMContent event that set to isMainFrame=false', async function() {\n      const {timelineModel} = await TraceLoader.allModels(this, 'slow-interaction-button-click.json.gz');\n      const markDOMContentEvent = makeFakeSDKEventFromPayload({\n        categories: [DevToolsTimelineCategory],\n        name: TimelineModel.TimelineModel.RecordType.MarkDOMContent,\n        ph: TraceEngine.Types.TraceEvents.Phase.COMPLETE,\n        ts: 1,\n        args: {\n          data: {\n            isMainFrame: false,\n          },\n        },\n      });\n      assert.isFalse(timelineModel.isMarkerEvent(markDOMContentEvent));\n    });\n\n    it('is true for a MarkLoad event that set to isMainFrame=true', async function() {\n      const {timelineModel} = await TraceLoader.allModels(this, 'slow-interaction-button-click.json.gz');\n      const markLoadEvent = makeFakeSDKEventFromPayload({\n        categories: [DevToolsTimelineCategory],\n        name: TimelineModel.TimelineModel.RecordType.MarkLoad,\n        ph: TraceEngine.Types.TraceEvents.Phase.COMPLETE,\n        ts: 1,\n        args: {\n          data: {\n            isMainFrame: true,\n          },\n        },\n      });\n      assert.isTrue(timelineModel.isMarkerEvent(markLoadEvent));\n    });\n\n    it('is true for a MarkLCPCandidate event that set to isOutermostMainFrame=true', async function() {\n      const {timelineModel} = await TraceLoader.allModels(this, 'slow-interaction-button-click.json.gz');\n      const markLCPCandidateEvent = makeFakeSDKEventFromPayload({\n        categories: [DevToolsTimelineCategory],\n        name: TimelineModel.TimelineModel.RecordType.MarkLCPCandidate,\n        ph: TraceEngine.Types.TraceEvents.Phase.COMPLETE,\n        ts: 1,\n        args: {\n          data: {\n            isOutermostMainFrame: true,\n          },\n        },\n      });\n      assert.isTrue(timelineModel.isMarkerEvent(markLCPCandidateEvent));\n    });\n\n    it('is true for a MarkLCPInvalidate event that set to isOutermostMainFrame=true', async function() {\n      const {timelineModel} = await TraceLoader.allModels(this, 'slow-interaction-button-click.json.gz');\n      const markLCPInvalidateEvent = makeFakeSDKEventFromPayload({\n        categories: [DevToolsTimelineCategory],\n        name: TimelineModel.TimelineModel.RecordType.MarkLCPInvalidate,\n        ph: TraceEngine.Types.TraceEvents.Phase.COMPLETE,\n        ts: 1,\n        args: {\n          data: {\n            isOutermostMainFrame: true,\n          },\n        },\n      });\n      assert.isTrue(timelineModel.isMarkerEvent(markLCPInvalidateEvent));\n    });\n\n    it('is false for some unrelated event that is never a marker such as an animation', async function() {\n      const {timelineModel} = await TraceLoader.allModels(this, 'slow-interaction-button-click.json.gz');\n      const animationEvent = makeFakeSDKEventFromPayload({\n        categories: [DevToolsTimelineCategory],\n        name: TimelineModel.TimelineModel.RecordType.Animation,\n        ph: TraceEngine.Types.TraceEvents.Phase.COMPLETE,\n        ts: 1,\n        threadId: 1,\n      });\n      assert.isFalse(timelineModel.isMarkerEvent(animationEvent));\n    });\n  });\n  describe('Track.syncLikeEvents', function() {\n    let nestableAsyncEvents: TraceEngine.Legacy.AsyncEvent[];\n    let nonNestableAsyncEvents: TraceEngine.Legacy.AsyncEvent[];\n    let syncEvents: TraceEngine.Legacy.PayloadEvent[];\n    const tracingModel = new TraceEngine.Legacy.TracingModel();\n    const process = new TraceEngine.Legacy.Process(tracingModel, 1);\n    const thread = new TraceEngine.Legacy.Thread(process, 1);\n    const nestableAsyncEventPayloads = [\n      {\n        'cat': 'blink.console',\n        'id': '0x10bd3fa3',\n        'name': 'first console time',\n        'ph': 'b',\n        'ts': 59624383131,\n      },\n      {\n        'cat': 'blink.console',\n        'id': '0xf9950a85',\n        'name': 'second console time',\n        'ph': 'b',\n        'ts': 59624483145,\n      },\n      {\n        'cat': 'blink.console',\n        'id': '0xf9950a85',\n        'name': 'second console time',\n        'ph': 'e',\n        'ts': 59624983227,\n      },\n      {\n        'cat': 'blink.console',\n        'id': '0x10bd3fa3',\n        'name': 'first console time',\n        'ph': 'e',\n        'ts': 59625983390,\n      },\n      {\n        'cat': 'blink.console',\n        'id': '0xfbe4a4a7',\n        'name': 'third console time',\n        'ph': 'b',\n        'ts': 59625983458,\n      },\n      {\n        'cat': 'blink.console',\n        'id': '0xfbe4a4a7',\n        'name': 'third console time',\n        'ph': 'e',\n        'ts': 59626783430,\n      },\n    ] as unknown as TraceEngine.TracingManager.EventPayload[];\n\n    const nonNestableAsyncEventPayloads = [\n      {\n        'cat': 'blink.user_timing',\n        'id': '0x10bd3fa3',\n        'name': 'MyMark',\n        'ph': 'b',\n        'ts': 62263114030,\n      },\n      {\n        'cat': 'blink.user_timing',\n        'id': '0xf9950a85',\n        'name': 'MyOtherMark',\n        'ph': 'b',\n        'ts': 62263414138,\n      },\n      {\n        'cat': 'blink.user_timing',\n        'id': '0x10bd3fa3',\n        'name': 'MyMark',\n        'ph': 'e',\n        'ts': 62263614198,\n      },\n      {\n        'cat': 'blink.user_timing',\n        'id': '0xfbe4a4a7',\n        'name': 'Zuck',\n        'ph': 'b',\n        'ts': 62263714283,\n      },\n      {\n        'cat': 'blink.user_timing',\n        'id': '0xfbe4a4a7',\n        'name': 'Zuck',\n        'ph': 'e',\n        'ts': 62264214398,\n      },\n      {\n        'cat': 'blink.user_timing',\n        'id': '0xf9950a85',\n        'name': 'MyOtherMark',\n        'ph': 'e',\n        'ts': 62264414198,\n      },\n    ] as unknown as TraceEngine.TracingManager.EventPayload[];\n\n    const syncEventPayloads = [\n      {\n        'cat': 'blink.user_timing',\n        'name': 'myMark',\n        'ph': 'R',\n        'ts': 62263114056,\n      },\n      {\n        'cat': 'blink.user_timing',\n        'name': 'myOtherMark',\n        'ph': 'R',\n        'ts': 62263414150,\n      },\n      {\n        'cat': 'blink.user_timing',\n        'name': 'zuck',\n        'ph': 'R',\n        'ts': 62263714292,\n      },\n    ] as unknown as TraceEngine.TracingManager.EventPayload[];\n\n    function buildAsyncEvents(asyncPayloads: TraceEngine.TracingManager.EventPayload[]):\n        TraceEngine.Legacy.AsyncEvent[] {\n      const builtEvents = new Map<string, TraceEngine.Legacy.AsyncEvent>();\n      for (const payload of asyncPayloads) {\n        const id = TraceEngine.Legacy.TracingModel.extractId(payload) || '';\n        let beginEvent = builtEvents.get(id);\n        const event = new TraceEngine.Legacy.AsyncEvent(TraceEngine.Legacy.PayloadEvent.fromPayload(payload, thread));\n        if (!beginEvent) {\n          beginEvent = new TraceEngine.Legacy.AsyncEvent(event);\n          builtEvents.set(id, beginEvent);\n        } else {\n          beginEvent.addStep(event);\n        }\n      }\n      return [...builtEvents.values()];\n    }\n    beforeEach(() => {\n      nestableAsyncEvents = buildAsyncEvents(nestableAsyncEventPayloads);\n      nonNestableAsyncEvents = buildAsyncEvents(nonNestableAsyncEventPayloads);\n      syncEvents = syncEventPayloads.map(payload => TraceEngine.Legacy.PayloadEvent.fromPayload(payload, thread));\n    });\n    it('returns sync and async events if async events can be organized in a tree structure', function() {\n      const track = new TimelineModel.TimelineModel.Track();\n      track.asyncEvents = nestableAsyncEvents;\n      track.events = syncEvents;\n      const syncLikeEvents = track.eventsForTreeView();\n      assert.strictEqual(syncLikeEvents.length, nestableAsyncEvents.length + syncEvents.length);\n      const syncLikeEventIds = syncLikeEvents.map(e => e.id);\n      for (const event of [...nestableAsyncEvents, ...syncEvents]) {\n        assert.isTrue(syncLikeEventIds.includes(event.id));\n      }\n    });\n    it('returns sync events only if the async event cannot be organized in a tree structure', function() {\n      const track = new TimelineModel.TimelineModel.Track();\n      track.asyncEvents = nonNestableAsyncEvents;\n      track.events = syncEvents;\n      const syncLikeEvents = track.eventsForTreeView();\n      assert.strictEqual(syncLikeEvents.length, syncEvents.length);\n      const syncLikeEventIds = syncLikeEvents.map(e => e.id);\n      for (const event of [...syncEvents]) {\n        assert.isTrue(syncLikeEventIds.includes(event.id));\n      }\n    });\n  });\n\n  it('creates tracks for prerender targets', function() {\n    const {timelineModel} = traceWithEvents([\n      {\n        'args': {'name': 'CrRendererMain'},\n        'cat': '__metadata',\n        'name': 'thread_name',\n        'ph': 'M',\n        'pid': 1777777,\n        'tid': 1,\n        'ts': 0,\n      },\n      {\n        'args': {\n          'data': {\n            'frame': 'DEADBEEF1234567890987654321ABCDE',\n            'name': '',\n            'processId': 1777777,\n            'url': 'https://192.168.0.105/prerender.html',\n          },\n        },\n        'cat': 'disabled-by-default-devtools.timeline',\n        'name': 'FrameCommittedInBrowser',\n        'ph': 'I',\n        'pid': 1537480,\n        's': 't',\n        'tid': 1537480,\n        'ts': 962632244598,\n        'tts': 23622650,\n      },\n    ] as unknown as TraceEngine.TracingManager.EventPayload[]);\n    const trackInfo = summarizeArray(timelineModel.tracks());\n    assert.deepEqual(trackInfo, [\n      {\n        'name': 'CrRendererMain',\n        'type': 'MainThread',\n        'forMainFrame': true,\n        'url': 'https://192.168.0.105/prerender.html',\n        'threadName': 'CrRendererMain',\n        'threadId': 1,\n        'processId': 1777777,\n        'processName': '',\n      },\n      {\n        'name': 'Thread 0',\n        'type': 'Other',\n        'forMainFrame': false,\n        'url': '',\n        'threadName': '',\n        'threadId': 0,\n        'processId': 1537729,\n        'processName': 'Renderer',\n      },\n      {\n        'name': 'CrRendererMain',\n        'type': 'MainThread',\n        'forMainFrame': true,\n        'url': 'https://192.168.0.105/run.html',\n        'threadName': 'CrRendererMain',\n        'threadId': 1,\n        'processId': 1537729,\n        'processName': 'Renderer',\n      },\n    ]);\n  });\n});\n\ndescribeWithEnvironment('TimelineData', function() {\n  function getAllTracingModelPayloadEvents(tracingModel: TraceEngine.Legacy.TracingModel):\n      TraceEngine.Legacy.PayloadEvent[] {\n    const allSDKEvents = tracingModel.sortedProcesses().flatMap(process => {\n      return process.sortedThreads().flatMap(thread => thread.events().filter(TraceEngine.Legacy.eventHasPayload));\n    });\n    allSDKEvents.sort((eventA, eventB) => {\n      if (eventA.startTime > eventB.startTime) {\n        return 1;\n      }\n      if (eventB.startTime > eventA.startTime) {\n        return -1;\n      }\n      return 0;\n    });\n    return allSDKEvents;\n  }\n\n  it('stores data for an SDK.TracingModel.PayloadEvent using the raw payload as the key', async function() {\n    const data = await TraceLoader.allModels(this, 'web-dev.json.gz');\n    const allSDKEvents = getAllTracingModelPayloadEvents(data.tracingModel);\n    // The exact event we use is not important, so let's use the first LCP event.\n    const lcpSDKEvent =\n        allSDKEvents.find(event => event.name === TimelineModel.TimelineModel.RecordType.MarkLCPCandidate);\n    if (!lcpSDKEvent) {\n      throw new Error('Could not find SDK Event.');\n    }\n    const dataForEvent = TimelineModel.TimelineModel.EventOnTimelineData.forEvent(lcpSDKEvent);\n    dataForEvent.backendNodeIds.push(123 as Protocol.DOM.BackendNodeId);\n\n    // Now find the same event from the new engine\n    const lcpNewEngineEvent = data.traceParsedData.PageLoadMetrics.allMarkerEvents.find(event => {\n      return TraceEngine.Types.TraceEvents.isTraceEventLargestContentfulPaintCandidate(event);\n    });\n    if (!lcpNewEngineEvent) {\n      throw new Error('Could not find LCP New engine event.');\n    }\n    // Make sure we got the matching events.\n    assert.strictEqual(lcpNewEngineEvent, lcpSDKEvent.rawPayload());\n\n    assert.strictEqual(\n        TimelineModel.TimelineModel.EventOnTimelineData.forEvent(lcpSDKEvent).backendNodeIds,\n        TimelineModel.TimelineModel.EventOnTimelineData.forEvent(lcpNewEngineEvent).backendNodeIds,\n    );\n  });\n\n  it('stores data for a constructed event using the event as the key', async function() {\n    const thread = StubbedThread.make(1);\n    // None of the details here matter, we just need some constructed event.\n    const fakeConstructedEvent = new TraceEngine.Legacy.ConstructedEvent(\n        'blink.user_timing',\n        'some-test-event',\n        TraceEngine.Types.TraceEvents.Phase.INSTANT,\n        100,\n        thread,\n    );\n    const dataForEvent = TimelineModel.TimelineModel.EventOnTimelineData.forEvent(fakeConstructedEvent);\n    dataForEvent.backendNodeIds.push(123 as Protocol.DOM.BackendNodeId);\n    assert.strictEqual(dataForEvent, TimelineModel.TimelineModel.EventOnTimelineData.forEvent(fakeConstructedEvent));\n  });\n\n  it('extracts backend node ids and image url for a Decode Image event', async function() {\n    const data = await TraceLoader.allModels(this, 'web-dev.json.gz');\n    const allSDKEvents = getAllTracingModelPayloadEvents(data.tracingModel);\n\n    const decodeImageEvent =\n        allSDKEvents.find(event => event.name === TraceEngine.Types.TraceEvents.KnownEventName.DecodeImage);\n    if (!decodeImageEvent) {\n      throw new Error('Could not find Decode Image event Event.');\n    }\n    const dataForEvent = TimelineModel.TimelineModel.EventOnTimelineData.forEvent(decodeImageEvent);\n    assert.strictEqual(dataForEvent.backendNodeIds[0], 240);\n    assert.isTrue(dataForEvent.url?.includes('.jpg'));\n  });\n});\n"]}