{"version":3,"file":"InspectorBackend.test.js","sourceRoot":"","sources":["../../../../../../front_end/core/protocol_client/InspectorBackend.test.ts"],"names":[],"mappings":"AAAA,sCAAsC;AACtC,yEAAyE;AACzE,6BAA6B;AAG7B,OAAO,EAAC,iBAAiB,EAAC,MAAM,oCAAoC,CAAC;AAErE,OAAO,KAAK,cAAc,MAAM,sBAAsB,CAAC;AAEvD,QAAQ,CAAC,YAAY,EAAE,GAAG,EAAE;IAC1B,QAAQ,CAAC,UAAU,EAAE,GAAG,EAAE;QACxB,EAAE,CAAC,2CAA2C,EAAE,GAAG,EAAE;YACnD,MAAM,UAAU,GAAG,IAAI,iBAAiB,EAAE,CAAC;YAC3C,MAAM,MAAM,GAAG,IAAI,cAAc,CAAC,gBAAgB,CAAC,UAAU,CAAC,IAAI,EAAE,YAAY,EAAE,UAAU,CAAC,CAAC;YAC9F,MAAM,UAAU,GAAG,KAAK,CAAC,IAAI,CAAC,cAAc,CAAC,gBAAgB,CAAC,gBAAgB,EAAE,qBAAqB,CAAC,CAAC;YAEvG,MAAM,OAAO,GAAiD;gBAC5D,SAAS,EAAE,YAAY;gBACvB,MAAM,EAAE,8BAA+E;aACxF,CAAC;YACF,MAAM,CAAC,QAAQ,CAAC,OAAO,CAAC,CAAC;YAEzB,KAAK,CAAC,MAAM,CAAC,qBAAqB,CAC9B,UAAU,EACV,qGAAqG,EACrG,OAAO,CAAC,CAAC;QACf,CAAC,CAAC,CAAC;QAEH,EAAE,CAAC,2CAA2C,EAAE,GAAG,EAAE;YACnD,MAAM,UAAU,GAAG,IAAI,iBAAiB,EAAE,CAAC;YAC3C,MAAM,MAAM,GAAG,IAAI,cAAc,CAAC,gBAAgB,CAAC,UAAU,CAAC,IAAI,EAAE,YAAY,EAAE,UAAU,CAAC,CAAC;YAC9F,MAAM,CAAC,yBAAyB,CAAC,EAAwC,CAAC,CAAC;YAC3E,MAAM,UAAU,GAAG,KAAK,CAAC,IAAI,CAAC,cAAc,CAAC,gBAAgB,CAAC,gBAAgB,EAAE,uBAAuB,CAAC,CAAC;YAEzG,MAAM,OAAO,GAAiD;gBAC5D,SAAS,EAAE,YAAY;gBACvB,MAAM,EAAE,0BAA2E;aACpF,CAAC;YACF,MAAM,CAAC,QAAQ,CAAC,OAAO,CAAC,CAAC;YAEzB,KAAK,CAAC,MAAM,CAAC,qBAAqB,CAC9B,UAAU,EAAE,2FAA2F,EACvG,OAAO,CAAC,CAAC;QACf,CAAC,CAAC,CAAC;IACL,CAAC,CAAC,CAAC;AACL,CAAC,CAAC,CAAC","sourcesContent":["// Copyright 2025 The Chromium Authors\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\n\nimport type * as ProtocolProxyApi from '../../generated/protocol-proxy-api.js';\nimport {MockCDPConnection} from '../../testing/MockCDPConnection.js';\n\nimport * as ProtocolClient from './protocol_client.js';\n\ndescribe('TargetBase', () => {\n  describe('dispatch', () => {\n    it('logs a protocol error for unknown domains', () => {\n      const connection = new MockCDPConnection();\n      const target = new ProtocolClient.InspectorBackend.TargetBase(null, 'session ID', connection);\n      const reportStub = sinon.stub(ProtocolClient.InspectorBackend.InspectorBackend, 'reportProtocolError');\n\n      const message: ProtocolClient.InspectorBackend.EventMessage = {\n        sessionId: 'session ID',\n        method: 'WrongDomain.somethingStrange' as ProtocolClient.InspectorBackend.QualifiedName,\n      };\n      target.dispatch(message);\n\n      sinon.assert.calledOnceWithExactly(\n          reportStub,\n          'Protocol Error: the message WrongDomain.somethingStrange is for non-existing domain \\'WrongDomain\\'',\n          message);\n    });\n\n    it('logs a protocol error for unknown methods', () => {\n      const connection = new MockCDPConnection();\n      const target = new ProtocolClient.InspectorBackend.TargetBase(null, 'session ID', connection);\n      target.registerRuntimeDispatcher({} as ProtocolProxyApi.RuntimeDispatcher);\n      const reportStub = sinon.stub(ProtocolClient.InspectorBackend.InspectorBackend, 'reportProtocolWarning');\n\n      const message: ProtocolClient.InspectorBackend.EventMessage = {\n        sessionId: 'session ID',\n        method: 'Runtime.somethingStrange' as ProtocolClient.InspectorBackend.QualifiedName,\n      };\n      target.dispatch(message);\n\n      sinon.assert.calledOnceWithExactly(\n          reportStub, 'Protocol Warning: Attempted to dispatch an unspecified event \\'Runtime.somethingStrange\\'',\n          message);\n    });\n  });\n});\n"]}