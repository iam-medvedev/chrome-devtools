{"version":3,"file":"DOMModel.test.js","sourceRoot":"","sources":["../../../../../../front_end/core/sdk/DOMModel.test.ts"],"names":[],"mappings":"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","sourcesContent":["// Copyright 2022 The Chromium Authors\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\n\nimport * as ProtocolModule from '../../generated/protocol.js';\nimport type * as Protocol from '../../generated/protocol.js';\nimport {createTarget} from '../../testing/EnvironmentHelpers.js';\nimport {describeWithMockConnection} from '../../testing/MockConnection.js';\n\nimport * as SDK from './sdk.js';\n\ndescribeWithMockConnection('DOMModel', () => {\n  it('updates the document on an documentUpdate event if there already is a previous document', async () => {\n    const parentTarget = createTarget();\n    const target = createTarget({parentTarget});\n    const domModel = target.model(SDK.DOMModel.DOMModel);\n    assert.exists(domModel);\n    assert.exists(domModel.agent);\n\n    domModel.setDocumentForTest({nodeId: 0} as Protocol.DOM.Node);\n    const spy = sinon.spy(domModel.agent, 'invoke_getDocument');\n\n    sinon.assert.notCalled(spy);\n    assert.isNotNull(domModel.existingDocument());\n\n    domModel.documentUpdated();\n    sinon.assert.calledOnce(spy);\n  });\n\n  it('does not request document if there is not a previous document', async () => {\n    const parentTarget = createTarget();\n    const target = createTarget({parentTarget});\n    const domModel = target.model(SDK.DOMModel.DOMModel);\n    assert.exists(domModel);\n    assert.exists(domModel.agent);\n\n    domModel.setDocumentForTest(null);\n    const spy = sinon.spy(domModel.agent, 'invoke_getDocument');\n\n    sinon.assert.notCalled(spy);\n    assert.isNull(domModel.existingDocument());\n\n    domModel.documentUpdated();\n    sinon.assert.notCalled(spy);\n  });\n\n  it('updates top layer elements correctly', async () => {\n    const parentTarget = createTarget();\n    const target = createTarget({parentTarget});\n    const domModel = target.model(SDK.DOMModel.DOMModel);\n    assert.exists(domModel);\n\n    const DOCUMENT_NODE_ID = 1 as Protocol.DOM.NodeId;\n    const TOP_LAYER_NODE_ID = 2 as Protocol.DOM.NodeId;\n    const NOT_TOP_LAYER_NODE_ID = 3 as Protocol.DOM.NodeId;\n\n    domModel.setDocumentForTest({\n      nodeId: DOCUMENT_NODE_ID,\n      backendNodeId: 1 as Protocol.DOM.BackendNodeId,\n      nodeType: Node.DOCUMENT_NODE,\n      nodeName: '#document',\n      childNodeCount: 2,\n      children: [\n        {\n          nodeId: TOP_LAYER_NODE_ID,\n          backendNodeId: 2 as Protocol.DOM.BackendNodeId,\n          nodeType: Node.ELEMENT_NODE,\n          nodeName: 'div',\n          localName: 'div',\n          nodeValue: '',\n        },\n        {\n          nodeId: NOT_TOP_LAYER_NODE_ID,\n          backendNodeId: 3 as Protocol.DOM.BackendNodeId,\n          nodeType: Node.ELEMENT_NODE,\n          nodeName: 'div',\n          localName: 'div',\n          nodeValue: '',\n        },\n      ],\n    } as Protocol.DOM.Node);\n\n    const topLayerNode = domModel.nodeForId(TOP_LAYER_NODE_ID);\n    const notTopLayerNode = domModel.nodeForId(NOT_TOP_LAYER_NODE_ID);\n    assert.exists(topLayerNode);\n    assert.exists(notTopLayerNode);\n\n    sinon.stub(domModel.agent, 'invoke_getTopLayerElements').resolves({\n      nodeIds: [TOP_LAYER_NODE_ID],\n      getError: () => undefined,\n    });\n\n    const topLayerChangePromise = domModel.once(SDK.DOMModel.Events.TopLayerElementsChanged);\n    domModel.topLayerElementsUpdated();\n    await topLayerChangePromise;\n\n    assert.notStrictEqual(topLayerNode?.topLayerIndex(), -1);\n    assert.strictEqual(notTopLayerNode?.topLayerIndex(), -1);\n  });\n\n  it('updates top layer elements correctly with backdrop', async () => {\n    const parentTarget = createTarget();\n    const target = createTarget({parentTarget});\n    const domModel = target.model(SDK.DOMModel.DOMModel);\n    assert.exists(domModel);\n\n    const DOCUMENT_NODE_ID = 1 as Protocol.DOM.NodeId;\n    const BACKDROP_NODE_ID = 2 as Protocol.DOM.NodeId;\n    const TOP_LAYER_NODE_ID = 3 as Protocol.DOM.NodeId;\n\n    domModel.setDocumentForTest({\n      nodeId: DOCUMENT_NODE_ID,\n      backendNodeId: 1 as Protocol.DOM.BackendNodeId,\n      nodeType: Node.DOCUMENT_NODE,\n      nodeName: '#document',\n      childNodeCount: 2,\n      children: [\n        {\n          nodeId: BACKDROP_NODE_ID,\n          backendNodeId: 2 as Protocol.DOM.BackendNodeId,\n          nodeType: Node.ELEMENT_NODE,\n          nodeName: '::backdrop',\n          localName: '::backdrop',\n          nodeValue: '',\n        },\n        {\n          nodeId: TOP_LAYER_NODE_ID,\n          backendNodeId: 3 as Protocol.DOM.BackendNodeId,\n          nodeType: Node.ELEMENT_NODE,\n          nodeName: 'div',\n          localName: 'div',\n          nodeValue: '',\n        },\n      ],\n    } as Protocol.DOM.Node);\n\n    const topLayerNode = domModel.nodeForId(TOP_LAYER_NODE_ID);\n    assert.exists(topLayerNode);\n\n    sinon.stub(domModel.agent, 'invoke_getTopLayerElements').resolves({\n      nodeIds: [BACKDROP_NODE_ID, TOP_LAYER_NODE_ID],\n      getError: () => undefined,\n    });\n\n    const topLayerChangePromise = domModel.once(SDK.DOMModel.Events.TopLayerElementsChanged);\n    domModel.topLayerElementsUpdated();\n    const data = await topLayerChangePromise;\n    const topLayerShortcuts = data.documentShortcuts;\n    assert.lengthOf(topLayerShortcuts, 1);\n    assert.strictEqual(topLayerShortcuts[0].deferredNode.backendNodeId(), 3 as Protocol.DOM.BackendNodeId);\n    assert.lengthOf(topLayerShortcuts[0].childShortcuts, 1);\n    assert.strictEqual(\n        topLayerShortcuts[0].childShortcuts[0].deferredNode.backendNodeId(), 2 as Protocol.DOM.BackendNodeId);\n  });\n\n  it('updates top layer elements correctly with multiple documents', async () => {\n    const parentTarget = createTarget();\n    const target = createTarget({parentTarget});\n    const domModel = target.model(SDK.DOMModel.DOMModel);\n    assert.exists(domModel);\n\n    const DOCUMENT_NODE_ID = 1 as Protocol.DOM.NodeId;\n    const IFRAME_NODE_ID = 2 as Protocol.DOM.NodeId;\n    const CONTENT_DOCUMENT_NODE_ID = 3 as Protocol.DOM.NodeId;\n    const TOP_LAYER_NODE_1_ID = 4 as Protocol.DOM.NodeId;\n    const TOP_LAYER_NODE_2_ID = 5 as Protocol.DOM.NodeId;\n\n    domModel.setDocumentForTest({\n      nodeId: DOCUMENT_NODE_ID,\n      backendNodeId: 1 as Protocol.DOM.BackendNodeId,\n      nodeType: Node.DOCUMENT_NODE,\n      nodeName: '#document',\n      childNodeCount: 2,\n      children: [\n        {\n          nodeId: TOP_LAYER_NODE_1_ID,\n          backendNodeId: 4 as Protocol.DOM.BackendNodeId,\n          nodeType: Node.ELEMENT_NODE,\n          nodeName: 'div',\n          localName: 'div',\n          nodeValue: '',\n        },\n        {\n          nodeId: IFRAME_NODE_ID,\n          backendNodeId: 2 as Protocol.DOM.BackendNodeId,\n          nodeType: Node.ELEMENT_NODE,\n          nodeName: 'iframe',\n          localName: 'iframe',\n          nodeValue: '',\n          contentDocument: {\n            nodeId: CONTENT_DOCUMENT_NODE_ID,\n            backendNodeId: 3 as Protocol.DOM.BackendNodeId,\n            nodeType: Node.DOCUMENT_NODE,\n            nodeName: '#document',\n            childNodeCount: 1,\n            children: [\n              {\n                nodeId: TOP_LAYER_NODE_2_ID,\n                backendNodeId: 5 as Protocol.DOM.BackendNodeId,\n                nodeType: Node.ELEMENT_NODE,\n                nodeName: 'div',\n                localName: 'div',\n                nodeValue: '',\n              },\n            ],\n          },\n        },\n      ],\n    } as Protocol.DOM.Node);\n\n    const topLayerNode1 = domModel.nodeForId(TOP_LAYER_NODE_1_ID);\n    const topLayerNode2 = domModel.nodeForId(TOP_LAYER_NODE_2_ID);\n    assert.exists(topLayerNode1);\n    assert.exists(topLayerNode2);\n\n    sinon.stub(domModel.agent, 'invoke_getTopLayerElements').resolves({\n      nodeIds: [TOP_LAYER_NODE_1_ID, TOP_LAYER_NODE_2_ID],\n      getError: () => undefined,\n    });\n\n    const events: Array<{document: SDK.DOMModel.DOMDocument, documentShortcuts: SDK.DOMModel.DOMNodeShortcut[]}> = [];\n    domModel.addEventListener(SDK.DOMModel.Events.TopLayerElementsChanged, event => {\n      events.push(event.data);\n    });\n\n    const topLayerChangePromise = domModel.once(SDK.DOMModel.Events.TopLayerElementsChanged);\n    domModel.topLayerElementsUpdated();\n    await topLayerChangePromise;\n\n    // Wait for the second event if it hasn't arrived yet.\n    if (events.length < 2) {\n      await domModel.once(SDK.DOMModel.Events.TopLayerElementsChanged);\n    }\n\n    assert.lengthOf(events, 2);\n    // Sort events by document ID to ensure deterministic order for assertions\n    events.sort((a, b) => a.document.id - b.document.id);\n\n    assert.strictEqual(events[0].document.id, DOCUMENT_NODE_ID);\n    assert.lengthOf(events[0].documentShortcuts, 1);\n    assert.strictEqual(events[0].documentShortcuts[0].deferredNode.backendNodeId(), 4 as Protocol.DOM.BackendNodeId);\n\n    assert.strictEqual(events[1].document.id, CONTENT_DOCUMENT_NODE_ID);\n    assert.lengthOf(events[1].documentShortcuts, 1);\n    assert.strictEqual(events[1].documentShortcuts[0].deferredNode.backendNodeId(), 5 as Protocol.DOM.BackendNodeId);\n  });\n\n  describe('DOMNode', () => {\n    describe('simpleSelector', () => {\n      let target: SDK.Target.Target;\n      let model: SDK.DOMModel.DOMModel;\n      beforeEach(() => {\n        target = createTarget();\n\n        const modelBeforeAssertion = target.model(SDK.DOMModel.DOMModel);\n        assert.exists(modelBeforeAssertion);\n        model = modelBeforeAssertion;\n      });\n\n      afterEach(() => {\n        target.dispose('NO_REASON');\n      });\n\n      it('should return localName when it\\'s not an input, it does not have an idea and does not contain any classes',\n         () => {\n           const domNode = SDK.DOMModel.DOMNode.create(model, null, false, {\n             nodeId: 1 as Protocol.DOM.NodeId,\n             backendNodeId: 2 as Protocol.DOM.BackendNodeId,\n             nodeType: Node.ELEMENT_NODE,\n             nodeName: 'div',\n             localName: 'div',\n             nodeValue: '',\n           });\n           assert.strictEqual(domNode.simpleSelector(), 'div');\n         });\n\n      it('should return localName with input type if it is an input and does not contain any idea or classes', () => {\n        const domNode = SDK.DOMModel.DOMNode.create(model, null, false, {\n          nodeId: 1 as Protocol.DOM.NodeId,\n          backendNodeId: 2 as Protocol.DOM.BackendNodeId,\n          nodeType: Node.ELEMENT_NODE,\n          nodeName: 'input',\n          attributes: [\n            'type',\n            'text',\n          ],\n          localName: 'input',\n          nodeValue: '',\n        });\n        assert.strictEqual(domNode.simpleSelector(), 'input[type=\"text\"]');\n      });\n\n      it('should return localName with id if it has an id', () => {\n        const domNode = SDK.DOMModel.DOMNode.create(model, null, false, {\n          nodeId: 1 as Protocol.DOM.NodeId,\n          backendNodeId: 2 as Protocol.DOM.BackendNodeId,\n          nodeType: Node.ELEMENT_NODE,\n          nodeName: 'input',\n          attributes: [\n            'type',\n            'text',\n            'id',\n            'input-with-id',\n          ],\n          localName: 'input',\n          nodeValue: '',\n        });\n        assert.strictEqual(domNode.simpleSelector(), 'input#input-with-id');\n      });\n\n      it('should return localName with classes appended for an input', () => {\n        const domNode = SDK.DOMModel.DOMNode.create(model, null, false, {\n          nodeId: 1 as Protocol.DOM.NodeId,\n          backendNodeId: 2 as Protocol.DOM.BackendNodeId,\n          nodeType: Node.ELEMENT_NODE,\n          nodeName: 'input',\n          attributes: [\n            'type',\n            'text',\n            'class',\n            'first-class second-class',\n          ],\n          localName: 'input',\n          nodeValue: '',\n        });\n        assert.strictEqual(domNode.simpleSelector(), 'input.first-class.second-class');\n      });\n\n      it('should return localName with classes appended for a div without mentioning div', () => {\n        const domNode = SDK.DOMModel.DOMNode.create(model, null, false, {\n          nodeId: 1 as Protocol.DOM.NodeId,\n          backendNodeId: 2 as Protocol.DOM.BackendNodeId,\n          nodeType: Node.ELEMENT_NODE,\n          nodeName: 'div',\n          attributes: [\n            'type',\n            'text',\n            'class',\n            'first-class second-class',\n          ],\n          localName: 'div',\n          nodeValue: '',\n        });\n        assert.strictEqual(domNode.simpleSelector(), '.first-class.second-class');\n      });\n\n      it('should return localName for a pseudo class without pseudo identifier', () => {\n        const domNode = SDK.DOMModel.DOMNode.create(model, null, false, {\n          nodeId: 1 as Protocol.DOM.NodeId,\n          backendNodeId: 2 as Protocol.DOM.BackendNodeId,\n          nodeType: Node.ELEMENT_NODE,\n          nodeName: '::before',\n          localName: '::before',\n          nodeValue: '',\n        });\n        assert.strictEqual(domNode.simpleSelector(), '::before');\n      });\n\n      it('should return localName for a pseudo class with a pseudo identifier', () => {\n        const domNode = SDK.DOMModel.DOMNode.create(model, null, false, {\n          nodeId: 1 as Protocol.DOM.NodeId,\n          backendNodeId: 2 as Protocol.DOM.BackendNodeId,\n          nodeType: Node.ELEMENT_NODE,\n          pseudoIdentifier: 'root',\n          nodeName: '::view-transition-new',\n          localName: '::view-transition-new',\n          nodeValue: '',\n        });\n        assert.strictEqual(domNode.simpleSelector(), '::view-transition-new(root)');\n      });\n    });\n  });\n\n  describe('document.open() URL update (crbug.com/370690261)', () => {\n    it('updates iframe contentDocument URL and dispatches DocumentURLChanged event', async () => {\n      const target = createTarget();\n      const domModel = target.model(SDK.DOMModel.DOMModel);\n      assert.exists(domModel);\n\n      const DOCUMENT_NODE_ID = 1 as Protocol.DOM.NodeId;\n      const IFRAME_NODE_ID = 2 as Protocol.DOM.NodeId;\n      const CONTENT_DOCUMENT_NODE_ID = 3 as Protocol.DOM.NodeId;\n      const IFRAME_FRAME_ID = 'iframe-frame-id' as Protocol.Page.FrameId;\n\n      domModel.setDocumentForTest({\n        nodeId: DOCUMENT_NODE_ID,\n        backendNodeId: 1 as Protocol.DOM.BackendNodeId,\n        nodeType: Node.DOCUMENT_NODE,\n        nodeName: '#document',\n        localName: '',\n        nodeValue: '',\n        documentURL: 'https://example.com/',\n        baseURL: 'https://example.com/',\n        childNodeCount: 1,\n        children: [\n          {\n            nodeId: IFRAME_NODE_ID,\n            backendNodeId: 2 as Protocol.DOM.BackendNodeId,\n            nodeType: Node.ELEMENT_NODE,\n            nodeName: 'IFRAME',\n            localName: 'iframe',\n            nodeValue: '',\n            frameId: IFRAME_FRAME_ID,\n            contentDocument: {\n              nodeId: CONTENT_DOCUMENT_NODE_ID,\n              backendNodeId: 3 as Protocol.DOM.BackendNodeId,\n              nodeType: Node.DOCUMENT_NODE,\n              nodeName: '#document',\n              localName: '',\n              nodeValue: '',\n              documentURL: 'about:blank',\n              baseURL: 'about:blank',\n              childNodeCount: 0,\n              children: [],\n            },\n          },\n        ],\n      } as Protocol.DOM.Node);\n\n      const iframeNode = domModel.nodeForId(IFRAME_NODE_ID);\n      assert.exists(iframeNode);\n      const contentDocument = iframeNode.contentDocument();\n      assert.exists(contentDocument);\n\n      assert.strictEqual(contentDocument.documentURL, 'about:blank');\n\n      const documentURLChangedPromise = domModel.once(SDK.DOMModel.Events.DocumentURLChanged);\n      const resourceTreeModel = target.model(SDK.ResourceTreeModel.ResourceTreeModel);\n      assert.exists(resourceTreeModel);\n\n      resourceTreeModel.documentOpened({\n        id: IFRAME_FRAME_ID,\n        loaderId: 'loader-1' as Protocol.Network.LoaderId,\n        url: 'https://example.com/',\n        domainAndRegistry: 'example.com',\n        securityOrigin: 'https://example.com',\n        mimeType: 'text/html',\n        secureContextType: ProtocolModule.Page.SecureContextType.Secure,\n        crossOriginIsolatedContextType: ProtocolModule.Page.CrossOriginIsolatedContextType.Isolated,\n        gatedAPIFeatures: [],\n      });\n\n      const changedDocument = await documentURLChangedPromise;\n      assert.strictEqual(changedDocument, contentDocument);\n      assert.strictEqual(contentDocument.documentURL, 'https://example.com/');\n    });\n\n    it('does not dispatch event when URL has not changed', async () => {\n      const target = createTarget();\n      const domModel = target.model(SDK.DOMModel.DOMModel);\n      assert.exists(domModel);\n\n      const DOCUMENT_NODE_ID = 1 as Protocol.DOM.NodeId;\n      const IFRAME_NODE_ID = 2 as Protocol.DOM.NodeId;\n      const CONTENT_DOCUMENT_NODE_ID = 3 as Protocol.DOM.NodeId;\n      const IFRAME_FRAME_ID = 'iframe-frame-id' as Protocol.Page.FrameId;\n\n      domModel.setDocumentForTest({\n        nodeId: DOCUMENT_NODE_ID,\n        backendNodeId: 1 as Protocol.DOM.BackendNodeId,\n        nodeType: Node.DOCUMENT_NODE,\n        nodeName: '#document',\n        localName: '',\n        nodeValue: '',\n        documentURL: 'https://example.com/',\n        baseURL: 'https://example.com/',\n        childNodeCount: 1,\n        children: [\n          {\n            nodeId: IFRAME_NODE_ID,\n            backendNodeId: 2 as Protocol.DOM.BackendNodeId,\n            nodeType: Node.ELEMENT_NODE,\n            nodeName: 'IFRAME',\n            localName: 'iframe',\n            nodeValue: '',\n            frameId: IFRAME_FRAME_ID,\n            contentDocument: {\n              nodeId: CONTENT_DOCUMENT_NODE_ID,\n              backendNodeId: 3 as Protocol.DOM.BackendNodeId,\n              nodeType: Node.DOCUMENT_NODE,\n              nodeName: '#document',\n              localName: '',\n              nodeValue: '',\n              documentURL: 'https://example.com/',\n              baseURL: 'https://example.com/',\n              childNodeCount: 0,\n              children: [],\n            },\n          },\n        ],\n      } as Protocol.DOM.Node);\n\n      let eventDispatched = false;\n      domModel.addEventListener(SDK.DOMModel.Events.DocumentURLChanged, () => {\n        eventDispatched = true;\n      });\n\n      const resourceTreeModel = target.model(SDK.ResourceTreeModel.ResourceTreeModel);\n      assert.exists(resourceTreeModel);\n\n      resourceTreeModel.documentOpened({\n        id: IFRAME_FRAME_ID,\n        loaderId: 'loader-1' as Protocol.Network.LoaderId,\n        url: 'https://example.com/',\n        domainAndRegistry: 'example.com',\n        securityOrigin: 'https://example.com',\n        mimeType: 'text/html',\n        secureContextType: ProtocolModule.Page.SecureContextType.Secure,\n        crossOriginIsolatedContextType: ProtocolModule.Page.CrossOriginIsolatedContextType.Isolated,\n        gatedAPIFeatures: [],\n      });\n\n      assert.isFalse(eventDispatched);\n    });\n  });\n});\n"]}