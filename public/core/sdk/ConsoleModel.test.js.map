{"version":3,"file":"ConsoleModel.test.js","sourceRoot":"","sources":["../../../../../../front_end/core/sdk/ConsoleModel.test.ts"],"names":[],"mappings":"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","sourcesContent":["// Copyright 2021 The Chromium Authors. All rights reserved.\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\n\nimport * as Protocol from '../../generated/protocol.js';\nimport {\n  createTarget,\n} from '../../testing/EnvironmentHelpers.js';\nimport {\n  describeWithMockConnection,\n} from '../../testing/MockConnection.js';\nimport * as Common from '../common/common.js';\nimport type * as Platform from '../platform/platform.js';\nimport {assertNotNullOrUndefined} from '../platform/platform.js';\n\nimport * as SDK from './sdk.js';\n\ndescribeWithMockConnection('ConsoleMessage', () => {\n  const scriptId1 = '1' as Protocol.Runtime.ScriptId;\n  const scriptId2 = '2' as Protocol.Runtime.ScriptId;\n\n  function newMessage({\n    source = SDK.ConsoleModel.FrontendMessageSource.ConsoleAPI,\n    message = 'Message',\n    url,\n    scriptId,\n    executionContextId,\n    stackTrace,\n  }: {\n    source?: SDK.ConsoleModel.MessageSource,\n    message?: string,\n    url?: Platform.DevToolsPath.UrlString,\n    scriptId?: Protocol.Runtime.ScriptId,\n    executionContextId?: number,\n    stackTrace?: Protocol.Runtime.StackTrace,\n  }) {\n    return new SDK.ConsoleModel.ConsoleMessage(\n        null, source, null, message, {url, executionContextId, scriptId, stackTrace});\n  }\n\n  it('compares using message', () => {\n    const a = newMessage({});\n    const b = newMessage({});\n    const c = newMessage({message: 'DifferentMessage'});\n    assert.isTrue(a.isEqual(b));\n    assert.isFalse(b.isEqual(c));\n    assert.isFalse(c.isEqual(a));\n    assert.isTrue(c.isEqual(c));\n  });\n\n  it('compares using source', () => {\n    const a = newMessage({});\n    const b = newMessage({});\n    const c = newMessage({source: SDK.ConsoleModel.FrontendMessageSource.CSS});\n    assert.isTrue(a.isEqual(b));\n    assert.isFalse(b.isEqual(c));\n    assert.isFalse(c.isEqual(a));\n  });\n\n  it('compares using url', () => {\n    const a = newMessage({});\n    const b = newMessage({url: 'http://a.b/c' as Platform.DevToolsPath.UrlString});\n    const c = newMessage({url: 'http://a.b/c' as Platform.DevToolsPath.UrlString});\n    const d = newMessage({url: 'http://a.b/d' as Platform.DevToolsPath.UrlString});\n    assert.isFalse(a.isEqual(b));\n    assert.isTrue(b.isEqual(c));\n    assert.isFalse(c.isEqual(d));\n    assert.isFalse(d.isEqual(a));\n  });\n\n  it('compares using execution context and script id', () => {\n    const a = newMessage({});\n    const b = newMessage({executionContextId: 5, scriptId: scriptId1});\n    const c = newMessage({executionContextId: 5, scriptId: scriptId1});\n    const d = newMessage({executionContextId: 6, scriptId: scriptId1});\n    const e = newMessage({executionContextId: 5, scriptId: scriptId2});\n    assert.isFalse(a.isEqual(b));\n    assert.isFalse(b.isEqual(a));\n    assert.isTrue(b.isEqual(c));\n    assert.isFalse(c.isEqual(d));\n    assert.isFalse(c.isEqual(e));\n  });\n\n  it('compares using script ids in stack traces', () => {\n    const functionName = 'foo';\n    const url = 'http://localhost/foo.js';\n    const lineNumber = 1;\n    const columnNumber = 1;\n    const a =\n        newMessage({stackTrace: {callFrames: [{functionName, scriptId: scriptId1, url, lineNumber, columnNumber}]}});\n    const b =\n        newMessage({stackTrace: {callFrames: [{functionName, scriptId: scriptId2, url, lineNumber, columnNumber}]}});\n    assert.isFalse(a.isEqual(b));\n  });\n\n  it('logs a message on main frame navigation', async () => {\n    Common.Settings.Settings.instance().moduleSetting('preserve-console-log').set(true);\n    const consoleLog = sinon.spy(Common.Console.Console.instance(), 'log');\n    const tabTarget = createTarget({type: SDK.Target.Type.Tab});\n    const mainFrameUnderTabTarget = createTarget({type: SDK.Target.Type.Frame, parentTarget: tabTarget});\n    const mainFrameWithoutTabTarget = createTarget({type: SDK.Target.Type.Frame});\n    const subframeTarget = createTarget({type: SDK.Target.Type.Frame, parentTarget: mainFrameWithoutTabTarget});\n    const navigateTarget = (target: SDK.Target.Target) => {\n      const resourceTreeModel = target.model(SDK.ResourceTreeModel.ResourceTreeModel);\n      assertNotNullOrUndefined(resourceTreeModel);\n      resourceTreeModel.dispatchEventToListeners(SDK.ResourceTreeModel.Events.CachedResourcesLoaded, resourceTreeModel);\n      const frame = {url: 'http://example.com/', backForwardCacheDetails: {}} as\n          SDK.ResourceTreeModel.ResourceTreeFrame;\n      resourceTreeModel.dispatchEventToListeners(\n          SDK.ResourceTreeModel.Events.PrimaryPageChanged,\n          {frame, type: SDK.ResourceTreeModel.PrimaryPageChangeType.Navigation});\n    };\n    navigateTarget(subframeTarget);\n    assert.isTrue(consoleLog.notCalled);\n\n    navigateTarget(mainFrameUnderTabTarget);\n    assert.isTrue(consoleLog.calledOnce);\n    assert.isTrue(consoleLog.calledOnceWith('Navigated to http://example.com/'));\n\n    navigateTarget(mainFrameWithoutTabTarget);\n    assert.isTrue(consoleLog.calledTwice);\n    assert.isTrue(consoleLog.secondCall.calledWith('Navigated to http://example.com/'));\n  });\n\n  it('logs a message on main frame navigation via bfcache', async () => {\n    Common.Settings.Settings.instance().moduleSetting('preserve-console-log').set(true);\n    const consoleLog = sinon.spy(Common.Console.Console.instance(), 'log');\n    const tabTarget = createTarget({type: SDK.Target.Type.Tab});\n    const mainFrameUnderTabTarget = createTarget({type: SDK.Target.Type.Frame, parentTarget: tabTarget});\n    const mainFrameWithoutTabTarget = createTarget({type: SDK.Target.Type.Frame});\n    const subframeTarget = createTarget({type: SDK.Target.Type.Frame, parentTarget: mainFrameWithoutTabTarget});\n    const navigateTarget = (target: SDK.Target.Target) => {\n      const resourceTreeModel = target.model(SDK.ResourceTreeModel.ResourceTreeModel);\n      assertNotNullOrUndefined(resourceTreeModel);\n      resourceTreeModel.dispatchEventToListeners(SDK.ResourceTreeModel.Events.CachedResourcesLoaded, resourceTreeModel);\n      const frame = {url: 'http://example.com/', backForwardCacheDetails: {restoredFromCache: true}} as\n          SDK.ResourceTreeModel.ResourceTreeFrame;\n      resourceTreeModel.dispatchEventToListeners(\n          SDK.ResourceTreeModel.Events.PrimaryPageChanged,\n          {frame, type: SDK.ResourceTreeModel.PrimaryPageChangeType.Navigation});\n    };\n    navigateTarget(subframeTarget);\n    assert.isTrue(consoleLog.notCalled);\n\n    navigateTarget(mainFrameUnderTabTarget);\n    assert.isTrue(consoleLog.calledOnce);\n    assert.isTrue(consoleLog.calledOnceWith(\n        'Navigation to http://example.com/ was restored from back/forward cache (see https://web.dev/bfcache/)'));\n\n    navigateTarget(mainFrameWithoutTabTarget);\n    assert.isTrue(consoleLog.calledTwice);\n    assert.isTrue(consoleLog.secondCall.calledWith(\n        'Navigation to http://example.com/ was restored from back/forward cache (see https://web.dev/bfcache/)'));\n  });\n\n  it('discards duplicate console messages with identical timestamps', async () => {\n    const target = createTarget({type: SDK.Target.Type.Frame});\n    const runtimeModel = target.model(SDK.RuntimeModel.RuntimeModel);\n    assertNotNullOrUndefined(runtimeModel);\n    const resourceTreeModel = target.model(SDK.ResourceTreeModel.ResourceTreeModel);\n    assertNotNullOrUndefined(resourceTreeModel);\n    const consoleModel = target.model(SDK.ConsoleModel.ConsoleModel);\n    assertNotNullOrUndefined(consoleModel);\n    const addMessage = sinon.spy(consoleModel, 'addMessage');\n    resourceTreeModel.dispatchEventToListeners(SDK.ResourceTreeModel.Events.CachedResourcesLoaded, resourceTreeModel);\n\n    const consoleAPICall = {\n      type: Protocol.Runtime.ConsoleAPICalledEventType.Log,\n      args: [{type: Protocol.Runtime.RemoteObjectType.String, value: 'log me'}],\n      executionContextId: 1,\n      timestamp: 123456.789,\n    };\n\n    runtimeModel.dispatchEventToListeners(SDK.RuntimeModel.Events.ConsoleAPICalled, consoleAPICall);\n    assert.isTrue(addMessage.calledOnce);\n    assert.isTrue(addMessage.calledOnceWith(sinon.match({messageText: 'log me'})));\n\n    runtimeModel.dispatchEventToListeners(SDK.RuntimeModel.Events.ConsoleAPICalled, consoleAPICall);\n    assert.isTrue(addMessage.calledOnce);\n\n    runtimeModel.dispatchEventToListeners(\n        SDK.RuntimeModel.Events.ConsoleAPICalled, {...consoleAPICall, timestamp: 123457.000});\n    assert.isTrue(addMessage.calledTwice);\n    assert.isTrue(addMessage.secondCall.calledWith(sinon.match({messageText: 'log me'})));\n  });\n\n  it('clears when main frame global object cleared', async () => {\n    Common.Settings.Settings.instance().moduleSetting('preserve-console-log').set(false);\n    const tabTarget = createTarget({type: SDK.Target.Type.Tab});\n    const mainFrameUnderTabTarget = createTarget({type: SDK.Target.Type.Frame, parentTarget: tabTarget});\n    const mainFrameWithoutTabTarget = createTarget({type: SDK.Target.Type.Frame});\n    const subframeTarget = createTarget({type: SDK.Target.Type.Frame, parentTarget: mainFrameWithoutTabTarget});\n    const clearGlobalObjectOnTarget = (target: SDK.Target.Target) => {\n      const resourceTreeModel = target.model(SDK.ResourceTreeModel.ResourceTreeModel);\n      assertNotNullOrUndefined(resourceTreeModel);\n      resourceTreeModel.dispatchEventToListeners(SDK.ResourceTreeModel.Events.CachedResourcesLoaded, resourceTreeModel);\n\n      const debuggerModel = target.model(SDK.DebuggerModel.DebuggerModel);\n      assertNotNullOrUndefined(debuggerModel);\n      debuggerModel.dispatchEventToListeners(SDK.DebuggerModel.Events.GlobalObjectCleared, debuggerModel);\n    };\n\n    let consoleClearEventsTabTarget = 0;\n    let consoleClearEventsMainFrameUnderTabTarget = 0;\n    let consoleClearEventsMainFrameWithoutTabTarget = 0;\n    let consoleClearEventsSubframeTarget = 0;\n    tabTarget.model(SDK.ConsoleModel.ConsoleModel)\n        ?.addEventListener(SDK.ConsoleModel.Events.ConsoleCleared, () => ++consoleClearEventsTabTarget);\n    mainFrameUnderTabTarget.model(SDK.ConsoleModel.ConsoleModel)\n        ?.addEventListener(SDK.ConsoleModel.Events.ConsoleCleared, () => ++consoleClearEventsMainFrameUnderTabTarget);\n    mainFrameWithoutTabTarget.model(SDK.ConsoleModel.ConsoleModel)\n        ?.addEventListener(SDK.ConsoleModel.Events.ConsoleCleared, () => ++consoleClearEventsMainFrameWithoutTabTarget);\n    subframeTarget.model(SDK.ConsoleModel.ConsoleModel)\n        ?.addEventListener(SDK.ConsoleModel.Events.ConsoleCleared, () => ++consoleClearEventsSubframeTarget);\n\n    clearGlobalObjectOnTarget(subframeTarget);\n    assert.strictEqual(consoleClearEventsTabTarget, 0);\n    assert.strictEqual(consoleClearEventsMainFrameUnderTabTarget, 0);\n    assert.strictEqual(consoleClearEventsMainFrameWithoutTabTarget, 0);\n    assert.strictEqual(consoleClearEventsSubframeTarget, 0);\n\n    clearGlobalObjectOnTarget(mainFrameUnderTabTarget);\n    assert.strictEqual(consoleClearEventsTabTarget, 0);\n    assert.strictEqual(consoleClearEventsMainFrameUnderTabTarget, 1);\n    assert.strictEqual(consoleClearEventsMainFrameWithoutTabTarget, 0);\n    assert.strictEqual(consoleClearEventsSubframeTarget, 0);\n\n    clearGlobalObjectOnTarget(mainFrameWithoutTabTarget);\n    assert.strictEqual(consoleClearEventsTabTarget, 0);\n    assert.strictEqual(consoleClearEventsMainFrameUnderTabTarget, 1);\n    assert.strictEqual(consoleClearEventsMainFrameWithoutTabTarget, 1);\n    assert.strictEqual(consoleClearEventsSubframeTarget, 0);\n  });\n});\n"]}