{"version":3,"file":"Throttler.test.js","sourceRoot":"","sources":["../../../../../../front_end/core/common/Throttler.test.ts"],"names":[],"mappings":"AAAA,4DAA4D;AAC5D,yEAAyE;AACzE,6BAA6B;AAE7B,OAAO,KAAK,MAAM,MAAM,aAAa,CAAC;AAEtC,MAAM,SAAS,GAAG,MAAM,CAAC,SAAS,CAAC,SAAS,CAAC;AAE7C,QAAQ,CAAC,iBAAiB,EAAE,GAAG,EAAE;IAC/B,EAAE,CAAC,mDAAmD,EAAE,KAAK,IAAI,EAAE;QACjE,IAAI,MAAM,GAAG,gBAAgB,CAAC;QAE9B,KAAK,UAAU,UAAU;YACvB,MAAM,GAAG,WAAW,CAAC;QACvB,CAAC;QAED,MAAM,SAAS,GAAG,IAAI,SAAS,CAAC,EAAE,CAAC,CAAC;QACpC,MAAM,WAAW,GAAG,SAAS,CAAC,QAAQ,CAAC,UAAU,EAAE,IAAI,CAAC,CAAC;QAEzD,MAAM,CAAC,WAAW,CAAC,MAAM,EAAE,gBAAgB,EAAE,qCAAqC,CAAC,CAAC;QACpF,MAAM,WAAW,CAAC;QAClB,MAAM,CAAC,WAAW,CAAC,MAAM,EAAE,WAAW,EAAE,qCAAqC,CAAC,CAAC;IACjF,CAAC,CAAC,CAAC;IAEH,EAAE,CAAC,uDAAuD,EAAE,KAAK,IAAI,EAAE;QACrE,IAAI,MAAM,GAAG,gBAAgB,CAAC;QAE9B,KAAK,UAAU,UAAU;YACvB,MAAM,GAAG,aAAa,CAAC;QACzB,CAAC;QAED,KAAK,UAAU,UAAU;YACvB,MAAM,GAAG,aAAa,CAAC;QACzB,CAAC;QAED,MAAM,SAAS,GAAG,IAAI,SAAS,CAAC,EAAE,CAAC,CAAC;QACpC,MAAM,WAAW,GAAG,SAAS,CAAC,QAAQ,CAAC,UAAU,EAAE,IAAI,CAAC,CAAC;QACzD,KAAK,SAAS,CAAC,QAAQ,CAAC,UAAU,EAAE,IAAI,CAAC,CAAC;QAE1C,MAAM,CAAC,WAAW,CAAC,MAAM,EAAE,gBAAgB,EAAE,qCAAqC,CAAC,CAAC;QACpF,MAAM,WAAW,CAAC;QAClB,MAAM,CAAC,WAAW,CAAC,MAAM,EAAE,aAAa,EAAE,qCAAqC,CAAC,CAAC;IACnF,CAAC,CAAC,CAAC;AACL,CAAC,CAAC,CAAC","sourcesContent":["// Copyright 2019 The Chromium Authors. All rights reserved.\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\n\nimport * as Common from './common.js';\n\nconst Throttler = Common.Throttler.Throttler;\n\ndescribe('Throttler class', () => {\n  it('is able to schedule a process as soon as possible', async () => {\n    let result = 'original value';\n\n    async function assignVar1() {\n      result = 'new value';\n    }\n\n    const throttler = new Throttler(10);\n    const promiseTest = throttler.schedule(assignVar1, true);\n\n    assert.strictEqual(result, 'original value', 'process was not scheduled correctly');\n    await promiseTest;\n    assert.strictEqual(result, 'new value', 'process was not scheduled correctly');\n  });\n\n  it('is able to schedule two processes as soon as possible', async () => {\n    let result = 'original value';\n\n    async function assignVar1() {\n      result = 'new value 1';\n    }\n\n    async function assignVar2() {\n      result = 'new value 2';\n    }\n\n    const throttler = new Throttler(10);\n    const promiseTest = throttler.schedule(assignVar1, true);\n    void throttler.schedule(assignVar2, true);\n\n    assert.strictEqual(result, 'original value', 'process was not scheduled correctly');\n    await promiseTest;\n    assert.strictEqual(result, 'new value 2', 'process was not scheduled correctly');\n  });\n});\n"]}