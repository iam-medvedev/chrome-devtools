{"version":3,"file":"MapWithDefault.test.js","sourceRoot":"","sources":["../../../../../../front_end/core/common/MapWithDefault.test.ts"],"names":[],"mappings":"AAAA,4DAA4D;AAC5D,yEAAyE;AACzE,6BAA6B;AAE7B,OAAO,KAAK,MAAM,MAAM,aAAa,CAAC;AAEtC,MAAM,cAAc,GAAG,MAAM,CAAC,cAAc,CAAC,cAAc,CAAC;AAE5D,SAAS,eAAe,CAAC,GAAsE;IAC7F,MAAM,GAAG,GAA6C,EAAE,CAAC;IACzD,KAAK,MAAM,CAAC,IAAI,EAAE,IAAI,CAAC,IAAI,GAAG,CAAC,OAAO,EAAE,EAAE,CAAC;QACzC,MAAM,IAAI,GAA4B,EAAE,CAAC;QACzC,KAAK,MAAM,CAAC,IAAI,EAAE,KAAK,CAAC,IAAI,IAAI,CAAC,OAAO,EAAE,EAAE,CAAC;YAC3C,IAAI,CAAC,IAAI,CAAC,GAAG,KAAK,CAAC;QACrB,CAAC;QACD,GAAG,CAAC,IAAI,CAAC,GAAG,IAAI,CAAC;IACnB,CAAC;IACD,OAAO,GAAG,CAAC;AACb,CAAC;AAED,QAAQ,CAAC,gBAAgB,EAAE,GAAG,EAAE;IAC9B,EAAE,CAAC,0CAA0C,EAAE,GAAG,EAAE;QAClD,MAAM,GAAG,GAAG,IAAI,cAAc,EAA+B,CAAC;QAE9D,MAAM,CAAC,SAAS,CAAC,eAAe,CAAC,GAAG,CAAC,EAAE,EAAE,CAAC,CAAC;QAE3C,GAAG,CAAC,WAAW,CAAC,GAAG,EAAE,IAAI,GAAG,EAAE,CAAC,CAAC;QAEhC,MAAM,CAAC,SAAS,CAAC,eAAe,CAAC,GAAG,CAAC,EAAE;YACrC,CAAC,EAAE,EAAE;SACN,CAAC,CAAC;QAEH,GAAG,CAAC,WAAW,CAAC,GAAG,EAAE,IAAI,GAAG,EAAE,CAAC,CAAC,GAAG,CAAC,IAAI,EAAE,KAAK,CAAC,CAAC;QACjD,GAAG,CAAC,WAAW,CAAC,GAAG,EAAE,IAAI,GAAG,EAAE,CAAC,CAAC,GAAG,CAAC,IAAI,EAAE,MAAM,CAAC,CAAC;QAElD,MAAM,CAAC,SAAS,CAAC,eAAe,CAAC,GAAG,CAAC,EAAE;YACrC,CAAC,EAAE,EAAE;YACL,CAAC,EAAE,EAAC,EAAE,EAAE,KAAK,EAAE,EAAE,EAAE,MAAM,EAAC;SAC3B,CAAC,CAAC;IACL,CAAC,CAAC,CAAC;IAEH,EAAE,CAAC,qDAAqD,EAAE,GAAG,EAAE;QAC7D,MAAM,GAAG,GAAG,IAAI,cAAc,EAA+B,CAAC;QAE9D,MAAM,CAAC,SAAS,CAAC,eAAe,CAAC,GAAG,CAAC,EAAE,EAAE,CAAC,CAAC;QAE3C,GAAG,CAAC,mBAAmB,CAAC,GAAG,EAAE,GAAG,EAAE,CAAC,IAAI,GAAG,EAAE,CAAC,CAAC;QAE9C,MAAM,CAAC,SAAS,CAAC,eAAe,CAAC,GAAG,CAAC,EAAE;YACrC,CAAC,EAAE,EAAE;SACN,CAAC,CAAC;QAEH,GAAG,CAAC,mBAAmB,CAAC,GAAG,EAAE,GAAG,EAAE,CAAC,IAAI,GAAG,EAAE,CAAC,CAAC,GAAG,CAAC,IAAI,EAAE,KAAK,CAAC,CAAC;QAC/D,GAAG,CAAC,mBAAmB,CAAC,GAAG,EAAE,GAAG,EAAE,CAAC,IAAI,GAAG,EAAE,CAAC,CAAC,GAAG,CAAC,IAAI,EAAE,MAAM,CAAC,CAAC;QAEhE,MAAM,CAAC,SAAS,CAAC,eAAe,CAAC,GAAG,CAAC,EAAE;YACrC,CAAC,EAAE,EAAE;YACL,CAAC,EAAE,EAAC,EAAE,EAAE,KAAK,EAAE,EAAE,EAAE,MAAM,EAAC;SAC3B,CAAC,CAAC;IACL,CAAC,CAAC,CAAC;AACL,CAAC,CAAC,CAAC","sourcesContent":["// Copyright 2024 The Chromium Authors. All rights reserved.\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\n\nimport * as Common from './common.js';\n\nconst MapWithDefault = Common.MapWithDefault.MapWithDefault;\n\nfunction convertToObject(map: Common.MapWithDefault.MapWithDefault<string, Map<string, string>>): Object {\n  const ret: {[key: string]: {[key: string]: string}} = {};\n  for (const [key1, map1] of map.entries()) {\n    const ret1: {[key: string]: string} = {};\n    for (const [key2, value] of map1.entries()) {\n      ret1[key2] = value;\n    }\n    ret[key1] = ret1;\n  }\n  return ret;\n}\n\ndescribe('MapWithDefault', () => {\n  it('sets a default entry for `getOrInsert()`', () => {\n    const map = new MapWithDefault<string, Map<string, string>>();\n\n    assert.deepEqual(convertToObject(map), {});\n\n    map.getOrInsert('0', new Map());\n\n    assert.deepEqual(convertToObject(map), {\n      0: {},\n    });\n\n    map.getOrInsert('1', new Map()).set('fr', 'uno');\n    map.getOrInsert('1', new Map()).set('de', 'eins');\n\n    assert.deepEqual(convertToObject(map), {\n      0: {},\n      1: {fr: 'uno', de: 'eins'},\n    });\n  });\n\n  it('creates a default entry for `getOrInsertComputed()`', () => {\n    const map = new MapWithDefault<string, Map<string, string>>();\n\n    assert.deepEqual(convertToObject(map), {});\n\n    map.getOrInsertComputed('0', () => new Map());\n\n    assert.deepEqual(convertToObject(map), {\n      0: {},\n    });\n\n    map.getOrInsertComputed('1', () => new Map()).set('fr', 'uno');\n    map.getOrInsertComputed('1', () => new Map()).set('de', 'eins');\n\n    assert.deepEqual(convertToObject(map), {\n      0: {},\n      1: {fr: 'uno', de: 'eins'},\n    });\n  });\n});\n"]}