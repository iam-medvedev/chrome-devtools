{"version":3,"file":"Debugging.js","sourceRoot":"","sources":["../../../../../../front_end/ui/visual_logging/Debugging.ts"],"names":[],"mappings":"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","sourcesContent":["// Copyright 2023 The Chromium Authors. All rights reserved.\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\n\nimport {assertNotNullOrUndefined} from '../../core/platform/platform.js';\n\nimport {type Loggable} from './Loggable.js';\nimport {type LoggingConfig, VisualElements} from './LoggingConfig.js';\nimport {getLoggingState, type LoggingState} from './LoggingState.js';\n\nlet veDebuggingEnabled = false;\nlet debugPopover: HTMLElement|null = null;\nconst nonDomDebugElements = new WeakMap<Loggable, HTMLElement>();\n\nfunction setVeDebuggingEnabled(enabled: boolean): void {\n  veDebuggingEnabled = enabled;\n  if (enabled && !debugPopover) {\n    debugPopover = document.createElement('div');\n    debugPopover.classList.add('ve-debug');\n    debugPopover.style.position = 'absolute';\n    debugPopover.style.bottom = '100px';\n    debugPopover.style.left = '100px';\n    debugPopover.style.background = 'black';\n    debugPopover.style.color = 'white';\n    debugPopover.style.zIndex = '100000';\n    document.body.appendChild(debugPopover);\n  }\n}\n\n// @ts-ignore\nglobalThis.setVeDebuggingEnabled = setVeDebuggingEnabled;\n\nexport function processForDebugging(loggable: Loggable): void {\n  const loggingState = getLoggingState(loggable);\n  if (!veDebuggingEnabled || !loggingState || loggingState.processedForDebugging) {\n    return;\n  }\n  if (loggable instanceof Element) {\n    processElementForDebugging(loggable, loggingState);\n  } else {\n    processNonDomLoggableForDebugging(loggable, loggingState);\n  }\n}\n\nfunction showDebugPopover(content: string): void {\n  if (!debugPopover) {\n    return;\n  }\n  debugPopover.style.display = 'block';\n  debugPopover.innerHTML = content;\n}\n\nfunction processElementForDebugging(element: Element, loggingState: LoggingState): void {\n  if (element.tagName === 'OPTION') {\n    if (loggingState.parent?.selectOpen && debugPopover) {\n      debugPopover.innerHTML += '<br>' + debugString(loggingState.config);\n      loggingState.processedForDebugging = true;\n    }\n  } else {\n    (element as HTMLElement).style.outline = 'solid 1px red';\n    element.addEventListener('mouseenter', () => {\n      assertNotNullOrUndefined(debugPopover);\n      const pathToRoot = [loggingState];\n      let ancestor = loggingState.parent;\n      while (ancestor) {\n        pathToRoot.push(ancestor);\n        ancestor = ancestor.parent;\n      }\n      showDebugPopover(pathToRoot.map(s => debugString(s.config)).join('<br>'));\n    }, {capture: true});\n    element.addEventListener('mouseleave', () => {\n      assertNotNullOrUndefined(debugPopover);\n      debugPopover.style.display = 'none';\n    }, {capture: true});\n    loggingState.processedForDebugging = true;\n  }\n}\n\nexport function processEventForDebugging(event: string, state: LoggingState|null, extraInfo?: Entry): void {\n  const veDebugLoggingEnabled = localStorage.getItem('veDebugLoggingEnabled');\n  if (!veDebuggingEnabled && !veDebugLoggingEnabled) {\n    return;\n  }\n\n  const entry: Entry =\n      {event, ve: state ? VisualElements[state?.config.ve] : undefined, context: state?.config.context, ...extraInfo};\n  for (const stringKey in entry) {\n    const key = stringKey as keyof Entry;\n    if (typeof entry[key] === 'undefined') {\n      delete entry[key];\n    }\n  }\n\n  if (veDebuggingEnabled) {\n    showDebugPopover(`${Object.entries(entry).map(([k, v]) => `${k}: ${v}`).join('; ')}`);\n  }\n  if (veDebugLoggingEnabled) {\n    const time = Date.now() - sessionStartTime;\n    veDebugEventsLog.push({...entry, veid: state?.veid, time});\n  }\n}\n\ntype Entry = {\n  event?: string,\n  ve?: string,\n  context?: string,\n  veid?: number,\n  children?: Entry[],\n  parent?: number,\n  time?: number,\n  width?: number,\n  height?: number,\n  mouseButton?: number,\n  doubleClick?: boolean,\n};\n\nexport function processImpressionsForDebugging(states: LoggingState[]): void {\n  if (!localStorage.getItem('veDebugLoggingEnabled')) {\n    return;\n  }\n  const impressions = new Map<number, Entry>();\n  for (const state of states) {\n    const entry: Entry = {\n      event: 'Impression',\n      ve: VisualElements[state.config.ve],\n    };\n    if (state.config.context) {\n      entry.context = state.config.context;\n    }\n    if (state.size) {\n      entry.width = state.size.width;\n      entry.height = state.size.height;\n    }\n    entry.veid = state.veid,\n\n    impressions.set(state.veid, entry);\n    if (!state.parent || !impressions.has(state.parent?.veid)) {\n      entry.parent = state.parent?.veid;\n    } else {\n      const parent = impressions.get(state.parent?.veid) as Entry;\n      parent.children = parent.children || [];\n      parent.children.push(entry);\n    }\n  }\n\n  const entries = [...impressions.values()].filter(i => 'parent' in i);\n  if (entries.length === 1) {\n    entries[0].time = Date.now() - sessionStartTime;\n    veDebugEventsLog.push(entries[0]);\n  } else {\n    veDebugEventsLog.push({event: 'Impression', children: entries, time: Date.now() - sessionStartTime});\n  }\n}\n\nfunction processNonDomLoggableForDebugging(loggable: Loggable, loggingState: LoggingState): void {\n  let debugElement = nonDomDebugElements.get(loggable);\n  if (!debugElement) {\n    debugElement = document.createElement('div');\n    debugElement.classList.add('ve-debug');\n    debugElement.style.background = 'black';\n    debugElement.style.color = 'white';\n    debugElement.style.zIndex = '100000';\n    debugElement.textContent = debugString(loggingState.config);\n    nonDomDebugElements.set(loggable, debugElement);\n    setTimeout(() => {\n      if (!loggingState.size?.width || !loggingState.size?.height) {\n        debugElement?.parentElement?.removeChild(debugElement);\n        nonDomDebugElements.delete(loggable);\n      }\n    }, 10000);\n  }\n  const parentDebugElement =\n      parent instanceof HTMLElement ? parent : nonDomDebugElements.get(parent as Loggable) || debugPopover;\n  assertNotNullOrUndefined(parentDebugElement);\n  if (!parentDebugElement.classList.contains('ve-debug')) {\n    debugElement.style.position = 'absolute';\n    parentDebugElement.insertBefore(debugElement, parentDebugElement.firstChild);\n  } else {\n    debugElement.style.marginLeft = '10px';\n    parentDebugElement.appendChild(debugElement);\n  }\n}\n\nexport function debugString(config: LoggingConfig): string {\n  const components = [VisualElements[config.ve]];\n  if (config.context) {\n    components.push(`context: ${config.context}`);\n  }\n  if (config.parent) {\n    components.push(`parent: ${config.parent}`);\n  }\n  if (config.track) {\n    components.push(`track: ${\n        Object.entries(config.track)\n            .map(([key, value]) => `${key}${typeof value === 'string' ? `: ${value}` : ''}`)\n            .join(', ')}`);\n  }\n  return components.join('; ');\n}\n\nconst veDebugEventsLog: Entry[] = [];\n\nfunction setVeDebugLoggingEnabled(enabled: boolean): void {\n  if (enabled) {\n    localStorage.setItem('veDebugLoggingEnabled', 'true');\n  } else {\n    localStorage.removeItem('veDebugLoggingEnabled');\n  }\n}\n\nlet sessionStartTime: number = Date.now();\n\nexport function processStartLoggingForDebugging(): void {\n  if (!localStorage.getItem('veDebugLoggingEnabled')) {\n    return;\n  }\n  sessionStartTime = Date.now();\n  veDebugEventsLog.push({event: 'SessionStart'});\n}\n\n// @ts-ignore\nglobalThis.setVeDebugLoggingEnabled = setVeDebugLoggingEnabled;\n// @ts-ignore\nglobalThis.veDebugEventsLog = veDebugEventsLog;\n"]}