{"version":3,"file":"List.test.js","sourceRoot":"","sources":["../../../../../../../front_end/ui/components/list/List.test.ts"],"names":[],"mappings":"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","sourcesContent":["// Copyright 2025 The Chromium Authors\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\n\nimport {\n  dispatchClickEvent,\n  getEventPromise,\n  renderElementIntoDOM,\n} from '../../../testing/DOMHelpers.js';\nimport {setupLocaleHooks} from '../../../testing/LocaleHelpers.js';\nimport * as Lit from '../../lit/lit.js';\nimport * as RenderCoordinator from '../render_coordinator/render_coordinator.js';\n\nimport type {ItemEditEvent, ItemRemoveEvent} from './List.js';\nimport * as List from './lists.js';  // eslint-disable-line @devtools/es-modules-import\n\nconst {html, render} = Lit;\n\nasync function renderListComponent(\n    items: Lit.TemplateResult, editable?: boolean, deletable?: boolean): Promise<List.List.List> {\n  const component = new List.List.List();\n  if (editable) {\n    component.editable = true;\n  }\n  if (deletable) {\n    component.deletable = true;\n  }\n  render(items, component);\n  renderElementIntoDOM(component);\n  await RenderCoordinator.done();\n  return component;\n}\n\ndescribe('List', () => {\n  setupLocaleHooks();\n\n  it('renders items from light DOM and assigns slot attributes', async () => {\n    const component = await renderListComponent(html`\n      <p>Item 1</p>\n      <div>Item 2</div>\n    `);\n    assert.isNotNull(component.shadowRoot);\n\n    const listItems = component.shadowRoot.querySelectorAll('li[role=\"listitem\"]');\n    assert.lengthOf(listItems, 2, 'Should render two list items');\n\n    const item1Child = component.querySelector('p');\n    const item2Child = component.querySelector('div');\n    assert.strictEqual(item1Child?.getAttribute('slot'), 'slot-0', 'First child must have slot=\"slot-0\"');\n    assert.strictEqual(item2Child?.getAttribute('slot'), 'slot-1', 'Second child must have slot=\"slot-1\"');\n\n    assert.strictEqual(listItems[0].querySelector('slot')?.assignedNodes()[0].textContent, 'Item 1');\n    assert.strictEqual(listItems[1].querySelector('slot')?.assignedNodes()[0].textContent, 'Item 2');\n  });\n\n  it('shows no control buttons per default', async () => {\n    const component = await renderListComponent(html`\n      <p>Item 1</p>\n    `);\n    assert.isNotNull(component.shadowRoot);\n\n    const buttons = component.shadowRoot.querySelectorAll('devtools-button');\n    assert.lengthOf(buttons, 0, 'No buttons should be rendered by default');\n  });\n\n  it('renders li items with tabindex=0 per default for keyboard navigation', async () => {\n    const component = await renderListComponent(html`<p>Item 1</p>`);\n    assert.isNotNull(component.shadowRoot);\n\n    const listItem = component.shadowRoot.querySelector('li[role=\"listitem\"]');\n    assert.isNotNull(listItem, 'List item wrapper should exist');\n    assert.strictEqual(listItem.getAttribute('tabindex'), '0', 'List item should be focusable by default');\n  });\n\n  it('shows only the edit button when editable is set', async () => {\n    const component = await renderListComponent(\n        html`\n      <p>Item 1</p>\n    `,\n        true);\n    assert.isNotNull(component.shadowRoot);\n\n    const buttons = component.shadowRoot.querySelectorAll('devtools-button');\n    assert.lengthOf(buttons, 1, 'Exactly one button should be rendered');\n\n    const editButton = component.shadowRoot.querySelector('devtools-button[title=\"Edit\"]');\n    assert.isNotNull(editButton, 'Edit button should be present');\n  });\n\n  it('shows only the remove button when deletable is set', async () => {\n    const component = await renderListComponent(\n        html`\n      <p>Item 1</p>\n    `,\n        undefined, true);\n    assert.isNotNull(component.shadowRoot);\n\n    const buttons = component.shadowRoot.querySelectorAll('devtools-button');\n    assert.lengthOf(buttons, 1, 'Exactly one button should be rendered');\n\n    const removeButton = component.shadowRoot.querySelector('devtools-button[title=\"Remove\"]');\n    assert.isNotNull(removeButton, 'Remove button should be present');\n  });\n\n  it('omits tabindex when list item focus is disabled via attribute', async () => {\n    const component = await renderListComponent(html`<p>Item 1</p>`);\n    assert.isNotNull(component.shadowRoot);\n\n    let listItem = component.shadowRoot.querySelector('li[role=\"listitem\"]');\n    assert.strictEqual(listItem?.getAttribute('tabindex'), '0', 'Initial state must be focusable');\n\n    component.setAttribute('disable-li-focus', 'true');\n    await RenderCoordinator.done();\n\n    listItem = component.shadowRoot.querySelector('li[role=\"listitem\"]');\n    assert.strictEqual(listItem?.getAttribute('tabindex'), '-1', 'Tabindex must be -1 when attribute is set');\n\n    component.removeAttribute('disable-li-focus');\n    await RenderCoordinator.done();\n\n    listItem = component.shadowRoot.querySelector('li[role=\"listitem\"]');\n    assert.strictEqual(listItem?.getAttribute('tabindex'), '0', 'Tabindex must return when attribute is removed');\n  });\n\n  it('shows both edit and remove buttons when both flags are set', async () => {\n    const component = await renderListComponent(html`<p>Item 1</p>`, true, true);\n    assert.isNotNull(component.shadowRoot);\n\n    const buttons = component.shadowRoot.querySelectorAll('devtools-button');\n    assert.lengthOf(buttons, 2, 'Exactly two buttons should be rendered');\n    assert.isNotNull(component.shadowRoot.querySelector('devtools-button[title=\"Edit\"]'));\n    assert.isNotNull(component.shadowRoot.querySelector('devtools-button[title=\"Remove\"]'));\n  });\n\n  it('dispatches an \"edit\" event when the edit button is clicked', async () => {\n    const component = await renderListComponent(\n        html`\n      <p>Item 1</p>\n      <p>Item 2</p>\n    `,\n        true, false);\n    assert.isNotNull(component.shadowRoot);\n\n    const listItems = component.shadowRoot.querySelectorAll('li');\n    const secondItem = listItems[1];\n\n    const editButton = secondItem.querySelector<HTMLElement>('devtools-button[title=\"Edit\"]');\n    assert.instanceOf(editButton, HTMLElement);\n\n    const eventPromise = getEventPromise<ItemEditEvent>(component, 'edit');\n    dispatchClickEvent(editButton);\n\n    const event = await eventPromise;\n    assert.deepEqual(event.detail, {index: 1});\n  });\n\n  it('dispatches a \"delete\" event when the remove button is clicked', async () => {\n    const component = await renderListComponent(\n        html`\n      <p>Item 1</p>\n      <p>Item 2</p>\n    `,\n        false, true);\n    assert.isNotNull(component.shadowRoot);\n\n    const listItems = component.shadowRoot.querySelectorAll('li');\n    const firstItem = listItems[0];\n\n    const removeButton = firstItem.querySelector<HTMLElement>('devtools-button[title=\"Remove\"]');\n    assert.instanceOf(removeButton, HTMLElement);\n\n    const eventPromise = getEventPromise<ItemRemoveEvent>(component, 'delete');\n    dispatchClickEvent(removeButton);\n\n    const event = await eventPromise;\n    assert.deepEqual(event.detail, {index: 0});\n  });\n\n  it('adds an item when a new child is appended', async () => {\n    const component = await renderListComponent(html`\n      <p>Item 1</p>\n    `);\n    assert.isNotNull(component.shadowRoot);\n\n    let listItems = component.shadowRoot.querySelectorAll('li');\n    assert.lengthOf(listItems, 1);\n\n    const newItem = document.createElement('p');\n    newItem.textContent = 'Item 2';\n    component.appendChild(newItem);\n\n    await RenderCoordinator.done();\n\n    listItems = component.shadowRoot.querySelectorAll('li');\n    assert.lengthOf(listItems, 2, 'Should have two items after adding one');\n    assert.strictEqual(listItems[1].querySelector('slot')?.assignedNodes()[0].textContent, 'Item 2');\n  });\n\n  it('removes an item when a child is removed', async () => {\n    const component = await renderListComponent(html`\n      <p>Item 1</p>\n      <p>Item 2</p>\n    `);\n    assert.isNotNull(component.shadowRoot);\n\n    let listItems = component.shadowRoot.querySelectorAll('li');\n    assert.lengthOf(listItems, 2);\n\n    const itemToRemove = component.querySelector('p:last-child');\n    assert.instanceOf(itemToRemove, HTMLParagraphElement);\n    itemToRemove.remove();\n\n    await RenderCoordinator.done();\n\n    listItems = component.shadowRoot.querySelectorAll('li');\n    assert.lengthOf(listItems, 1, 'Should have one item after removing one');\n    assert.strictEqual(listItems[0].querySelector('slot')?.assignedNodes()[0].textContent, 'Item 1');\n  });\n});\n"]}