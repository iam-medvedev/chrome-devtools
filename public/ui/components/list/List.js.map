{"version":3,"file":"List.js","sourceRoot":"","sources":["../../../../../../../front_end/ui/components/list/List.ts"],"names":[],"mappings":"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","sourcesContent":["// Copyright 2025 The Chromium Authors\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\n\n/* eslint-disable @devtools/no-lit-render-outside-of-view, @devtools/enforce-custom-element-definitions-location */\n\nimport * as i18n from '../../../core/i18n/i18n.js';\nimport {Directives, html, nothing, render, type TemplateResult} from '../../lit/lit.js';\nimport * as Buttons from '../buttons/buttons.js';\n\nimport listStyles from './list.css.js';\n\nconst UIStrings = {\n  /**\n   * @description Title of the edit button for the list items.\n   */\n  edit: 'Edit',\n  /**\n   * @description Title of the remove button for the list items.\n   */\n  remove: 'Remove',\n} as const;\n\nconst str_ = i18n.i18n.registerUIStrings('ui/components/list/List.ts', UIStrings);\nconst i18nString = i18n.i18n.getLocalizedString.bind(undefined, str_);\n\nexport interface ListItemEventDetail {\n  index: number;\n}\n\nexport class ItemEditEvent extends CustomEvent<ListItemEventDetail> {\n  constructor(detail: ListItemEventDetail) {\n    super('edit', {\n      bubbles: true,\n      composed: true,\n      detail,\n    });\n  }\n}\n\nexport class ItemRemoveEvent extends CustomEvent<ListItemEventDetail> {\n  constructor(detail: ListItemEventDetail) {\n    super('delete', {\n      bubbles: true,\n      composed: true,\n      detail,\n    });\n  }\n}\n\nexport class List extends HTMLElement {\n  static observedAttributes: string[] = ['editable', 'deletable', 'disable-li-focus'];\n  #observer: MutationObserver;\n  #editable = false;\n  #deletable = false;\n  #disableListItemFocus?: boolean;\n\n  constructor() {\n    super();\n    this.attachShadow({mode: 'open'});\n    this.#observer = new MutationObserver(this.#render.bind(this));\n  }\n\n  set editable(isEditable: boolean) {\n    if (this.#editable === isEditable) {\n      return;\n    }\n    this.#editable = isEditable;\n    this.#render();\n  }\n\n  set deletable(isDeletable: boolean) {\n    if (this.#deletable === isDeletable) {\n      return;\n    }\n    this.#deletable = isDeletable;\n    this.#render();\n  }\n\n  set disableListItemFocus(disableFocus: boolean) {\n    if (this.#disableListItemFocus === disableFocus) {\n      return;\n    }\n    this.#disableListItemFocus = disableFocus;\n    this.#render();\n  }\n\n  attributeChangedCallback(name: string, oldValue: string|null, newValue: string|null): void {\n    const isSet = newValue !== null;\n    if (name === 'editable') {\n      this.editable = isSet;\n    } else if (name === 'deletable') {\n      this.deletable = isSet;\n    } else if (name === 'disable-li-focus') {\n      this.disableListItemFocus = isSet;\n    }\n  }\n\n  connectedCallback(): void {\n    this.#observer.observe(this, {childList: true});\n    this.#render();\n  }\n\n  disconnectedCallback(): void {\n    this.#observer.disconnect();\n  }\n\n  createSlottedListItem(index: number): TemplateResult {\n    return html`\n    <li role='listitem' tabindex=${this.#disableListItemFocus ? '-1' : '0'}>\n    <slot name='slot-${index}'></slot>\n    <div class='controls-container'>\n              <div class='controls-gradient'></div>\n              <div class='controls-buttons'>\n                ${\n        this.#editable ? html`\n            <devtools-button\n              title=${i18nString(UIStrings.edit)}\n              aria-label=${i18nString(UIStrings.edit)}\n              .iconName=${'edit'}\n              .jslogContext=${'edit-item'}\n              .variant=${Buttons.Button.Variant.ICON}\n              @click=${this.#dispatchEdit.bind(this, index)}\n            ></devtools-button>\n          ` :\n                         nothing}\n                ${\n        this.#deletable ? html`\n            <devtools-button\n              title=${i18nString(UIStrings.remove)}\n              aria-label=${i18nString(UIStrings.remove)}\n              .iconName=${'bin'}\n              .jslogContext=${'remove-item'}\n              .variant=${Buttons.Button.Variant.ICON}\n              @click=${this.#dispatchRemove.bind(this, index)}\n            ></devtools-button>\n          ` :\n                          nothing}\n              </div>\n            </div>\n            </li>`;\n  }\n\n  #render(): void {\n    if (this.shadowRoot) {\n      const items = [...this.children] as HTMLElement[];\n      const listData = items.map((item, index) => {\n        const slotName = `slot-${index}`;\n        if (item.getAttribute('slot') !== slotName) {\n          item.setAttribute('slot', slotName);\n        }\n        return {index, item};\n      });\n      render(\n          html`\n    <style>${listStyles}</style>\n    <ul role='list'>\n    ${Directives.repeat(listData, data => data.item, data => this.createSlottedListItem(data.index))}\n    </ul>\n  `,\n          this.shadowRoot);\n    }\n  }\n\n  #dispatchRemove(index: number): void {\n    this.dispatchEvent(new ItemRemoveEvent({index}));\n  }\n\n  #dispatchEdit(index: number): void {\n    this.dispatchEvent(new ItemEditEvent({index}));\n  }\n}\n\ncustomElements.define('devtools-list', List);\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    'devtools-list': List;\n  }\n}\n\ndeclare global {\n  interface HTMLElementEventMap extends Record<'delete', ItemRemoveEvent>, Record<'edit', ItemEditEvent> {}\n}\n"]}