{"version":3,"file":"Tooltip.js","sourceRoot":"","sources":["../../../../../../../front_end/ui/components/tooltips/Tooltip.ts"],"names":[],"mappings":"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","sourcesContent":["// Copyright 2025 The Chromium Authors. All rights reserved.\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\n/* eslint-disable rulesdir/no-lit-render-outside-of-view */\n\nimport * as Lit from '../../lit/lit.js';\nimport * as VisualLogging from '../../visual_logging/visual_logging.js';\n\nimport tooltipStyles from './tooltip.css.js';\n\nconst {html} = Lit;\n\nexport type TooltipVariant = 'simple'|'rich';\n\nexport interface TooltipProperties {\n  id: string;\n  variant?: TooltipVariant;\n  anchor?: HTMLElement;\n  jslogContext?: string;\n}\n\n/**\n * @attr id - Id of the tooltip. Used for searching an anchor element with aria-describedby.\n * @attr hover-delay - Hover length in ms before the tooltip is shown and hidden.\n * @attr variant - Variant of the tooltip, `\"simple\"` for strings only, inverted background, `\"rich\"` for interactive\n *                 content, background according to theme's surface.\n * @attr use-click - If present, the tooltip will be shown on click instead of on hover.\n * @attr use-hotkey - If present, the tooltip will be shown on hover but not when receiving focus. Requires a hotkey to\n *                    open when fosed (Alt-down). When `\"use-click\"` is present as well, use-click takes precedence.\n * @prop {String} id - reflects the `\"id\"` attribute.\n * @prop {Number} hoverDelay - reflects the `\"hover-delay\"` attribute.\n * @prop {String} variant - reflects the `\"variant\"` attribute.\n * @prop {Boolean} useClick - reflects the `\"click\"` attribute.\n * @prop {Boolean} useHotkey - reflects the `\"use-hotkey\"` attribute.\n */\nexport class Tooltip extends HTMLElement {\n  static readonly observedAttributes = ['id', 'variant', 'jslogcontext'];\n  static lastOpenedTooltipId: string|null = null;\n\n  readonly #shadow = this.attachShadow({mode: 'open'});\n  #anchor: HTMLElement|null = null;\n  #timeout: number|null = null;\n  #closing = false;\n  #anchorObserver: MutationObserver|null = null;\n\n  get open(): boolean {\n    return this.matches(':popover-open');\n  }\n\n  get useHotkey(): boolean {\n    return this.hasAttribute('use-hotkey') ?? false;\n  }\n  set useHotkey(useHotkey: boolean) {\n    if (useHotkey) {\n      this.setAttribute('use-hotkey', '');\n    } else {\n      this.removeAttribute('use-hotkey');\n    }\n  }\n\n  get useClick(): boolean {\n    return this.hasAttribute('use-click') ?? false;\n  }\n  set useClick(useClick: boolean) {\n    if (useClick) {\n      this.setAttribute('use-click', '');\n    } else {\n      this.removeAttribute('use-click');\n    }\n  }\n\n  get hoverDelay(): number {\n    return this.hasAttribute('hover-delay') ? Number(this.getAttribute('hover-delay')) : 200;\n  }\n  set hoverDelay(delay: number) {\n    this.setAttribute('hover-delay', delay.toString());\n  }\n\n  get variant(): TooltipVariant {\n    return this.getAttribute('variant') === 'rich' ? 'rich' : 'simple';\n  }\n  set variant(variant: TooltipVariant) {\n    this.setAttribute('variant', variant);\n  }\n\n  get jslogContext(): string|null {\n    return this.getAttribute('jslogcontext');\n  }\n  set jslogContext(jslogContext: string) {\n    this.setAttribute('jslogcontext', jslogContext);\n    this.#updateJslog();\n  }\n\n  get anchor(): HTMLElement|null {\n    return this.#anchor;\n  }\n\n  constructor(properties?: TooltipProperties) {\n    super();\n    if (properties) {\n      this.id = properties.id;\n    }\n    if (properties?.variant) {\n      this.variant = properties.variant;\n    }\n    if (properties?.jslogContext) {\n      this.jslogContext = properties.jslogContext;\n    }\n    if (properties?.anchor) {\n      const ref = properties.anchor.getAttribute('aria-details') ?? properties.anchor.getAttribute('aria-describedby');\n      if (ref !== properties.id) {\n        throw new Error('aria-details or aria-describedby must be set on the anchor');\n      }\n      this.#anchor = properties.anchor;\n    }\n  }\n\n  attributeChangedCallback(name: string, oldValue: string, newValue: string): void {\n    if (!this.isConnected) {\n      // There is no need to do anything before the connectedCallback is called.\n      return;\n    }\n    if (name === 'id') {\n      this.#removeEventListeners();\n      this.#attachToAnchor();\n      if (Tooltip.lastOpenedTooltipId === oldValue) {\n        Tooltip.lastOpenedTooltipId = newValue;\n      }\n    } else if (name === 'jslogcontext') {\n      this.#updateJslog();\n    }\n  }\n\n  connectedCallback(): void {\n    this.#attachToAnchor();\n    this.#registerEventListeners();\n    this.#setAttributes();\n\n    // clang-format off\n    Lit.render(html`\n      <style>${tooltipStyles.cssText}</style>\n      <!-- Wrapping it into a container, so that the tooltip doesn't disappear when the mouse moves from the anchor to the tooltip. -->\n      <div class=\"container\">\n        <slot></slot>\n      </div>\n    `, this.#shadow, {host: this});\n    // clang-format on\n\n    if (Tooltip.lastOpenedTooltipId === this.id) {\n      this.showPopover();\n    }\n  }\n\n  disconnectedCallback(): void {\n    this.#removeEventListeners();\n    this.#anchorObserver?.disconnect();\n  }\n\n  showTooltip = (): void => {\n    if (this.#timeout) {\n      window.clearTimeout(this.#timeout);\n    }\n    this.#timeout = window.setTimeout(() => {\n      this.showPopover();\n      Tooltip.lastOpenedTooltipId = this.id;\n    }, this.hoverDelay);\n  };\n\n  hideTooltip = (event?: MouseEvent|FocusEvent): void => {\n    if (this.#timeout) {\n      window.clearTimeout(this.#timeout);\n    }\n    // If the event is a blur event, then:\n    // 1. event.currentTarget = the element that got blurred\n    // 2. event.relatedTarget = the element that gained focus\n    // https://developer.mozilla.org/en-US/docs/Web/API/FocusEvent/relatedTarget\n    // If the blurred element (1) was our anchor, and the newly focused element\n    // (2) is within the tooltip, we do not want to hide the tooltip.\n    if (event && this.variant === 'rich' && event.target === this.#anchor && event.relatedTarget instanceof Node &&\n        this.contains(event.relatedTarget)) {\n      return;\n    }\n\n    // Don't hide a rich tooltip when hovering over the tooltip itself.\n    if (event && this.variant === 'rich' &&\n        (event.relatedTarget === this || (event.relatedTarget as Element)?.parentElement === this)) {\n      return;\n    }\n    if (this.open && Tooltip.lastOpenedTooltipId === this.id) {\n      Tooltip.lastOpenedTooltipId = null;\n    }\n    this.#timeout = window.setTimeout(() => {\n      this.hidePopover();\n    }, this.hoverDelay);\n  };\n\n  toggle = (): void => {\n    // We need this check because clicking on the anchor while the tooltip is open will trigger both\n    // the click event on the anchor and the toggle event from the backdrop of the tooltip.\n    if (!this.#closing) {\n      this.togglePopover();\n    }\n  };\n\n  #updateJslog(): void {\n    if (this.jslogContext && this.#anchor) {\n      VisualLogging.setMappedParent(this, this.#anchor);\n      this.setAttribute('jslog', VisualLogging.popover(this.jslogContext).parent('mapped').toString());\n    } else {\n      this.removeAttribute('jslog');\n    }\n  }\n\n  #setAttributes(): void {\n    if (!this.hasAttribute('role')) {\n      this.setAttribute('role', 'tooltip');\n    }\n    this.setAttribute('popover', this.useClick ? 'auto' : 'manual');\n    this.#updateJslog();\n  }\n\n  #stopPropagation(event: Event): void {\n    event.stopPropagation();\n  }\n\n  #setClosing = (event: Event): void => {\n    if ((event as ToggleEvent).newState === 'closed') {\n      this.#closing = true;\n    }\n  };\n\n  #resetClosing = (event: Event): void => {\n    if ((event as ToggleEvent).newState === 'closed') {\n      this.#closing = false;\n    }\n  };\n\n  #keyDown = (event: KeyboardEvent): void => {\n    if ((event.altKey && event.key === 'ArrowDown') || (event.key === 'Escape' && this.open)) {\n      this.toggle();\n      event.consume(true);\n    }\n  };\n\n  #registerEventListeners(): void {\n    if (this.#anchor) {\n      if (this.useClick) {\n        this.#anchor.addEventListener('click', this.toggle);\n      } else {\n        this.#anchor.addEventListener('mouseenter', this.showTooltip);\n        if (this.useHotkey) {\n          this.#anchor.addEventListener('keydown', this.#keyDown);\n        } else {\n          this.#anchor.addEventListener('focus', this.showTooltip);\n        }\n        this.#anchor.addEventListener('blur', this.hideTooltip);\n        this.#anchor.addEventListener('mouseleave', this.hideTooltip);\n        this.addEventListener('mouseleave', this.hideTooltip);\n      }\n    }\n    // Prevent interaction with the parent element.\n    this.addEventListener('click', this.#stopPropagation);\n    this.addEventListener('mouseup', this.#stopPropagation);\n    this.addEventListener('beforetoggle', this.#setClosing);\n    this.addEventListener('toggle', this.#resetClosing);\n  }\n\n  #removeEventListeners(): void {\n    if (this.#timeout) {\n      window.clearTimeout(this.#timeout);\n    }\n    if (this.#anchor) {\n      this.#anchor.removeEventListener('click', this.toggle);\n      this.#anchor.removeEventListener('mouseenter', this.showTooltip);\n      this.#anchor.removeEventListener('focus', this.showTooltip);\n      this.#anchor.removeEventListener('blur', this.hideTooltip);\n      this.#anchor.removeEventListener('keydown', this.#keyDown);\n      this.#anchor.removeEventListener('mouseleave', this.hideTooltip);\n    }\n    this.removeEventListener('mouseleave', this.hideTooltip);\n    this.removeEventListener('click', this.#stopPropagation);\n    this.removeEventListener('mouseup', this.#stopPropagation);\n    this.removeEventListener('beforetoggle', this.#setClosing);\n    this.removeEventListener('toggle', this.#resetClosing);\n  }\n\n  #attachToAnchor(): void {\n    if (!this.#anchor) {\n      const id = this.getAttribute('id');\n      if (!id) {\n        throw new Error('<devtools-tooltip> must have an id.');\n      }\n      const root = this.getRootNode() as Document | ShadowRoot;\n      if (root.querySelectorAll(`#${id}`)?.length > 1) {\n        throw new Error('Duplicate <devtools-tooltip> ids found.');\n      }\n      const describedbyAnchor = root.querySelector(`[aria-describedby=\"${id}\"]`);\n      const detailsAnchor = root.querySelector(`[aria-details=\"${id}\"]`);\n      const anchor = describedbyAnchor ?? detailsAnchor;\n      if (!anchor) {\n        throw new Error(`No anchor for tooltip with id ${id} found.`);\n      }\n      if (!(anchor instanceof HTMLElement)) {\n        throw new Error('Anchor must be an HTMLElement.');\n      }\n      this.#anchor = anchor;\n      if (this.variant === 'rich' && describedbyAnchor) {\n        console.warn(`The anchor for tooltip ${\n            id} was defined with \"aria-describedby\". For rich tooltips \"aria-details\" is more appropriate.`);\n      }\n    }\n\n    const anchorName = `--devtools-tooltip-${this.id}-anchor`;\n    this.#anchor.style.anchorName = anchorName;\n    this.style.positionAnchor = anchorName;\n    this.#observeAnchorRemoval(this.#anchor);\n\n    this.#updateJslog();\n  }\n\n  #observeAnchorRemoval(anchor: Element): void {\n    if (anchor.parentElement === null) {\n      return;\n    }\n    if (this.#anchorObserver) {\n      this.#anchorObserver.disconnect();\n    }\n\n    this.#anchorObserver = new MutationObserver(mutations => {\n      for (const mutation of mutations) {\n        if (mutation.type === 'childList' && [...mutation.removedNodes].includes(anchor)) {\n          if (this.#timeout) {\n            window.clearTimeout(this.#timeout);\n          }\n          this.hidePopover();\n        }\n      }\n    });\n    this.#anchorObserver.observe(anchor.parentElement, {childList: true});\n  }\n}\n\ncustomElements.define('devtools-tooltip', Tooltip);\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    'devtools-tooltip': Tooltip;\n  }\n  // Remove this once the CSSStyleDeclaration interface is updated in the TypeScript standard library.\n  interface CSSStyleDeclaration {\n    anchorName: string;\n    positionAnchor: string;\n  }\n}\n"]}