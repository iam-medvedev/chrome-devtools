{"version":3,"file":"Adorner.test.js","sourceRoot":"","sources":["../../../../../../../front_end/ui/components/adorners/Adorner.test.ts"],"names":[],"mappings":"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","sourcesContent":["// Copyright 2020 The Chromium Authors\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\n\nimport type * as Platform from '../../../core/platform/platform.js';\n\nimport * as Adorners from './adorners.js';\n\nconst ADORNER_TAG_NAME = 'DEVTOOLS-ADORNER';\n\ndescribe('Adorner', () => {\n  function assertIsAdorner(element: HTMLElement) {\n    assert.strictEqual(element.tagName, ADORNER_TAG_NAME, `element tag name is not ${ADORNER_TAG_NAME}`);\n    assert.instanceOf(element, Adorners.Adorner.Adorner, 'element is not an instance of Adorner');\n    assert.strictEqual(\n        Object.getPrototypeOf(element), Adorners.Adorner.Adorner.prototype,\n        'element is not on Adorner\\'s prototype chain');\n  }\n\n  it('can be created by document.createElement', () => {\n    const adorner = document.createElement('devtools-adorner');\n    assertIsAdorner(adorner);\n  });\n\n  it('can interact as a toggle button with proper ARIA setup', () => {\n    const ariaLabelDefault = 'adorner toggled on' as Platform.UIString.LocalizedString;\n    const ariaLabelActive = 'adorner toggled off' as Platform.UIString.LocalizedString;\n\n    const content = document.createElement('span');\n    const adorner = new Adorners.Adorner.Adorner();\n    adorner.name = ariaLabelDefault;\n    adorner.append(content);\n    assert.isNull(adorner.getAttribute('role'), 'non-interactive adorner had wrong aria role value');\n\n    adorner.setAttribute('toggleable', 'true');\n\n    // Adorner no longer handles clicks and keydowns automatically.\n    // We simulate the consumer (like ElementsTreeElement) handling logic.\n    const clickListener = () => {\n      if (adorner.isActive()) {\n        adorner.setAttribute('active', 'false');\n        adorner.setAttribute('aria-label', ariaLabelDefault);\n      } else {\n        adorner.setAttribute('active', 'true');\n        adorner.setAttribute('aria-label', ariaLabelActive);\n      }\n    };\n    adorner.addEventListener('click', clickListener);\n\n    // Initial state check after setting toggleable (should be inactive)\n    assert.strictEqual(\n        adorner.getAttribute('aria-pressed'), 'false',\n        'toggle adorner didn\\'t have correct initial aria-pressed value');\n\n    // Simulate Click\n    adorner.click();\n    assert.strictEqual(\n        adorner.getAttribute('aria-label'), ariaLabelActive,\n        'interactive adorner didn\\'t have correct active aria-label value');\n    assert.strictEqual(\n        adorner.getAttribute('role'), 'button', 'interactive adorner didn\\'t have correct aria role setup');\n    assert.strictEqual(\n        adorner.getAttribute('aria-pressed'), 'true', 'toggle adorner didn\\'t have correct active aria-pressed value');\n\n    // Simulate toggle OFF\n    adorner.click();\n    assert.strictEqual(\n        adorner.getAttribute('aria-label'), ariaLabelDefault,\n        'interactive adorner didn\\'t have correct inactive aria-label value');\n    assert.strictEqual(\n        adorner.getAttribute('aria-pressed'), 'false',\n        'toggle adorner didn\\'t have correct inactive aria-pressed value');\n  });\n\n  it('can be toggled programmatically', () => {\n    const content = document.createElement('span');\n    const adorner = new Adorners.Adorner.Adorner();\n    adorner.name = 'foo';\n    adorner.setAttribute('toggleable', 'true');\n    adorner.append(content);\n    assert.strictEqual(\n        adorner.getAttribute('aria-pressed'), 'false',\n        'toggle adorner didn\\'t have correct initial aria-pressed value');\n\n    adorner.setAttribute('active', 'true');\n    assert.strictEqual(\n        adorner.getAttribute('aria-pressed'), 'true', 'toggle adorner didn\\'t have correct active aria-pressed value');\n  });\n});\n"]}