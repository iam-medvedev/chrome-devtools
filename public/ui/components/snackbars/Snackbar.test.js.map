{"version":3,"file":"Snackbar.test.js","sourceRoot":"","sources":["../../../../../../../front_end/ui/components/snackbars/Snackbar.test.ts"],"names":[],"mappings":"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","sourcesContent":["// Copyright 2025 The Chromium Authors\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\n\nimport {\n  dispatchClickEvent,\n  renderElementIntoDOM,\n} from '../../../testing/DOMHelpers.js';\nimport {describeWithLocale} from '../../../testing/LocaleHelpers.js';\nimport * as UI from '../../legacy/legacy.js';\n\nimport * as Snackbars from './snackbars.js';\n\ndescribeWithLocale('Snackbar', () => {\n  let inspectorViewRootElementStub: HTMLElement;\n  beforeEach(() => {\n    inspectorViewRootElementStub = document.createElement('div');\n    renderElementIntoDOM(inspectorViewRootElementStub, {allowMultipleChildren: true});\n\n    const inspectorViewStub = sinon.createStubInstance(UI.InspectorView.InspectorView);\n    Object.assign(inspectorViewStub, {element: inspectorViewRootElementStub});\n    sinon.stub(UI.InspectorView.InspectorView, 'instance').returns(inspectorViewStub);\n  });\n\n  it('renders a basic snackbar', async () => {\n    const snackbar = new Snackbars.Snackbar.Snackbar({message: 'Test message'});\n    renderElementIntoDOM(snackbar, {allowMultipleChildren: true});\n\n    assert.exists(snackbar.shadowRoot);\n    const messageElement = snackbar.shadowRoot.querySelector('.message');\n    assert.strictEqual(messageElement?.textContent?.trim(), 'Test message');\n    assert.isFalse(snackbar.closable);\n    assert.isNull(snackbar.actionButtonLabel);\n  });\n\n  it('renders a closable snackbar', async () => {\n    const snackbar = new Snackbars.Snackbar.Snackbar({message: 'Test message', closable: true});\n    renderElementIntoDOM(snackbar, {allowMultipleChildren: true});\n\n    assert.exists(snackbar.shadowRoot);\n    assert.isTrue(snackbar.closable);\n    const closeButton = snackbar.shadowRoot.querySelector('devtools-button.dismiss');\n    assert.exists(closeButton);\n  });\n\n  it('renders a snackbar with an action button', async () => {\n    const actionHandler = sinon.spy();\n    const snackbar = new Snackbars.Snackbar.Snackbar({\n      message: 'Test message',\n      actionProperties: {\n        label: 'Click Me',\n        onClick: actionHandler,\n      },\n    });\n    renderElementIntoDOM(snackbar, {allowMultipleChildren: true});\n\n    assert.exists(snackbar.shadowRoot);\n    const actionButton = snackbar.shadowRoot.querySelector('devtools-button.snackbar-button');\n    assert.exists(actionButton);\n  });\n\n  it('renders a snackbar with a long action button', async () => {\n    const actionHandler = sinon.spy();\n    const snackbar = new Snackbars.Snackbar.Snackbar({\n      message: 'Test message',\n      actionProperties: {\n        label: 'This is a long action button',\n        onClick: actionHandler,\n      },\n    });\n    renderElementIntoDOM(snackbar, {allowMultipleChildren: true});\n\n    assert.exists(snackbar.shadowRoot);\n    const container = snackbar.shadowRoot.querySelector('.container');\n    assert.isTrue(container?.classList.contains('long-action'));\n    const actionButton = snackbar.shadowRoot.querySelector('.long-action-container devtools-button');\n    assert.exists(actionButton);\n  });\n\n  describe('closes the snackbar', () => {\n    it('closes the snackbar when the close button is clicked', async () => {\n      const snackbar = Snackbars.Snackbar.Snackbar.show({message: 'Click Me', closable: true});\n\n      assert.isTrue(inspectorViewRootElementStub.contains(snackbar));\n      assert.exists(snackbar.shadowRoot);\n      const closeButton = snackbar.shadowRoot.querySelector('devtools-button.dismiss');\n      assert.exists(closeButton);\n\n      dispatchClickEvent(closeButton);\n      assert.isFalse(inspectorViewRootElementStub.contains(snackbar));\n    });\n\n    it('closes the snackbar and calls handler when the action button is clicked', async () => {\n      const actionHandler = sinon.spy();\n      const snackbar = Snackbars.Snackbar.Snackbar.show({\n        message: 'Message',\n        actionProperties: {label: 'Click Me', onClick: actionHandler},\n      });\n\n      assert.isTrue(inspectorViewRootElementStub.contains(snackbar));\n      assert.exists(snackbar.shadowRoot);\n      const actionButton = snackbar.shadowRoot.querySelector('devtools-button');\n      assert.exists(actionButton);\n\n      dispatchClickEvent(actionButton);\n      sinon.assert.calledOnce(actionHandler);\n      assert.isFalse(inspectorViewRootElementStub.contains(snackbar));\n    });\n  });\n\n  describe('snackbarQueue', () => {\n    beforeEach(() => {\n      Snackbars.Snackbar.Snackbar.snackbarQueue = [];\n    });\n\n    it('shows the first snackbar and queues the second', () => {\n      const snackbar1 = Snackbars.Snackbar.Snackbar.show({message: 'Snackbar 1'});\n      const snackbar2 = Snackbars.Snackbar.Snackbar.show({message: 'Snackbar 2'});\n\n      assert.isTrue(inspectorViewRootElementStub.contains(snackbar1));\n      assert.isFalse(inspectorViewRootElementStub.contains(snackbar2));\n      assert.lengthOf(Snackbars.Snackbar.Snackbar.snackbarQueue, 2);\n    });\n\n    it('shows the second snackbar after the first one is manually closed', () => {\n      const snackbar1 = Snackbars.Snackbar.Snackbar.show({message: 'Snackbar 1', closable: true});\n      const snackbar2 = Snackbars.Snackbar.Snackbar.show({message: 'Snackbar 2'});\n\n      assert.isTrue(inspectorViewRootElementStub.contains(snackbar1));\n      assert.isFalse(inspectorViewRootElementStub.contains(snackbar2));\n      assert.exists(snackbar1.shadowRoot);\n      const closeButton = snackbar1.shadowRoot.querySelector('devtools-button.dismiss');\n      assert.exists(closeButton);\n      dispatchClickEvent(closeButton);\n\n      assert.isFalse(inspectorViewRootElementStub.contains(snackbar1));\n      assert.isTrue(inspectorViewRootElementStub.contains(snackbar2));\n      assert.lengthOf(Snackbars.Snackbar.Snackbar.snackbarQueue, 1);\n    });\n  });\n});\n"]}