{"version":3,"file":"ShortcutDialog.js","sourceRoot":"","sources":["../../../../../../../front_end/ui/components/dialogs/ShortcutDialog.ts"],"names":[],"mappings":"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","sourcesContent":["// Copyright 2023 The Chromium Authors. All rights reserved.\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\nimport './ButtonDialog.js';\n\nimport * as i18n from '../../../core/i18n/i18n.js';\nimport type * as Platform from '../../../core/platform/platform.js';\nimport * as Buttons from '../../../ui/components/buttons/buttons.js';\nimport * as ComponentHelpers from '../../../ui/components/helpers/helpers.js';\nimport {html, nothing, render} from '../../../ui/lit/lit.js';\n\nimport type {ButtonDialogData} from './ButtonDialog.js';\nimport shortcutDialogStylesRaw from './shortcutDialog.css.js';\n\n// TODO(crbug.com/391381439): Fully migrate off of constructed style sheets.\nconst shortcutDialogStyles = new CSSStyleSheet();\nshortcutDialogStyles.replaceSync(shortcutDialogStylesRaw.cssContent);\n\nconst UIStrings = {\n\n  /**\n   * @description Title of question mark button for the shortcuts dialog.\n   */\n  showShortcutTitle: 'Show shortcuts',\n  /**\n   * @description Title of the keyboard shortcuts help menu.\n   */\n  dialogTitle: 'Keyboard shortcuts',\n} as const;\n\nconst str_ = i18n.i18n.registerUIStrings('ui/components/dialogs/ShortcutDialog.ts', UIStrings);\nconst i18nString = i18n.i18n.getLocalizedString.bind(undefined, str_);\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    'devtools-shortcut-dialog': ShortcutDialog;\n  }\n}\n\nexport interface Shortcut {\n  title: string|Platform.UIString.LocalizedString;\n  bindings: string[][];\n}\nexport interface ShortcutDialogData {\n  shortcuts: Shortcut[];\n  open?: boolean;\n}\n\nexport class ShortcutDialog extends HTMLElement {\n  readonly #shadow = this.attachShadow({mode: 'open'});\n  readonly #renderBound = this.#render.bind(this);\n\n  #shortcuts: Shortcut[] = [];\n  #openOnRender = false;\n  #prependedElement: HTMLElement|null = null;\n\n  connectedCallback(): void {\n    this.#shadow.adoptedStyleSheets = [shortcutDialogStyles];\n  }\n\n  set data(data: ShortcutDialogData) {\n    this.#shortcuts = data.shortcuts;\n    if (data.open) {\n      this.#openOnRender = data.open;\n    }\n\n    void ComponentHelpers.ScheduledRender.scheduleRender(this, this.#renderBound);\n  }\n\n  prependElement(element: HTMLElement): void {\n    this.#prependedElement = element;\n  }\n\n  #render(): void {\n    if (!ComponentHelpers.ScheduledRender.isScheduledRender(this)) {\n      throw new Error('Shortcut dialog render was not scheduled');\n    }\n\n    // clang-format off\n    render(\n      html`\n      <devtools-button-dialog .data=${{\n          openOnRender: this.#openOnRender,\n          closeButton: true,\n          dialogTitle: i18nString(UIStrings.dialogTitle),\n          variant: Buttons.Button.Variant.TOOLBAR,\n          iconName: 'help',\n          iconTitle: i18nString(UIStrings.showShortcutTitle),\n        } as ButtonDialogData}>\n        <ul class=\"keybinds-list\">\n          ${(this.#prependedElement) ? html`${this.#prependedElement}` : nothing}\n          ${this.#shortcuts.map(shortcut =>\n            html`\n              <li class=\"keybinds-list-item\">\n                <div class=\"keybinds-list-title\">${shortcut.title}</div>\n                <div class=\"shortcuts-for-actions\">\n                  ${shortcut.bindings.map(binding => {\n                    return html`\n                    <div class=\"keys-container\">\n                      ${binding.map(key => html`\n                          <span class=\"keybinds-key\">${key}</span>\n                      `)}\n                    </div>\n                  `;\n                    })}\n                  </div>\n              </li>`,\n          )}\n        </ul>\n      </devtools-button-dialog>\n      `,\n      this.#shadow, {host: this});\n    // clang-format on\n  }\n}\n\ncustomElements.define('devtools-shortcut-dialog', ShortcutDialog);\n"]}