{"version":3,"file":"timeline_history_manager.js","sourceRoot":"","sources":["../../../../../../../../front_end/ui/components/docs/performance_panel/timeline_history_manager.ts"],"names":[],"mappings":"AAAA,4DAA4D;AAC5D,yEAAyE;AACzE,6BAA6B;AAE7B,OAAO,KAAK,KAAK,MAAM,mCAAmC,CAAC;AAC3D,OAAO,KAAK,QAAQ,MAAM,yCAAyC,CAAC;AACpE,OAAO,KAAK,eAAe,MAAM,2CAA2C,CAAC;AAC7E,OAAO,KAAK,WAAW,MAAM,oCAAoC,CAAC;AAClE,OAAO,KAAK,EAAE,MAAM,2BAA2B,CAAC;AAChD,OAAO,KAAK,cAAc,MAAM,0BAA0B,CAAC;AAE3D,MAAM,eAAe,CAAC,oBAAoB,EAAE,CAAC;AAC7C,MAAM,cAAc,CAAC,oBAAoB,CAAC,KAAK,EAAE,CAAC;AAElD,EAAE,CAAC,kBAAkB,CAAC,uBAAuB,CAAC;IAC5C,QAAQ,EAAE,uBAAuB;IACjC,QAAQ,sEAAkD;IAC1D,YAAY;QACV,OAAO,CAAC,QAAQ,CAAC,aAAa,CAAC,aAAa,CAAC,CAAC;IAChD,CAAC;IACD,KAAK,CAAC,kBAAkB;QACtB,OAAO,IAAI,QAAQ,CAAC,aAAa,CAAC,cAAc,EAAE,CAAC;IACrD,CAAC;CACF,CAAC,CAAC;AAEH,MAAM,EAAC,WAAW,EAAE,YAAY,EAAE,QAAQ,EAAE,SAAS,EAAC,GAClD,MAAM,WAAW,CAAC,WAAW,CAAC,WAAW,CAAC,IAAI,EAAE,8BAA8B,CAAC,CAAC;AACpF,WAAW,CAAC,WAAW,CAAC,sBAAsB,CAAC,YAAY,CAAC,CAAC;AAE7D,IAAI,QAAQ,CAAC,sBAAsB,CAAC,sBAAsB,EAAE,CAAC,YAAY,CAAC;IACxE,IAAI,EAAE;QACJ,gBAAgB,EAAE,CAAC;QACnB,IAAI,EAAE,aAAa;KACpB;IACD,mBAAmB,EAAE,KAAK,CAAC,MAAM,CAAC,SAAS,CAAC,eAAe,CAAC,YAAY,CAAC;IACzE,WAAW,EAAE,YAAY;IACzB,QAAQ,EAAE,SAAS;CACpB,CAAC,CAAC;AAEH,MAAM,EAAC,WAAW,EAAE,YAAY,EAAE,QAAQ,EAAE,SAAS,EAAC,GAClD,MAAM,WAAW,CAAC,WAAW,CAAC,WAAW,CAAC,IAAI,EAAE,iBAAiB,CAAC,CAAC;AACvE,WAAW,CAAC,WAAW,CAAC,sBAAsB,CAAC,YAAY,CAAC,CAAC;AAC7D,MAAM,SAAS,GAAG,QAAQ,CAAC,aAAa,CAAC,YAAY,CAAC,CAAC;AACvD,IAAI,CAAC,SAAS,EAAE,CAAC;IACf,MAAM,IAAI,KAAK,CAAC,0BAA0B,CAAC,CAAC;AAC9C,CAAC;AAED,IAAI,QAAQ,CAAC,sBAAsB,CAAC,sBAAsB,EAAE,CAAC,YAAY,CAAC;IACxE,IAAI,EAAE;QACJ,gBAAgB,EAAE,CAAC;QACnB,IAAI,EAAE,aAAa;KACpB;IACD,mBAAmB,EAAE,KAAK,CAAC,MAAM,CAAC,SAAS,CAAC,eAAe,CAAC,YAAY,CAAC;IACzE,WAAW,EAAE,YAAY;IACzB,QAAQ,EAAE,SAAS;CACpB,CAAC,CAAC;AACH,MAAM,QAAQ,CAAC,sBAAsB,CAAC,QAAQ,CAAC,IAAI,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,EAAE,SAAS,CAAC,CAAC","sourcesContent":["// Copyright 2023 The Chromium Authors. All rights reserved.\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\n\nimport * as Trace from '../../../../models/trace/trace.js';\nimport * as Timeline from '../../../../panels/timeline/timeline.js';\nimport * as FrontendHelpers from '../../../../testing/EnvironmentHelpers.js';\nimport * as TraceLoader from '../../../../testing/TraceLoader.js';\nimport * as UI from '../../../legacy/legacy.js';\nimport * as ComponentSetup from '../../helpers/helpers.js';\n\nawait FrontendHelpers.initializeGlobalVars();\nawait ComponentSetup.ComponentServerSetup.setup();\n\nUI.ActionRegistration.registerActionExtension({\n  actionId: 'timeline.show-history',\n  category: UI.ActionRegistration.ActionCategory.PERFORMANCE,\n  contextTypes() {\n    return [Timeline.TimelinePanel.TimelinePanel];\n  },\n  async loadActionDelegate() {\n    return new Timeline.TimelinePanel.ActionDelegate();\n  },\n});\n\nconst {parsedTrace: parsedTrace1, metadata: metadata1} =\n    await TraceLoader.TraceLoader.traceEngine(null, 'multiple-navigations.json.gz');\nTraceLoader.TraceLoader.initTraceBoundsManager(parsedTrace1);\n\nnew Timeline.TimelineHistoryManager.TimelineHistoryManager().addRecording({\n  data: {\n    parsedTraceIndex: 0,\n    type: 'TRACE_INDEX',\n  },\n  filmStripForPreview: Trace.Extras.FilmStrip.fromParsedTrace(parsedTrace1),\n  parsedTrace: parsedTrace1,\n  metadata: metadata1,\n});\n\nconst {parsedTrace: parsedTrace2, metadata: metadata2} =\n    await TraceLoader.TraceLoader.traceEngine(null, 'web-dev.json.gz');\nTraceLoader.TraceLoader.initTraceBoundsManager(parsedTrace2);\nconst container = document.querySelector('.container');\nif (!container) {\n  throw new Error('could not find container');\n}\n\nnew Timeline.TimelineHistoryManager.TimelineHistoryManager().addRecording({\n  data: {\n    parsedTraceIndex: 1,\n    type: 'TRACE_INDEX',\n  },\n  filmStripForPreview: Trace.Extras.FilmStrip.fromParsedTrace(parsedTrace2),\n  parsedTrace: parsedTrace2,\n  metadata: metadata2,\n});\nawait Timeline.TimelineHistoryManager.DropDown.show([0, 1], 1, container);\n"]}