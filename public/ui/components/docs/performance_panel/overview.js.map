{"version":3,"file":"overview.js","sourceRoot":"","sources":["../../../../../../../../front_end/ui/components/docs/performance_panel/overview.ts"],"names":[],"mappings":"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","sourcesContent":["// Copyright 2023 The Chromium Authors. All rights reserved.\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\n\nimport * as EnvironmentHelpers from '../../../../../test/unittests/front_end/helpers/EnvironmentHelpers.js';\nimport * as TraceLoader from '../../../../../test/unittests/front_end/helpers/TraceLoader.js';\nimport * as TraceEngine from '../../../../models/trace/trace.js';\nimport * as Timeline from '../../../../panels/timeline/timeline.js';\nimport * as ComponentSetup from '../../helpers/helpers.js';\n\nawait EnvironmentHelpers.initializeGlobalVars();\nawait ComponentSetup.ComponentServerSetup.setup();\nconst container = document.querySelector<HTMLElement>('div.container');\nif (!container) {\n  throw new Error('could not find container');\n}\n\nconst params = new URLSearchParams(window.location.search);\nconst fileName = (params.get('trace') || 'web-dev') + '.json.gz';\nconst customStartWindowTime = params.get('windowStart');\nconst customEndWindowTime = params.get('windowEnd');\n\nasync function renderMiniMap(containerSelector: string, options: {showMemory: boolean}) {\n  const container = document.querySelector<HTMLElement>(containerSelector);\n  if (!container) {\n    throw new Error('could not find container');\n  }\n  const models = await TraceLoader.TraceLoader.allModels(null, fileName);\n  const {left, right} = models.performanceModel.calculateWindowForMainThreadActivity();\n  models.performanceModel.setWindow({left, right});\n\n  const minimap = new Timeline.TimelineMiniMap.TimelineMiniMap();\n  minimap.activateBreadcrumbs();\n  minimap.markAsRoot();\n  minimap.show(container);\n\n  const bounds = TraceEngine.Helpers.Timing.traceWindowMilliSeconds(models.traceParsedData.Meta.traceBounds);\n  minimap.setBounds(\n      TraceEngine.Types.Timing.MilliSeconds(bounds.min),\n      TraceEngine.Types.Timing.MilliSeconds(bounds.max),\n  );\n\n  minimap.setData({\n    traceParsedData: models.traceParsedData,\n    settings: {\n      showMemory: options.showMemory,\n      showScreenshots: true,\n    },\n  });\n  if (customStartWindowTime && customEndWindowTime) {\n    minimap.setWindowTimes(Number(customStartWindowTime), Number(customEndWindowTime));\n  } else {\n    minimap.setWindowTimes(models.performanceModel.window().left, models.performanceModel.window().right);\n  }\n}\n\nawait renderMiniMap('.container', {showMemory: false});\nawait renderMiniMap('.container-with-memory', {showMemory: true});\n"]}