{"version":3,"file":"Widget.test.js","sourceRoot":"","sources":["../../../../../../front_end/ui/legacy/Widget.test.ts"],"names":[],"mappings":"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","sourcesContent":["// Copyright 2024 The Chromium Authors\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\n\nimport {renderElementIntoDOM} from '../../testing/DOMHelpers.js';\nimport {describeWithEnvironment} from '../../testing/EnvironmentHelpers.js';\nimport * as RenderCoordinator from '../components/render_coordinator/render_coordinator.js';\n\nimport * as UI from './legacy.js';\n\nconst {Widget} = UI.Widget;\n\nfunction checkFocus(id: string) {\n  const focused = UI.DOMUtilities.deepActiveElement(document);\n  const focusedId = focused ? focused.id : '';\n  assert.strictEqual(focusedId, id);\n}\n\ndescribeWithEnvironment('Widget', () => {\n  it('monkey-patches `Element#appendChild()` to sanity-check that widgets are properly attached', () => {\n    const div = document.createElement('div');\n    renderElementIntoDOM(div);\n\n    const widget = new Widget();\n    widget.markAsRoot();\n\n    assert.throws(\n        () => div.appendChild(widget.element), /Attempt to modify widget with native DOM method `appendChild`/);\n  });\n\n  it('monkey-patches `Element#insertBefore()` to sanity-check that widgets are properly attached', () => {\n    const div = document.createElement('div');\n    renderElementIntoDOM(div);\n    const child = document.createElement('span');\n    div.appendChild(child);\n\n    const widget = new Widget();\n    widget.markAsRoot();\n\n    assert.throws(\n        () => div.insertBefore(widget.element, child),\n        /Attempt to modify widget with native DOM method `insertBefore`/);\n  });\n\n  it('monkey-patches `Element#removeChild()` to sanity-check that widgets are properly detached', () => {\n    const div = document.createElement('div');\n    renderElementIntoDOM(div);\n\n    const widget = new Widget();\n    widget.markAsRoot();\n    widget.show(div);\n\n    assert.throws(\n        () => div.removeChild(widget.element), /Attempt to modify widget with native DOM method `removeChild`/);\n  });\n\n  it('monkey-patches `Element#removeChildren()` to sanity-check that widgets are properly detached', () => {\n    const div = document.createElement('div');\n    renderElementIntoDOM(div);\n\n    const widget = new Widget();\n    widget.markAsRoot();\n    widget.show(div);\n\n    assert.throws(() => div.removeChildren(), /Attempt to modify widget with native DOM method `removeChildren`/);\n  });\n\n  describe('constructor', () => {\n    it('doesn\\'t create a shadow DOM if `useShadowDom` is set to `false`', () => {\n      const widget = new Widget({useShadowDom: false});\n\n      assert.isNull(widget.element.shadowRoot);\n      assert.strictEqual(widget.element, widget.contentElement);\n    });\n\n    it('doesn\\'t create a shadow DOM if `useShadowDom` is unspecified', () => {\n      const widget = new Widget();\n\n      assert.isNull(widget.element.shadowRoot);\n      assert.strictEqual(widget.element, widget.contentElement);\n    });\n\n    it('correctly sets the `jslog` attribute of the `contentElement`', () => {\n      const widget = new Widget({jslog: 'Panel; context: foo'});\n\n      assert.strictEqual(\n          widget.contentElement.getAttribute('jslog'),\n          'Panel; context: foo',\n      );\n    });\n\n    it('correctly sets the `jslog` attribute of the `contentElement` in the presence of Shadow DOM', () => {\n      const widget = new Widget({jslog: 'Section; context: bar', useShadowDom: true});\n\n      assert.isNull(widget.element.getAttribute('jslog'));\n      assert.strictEqual(\n          widget.contentElement.getAttribute('jslog'),\n          'Section; context: bar',\n      );\n    });\n  });\n\n  describe('parentWidget', () => {\n    it('returns the immediate parent widget', () => {\n      const parentWidget = new Widget();\n      const childWidget = new Widget();\n      childWidget.show(parentWidget.contentElement);\n      assert.strictEqual(childWidget.parentWidget(), parentWidget);\n    });\n\n    it('returns the distant parent widget', () => {\n      const parentWidget = new Widget();\n      const div = document.createElement('div');\n      parentWidget.contentElement.appendChild(div);\n      const childWidget = new Widget();\n      childWidget.show(div);\n      assert.strictEqual(childWidget.parentWidget(), parentWidget);\n    });\n  });\n\n  describe('show', () => {\n    it('calls `wasShown` and `onResize` in order', () => {\n      const parentWidget = new Widget();\n      const parentOnResize = sinon.spy(parentWidget, 'onResize');\n      const parentWasShown = sinon.spy(parentWidget, 'wasShown');\n      const childWidget = new Widget();\n      const childOnResize = sinon.spy(childWidget, 'onResize');\n      const childWasShown = sinon.spy(childWidget, 'wasShown');\n      childWidget.show(parentWidget.contentElement);\n      const div = document.createElement('div');\n      renderElementIntoDOM(div);\n      parentWidget.markAsRoot();\n\n      parentWidget.show(div);\n\n      sinon.assert.callOrder(parentWasShown, childWasShown, parentOnResize, childOnResize);\n      sinon.assert.calledOnce(childWasShown);\n      sinon.assert.calledOnce(parentWasShown);\n      sinon.assert.calledOnce(childOnResize);\n      sinon.assert.calledOnce(parentOnResize);\n    });\n\n    it('automatically detaches from any previous parent', () => {\n      const parentWidget1 = new Widget();\n      const parentWidget2 = new Widget();\n      const childWidget = new Widget();\n      const childWidgetOnDetach = sinon.spy(childWidget, 'onDetach');\n      const div = document.createElement('div');\n      renderElementIntoDOM(div);\n      parentWidget1.markAsRoot();\n      parentWidget1.show(div);\n      parentWidget2.markAsRoot();\n      parentWidget2.show(div);\n      childWidget.show(parentWidget1.contentElement);\n\n      childWidget.show(parentWidget2.contentElement);\n\n      sinon.assert.calledOnce(childWidgetOnDetach);\n    });\n  });\n\n  describe('detach', () => {\n    it('calls `willHide`, `onDetach`, and `wasHidden` in order', () => {\n      const parentWidget = new Widget();\n      const parentOnDetach = sinon.spy(parentWidget, 'onDetach');\n      const parentWillHide = sinon.spy(parentWidget, 'willHide');\n      const parentWasHidden = sinon.spy(parentWidget, 'wasHidden');\n      const childWidget = new Widget();\n      const childOnDetach = sinon.spy(childWidget, 'onDetach');\n      const childWillHide = sinon.spy(childWidget, 'willHide');\n      const childWasHidden = sinon.spy(childWidget, 'wasHidden');\n      childWidget.show(parentWidget.contentElement);\n      const div = document.createElement('div');\n      renderElementIntoDOM(div);\n      parentWidget.markAsRoot();\n      parentWidget.show(div);\n\n      parentWidget.detach();\n\n      sinon.assert.callOrder(childWillHide, parentWillHide, parentOnDetach, childWasHidden, parentWasHidden);\n      sinon.assert.notCalled(childOnDetach);\n      sinon.assert.calledOnce(childWasHidden);\n      sinon.assert.calledOnce(childWillHide);\n      sinon.assert.calledOnce(parentOnDetach);\n      sinon.assert.calledOnce(parentWasHidden);\n      sinon.assert.calledOnce(parentWillHide);\n    });\n\n    it('cancels pending updates', async () => {\n      const widget = new Widget();\n      const performUpdate = sinon.spy(widget, 'performUpdate');\n      widget.markAsRoot();\n      widget.show(renderElementIntoDOM(document.createElement('main')));\n      widget.requestUpdate();\n\n      widget.detach();\n\n      await widget.updateComplete;\n      assert.strictEqual(performUpdate.callCount, 0, 'Expected no calls to `performUpdate`');\n    });\n  });\n\n  describe('performUpdate', () => {\n    it('can safely use the `RenderCoordinator` primitives', async () => {\n      const widget = new (class extends Widget {\n        override async performUpdate(): Promise<void> {\n          const clientHeight = await RenderCoordinator.read(() => this.contentElement.clientHeight);\n          const clientWidth = await RenderCoordinator.read(() => this.contentElement.clientWidth);\n          await RenderCoordinator.write(() => {\n            this.contentElement.style.width = `${clientWidth + 1}px`;\n            this.contentElement.style.height = `${clientHeight + 1}px`;\n          });\n        }\n      })();\n      widget.markAsRoot();\n      widget.show(renderElementIntoDOM(document.createElement('main')));\n\n      widget.requestUpdate();\n\n      await widget.updateComplete;\n    });\n  });\n\n  describe('requestUpdate', () => {\n    it('deduplicates subsequent update requests', async () => {\n      const widget = new Widget();\n      const performUpdate = sinon.stub(widget, 'performUpdate');\n\n      widget.requestUpdate();\n      widget.requestUpdate();\n      await widget.updateComplete;\n\n      assert.strictEqual(performUpdate.callCount, 1, 'Expected exactly one call to `performUpdate`');\n    });\n\n    it('runs nested updates in the same update cycle', async () => {\n      const parentWidget = new Widget();\n      const childWidget = new Widget();\n      childWidget.show(parentWidget.contentElement);\n\n      const parentPerformUpdate = sinon.stub(parentWidget, 'performUpdate');\n      parentPerformUpdate.callsFake(childWidget.requestUpdate.bind(childWidget));\n      const childPerformUpdate = sinon.stub(childWidget, 'performUpdate');\n\n      const animationFrame = sinon.spy();\n      requestAnimationFrame(animationFrame);\n\n      parentWidget.requestUpdate();\n      await parentWidget.updateComplete;\n\n      assert.strictEqual(parentPerformUpdate.callCount, 1, 'Expected exactly one call to `parentWidget.performUpdate`');\n      assert.strictEqual(childPerformUpdate.callCount, 1, 'Expected exactly one call to `childWidget.performUpdate`');\n      assert.strictEqual(animationFrame.callCount, 1, 'Expected exactly one call to `requestAnimationFrame`');\n    });\n\n    it('runs microtask updates in the same update cycle', async () => {\n      const parentWidget = new Widget();\n      const childWidget = new Widget();\n      childWidget.show(parentWidget.contentElement);\n\n      const parentPerformUpdate = sinon.stub(parentWidget, 'performUpdate');\n      parentPerformUpdate.callsFake(() => {\n        queueMicrotask(childWidget.requestUpdate.bind(childWidget));\n      });\n      const childPerformUpdate = sinon.stub(childWidget, 'performUpdate');\n\n      const animationFrame = sinon.spy();\n      requestAnimationFrame(animationFrame);\n\n      parentWidget.requestUpdate();\n      await parentWidget.updateComplete;\n\n      assert.strictEqual(parentPerformUpdate.callCount, 1, 'Expected exactly one call to `parentWidget.performUpdate`');\n      assert.strictEqual(childPerformUpdate.callCount, 1, 'Expected exactly one call to `childWidget.performUpdate`');\n      assert.strictEqual(animationFrame.callCount, 1, 'Expected exactly one call to `requestAnimationFrame`');\n    });\n  });\n\n  describe('updateComplete', () => {\n    it('resolves to `true` when there\\'s no pending update', async () => {\n      const widget = new Widget();\n\n      await widget.updateComplete;\n    });\n\n    it('resolves to `true` when update cycles ends without scheduling another update', async () => {\n      const widget = new Widget();\n\n      widget.requestUpdate();\n\n      await widget.updateComplete;\n    });\n\n    it('resolves when another update is requested during an update cycle', async () => {\n      const widget = new Widget();\n      sinon.stub(widget, 'performUpdate').onFirstCall().callsFake(widget.requestUpdate.bind(widget));\n\n      widget.requestUpdate();\n\n      await widget.updateComplete;\n      await widget.updateComplete;\n    });\n\n    it('yields the same promise for the same update cycle', async () => {\n      const widget = new Widget();\n\n      widget.requestUpdate();\n      const updateComplete = widget.updateComplete;\n      widget.requestUpdate();\n\n      assert.strictEqual(updateComplete, widget.updateComplete);\n      await widget.updateComplete;\n    });\n\n    it('yields a new promise for each update cycle', async () => {\n      const widget = new Widget();\n\n      widget.requestUpdate();\n      const updateComplete = widget.updateComplete;\n      await updateComplete;\n      widget.requestUpdate();\n\n      assert.notStrictEqual(updateComplete, widget.updateComplete);\n      await widget.updateComplete;\n    });\n  });\n\n  describe('focus', () => {\n    it('does nothing if the widget is not showing', () => {\n      const div = document.createElement('div');\n      renderElementIntoDOM(div);\n      const widget = new Widget();\n      const input = document.createElement('input');\n      widget.setDefaultFocusedElement(input);\n      widget.contentElement.appendChild(input);\n      widget.markAsRoot();\n\n      widget.focus();\n\n      assert.notStrictEqual(document.activeElement, input);\n    });\n\n    it('gives focus to the default focused element', () => {\n      const div = document.createElement('div');\n      renderElementIntoDOM(div);\n      const widget = new Widget();\n      const input = document.createElement('input');\n      widget.setDefaultFocusedElement(input);\n      widget.contentElement.appendChild(input);\n      widget.markAsRoot();\n      widget.show(div);\n\n      widget.focus();\n\n      assert.strictEqual(document.activeElement, input);\n    });\n\n    it('gives focus to the default focused child widget', () => {\n      const div = document.createElement('div');\n      renderElementIntoDOM(div);\n      const parent = new Widget();\n      const child = new Widget();\n      child.show(parent.contentElement);\n      const input = document.createElement('input');\n      child.setDefaultFocusedElement(input);\n      child.contentElement.appendChild(input);\n      parent.setDefaultFocusedChild(child);\n      parent.markAsRoot();\n      parent.show(div);\n      child.show(parent.contentElement);\n\n      parent.focus();\n\n      assert.strictEqual(document.activeElement, input);\n    });\n\n    it('gives focus to the first visible child if no default is set', () => {\n      const div = document.createElement('div');\n      renderElementIntoDOM(div);\n      const parent = new Widget();\n      const child1 = new Widget();\n      const input1 = document.createElement('input');\n      child1.setDefaultFocusedElement(input1);\n      child1.contentElement.appendChild(input1);\n      const child2 = new Widget();\n      const input2 = document.createElement('input');\n      child2.setDefaultFocusedElement(input2);\n      child2.contentElement.appendChild(input2);\n      parent.markAsRoot();\n      parent.show(div);\n      child1.show(parent.contentElement);\n      child2.show(parent.contentElement);\n\n      parent.focus();\n\n      assert.strictEqual(document.activeElement, input1);\n    });\n\n    it('gives focus to its own element with an autofocus attribute', () => {\n      const div = document.createElement('div');\n      renderElementIntoDOM(div);\n      const parent = new Widget();\n      const parentInput = document.createElement('input');\n      parentInput.setAttribute('autofocus', '');\n      parent.contentElement.appendChild(parentInput);\n\n      const child = new Widget();\n      const childInput = document.createElement('input');\n      child.setDefaultFocusedElement(childInput);\n      child.contentElement.appendChild(childInput);\n\n      parent.markAsRoot();\n      parent.show(div);\n      child.show(parent.contentElement);\n\n      parent.focus();\n\n      // parent.getDefaultFocusedElement() should find parentInput and focus it,\n      // ignoring the child.\n      assert.strictEqual(document.activeElement, parentInput);\n    });\n\n    it('does not directly focus an autofocus element in a child widget', () => {\n      const div = document.createElement('div');\n      renderElementIntoDOM(div);\n      const parent = new Widget();\n      const child1 = new Widget();\n      const child1Input = document.createElement('input');\n      child1.setDefaultFocusedElement(child1Input);\n      child1.contentElement.appendChild(child1Input);\n\n      const child2 = new Widget();\n      const child2Input = document.createElement('input');\n      child2.contentElement.appendChild(child2Input);\n\n      parent.markAsRoot();\n      parent.show(div);\n      child1.show(parent.contentElement);\n      child2.show(parent.contentElement);\n\n      parent.focus();\n\n      // parent.getDefaultFocusedElement() should be null because child2's autofocus\n      // is not its own. Then it should focus the first child (child1).\n      // child1 will then focus its default element.\n      assert.strictEqual(document.activeElement, child1Input);\n    });\n\n    it('should remember focus correctly on widgets.', () => {\n      const container = document.createElement('div');\n      renderElementIntoDOM(container);\n\n      const outerInput = document.createElement('input');\n      outerInput.id = 'Outer';\n      const input1 = document.createElement('input');\n      input1.id = 'Input1';\n      const input2 = document.createElement('input');\n      input2.id = 'Input2';\n      const input3 = document.createElement('input');\n      input3.id = 'Input3';\n      const input4 = document.createElement('input');\n      input4.id = 'Input4';\n\n      container.appendChild(outerInput);\n\n      const mainWidget = new Widget();\n      mainWidget.markAsRoot();\n      mainWidget.show(container);\n\n      const widget1 = new Widget();\n      widget1.show(mainWidget.element);\n      widget1.element.appendChild(input1);\n      widget1.setDefaultFocusedElement(input1);\n\n      const widget2 = new Widget();\n      widget2.show(mainWidget.element);\n      widget2.element.appendChild(input2);\n      widget2.setDefaultFocusedElement(input2);\n\n      outerInput.focus();\n      checkFocus(outerInput.id);\n\n      widget1.focus();\n      checkFocus(input1.id);\n\n      input2.focus();\n      checkFocus(input2.id);\n\n      outerInput.focus();\n      checkFocus(outerInput.id);\n\n      mainWidget.focus();\n      checkFocus(input2.id);\n\n      outerInput.focus();\n      checkFocus(outerInput.id);\n\n      widget2.hideWidget();\n      mainWidget.focus();\n      checkFocus(input1.id);\n\n      const splitWidget = new UI.SplitWidget.SplitWidget(false, false);\n      splitWidget.show(mainWidget.element);\n\n      const widget3 = new Widget();\n      widget3.element.appendChild(input3);\n      widget3.setDefaultFocusedElement(input3);\n      splitWidget.setSidebarWidget(widget3);\n\n      const widget4 = new Widget();\n      widget4.element.appendChild(input4);\n      widget4.setDefaultFocusedElement(input4);\n      splitWidget.setMainWidget(widget4);\n      splitWidget.setDefaultFocusedChild(widget4);\n\n      splitWidget.focus();\n      checkFocus(input4.id);\n\n      widget3.focus();\n      checkFocus(input3.id);\n\n      mainWidget.focus();\n      checkFocus(input3.id);\n    });\n\n    it('gives focus an autofocus element of a child widget', () => {\n      const parent = new Widget();\n      const child1 = new Widget();\n      const child1Input = document.createElement('input');\n      child1.setDefaultFocusedElement(child1Input);\n      child1.contentElement.appendChild(child1Input);\n\n      const child2 = new Widget();\n      child2.element.setAttribute('autofocus', '');\n      child2.element.tabIndex = 0;\n\n      renderElementIntoDOM(parent);\n      child1.show(parent.contentElement);\n      child2.show(parent.contentElement);\n\n      parent.focus();\n\n      assert.strictEqual(document.activeElement, child2.element);\n    });\n  });\n\n  describe('WidgetElement', () => {\n    it('renders WidgetElement into DOM without a root element', async () => {\n      const widget = new UI.Widget.WidgetElement();\n      class WidgetInstance extends UI.Widget.Widget {\n        override performUpdate(): void {\n          // no-op\n        }\n      }\n      widget.widgetConfig = UI.Widget.widgetConfig(WidgetInstance);\n      renderElementIntoDOM(widget);\n    });\n  });\n});\n"]}