{"version":3,"file":"UIUtils.test.js","sourceRoot":"","sources":["../../../../../../front_end/ui/legacy/UIUtils.test.ts"],"names":[],"mappings":"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","sourcesContent":["// Copyright 2022 The Chromium Authors. All rights reserved.\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\n\nimport * as Host from '../../core/host/host.js';\nimport * as i18n from '../../core/i18n/i18n.js';\nimport * as Platform from '../../core/platform/platform.js';\nimport type * as Root from '../../core/root/root.js';\nimport {renderElementIntoDOM} from '../../testing/DOMHelpers.js';\nimport {updateHostConfig} from '../../testing/EnvironmentHelpers.js';\nimport type * as Buttons from '../components/buttons/buttons.js';\nimport {Directives, html, render} from '../lit/lit.js';\n\nimport * as UI from './legacy.js';\n\nconst {urlString} = Platform.DevToolsPath;\n\ndescribe('UIUtils', () => {\n  describe('openInNewTab', () => {\n    const {openInNewTab} = UI.UIUtils;\n    const {InspectorFrontendHostInstance} = Host.InspectorFrontendHost;\n\n    it('throws a TypeError if the URL is invalid', () => {\n      assert.throws(() => openInNewTab('ThisIsNotAValidURL'), TypeError);\n    });\n\n    it('opens URLs via host bindings', () => {\n      const stub = sinon.stub(InspectorFrontendHostInstance, 'openInNewTab');\n\n      openInNewTab('https://www.google.com/');\n\n      sinon.assert.callCount(stub, 1);\n      assert.deepEqual(stub.args[0], ['https://www.google.com/']);\n    });\n\n    it('doesn\\'t override existing `utm_source` search parameters', () => {\n      const URLs = [\n        'http://developer.chrome.com/docs/devtools/workspaces/?utm_source=unittests',\n        'http://developers.google.com/learn/?utm_source=unittests',\n        'http://web.dev/?utm_source=unittests',\n        'http://www.google.com/?utm_source=unittests',\n        'https://developer.chrome.com/docs/devtools/?utm_source=unittests',\n        'https://developers.google.com/community/?utm_source=unittests',\n        'https://www.google.com/?utm_source=unittests',\n        'https://web.dev/baseline/?utm_source=unittests',\n      ];\n      for (const url of URLs) {\n        const stub = sinon.stub(InspectorFrontendHostInstance, 'openInNewTab');\n\n        openInNewTab(url);\n\n        sinon.assert.calledOnceWithExactly(stub, urlString`${url}`);\n        stub.restore();\n      }\n    });\n\n    it('adds `utm_source` search parameter to Google documentation set links', () => {\n      const URLs = [\n        'http://developer.chrome.com/docs/devtools/workspaces/',\n        'http://developers.google.com/learn/',\n        'http://web.dev/',\n        'https://developer.chrome.com/docs/devtools/',\n        'https://developers.google.com/community/',\n        'https://web.dev/baseline/',\n      ];\n      for (const url of URLs) {\n        const stub = sinon.stub(InspectorFrontendHostInstance, 'openInNewTab');\n\n        openInNewTab(url);\n\n        sinon.assert.calledOnce(stub);\n        assert.strictEqual(new URL(stub.args[0][0]).searchParams.get('utm_source'), 'devtools');\n        stub.restore();\n      }\n    });\n\n    it('adds `utm_campaign` search parameter to Google documentation set links', () => {\n      const CHANNELS: Array<typeof Root.Runtime.hostConfig.channel> = [\n        'stable',\n        'beta',\n        'dev',\n        'canary',\n      ];\n      const URLs = [\n        'http://developer.chrome.com/docs/devtools/workspaces/',\n        'http://developers.google.com/learn/',\n        'http://web.dev/',\n        'https://developer.chrome.com/docs/devtools/',\n        'https://developers.google.com/community/',\n        'https://web.dev/baseline/',\n      ];\n      for (const channel of CHANNELS) {\n        updateHostConfig({channel});\n\n        for (const url of URLs) {\n          const stub = sinon.stub(InspectorFrontendHostInstance, 'openInNewTab');\n\n          openInNewTab(url);\n\n          sinon.assert.calledOnce(stub);\n          assert.strictEqual(new URL(stub.args[0][0]).searchParams.get('utm_campaign'), channel);\n          stub.restore();\n        }\n      }\n    });\n\n    it('correctly preserves anchors', () => {\n      updateHostConfig({channel: 'stable'});\n      const stub = sinon.stub(InspectorFrontendHostInstance, 'openInNewTab');\n\n      openInNewTab('https://developer.chrome.com/docs/devtools/settings/ignore-list/#skip-third-party');\n\n      sinon.assert.calledOnce(stub);\n      const url = new URL(stub.args[0][0]);\n      assert.strictEqual(url.hash, '#skip-third-party');\n      assert.strictEqual(url.searchParams.get('utm_campaign'), 'stable');\n      assert.strictEqual(url.searchParams.get('utm_source'), 'devtools');\n    });\n\n    it('correctly preserves other search params', () => {\n      updateHostConfig({channel: 'stable'});\n      const stub = sinon.stub(InspectorFrontendHostInstance, 'openInNewTab');\n\n      openInNewTab('http://web.dev/route?foo=bar&baz=devtools');\n\n      sinon.assert.calledOnce(stub);\n      const url = new URL(stub.args[0][0]);\n      assert.strictEqual(url.searchParams.get('baz'), 'devtools');\n      assert.strictEqual(url.searchParams.get('foo'), 'bar');\n      assert.strictEqual(url.searchParams.get('utm_campaign'), 'stable');\n      assert.strictEqual(url.searchParams.get('utm_source'), 'devtools');\n    });\n  });\n\n  describe('LongClickController', () => {\n    it('does not invoke callback when disposed', () => {\n      const el = document.createElement('div');\n      const callback = sinon.spy();\n      const controller = new UI.UIUtils.LongClickController(el, callback);\n      // @ts-expect-error\n      const setTimeout = sinon.stub(window, 'setTimeout').callsFake(cb => cb());\n\n      el.dispatchEvent(new PointerEvent('pointerdown'));\n      sinon.assert.calledOnce(callback);\n\n      controller.dispose();\n\n      el.dispatchEvent(new PointerEvent('pointerdown'));\n      sinon.assert.calledOnce(callback);\n\n      setTimeout.restore();\n    });\n  });\n\n  describe('measuredScrollbarWidth', () => {\n    let style: HTMLStyleElement;\n    before(() => {\n      UI.UIUtils.resetMeasuredScrollbarWidthForTest();\n    });\n    after(() => {\n      style.remove();\n    });\n\n    it('provides a default value', () => {\n      const expectedDefaultWidth = 16;\n      assert.strictEqual(UI.UIUtils.measuredScrollbarWidth(), expectedDefaultWidth);\n    });\n\n    it('calculates specific widths correctly', () => {\n      const width = 20;\n\n      // Enforce custom width on scrollbars to test.\n      style = document.createElement('style');\n      style.textContent = `::-webkit-scrollbar {\n        appearance: none;\n        width: ${width}px;\n      }`;\n      document.head.appendChild(style);\n      assert.strictEqual(UI.UIUtils.measuredScrollbarWidth(document), width);\n\n      // Remove the styles and try again to detect that cached values are used.\n      style.remove();\n      assert.strictEqual(UI.UIUtils.measuredScrollbarWidth(document), width);\n    });\n  });\n\n  describe('createFileSelectorElement', () => {\n    it('by default it accepts any file types', async () => {\n      const callback = () => {};\n      const inputElement = UI.UIUtils.createFileSelectorElement(callback);\n      assert.isNull(inputElement.getAttribute('accept'));\n    });\n\n    it('can set the accept attribute on the input', async () => {\n      const callback = () => {};\n      const inputElement = UI.UIUtils.createFileSelectorElement(callback, '.json');\n      assert.strictEqual(inputElement.getAttribute('accept'), '.json');\n    });\n  });\n\n  describe('bindToAction', () => {\n    const actionId = 'mock.action.bind.to.action';\n\n    before(() => {\n      const mockHandleAction = sinon.stub();\n      UI.ActionRegistration.registerActionExtension({\n        actionId,\n        category: UI.ActionRegistration.ActionCategory.GLOBAL,\n        title: i18n.i18n.lockedLazyString('Mock action for bindToAction'),\n        loadActionDelegate: async () => ({handleAction: mockHandleAction}),\n      });\n    });\n\n    function setup() {\n      const {bindToAction} = UI.UIUtils;\n      const container = document.createElement('div');\n      renderElementIntoDOM(container);\n      const buttonRef = Directives.createRef<Buttons.Button.Button>();\n      render(\n          html`<devtools-button ${Directives.ref(buttonRef)} ${bindToAction(actionId)}></devtools-button>`, container);\n\n      const button = buttonRef.value;\n      assert.exists(button);\n      const action = UI.ActionRegistry.ActionRegistry.instance().getAction(actionId);\n      return {button, container, action};\n    }\n\n    it('sets button properties from the action', () => {\n      const {button, action} = setup();\n      const innerButton = button.shadowRoot?.querySelector('button') as HTMLButtonElement;\n      assert.strictEqual(innerButton.title, action.title());\n      assert.strictEqual(button.disabled, !action.enabled());\n    });\n\n    it('updates the button when the action\\'s enabled state changes', () => {\n      const {button, action} = setup();\n\n      action.setEnabled(false);\n      assert.isTrue(button.disabled);\n\n      action.setEnabled(true);\n      assert.isFalse(button.disabled);\n    });\n\n    it('removes the change listener when the button is removed from the DOM', () => {\n      const {button, container, action} = setup();\n      const spy = sinon.spy(action, 'removeEventListener');\n\n      render(html``, container);\n\n      assert.isFalse(button.isConnected);\n      sinon.assert.calledWith(spy, UI.ActionRegistration.Events.ENABLED);\n    });\n  });\n});\n"]}