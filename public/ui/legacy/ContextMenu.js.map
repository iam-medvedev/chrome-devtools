{"version":3,"file":"ContextMenu.js","sourceRoot":"","sources":["../../../../../../front_end/ui/legacy/ContextMenu.ts"],"names":[],"mappings":"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","sourcesContent":["/*\n * Copyright (C) 2009 Google Inc. All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are\n * met:\n *\n *     * Redistributions of source code must retain the above copyright\n * notice, this list of conditions and the following disclaimer.\n *     * Redistributions in binary form must reproduce the above\n * copyright notice, this list of conditions and the following disclaimer\n * in the documentation and/or other materials provided with the\n * distribution.\n *     * Neither the name of Google Inc. nor the names of its\n * contributors may be used to endorse or promote products derived from\n * this software without specific prior written permission.\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS\n * \"AS IS\" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT\n * LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR\n * A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT\n * OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,\n * SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT\n * LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,\n * DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY\n * THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE\n * OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */\n\nimport type * as Common from '../../core/common/common.js';\nimport * as Host from '../../core/host/host.js';\nimport type * as Platform from '../../core/platform/platform.js';\nimport * as Root from '../../core/root/root.js';\nimport * as VisualLogging from '../visual_logging/visual_logging.js';\n\nimport {ActionRegistry} from './ActionRegistry.js';\nimport {ShortcutRegistry} from './ShortcutRegistry.js';\nimport {SoftContextMenu, type SoftContextMenuDescriptor} from './SoftContextMenu.js';\nimport {deepElementFromEvent} from './UIUtils.js';\n\nexport class Item {\n  private readonly typeInternal: string;\n  protected readonly label: string|undefined;\n  protected disabled: boolean|undefined;\n  private readonly checked: boolean|undefined;\n  protected contextMenu: ContextMenu|null;\n  protected idInternal: number|undefined;\n  customElement?: Element;\n  private shortcut?: string;\n  #tooltip: Common.UIString.LocalizedString|undefined;\n  #jslogContext: string|undefined;\n\n  constructor(\n      contextMenu: ContextMenu|null, type: 'checkbox'|'item'|'separator'|'subMenu', label?: string, disabled?: boolean,\n      checked?: boolean, tooltip?: Platform.UIString.LocalizedString, jslogContext?: string) {\n    this.typeInternal = type;\n    this.label = label;\n    this.disabled = disabled;\n    this.checked = checked;\n    this.contextMenu = contextMenu;\n    this.idInternal = undefined;\n    this.#tooltip = tooltip;\n    if (type === 'item' || type === 'checkbox') {\n      this.idInternal = contextMenu ? contextMenu.nextId() : 0;\n    }\n    this.#jslogContext = jslogContext;\n  }\n\n  id(): number {\n    if (this.idInternal === undefined) {\n      throw new Error('Tried to access a ContextMenu Item ID but none was set.');\n    }\n    return this.idInternal;\n  }\n\n  type(): string {\n    return this.typeInternal;\n  }\n\n  isEnabled(): boolean {\n    return !this.disabled;\n  }\n\n  setEnabled(enabled: boolean): void {\n    this.disabled = !enabled;\n  }\n\n  buildDescriptor(): SoftContextMenuDescriptor|Host.InspectorFrontendHostAPI.ContextMenuDescriptor {\n    switch (this.typeInternal) {\n      case 'item': {\n        const result: SoftContextMenuDescriptor = {\n          type: 'item',\n          id: this.idInternal,\n          label: this.label,\n          enabled: !this.disabled,\n          checked: undefined,\n          subItems: undefined,\n          tooltip: this.#tooltip,\n          jslogContext: this.#jslogContext,\n        };\n        if (this.customElement) {\n          result.element = this.customElement;\n        }\n        if (this.shortcut) {\n          result.shortcut = this.shortcut;\n        }\n        return result;\n      }\n      case 'separator': {\n        return {\n          type: 'separator',\n          id: undefined,\n          label: undefined,\n          enabled: undefined,\n          checked: undefined,\n          subItems: undefined,\n        };\n      }\n      case 'checkbox': {\n        const result: SoftContextMenuDescriptor = {\n          type: 'checkbox',\n          id: this.idInternal,\n          label: this.label,\n          checked: Boolean(this.checked),\n          enabled: !this.disabled,\n          subItems: undefined,\n          tooltip: this.#tooltip,\n          jslogContext: this.#jslogContext,\n        };\n        if (this.customElement) {\n          result.element = this.customElement;\n        }\n        return result;\n      }\n    }\n    throw new Error('Invalid item type:' + this.typeInternal);\n  }\n\n  setShortcut(shortcut: string): void {\n    this.shortcut = shortcut;\n  }\n}\n\nexport class Section {\n  private readonly contextMenu: ContextMenu|null;\n  readonly items: Item[];\n  constructor(contextMenu: ContextMenu|null) {\n    this.contextMenu = contextMenu;\n    this.items = [];\n  }\n\n  appendItem(label: string, handler: () => void, options?: {\n    disabled?: boolean,\n    additionalElement?: Element,\n    tooltip?: Platform.UIString.LocalizedString,\n    jslogContext?: string,\n  }): Item {\n    const item = new Item(\n        this.contextMenu, 'item', label, options?.disabled, undefined, options?.tooltip, options?.jslogContext);\n    if (options?.additionalElement) {\n      item.customElement = options?.additionalElement;\n    }\n    this.items.push(item);\n    if (this.contextMenu) {\n      this.contextMenu.setHandler(item.id(), handler);\n    }\n    return item;\n  }\n\n  appendCustomItem(element: Element, jslogContext?: string): Item {\n    const item = new Item(this.contextMenu, 'item', undefined, undefined, undefined, undefined, jslogContext);\n    item.customElement = element;\n    this.items.push(item);\n    return item;\n  }\n\n  appendSeparator(): Item {\n    const item = new Item(this.contextMenu, 'separator');\n    this.items.push(item);\n    return item;\n  }\n\n  appendAction(actionId: string, label?: string, optional?: boolean): void {\n    if (optional && !ActionRegistry.instance().hasAction(actionId)) {\n      return;\n    }\n    const action = ActionRegistry.instance().getAction(actionId);\n    if (!label) {\n      label = action.title();\n    }\n    const result = this.appendItem(label, action.execute.bind(action), {jslogContext: actionId});\n    const shortcut = ShortcutRegistry.instance().shortcutTitleForAction(actionId);\n    if (shortcut) {\n      result.setShortcut(shortcut);\n    }\n  }\n\n  appendSubMenuItem(label: string, disabled?: boolean, jslogContext?: string): SubMenu {\n    const item = new SubMenu(this.contextMenu, label, disabled, jslogContext);\n    item.init();\n    this.items.push(item);\n    return item;\n  }\n\n  appendCheckboxItem(\n      label: string, handler: () => void, checked?: boolean, disabled?: boolean, additionalElement?: Element,\n      tooltip?: Platform.UIString.LocalizedString, jslogContext?: string): Item {\n    const item = new Item(this.contextMenu, 'checkbox', label, disabled, checked, tooltip, jslogContext);\n    this.items.push(item);\n    if (this.contextMenu) {\n      this.contextMenu.setHandler(item.id(), handler);\n    }\n    if (additionalElement) {\n      item.customElement = additionalElement;\n    }\n    return item;\n  }\n}\n\nexport class SubMenu extends Item {\n  private readonly sections: Map<string, Section>;\n  private readonly sectionList: Section[];\n\n  constructor(contextMenu: ContextMenu|null, label?: string, disabled?: boolean, jslogContext?: string) {\n    super(contextMenu, 'subMenu', label, disabled, undefined, undefined, jslogContext);\n    this.sections = new Map();\n    this.sectionList = [];\n  }\n\n  init(): void {\n    ContextMenu.groupWeights.forEach(name => this.section(name));\n  }\n\n  section(name?: string): Section {\n    let section: Section|(Section | null | undefined) = name ? this.sections.get(name) : null;\n    if (!section) {\n      section = new Section(this.contextMenu);\n      if (name) {\n        this.sections.set(name, section);\n        this.sectionList.push(section);\n      } else {\n        this.sectionList.splice(ContextMenu.groupWeights.indexOf('default'), 0, section);\n      }\n    }\n    return section;\n  }\n\n  headerSection(): Section {\n    return this.section('header');\n  }\n\n  newSection(): Section {\n    return this.section('new');\n  }\n\n  revealSection(): Section {\n    return this.section('reveal');\n  }\n\n  clipboardSection(): Section {\n    return this.section('clipboard');\n  }\n\n  editSection(): Section {\n    return this.section('edit');\n  }\n\n  debugSection(): Section {\n    return this.section('debug');\n  }\n\n  viewSection(): Section {\n    return this.section('view');\n  }\n\n  defaultSection(): Section {\n    return this.section('default');\n  }\n\n  overrideSection(): Section {\n    return this.section('override');\n  }\n\n  saveSection(): Section {\n    return this.section('save');\n  }\n\n  footerSection(): Section {\n    return this.section('footer');\n  }\n\n  override buildDescriptor(): SoftContextMenuDescriptor|Host.InspectorFrontendHostAPI.ContextMenuDescriptor {\n    const result: Host.InspectorFrontendHostAPI.ContextMenuDescriptor|SoftContextMenuDescriptor = {\n      type: 'subMenu',\n      label: this.label,\n      enabled: !this.disabled,\n      subItems: [],\n      id: undefined,\n      checked: undefined,\n    };\n\n    const nonEmptySections = this.sectionList.filter(section => Boolean(section.items.length));\n    for (const section of nonEmptySections) {\n      for (const item of section.items) {\n        if (!result.subItems) {\n          result.subItems = [];\n        }\n        result.subItems.push(item.buildDescriptor());\n      }\n      if (section !== nonEmptySections[nonEmptySections.length - 1]) {\n        if (!result.subItems) {\n          result.subItems = [];\n        }\n        result.subItems.push({\n          type: 'separator',\n          id: undefined,\n          subItems: undefined,\n          checked: undefined,\n          enabled: undefined,\n          label: undefined,\n        });\n      }\n    }\n    return result;\n  }\n\n  appendItemsAtLocation(location: string): void {\n    const items: ContextMenuItemRegistration[] = getRegisteredItems();\n    items.sort((firstItem, secondItem) => {\n      const order1 = firstItem.order || 0;\n      const order2 = secondItem.order || 0;\n      return order1 - order2;\n    });\n    for (const item of items) {\n      if (item.experiment && !Root.Runtime.experiments.isEnabled(item.experiment)) {\n        continue;\n      }\n\n      const itemLocation = item.location;\n      const actionId = item.actionId;\n      if (!itemLocation || !itemLocation.startsWith(location + '/')) {\n        continue;\n      }\n\n      const section = itemLocation.substr(location.length + 1);\n      if (!section || section.includes('/')) {\n        continue;\n      }\n\n      if (actionId) {\n        this.section(section).appendAction(actionId);\n      }\n    }\n  }\n\n  private static uniqueSectionName: number = 0;\n}\n\nexport interface ContextMenuOptions {\n  useSoftMenu?: boolean;\n  keepOpen?: boolean;\n  onSoftMenuClosed?: () => void;\n  x?: number;\n  y?: number;\n}\n\nexport class ContextMenu extends SubMenu {\n  protected override contextMenu: this;\n  private readonly defaultSectionInternal: Section;\n  private pendingPromises: Promise<Provider[]>[];\n  private pendingTargets: Object[];\n  private readonly event: MouseEvent;\n  private readonly useSoftMenu: boolean;\n  private readonly keepOpen: boolean;\n  private x: number;\n  private y: number;\n  private onSoftMenuClosed?: () => void;\n  private readonly handlers: Map<number, () => void>;\n  override idInternal: number;\n  private softMenu?: SoftContextMenu;\n  private contextMenuLabel?: string;\n  private openHostedMenu: Host.InspectorFrontendHostAPI.ContextMenuDescriptor[]|null;\n  private eventTarget: EventTarget|null;\n\n  constructor(event: Event, options: ContextMenuOptions = {}) {\n    super(null);\n    const mouseEvent = (event as MouseEvent);\n    this.contextMenu = this;\n    super.init();\n    this.defaultSectionInternal = this.defaultSection();\n    this.pendingPromises = [];\n    this.pendingTargets = [];\n    this.event = mouseEvent;\n    this.eventTarget = this.event.target;\n    this.useSoftMenu = Boolean(options.useSoftMenu);\n    this.keepOpen = Boolean(options.keepOpen);\n    this.x = options.x === undefined ? mouseEvent.x : options.x;\n    this.y = options.y === undefined ? mouseEvent.y : options.y;\n    this.onSoftMenuClosed = options.onSoftMenuClosed;\n    this.handlers = new Map();\n    this.idInternal = 0;\n    this.openHostedMenu = null;\n\n    const target = deepElementFromEvent(event);\n    if (target) {\n      this.appendApplicableItems((target as Object));\n    }\n  }\n\n  static initialize(): void {\n    Host.InspectorFrontendHost.InspectorFrontendHostInstance.events.addEventListener(\n        Host.InspectorFrontendHostAPI.Events.SetUseSoftMenu, setUseSoftMenu);\n    function setUseSoftMenu(event: Common.EventTarget.EventTargetEvent<boolean>): void {\n      ContextMenu.useSoftMenu = event.data;\n    }\n  }\n\n  static installHandler(doc: Document): void {\n    doc.body.addEventListener('contextmenu', handler, false);\n\n    function handler(event: Event): void {\n      const contextMenu = new ContextMenu(event);\n      void contextMenu.show();\n    }\n  }\n\n  nextId(): number {\n    return this.idInternal++;\n  }\n\n  isHostedMenuOpen(): boolean {\n    return Boolean(this.openHostedMenu);\n  }\n\n  getItems(): SoftContextMenuDescriptor[] {\n    return this.softMenu?.getItems() || [];\n  }\n\n  setChecked(item: SoftContextMenuDescriptor, checked: boolean): void {\n    this.softMenu?.setChecked(item, checked);\n  }\n\n  async show(): Promise<void> {\n    ContextMenu.pendingMenu = this;\n    this.event.consume(true);\n    const loadedProviders: Provider[][] = await Promise.all(this.pendingPromises);\n\n    // After loading all providers, the contextmenu might be hidden again, so bail out.\n    if (ContextMenu.pendingMenu !== this) {\n      return;\n    }\n    ContextMenu.pendingMenu = null;\n\n    for (let i = 0; i < loadedProviders.length; ++i) {\n      const providers = loadedProviders[i];\n      const target = this.pendingTargets[i];\n\n      for (const provider of providers) {\n        provider.appendApplicableItems(this.event, this, target);\n      }\n    }\n\n    this.pendingPromises = [];\n    this.pendingTargets = [];\n\n    this.innerShow();\n  }\n\n  discard(): void {\n    if (this.softMenu) {\n      this.softMenu.discard();\n    }\n  }\n\n  private registerLoggablesWithin(\n      descriptors: Host.InspectorFrontendHostAPI.ContextMenuDescriptor[],\n      parent?: Host.InspectorFrontendHostAPI.ContextMenuDescriptor):\n      Host.InspectorFrontendHostAPI.ContextMenuDescriptor[] {\n    const loggables = [];\n    for (const descriptor of descriptors) {\n      if (descriptor.jslogContext) {\n        if (descriptor.type === 'checkbox') {\n          VisualLogging.registerLoggable(\n              descriptor, `${VisualLogging.toggle().track({click: true}).context(descriptor.jslogContext)}`,\n              parent || descriptors);\n        } else if (descriptor.type === 'item') {\n          VisualLogging.registerLoggable(\n              descriptor, `${VisualLogging.action().track({click: true}).context(descriptor.jslogContext)}`,\n              parent || descriptors);\n        } else if (descriptor.type !== 'subMenu') {\n          VisualLogging.registerLoggable(\n              descriptor, `${VisualLogging.item().context(descriptor.jslogContext)}`, parent || descriptors);\n        }\n        loggables.push(descriptor);\n        if (descriptor.subItems) {\n          loggables.push(...this.registerLoggablesWithin(descriptor.subItems, descriptor));\n        }\n      }\n    }\n    return loggables;\n  }\n\n  private innerShow(): void {\n    const menuObject = this.buildMenuDescriptors();\n\n    if (!this.eventTarget) {\n      return;\n    }\n    const ownerDocument = (this.eventTarget as HTMLElement).ownerDocument;\n    if (this.useSoftMenu || ContextMenu.useSoftMenu ||\n        Host.InspectorFrontendHost.InspectorFrontendHostInstance.isHostedMode()) {\n      this.softMenu = new SoftContextMenu(\n          (menuObject as SoftContextMenuDescriptor[]), this.itemSelected.bind(this), this.keepOpen, undefined,\n          this.onSoftMenuClosed);\n      // let soft context menu focus on the first item when the event is triggered by a non-mouse event\n      // add another check of button value to differentiate mouse event with 'shift + f10' keyboard event\n      const isMouseEvent =\n          (this.event as PointerEvent).pointerType === 'mouse' && (this.event as PointerEvent).button >= 0;\n      this.softMenu.setFocusOnTheFirstItem(!isMouseEvent);\n      this.softMenu.show((ownerDocument as Document), new AnchorBox(this.x, this.y, 0, 0));\n      if (this.contextMenuLabel) {\n        this.softMenu.setContextMenuElementLabel(this.contextMenuLabel);\n      }\n    } else {\n      Host.InspectorFrontendHost.InspectorFrontendHostInstance.showContextMenuAtPoint(\n          this.x, this.y, menuObject, (ownerDocument as Document));\n\n      function listenToEvents(this: ContextMenu): void {\n        Host.InspectorFrontendHost.InspectorFrontendHostInstance.events.addEventListener(\n            Host.InspectorFrontendHostAPI.Events.ContextMenuCleared, this.menuCleared, this);\n        Host.InspectorFrontendHost.InspectorFrontendHostInstance.events.addEventListener(\n            Host.InspectorFrontendHostAPI.Events.ContextMenuItemSelected, this.onItemSelected, this);\n      }\n      VisualLogging.registerLoggable(menuObject, `${VisualLogging.menu()}`, null);\n      const loggables = this.registerLoggablesWithin(menuObject);\n      if (loggables.length) {\n        void VisualLogging.logImpressions(loggables);\n      }\n      this.openHostedMenu = menuObject;\n      // showContextMenuAtPoint call above synchronously issues a clear event for previous context menu (if any),\n      // so we skip it before subscribing to the clear event.\n      queueMicrotask(listenToEvents.bind(this));\n    }\n  }\n\n  setContextMenuLabel(label: string): void {\n    this.contextMenuLabel = label;\n  }\n\n  setX(x: number): void {\n    this.x = x;\n  }\n\n  setY(y: number): void {\n    this.y = y;\n  }\n\n  setHandler(id: number, handler: () => void): void {\n    if (handler) {\n      this.handlers.set(id, handler);\n    }\n  }\n\n  private buildMenuDescriptors(): (SoftContextMenuDescriptor|Host.InspectorFrontendHostAPI.ContextMenuDescriptor)[] {\n    return super.buildDescriptor().subItems as (\n               SoftContextMenuDescriptor | Host.InspectorFrontendHostAPI.ContextMenuDescriptor)[];\n  }\n\n  private onItemSelected(event: Common.EventTarget.EventTargetEvent<number>): void {\n    this.itemSelected(event.data);\n  }\n\n  private itemSelected(id: number): void {\n    const handler = this.handlers.get(id);\n    if (handler) {\n      handler.call(this);\n    }\n    if (this.openHostedMenu) {\n      const itemWithId = (items: Host.InspectorFrontendHostAPI.ContextMenuDescriptor[],\n                          id: number): Host.InspectorFrontendHostAPI.ContextMenuDescriptor|null => {\n        for (const item of items) {\n          if (item.id === id) {\n            return item;\n          }\n          const subitem = item.subItems && itemWithId(item.subItems, id);\n          if (subitem) {\n            return subitem;\n          }\n        }\n        return null;\n      };\n      const item = itemWithId(this.openHostedMenu, id);\n      if (item && item.jslogContext) {\n        void VisualLogging.logClick(item, new MouseEvent('click'));\n      }\n    }\n\n    this.menuCleared();\n  }\n\n  private menuCleared(): void {\n    Host.InspectorFrontendHost.InspectorFrontendHostInstance.events.removeEventListener(\n        Host.InspectorFrontendHostAPI.Events.ContextMenuCleared, this.menuCleared, this);\n    Host.InspectorFrontendHost.InspectorFrontendHostInstance.events.removeEventListener(\n        Host.InspectorFrontendHostAPI.Events.ContextMenuItemSelected, this.onItemSelected, this);\n    this.openHostedMenu = null;\n    if (!this.keepOpen) {\n      this.onSoftMenuClosed?.();\n    }\n  }\n\n  containsTarget(target: Object): boolean {\n    return this.pendingTargets.indexOf(target) >= 0;\n  }\n\n  appendApplicableItems(target: Object): void {\n    this.pendingPromises.push(loadApplicableRegisteredProviders(target));\n    this.pendingTargets.push(target);\n  }\n\n  markAsMenuItemCheckBox(): void {\n    if (this.softMenu) {\n      this.softMenu.markAsMenuItemCheckBox();\n    }\n  }\n\n  private static pendingMenu: ContextMenu|null = null;\n  private static useSoftMenu = false;\n  // TODO(crbug.com/1172300) Ignored during the jsdoc to ts migration\n  // eslint-disable-next-line @typescript-eslint/naming-convention\n  static readonly groupWeights =\n      ['header', 'new', 'reveal', 'edit', 'clipboard', 'debug', 'view', 'default', 'override', 'save', 'footer'];\n}\n\nexport interface Provider {\n  appendApplicableItems(event: Event, contextMenu: ContextMenu, target: Object): void;\n}\n\nconst registeredProviders: ProviderRegistration[] = [];\n\nexport function registerProvider(registration: ProviderRegistration): void {\n  registeredProviders.push(registration);\n}\n\nasync function loadApplicableRegisteredProviders(target: Object): Promise<Provider[]> {\n  return Promise.all(\n      registeredProviders.filter(isProviderApplicableToContextTypes).map(registration => registration.loadProvider()));\n\n  function isProviderApplicableToContextTypes(providerRegistration: ProviderRegistration): boolean {\n    if (!Root.Runtime.Runtime.isDescriptorEnabled(\n            {experiment: providerRegistration.experiment, condition: undefined})) {\n      return false;\n    }\n    if (!providerRegistration.contextTypes) {\n      return true;\n    }\n    for (const contextType of providerRegistration.contextTypes()) {\n      // TODO(crbug.com/1172300) Ignored during the jsdoc to ts migration\n      // @ts-expect-error\n      if (target instanceof contextType) {\n        return true;\n      }\n    }\n    return false;\n  }\n}\n\nconst registeredItemsProviders: ContextMenuItemRegistration[] = [];\n\nexport function registerItem(registration: ContextMenuItemRegistration): void {\n  registeredItemsProviders.push(registration);\n}\n\nexport function maybeRemoveItem(registration: ContextMenuItemRegistration): boolean {\n  const itemIndex = registeredItemsProviders.findIndex(\n      item => item.actionId === registration.actionId && item.location === registration.location);\n  if (itemIndex < 0) {\n    return false;\n  }\n  registeredItemsProviders.splice(itemIndex, 1);\n  return true;\n}\n\nfunction getRegisteredItems(): ContextMenuItemRegistration[] {\n  return registeredItemsProviders;\n}\n\n// TODO(crbug.com/1167717): Make this a const enum again\n// eslint-disable-next-line rulesdir/const_enum\nexport enum ItemLocation {\n  DEVICE_MODE_MENU_SAVE = 'deviceModeMenu/save',\n  MAIN_MENU = 'mainMenu',\n  MAIN_MENU_DEFAULT = 'mainMenu/default',\n  MAIN_MENU_FOOTER = 'mainMenu/footer',\n  MAIN_MENU_HELP_DEFAULT = 'mainMenuHelp/default',\n  NAVIGATOR_MENU_DEFAULT = 'navigatorMenu/default',\n  TIMELINE_MENU_OPEN = 'timelineMenu/open',\n}\n\nexport interface ProviderRegistration {\n  contextTypes: () => unknown[];\n  loadProvider: () => Promise<Provider>;\n  experiment?: Root.Runtime.ExperimentName;\n}\n\nexport interface ContextMenuItemRegistration {\n  location: ItemLocation;\n  actionId: string;\n  order?: number;\n  experiment?: Root.Runtime.ExperimentName;\n}\n"]}