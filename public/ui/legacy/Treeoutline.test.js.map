{"version":3,"file":"Treeoutline.test.js","sourceRoot":"","sources":["../../../../../../front_end/ui/legacy/Treeoutline.test.ts"],"names":[],"mappings":"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","sourcesContent":["// Copyright 2020 The Chromium Authors. All rights reserved.\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\n\nimport * as Platform from '../../core/platform/platform.js';\nimport {dispatchKeyDownEvent, renderElementIntoDOM} from '../../testing/DOMHelpers.js';\nimport * as Lit from '../../ui/lit/lit.js';\n\nimport * as UI from './legacy.js';\n\ndescribe('TreeOutline', () => {\n  describe('correctly reacts to Enter key', () => {\n    it('by expanding collapsed parent nodes', () => {\n      const tree = new UI.TreeOutline.TreeOutlineInShadow();\n      renderElementIntoDOM(tree.element);\n\n      const parent = new UI.TreeOutline.TreeElement('parent', true);\n      parent.appendChild(new UI.TreeOutline.TreeElement('child', false));\n      tree.appendChild(parent);\n      parent.select();\n\n      dispatchKeyDownEvent(tree.contentElement, {bubbles: true, key: 'Enter'});\n      assert.isTrue(parent.expanded, 'Enter key was supposed to expand the parent node');\n    });\n\n    it('by collapsing expanded parent nodes', () => {\n      const tree = new UI.TreeOutline.TreeOutlineInShadow();\n      renderElementIntoDOM(tree.element);\n\n      const parent = new UI.TreeOutline.TreeElement('parent', true);\n      parent.appendChild(new UI.TreeOutline.TreeElement('child', false));\n      tree.appendChild(parent);\n      parent.select();\n      parent.expand();\n\n      dispatchKeyDownEvent(tree.contentElement, {bubbles: true, key: 'Enter'});\n      assert.isFalse(parent.expanded, 'Enter key was supposed to collapse the parent node');\n    });\n  });\n\n  it('responds correctly to navigation keys', () => {\n    const treeOutline = new UI.TreeOutline.TreeOutlineInShadow();\n    renderElementIntoDOM(treeOutline.element);\n\n    for (let i = 0; i < 10; i++) {\n      const treeElement = new UI.TreeOutline.TreeElement(String(i), true);\n      treeElement.appendChild(new UI.TreeOutline.TreeElement(String(i) + ' child'));\n      treeOutline.appendChild(treeElement);\n    }\n\n    let selectedTitles: string[] = [];\n    treeOutline.addEventListener(UI.TreeOutline.Events.ElementSelected, event => {\n      selectedTitles.push(String(event.data.title));\n    });\n\n    treeOutline.firstChild()!.select(false, true);\n\n    const distance = 25;\n\n    assert.deepEqual(selectedTitles, ['0']);\n    selectedTitles = [];\n\n    function sendKeyMultipleTimes(key: string, n: number) {\n      for (let i = 0; i < n; i++) {\n        sendKey(key);\n      }\n    }\n\n    sendKeyMultipleTimes('ArrowDown', distance);\n    assert.deepEqual(selectedTitles, ['1', '2', '3', '4', '5', '6', '7', '8', '9']);\n    selectedTitles = [];\n\n    sendKeyMultipleTimes('ArrowUp', distance);\n    assert.deepEqual(selectedTitles, ['8', '7', '6', '5', '4', '3', '2', '1', '0']);\n    selectedTitles = [];\n\n    sendKey('End');\n    assert.deepEqual(selectedTitles, ['9']);\n    selectedTitles = [];\n\n    sendKey('Home');\n    assert.deepEqual(selectedTitles, ['0']);\n    selectedTitles = [];\n\n    sendKeyMultipleTimes('ArrowRight', distance);\n    assert.deepEqual(selectedTitles, ['0 child']);\n    selectedTitles = [];\n\n    sendKeyMultipleTimes('ArrowLeft', distance);\n    assert.deepEqual(selectedTitles, ['0']);\n    selectedTitles = [];\n\n    const innerTreeOutline = new UI.TreeOutline.TreeOutlineInShadow();\n    const firstInnerChild = new UI.TreeOutline.TreeElement('First inner child');\n    const firstInnerGrandChild = new UI.TreeOutline.TreeElement('First inner grandchild');\n    innerTreeOutline.appendChild(firstInnerChild);\n    firstInnerChild.appendChild(firstInnerGrandChild);\n\n    const treeElementForNestedTree = new UI.TreeOutline.TreeElement(innerTreeOutline.element);\n    treeOutline.appendChild(treeElementForNestedTree);\n\n    innerTreeOutline.firstChild()!.select(false, true);\n\n    sendKey('ArrowRight');\n\n    assert.isTrue(innerTreeOutline.firstChild()!.expanded, 'child is not expanded');\n\n    function sendKey(key: string) {\n      const deepActiveElement = Platform.DOMUtilities.deepActiveElement(document);\n      deepActiveElement!.dispatchEvent(new KeyboardEvent('keydown', {bubbles: true, cancelable: true, key}));\n    }\n  });\n});\n\ndescribe('TreeViewElement', () => {\n  const {html, render} = Lit;\n  async function makeTree(template: Lit.LitTemplate) {\n    const container = document.createElement('div');\n    renderElementIntoDOM(container);\n\n    render(template, container);\n    const component = container.querySelector('devtools-tree');\n    assert.isNotNull(component);\n\n    // Tick to let mutation observers fire\n    await new Promise(resolve => setTimeout(resolve, 0));\n    return component;\n  }\n\n  it('renders the tree structure based on the template', async () => {\n    const component = await makeTree(html`<devtools-tree .template=${html`\n      <ul role=\"tree\">\n         <li role=\"treeitem\">\n           Tree Node Text\n           <ul role=\"group\">\n             <li role=\"treeitem\">\n               Node with subtree\n               <ul role=\"group\">\n                 <li role=\"treeitem\">Tree Node Text in collapsed subtree 1</li>\n                 <li role=\"treeitem\">Tree Node Text in collapsed subtree 2</li>\n               </ul>\n            </li>\n            <li role=\"treeitem\">Tree Node Text in a selected-by-default node</li>\n          </ul>\n        </li>\n      </ul>\n    `}></devtools-tree>`);\n    const treeOutline = component.getInternalTreeOutlineForTest();\n    const rootChildren = treeOutline.rootElement().children();\n    assert.lengthOf(rootChildren, 1);\n    assert.strictEqual(rootChildren[0].titleElement.textContent?.trim(), 'Tree Node Text');\n\n    const firstLevel = rootChildren[0].children();\n    assert.lengthOf(firstLevel, 2);\n    assert.strictEqual(firstLevel[0].titleElement.textContent?.trim(), 'Node with subtree');\n    assert.strictEqual(firstLevel[1].titleElement.textContent?.trim(), 'Tree Node Text in a selected-by-default node');\n\n    const secondLevel = firstLevel[0].children();\n    assert.lengthOf(secondLevel, 2);\n    assert.strictEqual(secondLevel[0].titleElement.textContent?.trim(), 'Tree Node Text in collapsed subtree 1');\n    assert.strictEqual(secondLevel[1].titleElement.textContent?.trim(), 'Tree Node Text in collapsed subtree 2');\n  });\n\n  it('selects `selected` config elements', async () => {\n    const component = await makeTree(html`<devtools-tree .template=${html`\n      <ul role=\"tree\">\n        <li role=\"treeitem\">first node</li>\n        <li role=\"treeitem\" selected>second node</li>\n      </ul>`}></devtools-tree>`);\n\n    const nodes = component.getInternalTreeOutlineForTest().rootElement().children();\n    assert.lengthOf(nodes, 2);\n    assert.isFalse(nodes[0].selected);\n    assert.isTrue(nodes[1].selected);\n  });\n\n  it('expands subtrees based on the `hidden` attribute', async () => {\n    const component = await makeTree(html`<devtools-tree .template=${html`\n      <ul role=\"tree\">\n        <li role=\"treeitem\">first subtree\n          <ul role=\"group\" hidden>\n            <li role=\"treeitem\">in first subtree</li>\n          </ul>\n        </li>\n        <li role=\"treeitem\">second subtree\n          <ul role=\"group\">\n            <li role=\"treeitem\">in second subtree</li>\n          </ul>\n        </li>\n      </ul>`}></devtools-tree>`);\n\n    const nodes = component.getInternalTreeOutlineForTest().rootElement().children();\n    assert.lengthOf(nodes, 2);\n    assert.isFalse(nodes[0].expanded);\n    assert.isTrue(nodes[1].expanded);\n  });\n\n  it('sends a `select` event when a node is selected', async () => {\n    const onSelect = sinon.stub<[UI.TreeOutline.TreeViewElement.SelectEvent]>();\n    let firstConfigElement, secondConfigElement;\n    const component = await makeTree(\n        html`<devtools-tree @select=${onSelect as (e: UI.TreeOutline.TreeViewElement.SelectEvent) => void} .template=${\n            html`\n      <ul role=\"tree\">\n        <li ${Lit.Directives.ref(e => {\n              firstConfigElement = e;\n            })} role=\"treeitem\">first node</li>\n        <li ${Lit.Directives.ref(e => {\n              secondConfigElement = e;\n            })} role=\"treeitem\">second node</li>\n      </ul>`}></devtools-tree>`);\n\n    assert.exists(firstConfigElement);\n    assert.exists(secondConfigElement);\n    component.getInternalTreeOutlineForTest().rootElement().lastChild()?.select();\n\n    sinon.assert.calledOnce(onSelect);\n    assert.strictEqual(onSelect.args[0][0].detail, secondConfigElement);\n  });\n\n  it('sends an `expand` event when a node is expanded or collapsed', async () => {\n    const onExpand = sinon.stub<[UI.TreeOutline.TreeViewElement.ExpandEvent]>();\n    let firstConfigElement: Element|undefined, secondConfigElement: Element|undefined;\n    const component = await makeTree(html`<devtools-tree .template=${html`\n      <ul role=\"tree\">\n        <li @expand=${onExpand as (e: UI.TreeOutline.TreeViewElement.ExpandEvent) => void} ${Lit.Directives.ref(e => {\n      firstConfigElement = e;\n    })} role=\"treeitem\">first subtree\n          <ul role=\"group\" hidden>\n            <li role=\"treeitem\">in first subtree</li>\n          </ul>\n        </li>\n        <li @expand=${onExpand as (e: UI.TreeOutline.TreeViewElement.ExpandEvent) => void} ${Lit.Directives.ref(e => {\n      secondConfigElement = e;\n    })} role=\"treeitem\">second subtree\n          <ul role=\"group\" hidden>\n            <li role=\"treeitem\">in second subtree</li>\n          </ul>\n        </li>\n      </ul>`}></devtools-tree>`);\n\n    assert.exists(firstConfigElement);\n    assert.exists(secondConfigElement);\n    component.getInternalTreeOutlineForTest().rootElement().lastChild()?.expand();\n    sinon.assert.calledOnce(onExpand);\n    assert.deepEqual(onExpand.args[0][0].detail, {expanded: true, target: secondConfigElement});\n\n    component.getInternalTreeOutlineForTest().rootElement().lastChild()?.collapse();\n    sinon.assert.calledTwice(onExpand);\n    assert.deepEqual(onExpand.args[1][0].detail, {expanded: false, target: secondConfigElement});\n  });\n});\n"]}