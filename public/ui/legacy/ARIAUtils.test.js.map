{"version":3,"file":"ARIAUtils.test.js","sourceRoot":"","sources":["../../../../../../front_end/ui/legacy/ARIAUtils.test.ts"],"names":[],"mappings":"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","sourcesContent":["// Copyright 2024 The Chromium Authors. All rights reserved.\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\n\nimport {describeWithEnvironment} from '../../testing/EnvironmentHelpers.js';\n\nimport * as UI from './legacy.js';\n\nconst NBSP = '\\u00A0';\n\ndescribeWithEnvironment('ARIAUtils', () => {\n  beforeEach(() => {\n    UI.Dialog.Dialog.getInstance()?.hide();\n    UI.ARIAUtils.getOrCreateAlertElement(document.body, {force: true});\n  });\n\n  afterEach(() => {\n    UI.Dialog.Dialog.getInstance()?.hide();\n  });\n\n  describe('ARIAUtils.alert', () => {\n    it('shows alerts in the dialog if it is shown', () => {\n      UI.ARIAUtils.getOrCreateAlertElement(document.body);\n      const dialog = new UI.Dialog.Dialog();\n      UI.ARIAUtils.getOrCreateAlertElement(dialog.contentElement);\n      dialog.show();\n\n      UI.ARIAUtils.alert('test');\n      assert.strictEqual(UI.ARIAUtils.getOrCreateAlertElement(document.body).textContent, '');\n      assert.strictEqual(UI.ARIAUtils.getOrCreateAlertElement(dialog.contentElement).textContent, 'test');\n    });\n\n    it('repeated alerts include a non breaking space to trigger announcement for the same text multiple times', () => {\n      UI.ARIAUtils.alert('test');\n      assert.strictEqual(UI.ARIAUtils.getOrCreateAlertElement(document.body).textContent, 'test');\n\n      UI.ARIAUtils.alert('test');\n      assert.strictEqual(UI.ARIAUtils.getOrCreateAlertElement(document.body).textContent, `test${NBSP}`);\n    });\n\n    // Flaky test.\n    it.skip('[crbug.com/338872707] shows alerts in the body if the dialog is not shown', () => {\n      UI.ARIAUtils.getOrCreateAlertElement(document.body);\n      const dialog = new UI.Dialog.Dialog();\n      UI.ARIAUtils.getOrCreateAlertElement(dialog.contentElement);\n      dialog.hide();\n\n      UI.ARIAUtils.alert('test');\n      assert.strictEqual(UI.ARIAUtils.getOrCreateAlertElement(document.body).textContent, 'test');\n      assert.strictEqual(UI.ARIAUtils.getOrCreateAlertElement(dialog.contentElement).textContent, '');\n    });\n  });\n});\n"]}