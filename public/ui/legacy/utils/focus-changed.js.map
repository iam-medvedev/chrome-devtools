{"version":3,"file":"focus-changed.js","sourceRoot":"","sources":["../../../../../../../front_end/ui/legacy/utils/focus-changed.ts"],"names":[],"mappings":"AAAA,4DAA4D;AAC5D,yEAAyE;AACzE,6BAA6B;AAE7B,OAAO,KAAK,QAAQ,MAAM,oCAAoC,CAAC;AAE/D,SAAS,8BAA8B,CAAC,IAAe;IACrD,OAAO,IAAI,EAAE,CAAC;QACZ,IAAI,IAAI,CAAC,QAAQ,EAAE,CAAC;YAClB,MAAM;QACR,CAAC;QAED,IAAI,GAAG,IAAI,CAAC,sBAAsB,EAAE,CAAC;IACvC,CAAC;IACD,IAAI,CAAC,IAAI,EAAE,CAAC;QACV,OAAO;IACT,CAAC;IAED,IAAI,MAAM,GAAG,IAAI,CAAC,QAAQ,CAAC;IAC3B,OAAO,MAAM,IAAI,MAAM,CAAC,YAAY,EAAE,EAAE,CAAC;QACvC,MAAM,YAAY,GAAG,MAAM,CAAC,YAAY,EAAE,CAAC;QAC3C,IAAI,CAAC,YAAY,EAAE,CAAC;YAClB,MAAM;QACR,CAAC;QAED,YAAY,CAAC,mBAAmB,GAAG,MAAM,CAAC;QAC1C,MAAM,GAAG,YAAY,CAAC;IACxB,CAAC;AACH,CAAC;AAED,SAAS,+BAA+B,CAAC,IAAe;IACtD,IAAI,GAAG,IAAI,IAAI,IAAI,CAAC,sBAAsB,EAAE,CAAC;IAC7C,MAAM,WAAW,GAAG,cAAc,CAAC,GAAG,CAAC,UAAU,CAAC,CAAC;IACnD,IAAI,MAAM,GAAG,IAAI,CAAC;IAClB,OAAO,IAAI,EAAE,CAAC;QACZ,IAAI,WAAW,IAAI,IAAI,YAAY,WAAW,EAAE,CAAC;YAC/C,IAAI,MAAM,EAAE,CAAC;gBACX,mEAAmE;gBACnE,8DAA8D;gBAC7D,IAAY,CAAC,qBAAqB,GAAG,MAAM,CAAC;YAC/C,CAAC;YACD,MAAM,GAAG,IAAI,CAAC;QAChB,CAAC;QACD,IAAI,GAAG,IAAI,CAAC,sBAAsB,EAAE,CAAC;IACvC,CAAC;AACH,CAAC;AAED,MAAM,UAAU,YAAY,CAAC,KAAY;IACvC,MAAM,MAAM,GAAG,KAAK,CAAC,MAAqB,CAAC;IAC3C,MAAM,QAAQ,GAAG,MAAM,CAAC,CAAC,CAAC,MAAM,CAAC,aAAa,CAAC,CAAC,CAAC,IAAI,CAAC;IACtD,MAAM,OAAO,GAAG,QAAQ,CAAC,CAAC,CAAC,QAAQ,CAAC,YAAY,CAAC,iBAAiB,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC;IACpF,8BAA8B,CAAC,OAAO,CAAC,CAAC;IACxC,+BAA+B,CAAC,OAAO,CAAC,CAAC;AAC3C,CAAC","sourcesContent":["// Copyright 2019 The Chromium Authors. All rights reserved.\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\n\nimport * as Platform from '../../../core/platform/platform.js';\n\nfunction updateWidgetfocusWidgetForNode(node: Node|null): void {\n  while (node) {\n    if (node.__widget) {\n      break;\n    }\n\n    node = node.parentNodeOrShadowHost();\n  }\n  if (!node) {\n    return;\n  }\n\n  let widget = node.__widget;\n  while (widget && widget.parentWidget()) {\n    const parentWidget = widget.parentWidget();\n    if (!parentWidget) {\n      break;\n    }\n\n    parentWidget.defaultFocusedChild = widget;\n    widget = parentWidget;\n  }\n}\n\nfunction updateXWidgetfocusWidgetForNode(node: Node|null): void {\n  node = node && node.parentNodeOrShadowHost();\n  const XWidgetCtor = customElements.get('x-widget');\n  let widget = null;\n  while (node) {\n    if (XWidgetCtor && node instanceof XWidgetCtor) {\n      if (widget) {\n        // TODO(crbug.com/1172300) Ignored during the jsdoc to ts migration\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        (node as any).defaultFocusedElement = widget;\n      }\n      widget = node;\n    }\n    node = node.parentNodeOrShadowHost();\n  }\n}\n\nexport function focusChanged(event: Event): void {\n  const target = event.target as HTMLElement;\n  const document = target ? target.ownerDocument : null;\n  const element = document ? Platform.DOMUtilities.deepActiveElement(document) : null;\n  updateWidgetfocusWidgetForNode(element);\n  updateXWidgetfocusWidgetForNode(element);\n}\n"]}