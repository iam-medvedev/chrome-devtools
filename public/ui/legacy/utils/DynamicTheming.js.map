{"version":3,"file":"DynamicTheming.js","sourceRoot":"","sources":["../../../../../../../front_end/ui/legacy/utils/DynamicTheming.ts"],"names":[],"mappings":"AAAA,4DAA4D;AAC5D,yEAAyE;AACzE,6BAA6B;AAE7B,6FAA6F;AAC7F,MAAM,OAAO,cAAc;IACzB,MAAM,CAAC,KAAK,CAAC,aAAa,CAAC,QAA4B;QACrD,IAAI,CAAC,QAAQ,EAAE;YACb,OAAO;SACR;QACD,MAAM,mBAAmB,GAAG,oCAAoC,CAAC;QACjE,MAAM,YAAY,GAAG,QAAQ,CAAC,aAAa,CAAC,mBAAmB,CAAC,CAAC;QACjE,IAAI,CAAC,YAAY,EAAE;YACjB,OAAO;SACR;QACD,MAAM,IAAI,GAAG,YAAY,CAAC,YAAY,CAAC,MAAM,CAAC,CAAC;QAC/C,IAAI,CAAC,IAAI,EAAE;YACT,OAAO;SACR;QACD,MAAM,OAAO,GAAG,IAAI,GAAG,CAAC,IAAI,EAAE,QAAQ,CAAC,IAAI,CAAC,CAAC;QAC7C,OAAO,CAAC,YAAY,CAAC,GAAG,CAAC,SAAS,EAAE,CAAC,IAAI,IAAI,EAAE,CAAC,CAAC,OAAO,EAAE,CAAC,QAAQ,EAAE,CAAC,CAAC;QACvE,MAAM,gBAAgB,GAAG,QAAQ,CAAC,aAAa,CAAC,MAAM,CAAC,CAAC;QACxD,gBAAgB,CAAC,YAAY,CAAC,MAAM,EAAE,OAAO,CAAC,QAAQ,EAAE,CAAC,CAAC;QAC1D,gBAAgB,CAAC,YAAY,CAAC,KAAK,EAAE,YAAY,CAAC,CAAC;QACnD,gBAAgB,CAAC,YAAY,CAAC,MAAM,EAAE,UAAU,CAAC,CAAC;QAClD,MAAM,eAAe,GAAG,IAAI,OAAO,CAAU,OAAO,CAAC,EAAE;YACrD,gBAAgB,CAAC,MAAM,GAAG,OAAO,CAAC,IAAI,CAAC,IAAI,EAAE,IAAI,CAAC,CAAC;YACnD,gBAAgB,CAAC,OAAO,GAAG,OAAO,CAAC,IAAI,CAAC,IAAI,EAAE,KAAK,CAAC,CAAC;QACvD,CAAC,CAAC,CAAC;QACH,QAAQ,CAAC,IAAI,CAAC,WAAW,CAAC,gBAAgB,CAAC,CAAC;QAC5C,IAAI,MAAM,eAAe,EAAE;YACzB,YAAY,CAAC,MAAM,EAAE,CAAC;SACvB;IACH,CAAC;CACF","sourcesContent":["// Copyright 2024 The Chromium Authors. All rights reserved.\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\n\n// export class instead of function to make sinon spying possible (it cannot mock ES modules)\nexport class DynamicTheming {\n  static async refetchColors(document: Document|undefined): Promise<void> {\n    if (!document) {\n      return;\n    }\n    const COLORS_CSS_SELECTOR = 'link[href*=\\'//theme/colors.css\\']';\n    const colorCssNode = document.querySelector(COLORS_CSS_SELECTOR);\n    if (!colorCssNode) {\n      return;\n    }\n    const href = colorCssNode.getAttribute('href');\n    if (!href) {\n      return;\n    }\n    const hrefUrl = new URL(href, location.href);\n    hrefUrl.searchParams.set('version', (new Date()).getTime().toString());\n    const newColorsCssLink = document.createElement('link');\n    newColorsCssLink.setAttribute('href', hrefUrl.toString());\n    newColorsCssLink.setAttribute('rel', 'stylesheet');\n    newColorsCssLink.setAttribute('type', 'text/css');\n    const newColorsLoaded = new Promise<boolean>(resolve => {\n      newColorsCssLink.onload = resolve.bind(this, true);\n      newColorsCssLink.onerror = resolve.bind(this, false);\n    });\n    document.body.appendChild(newColorsCssLink);\n    if (await newColorsLoaded) {\n      colorCssNode.remove();\n    }\n  }\n}\n"]}