{"version":3,"file":"Dialog.test.js","sourceRoot":"","sources":["../../../../../../front_end/ui/legacy/Dialog.test.ts"],"names":[],"mappings":"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","sourcesContent":["// Copyright 2025 The Chromium Authors\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\n\nimport {describeWithEnvironment} from '../../testing/EnvironmentHelpers.js';\n\nimport * as UI from './legacy.js';\n\ndescribeWithEnvironment('Dialog', () => {\n  describe('Dialog stacking', () => {\n    it('should hide an existing dialog when a new one is shown without stacking', () => {\n      const dialog1 = new UI.Dialog.Dialog();\n      dialog1.show();\n      assert.isTrue(dialog1.isShowing(), 'dialog1 should be showing');\n\n      const dialog2 = new UI.Dialog.Dialog();\n      dialog2.show();\n      assert.isTrue(dialog2.isShowing(), 'dialog2 should be showing');\n      assert.isFalse(dialog1.isShowing(), 'dialog1 should be hidden');\n      assert.strictEqual(UI.Dialog.Dialog.getInstance(), dialog2, 'dialog2 should be the current instance');\n    });\n\n    it('should keep the first dialog visible when a second one is stacked on top', () => {\n      const dialog1 = new UI.Dialog.Dialog();\n      dialog1.show();\n      assert.isTrue(dialog1.isShowing(), 'dialog1 should be showing');\n\n      const dialog2 = new UI.Dialog.Dialog();\n      // Show the second dialog stacked on top of the first one.\n      dialog2.show(undefined, /* stack */ true);\n      assert.isTrue(dialog1.isShowing(), 'dialog1 should still be showing');\n      assert.isTrue(dialog2.isShowing(), 'dialog2 should be showing');\n      assert.strictEqual(UI.Dialog.Dialog.getInstance(), dialog2, 'dialog2 should be the current instance');\n    });\n\n    it('should only hide the top-most dialog on an outside click when stacked', () => {\n      const dialog1 = new UI.Dialog.Dialog();\n      dialog1.show();\n\n      const dialog2 = new UI.Dialog.Dialog();\n      dialog2.show(undefined, /* stack */ true);\n\n      // We are clicking on the document body, which should be considered\n      // an outside click for the top-most dialog.\n      dialog2.element.ownerDocument.body.dispatchEvent(new MouseEvent('mousedown', {bubbles: true, cancelable: true}));\n\n      assert.isFalse(dialog2.isShowing(), 'dialog2 should be hidden after outside click');\n      assert.isTrue(dialog1.isShowing(), 'dialog1 should still be showing');\n      assert.strictEqual(UI.Dialog.Dialog.getInstance(), dialog1, 'dialog1 should now be the current instance');\n    });\n\n    it('should only hide the top-most dialog on Escape key press when stacked', () => {\n      const dialog1 = new UI.Dialog.Dialog();\n      dialog1.show();\n\n      const dialog2 = new UI.Dialog.Dialog();\n      dialog2.show(undefined, /* stack */ true);\n\n      // The keydown handler is on the document.\n      dialog2.contentElement.ownerDocument.dispatchEvent(\n          new KeyboardEvent('keydown', {keyCode: UI.KeyboardShortcut.Keys.Esc.code}));\n\n      assert.isFalse(dialog2.isShowing(), 'dialog2 should be hidden after Escape key');\n      assert.isTrue(dialog1.isShowing(), 'dialog1 should still be showing');\n      assert.strictEqual(UI.Dialog.Dialog.getInstance(), dialog1, 'dialog1 should now be the current instance');\n    });\n  });\n});\n"]}