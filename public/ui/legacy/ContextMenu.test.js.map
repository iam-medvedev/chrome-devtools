{"version":3,"file":"ContextMenu.test.js","sourceRoot":"","sources":["../../../../../../front_end/ui/legacy/ContextMenu.test.ts"],"names":[],"mappings":"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","sourcesContent":["// Copyright 2023 The Chromium Authors\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\n\nimport * as Common from '../../core/common/common.js';\nimport * as Host from '../../core/host/host.js';\nimport {dispatchMouseUpEvent, renderElementIntoDOM} from '../../testing/DOMHelpers.js';\nimport {describeWithEnvironment, registerNoopActions} from '../../testing/EnvironmentHelpers.js';\nimport * as Lit from '../lit/lit.js';\nimport * as VisualLogging from '../visual_logging/visual_logging.js';\n\nimport * as UI from './legacy.js';\n\nconst {html, render} = Lit;\n\nfunction getContextMenuElement(): HTMLElement {\n  const container = document.querySelector('div[data-devtools-glass-pane]');\n  const softMenuElement = container!.shadowRoot!.querySelector('.widget > .soft-context-menu');\n  assert.instanceOf(softMenuElement, HTMLElement);\n  return softMenuElement;\n}\n\ndescribeWithEnvironment('ContextMenu', () => {\n  let menuItems: UI.SoftContextMenu.SoftContextMenuDescriptor[];\n  beforeEach(() => {\n    menuItems = [\n      {\n        type: 'checkbox',\n        id: 0,\n        label: 'item0',\n        checked: false,\n      },\n      {\n        type: 'checkbox',\n        id: 1,\n        label: 'item1',\n        checked: false,\n      },\n    ];\n  });\n\n  it('stays open after clicking on an item when keepOpen is true', () => {\n    const softMenu = new UI.SoftContextMenu.SoftContextMenu(menuItems, () => {}, true);\n    const contextMenuDiscardSpy = sinon.spy(softMenu, 'discard');\n    softMenu.show(document, new AnchorBox(0, 0, 0, 0));\n    const softMenuElement = getContextMenuElement();\n\n    const item0 = softMenuElement.querySelector('[aria-label^=\"item0\"]');\n    assert.instanceOf(item0, HTMLElement);\n    const item1 = softMenuElement.querySelector('[aria-label^=\"item1\"]');\n    assert.instanceOf(item1, HTMLElement);\n\n    assert.isFalse(item0.hasAttribute('checked'));\n    assert.isFalse(item1.hasAttribute('checked'));\n\n    dispatchMouseUpEvent(item0);\n    dispatchMouseUpEvent(item1);\n    assert.isTrue(item0.hasAttribute('checked'));\n    assert.isTrue(item1.hasAttribute('checked'));\n    sinon.assert.notCalled(contextMenuDiscardSpy);\n\n    dispatchMouseUpEvent(item0);\n    assert.isFalse(item0.hasAttribute('checked'));\n    assert.isTrue(item1.hasAttribute('checked'));\n    sinon.assert.notCalled(contextMenuDiscardSpy);\n\n    softMenu.discard();\n  });\n\n  it('closes after clicking on an item when keepOpen is false', () => {\n    const softMenu = new UI.SoftContextMenu.SoftContextMenu(menuItems, () => {}, false);\n    const contextMenuDiscardSpy = sinon.spy(softMenu, 'discard');\n    softMenu.show(document, new AnchorBox(0, 0, 0, 0));\n    const softMenuElement = getContextMenuElement();\n\n    const item0 = softMenuElement.querySelector('[aria-label^=\"item0\"]');\n    assert.instanceOf(item0, HTMLElement);\n    dispatchMouseUpEvent(item0);\n    sinon.assert.called(contextMenuDiscardSpy);\n\n    softMenu.discard();\n  });\n\n  it('uses hosted menu when possible', async () => {\n    sinon.stub(Host.InspectorFrontendHost.InspectorFrontendHostInstance, 'isHostedMode').returns(false);\n    const showContextMenuAtPoint =\n        sinon.stub(Host.InspectorFrontendHost.InspectorFrontendHostInstance, 'showContextMenuAtPoint');\n\n    const event = new Event('contextmenu');\n    sinon.stub(event, 'target').value(document);\n    const contextMenu = new UI.ContextMenu.ContextMenu(event);\n    await contextMenu.show();\n    sinon.assert.called(showContextMenuAtPoint);\n  });\n\n  it('records new badge usage', async () => {\n    sinon.stub(Host.InspectorFrontendHost.InspectorFrontendHostInstance, 'isHostedMode').returns(false);\n    sinon.stub(Host.InspectorFrontendHost.InspectorFrontendHostInstance, 'showContextMenuAtPoint');\n\n    const event = new Event('contextmenu');\n    sinon.stub(event, 'target').value(document);\n    const contextMenu = new UI.ContextMenu.ContextMenu(event);\n    const submenu1 = contextMenu.defaultSection().appendSubMenuItem('submenu', false, undefined, 'feature1');\n    submenu1.defaultSection().appendItem('item', () => {}, {featureName: 'feature2'});\n    submenu1.defaultSection().appendItem('item', () => {});\n\n    const submenu2 = contextMenu.defaultSection().appendSubMenuItem('submenu2', false, undefined, 'feature3');\n    submenu2.defaultSection().appendItem('item', () => {}, {featureName: 'feature4'});\n    const item = submenu2.defaultSection().appendItem('item', () => {}, {featureName: 'feature5'});\n\n    await contextMenu.show();\n    const newBadgeUsageStub =\n        sinon.stub(Host.InspectorFrontendHost.InspectorFrontendHostInstance, 'recordNewBadgeUsage');\n    Host.InspectorFrontendHost.InspectorFrontendHostInstance.events.dispatchEventToListeners(\n        Host.InspectorFrontendHostAPI.Events.ContextMenuItemSelected, item.id());\n    assert.deepEqual(newBadgeUsageStub.args, [['feature5'], ['feature3']]);\n  });\n\n  it('logs impressions and clicks for hosted menu', async () => {\n    const throttler = new Common.Throttler.Throttler(1000000000);\n    await VisualLogging.startLogging({processingThrottler: throttler});\n    sinon.stub(Host.InspectorFrontendHost.InspectorFrontendHostInstance, 'isHostedMode').returns(false);\n    sinon.stub(Host.InspectorFrontendHost.InspectorFrontendHostInstance, 'showContextMenuAtPoint');\n    const recordImpression = sinon.stub(\n        Host.InspectorFrontendHost.InspectorFrontendHostInstance,\n        'recordImpression',\n    );\n\n    const recordClick = sinon.stub(\n        Host.InspectorFrontendHost.InspectorFrontendHostInstance,\n        'recordClick',\n    );\n\n    const event = new Event('contextmenu');\n    sinon.stub(event, 'target').value(document);\n    const contextMenu = new UI.ContextMenu.ContextMenu(event);\n    contextMenu.defaultSection().appendItem('item 1', () => {}, {jslogContext: '42'});\n    contextMenu.defaultSection().appendItem('item 2', () => {}, {jslogContext: '44'});\n    await contextMenu.show();\n    await new Promise(resolve => setTimeout(resolve, 0));\n    assert.exists(throttler.process);\n    await throttler.process?.();\n    sinon.assert.calledOnce(recordImpression);\n    const impressions =\n        recordImpression.firstCall.firstArg.impressions as Host.InspectorFrontendHostAPI.VisualElementImpression[];\n    const menuId = impressions.find(i => !i.parent)?.id;\n    assert.exists(menuId);\n    assert.sameDeepMembers(impressions.map(i => ({...i, id: 0})), [\n      {id: 0, type: 67, height: 40, width: 200},\n      {id: 0, type: 29, parent: menuId, context: 42, height: 20, width: 200},\n      {id: 0, type: 29, parent: menuId, context: 44, height: 20, width: 200},\n    ]);\n\n    Host.InspectorFrontendHost.InspectorFrontendHostInstance.events.dispatchEventToListeners(\n        Host.InspectorFrontendHostAPI.Events.ContextMenuItemSelected, 1);\n\n    await new Promise(resolve => setTimeout(resolve, 0));\n    sinon.assert.calledOnce(recordClick);\n    await VisualLogging.stopLogging();\n  });\n\n  it('can register an action menu item with a new badge', async () => {\n    const actionId = 'test-action';\n    registerNoopActions([actionId]);\n\n    sinon.stub(Host.InspectorFrontendHost.InspectorFrontendHostInstance, 'isHostedMode').returns(false);\n\n    const showContextMenuAtPoint =\n        sinon.stub(Host.InspectorFrontendHost.InspectorFrontendHostInstance, 'showContextMenuAtPoint');\n\n    const event = new Event('contextmenu');\n    sinon.stub(event, 'target').value(document);\n    const contextMenu = new UI.ContextMenu.ContextMenu(event);\n    contextMenu.defaultSection().appendAction(actionId, 'mockLabel', false, undefined, 'mockFeature');\n    await contextMenu.show();\n    sinon.assert.calledOnce(showContextMenuAtPoint);\n\n    assert.strictEqual(showContextMenuAtPoint.args[0][2][0].featureName, 'mockFeature');\n  });\n\n  it('can register a submenu item with a new badge', async () => {\n    sinon.stub(Host.InspectorFrontendHost.InspectorFrontendHostInstance, 'isHostedMode').returns(false);\n\n    const showContextMenuAtPoint =\n        sinon.stub(Host.InspectorFrontendHost.InspectorFrontendHostInstance, 'showContextMenuAtPoint');\n\n    const event = new Event('contextmenu');\n    sinon.stub(event, 'target').value(document);\n    const contextMenu = new UI.ContextMenu.ContextMenu(event);\n    const subMenu = contextMenu.defaultSection().appendSubMenuItem('mockLabel', false, undefined, 'mockFeature');\n    subMenu.defaultSection().appendItem('subMenuLabel', () => {});\n    await contextMenu.show();\n    sinon.assert.calledOnce(showContextMenuAtPoint);\n    assert.strictEqual(showContextMenuAtPoint.args[0][2][0].featureName, 'mockFeature');\n    assert.strictEqual(showContextMenuAtPoint.args[0][2][0].type, 'subMenu');\n  });\n});\n\ndescribeWithEnvironment('MenuButton', function() {\n  it('renders a button and opens a menu on click', async () => {\n    const container = document.createElement('div');\n    let resolveMenuPopulated = () => {};\n    const populatedPromise = new Promise<void>(resolve => {\n      resolveMenuPopulated = resolve;\n    });\n\n    const populateMenuCall = (menu: UI.ContextMenu.ContextMenu): void => {\n      menu.defaultSection().appendItem('item 1', () => {});\n    };\n\n    // clang-format off\n    render(html`\n      <devtools-menu-button\n       .populateMenuCall=${populateMenuCall}\n        soft-menu\n        icon-name=\"dots-vertical\"\n      ></devtools-menu-button>\n    `, container);\n    // clang-format on\n\n    const showStub = sinon.stub(UI.ContextMenu.ContextMenu.prototype, 'show').callsFake(async () => {\n      resolveMenuPopulated();\n    });\n\n    renderElementIntoDOM(container);\n    const menuButton = container.querySelector<UI.ContextMenu.MenuButton>('devtools-menu-button');\n    assert.exists(menuButton, 'MenuButton element should exist');\n    const devtoolsButton = menuButton.shadowRoot?.querySelector('devtools-button');\n    assert.exists(devtoolsButton);\n\n    devtoolsButton.click();\n\n    await populatedPromise;\n\n    assert.strictEqual(devtoolsButton.getAttribute('aria-expanded'), 'true');\n    sinon.assert.calledOnce(showStub);\n  });\n\n  it('can be disabled', async () => {\n    const container = document.createElement('div');\n\n    // clang-format off\n    render(html`\n      <devtools-menu-button\n        .populateMenuCall=${() => {}}\n        disabled\n        icon-name=\"dots-vertical\"\n      ></devtools-menu-button>\n    `, container);\n    // clang-format on\n\n    renderElementIntoDOM(container);\n    const menuButton = container.querySelector<UI.ContextMenu.MenuButton>('devtools-menu-button');\n    assert.exists(menuButton, 'MenuButton element should exist');\n\n    const devtoolsButton = menuButton.shadowRoot?.querySelector('devtools-button');\n    assert.exists(devtoolsButton);\n\n    assert.isTrue(devtoolsButton.disabled);\n  });\n});\n"]}