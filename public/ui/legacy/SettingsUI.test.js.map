{"version":3,"file":"SettingsUI.test.js","sourceRoot":"","sources":["../../../../../../front_end/ui/legacy/SettingsUI.test.ts"],"names":[],"mappings":"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","sourcesContent":["// Copyright 2025 The Chromium Authors\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\n\nimport './legacy.js'; // For <devtools-checkbox>\n\nimport {renderElementIntoDOM} from '../../testing/DOMHelpers.js';\nimport {createFakeSetting} from '../../testing/EnvironmentHelpers.js';\nimport {Directives, html, render} from '../lit/lit.js';\n\nimport * as UI from './legacy.js';\n\ndescribe('bindToSetting (string)', () => {\n  function setup(validate?: (arg: string) => boolean) {\n    const {bindToSetting} = UI.SettingsUI;\n    const setting = createFakeSetting<string>('fake-setting', 'defaultValue');\n    const container = document.createElement('div');\n    renderElementIntoDOM(container);\n    const inputRef = Directives.createRef<HTMLInputElement>();\n    render(html`<input ${Directives.ref(inputRef)} ${bindToSetting(setting, validate)}></input>`, container);\n\n    const input = inputRef.value;\n    assert.exists(input);\n\n    return {input, setting, container};\n  }\n\n  it('shows the current value on initial render', () => {\n    const {input} = setup();\n\n    assert.strictEqual(input.value, 'defaultValue');\n  });\n\n  it('changes the setting when the input changes', () => {\n    const {setting, input} = setup();\n\n    input.value = 'new value via user edit';\n    input.dispatchEvent(new Event('change'));\n\n    assert.strictEqual(setting.get(), 'new value via user edit');\n  });\n\n  it('changes the input when the setting changes', () => {\n    const {setting, input} = setup();\n\n    setting.set('new value via change listener');\n\n    assert.strictEqual(input.value, 'new value via change listener');\n  });\n\n  it('does not change the setting when validation fails', () => {\n    const {setting, input} = setup(arg => /[0-9]+/.test(arg));\n\n    input.value = 'text must not update the setting';\n    input.dispatchEvent(new Event('change'));\n\n    assert.strictEqual(setting.get(), 'defaultValue');\n\n    input.value = '42';\n    input.dispatchEvent(new Event('change'));\n\n    assert.strictEqual(setting.get(), '42');\n  });\n\n  it('removes the change listener when the input is removed from the DOM', () => {\n    const {setting, input, container} = setup();\n    render(html``, container);\n\n    setting.set('new value via change listener');\n\n    assert.isFalse(input.isConnected);\n    assert.strictEqual(input.value, 'defaultValue');\n  });\n});\n\ndescribe('bindToSetting (boolean)', () => {\n  function setup() {\n    const {bindToSetting} = UI.SettingsUI;\n    const setting = createFakeSetting<boolean>('fake-setting', true);\n    const container = document.createElement('div');\n    renderElementIntoDOM(container);\n    const inputRef = Directives.createRef<UI.UIUtils.CheckboxLabel>();\n    render(\n        html`<devtools-checkbox ${Directives.ref(inputRef)} ${bindToSetting(setting)}></devtools-checkbox>`, container);\n\n    const input = inputRef.value;\n    assert.exists(input);\n\n    return {input, setting, container};\n  }\n\n  it('shows the current value on initial render', () => {\n    const {input} = setup();\n\n    assert.isTrue(input.checked);\n  });\n\n  it('changes the setting when the checkbox changes', () => {\n    const {input, setting} = setup();\n\n    input.checked = false;\n    input.dispatchEvent(new Event('change'));\n\n    assert.isFalse(setting.get());\n  });\n\n  it('changes the checkbox when the setting changes', () => {\n    const {input, setting} = setup();\n\n    setting.set(false);\n\n    assert.isFalse(input.checked);\n  });\n\n  it('removes the change listener when the input is removed from the DOM', () => {\n    const {setting, input, container} = setup();\n    render(html``, container);\n\n    setting.set(false);\n\n    assert.isFalse(input.isConnected);\n    assert.isTrue(input.checked);\n  });\n});\n\ndescribe('bindCheckbox', () => {\n  function setup() {\n    const setting = createFakeSetting<boolean>('fake-setting', true);\n    const input = document.createElement('devtools-checkbox');\n    UI.SettingsUI.bindCheckbox(input, setting);\n\n    return {setting, input};\n  }\n\n  it('shows the current value on initial render', () => {\n    const {input} = setup();\n\n    assert.isTrue(input.checked);\n  });\n\n  it('changes the setting when the checkbox changes', () => {\n    const {input, setting} = setup();\n\n    input.checked = false;\n    input.dispatchEvent(new Event('change'));\n\n    assert.isFalse(setting.get());\n  });\n\n  it('changes the checkbox when the setting changes', () => {\n    const {input, setting} = setup();\n\n    setting.set(false);\n\n    assert.isFalse(input.checked);\n  });\n});\n"]}