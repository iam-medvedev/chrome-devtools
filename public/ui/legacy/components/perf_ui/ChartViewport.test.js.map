{"version":3,"file":"ChartViewport.test.js","sourceRoot":"","sources":["../../../../../../../../front_end/ui/legacy/components/perf_ui/ChartViewport.test.ts"],"names":[],"mappings":"AAAA,4DAA4D;AAC5D,yEAAyE;AACzE,6BAA6B;AAE7B,OAAO,EAAC,gBAAgB,EAAC,MAAM,mCAAmC,CAAC;AACnE,OAAO,EAAC,uBAAuB,EAAC,MAAM,2CAA2C,CAAC;AAClF,OAAO,EACL,kBAAkB,GACnB,MAAM,qCAAqC,CAAC;AAE7C,OAAO,KAAK,MAAM,MAAM,cAAc,CAAC;AAEvC,MAAM,yBAAyB;IAC7B,aAAa;IACb,CAAC;IACD,oBAAoB;IACpB,CAAC;IACD,OAAO;IACP,CAAC;IACD,MAAM;IACN,CAAC;CACF;AAED,uBAAuB,CAAC,eAAe,EAAE,GAAG,EAAE;IAC5C,EAAE,CAAC,6EAA6E,EAAE,KAAK;QACrF,MAAM,QAAQ,GAAG,IAAI,yBAAyB,EAAE,CAAC;QACjD,MAAM,QAAQ,GAAG,IAAI,MAAM,CAAC,aAAa,CAAC,aAAa,CAAC,QAAQ,EAAE,EAAC,mBAAmB,EAAE,KAAK,EAAC,CAAC,CAAC;QAEhG,kBAAkB,CAAC,QAAQ,EAAE;YAC3B,KAAK,EAAE,GAAG;YACV,MAAM,EAAE,GAAG;SACZ,CAAC,CAAC;QACH,QAAQ,CAAC,gBAAgB,CAAC,GAAG,CAAC,CAAC;QAE/B,MAAM,gBAAgB,CAAC,oDAAoD,CAAC,CAAC;IAC/E,CAAC,CAAC,CAAC;IAEH,EAAE,CAAC,oFAAoF,EAAE,KAAK;QAC5F,MAAM,QAAQ,GAAG,IAAI,yBAAyB,EAAE,CAAC;QACjD,MAAM,QAAQ,GAAG,IAAI,MAAM,CAAC,aAAa,CAAC,aAAa,CAAC,QAAQ,EAAE,EAAC,mBAAmB,EAAE,KAAK,EAAC,CAAC,CAAC;QAChG,QAAQ,CAAC,wBAAwB,EAAE,CAAC;QAEpC,kBAAkB,CAAC,QAAQ,EAAE;YAC3B,KAAK,EAAE,GAAG;YACV,MAAM,EAAE,GAAG;SACZ,CAAC,CAAC;QACH,QAAQ,CAAC,gBAAgB,CAAC,GAAG,CAAC,CAAC;QAE/B,MAAM,gBAAgB,CAAC,yDAAyD,CAAC,CAAC;IACpF,CAAC,CAAC,CAAC;IAEH,EAAE,CAAC,2EAA2E,EAAE,KAAK;QACnF,MAAM,QAAQ,GAAG,IAAI,yBAAyB,EAAE,CAAC;QACjD,MAAM,QAAQ,GAAG,IAAI,MAAM,CAAC,aAAa,CAAC,aAAa,CAAC,QAAQ,EAAE,EAAC,mBAAmB,EAAE,KAAK,EAAC,CAAC,CAAC;QAEhG,kBAAkB,CAAC,QAAQ,EAAE;YAC3B,KAAK,EAAE,GAAG;YACV,MAAM,EAAE,GAAG;SACZ,CAAC,CAAC;QACH,QAAQ,CAAC,gBAAgB,CAAC,IAAI,CAAC,CAAC;QAEhC,MAAM,gBAAgB,CAAC,kDAAkD,CAAC,CAAC;IAC7E,CAAC,CAAC,CAAC;AACL,CAAC,CAAC,CAAC","sourcesContent":["// Copyright 2025 The Chromium Authors. All rights reserved.\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\n\nimport {assertScreenshot} from '../../../../testing/DOMHelpers.js';\nimport {describeWithEnvironment} from '../../../../testing/EnvironmentHelpers.js';\nimport {\n  renderWidgetInVbox,\n} from '../../../../testing/TraceHelpers.js';\n\nimport * as PerfUI from './perf_ui.js';\n\nclass FakeChartViewportDelegate implements PerfUI.ChartViewport.ChartViewportDelegate {\n  windowChanged(): void {\n  }\n  updateRangeSelection(): void {\n  }\n  setSize(): void {\n  }\n  update(): void {\n  }\n}\n\ndescribeWithEnvironment('ChartViewport', () => {\n  it('does not render the virtual scrollbar if the content fits inside the height', async function() {\n    const delegate = new FakeChartViewportDelegate();\n    const viewport = new PerfUI.ChartViewport.ChartViewport(delegate, {enableCursorElement: false});\n\n    renderWidgetInVbox(viewport, {\n      width: 600,\n      height: 400,\n    });\n    viewport.setContentHeight(300);\n\n    await assertScreenshot('timeline/chart_viewport_content_fits_no_scroll.png');\n  });\n\n  it('does render the virtual scrollbar if the content fits and it is set to always show', async function() {\n    const delegate = new FakeChartViewportDelegate();\n    const viewport = new PerfUI.ChartViewport.ChartViewport(delegate, {enableCursorElement: false});\n    viewport.alwaysShowVerticalScroll();\n\n    renderWidgetInVbox(viewport, {\n      width: 600,\n      height: 400,\n    });\n    viewport.setContentHeight(300);\n\n    await assertScreenshot('timeline/chart_viewport_always_show_vertical_scroll.png');\n  });\n\n  it('renders the virtual scrollbar when the content is taller than the element', async function() {\n    const delegate = new FakeChartViewportDelegate();\n    const viewport = new PerfUI.ChartViewport.ChartViewport(delegate, {enableCursorElement: false});\n\n    renderWidgetInVbox(viewport, {\n      width: 600,\n      height: 400,\n    });\n    viewport.setContentHeight(1000);\n\n    await assertScreenshot('timeline/chart_viewport_scroll_when_overflow.png');\n  });\n});\n"]}