{
  "version": 3,
  "sources": ["../../../../../../../../front_end/ui/legacy/components/color_picker/ColorFormatSpec.ts", "../../../../../../../../front_end/ui/legacy/components/color_picker/ContrastDetails.ts", "../../../../../../../../front_end/ui/legacy/components/color_picker/ContrastInfo.ts", "../../../../../../../../front_end/ui/legacy/components/color_picker/ContrastOverlay.ts", "../../../../../../../../front_end/ui/legacy/components/color_picker/FormatPickerContextMenu.ts", "../../../../../../../../front_end/ui/legacy/components/color_picker/Spectrum.ts", "spectrum.css.js"],
  "sourcesContent": ["// Copyright 2023 The Chromium Authors\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\n\nimport * as Common from '../../../../core/common/common.js';\nimport * as Platform from '../../../../core/platform/platform.js';\n\n// Represents how each of the color formats should be\n// shown in the color picker inputs and\n// how a color should be materialized from the input values.\n\n// All the color formats except HEX and ShortHEX is\n// represented with 4 input fields in the ColorPicker.\n// This utility exports `colorFormatSpec` which encodes\n// * Label to be shown for the given color space\n// * `toValues` method that converts the given color to 4 input values\n// * `fromValues` method that creates the color from the given 4 input values.\n\n// Represents each of the inputs. For example, we have\n// 4 inputs for rgba colors: r, g, b, a and each character from \"RGBA\"\n// represents one of the inputs.\ntype Label = 'RGBA'|'HSLA'|'HWBA'|'lchA'|'labA'|'xyzA';\n\ninterface ColorFormatSpec {\n  // Label to be shown under the inputs\n  label: Label;\n  // Values of the inputs\n  toValues(color: Common.Color.Color): [string, string, string, string];\n  // How to generate the number from the input values\n  fromValues(values: [string, string, string, string]): Common.Color.Color|null;\n}\n\n// p0, p1, p2, alpha\n// r, g, b, alpha\n// l, c, h, alpha\n// l, a, b, alpha\ntype CanonicalParameters = [number, number, number, number];\n\nexport type SpectrumColorFormat = Exclude<\n    Common.Color.Format,\n    Common.Color.Format.RGBA|Common.Color.Format.HSLA|Common.Color.Format.HWBA|Common.Color.Format.HEXA>;\n\nconst roundAndStringify = (arr: [number, number, number, number]): [string, string, string, string] =>\n    arr.map(el => Platform.StringUtilities.stringifyWithPrecision(el, 2)) as [string, string, string, string];\n\nconst functionParamsText = (values: [string, string, string, string]): string => {\n  return `${values[0]} ${values[1]} ${values[2]} / ${values[3]}`;\n};\n\nexport const colorFormatSpec: Record<Exclude<SpectrumColorFormat, Common.Color.Format.HEX>, ColorFormatSpec> = {\n  [Common.Color.Format.RGB]: {\n    label: 'RGBA',\n    toValues: function(color: Common.Color.Color): [string, string, string, string] {\n      return roundAndStringify(color.as(Common.Color.Format.RGBA).canonicalRGBA() as CanonicalParameters);\n    },\n    fromValues: function(values: [string, string, string, string]): Common.Color.Color |\n        null {\n          return Common.Color.parse(`rgb(${functionParamsText(values)})`);\n        },\n  },\n  [Common.Color.Format.HSL]: {\n    label: 'HSLA',\n    toValues: function(color: Common.Color.Color): [string, string, string, string] {\n      const canonicalHslParams =\n          roundAndStringify(color.as(Common.Color.Format.HSLA).canonicalHSLA() as CanonicalParameters);\n      canonicalHslParams[1] = canonicalHslParams[1] + '%';\n      canonicalHslParams[2] = canonicalHslParams[2] + '%';\n      return canonicalHslParams;\n    },\n    fromValues: function(values: [string, string, string, string]): Common.Color.Color |\n        null {\n          return Common.Color.parse(`hsl(${functionParamsText(values)})`);\n        },\n  },\n  [Common.Color.Format.HWB]: {\n    label: 'HWBA',\n    toValues: function(color: Common.Color.Color): [string, string, string, string] {\n      const canonicalHwbParams =\n          roundAndStringify(color.as(Common.Color.Format.HWBA).canonicalHWBA() as CanonicalParameters);\n      canonicalHwbParams[1] = canonicalHwbParams[1] + '%';\n      canonicalHwbParams[2] = canonicalHwbParams[2] + '%';\n      return canonicalHwbParams;\n    },\n    fromValues: function(values: [string, string, string, string]): Common.Color.Color |\n        null {\n          return Common.Color.parse(`hwb(${functionParamsText(values)})`);\n        },\n  },\n  [Common.Color.Format.LCH]: {\n    label: 'lchA',\n    toValues: function(color: Common.Color.Color): [string, string, string, string] {\n      const lchColor = color.as(Common.Color.Format.LCH);\n      return roundAndStringify([lchColor.l, lchColor.c, lchColor.h, lchColor.alpha ?? 1] as CanonicalParameters);\n    },\n    fromValues: function(values: [string, string, string, string]): Common.Color.Color |\n        null {\n          return Common.Color.parse(`lch(${functionParamsText(values)})`);\n        },\n  },\n  [Common.Color.Format.OKLCH]: {\n    label: 'lchA',\n    toValues: function(color: Common.Color.Color): [string, string, string, string] {\n      const lchColor = color.as(Common.Color.Format.OKLCH);\n      return roundAndStringify([lchColor.l, lchColor.c, lchColor.h, lchColor.alpha ?? 1] as CanonicalParameters);\n    },\n    fromValues: function(values: [string, string, string, string]): Common.Color.Color |\n        null {\n          return Common.Color.parse(`oklch(${functionParamsText(values)})`);\n        },\n  },\n  [Common.Color.Format.LAB]: {\n    label: 'labA',\n    toValues: function(color: Common.Color.Color): [string, string, string, string] {\n      const labColor = color.as(Common.Color.Format.LAB);\n      return roundAndStringify([labColor.l, labColor.a, labColor.b, labColor.alpha ?? 1] as CanonicalParameters);\n    },\n    fromValues: function(values: [string, string, string, string]): Common.Color.Color |\n        null {\n          return Common.Color.parse(`lab(${functionParamsText(values)})`);\n        },\n  },\n  [Common.Color.Format.OKLAB]: {\n    label: 'labA',\n    toValues: function(color: Common.Color.Color): [string, string, string, string] {\n      const labColor = color.as(Common.Color.Format.OKLAB);\n      return roundAndStringify([labColor.l, labColor.a, labColor.b, labColor.alpha ?? 1] as CanonicalParameters);\n    },\n    fromValues: function(values: [string, string, string, string]): Common.Color.Color |\n        null {\n          return Common.Color.parse(`oklab(${functionParamsText(values)})`);\n        },\n  },\n  [Common.Color.Format.SRGB]: {\n    label: 'RGBA',\n    toValues: function(color: Common.Color.Color): [string, string, string, string] {\n      const srgbColor = color.as(Common.Color.Format.SRGB);\n      return roundAndStringify([srgbColor.p0, srgbColor.p1, srgbColor.p2, srgbColor.alpha ?? 1] as CanonicalParameters);\n    },\n    fromValues: function(values: [string, string, string, string]): Common.Color.Color |\n        null {\n          return Common.Color.parse(`color(${Common.Color.Format.SRGB} ${functionParamsText(values)})`);\n        },\n  },\n  [Common.Color.Format.SRGB_LINEAR]: {\n    label: 'RGBA',\n    toValues: function(color: Common.Color.Color): [string, string, string, string] {\n      const srgbLinearColor = color.as(Common.Color.Format.SRGB_LINEAR);\n      return roundAndStringify(\n          [srgbLinearColor.p0, srgbLinearColor.p1, srgbLinearColor.p2, srgbLinearColor.alpha ?? 1] as\n          CanonicalParameters);\n    },\n    fromValues: function(values: [string, string, string, string]): Common.Color.Color |\n        null {\n          return Common.Color.parse(`color(${Common.Color.Format.SRGB_LINEAR} ${functionParamsText(values)})`);\n        },\n  },\n  [Common.Color.Format.DISPLAY_P3]: {\n    label: 'RGBA',\n    toValues(color: Common.Color.Color): [string, string, string, string] {\n      const displayP3Color = color.as(Common.Color.Format.DISPLAY_P3);\n      return roundAndStringify([displayP3Color.p0, displayP3Color.p1, displayP3Color.p2, 1]);\n    },\n    fromValues(values: [string, string, string, string]): Common.Color.Color |\n        null {\n          return Common.Color.parse(`color(${Common.Color.Format.DISPLAY_P3} ${functionParamsText(values)})`);\n        },\n  },\n  [Common.Color.Format.A98_RGB]: {\n    label: 'RGBA',\n    toValues: function(color: Common.Color.Color): [string, string, string, string] {\n      const a98Color = color.as(Common.Color.Format.A98_RGB);\n      return roundAndStringify([a98Color.p0, a98Color.p1, a98Color.p2, a98Color.alpha ?? 1] as CanonicalParameters);\n    },\n    fromValues: function(values: [string, string, string, string]): Common.Color.Color |\n        null {\n          return Common.Color.parse(`color(${Common.Color.Format.A98_RGB} ${functionParamsText(values)})`);\n        },\n  },\n  [Common.Color.Format.PROPHOTO_RGB]: {\n    label: 'RGBA',\n    toValues: function(color: Common.Color.Color): [string, string, string, string] {\n      const proPhotoRGBColor = color.as(Common.Color.Format.PROPHOTO_RGB);\n      return roundAndStringify(\n          [proPhotoRGBColor.p0, proPhotoRGBColor.p1, proPhotoRGBColor.p2, proPhotoRGBColor.alpha ?? 1] as\n          CanonicalParameters);\n    },\n    fromValues: function(values: [string, string, string, string]): Common.Color.Color |\n        null {\n          return Common.Color.parse(`color(${Common.Color.Format.PROPHOTO_RGB} ${functionParamsText(values)})`);\n        },\n  },\n  [Common.Color.Format.REC_2020]: {\n    label: 'RGBA',\n    toValues: function(color: Common.Color.Color): [string, string, string, string] {\n      const rec2020Color = color.as(Common.Color.Format.REC_2020);\n      return roundAndStringify(\n          [rec2020Color.p0, rec2020Color.p1, rec2020Color.p2, rec2020Color.alpha ?? 1] as CanonicalParameters);\n    },\n    fromValues: function(values: [string, string, string, string]): Common.Color.Color |\n        null {\n          return Common.Color.parse(`color(${Common.Color.Format.REC_2020} ${functionParamsText(values)})`);\n        },\n  },\n  [Common.Color.Format.XYZ]: {\n    label: 'xyzA',\n    toValues: function(color: Common.Color.Color): [string, string, string, string] {\n      const xyzColor = color.as(Common.Color.Format.XYZ);\n      return roundAndStringify([xyzColor.p0, xyzColor.p1, xyzColor.p2, xyzColor.alpha ?? 1] as CanonicalParameters);\n    },\n    fromValues: function(values: [string, string, string, string]): Common.Color.Color |\n        null {\n          return Common.Color.parse(`color(${Common.Color.Format.XYZ} ${functionParamsText(values)})`);\n        },\n  },\n  [Common.Color.Format.XYZ_D50]: {\n    label: 'xyzA',\n    toValues: function(color: Common.Color.Color): [string, string, string, string] {\n      const xyzColor = color.as(Common.Color.Format.XYZ_D50);\n      return roundAndStringify([xyzColor.p0, xyzColor.p1, xyzColor.p2, xyzColor.alpha ?? 1] as CanonicalParameters);\n    },\n    fromValues: function(values: [string, string, string, string]): Common.Color.Color |\n        null {\n          return Common.Color.parse(`color(${Common.Color.Format.XYZ_D50} ${functionParamsText(values)})`);\n        },\n  },\n  [Common.Color.Format.XYZ_D65]: {\n    label: 'xyzA',\n    toValues: function(color: Common.Color.Color): [string, string, string, string] {\n      const xyzColor = color.as(Common.Color.Format.XYZ_D65);\n      return roundAndStringify([xyzColor.p0, xyzColor.p1, xyzColor.p2, xyzColor.alpha ?? 1] as CanonicalParameters);\n    },\n    fromValues: function(values: [string, string, string, string]): Common.Color.Color |\n        null {\n          return Common.Color.parse(`color(${Common.Color.Format.XYZ_D65} ${functionParamsText(values)})`);\n        },\n  },\n};\n", "// Copyright 2017 The Chromium Authors\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\n/* eslint-disable rulesdir/no-imperative-dom-api */\n\nimport '../../legacy.js';\n\nimport * as Common from '../../../../core/common/common.js';\nimport * as Host from '../../../../core/host/host.js';\nimport * as i18n from '../../../../core/i18n/i18n.js';\nimport * as Platform from '../../../../core/platform/platform.js';\nimport * as Root from '../../../../core/root/root.js';\nimport * as IconButton from '../../../../ui/components/icon_button/icon_button.js';\nimport * as UI from '../../legacy.js';\n\nimport {type ContrastInfo, Events as ContrastInfoEvents} from './ContrastInfo.js';\n\nconst UIStrings = {\n  /**\n   * @description Label for when no contrast information is available in the color picker\n   */\n  noContrastInformationAvailable: 'No contrast information available',\n  /**\n   * @description Text of a DOM element in Contrast Details of the Color Picker\n   */\n  contrastRatio: 'Contrast ratio',\n  /**\n   * @description Text to show more content\n   */\n  showMore: 'Show more',\n  /**\n   * @description Choose bg color text content in Contrast Details of the Color Picker\n   */\n  pickBackgroundColor: 'Pick background color',\n  /**\n   * @description Tooltip text that appears when hovering over largeicon eyedropper button in Contrast Details of the Color Picker\n   */\n  toggleBackgroundColorPicker: 'Toggle background color picker',\n  /**\n   * @description Text of a button in Contrast Details of the Color Picker\n   * @example {rgba(0 0 0 / 100%) } PH1\n   */\n  useSuggestedColorStoFixLow: 'Use suggested color {PH1}to fix low contrast',\n  /**\n   * @description Label for the APCA contrast in Color Picker\n   */\n  apca: 'APCA',\n  /**\n   * @description Label aa text content in Contrast Details of the Color Picker\n   */\n  aa: 'AA',\n  /**\n   * @description Text that starts with a colon and includes a placeholder\n   * @example {3.0} PH1\n   */\n  placeholderWithColon: ': {PH1}',\n  /**\n   * @description Label aaa text content in Contrast Details of the Color Picker\n   */\n  aaa: 'AAA',\n  /**\n   * @description Text to show less content\n   */\n  showLess: 'Show less',\n} as const;\nconst str_ = i18n.i18n.registerUIStrings('ui/legacy/components/color_picker/ContrastDetails.ts', UIStrings);\nconst i18nString = i18n.i18n.getLocalizedString.bind(undefined, str_);\nexport class ContrastDetails extends Common.ObjectWrapper.ObjectWrapper<EventTypes> {\n  private contrastInfo: ContrastInfo;\n  readonly #element: HTMLElement;\n  private readonly toggleMainColorPicker:\n      (arg0?: boolean|undefined, arg1?: Common.EventTarget.EventTargetEvent<unknown>|undefined) => void;\n  private readonly expandedChangedCallback: () => void;\n  private readonly colorSelectedCallback: (arg0: Common.Color.Legacy) => void;\n  #expanded: boolean;\n  private passesAA: boolean;\n  private contrastUnknown: boolean;\n  #visible: boolean;\n  private readonly noContrastInfoAvailable: Element;\n  private readonly contrastValueBubble: HTMLElement;\n  private contrastValue: HTMLElement;\n  private readonly contrastValueBubbleIcons: Node[];\n  private readonly expandButton: UI.Toolbar.ToolbarButton;\n  private readonly expandedDetails: HTMLElement;\n  private readonly contrastThresholds: HTMLElement;\n  private readonly contrastAA: HTMLElement;\n  private contrastPassFailAA: HTMLElement;\n  private readonly contrastAAA: HTMLElement;\n  private contrastPassFailAAA: HTMLElement;\n  private readonly contrastAPCA: HTMLElement;\n  private contrastPassFailAPCA: HTMLElement;\n  private readonly chooseBgColor: HTMLElement;\n  private bgColorPickerButton: UI.Toolbar.ToolbarToggle;\n  private readonly bgColorPickedBound:\n      (event: Common.EventTarget.EventTargetEvent<Host.InspectorFrontendHostAPI.EyeDropperPickedColorEvent>) => void;\n  private readonly bgColorSwatch: Swatch;\n  constructor(\n      contrastInfo: ContrastInfo, contentElement: Element,\n      toggleMainColorPickerCallback:\n          (arg0?: boolean|undefined, arg1?: Common.EventTarget.EventTargetEvent<unknown>|undefined) => void,\n      expandedChangedCallback: () => void, colorSelectedCallback: (arg0: Common.Color.Legacy) => void) {\n    super();\n    this.contrastInfo = contrastInfo;\n    this.#element = contentElement.createChild('div', 'spectrum-contrast-details collapsed');\n\n    this.toggleMainColorPicker = toggleMainColorPickerCallback;\n\n    this.expandedChangedCallback = expandedChangedCallback;\n\n    this.colorSelectedCallback = colorSelectedCallback;\n\n    this.#expanded = false;\n\n    this.passesAA = true;\n\n    this.contrastUnknown = false;\n\n    // This will not be visible if we don't get ContrastInfo,\n    // e.g. for a non-font color property such as border-color.\n    this.#visible = false;\n\n    // No contrast info message is created to show if it's not possible to provide the extended details.\n\n    this.noContrastInfoAvailable = contentElement.createChild('div', 'no-contrast-info-available');\n    this.noContrastInfoAvailable.textContent = i18nString(UIStrings.noContrastInformationAvailable);\n    this.noContrastInfoAvailable.classList.add('hidden');\n\n    const contrastValueRow = this.#element.createChild('div');\n    contrastValueRow.addEventListener('click', this.topRowClicked.bind(this));\n    const contrastValueRowContents = contrastValueRow.createChild('div', 'container');\n    UI.UIUtils.createTextChild(contrastValueRowContents, i18nString(UIStrings.contrastRatio));\n\n    this.contrastValueBubble = contrastValueRowContents.createChild('span', 'contrast-details-value');\n    this.contrastValue = this.contrastValueBubble.createChild('span');\n    this.contrastValueBubbleIcons = [];\n    this.contrastValueBubbleIcons.push(this.contrastValueBubble.appendChild(IconButton.Icon.create('checkmark')));\n    this.contrastValueBubbleIcons.push(this.contrastValueBubble.appendChild(IconButton.Icon.create('check-double')));\n    this.contrastValueBubbleIcons.push(this.contrastValueBubble.appendChild(IconButton.Icon.create('clear')));\n    this.contrastValueBubbleIcons.forEach(button => button.addEventListener('click', (event: Event) => {\n      ContrastDetails.showHelp();\n      event.consume(false);\n    }));\n\n    const expandToolbar = contrastValueRowContents.createChild('devtools-toolbar', 'expand');\n    this.expandButton = new UI.Toolbar.ToolbarButton(i18nString(UIStrings.showMore), 'chevron-down');\n    this.expandButton.addEventListener(UI.Toolbar.ToolbarButton.Events.CLICK, this.expandButtonClicked.bind(this));\n    UI.ARIAUtils.setExpanded(this.expandButton.element, false);\n    expandToolbar.appendToolbarItem(this.expandButton);\n\n    this.expandedDetails = this.#element.createChild('div', 'expanded-details');\n    UI.ARIAUtils.setControls(this.expandButton.element, this.expandedDetails);\n\n    this.contrastThresholds = this.expandedDetails.createChild('div', 'contrast-thresholds');\n\n    this.contrastAA = this.contrastThresholds.createChild('div', 'contrast-threshold');\n    this.contrastPassFailAA = this.contrastAA.createChild('div', 'contrast-pass-fail');\n\n    this.contrastAAA = this.contrastThresholds.createChild('div', 'contrast-threshold');\n    this.contrastPassFailAAA = this.contrastAAA.createChild('div', 'contrast-pass-fail');\n\n    this.contrastAPCA = this.contrastThresholds.createChild('div', 'contrast-threshold');\n    this.contrastPassFailAPCA = this.contrastAPCA.createChild('div', 'contrast-pass-fail');\n\n    this.chooseBgColor = this.expandedDetails.createChild('div', 'contrast-choose-bg-color');\n    this.chooseBgColor.textContent = i18nString(UIStrings.pickBackgroundColor);\n\n    const bgColorContainer = this.expandedDetails.createChild('div', 'background-color');\n\n    const pickerToolbar = bgColorContainer.createChild('devtools-toolbar', 'spectrum-eye-dropper');\n    this.bgColorPickerButton = new UI.Toolbar.ToolbarToggle(\n        i18nString(UIStrings.toggleBackgroundColorPicker), 'color-picker', 'color-picker-filled');\n    this.bgColorPickerButton.addEventListener(\n        UI.Toolbar.ToolbarButton.Events.CLICK, this.#toggleBackgroundColorPicker.bind(this, undefined, true));\n    pickerToolbar.appendToolbarItem(this.bgColorPickerButton);\n    this.bgColorPickedBound = this.bgColorPicked.bind(this);\n\n    this.bgColorSwatch = new Swatch(bgColorContainer);\n\n    this.contrastInfo.addEventListener(ContrastInfoEvents.CONTRAST_INFO_UPDATED, this.update.bind(this));\n  }\n\n  private showNoContrastInfoAvailableMessage(): void {\n    this.noContrastInfoAvailable.classList.remove('hidden');\n  }\n\n  private hideNoContrastInfoAvailableMessage(): void {\n    this.noContrastInfoAvailable.classList.add('hidden');\n  }\n\n  private computeSuggestedColor(threshold: string): Common.Color.Legacy|null|undefined {\n    const fgColor = this.contrastInfo.color();\n    const bgColor = this.contrastInfo.bgColor();\n    if (!fgColor || !bgColor) {\n      return;\n    }\n\n    if (threshold === 'APCA') {\n      const requiredContrast = this.contrastInfo.contrastRatioAPCAThreshold();\n      if (requiredContrast === null) {\n        return;\n      }\n      // We add 1% to the min required contrast to make sure we are over the limit.\n      return Common.Color.findFgColorForContrastAPCA(fgColor, bgColor, requiredContrast + 1);\n    }\n\n    const requiredContrast = this.contrastInfo.contrastRatioThreshold(threshold);\n    if (!requiredContrast) {\n      return;\n    }\n\n    // We add a bit to the required contrast to make sure we are over the limit.\n    return Common.Color.findFgColorForContrast(fgColor, bgColor, requiredContrast + 0.1);\n  }\n\n  private onSuggestColor(threshold: string): void {\n    const color = this.computeSuggestedColor(threshold);\n    if (color) {\n      this.colorSelectedCallback(color);\n    }\n  }\n\n  private createFixColorButton(parent: Element, suggestedColor: Common.Color.Color): HTMLElement {\n    const button = parent.createChild('button', 'contrast-fix-button');\n    const formattedColor = suggestedColor.asString(this.contrastInfo.colorFormat());\n    const suggestedColorString = formattedColor ? formattedColor + ' ' : '';\n    const label = i18nString(UIStrings.useSuggestedColorStoFixLow, {PH1: suggestedColorString});\n    UI.ARIAUtils.setLabel(button, label);\n    UI.Tooltip.Tooltip.install(button, label);\n    button.tabIndex = 0;\n    button.style.backgroundColor = suggestedColorString;\n    return button;\n  }\n\n  private update(): void {\n    if (this.contrastInfo.isNull()) {\n      this.showNoContrastInfoAvailableMessage();\n      this.setVisible(false);\n      return;\n    }\n\n    this.setVisible(true);\n    this.hideNoContrastInfoAvailableMessage();\n\n    const isAPCAEnabled = Root.Runtime.experiments.isEnabled('apca');\n\n    const fgColor = this.contrastInfo.color();\n    const bgColor = this.contrastInfo.bgColor();\n\n    if (isAPCAEnabled) {\n      const apcaContrastRatio = this.contrastInfo.contrastRatioAPCA();\n\n      if (apcaContrastRatio === null || !bgColor || !fgColor) {\n        this.contrastUnknown = true;\n        this.contrastValue.textContent = '';\n        this.contrastValueBubble.classList.add('contrast-unknown');\n        this.chooseBgColor.classList.remove('hidden');\n        this.contrastThresholds.classList.add('hidden');\n        this.showNoContrastInfoAvailableMessage();\n        return;\n      }\n\n      this.contrastUnknown = false;\n      this.chooseBgColor.classList.add('hidden');\n      this.contrastThresholds.classList.remove('hidden');\n      this.contrastValueBubble.classList.remove('contrast-unknown');\n      this.contrastValue.textContent = `${Platform.NumberUtilities.floor(apcaContrastRatio, 2)}%`;\n\n      const apcaThreshold = this.contrastInfo.contrastRatioAPCAThreshold();\n      const passesAPCA = apcaContrastRatio && apcaThreshold ? Math.abs(apcaContrastRatio) >= apcaThreshold : false;\n      this.contrastPassFailAPCA.removeChildren();\n      const labelAPCA = this.contrastPassFailAPCA.createChild('span', 'contrast-link-label');\n      labelAPCA.textContent = i18nString(UIStrings.apca);\n      if (apcaThreshold !== null) {\n        this.contrastPassFailAPCA.createChild('span').textContent = `: ${apcaThreshold.toFixed(2)}%`;\n      }\n      if (passesAPCA) {\n        const iconCheckmark = createIconCheckmark();\n        this.contrastPassFailAPCA.appendChild(iconCheckmark);\n      } else {\n        const iconNo = createIconNo();\n        this.contrastPassFailAPCA.appendChild(iconNo);\n        const suggestedColor = this.computeSuggestedColor('APCA');\n        if (suggestedColor) {\n          const fixAPCA = this.createFixColorButton(this.contrastPassFailAPCA, suggestedColor);\n          fixAPCA.addEventListener('click', () => this.onSuggestColor('APCA'));\n        }\n      }\n      labelAPCA.addEventListener('click', (_event: Event) => ContrastDetails.showHelp());\n      this.#element.classList.toggle('contrast-fail', !passesAPCA);\n      this.contrastValueBubble.classList.toggle('contrast-aa', passesAPCA);\n      this.bgColorSwatch.setColors(fgColor, bgColor);\n      return;\n    }\n\n    const contrastRatio = this.contrastInfo.contrastRatio();\n\n    if (!contrastRatio || !bgColor || !fgColor) {\n      this.contrastUnknown = true;\n      this.contrastValue.textContent = '';\n      this.contrastValueBubble.classList.add('contrast-unknown');\n      this.chooseBgColor.classList.remove('hidden');\n      this.contrastThresholds.classList.add('hidden');\n      this.showNoContrastInfoAvailableMessage();\n      return;\n    }\n\n    this.contrastUnknown = false;\n    this.chooseBgColor.classList.add('hidden');\n    this.contrastThresholds.classList.remove('hidden');\n    this.contrastValueBubble.classList.remove('contrast-unknown');\n    this.contrastValue.textContent = String(Platform.NumberUtilities.floor(contrastRatio, 2));\n\n    this.bgColorSwatch.setColors(fgColor, bgColor);\n\n    // In greater then comparisons we can substite null with 0.\n    const aa = this.contrastInfo.contrastRatioThreshold('aa') || 0;\n    this.passesAA = (this.contrastInfo.contrastRatio() || 0) >= aa;\n    this.contrastPassFailAA.removeChildren();\n    const labelAA = this.contrastPassFailAA.createChild('span', 'contrast-link-label');\n    labelAA.textContent = i18nString(UIStrings.aa);\n    this.contrastPassFailAA.createChild('span').textContent =\n        i18nString(UIStrings.placeholderWithColon, {PH1: aa.toFixed(1)});\n    if (this.passesAA) {\n      const iconCheckmark = createIconCheckmark();\n      this.contrastPassFailAA.appendChild(iconCheckmark);\n    } else {\n      const iconNo = createIconNo();\n      this.contrastPassFailAA.appendChild(iconNo);\n      const suggestedColor = this.computeSuggestedColor('aa');\n      if (suggestedColor) {\n        const fixAA = this.createFixColorButton(this.contrastPassFailAA, suggestedColor);\n        fixAA.addEventListener('click', () => this.onSuggestColor('aa'));\n      }\n    }\n\n    // In greater then comparisons we can substite null with 0.\n    const aaa = this.contrastInfo.contrastRatioThreshold('aaa') || 0;\n    const passesAAA = (this.contrastInfo.contrastRatio() || 0) >= aaa;\n    this.contrastPassFailAAA.removeChildren();\n    const labelAAA = this.contrastPassFailAAA.createChild('span', 'contrast-link-label');\n    labelAAA.textContent = i18nString(UIStrings.aaa);\n    this.contrastPassFailAAA.createChild('span').textContent =\n        i18nString(UIStrings.placeholderWithColon, {PH1: aaa.toFixed(1)});\n    if (passesAAA) {\n      const iconCheckmark = createIconCheckmark();\n      this.contrastPassFailAAA.appendChild(iconCheckmark);\n    } else {\n      const iconNo = createIconNo();\n      this.contrastPassFailAAA.appendChild(iconNo);\n      const suggestedColor = this.computeSuggestedColor('aaa');\n      if (suggestedColor) {\n        const fixAAA = this.createFixColorButton(this.contrastPassFailAAA, suggestedColor);\n        fixAAA.addEventListener('click', () => this.onSuggestColor('aaa'));\n      }\n    }\n\n    [labelAA, labelAAA].forEach(e => e.addEventListener('click', () => ContrastDetails.showHelp()));\n\n    this.#element.classList.toggle('contrast-fail', !this.passesAA);\n    // show checkmark icon when passes AA, but not AAA\n    this.contrastValueBubble.classList.toggle('contrast-aa', this.passesAA && !passesAAA);\n    this.contrastValueBubble.classList.toggle('contrast-aaa', passesAAA);\n  }\n\n  private static showHelp(): void {\n    UI.UIUtils.openInNewTab('https://web.dev/color-and-contrast-accessibility/');\n  }\n\n  setVisible(visible: boolean): void {\n    this.#visible = visible;\n    this.#element.classList.toggle('hidden', !visible);\n  }\n\n  visible(): boolean {\n    return this.#visible;\n  }\n\n  element(): HTMLElement {\n    return this.#element;\n  }\n\n  private expandButtonClicked(): void {\n    const selection = this.contrastValueBubble.getComponentSelection();\n    if (selection) {\n      selection.empty();\n    }\n    this.toggleExpanded();\n  }\n\n  private topRowClicked(event: Event): void {\n    const selection = this.contrastValueBubble.getComponentSelection();\n    if (selection) {\n      selection.empty();\n    }\n    this.toggleExpanded();\n    event.consume(true);\n  }\n\n  private toggleExpanded(): void {\n    this.#expanded = !this.#expanded;\n    UI.ARIAUtils.setExpanded(this.expandButton.element, this.#expanded);\n    this.#element.classList.toggle('collapsed', !this.#expanded);\n    if (this.#expanded) {\n      this.toggleMainColorPicker(false);\n      this.expandButton.setGlyph('chevron-up');\n      this.expandButton.setTitle(i18nString(UIStrings.showLess));\n      if (this.contrastUnknown) {\n        this.#toggleBackgroundColorPicker(true);\n      }\n    } else {\n      this.#toggleBackgroundColorPicker(false);\n      this.expandButton.setGlyph('chevron-down');\n      this.expandButton.setTitle(i18nString(UIStrings.showMore));\n    }\n    this.expandedChangedCallback();\n  }\n\n  collapse(): void {\n    this.#element.classList.remove('expanded');\n    this.#toggleBackgroundColorPicker(false);\n    this.toggleMainColorPicker(false);\n  }\n\n  expanded(): boolean {\n    return this.#expanded;\n  }\n\n  backgroundColorPickerEnabled(): boolean {\n    return this.bgColorPickerButton.isToggled();\n  }\n\n  toggleBackgroundColorPicker(enabled: boolean): void {\n    this.#toggleBackgroundColorPicker(enabled, false);\n  }\n\n  #toggleBackgroundColorPicker(enabled?: boolean, shouldTriggerEvent: boolean|undefined = true): void {\n    if (enabled === undefined) {\n      enabled = this.bgColorPickerButton.isToggled();\n    }\n\n    if (shouldTriggerEvent) {\n      this.dispatchEventToListeners(Events.BACKGROUND_COLOR_PICKER_WILL_BE_TOGGLED, enabled);\n    }\n\n    Host.InspectorFrontendHost.InspectorFrontendHostInstance.setEyeDropperActive(enabled);\n    if (enabled) {\n      Host.InspectorFrontendHost.InspectorFrontendHostInstance.events.addEventListener(\n          Host.InspectorFrontendHostAPI.Events.EyeDropperPickedColor, this.bgColorPickedBound);\n    } else {\n      Host.InspectorFrontendHost.InspectorFrontendHostInstance.events.removeEventListener(\n          Host.InspectorFrontendHostAPI.Events.EyeDropperPickedColor, this.bgColorPickedBound);\n    }\n  }\n\n  private bgColorPicked({\n    data: rgbColor,\n  }: Common.EventTarget.EventTargetEvent<Host.InspectorFrontendHostAPI.EyeDropperPickedColorEvent>): void {\n    const rgba = [rgbColor.r, rgbColor.g, rgbColor.b, (rgbColor.a / 2.55 | 0) / 100];\n    const color = Common.Color.Legacy.fromRGBA(rgba);\n    this.contrastInfo.setBgColor(color);\n    this.#toggleBackgroundColorPicker(false);\n    this.bgColorPickerButton.toggled(false);\n    Host.InspectorFrontendHost.InspectorFrontendHostInstance.bringToFront();\n  }\n}\n\nexport const enum Events {\n  BACKGROUND_COLOR_PICKER_WILL_BE_TOGGLED = 'BackgroundColorPickerWillBeToggled',\n}\n\nexport interface EventTypes {\n  [Events.BACKGROUND_COLOR_PICKER_WILL_BE_TOGGLED]: boolean;\n}\n\nexport class Swatch {\n  private readonly swatchElement: Element;\n  private swatchInnerElement: HTMLElement;\n  private textPreview: HTMLElement;\n  constructor(parentElement: Element) {\n    this.swatchElement = parentElement.createChild('span', 'swatch contrast swatch-inner-white');\n    this.swatchInnerElement = this.swatchElement.createChild('span', 'swatch-inner');\n    this.textPreview = this.swatchElement.createChild('div', 'text-preview');\n    this.textPreview.textContent = 'Aa';\n  }\n\n  setColors(fgColor: Common.Color.Legacy, bgColor: Common.Color.Legacy): void {\n    this.textPreview.style.color = fgColor.asString(Common.Color.Format.RGBA);\n    this.swatchInnerElement.style.backgroundColor = bgColor.asString(Common.Color.Format.RGBA);\n    // Show border if the swatch is white.\n    this.swatchElement.classList.toggle('swatch-inner-white', bgColor.as(Common.Color.Format.HSL).l > 0.9);\n  }\n}\n\nfunction createIconCheckmark(): IconButton.Icon.Icon {\n  const icon = new IconButton.Icon.Icon();\n  icon.name = 'checkmark';\n  icon.style.color = 'var(--icon-checkmark-green)';\n  icon.style.width = 'var(--sys-size-9)';\n  icon.style.height = 'var(--sys-size-7)';\n  return icon;\n}\n\nfunction createIconNo(): IconButton.Icon.Icon {\n  const icon = new IconButton.Icon.Icon();\n  icon.name = 'clear';\n  icon.style.color = 'var(--icon-error)';\n  icon.classList.add('small');\n  return icon;\n}\n", "// Copyright 2017 The Chromium Authors\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\n\nimport * as Common from '../../../../core/common/common.js';\n\nexport class ContrastInfo extends Common.ObjectWrapper.ObjectWrapper<EventTypes> {\n  readonly #isNull: boolean;\n  #contrastRatio: number|null;\n  #contrastRatioAPCA: number|null;\n  private contrastRatioThresholds: Record<string, number>|null;\n  readonly #contrastRatioAPCAThreshold: number|null;\n  private fgColor: Common.Color.Legacy|null;\n  #bgColor: Common.Color.Legacy|null;\n  #colorFormat: Common.Color.Format|undefined;\n  constructor(contrastInfo: ContrastInfoType|null) {\n    super();\n    this.#isNull = true;\n    this.#contrastRatio = null;\n    this.#contrastRatioAPCA = null;\n    this.contrastRatioThresholds = null;\n    this.#contrastRatioAPCAThreshold = 0;\n    this.fgColor = null;\n    this.#bgColor = null;\n\n    if (!contrastInfo) {\n      return;\n    }\n\n    if (!contrastInfo.computedFontSize || !contrastInfo.computedFontWeight) {\n      return;\n    }\n\n    this.#isNull = false;\n    this.contrastRatioThresholds =\n        Common.ColorUtils.getContrastThreshold(contrastInfo.computedFontSize, contrastInfo.computedFontWeight);\n    this.#contrastRatioAPCAThreshold =\n        Common.ColorUtils.getAPCAThreshold(contrastInfo.computedFontSize, contrastInfo.computedFontWeight);\n\n    if (!contrastInfo.backgroundColors || contrastInfo.backgroundColors.length !== 1) {\n      return;\n    }\n    const bgColorText = contrastInfo.backgroundColors[0];\n    const bgColor = Common.Color.parse(bgColorText)?.asLegacyColor();\n    if (bgColor) {\n      this.#setBgColor(bgColor);\n    }\n  }\n\n  isNull(): boolean {\n    return this.#isNull;\n  }\n\n  setColor(fgColor: Common.Color.Legacy, colorFormat?: Common.Color.Format): void {\n    this.fgColor = fgColor;\n    this.#colorFormat = colorFormat;\n    this.updateContrastRatio();\n    this.dispatchEventToListeners(Events.CONTRAST_INFO_UPDATED);\n  }\n\n  colorFormat(): Common.Color.Format|undefined {\n    return this.#colorFormat;\n  }\n\n  color(): Common.Color.Legacy|null {\n    return this.fgColor;\n  }\n\n  contrastRatio(): number|null {\n    return this.#contrastRatio;\n  }\n\n  contrastRatioAPCA(): number|null {\n    return this.#contrastRatioAPCA;\n  }\n\n  contrastRatioAPCAThreshold(): number|null {\n    return this.#contrastRatioAPCAThreshold;\n  }\n\n  setBgColor(bgColor: Common.Color.Legacy): void {\n    this.#setBgColor(bgColor);\n    this.dispatchEventToListeners(Events.CONTRAST_INFO_UPDATED);\n  }\n\n  #setBgColor(bgColor: Common.Color.Legacy): void {\n    this.#bgColor = bgColor;\n\n    if (!this.fgColor) {\n      return;\n    }\n\n    const fgRGBA = this.fgColor.rgba();\n\n    // If we have a semi-transparent background color over an unknown\n    // background, draw the line for the \"worst case\" scenario: where\n    // the unknown background is the same color as the text.\n    if (bgColor.hasAlpha()) {\n      const blendedRGBA = Common.ColorUtils.blendColors(bgColor.rgba(), fgRGBA);\n      this.#bgColor = new Common.Color.Legacy(blendedRGBA, Common.Color.Format.RGBA);\n    }\n\n    this.#contrastRatio = Common.ColorUtils.contrastRatio(fgRGBA, this.#bgColor.rgba());\n    this.#contrastRatioAPCA = Common.ColorUtils.contrastRatioAPCA(this.fgColor.rgba(), this.#bgColor.rgba());\n  }\n\n  bgColor(): Common.Color.Legacy|null {\n    return this.#bgColor;\n  }\n\n  private updateContrastRatio(): void {\n    if (!this.#bgColor || !this.fgColor) {\n      return;\n    }\n    this.#contrastRatio = Common.ColorUtils.contrastRatio(this.fgColor.rgba(), this.#bgColor.rgba());\n    this.#contrastRatioAPCA = Common.ColorUtils.contrastRatioAPCA(this.fgColor.rgba(), this.#bgColor.rgba());\n  }\n\n  contrastRatioThreshold(level: string): number|null {\n    if (!this.contrastRatioThresholds) {\n      return null;\n    }\n    return this.contrastRatioThresholds[level];\n  }\n}\n\nexport const enum Events {\n  CONTRAST_INFO_UPDATED = 'ContrastInfoUpdated',\n}\n\nexport interface EventTypes {\n  [Events.CONTRAST_INFO_UPDATED]: void;\n}\n\nexport interface ContrastInfoType {\n  backgroundColors: string[]|null;\n  computedFontSize: string;\n  computedFontWeight: string;\n}\n", "// Copyright 2017 The Chromium Authors\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\n\nimport * as Common from '../../../../core/common/common.js';\nimport * as Root from '../../../../core/root/root.js';\nimport * as UI from '../../legacy.js';\n\nimport {type ContrastInfo, Events} from './ContrastInfo.js';\n\nexport class ContrastOverlay {\n  private contrastInfo: ContrastInfo;\n  private visible: boolean;\n  private readonly contrastRatioSVG: Element;\n  private readonly contrastRatioLines: Map<string, Element>;\n  private width: number;\n  private height: number;\n  private readonly contrastRatioLineBuilder: ContrastRatioLineBuilder;\n  private readonly contrastRatioLinesThrottler: Common.Throttler.Throttler;\n  private readonly drawContrastRatioLinesBound: () => Promise<void>;\n  constructor(contrastInfo: ContrastInfo, colorElement: Element) {\n    this.contrastInfo = contrastInfo;\n\n    this.visible = false;\n\n    this.contrastRatioSVG = UI.UIUtils.createSVGChild(colorElement, 'svg', 'spectrum-contrast-container fill');\n    this.contrastRatioLines = new Map();\n    if (Root.Runtime.experiments.isEnabled('apca')) {\n      this.contrastRatioLines.set(\n          'APCA', UI.UIUtils.createSVGChild(this.contrastRatioSVG, 'path', 'spectrum-contrast-line'));\n    } else {\n      this.contrastRatioLines.set(\n          'aa', UI.UIUtils.createSVGChild(this.contrastRatioSVG, 'path', 'spectrum-contrast-line'));\n      this.contrastRatioLines.set(\n          'aaa', UI.UIUtils.createSVGChild(this.contrastRatioSVG, 'path', 'spectrum-contrast-line'));\n    }\n\n    this.width = 0;\n    this.height = 0;\n\n    this.contrastRatioLineBuilder = new ContrastRatioLineBuilder(this.contrastInfo);\n\n    this.contrastRatioLinesThrottler = new Common.Throttler.Throttler(0);\n    this.drawContrastRatioLinesBound = this.drawContrastRatioLines.bind(this);\n\n    this.contrastInfo.addEventListener(Events.CONTRAST_INFO_UPDATED, this.update.bind(this));\n  }\n\n  private update(): void {\n    if (!this.visible || this.contrastInfo.isNull()) {\n      return;\n    }\n    if (Root.Runtime.experiments.isEnabled('apca') && this.contrastInfo.contrastRatioAPCA() === null) {\n      return;\n    }\n    if (!this.contrastInfo.contrastRatio()) {\n      return;\n    }\n    void this.contrastRatioLinesThrottler.schedule(this.drawContrastRatioLinesBound);\n  }\n\n  setDimensions(width: number, height: number): void {\n    this.width = width;\n    this.height = height;\n    this.update();\n  }\n\n  setVisible(visible: boolean): void {\n    this.visible = visible;\n    this.contrastRatioSVG.classList.toggle('hidden', !visible);\n    this.update();\n  }\n\n  private async drawContrastRatioLines(): Promise<void> {\n    for (const [level, element] of this.contrastRatioLines) {\n      const path = this.contrastRatioLineBuilder.drawContrastRatioLine(this.width, this.height, level);\n      if (path) {\n        element.setAttribute('d', path);\n      } else {\n        element.removeAttribute('d');\n      }\n    }\n  }\n}\n\nexport class ContrastRatioLineBuilder {\n  private readonly contrastInfo: ContrastInfo;\n  constructor(contrastInfo: ContrastInfo) {\n    this.contrastInfo = contrastInfo;\n  }\n\n  drawContrastRatioLine(width: number, height: number, level: string): string|null {\n    const isAPCA = Root.Runtime.experiments.isEnabled('apca');\n    const requiredContrast =\n        isAPCA ? this.contrastInfo.contrastRatioAPCAThreshold() : this.contrastInfo.contrastRatioThreshold(level);\n    if (!width || !height || requiredContrast === null) {\n      return null;\n    }\n\n    const dS = 0.02;\n    const H = 0;\n    const S = 1;\n    const V = 2;\n    const A = 3;\n\n    const color = this.contrastInfo.color();\n    const bgColor = this.contrastInfo.bgColor();\n    if (!color || !bgColor) {\n      return null;\n    }\n\n    const fgRGBA = color.rgba();\n    const fgHSVA = color.as(Common.Color.Format.HSL).hsva();\n    const bgRGBA = bgColor.rgba();\n    const bgLuminance = Common.ColorUtils.luminance(bgRGBA);\n    let blendedRGBA: number[] = Common.ColorUtils.blendColors(fgRGBA, bgRGBA);\n    const fgLuminance = Common.ColorUtils.luminance(blendedRGBA);\n    const fgIsLighter = fgLuminance > bgLuminance;\n    const desiredLuminance = isAPCA ?\n        Common.ColorUtils.desiredLuminanceAPCA(bgLuminance, requiredContrast, fgIsLighter) :\n        Common.Color.desiredLuminance(bgLuminance, requiredContrast, fgIsLighter);\n\n    if (isAPCA &&\n        Math.abs(Math.round(Common.ColorUtils.contrastRatioByLuminanceAPCA(desiredLuminance, bgLuminance))) <\n            requiredContrast) {\n      return null;\n    }\n\n    let lastV: number = fgHSVA[V];\n    let currentSlope = 0;\n    const candidateHSVA: Common.ColorUtils.Color4D = [fgHSVA[H], 0, 0, fgHSVA[A]];\n    let pathBuilder: string[] = [];\n    const candidateRGBA = Common.Color.hsva2rgba(candidateHSVA);\n    blendedRGBA = Common.ColorUtils.blendColors(candidateRGBA, bgRGBA);\n\n    let candidateLuminance: ((candidateHSVA: Common.ColorUtils.Color4D) => number)|\n        ((candidateHSVA: Common.ColorUtils.Color4D) => number) = (candidateHSVA: Common.ColorUtils.Color4D) => {\n          return Common.ColorUtils.luminance(\n              Common.ColorUtils.blendColors(Common.Color.Legacy.fromHSVA(candidateHSVA).rgba(), bgRGBA));\n        };\n\n    if (Root.Runtime.experiments.isEnabled('apca')) {\n      candidateLuminance = (candidateHSVA: Common.ColorUtils.Color4D) => {\n        return Common.ColorUtils.luminanceAPCA(\n            Common.ColorUtils.blendColors(Common.Color.Legacy.fromHSVA(candidateHSVA).rgba(), bgRGBA));\n      };\n    }\n\n    // Plot V for values of S such that the computed luminance approximates\n    // `desiredLuminance`, until no suitable value for V can be found, or the\n    // current value of S goes of out bounds.\n    let s;\n    for (s = 0; s < 1 + dS; s += dS) {\n      s = Math.min(1, s);\n      candidateHSVA[S] = s;\n\n      // Extrapolate the approximate next value for `v` using the approximate\n      // gradient of the curve.\n      candidateHSVA[V] = lastV + currentSlope * dS;\n\n      const v = Common.Color.approachColorValue(candidateHSVA, V, desiredLuminance, candidateLuminance);\n      if (v === null) {\n        break;\n      }\n\n      // Approximate the current gradient of the curve.\n      currentSlope = s === 0 ? 0 : (v - lastV) / dS;\n      lastV = v;\n\n      pathBuilder.push(pathBuilder.length ? 'L' : 'M');\n      pathBuilder.push((s * width).toFixed(2));\n      pathBuilder.push(((1 - v) * height).toFixed(2));\n    }\n\n    // If no suitable V value for an in-bounds S value was found, find the value\n    // of S such that V === 1 and add that to the path.\n    if (s < 1 + dS) {\n      s -= dS;\n      candidateHSVA[V] = 1;\n      s = Common.Color.approachColorValue(candidateHSVA, S, desiredLuminance, candidateLuminance);\n      if (s !== null) {\n        pathBuilder = pathBuilder.concat(['L', (s * width).toFixed(2), '-0.1']);\n      }\n    }\n    if (pathBuilder.length === 0) {\n      return null;\n    }\n    return pathBuilder.join(' ');\n  }\n}\n", "// Copyright 2023 The Chromium Authors\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\n\nimport * as Common from '../../../../core/common/common.js';\nimport * as i18n from '../../../../core/i18n/i18n.js';\nimport * as IconButton from '../../../components/icon_button/icon_button.js';\nimport * as UI from '../../legacy.js';\n\nconst UIStrings = {\n  /**\n   * @description Tooltip text describing that a color was clipped after conversion to match the target gamut\n   * @example {rgb(255 255 255)} PH1\n   */\n  colorClippedTooltipText: 'This color was clipped to match the format\\'s gamut. The actual result was {PH1}',\n} as const;\nconst str_ = i18n.i18n.registerUIStrings('ui/legacy/components/color_picker/FormatPickerContextMenu.ts', UIStrings);\nconst i18nString = i18n.i18n.getLocalizedString.bind(undefined, str_);\n\ntype OnSelectFn = (color: Common.Color.Color) => void;\n\nexport class FormatPickerContextMenu {\n  #color: Common.Color.Color;\n\n  constructor(color: Common.Color.Color) {\n    this.#color = color;\n  }\n\n  async show(e: Event, onSelect: OnSelectFn): Promise<void> {\n    const {\n      resolve,\n      promise: showPromise,\n    } = Promise.withResolvers<void>();\n\n    const legacyFormats = [\n      Common.Color.Format.HEX,\n      Common.Color.Format.HEXA,\n      Common.Color.Format.RGB,\n      Common.Color.Format.RGBA,\n      Common.Color.Format.HSL,\n      Common.Color.Format.HWB,\n    ];\n    const modernFormats = [\n      Common.Color.Format.LCH,\n      Common.Color.Format.OKLCH,\n      Common.Color.Format.LAB,\n      Common.Color.Format.OKLAB,\n      Common.Color.Format.SRGB,\n      Common.Color.Format.SRGB_LINEAR,\n      Common.Color.Format.DISPLAY_P3,\n      Common.Color.Format.A98_RGB,\n      Common.Color.Format.PROPHOTO_RGB,\n      Common.Color.Format.REC_2020,\n      Common.Color.Format.XYZ,\n      Common.Color.Format.XYZ_D50,\n      Common.Color.Format.XYZ_D65,\n    ];\n    const menu = new UI.ContextMenu.ContextMenu(e, {onSoftMenuClosed: () => resolve()});\n    const legacySection = menu.section('legacy');\n    const wideSection = menu.section('wide');\n    const colorFunctionSection = menu.section('color-function').appendSubMenuItem('color()', false, 'color').section();\n\n    if (!(this.#color instanceof Common.Color.Nickname)) {\n      const nickname = this.#color.asLegacyColor().nickname();\n      if (nickname) {\n        this.addColorToSection(nickname, legacySection, onSelect);\n      }\n    }\n\n    if (!(this.#color instanceof Common.Color.ShortHex)) {\n      const shortHex =\n          this.#color.as((this.#color.alpha ?? 1) === 1 ? Common.Color.Format.HEX : Common.Color.Format.HEXA)\n                            .shortHex();\n      if (shortHex) {\n        this.addColorToSection(shortHex, legacySection, onSelect);\n      }\n    }\n\n    for (const format of [...legacyFormats, ...modernFormats]) {\n      if (format === this.#color.format()) {\n        continue;\n      }\n      const newColor = this.#color.as(format);\n      const section = legacyFormats.includes(format)     ? legacySection :\n          newColor instanceof Common.Color.ColorFunction ? colorFunctionSection :\n                                                           wideSection;\n      this.addColorToSection(newColor, section, onSelect);\n    }\n\n    await menu.show();\n    await showPromise;\n  }\n\n  addColorToSection(newColor: Common.Color.Color, section: UI.ContextMenu.Section, onSelect: OnSelectFn): void {\n    if (newColor instanceof Common.Color.Legacy) {\n      const originalHasAlpha = (this.#color.alpha ?? 1) !== 1;\n      const isAlphaFormat = newColor.alpha !== null;\n\n      // When the original color has alpha, only print alpha legacy formats. Otherwise, only print non-alpha legacy\n      // formats.\n      if (isAlphaFormat !== originalHasAlpha) {\n        return;\n      }\n    }\n    const label = newColor.asString();\n    if (!label) {\n      return;\n    }\n    let icon = undefined;\n    if (newColor.isGamutClipped()) {\n      icon = new IconButton.Icon.Icon();\n      icon.name = 'warning';\n      icon.classList.add('medium');\n      icon.style.marginLeft = '1px';\n      icon.style.marginTop = '-1px';\n      icon.style.minWidth = '16px';\n      icon.style.minHeight = '16px';\n    }\n    const tooltip =\n        icon ? i18nString(UIStrings.colorClippedTooltipText, {PH1: newColor.getAsRawString() ?? 'none'}) : undefined;\n\n    const handler = (): void => onSelect(newColor);\n\n    section.appendItem(\n        label, handler,\n        {additionalElement: icon, tooltip, jslogContext: newColor.isGamutClipped() ? 'color' : 'clipped-color'});\n  }\n}\n", "// Copyright 2020 The Chromium Authors\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\n/* eslint-disable rulesdir/no-imperative-dom-api */\n\n/*\n * Copyright (C) 2011 Brian Grinstead All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions\n * are met:\n *\n * 1.  Redistributions of source code must retain the above copyright\n *     notice, this list of conditions and the following disclaimer.\n * 2.  Redistributions in binary form must reproduce the above copyright\n *     notice, this list of conditions and the following disclaimer in the\n *     documentation and/or other materials provided with the distribution.\n * 3.  Neither the name of Apple Computer, Inc. (\"Apple\") nor the names of\n *     its contributors may be used to endorse or promote products derived\n *     from this software without specific prior written permission.\n *\n * THIS SOFTWARE IS PROVIDED BY APPLE AND ITS CONTRIBUTORS \"AS IS\" AND ANY\n * EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL APPLE OR ITS CONTRIBUTORS BE LIABLE FOR ANY\n * DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF\n * THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */\n\nimport '../../legacy.js';\n\nimport * as Common from '../../../../core/common/common.js';\nimport * as Host from '../../../../core/host/host.js';\nimport * as i18n from '../../../../core/i18n/i18n.js';\nimport * as Platform from '../../../../core/platform/platform.js';\nimport * as SDK from '../../../../core/sdk/sdk.js';\nimport * as TextUtils from '../../../../models/text_utils/text_utils.js';\nimport * as IconButton from '../../../components/icon_button/icon_button.js';\nimport * as SrgbOverlay from '../../../components/srgb_overlay/srgb_overlay.js';\nimport * as VisualLogging from '../../../visual_logging/visual_logging.js';\nimport * as UI from '../../legacy.js';\n\nimport {colorFormatSpec, type SpectrumColorFormat} from './ColorFormatSpec.js';\nimport {ContrastDetails, Events as ContrastDetailsEvents} from './ContrastDetails.js';\nimport type {ContrastInfo} from './ContrastInfo.js';\nimport {ContrastOverlay} from './ContrastOverlay.js';\nimport {FormatPickerContextMenu} from './FormatPickerContextMenu.js';\nimport spectrumStyles from './spectrum.css.js';\n\nconst UIStrings = {\n  /**\n   * @description Tooltip text that appears when hovering over largeicon eyedropper button in Spectrum of the Color Picker\n   * @example {c} PH1\n   */\n  toggleColorPicker: 'Eye dropper [{PH1}]',\n  /**\n   * @description Aria label for hue slider in Color Picker\n   */\n  changeHue: 'Change hue',\n  /**\n   * @description Aria label for alpha slider in Color Picker. Alpha refers to the alpha channel of a\n   * color, and this tool allows the user to change the alpha value.\n   */\n  changeAlpha: 'Change alpha',\n  /**\n   * @description Aria label for HEX color format input\n   */\n  hex: 'HEX',\n  /**\n   * @description Aria label for color format switcher button in Color Picker\n   */\n  changeColorFormat: 'Change color format',\n  /**\n   * @description Screen reader reads this text when palette switcher button receives focus\n   */\n  previewPalettes: 'Preview palettes',\n  /**\n   * @description Tooltip text that appears when hovering over the largeicon add button in the Spectrum of the Color Picker\n   */\n  addToPalette: 'Add to palette',\n  /**\n   * @description Title text content in Spectrum of the Color Picker\n   */\n  colorPalettes: 'Color Palettes',\n  /**\n   * @description Label for close button in Color Picker\n   */\n  returnToColorPicker: 'Return to color picker',\n  /**\n   * @description Aria label which declares hex value of a swatch in the Color Picker\n   * @example {#969696} PH1\n   */\n  colorS: 'Color {PH1}',\n  /**\n   * @description Color element title in Spectrum of the Color Picker\n   * @example {#9c1724} PH1\n   */\n  longclickOrLongpressSpaceToShow: 'Long-click or long-press space to show alternate shades of {PH1}',\n  /**\n   * @description A context menu item in the Color Picker to organize the user-defined color palette (removes the user-defined color to which this action is performed)\"\n   */\n  removeColor: 'Remove color',\n  /**\n   * @description A context menu item in the Color Picker to organize the user-defined color palette (removes all user-defined colors to the right of the color to which this action is performed)\"\n   */\n  removeAllToTheRight: 'Remove all to the right',\n  /**\n   * @description A context menu item in the Color Picker to organize the user-defined color palette (removes all user-defined colors)\"\n   */\n  clearPalette: 'Clear palette',\n  /**\n   * @description Aria label for RGBA and HSLA color format inputs in Color Picker\n   * @example {R} PH1\n   * @example {RGBA} PH2\n   */\n  sInS: '{PH1} in {PH2}',\n  /**\n   * @description Swatch copy icon title in Spectrum of the Color Picker\n   */\n  copyColorToClipboard: 'Copy color to clipboard',\n  /**\n   * @description Aria text for the swatch position. Swatch is the color picker spectrum tool.\n   */\n  pressArrowKeysMessage:\n      'Press arrow keys with or without modifiers to move swatch position. Arrow key with Shift key moves position largely, with Ctrl key it is less and with Alt key it is even less',\n} as const;\nconst str_ = i18n.i18n.registerUIStrings('ui/legacy/components/color_picker/Spectrum.ts', UIStrings);\nconst i18nString = i18n.i18n.getLocalizedString.bind(undefined, str_);\nconst colorElementToMutable = new WeakMap<HTMLElement, boolean>();\nconst colorElementToColor = new WeakMap<HTMLElement, string>();\nconst srgbGamutFormats = [\n  Common.Color.Format.SRGB,\n  Common.Color.Format.RGB,\n  Common.Color.Format.HEX,\n  Common.Color.Format.HSL,\n  Common.Color.Format.HWB,\n];\n\nconst enum SpectrumGamut {\n  SRGB = 'srgb',\n  DISPLAY_P3 = 'display-p3',\n}\n\nconst IS_NATIVE_EYE_DROPPER_AVAILABLE = 'EyeDropper' in window;\n\nfunction doesFormatSupportDisplayP3(format: Common.Color.Format): boolean {\n  return !srgbGamutFormats.includes(format);\n}\n\nfunction convertColorFormat(colorFormat: Common.Color.Format): SpectrumColorFormat {\n  if (colorFormat === Common.Color.Format.RGBA) {\n    return Common.Color.Format.RGB;\n  }\n  if (colorFormat === Common.Color.Format.HSLA) {\n    return Common.Color.Format.HSL;\n  }\n  if (colorFormat === Common.Color.Format.HWBA) {\n    return Common.Color.Format.HWB;\n  }\n  if (colorFormat === Common.Color.Format.HEXA) {\n    return Common.Color.Format.HEX;\n  }\n\n  return colorFormat;\n}\n\n/**\n * HSV by itself, without a color space, doesn't map to a color and\n * it is usually interpreted as an sRGB color. However, it can also\n * represent colors in other color spaces since `HSV` -> `RGB` mapping\n * is not color space dependent. For example, color(display-p3 1 1 1) and rgb(1 1 1)\n * map to the same HSV values. The tricky thing is, `hsl()` syntax is interpreted\n * as it is in sRGB in CSS. So, when you convert those two colors and use as `hsl()`, it will\n * show an sRGB color. Though, if there was a function `color-hsl(<color-space> h s l)`\n * it was going to show the color in the color-space represented with `hsl`.\n * This function, gets the HSV values by interpreting them in the given gamut.\n **/\nfunction getHsvFromColor(gamut: SpectrumGamut, color: Common.Color.Color): Common.ColorUtils.Color4D {\n  switch (gamut) {\n    case SpectrumGamut.DISPLAY_P3: {\n      const displayP3color = color.as(Common.Color.Format.DISPLAY_P3);\n      return [\n        ...Common.Color.rgb2hsv([displayP3color.p0, displayP3color.p1, displayP3color.p2]),\n        displayP3color.alpha || 1,\n      ];\n    }\n    case SpectrumGamut.SRGB: {\n      return color.as(Common.Color.Format.HSL).hsva();\n    }\n  }\n}\n\n/** Interprets the given `hsva` values in the given gamut and returns the concrete `Color` object. **/\nfunction getColorFromHsva(gamut: SpectrumGamut, hsva: Common.ColorUtils.Color4D): Common.Color.Color {\n  const color: Common.Color.Legacy = Common.Color.Legacy.fromHSVA(hsva);\n  switch (gamut) {\n    case SpectrumGamut.DISPLAY_P3: {\n      const rgba = Common.Color.hsva2rgba(hsva);\n      return new Common.Color.ColorFunction(\n          Common.Color.Format.DISPLAY_P3, rgba[0], rgba[1], rgba[2], rgba[3], undefined);\n    }\n    case SpectrumGamut.SRGB: {\n      return color;\n    }\n  }\n}\n\nexport class Spectrum extends Common.ObjectWrapper.eventMixin<EventTypes, typeof UI.Widget.VBox>(UI.Widget.VBox) {\n  #color?: Common.Color.Color;\n  private gamut: SpectrumGamut = SpectrumGamut.SRGB;\n  private colorElement: HTMLElement;\n  private colorDragElement: HTMLElement;\n  private dragX: number;\n  private dragY: number;\n  private colorPickerButton: UI.Toolbar.ToolbarToggle;\n  private readonly swatch: Swatch;\n  private hueElement: HTMLElement;\n  private hueSlider: HTMLElement;\n  private readonly alphaElement: HTMLElement;\n  private alphaElementBackground: HTMLElement;\n  private alphaSlider: HTMLElement;\n  private displayContainer: HTMLElement;\n  private textValues: HTMLInputElement[];\n  private textLabels: HTMLElement;\n  private hexContainer: HTMLElement;\n  private hexValue: HTMLInputElement;\n  private readonly contrastInfo: ContrastInfo|undefined;\n  private srgbOverlay: SrgbOverlay.SrgbOverlay.SrgbOverlay;\n  private contrastOverlay: ContrastOverlay|undefined;\n  private contrastDetails: ContrastDetails|undefined;\n  private readonly contrastDetailsBackgroundColorPickerToggledBound:\n      ((event: Common.EventTarget.EventTargetEvent<boolean>) => void)|undefined;\n  private readonly palettes: Map<string, Palette>;\n  private readonly palettePanel: HTMLElement;\n  private palettePanelShowing: boolean;\n  private readonly paletteSectionContainer: HTMLElement;\n  private paletteContainer: HTMLElement;\n  private shadesContainer: HTMLElement;\n  private readonly deleteIconToolbar: UI.Toolbar.Toolbar;\n  private readonly deleteButton: UI.Toolbar.ToolbarButton;\n  private readonly addColorToolbar: UI.Toolbar.Toolbar;\n  private readonly colorPickedBound:\n      (event: Common.EventTarget.EventTargetEvent<Host.InspectorFrontendHostAPI.EyeDropperPickedColorEvent>) => void;\n  private hsv!: Common.ColorUtils.Color4D;\n  private hueAlphaWidth!: number;\n  dragWidth!: number;\n  dragHeight!: number;\n  private colorDragElementHeight!: number;\n  slideHelperWidth!: number;\n  private numPaletteRowsShown: number;\n  private selectedColorPalette!: Common.Settings.Setting<string>;\n  private customPaletteSetting!: Common.Settings.Setting<Palette>;\n  private colorOffset?: DOMRect;\n  private closeButton?: UI.Toolbar.ToolbarButton;\n  private paletteContainerMutable?: boolean;\n  private shadesCloseHandler?: (() => void);\n  private dragElement?: HTMLElement;\n  private dragHotSpotX?: number;\n  private dragHotSpotY?: number;\n  #colorName?: string;\n  private colorFormat: SpectrumColorFormat = Common.Color.Format.RGB;\n  private eyeDropperAbortController: AbortController|null = null;\n  private isFormatPickerShown = false;\n  // Used to represent how the current color\n  // should be stringified externally (emitted event etc.).\n  // For example, this is used when a color variable\n  // selected form the palettes. That time, we don't\n  // want to return the value of the variable but the\n  // actual variable string.\n  #colorString?: string;\n  constructor(contrastInfo?: ContrastInfo|null) {\n    super({useShadowDom: true});\n    this.registerRequiredCSS(spectrumStyles);\n\n    this.contentElement.tabIndex = 0;\n    this.contentElement.setAttribute(\n        'jslog', `${VisualLogging.dialog('colorPicker').parent('mapped').track({keydown: 'Enter|Escape'})}`);\n    this.colorElement = this.contentElement.createChild('div', 'spectrum-color');\n    this.colorElement.tabIndex = 0;\n    this.colorElement.setAttribute('jslog', `${VisualLogging.canvas('color').track({\n                                     click: true,\n                                     drag: true,\n                                     keydown: 'ArrowLeft|ArrowRight|ArrowDown|ArrowUp',\n                                   })}`);\n    this.setDefaultFocusedElement(this.colorElement);\n    this.colorElement.addEventListener('keydown', this.onSliderKeydown.bind(this, positionColor.bind(this)));\n    const swatchAriaText = i18nString(UIStrings.pressArrowKeysMessage);\n    UI.ARIAUtils.setLabel(this.colorElement, swatchAriaText);\n    UI.ARIAUtils.markAsApplication(this.colorElement);\n    this.colorDragElement = this.colorElement.createChild('div', 'spectrum-sat fill')\n                                .createChild('div', 'spectrum-val fill')\n                                .createChild('div', 'spectrum-dragger');\n    this.dragX = 0;\n    this.dragY = 0;\n\n    const toolsContainer = this.contentElement.createChild('div', 'spectrum-tools');\n    const toolbar = toolsContainer.createChild('devtools-toolbar', 'spectrum-eye-dropper');\n    const toggleEyeDropperShortcut =\n        UI.ShortcutRegistry.ShortcutRegistry.instance().shortcutsForAction('elements.toggle-eye-dropper');\n    const definedShortcutKey =\n        toggleEyeDropperShortcut[0]?.descriptors.flatMap(descriptor => descriptor.name.split(' + '))[0];\n\n    this.colorPickerButton = new UI.Toolbar.ToolbarToggle(\n        i18nString(UIStrings.toggleColorPicker, {PH1: definedShortcutKey || ''}), 'color-picker', 'color-picker-filled',\n        'color-eye-dropper');\n    this.colorPickerButton.setToggled(true);\n    this.colorPickerButton.addEventListener(\n        UI.Toolbar.ToolbarButton.Events.CLICK, this.toggleColorPicker.bind(this, undefined));\n    toolbar.appendToolbarItem(this.colorPickerButton);\n    this.colorPickerButton.element.setAttribute('jslog', `${VisualLogging.colorEyeDropper().track({click: true})}`);\n\n    this.swatch = new Swatch(toolsContainer);\n\n    this.hueElement = toolsContainer.createChild('div', 'spectrum-hue');\n    this.hueElement.setAttribute('jslog', `${VisualLogging.slider('hue').track({\n                                   click: true,\n                                   drag: true,\n                                   keydown: 'ArrowLeft|ArrowRight|ArrowDown|ArrowUp',\n                                 })}`);\n    this.hueElement.tabIndex = 0;\n    this.hueElement.addEventListener('keydown', this.onSliderKeydown.bind(this, positionHue.bind(this)));\n    UI.ARIAUtils.setLabel(this.hueElement, i18nString(UIStrings.changeHue));\n    UI.ARIAUtils.markAsSlider(this.hueElement, 0, 360);\n    this.hueSlider = this.hueElement.createChild('div', 'spectrum-slider');\n    this.alphaElement = toolsContainer.createChild('div', 'spectrum-alpha');\n    this.alphaElement.setAttribute('jslog', `${VisualLogging.slider('alpha').track({\n                                     click: true,\n                                     drag: true,\n                                     keydown: 'ArrowLeft|ArrowRight|ArrowDown|ArrowUp',\n                                   })}`);\n    this.alphaElement.tabIndex = 0;\n    this.alphaElement.addEventListener('keydown', this.onSliderKeydown.bind(this, positionAlpha.bind(this)));\n    UI.ARIAUtils.setLabel(this.alphaElement, i18nString(UIStrings.changeAlpha));\n    UI.ARIAUtils.markAsSlider(this.alphaElement, 0, 1);\n    this.alphaElementBackground = this.alphaElement.createChild('div', 'spectrum-alpha-background');\n    this.alphaSlider = this.alphaElement.createChild('div', 'spectrum-slider');\n\n    // RGBA/HSLA/HWBA display.\n    this.displayContainer = toolsContainer.createChild('div', 'spectrum-text source-code');\n    UI.ARIAUtils.markAsPoliteLiveRegion(this.displayContainer, true);\n    this.textValues = [];\n    for (let i = 0; i < 4; ++i) {\n      const inputValue = UI.UIUtils.createInput('spectrum-text-value');\n      inputValue.setAttribute(\n          'jslog', `${VisualLogging.value().track({change: true, keydown: 'ArrowUp|ArrowDown'}).context(i)}`);\n      this.displayContainer.appendChild(inputValue);\n      inputValue.maxLength = 4;\n      this.textValues.push(inputValue);\n      inputValue.addEventListener('keydown', this.inputChanged.bind(this), false);\n      inputValue.addEventListener('input', this.inputChanged.bind(this), false);\n      inputValue.addEventListener('wheel', this.inputChanged.bind(this), false);\n      inputValue.addEventListener('paste', this.pasted.bind(this), false);\n    }\n\n    this.textLabels = this.displayContainer.createChild('div', 'spectrum-text-label');\n\n    // HEX display.\n    this.hexContainer = toolsContainer.createChild('div', 'spectrum-text spectrum-text-hex source-code');\n    UI.ARIAUtils.markAsPoliteLiveRegion(this.hexContainer, true);\n    this.hexValue = UI.UIUtils.createInput('spectrum-text-value');\n    this.hexValue.setAttribute(\n        'jslog', `${VisualLogging.value('hex').track({keydown: 'ArrowUp|ArrowDown', change: true})}`);\n    this.hexContainer.appendChild(this.hexValue);\n    this.hexValue.maxLength = 9;\n    this.hexValue.addEventListener('keydown', this.inputChanged.bind(this), false);\n    this.hexValue.addEventListener('input', this.inputChanged.bind(this), false);\n    this.hexValue.addEventListener('wheel', this.inputChanged.bind(this), false);\n    this.hexValue.addEventListener('paste', this.pasted.bind(this), false);\n\n    const label = this.hexContainer.createChild('div', 'spectrum-text-label');\n    label.textContent = i18nString(UIStrings.hex);\n    UI.ARIAUtils.setLabel(this.hexValue, label.textContent);\n\n    const displaySwitcher = toolsContainer.createChild('button', 'spectrum-display-switcher spectrum-switcher');\n    displaySwitcher.setAttribute('jslog', `${VisualLogging.dropDown('color-format').track({click: true})}`);\n    appendSwitcherIcon(displaySwitcher);\n    UI.UIUtils.setTitle(displaySwitcher, i18nString(UIStrings.changeColorFormat));\n    displaySwitcher.tabIndex = 0;\n    displaySwitcher.addEventListener('click', (ev: MouseEvent) => {\n      void this.showFormatPicker(ev);\n    });\n\n    UI.UIUtils.installDragHandle(\n        this.hueElement, this.dragStart.bind(this, positionHue.bind(this)), positionHue.bind(this), null, 'ew-resize',\n        'crosshair');\n    UI.UIUtils.installDragHandle(\n        this.alphaElement, this.dragStart.bind(this, positionAlpha.bind(this)), positionAlpha.bind(this), null,\n        'ew-resize', 'crosshair');\n    UI.UIUtils.installDragHandle(\n        this.colorElement, this.dragStart.bind(this, positionColor.bind(this)), positionColor.bind(this), null, 'move',\n        'crosshair');\n\n    // Color contrast business.\n    if (contrastInfo) {\n      this.contrastInfo = contrastInfo;\n      this.contrastOverlay = new ContrastOverlay(this.contrastInfo, this.colorElement);\n      this.contrastDetails = new ContrastDetails(\n          this.contrastInfo, this.contentElement, this.toggleColorPicker.bind(this),\n          this.contrastPanelExpandedChanged.bind(this), this.colorSelected.bind(this));\n\n      this.contrastDetailsBackgroundColorPickerToggledBound =\n          this.contrastDetailsBackgroundColorPickerToggled.bind(this);\n    }\n\n    this.element.classList.add('flex-none');\n    this.palettes = new Map();\n    this.palettePanel = this.contentElement.createChild('div', 'palette-panel');\n    this.palettePanel.setAttribute('jslog', `${VisualLogging.section('palette-panel')}`);\n    this.palettePanelShowing = false;\n    this.paletteSectionContainer = this.contentElement.createChild('div', 'spectrum-palette-container');\n    this.paletteContainer = this.paletteSectionContainer.createChild('div', 'spectrum-palette');\n    this.paletteContainer.addEventListener('contextmenu', this.showPaletteColorContextMenu.bind(this, -1));\n    this.shadesContainer = this.contentElement.createChild('div', 'palette-color-shades hidden');\n    this.shadesContainer.setAttribute('jslog', `${VisualLogging.paletteColorShades()}`);\n    UI.UIUtils.installDragHandle(\n        this.paletteContainer, this.paletteDragStart.bind(this), this.paletteDrag.bind(this),\n        this.paletteDragEnd.bind(this), 'default');\n    const paletteSwitcher =\n        this.paletteSectionContainer.createChild('div', 'spectrum-palette-switcher spectrum-switcher');\n    paletteSwitcher.setAttribute('jslog', `${VisualLogging.dropDown('palette-switcher').track({click: true})}`);\n    appendSwitcherIcon(paletteSwitcher);\n    UI.UIUtils.setTitle(paletteSwitcher, i18nString(UIStrings.previewPalettes));\n    UI.ARIAUtils.markAsButton(paletteSwitcher);\n    paletteSwitcher.tabIndex = 0;\n    self.onInvokeElement(paletteSwitcher, event => {\n      this.togglePalettePanel(true);\n      event.consume(true);\n    });\n\n    this.deleteIconToolbar = document.createElement('devtools-toolbar');\n    this.deleteIconToolbar.classList.add('delete-color-toolbar');\n    this.deleteButton = new UI.Toolbar.ToolbarButton('', 'bin');\n    this.deleteIconToolbar.appendToolbarItem(this.deleteButton);\n\n    const overlay = this.contentElement.createChild('div', 'spectrum-overlay fill');\n    overlay.addEventListener('click', this.togglePalettePanel.bind(this, false));\n\n    this.addColorToolbar = document.createElement('devtools-toolbar');\n    this.addColorToolbar.classList.add('add-color-toolbar');\n    const addColorButton =\n        new UI.Toolbar.ToolbarButton(i18nString(UIStrings.addToPalette), 'plus', undefined, 'add-color');\n    addColorButton.addEventListener(UI.Toolbar.ToolbarButton.Events.CLICK, this.onAddColorMousedown.bind(this));\n    addColorButton.element.addEventListener('keydown', this.onAddColorKeydown.bind(this));\n    this.addColorToolbar.appendToolbarItem(addColorButton);\n\n    this.colorPickedBound = this.colorPicked.bind(this);\n\n    this.numPaletteRowsShown = -1;\n\n    this.contentElement.addEventListener('focusout', ev => {\n      // Do not propagate 'focusout' event when the format picker\n      // context menu is shown. The reason is, when it is shown,\n      // 'focusout' event is emitted and SwatchPopoverHelper listens\n      // to it and closes the color picker. However, we don't want\n      // color picker to be closed when the focus is gone for the\n      // format picker context menu. That's why we stop the propagation.\n      if (this.isFormatPickerShown) {\n        ev.stopImmediatePropagation();\n      }\n    });\n\n    this.srgbOverlay = new SrgbOverlay.SrgbOverlay.SrgbOverlay();\n    this.loadPalettes();\n    new PaletteGenerator(palette => {\n      if (palette.colors.length) {\n        this.addPalette(palette);\n      } else if (this.selectedColorPalette.get() === palette.title) {\n        this.paletteSelected(MaterialPalette);\n      }\n    });\n\n    function getUpdatedSliderPosition(element: Element, event: Event): number {\n      const keyboardEvent = event as KeyboardEvent;\n      const elementPosition = element.getBoundingClientRect();\n      switch (keyboardEvent.key) {\n        case 'ArrowLeft':\n        case 'ArrowDown':\n          return elementPosition.left - 1;\n        case 'ArrowRight':\n        case 'ArrowUp':\n          return elementPosition.right + 1;\n        default:\n          return (event as MouseEvent).x;\n      }\n    }\n\n    function positionHue(this: Spectrum, event: Event): void {\n      const hsva = this.hsv.slice() as Common.ColorUtils.Color4D;\n      const sliderPosition = getUpdatedSliderPosition(this.hueSlider, event);\n      const hueAlphaLeft = this.hueElement.getBoundingClientRect().left;\n      const positionFraction = (sliderPosition - hueAlphaLeft) / this.hueAlphaWidth;\n      const newHue = 1 - positionFraction;\n      hsva[0] = Platform.NumberUtilities.clamp(newHue, 0, 1);\n      this.#setColor(hsva, '', undefined /* colorName */, undefined, ChangeSource.Other);\n      const color = getColorFromHsva(this.gamut, hsva);\n      const colorValues = color.as(Common.Color.Format.HSL).canonicalHSLA();\n      UI.ARIAUtils.setValueNow(this.hueElement, colorValues[0]);\n    }\n\n    function positionAlpha(this: Spectrum, event: Event): void {\n      const hsva = this.hsv.slice() as Common.ColorUtils.Color4D;\n      const sliderPosition = getUpdatedSliderPosition(this.alphaSlider, event);\n      const hueAlphaLeft = this.hueElement.getBoundingClientRect().left;\n      const positionFraction = (sliderPosition - hueAlphaLeft) / this.hueAlphaWidth;\n      const newAlpha = Math.round(positionFraction * 100) / 100;\n      hsva[3] = Platform.NumberUtilities.clamp(newAlpha, 0, 1);\n      this.#setColor(hsva, '', undefined /* colorName */, undefined, ChangeSource.Other);\n      const color = getColorFromHsva(this.gamut, hsva);\n      const colorValues = color.as(Common.Color.Format.HSL).canonicalHSLA();\n      UI.ARIAUtils.setValueText(this.alphaElement, colorValues[3]);\n    }\n\n    function positionColor(this: Spectrum, event: Event): void {\n      const hsva = this.hsv.slice() as Common.ColorUtils.Color4D;\n      const colorPosition = getUpdatedColorPosition(this.colorDragElement, event);\n      this.colorOffset = this.colorElement.getBoundingClientRect();\n      hsva[1] = Platform.NumberUtilities.clamp((colorPosition.x - this.colorOffset.left) / this.dragWidth, 0, 1);\n      hsva[2] = Platform.NumberUtilities.clamp(1 - (colorPosition.y - this.colorOffset.top) / this.dragHeight, 0, 1);\n      this.#setColor(hsva, '', undefined /* colorName */, undefined, ChangeSource.Other);\n    }\n\n    function getUpdatedColorPosition(dragElement: Element, event: Event): {\n      x: number,\n      y: number,\n    } {\n      const elementPosition = dragElement.getBoundingClientRect();\n      const verticalX = elementPosition.x + elementPosition.width / 2;\n      const horizontalY = elementPosition.y + elementPosition.width / 2;\n      const defaultUnit = elementPosition.width / 4;\n      const unit = getUnitToMove(defaultUnit, event);\n      const keyboardEvent = event as KeyboardEvent;\n      switch (keyboardEvent.key) {\n        case 'ArrowLeft':\n          return {x: elementPosition.left - unit, y: horizontalY};\n        case 'ArrowRight':\n          return {x: elementPosition.right + unit, y: horizontalY};\n        case 'ArrowDown':\n          return {x: verticalX, y: elementPosition.bottom + unit};\n        case 'ArrowUp':\n          return {x: verticalX, y: elementPosition.top - unit};\n        default:\n          return {\n            x: (event as MouseEvent).x,\n            y: (event as MouseEvent).y,\n          };\n      }\n    }\n\n    function getUnitToMove(unit: number, event: Event): number {\n      const keyboardEvent = event as KeyboardEvent;\n      if (keyboardEvent.altKey) {\n        unit = 1;\n      } else if (keyboardEvent.ctrlKey) {\n        unit = 10;\n      } else if (keyboardEvent.shiftKey) {\n        unit = 20;\n      }\n      return unit;\n    }\n\n    function appendSwitcherIcon(parentElement: Element): void {\n      const switcherIcon = new IconButton.Icon.Icon();\n      switcherIcon.name = 'fold-more';\n      switcherIcon.classList.add('medium');\n      parentElement.appendChild(switcherIcon);\n    }\n  }\n\n  private dragStart(this: Spectrum, callback: (arg0: Event) => void, event: Event): boolean {\n    this.colorOffset = this.colorElement.getBoundingClientRect();\n    callback(event);\n    return true;\n  }\n\n  private contrastDetailsBackgroundColorPickerToggled(event: {\n    data: unknown,\n  }): void {\n    if (event.data) {\n      void this.toggleColorPicker(false);\n    }\n  }\n\n  private contrastPanelExpandedChanged(): void {\n    if (!this.contrastOverlay || !this.contrastDetails) {\n      return;\n    }\n    this.contrastOverlay.setVisible(this.contrastDetails.expanded());\n    this.resizeForSelectedPalette(true);\n\n    if (this.contrastDetails.expanded()) {\n      this.hideSrgbOverlay();\n    } else {\n      this.showSrgbOverlay();\n    }\n  }\n\n  private updatePalettePanel(): void {\n    this.palettePanel.removeChildren();\n    const title = this.palettePanel.createChild('div', 'palette-title');\n    title.textContent = i18nString(UIStrings.colorPalettes);\n    const toolbar = this.palettePanel.createChild('devtools-toolbar');\n    this.closeButton = new UI.Toolbar.ToolbarButton(i18nString(UIStrings.returnToColorPicker), 'cross');\n    this.closeButton.addEventListener(UI.Toolbar.ToolbarButton.Events.CLICK, this.togglePalettePanel.bind(this, false));\n    this.closeButton.element.addEventListener('keydown', this.onCloseBtnKeydown.bind(this));\n    this.closeButton.element.setAttribute('jslog', `${VisualLogging.close().track({click: true})}`);\n    toolbar.appendToolbarItem(this.closeButton);\n    for (const palette of this.palettes.values()) {\n      this.palettePanel.appendChild(this.createPreviewPaletteElement(palette));\n    }\n    this.contentElement.scrollIntoView({block: 'end'});\n  }\n\n  private togglePalettePanel(show: boolean): void {\n    if (this.palettePanelShowing === show) {\n      return;\n    }\n    if (show) {\n      this.updatePalettePanel();\n    }\n    this.palettePanelShowing = show;\n    this.contentElement.classList.toggle('palette-panel-showing', show);\n    this.#focus();\n  }\n\n  private onCloseBtnKeydown(event: KeyboardEvent): void {\n    if (Platform.KeyboardUtilities.isEscKey(event) || Platform.KeyboardUtilities.isEnterOrSpaceKey(event)) {\n      this.togglePalettePanel(false);\n      event.consume(true);\n    }\n  }\n\n  private onSliderKeydown(sliderNewPosition: (arg0: Event) => void, event: Event): void {\n    const keyboardEvent = event as KeyboardEvent;\n    switch (keyboardEvent.key) {\n      case 'ArrowLeft':\n      case 'ArrowRight':\n      case 'ArrowDown':\n      case 'ArrowUp':\n        sliderNewPosition(event);\n        event.consume(true);\n    }\n  }\n\n  /**\n   * (Suppress warning about preventScroll)\n   */\n  #focus(): void {\n    if (!this.isShowing()) {\n      return;\n    }\n    if (this.palettePanelShowing && this.closeButton) {\n      this.closeButton.element.focus({preventScroll: true});\n    } else {\n      this.contentElement.focus();\n    }\n  }\n\n  private createPaletteColor(colorText: string, colorName?: string, animationDelay?: number): HTMLElement {\n    const element = document.createElement('div') as HTMLElement;\n    element.classList.add('spectrum-palette-color');\n    element.setAttribute('jslog', `${VisualLogging.item().track({\n                           click: true,\n                           drag: true,\n                           keydown: 'ArrowUp|ArrowDown|ArrowLeft|ArrowRight|Escape|Tab',\n                         })}`);\n    element.style.background =\n        Platform.StringUtilities.sprintf('linear-gradient(%s, %s), var(--image-file-checker)', colorText, colorText);\n    if (animationDelay) {\n      element.animate([{opacity: 0}, {opacity: 1}], {duration: 100, delay: animationDelay, fill: 'backwards'});\n    }\n    UI.Tooltip.Tooltip.install(element, colorName || colorText);\n    return element;\n  }\n\n  private showPalette(palette: Palette, animate: boolean, _event?: Event): void {\n    this.resizeForSelectedPalette();\n    this.paletteContainer.removeChildren();\n    for (let i = 0; i < palette.colors.length; i++) {\n      const animationDelay = animate ? i * 100 / palette.colors.length : 0;\n      const colorElement = this.createPaletteColor(palette.colors[i], palette.colorNames[i], animationDelay);\n      UI.ARIAUtils.markAsButton(colorElement);\n      UI.ARIAUtils.setLabel(colorElement, i18nString(UIStrings.colorS, {PH1: palette.colors[i]}));\n      colorElement.tabIndex = -1;\n      colorElement.addEventListener('mousedown', this.onPaletteColorKeydown.bind(this, palette, i));\n      colorElement.addEventListener('keydown', this.onPaletteColorKeydown.bind(this, palette, i));\n      if (palette.mutable) {\n        colorElementToMutable.set(colorElement, true);\n        colorElementToColor.set(colorElement, palette.colors[i]);\n        colorElement.addEventListener('contextmenu', this.showPaletteColorContextMenu.bind(this, i));\n      } else if (palette === MaterialPalette) {\n        colorElement.classList.add('has-material-shades');\n        let shadow = colorElement.createChild('div', 'spectrum-palette-color spectrum-palette-color-shadow');\n        shadow.style.background = palette.colors[i];\n        shadow = colorElement.createChild('div', 'spectrum-palette-color spectrum-palette-color-shadow');\n        shadow.style.background = palette.colors[i];\n        const tooltipText = i18nString(UIStrings.longclickOrLongpressSpaceToShow, {PH1: palette.colors[i]});\n        UI.Tooltip.Tooltip.install(colorElement, tooltipText);\n        UI.ARIAUtils.setLabel(colorElement, tooltipText);\n        new UI.UIUtils.LongClickController(\n            colorElement, this.showLightnessShades.bind(this, colorElement, palette.colors[i]));\n      }\n      this.paletteContainer.appendChild(colorElement);\n    }\n    if (this.paletteContainer.childNodes.length > 0) {\n      (this.paletteContainer.childNodes[0] as HTMLElement).tabIndex = 0;\n    }\n    this.paletteContainerMutable = palette.mutable;\n\n    if (palette.mutable) {\n      this.paletteContainer.appendChild(this.addColorToolbar);\n      this.paletteContainer.appendChild(this.deleteIconToolbar);\n    } else {\n      this.addColorToolbar.remove();\n      this.deleteIconToolbar.remove();\n    }\n\n    this.togglePalettePanel(false);\n    this.#focus();\n  }\n\n  private showLightnessShades(colorElement: HTMLElement, colorText: string, _event: Event): void {\n    function closeLightnessShades(this: Spectrum, element: Element): void {\n      this.shadesContainer.classList.add('hidden');\n      element.classList.remove('spectrum-shades-shown');\n      if (this.shadesCloseHandler) {\n        this.shadesContainer.ownerDocument.removeEventListener('mousedown', this.shadesCloseHandler, true);\n      }\n      delete this.shadesCloseHandler;\n    }\n\n    if (this.shadesCloseHandler) {\n      this.shadesCloseHandler();\n    }\n\n    this.shadesContainer.classList.remove('hidden');\n    this.shadesContainer.removeChildren();\n    this.shadesContainer.animate(\n        [{transform: 'scaleY(0)', opacity: '0'}, {transform: 'scaleY(1)', opacity: '1'}],\n        {duration: 200, easing: 'cubic-bezier(0.4, 0, 0.2, 1)'});\n    let shadesTop = this.paletteContainer.offsetTop + colorElement.offsetTop +\n        (colorElement.parentElement ? colorElement.parentElement.offsetTop : 0);\n    if (this.contrastDetails) {\n      shadesTop += this.contrastDetails.element().offsetHeight;\n    }\n    this.shadesContainer.style.top = shadesTop + 'px';\n    this.shadesContainer.style.left = colorElement.offsetLeft + 'px';\n    colorElement.classList.add('spectrum-shades-shown');\n\n    const shades = MaterialPaletteShades.get(colorText);\n    if (shades !== undefined) {\n      for (let i = shades.length - 1; i >= 0; i--) {\n        const shadeElement =\n            this.createPaletteColor(shades[i], undefined /* colorName */, i * 200 / shades.length + 100);\n        UI.ARIAUtils.markAsButton(shadeElement);\n        UI.ARIAUtils.setLabel(shadeElement, i18nString(UIStrings.colorS, {PH1: shades[i]}));\n        shadeElement.tabIndex = -1;\n        shadeElement.addEventListener('mousedown', this.onShadeColorKeydown.bind(this, shades[i], colorElement));\n        shadeElement.addEventListener('keydown', this.onShadeColorKeydown.bind(this, shades[i], colorElement));\n        this.shadesContainer.appendChild(shadeElement);\n      }\n    }\n\n    if (this.shadesContainer.childNodes.length > 0) {\n      (this.shadesContainer.childNodes[this.shadesContainer.childNodes.length - 1] as HTMLElement).focus();\n    }\n    this.shadesCloseHandler = closeLightnessShades.bind(this, colorElement);\n    this.shadesContainer.ownerDocument.addEventListener('mousedown', this.shadesCloseHandler, true);\n  }\n\n  private slotIndexForEvent(event: Event): number {\n    const mouseEvent = event as MouseEvent;\n    const localX = mouseEvent.pageX - this.paletteContainer.getBoundingClientRect().left;\n    const localY = mouseEvent.pageY - this.paletteContainer.getBoundingClientRect().top;\n    const col = Math.min(localX / COLOR_CHIP_SIZE | 0, ITEMS_PER_PALETTE_ROW - 1);\n    const row = (localY / COLOR_CHIP_SIZE) | 0;\n    return Math.min(row * ITEMS_PER_PALETTE_ROW + col, this.customPaletteSetting.get().colors.length - 1);\n  }\n\n  private isDraggingToBin(event: Event): boolean {\n    const mouseEvent = event as MouseEvent;\n    return mouseEvent.pageX > this.deleteIconToolbar.getBoundingClientRect().left;\n  }\n\n  private paletteDragStart(event: Event): boolean {\n    const element = UI.UIUtils.deepElementFromEvent(event) as HTMLElement;\n    if (!element || !colorElementToMutable.get(element)) {\n      return false;\n    }\n\n    const index = this.slotIndexForEvent(event);\n    this.dragElement = element;\n    const mouseEvent = event as MouseEvent;\n    this.dragHotSpotX = mouseEvent.pageX - (index % ITEMS_PER_PALETTE_ROW) * COLOR_CHIP_SIZE;\n    this.dragHotSpotY = mouseEvent.pageY - (index / ITEMS_PER_PALETTE_ROW | 0) * COLOR_CHIP_SIZE;\n    return true;\n  }\n\n  private paletteDrag(event: Event): void {\n    const mouseEvent = event as MouseEvent;\n    if (mouseEvent.pageX < this.paletteContainer.getBoundingClientRect().left ||\n        mouseEvent.pageY < this.paletteContainer.getBoundingClientRect().top) {\n      return;\n    }\n    if (!this.dragElement || this.dragHotSpotX === undefined || this.dragHotSpotY === undefined) {\n      return;\n    }\n    const newIndex = this.slotIndexForEvent(event);\n    const offsetX = mouseEvent.pageX - (newIndex % ITEMS_PER_PALETTE_ROW) * COLOR_CHIP_SIZE;\n    const offsetY = mouseEvent.pageY - (newIndex / ITEMS_PER_PALETTE_ROW | 0) * COLOR_CHIP_SIZE;\n\n    const isDeleting = this.isDraggingToBin(event);\n    this.deleteIconToolbar.classList.add('dragging');\n    this.deleteIconToolbar.classList.toggle('delete-color-toolbar-active', isDeleting);\n    const dragElementTransform =\n        'translateX(' + (offsetX - this.dragHotSpotX) + 'px) translateY(' + (offsetY - this.dragHotSpotY) + 'px)';\n    this.dragElement.style.transform = isDeleting ? dragElementTransform + ' scale(0.8)' : dragElementTransform;\n    const children = [...this.paletteContainer.children];\n    const index = children.indexOf(this.dragElement);\n    const swatchOffsets = new Map<Element, DOMRect>();\n    for (const swatch of children) {\n      swatchOffsets.set(swatch, swatch.getBoundingClientRect());\n    }\n\n    if (index !== newIndex) {\n      this.paletteContainer.insertBefore(this.dragElement, children[newIndex > index ? newIndex + 1 : newIndex]);\n    }\n\n    for (const swatch of children) {\n      if (swatch === this.dragElement) {\n        continue;\n      }\n      const before = swatchOffsets.get(swatch);\n      const after = swatch.getBoundingClientRect();\n      if (before && (before.left !== after.left || before.top !== after.top)) {\n        swatch.animate(\n            [\n              {\n                transform:\n                    'translateX(' + (before.left - after.left) + 'px) translateY(' + (before.top - after.top) + 'px)',\n              },\n              {transform: 'none'},\n            ],\n            {duration: 100, easing: 'cubic-bezier(0, 0, 0.2, 1)'});\n      }\n    }\n  }\n\n  private paletteDragEnd(e: Event): void {\n    if (!this.dragElement) {\n      return;\n    }\n    if (this.isDraggingToBin(e)) {\n      this.dragElement.remove();\n    }\n    this.dragElement.style.removeProperty('transform');\n    const children = this.paletteContainer.children;\n    const colors = [];\n    for (let i = 0; i < children.length; ++i) {\n      const color = colorElementToColor.get(children[i] as HTMLElement);\n      if (color) {\n        colors.push(color);\n      }\n    }\n    const palette = this.customPaletteSetting.get();\n    palette.colors = colors;\n    this.customPaletteSetting.set(palette);\n    this.showPalette(palette, false);\n\n    this.deleteIconToolbar.classList.remove('dragging');\n    this.deleteIconToolbar.classList.remove('delete-color-toolbar-active');\n  }\n\n  private loadPalettes(): void {\n    this.palettes.set(MaterialPalette.title, MaterialPalette);\n    const defaultCustomPalette:\n        Palette = {title: 'Custom', colors: [], colorNames: [], mutable: true, matchUserFormat: undefined};\n    this.customPaletteSetting =\n        Common.Settings.Settings.instance().createSetting('custom-color-palette', defaultCustomPalette);\n    const customPalette = this.customPaletteSetting.get();\n    // Fallback case for custom palettes created pre-m67\n    customPalette.colorNames = customPalette.colorNames || [];\n    this.palettes.set(customPalette.title, customPalette);\n\n    this.selectedColorPalette =\n        Common.Settings.Settings.instance().createSetting('selected-color-palette', GeneratedPaletteTitle);\n    const palette = this.palettes.get(this.selectedColorPalette.get());\n    if (palette) {\n      this.showPalette(palette, true);\n    }\n  }\n\n  addPalette(palette: Palette): void {\n    this.palettes.set(palette.title, palette);\n    if (this.selectedColorPalette.get() === palette.title) {\n      this.showPalette(palette, true);\n    }\n  }\n\n  private createPreviewPaletteElement(palette: Palette): Element {\n    const colorsPerPreviewRow = 5;\n    const previewElement = document.createElement('div');\n    previewElement.classList.add('palette-preview');\n    UI.ARIAUtils.markAsButton(previewElement);\n    previewElement.tabIndex = 0;\n    const titleElement = previewElement.createChild('div', 'palette-preview-title');\n    titleElement.textContent = palette.title;\n    let i;\n    for (i = 0; i < colorsPerPreviewRow && i < palette.colors.length; i++) {\n      previewElement.appendChild(this.createPaletteColor(palette.colors[i], palette.colorNames[i]));\n    }\n    for (; i < colorsPerPreviewRow; i++) {\n      previewElement.createChild('div', 'spectrum-palette-color empty-color');\n    }\n    self.onInvokeElement(previewElement, event => {\n      this.paletteSelected(palette);\n      event.consume(true);\n    });\n    return previewElement;\n  }\n\n  private paletteSelected(palette: Palette): void {\n    this.selectedColorPalette.set(palette.title);\n    this.showPalette(palette, true);\n  }\n\n  private resizeForSelectedPalette(force?: boolean): void {\n    const palette = this.palettes.get(this.selectedColorPalette.get());\n    if (!palette) {\n      return;\n    }\n    let numColors = palette.colors.length;\n    if (palette === this.customPaletteSetting.get()) {\n      numColors++;\n    }\n    const rowsNeeded = Math.max(1, Math.ceil(numColors / ITEMS_PER_PALETTE_ROW));\n    if (this.numPaletteRowsShown === rowsNeeded && !force) {\n      return;\n    }\n    this.numPaletteRowsShown = rowsNeeded;\n    const paletteColorHeight = 12;\n    const paletteMargin = 12;\n    let paletteTop = 236;\n    if (this.contrastDetails) {\n      if (this.contrastDetails.expanded()) {\n        paletteTop += 78;\n      } else {\n        paletteTop += 36;\n      }\n    }\n    this.element.style.height = (paletteTop + paletteMargin + (paletteColorHeight + paletteMargin) * rowsNeeded) + 'px';\n    this.dispatchEventToListeners(Events.SIZE_CHANGED);\n  }\n\n  private onPaletteColorKeydown(palette: Palette, colorIndex: number, event: KeyboardEvent|MouseEvent): void {\n    if (event instanceof MouseEvent || Platform.KeyboardUtilities.isEnterOrSpaceKey(event)) {\n      const colorText = palette.colors[colorIndex];\n      const colorName = palette.colorNames[colorIndex];\n      const color = Common.Color.parse(colorText);\n      if (color) {\n        this.#setColor(\n            color, colorText, colorName, palette.matchUserFormat ? this.colorFormat : color.format(),\n            ChangeSource.Other);\n      }\n      // Continue bubbling so that the color picker will close and submit the selected color.\n      return;\n    }\n    let nextColorIndex;\n    switch (event.key) {\n      case 'ArrowLeft':\n        nextColorIndex = colorIndex - 1;\n        break;\n      case 'ArrowRight':\n        nextColorIndex = colorIndex + 1;\n        break;\n      case 'ArrowUp':\n        nextColorIndex = colorIndex - ITEMS_PER_PALETTE_ROW;\n        break;\n      case 'ArrowDown':\n        nextColorIndex = colorIndex + ITEMS_PER_PALETTE_ROW;\n        break;\n    }\n    if (nextColorIndex !== undefined && nextColorIndex > -1 &&\n        nextColorIndex < this.paletteContainer.childNodes.length) {\n      (this.paletteContainer.childNodes[nextColorIndex] as HTMLElement).focus();\n    }\n  }\n\n  private onShadeColorKeydown(shade: string, colorElement: HTMLElement, event: MouseEvent|KeyboardEvent): void {\n    if (event instanceof MouseEvent || Platform.KeyboardUtilities.isEnterOrSpaceKey(event)) {\n      const color = Common.Color.parse(shade);\n      if (color) {\n        this.#setColor(color, shade, shade, color.format(), ChangeSource.Other);\n      }\n      // Continue bubbling so that the color picker will close and submit the selected color.\n      return;\n    }\n    const target = event.target as HTMLElement;\n    if (Platform.KeyboardUtilities.isEscKey(event) || event.key === 'Tab') {\n      colorElement.focus();\n      if (this.shadesCloseHandler) {\n        this.shadesCloseHandler();\n      }\n      event.consume(true);\n    } else if (event.key === 'ArrowUp' && target.previousElementSibling) {\n      (target.previousElementSibling as HTMLElement).focus();\n      event.consume(true);\n    } else if (event.key === 'ArrowDown' && target.nextElementSibling) {\n      (target.nextElementSibling as HTMLElement).focus();\n      event.consume(true);\n    }\n  }\n\n  private onAddColorMousedown(): void {\n    this.addColorToCustomPalette();\n  }\n\n  private onAddColorKeydown(event: KeyboardEvent): void {\n    if (Platform.KeyboardUtilities.isEnterOrSpaceKey(event)) {\n      this.addColorToCustomPalette();\n      event.consume(true);\n    }\n  }\n\n  private addColorToCustomPalette(): void {\n    const palette = this.customPaletteSetting.get();\n    palette.colors.push(this.colorString());\n    this.customPaletteSetting.set(palette);\n    this.showPalette(palette, false);\n    const colorElements = this.paletteContainer.querySelectorAll('.spectrum-palette-color');\n    (colorElements[colorElements.length - 1] as HTMLElement).focus();\n  }\n\n  private showPaletteColorContextMenu(colorIndex: number, event: Event): void {\n    if (!this.paletteContainerMutable) {\n      return;\n    }\n    const contextMenu = new UI.ContextMenu.ContextMenu(event);\n    if (colorIndex !== -1) {\n      contextMenu.defaultSection().appendItem(\n          i18nString(UIStrings.removeColor), this.deletePaletteColors.bind(this, colorIndex, false),\n          {jslogContext: 'remove-color'});\n      contextMenu.defaultSection().appendItem(\n          i18nString(UIStrings.removeAllToTheRight), this.deletePaletteColors.bind(this, colorIndex, true),\n          {jslogContext: 'remove-all-to-the-right'});\n    }\n    contextMenu.defaultSection().appendItem(\n        i18nString(UIStrings.clearPalette), this.deletePaletteColors.bind(this, -1, true),\n        {jslogContext: 'clear-palette'});\n    void contextMenu.show();\n  }\n\n  private deletePaletteColors(colorIndex: number, toRight: boolean): void {\n    const palette = this.customPaletteSetting.get();\n    if (toRight) {\n      palette.colors.splice(colorIndex + 1, palette.colors.length - colorIndex - 1);\n    } else {\n      palette.colors.splice(colorIndex, 1);\n    }\n    this.customPaletteSetting.set(palette);\n    this.showPalette(palette, false);\n  }\n\n  setColor(color: Common.Color.Color): void {\n    this.#setColor(color, '', undefined /* colorName */, color.format(), ChangeSource.Model);\n    const colorValues = color.as(Common.Color.Format.HSL).canonicalHSLA();\n    UI.ARIAUtils.setValueNow(this.hueElement, colorValues[0]);\n    UI.ARIAUtils.setValueText(this.alphaElement, colorValues[3]);\n  }\n\n  private colorSelected(color: Common.Color.Legacy): void {\n    this.#setColor(color, '', undefined /* colorName */, undefined /* colorFormat */, ChangeSource.Other);\n  }\n\n  get color(): Common.Color.Color {\n    if (this.#color) {\n      return this.#color;\n    }\n\n    return getColorFromHsva(this.gamut, this.hsv);\n  }\n\n  #setColor(\n      colorOrHsv: Common.Color.Color|Common.ColorUtils.Color4D|undefined, colorString: string|undefined,\n      colorName: string|undefined, colorFormat: Common.Color.Format|undefined, changeSource: string): void {\n    // It is important to do `undefined` check here since we want to update the\n    // `colorStringInternal` to be empty specifically. The difference is:\n    // * If we give `undefined` as an argument to this function, it means\n    // we don't want to change `colorStringInternal`\n    // * If we give \"\" as an argument to this funciton, it means\n    // we want to clear the `colorStringInternal`.\n    if (colorString !== undefined) {\n      this.#colorString = colorString;\n    }\n\n    if (colorFormat !== undefined) {\n      this.colorFormat = convertColorFormat(colorFormat);\n      this.gamut = doesFormatSupportDisplayP3(this.colorFormat) ? SpectrumGamut.DISPLAY_P3 : SpectrumGamut.SRGB;\n    }\n\n    // For decreasing the conversion errors, if a color is given as is\n    // we're storing it in `colorInternal` and using it properly.\n    // Otherwise, if an `HSV` is given, we're discarding the `colorInternal`\n    // and keeping HSV values as the source of truth.\n    // This logic enables us to\n    // * Keep color picker and the reflected color consistent (ex: lch(100 55.30 34.40) is\n    //   shown with values 100, 55.30 and 34.40). If we were to get `HSV` from it\n    //   and convert that HSV to `lch` color when needed, it might have resulted in rounding errors\n    //   where color picker shows inconsistent values (i.e. inputs) with the selected color.\n    // * Allow `HSV` values to be set independently from the color it represents.\n    //   for example, lch(100 0 50) and lch(100 0 30) represents the same colors (both white)\n    //   and hue component is powerless. This results in converted `h` in `hsv` to be\n    //   0 as well. Meaning that, when the user comes to white, the hue will be reset to\n    //   `0` which will change the state of the color picker unintentionally.\n    if (Array.isArray(colorOrHsv)) {\n      this.#color = undefined;\n      this.hsv = colorOrHsv;\n    } else if (colorOrHsv !== undefined) {\n      this.#color = colorOrHsv;\n      const oldHue = this.hsv ? this.hsv[0] : null;\n      this.hsv = getHsvFromColor(this.gamut, colorOrHsv);\n      // When the hue is powerless in lch color space\n      // its `h` is directly set to 0 which results in\n      // hue in hsv representation being 0 too.\n      // For that case, we don't want to update the\n      // hue slider of the color picker to keep its state consistent.\n      // Otherwise, when the hue slider is set in the middle and the user\n      // drags the cursor to the left most line (where c is 0)\n      // it will reset hue slider of color picker to be 0 too and we don't want this.\n      // The reason we convert to LCH instead of HSL to check hue's powerlessness is that\n      // we don't want the color to be clipped for doing this check.\n      if (oldHue !== null && colorOrHsv.as(Common.Color.Format.LCH).isHuePowerless()) {\n        this.hsv[0] = oldHue;\n      }\n    }\n    this.#colorName = colorName;\n\n    if (this.contrastInfo) {\n      this.contrastInfo.setColor(Common.Color.Legacy.fromHSVA(this.hsv), this.colorFormat);\n    }\n\n    this.updateHelperLocations();\n    this.updateUI();\n\n    if (changeSource !== ChangeSource.Input) {\n      this.updateInput();\n    }\n    if (changeSource !== ChangeSource.Model) {\n      this.dispatchEventToListeners(Events.COLOR_CHANGED, this.colorString());\n    }\n  }\n\n  colorName(): string|undefined {\n    return this.#colorName;\n  }\n\n  private colorString(): string {\n    // If the `colorStringInternal` exists and\n    // if it is not an empty string, we will show that.\n    // Empty string check is important here since we use\n    // that to point that the colorStringInternal is cleared\n    // and should not be used.\n    if (this.#colorString) {\n      return this.#colorString;\n    }\n\n    const color = this.color;\n    let colorString = this.colorFormat && this.colorFormat !== color.format() ?\n        color.asString(this.colorFormat) :\n        (color.getAuthoredText() ?? color.asString());\n    if (colorString) {\n      return colorString;\n    }\n\n    if (this.colorFormat === Common.Color.Format.HEX) {\n      colorString = color.asString(Common.Color.Format.HEXA);\n    } else if (this.colorFormat === Common.Color.Format.HSL) {\n      colorString = color.asString(Common.Color.Format.HSLA);\n    } else if (this.colorFormat === Common.Color.Format.HWB) {\n      colorString = color.asString(Common.Color.Format.HWBA);\n    } else {\n      colorString = color.asString(Common.Color.Format.RGBA);\n    }\n\n    console.assert(Boolean(colorString));\n    return colorString || '';\n  }\n\n  private updateHelperLocations(): void {\n    const h = this.hsv[0];\n    const s = this.hsv[1];\n    const v = this.hsv[2];\n    const alpha = this.hsv[3];\n\n    // Where to show the little circle that displays your current selected color.\n    this.dragX = s * this.dragWidth;\n    this.dragY = this.dragHeight - (v * this.dragHeight);\n\n    const dragX = Math.max(\n        -this.colorDragElementHeight,\n        Math.min(this.dragWidth - this.colorDragElementHeight, this.dragX - this.colorDragElementHeight));\n    const dragY = Math.max(\n        -this.colorDragElementHeight,\n        Math.min(this.dragHeight - this.colorDragElementHeight, this.dragY - this.colorDragElementHeight));\n\n    this.colorDragElement.positionAt(dragX, dragY);\n\n    // Where to show the bar that displays your current selected hue.\n    const hueSlideX = (1 - h) * this.hueAlphaWidth - this.slideHelperWidth;\n    this.hueSlider.style.left = hueSlideX + 'px';\n    const alphaSlideX = alpha * this.hueAlphaWidth - this.slideHelperWidth;\n    this.alphaSlider.style.left = alphaSlideX + 'px';\n  }\n\n  private updateInput(): void {\n    if (this.colorFormat === Common.Color.Format.HEX) {\n      this.hexContainer.hidden = false;\n      this.displayContainer.hidden = true;\n      this.hexValue.value =\n          this.color.asString((this.color.alpha ?? 1) !== 1 ? Common.Color.Format.HEXA : Common.Color.Format.HEX);\n    } else {\n      // RGBA, HSLA, HWBA, color() display.\n      this.hexContainer.hidden = true;\n      this.displayContainer.hidden = false;\n      const spec = colorFormatSpec[this.colorFormat];\n      const colorValues = spec.toValues(this.color);\n      this.textLabels.textContent = spec.label;\n\n      for (let i = 0; i < this.textValues.length; ++i) {\n        UI.ARIAUtils.setLabel(\n            this.textValues[i],\n            /** R in RGBA */ i18nString(UIStrings.sInS, {\n              PH1: this.textLabels.textContent.charAt(i),\n              PH2: this.textLabels.textContent,\n            }));\n        this.textValues[i].value = String(colorValues[i]);\n      }\n    }\n  }\n\n  private hideSrgbOverlay(): void {\n    if (this.colorElement.contains(this.srgbOverlay)) {\n      this.colorElement.removeChild(this.srgbOverlay);\n    }\n  }\n\n  private showSrgbOverlay(): void {\n    if ((this.contrastDetails?.expanded()) || this.gamut !== SpectrumGamut.DISPLAY_P3) {\n      return;\n    }\n\n    void this.srgbOverlay.render({\n      hue: this.hsv[0],\n      width: this.dragWidth,\n      height: this.dragHeight,\n    });\n\n    if (!this.colorElement.contains(this.srgbOverlay)) {\n      this.colorElement.appendChild(this.srgbOverlay);\n    }\n  }\n\n  private updateSrgbOverlay(): void {\n    if (this.gamut === SpectrumGamut.DISPLAY_P3) {\n      this.showSrgbOverlay();\n    } else {\n      this.hideSrgbOverlay();\n    }\n  }\n\n  private updateUI(): void {\n    this.colorElement.style.backgroundColor = getColorFromHsva(this.gamut, [this.hsv[0], 1, 1, 1]).asString();\n    if (this.contrastOverlay) {\n      this.contrastOverlay.setDimensions(this.dragWidth, this.dragHeight);\n    }\n    this.updateSrgbOverlay();\n\n    this.swatch.setColor(this.color, this.colorString());\n    this.colorDragElement.style.backgroundColor = this.color.asString(Common.Color.Format.LCH);\n    const noAlpha = Common.Color.Legacy.fromHSVA(this.hsv.slice(0, 3).concat(1) as Common.ColorUtils.Color4D);\n    this.alphaElementBackground.style.backgroundImage = Platform.StringUtilities.sprintf(\n        'linear-gradient(to right, rgba(0,0,0,0), %s)', noAlpha.asString(Common.Color.Format.LCH));\n\n    this.hueElement.classList.toggle('display-p3', doesFormatSupportDisplayP3(this.colorFormat));\n  }\n\n  private async showFormatPicker(event: MouseEvent): Promise<void> {\n    const contextMenu = new FormatPickerContextMenu(this.color);\n    this.isFormatPickerShown = true;\n    await contextMenu.show(event, newColor => {\n      this.#setColor(newColor, undefined, undefined, newColor.format(), ChangeSource.Other);\n    });\n    this.isFormatPickerShown = false;\n  }\n\n  /**\n   * If the pasted input is parsable as a color, applies it converting to the current user format\n   */\n  private pasted(event: ClipboardEvent): void {\n    if (!event.clipboardData) {\n      return;\n    }\n    const text = event.clipboardData.getData('text');\n    const color = Common.Color.parse(text);\n    if (!color) {\n      return;\n    }\n    this.#setColor(color, text, undefined /* colorName */, undefined /* colorFormat */, ChangeSource.Other);\n    event.preventDefault();\n  }\n\n  #getValueSteppingForInput(element: HTMLInputElement): {step: number, range: {min: number, max: number}}|undefined {\n    const channel = this.color.channels[this.textValues.indexOf(element)];\n    switch (channel) {\n      case Common.Color.ColorChannel.R:\n      case Common.Color.ColorChannel.G:\n      case Common.Color.ColorChannel.B:\n        return this.color instanceof Common.Color.ColorFunction ? {step: .01, range: {min: 0, max: 1}} :\n                                                                  {step: 1, range: {min: 0, max: 255}};\n      case Common.Color.ColorChannel.ALPHA:\n      case Common.Color.ColorChannel.X:\n      case Common.Color.ColorChannel.Y:\n      case Common.Color.ColorChannel.Z:\n        return {step: .01, range: {min: 0, max: 1}};\n      default:\n        return undefined;\n    }\n  }\n\n  private inputChanged(event: Event): void {\n    const inputElement = event.currentTarget as HTMLInputElement;\n    const newValue = UI.UIUtils.createReplacementString(\n        inputElement.value, event, undefined, this.#getValueSteppingForInput(inputElement));\n    if (newValue) {\n      inputElement.value = newValue;\n      inputElement.selectionStart = 0;\n      inputElement.selectionEnd = newValue.length;\n      event.consume(true);\n    }\n\n    let color: Common.Color.Color|null = null;\n    let colorFormat: Common.Color.Format|undefined;\n    if (this.colorFormat === Common.Color.Format.HEX) {\n      color = Common.Color.parse(this.hexValue.value);\n    } else {\n      const spec = colorFormatSpec[this.colorFormat];\n      const colorTextValues = this.textValues.map(element => element.value);\n      if (colorTextValues.length !== 4) {\n        // Somehow the `textValues` array updated to contain more elements\n        // This shouldn't happen.\n        return;\n      }\n      // Since we know that `textValues` is an array with 4 elements we're safe\n      // to assert that `colorTextValues` is an array with 4 strings.\n      color = spec.fromValues(colorTextValues as [string, string, string, string]);\n    }\n\n    if (!color) {\n      return;\n    }\n\n    this.#setColor(color, undefined, undefined /* colorName */, colorFormat, ChangeSource.Input);\n  }\n\n  override wasShown(): void {\n    this.hueAlphaWidth = this.hueElement.offsetWidth;\n    this.slideHelperWidth = this.hueSlider.offsetWidth / 2;\n    this.dragWidth = this.colorElement.offsetWidth;\n    this.dragHeight = this.colorElement.offsetHeight;\n    this.colorDragElementHeight = this.colorDragElement.offsetHeight / 2;\n    this.#setColor(undefined, undefined, undefined /* colorName */, undefined, ChangeSource.Model);\n    // When flag is turned on, eye dropper is not turned on by default.\n    // This is because the global change of the cursor into a dropper will disturb the user.\n    if (!IS_NATIVE_EYE_DROPPER_AVAILABLE) {\n      void this.toggleColorPicker(true);\n    } else {\n      this.colorPickerButton.setToggled(false);\n    }\n\n    if (this.contrastDetails && this.contrastDetailsBackgroundColorPickerToggledBound) {\n      this.contrastDetails.addEventListener(\n          ContrastDetailsEvents.BACKGROUND_COLOR_PICKER_WILL_BE_TOGGLED,\n          this.contrastDetailsBackgroundColorPickerToggledBound);\n    }\n  }\n\n  override willHide(): void {\n    void this.toggleColorPicker(false);\n    if (this.contrastDetails && this.contrastDetailsBackgroundColorPickerToggledBound) {\n      this.contrastDetails.removeEventListener(\n          ContrastDetailsEvents.BACKGROUND_COLOR_PICKER_WILL_BE_TOGGLED,\n          this.contrastDetailsBackgroundColorPickerToggledBound);\n    }\n  }\n\n  async toggleColorPicker(enabled?: boolean): Promise<void> {\n    if (enabled === undefined) {\n      enabled = this.colorPickerButton.isToggled();\n    }\n\n    // This is to make sure that only one picker is open at a time (enabled is true) and\n    // the background color picker gets dismissed whenever the popup is closed by an Esc (enabled is false).\n    // Also have a look at this.contrastDetailsBackgroundColorPickedToggled.\n    if (this.contrastDetails?.backgroundColorPickerEnabled()) {\n      this.contrastDetails.toggleBackgroundColorPicker(false);\n    }\n\n    // With the old color picker, colors can only be picked up within the page.\n    if (!IS_NATIVE_EYE_DROPPER_AVAILABLE) {\n      Host.InspectorFrontendHost.InspectorFrontendHostInstance.setEyeDropperActive(enabled);\n      if (enabled) {\n        Host.InspectorFrontendHost.InspectorFrontendHostInstance.events.addEventListener(\n            Host.InspectorFrontendHostAPI.Events.EyeDropperPickedColor, this.colorPickedBound);\n      } else {\n        Host.InspectorFrontendHost.InspectorFrontendHostInstance.events.removeEventListener(\n            Host.InspectorFrontendHostAPI.Events.EyeDropperPickedColor, this.colorPickedBound);\n      }\n    } else if (IS_NATIVE_EYE_DROPPER_AVAILABLE && enabled) {\n      // Use EyeDropper API, can pick up colors outside the browser window,\n      // Note: The current EyeDropper API is not designed to pick up colors continuously.\n      const eyeDropper = new window.EyeDropper();\n      this.eyeDropperAbortController = new AbortController();\n\n      try {\n        const hexColor = await eyeDropper.open({signal: this.eyeDropperAbortController.signal});\n        const color = Common.Color.parse(hexColor.sRGBHex);\n\n        this.#setColor(color ?? undefined, '', undefined /* colorName */, undefined, ChangeSource.Other);\n      } catch (error) {\n        if (error.name !== 'AbortError') {\n          console.error(error);\n        }\n      }\n\n      this.colorPickerButton.setToggled(false);\n    } else if (IS_NATIVE_EYE_DROPPER_AVAILABLE && !enabled) {\n      this.eyeDropperAbortController?.abort();\n      this.eyeDropperAbortController = null;\n    }\n  }\n\n  private colorPicked({\n    data: rgbColor,\n  }: Common.EventTarget.EventTargetEvent<Host.InspectorFrontendHostAPI.EyeDropperPickedColorEvent>): void {\n    const rgba = [rgbColor.r, rgbColor.g, rgbColor.b, (rgbColor.a / 2.55 | 0) / 100];\n    const color = Common.Color.Legacy.fromRGBA(rgba);\n    this.#setColor(color, '', undefined /* colorName */, undefined, ChangeSource.Other);\n    Host.InspectorFrontendHost.InspectorFrontendHostInstance.bringToFront();\n  }\n}\n\nexport const ChangeSource = {\n  Input: 'Input',\n  Model: 'Model',\n  Other: 'Other',\n};\n\nexport const enum Events {\n  COLOR_CHANGED = 'ColorChanged',\n  SIZE_CHANGED = 'SizeChanged',\n}\n\nexport interface EventTypes {\n  [Events.COLOR_CHANGED]: string;\n  [Events.SIZE_CHANGED]: void;\n}\n\nconst COLOR_CHIP_SIZE = 24;\nconst ITEMS_PER_PALETTE_ROW = 8;\nconst GeneratedPaletteTitle = 'Page colors';\n\nexport class PaletteGenerator {\n  private readonly callback: (arg0: Palette) => void;\n  private readonly frequencyMap = new Map<string, number>();\n  constructor(callback: (arg0: Palette) => void) {\n    this.callback = callback;\n    const stylesheetPromises = [];\n    for (const cssModel of SDK.TargetManager.TargetManager.instance().models(SDK.CSSModel.CSSModel)) {\n      for (const stylesheet of cssModel.allStyleSheets()) {\n        stylesheetPromises.push(this.processStylesheet(stylesheet));\n      }\n    }\n    void Promise.all(stylesheetPromises)\n        .catch(error => {\n          console.error(error);\n        })\n        .then(this.finish.bind(this));\n  }\n\n  private frequencyComparator(a: string, b: string): number {\n    return (this.frequencyMap.get(b) as number) - (this.frequencyMap.get(a) as number);\n  }\n\n  private finish(): void {\n    function hueComparator(a: string, b: string): number {\n      const hsva = (paletteColors.get(a) as Common.Color.Legacy).as(Common.Color.Format.HSL).hsva();\n      const hsvb = (paletteColors.get(b) as Common.Color.Legacy).as(Common.Color.Format.HSL).hsva();\n\n      // First trim the shades of gray\n      if (hsvb[1] < 0.12 && hsva[1] < 0.12) {\n        return hsvb[2] * hsvb[3] - hsva[2] * hsva[3];\n      }\n      if (hsvb[1] < 0.12) {\n        return -1;\n      }\n      if (hsva[1] < 0.12) {\n        return 1;\n      }\n\n      // Equal hue -> sort by sat\n      if (hsvb[0] === hsva[0]) {\n        return hsvb[1] * hsvb[3] - hsva[1] * hsva[3];\n      }\n\n      return (hsvb[0] + 0.94) % 1 - (hsva[0] + 0.94) % 1;\n    }\n\n    let colors: string[]|string[] = [...this.frequencyMap.keys()];\n    colors = colors.sort(this.frequencyComparator.bind(this));\n    const paletteColors = new Map<string, Common.Color.Color>();\n    const colorsPerRow = 24;\n    while (paletteColors.size < colorsPerRow && colors.length) {\n      const colorText = colors.shift() as string;\n      const color = Common.Color.parse(colorText);\n      if (!color) {\n        continue;\n      }\n      paletteColors.set(colorText, color);\n    }\n\n    this.callback({\n      title: GeneratedPaletteTitle,\n      colors: [...paletteColors.keys()].sort(hueComparator),\n      colorNames: [],\n      mutable: false,\n      matchUserFormat: undefined,\n    });\n  }\n\n  private async processStylesheet(stylesheet: SDK.CSSStyleSheetHeader.CSSStyleSheetHeader): Promise<void> {\n    const contentDataOrError = await stylesheet.requestContentData();\n    const text = TextUtils.ContentData.ContentData.textOr(contentDataOrError, '').toLowerCase();\n    const regexResult = text.matchAll(/((?:rgb|hsl|hwb)a?\\([^)]+\\)|#[0-9a-f]{6}|#[0-9a-f]{3})/g);\n    for (const {0: c, index} of regexResult) {\n      // Check whether the match occured in a property value and not in a property name or a selector by verifying\n      // that there's no colon after the match and before the next semicolon.\n      if (text.indexOf(';', index) < 0 ||\n          text.indexOf(':', index) > -1 && text.indexOf(':', index) < text.indexOf(';', index)) {\n        continue;\n      }\n      const frequency = 1 + (this.frequencyMap.get(c) ?? 0);\n      this.frequencyMap.set(c, frequency);\n    }\n  }\n}\n\nconst MaterialPaletteShades = new Map([\n  [\n    '#F44336',\n    ['#FFEBEE', '#FFCDD2', '#EF9A9A', '#E57373', '#EF5350', '#F44336', '#E53935', '#D32F2F', '#C62828', '#B71C1C'],\n  ],\n  [\n    '#E91E63',\n    ['#FCE4EC', '#F8BBD0', '#F48FB1', '#F06292', '#EC407A', '#E91E63', '#D81B60', '#C2185B', '#AD1457', '#880E4F'],\n  ],\n  [\n    '#9C27B0',\n    ['#F3E5F5', '#E1BEE7', '#CE93D8', '#BA68C8', '#AB47BC', '#9C27B0', '#8E24AA', '#7B1FA2', '#6A1B9A', '#4A148C'],\n  ],\n  [\n    '#673AB7',\n    ['#EDE7F6', '#D1C4E9', '#B39DDB', '#9575CD', '#7E57C2', '#673AB7', '#5E35B1', '#512DA8', '#4527A0', '#311B92'],\n  ],\n  [\n    '#3F51B5',\n    ['#E8EAF6', '#C5CAE9', '#9FA8DA', '#7986CB', '#5C6BC0', '#3F51B5', '#3949AB', '#303F9F', '#283593', '#1A237E'],\n  ],\n  [\n    '#2196F3',\n    ['#E3F2FD', '#BBDEFB', '#90CAF9', '#64B5F6', '#42A5F5', '#2196F3', '#1E88E5', '#1976D2', '#1565C0', '#0D47A1'],\n  ],\n  [\n    '#03A9F4',\n    ['#E1F5FE', '#B3E5FC', '#81D4FA', '#4FC3F7', '#29B6F6', '#03A9F4', '#039BE5', '#0288D1', '#0277BD', '#01579B'],\n  ],\n  [\n    '#00BCD4',\n    ['#E0F7FA', '#B2EBF2', '#80DEEA', '#4DD0E1', '#26C6DA', '#00BCD4', '#00ACC1', '#0097A7', '#00838F', '#006064'],\n  ],\n  [\n    '#009688',\n    ['#E0F2F1', '#B2DFDB', '#80CBC4', '#4DB6AC', '#26A69A', '#009688', '#00897B', '#00796B', '#00695C', '#004D40'],\n  ],\n  [\n    '#4CAF50',\n    ['#E8F5E9', '#C8E6C9', '#A5D6A7', '#81C784', '#66BB6A', '#4CAF50', '#43A047', '#388E3C', '#2E7D32', '#1B5E20'],\n  ],\n  [\n    '#8BC34A',\n    ['#F1F8E9', '#DCEDC8', '#C5E1A5', '#AED581', '#9CCC65', '#8BC34A', '#7CB342', '#689F38', '#558B2F', '#33691E'],\n  ],\n  [\n    '#CDDC39',\n    ['#F9FBE7', '#F0F4C3', '#E6EE9C', '#DCE775', '#D4E157', '#CDDC39', '#C0CA33', '#AFB42B', '#9E9D24', '#827717'],\n  ],\n  [\n    '#FFEB3B',\n    ['#FFFDE7', '#FFF9C4', '#FFF59D', '#FFF176', '#FFEE58', '#FFEB3B', '#FDD835', '#FBC02D', '#F9A825', '#F57F17'],\n  ],\n  [\n    '#FFC107',\n    ['#FFF8E1', '#FFECB3', '#FFE082', '#FFD54F', '#FFCA28', '#FFC107', '#FFB300', '#FFA000', '#FF8F00', '#FF6F00'],\n  ],\n  [\n    '#FF9800',\n    ['#FFF3E0', '#FFE0B2', '#FFCC80', '#FFB74D', '#FFA726', '#FF9800', '#FB8C00', '#F57C00', '#EF6C00', '#E65100'],\n  ],\n  [\n    '#FF5722',\n    ['#FBE9E7', '#FFCCBC', '#FFAB91', '#FF8A65', '#FF7043', '#FF5722', '#F4511E', '#E64A19', '#D84315', '#BF360C'],\n  ],\n  [\n    '#795548',\n    ['#EFEBE9', '#D7CCC8', '#BCAAA4', '#A1887F', '#8D6E63', '#795548', '#6D4C41', '#5D4037', '#4E342E', '#3E2723'],\n  ],\n  [\n    '#9E9E9E',\n    ['#FAFAFA', '#F5F5F5', '#EEEEEE', '#E0E0E0', '#BDBDBD', '#9E9E9E', '#757575', '#616161', '#424242', '#212121'],\n  ],\n  [\n    '#607D8B',\n    ['#ECEFF1', '#CFD8DC', '#B0BEC5', '#90A4AE', '#78909C', '#607D8B', '#546E7A', '#455A64', '#37474F', '#263238'],\n  ],\n]);\n\nexport const MaterialPalette = {\n  title: 'Material',\n  mutable: false,\n  matchUserFormat: true,\n  colors: [...MaterialPaletteShades.keys()],\n  colorNames: [],\n};\n\nexport class Swatch {\n  private colorString!: string|null;\n  private swatchInnerElement: HTMLElement;\n  private swatchOverlayElement: HTMLElement;\n  private readonly swatchCopyIcon: IconButton.Icon.Icon;\n  constructor(parentElement: HTMLElement) {\n    const swatchElement = parentElement.createChild('span', 'swatch');\n    swatchElement.setAttribute('jslog', `${VisualLogging.action('copy-color').track({click: true})}`);\n    this.swatchInnerElement = swatchElement.createChild('span', 'swatch-inner');\n    this.swatchOverlayElement = swatchElement.createChild('span', 'swatch-overlay');\n    UI.ARIAUtils.markAsButton(this.swatchOverlayElement);\n    UI.ARIAUtils.setPressed(this.swatchOverlayElement, false);\n    this.swatchOverlayElement.tabIndex = 0;\n    self.onInvokeElement(this.swatchOverlayElement, this.onCopyText.bind(this));\n    this.swatchOverlayElement.addEventListener('mouseout', this.onCopyIconMouseout.bind(this));\n    this.swatchOverlayElement.addEventListener('blur', this.onCopyIconMouseout.bind(this));\n    this.swatchCopyIcon = IconButton.Icon.create('copy', 'copy-color-icon');\n    UI.Tooltip.Tooltip.install(this.swatchCopyIcon, i18nString(UIStrings.copyColorToClipboard));\n    this.swatchOverlayElement.appendChild(this.swatchCopyIcon);\n    UI.ARIAUtils.setLabel(this.swatchOverlayElement, this.swatchCopyIcon.title);\n  }\n\n  setColor(color: Common.Color.Color, colorString?: string): void {\n    const lchColor = color.as(Common.Color.Format.LCH);\n    this.swatchInnerElement.style.backgroundColor = lchColor.asString();\n    // Show border if the swatch is white.\n    this.swatchInnerElement.classList.toggle('swatch-inner-white', lchColor.l > 90);\n    this.colorString = colorString || null;\n    if (colorString) {\n      this.swatchOverlayElement.hidden = false;\n    } else {\n      this.swatchOverlayElement.hidden = true;\n    }\n  }\n\n  private onCopyText(event: Event): void {\n    this.swatchCopyIcon.name = 'checkmark';\n    Host.InspectorFrontendHost.InspectorFrontendHostInstance.copyText(this.colorString);\n    UI.ARIAUtils.setPressed(this.swatchOverlayElement, true);\n    event.consume();\n  }\n\n  private onCopyIconMouseout(): void {\n    this.swatchCopyIcon.name = 'copy';\n    UI.ARIAUtils.setPressed(this.swatchOverlayElement, false);\n  }\n}\nexport interface Palette {\n  title: string;\n  colors: string[];\n  colorNames: string[];\n  mutable: boolean;\n  matchUserFormat?: boolean;\n}\n", "// Copyright 2025 The Chromium Authors\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\n// IMPORTANT: this file is auto generated. Please do not edit this file.\n/* istanbul ignore file */\nexport default `/*\n * Copyright 2021 The Chromium Authors\n * Use of this source code is governed by a BSD-style license that can be\n * found in the LICENSE file.\n */\n\n/* https://github.com/bgrins/spectrum */\n\n:host {\n  width: 232px;\n  height: 319px;\n  user-select: none;\n  overflow: hidden;\n}\n\n/* stylelint-disable-next-line selector-pseudo-class-no-unknown */\n:selection {\n  background-color: var(--sys-color-tonal-container);\n  color: var(--sys-color-on-tonal-container);\n}\n\n.spectrum-color {\n  position: relative;\n  width: 232px;\n  height: 127px;\n  border-radius: 2px 2px 0 0;\n  overflow: hidden;\n  flex: none;\n  touch-action: none;\n}\n\n.spectrum-dragger,\n.spectrum-slider {\n  user-select: none;\n}\n\n.spectrum-dragger {\n  border-radius: 12px;\n  height: 12px;\n  width: 12px;\n  border: 1px solid var(--sys-color-surface);\n  cursor: move;\n  z-index: 1;\n  position: absolute;\n  top: 0;\n  left: 0;\n  background: var(--sys-color-inverse-surface);\n  box-shadow: var(--drop-shadow);\n}\n\n.spectrum-slider {\n  position: absolute;\n  top: -1px;\n  cursor: ew-resize;\n  width: 13px;\n  height: 13px;\n  border-radius: 13px;\n  background-color: var(--sys-color-neutral-container);\n  box-shadow: var(--drop-shadow);\n}\n\n.spectrum-color:focus .spectrum-dragger {\n  border: 1px solid var(--sys-color-state-focus-ring);\n}\n\n.spectrum-tools {\n  position: relative;\n  height: 110px;\n  width: 100%;\n  flex: none;\n}\n\n.spectrum-hue {\n  top: 16px;\n  /* stylelint-disable-next-line plugin/use_theme_colors, declaration-property-value-no-unknown */\n  background: linear-gradient(to left in hsl longer hue, #f00 0 100%);\n}\n\n.spectrum-hue.display-p3 {\n  /* stylelint-disable-next-line declaration-property-value-no-unknown */\n  background: linear-gradient(\n    to left in hsl longer hue,\n    color(display-p3 1 0 0) 0 100%\n  );\n}\n\n.spectrum-alpha {\n  top: 35px;\n  background-image: var(--image-file-checker);\n  background-size: 12px 11px;\n}\n\n.spectrum-alpha-background {\n  height: 100%;\n  border-radius: 2px;\n}\n\n.spectrum-hue,\n.spectrum-alpha {\n  position: absolute;\n  left: 86px;\n  width: 130px;\n  height: 11px;\n  border-radius: 2px;\n  touch-action: none;\n}\n\n.spectrum-hue:focus-visible .spectrum-slider,\n.spectrum-alpha:focus-visible .spectrum-slider {\n  border: 1px solid var(--sys-color-state-focus-ring);\n  width: 14px;\n  height: 14px;\n  border-radius: 14px;\n}\n\n.spectrum-sat,\n.-theme-preserve {\n  /* stylelint-disable-next-line plugin/use_theme_colors */\n  background-image: linear-gradient(to right, #fff, rgb(204 154 129 / 0%));\n}\n\n.spectrum-val,\n.-theme-preserve {\n  /* stylelint-disable-next-line plugin/use_theme_colors */\n  background-image: linear-gradient(to top, #000, rgb(204 154 129 / 0%));\n}\n\n.spectrum-contrast-details {\n  position: relative;\n  background-color: var(--sys-color-cdt-base-container);\n  width: 100%;\n  height: 83px;\n  top: 0;\n  font-size: 13px;\n  color: var(--sys-color-on-surface);\n  border-top: 1px solid var(--sys-color-divider);\n  line-height: initial;\n  overflow: hidden;\n  flex: none;\n}\n\n.spectrum-contrast-details.collapsed {\n  height: 36px;\n  flex: none;\n}\n\n.spectrum-contrast-details devtools-toolbar.expand {\n  position: absolute;\n  right: 6px;\n  top: 6px;\n  margin: 0;\n}\n\n.spectrum-contrast-details.visible {\n  display: initial;\n}\n\n.spectrum-contrast-details div.container {\n  margin: 10px;\n}\n\n.spectrum-contrast-details .expanded-details {\n  display: flex;\n  margin: 12px 12px 0 4px;\n}\n\n.spectrum-contrast-details.collapsed .expanded-details {\n  display: none;\n}\n\n.contrast-pass-fail {\n  margin-left: 0.5em;\n  display: flex;\n  align-items: center;\n}\n\n.contrast-choose-bg-color {\n  margin: 8px 0 0 5px;\n  font-style: italic;\n}\n\n.spectrum-contrast-details .contrast-choose-bg-color,\n.spectrum-contrast-details .contrast-thresholds {\n  width: 150px;\n}\n\n.contrast-threshold:first-child {\n  margin-bottom: 5px;\n}\n\n.contrast-fix-button {\n  cursor: pointer;\n  font-size: 13px;\n  padding: 0;\n  margin: 0 0 0 10px;\n  background: 0;\n  width: 12px;\n  height: 12px;\n  border: 1px solid var(--sys-color-neutral-outline);\n  display: inline-block;\n  position: relative;\n}\n\n.contrast-fix-button::after {\n  content: ' ';\n  width: 13px;\n  height: 13px;\n  background-image: var(--image-file-refresh);\n  background-size: contain;\n  position: absolute;\n  left: 5.5px;\n  top: 3.5px;\n  background-color: var(--sys-color-cdt-base-container);\n  border-radius: 50%;\n}\n\n.contrast-fix-button:hover,\n.contrast-fix-button:focus {\n  border: 1px solid var(--sys-color-state-focus-ring);\n  transform: scale(1.2);\n}\n\n.contrast-link-label {\n  cursor: pointer;\n}\n\n.contrast-link-label:hover {\n  text-decoration: underline;\n}\n\n.spectrum-contrast-details .background-color {\n  position: absolute;\n  flex: none;\n  right: 12px;\n}\n\n.spectrum-eye-dropper {\n  width: 32px;\n  height: 24px;\n  position: relative;\n  left: 8px;\n  top: 17px;\n  cursor: pointer;\n}\n\n.spectrum-contrast-details .spectrum-eye-dropper {\n  top: 2px;\n  right: 34px;\n  position: absolute;\n  left: auto;\n}\n\n.contrast-details-value {\n  color: var(--sys-color-on-surface);\n  margin: 1px 5px;\n  user-select: text;\n}\n\n.contrast-pass-fail devtools-icon {\n  margin-left: 5px;\n}\n\n.contrast-details-value devtools-icon {\n  display: none;\n  margin-left: 5px;\n  color: var(--sys-color-on-surface);\n}\n\n.spectrum-contrast-details .toolbar-state-on devtools-icon {\n  color: var(--sys-color-token-subtle);\n}\n\ndevtools-icon.clear {\n  transform: scale(0.7);\n  color: var(--icon-error);\n}\n\ndevtools-icon.checkmark,\ndevtools-icon.check-double {\n  color: var(--icon-checkmark-green);\n}\n\n.spectrum-contrast-details .contrast-details-value.contrast-unknown {\n  background-color: var(--sys-color-cdt-base-container);\n  color: var(--sys-color-on-surface);\n  width: 3em;\n  text-align: center;\n}\n\n.contrast-details-value .clear,\n.contrast-details-value .checkmark,\n.contrast-details-value .check-double {\n  cursor: pointer;\n  vertical-align: -5px;\n}\n\n.spectrum-contrast-details.contrast-fail .contrast-details-value .clear,\n.contrast-details-value.contrast-aa .checkmark,\n.contrast-details-value.contrast-aaa .check-double {\n  display: inline-block;\n}\n\n.swatch {\n  width: 32px;\n  height: 32px;\n  margin: 0;\n  position: absolute;\n  top: 15px;\n  left: 44px;\n  background-image: var(--image-file-checker);\n  border-radius: 16px;\n}\n\n.swatch-inner,\n.swatch-overlay {\n  position: absolute;\n  width: 100%;\n  height: 100%;\n  display: inline-block;\n  border-radius: 16px;\n}\n\n.swatch-inner-white {\n  border: 1px solid var(--sys-color-neutral-outline);\n}\n\n.swatch-overlay {\n  cursor: pointer;\n  opacity: 0%;\n  padding: 4px;\n}\n\n.swatch-overlay:hover,\n.swatch-overlay:focus-visible {\n  background-color: var(--color-background-inverted-opacity-30);\n  opacity: 100%;\n}\n\n.swatch-overlay:active {\n  background-color: var(--color-background-inverted-opacity-50);\n}\n\ndevtools-icon.copy-color-icon {\n  color: var(--sys-color-cdt-base-container);\n  margin-top: 2px;\n  margin-left: 2px;\n}\n\n.spectrum-text {\n  position: absolute;\n  top: 60px;\n  left: 16px;\n}\n\n.spectrum-text-value {\n  display: inline-block;\n  width: 40px;\n  overflow: hidden;\n  text-align: center;\n  margin-right: 6px;\n  line-height: 20px;\n  padding: 0;\n  color: var(--sys-color-on-surface);\n  border: 1px solid var(--sys-color-neutral-outline);\n  white-space: nowrap;\n}\n\n.spectrum-text-label {\n  letter-spacing: 39.5px;\n  margin-top: 8px;\n  display: block;\n  color: var(--sys-color-state-disabled);\n  margin-left: 16px;\n  width: 174px;\n}\n\n.spectrum-text-hex > .spectrum-text-value {\n  width: 178px;\n}\n\n.spectrum-text-hex > .spectrum-text-label {\n  letter-spacing: normal;\n  margin-left: 0;\n  text-align: center;\n}\n\n.spectrum-switcher {\n  border-radius: 2px;\n  height: 20px;\n  width: 20px;\n  padding: 2px;\n  border: none;\n  background: none;\n  margin: 0;\n}\n\n.spectrum-display-switcher {\n  top: 72px;\n  position: absolute;\n  right: 10px;\n}\n\n.spectrum-switcher:hover {\n  background-color: var(--sys-color-state-hover-on-subtle);\n}\n\n.spectrum-switcher:focus-visible {\n  background-color: var(--sys-color-state-focus-highlight);\n}\n\n.spectrum-palette-container {\n  border-top: 1px solid var(--sys-color-divider);\n  position: relative;\n  width: 100%;\n  padding: 6px 24px 6px 6px;\n  display: flex;\n  flex-wrap: wrap;\n}\n\n.spectrum-palette {\n  display: flex;\n  flex-wrap: wrap;\n  width: 198px;\n}\n\n.spectrum-palette-color {\n  width: 12px;\n  height: 12px;\n  flex: 0 0 12px;\n  border-radius: 2px;\n  margin: 6px;\n  cursor: pointer;\n  position: relative;\n  border: 1px solid var(--sys-color-divider);\n  background-position: -1px !important; /* stylelint-disable-line declaration-no-important */\n  z-index: 14;\n}\n\n.spectrum-palette-color-shadow {\n  position: absolute;\n  opacity: 0%;\n  margin: 0;\n  top: -5px;\n  left: 3px;\n  border: 0;\n  border-radius: 1px;\n  width: 11px;\n  height: 11px;\n}\n\n.spectrum-palette-color:hover:not(.spectrum-shades-shown)\n  > .spectrum-palette-color-shadow,\n.spectrum-palette-color:focus:not(.spectrum-shades-shown)\n  > .spectrum-palette-color-shadow {\n  opacity: 20%;\n}\n\n.spectrum-palette-color:hover:not(.spectrum-shades-shown)\n  > .spectrum-palette-color-shadow:first-child,\n.spectrum-palette-color:focus:not(.spectrum-shades-shown)\n  > .spectrum-palette-color-shadow:first-child {\n  opacity: 60%;\n  top: -3px;\n  left: 1px;\n}\n\n.palette-color-shades {\n  position: absolute;\n  background-color: var(--sys-color-cdt-base-container);\n  height: 228px;\n  width: 28px;\n  box-shadow: var(--drop-shadow);\n  z-index: 14;\n  border-radius: 2px;\n  transform-origin: 0 228px;\n  margin-top: 16px;\n  margin-left: -8px;\n}\n\n.spectrum-palette > .spectrum-palette-color.spectrum-shades-shown {\n  z-index: 15;\n}\n\n.palette-color-shades > .spectrum-palette-color {\n  margin: 8px 0 0;\n  margin-left: 8px;\n  width: 12px;\n}\n\n.spectrum-palette > .spectrum-palette-color {\n  transition: transform 100ms cubic-bezier(0, 0, 0.2, 1);\n  will-change: transform;\n  z-index: 13;\n}\n\n.palette-preview > .spectrum-palette-color {\n  margin-top: 1px;\n}\n\n.spectrum-palette > .spectrum-palette-color.empty-color {\n  border-color: transparent;\n}\n\n.spectrum-palette-color:not(.has-material-shades):focus {\n  border: 1px solid var(--sys-color-state-focus-ring);\n  transform: scale(1.4);\n}\n\n.palette-color-shades > .spectrum-palette-color:not(.empty-color):hover,\n.spectrum-palette\n  > .spectrum-palette-color:not(.empty-color, .has-material-shades):hover {\n  transform: scale(1.15);\n}\n\n.add-color-toolbar {\n  margin-left: -3px;\n  margin-top: -1px;\n}\n\n.spectrum-palette-switcher {\n  right: 10px;\n  top: 0;\n  margin-top: 9px;\n  position: absolute;\n}\n\n.palette-panel {\n  width: 100%;\n  position: absolute;\n  top: 100%;\n  display: flex;\n  flex-direction: column;\n  background-color: var(--sys-color-cdt-base-container);\n  z-index: 14;\n  transition: transform 200ms cubic-bezier(0, 0, 0.2, 1), visibility 0s 200ms;\n  border-top: 1px solid var(--sys-color-divider);\n  visibility: hidden;\n}\n\n.palette-panel-showing > .palette-panel {\n  transform: translateY(-100%);\n  transition-delay: 0s;\n  visibility: visible;\n}\n\n.palette-panel > devtools-toolbar {\n  position: absolute;\n  right: 6px;\n  top: 6px;\n}\n\n.palette-panel > div {\n  flex: 0 0 38px;\n  border-bottom: 1px solid var(--sys-color-divider);\n  padding: 12px;\n  line-height: 14px;\n  color: var(--sys-color-on-surface);\n}\n\n.palette-panel > div.palette-title {\n  font-size: 14px;\n  line-height: 16px;\n  color: var(--sys-color-on-surface);\n  flex-basis: 40px;\n}\n\ndiv.palette-preview {\n  display: flex;\n  cursor: pointer;\n}\n\n.palette-preview-title {\n  flex: 0 0 84px;\n}\n\n.palette-preview:focus-visible,\n.palette-preview:hover {\n  background-color: var(--sys-color-state-hover-on-subtle);\n}\n\n.spectrum-overlay {\n  z-index: 13;\n  visibility: hidden;\n  /* stylelint-disable-next-line plugin/use_theme_colors */\n  background-color: hsl(0deg 0% 0% / 50%);\n  /* See: crbug.com/1152736 for color variable migration. */\n  opacity: 0%;\n  transition: opacity 100ms cubic-bezier(0, 0, 0.2, 1), visibility 0s 100ms;\n}\n\n.palette-panel-showing > .spectrum-overlay {\n  transition-delay: 0s;\n  visibility: visible;\n  opacity: 100%;\n}\n\n.spectrum-contrast-container {\n  width: 100%;\n  height: 100%;\n}\n\n.spectrum-contrast-line,\n:host-context(.theme-with-dark-background) .spectrum-contrast-line {\n  fill: none;\n  stroke: #fff; /* stylelint-disable-line plugin/use_theme_colors */\n  opacity: 70%;\n  stroke-width: 1.5px;\n}\n\n.delete-color-toolbar {\n  position: absolute;\n  right: 0;\n  top: 0;\n  background-color: var(--sys-color-cdt-base-container);\n  visibility: hidden;\n  z-index: 3;\n  width: 36px;\n  display: flex;\n  align-items: center;\n  padding-left: 4px;\n  bottom: 2px;\n  border-bottom-right-radius: 2px;\n}\n\n@keyframes showDeleteToolbar {\n  from {\n    opacity: 0%;\n  }\n\n  to {\n    opacity: 100%;\n  }\n}\n\n.delete-color-toolbar.dragging {\n  visibility: visible;\n  animation: showDeleteToolbar 100ms 150ms cubic-bezier(0, 0, 0.2, 1) backwards;\n}\n\n.delete-color-toolbar-active {\n  background-color: var(--sys-color-state-hover-on-subtle);\n  color: var(--sys-color-cdt-base-container);\n}\n\n.swatch.contrast {\n  width: 30px;\n  height: 30px;\n  position: absolute;\n  top: 0;\n  right: 0;\n  left: auto;\n  background-image: var(--image-file-checker);\n  border-radius: 15px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n}\n\n.swatch.contrast .swatch-overlay {\n  padding: 0;\n}\n\n.background-color .text-preview {\n  color: var(--sys-color-inverse-surface);\n  font-size: 16px;\n  position: relative;\n  padding-bottom: 2px;\n}\n\n.swatch.contrast devtools-icon {\n  margin: -2px;\n}\n\n.no-contrast-info-available {\n  border-top: 1px solid var(--sys-color-divider);\n  position: relative;\n  width: 100%;\n  padding: 10px;\n  justify-content: center;\n  display: flex;\n  flex-wrap: wrap;\n}\n\n@media (forced-colors: active) {\n  :host {\n    border: 1px solid canvastext !important; /* stylelint-disable-line declaration-no-important */\n  }\n\n  .spectrum-color {\n    forced-color-adjust: none;\n  }\n\n  .spectrum-switcher:hover,\n  .spectrum-switcher:focus-visible {\n    forced-color-adjust: none;\n    background-color: Highlight !important; /* stylelint-disable-line declaration-no-important */\n  }\n\n  :host-context(.theme-with-dark-background) .spectrum-switcher {\n    filter: unset;\n  }\n\n  .spectrum-switcher:hover svg,\n  .spectrum-switcher:focus-visible svg {\n    fill: HighlightText;\n  }\n\n  .swatch {\n    forced-color-adjust: none;\n  }\n\n  .swatch-inner,\n  .swatch-overlay,\n  .swatch-inner-white {\n    border: 1px solid ButtonText;\n  }\n\n  .swatch-overlay:hover,\n  .swatch-overlay:focus-visible {\n    background-color: canvas !important; /* stylelint-disable-line declaration-no-important */\n  }\n\n  .spectrum-slider {\n    forced-color-adjust: none;\n    background-color: ButtonText !important; /* stylelint-disable-line declaration-no-important */\n    box-shadow: 0 1px 4px 0 ButtonFace !important; /* stylelint-disable-line declaration-no-important */\n  }\n}\n\n/*# sourceURL=${import.meta.resolve('./spectrum.css')} */`;"],
  "mappings": "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;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBAytBC,YAAY,QAAQ,g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",
  "names": ["Common", "Platform", "requiredContrast", "Common", "Common", "Root", "UI", "candidateHSVA", "Common", "i18n", "IconButton", "UI", "UIStrings", "str_", "i18nString", "section", "Swatch", "Common", "Host", "i18n", "Platform", "IconButton", "UI", "UIStrings", "str_", "i18nString", "Swatch"]
}
