{"version":3,"file":"LinkSwatch.test.js","sourceRoot":"","sources":["../../../../../../../../front_end/ui/legacy/components/inline_editor/LinkSwatch.test.ts"],"names":[],"mappings":"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","sourcesContent":["// Copyright 2020 The Chromium Authors\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\n\nimport {renderElementIntoDOM} from '../../../../testing/DOMHelpers.js';\nimport {setupLocaleHooks} from '../../../../testing/LocaleHelpers.js';\n\nimport * as InlineEditor from './inline_editor.js';\n\nfunction assertLinkSwatch(swatch: InlineEditor.LinkSwatch.LinkSwatch, expected: {\n  text: string|null,\n  title: string|null,\n  isDefined: boolean,\n}) {\n  const link = swatch!.querySelector('button');\n\n  assert.strictEqual(\n      link!.classList.contains('undefined'), !expected.isDefined,\n      'The link only has the class undefined when the property is undefined');\n  assert.strictEqual(link!.getAttribute('title'), expected.title, 'The link has the right tooltip');\n  assert.strictEqual(link!.textContent, expected.text, 'The link has the right text content');\n}\n\ndescribe('LinkSwatch', () => {\n  setupLocaleHooks();\n  it('can be instantiated successfully', () => {\n    const component = new InlineEditor.LinkSwatch.LinkSwatch();\n    renderElementIntoDOM(component);\n\n    assert.instanceOf(component, HTMLElement, 'The swatch is an instance of HTMLElement');\n  });\n\n  it('renders a simple text', () => {\n    const component = new InlineEditor.LinkSwatch.LinkSwatch();\n    component.data = {\n      text: 'test',\n      tooltip: undefined,\n      isDefined: true,\n      onLinkActivate: () => {},\n      jslogContext: 'test',\n    };\n    renderElementIntoDOM(component);\n\n    assertLinkSwatch(component, {\n      text: 'test',\n      title: null,\n      isDefined: true,\n    });\n  });\n\n  it('renders a missing test', () => {\n    const component = new InlineEditor.LinkSwatch.LinkSwatch();\n    component.data = {\n      text: 'test',\n      tooltip: {title: 'test is not defined'},\n      isDefined: false,\n      onLinkActivate: () => {},\n      jslogContext: 'test',\n    };\n    renderElementIntoDOM(component);\n\n    assertLinkSwatch(component, {\n      text: 'test',\n      title: 'test is not defined',\n      isDefined: false,\n    });\n  });\n\n  it('calls the onLinkActivate callback', async () => {\n    const component = new InlineEditor.LinkSwatch.LinkSwatch();\n    let callbackCalled = false;\n    component.data = {\n      text: 'testHandler',\n      tooltip: undefined,\n      isDefined: true,\n      onLinkActivate: () => {\n        callbackCalled = true;\n      },\n      jslogContext: 'test',\n    };\n\n    const element = renderElementIntoDOM(component).querySelector('button') as HTMLButtonElement;\n    element.click();\n\n    assert.isTrue(callbackCalled);\n  });\n});\n"]}