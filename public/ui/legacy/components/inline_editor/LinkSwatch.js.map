{"version":3,"file":"LinkSwatch.js","sourceRoot":"","sources":["../../../../../../../../front_end/ui/legacy/components/inline_editor/LinkSwatch.ts"],"names":[],"mappings":"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","sourcesContent":["// Copyright (c) 2020 The Chromium Authors. All rights reserved.\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\n\nimport * as Platform from '../../../../core/platform/platform.js';\nimport * as Buttons from '../../../components/buttons/buttons.js';\nimport * as Lit from '../../../lit/lit.js';\nimport * as VisualLogging from '../../../visual_logging/visual_logging.js';\n\nimport linkSwatchStyles from './linkSwatch.css.js';\n\nconst {render, html, nothing, Directives: {ref, ifDefined, classMap}} = Lit;\n\nexport interface LinkSwatchRenderData {\n  tooltip: {tooltipId: string}|{title: string}|undefined;\n  text: string;\n  isDefined: boolean;\n  jslogContext?: string;\n  onLinkActivate: (linkText: string) => void;\n}\n\nexport class LinkSwatch extends HTMLElement {\n  protected onLinkActivate: (linkText: string, event: MouseEvent|KeyboardEvent) => void = () => undefined;\n  #linkElement: HTMLElement|undefined;\n\n  connectedCallback(): void {\n  }\n\n  set data(data: LinkSwatchRenderData) {\n    this.onLinkActivate = (linkText: string, event: MouseEvent|KeyboardEvent) => {\n      if (event instanceof MouseEvent && event.button !== 0) {\n        return;\n      }\n      if (event instanceof KeyboardEvent && event.key !== Platform.KeyboardUtilities.ENTER_KEY && event.key !== ' ') {\n        return;\n      }\n\n      data.onLinkActivate(linkText);\n      event.consume(true);\n    };\n    this.render(data);\n  }\n\n  get linkElement(): HTMLElement|undefined {\n    return this.#linkElement;\n  }\n\n  private render(data: LinkSwatchRenderData): void {\n    const {isDefined, text, jslogContext, tooltip} = data;\n    const classes = classMap({\n      'link-style': true,\n      'text-button': true,\n      'link-swatch-link': true,\n      undefined: !isDefined,\n    });\n    // The linkText's space must be removed, otherwise it cannot be triggered when clicked.\n    const onActivate = isDefined ? this.onLinkActivate.bind(this, text.trim()) : null;\n\n    const title = tooltip && 'title' in tooltip && tooltip.title || undefined;\n    const tooltipId = tooltip && 'tooltipId' in tooltip && tooltip.tooltipId || undefined;\n\n    render(\n        // clang-format off\n        html`<style>${Buttons.textButtonStyles.cssContent}</style><style>${linkSwatchStyles.cssContent}</style><button\n          .disabled=${!isDefined}\n          jslog=${jslogContext ? VisualLogging.link().track({click: true}).context(jslogContext) : nothing}\n          class=${classes}\n          type=\"button\"\n          title=${ifDefined(title)}\n          aria-details=${ifDefined(tooltipId)}\n          @click=${onActivate}\n          @keydown=${onActivate}\n          role=\"link\"\n          tabindex=${ifDefined(isDefined ? -1 : undefined)}\n          ${ref(e => {\n            this.#linkElement = e as HTMLElement;\n          })}\n          >${text}</button>`,\n        // clang-format on\n        this);\n  }\n}\n\ncustomElements.define('devtools-link-swatch', LinkSwatch);\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    'devtools-link-swatch': LinkSwatch;\n  }\n}\n"]}