{"version":3,"file":"DeviceBoundSessionsTreeElement.test.js","sourceRoot":"","sources":["../../../../../../front_end/panels/application/DeviceBoundSessionsTreeElement.test.ts"],"names":[],"mappings":"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","sourcesContent":["// Copyright 2026 The Chromium Authors\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\n\nimport * as SDK from '../../core/sdk/sdk.js';\nimport type * as Protocol from '../../generated/protocol.js';\nimport {createTarget} from '../../testing/EnvironmentHelpers.js';\nimport {describeWithMockConnection} from '../../testing/MockConnection.js';\nimport type {TreeElement} from '../../ui/legacy/Treeoutline.js';\n\nimport * as Application from './application.js';\nimport type {ResourcesPanel} from './ResourcesPanel.js';\n\ndescribeWithMockConnection('DeviceBoundSessionsTreeElement', () => {\n  let model: Application.DeviceBoundSessionsModel.DeviceBoundSessionsModel;\n  let target: SDK.Target.Target;\n  let mockPanel: ResourcesPanel;\n\n  function makeSession(site: string, sessionId: string): Protocol.Network.DeviceBoundSession {\n    return {\n      key: {site, id: sessionId},\n      refreshUrl: 'https://example1.com/refresh',\n      inclusionRules: {origin: 'https://example1.com', includeSite: true, urlRules: []},\n      cookieCravings: [],\n      expiryDate: 1767225600,\n      allowedRefreshInitiators: [],\n    };\n  }\n\n  beforeEach(() => {\n    target = createTarget();\n    const networkManager = target.model(SDK.NetworkManager.NetworkManager)!;\n    model = new Application.DeviceBoundSessionsModel.DeviceBoundSessionsModel();\n    model.modelAdded(networkManager);\n    mockPanel = {} as unknown as ResourcesPanel;\n  });\n\n  it('builds the correct tree hierarchy on INITIALIZE_SESSIONS event only for visible sites', () => {\n    const root = new Application.DeviceBoundSessionsTreeElement.RootTreeElement(mockPanel, model);\n    root.onbind();\n\n    model.addVisibleSite('example1.com');\n    model.addVisibleSite('example2.com');\n\n    const sessions = [\n      makeSession('example1.com', 'session_1'),\n      makeSession('example1.com', 'session_2'),\n      makeSession('example2.com', 'session_3'),\n      makeSession('hidden.com', 'session_4'),\n    ];\n\n    model.dispatchEventToListeners(\n        Application.DeviceBoundSessionsModel.DeviceBoundSessionModelEvents.INITIALIZE_SESSIONS, {sessions});\n\n    // Verify site nodes.\n    assert.strictEqual(root.childCount(), 2);\n    const site1Node = root.children()[0];\n    const site2Node = root.children()[1];\n    assert.strictEqual(site1Node.title, 'example1.com');\n    assert.strictEqual(site2Node.title, 'example2.com');\n\n    // Verify session nodes under example1.com.\n    assert.strictEqual(site1Node.childCount(), 2);\n    assert.strictEqual(site1Node.children()[0].title, 'session_1');\n    assert.strictEqual(site1Node.children()[1].title, 'session_2');\n    // Verify session nodes under example2.com.\n    assert.strictEqual(site2Node.childCount(), 1);\n    assert.strictEqual(site2Node.children()[0].title, 'session_3');\n  });\n\n  it('adds a tree element when a site becomes visible after data is already loaded', () => {\n    const root = new Application.DeviceBoundSessionsTreeElement.RootTreeElement(mockPanel, model);\n    root.onbind();\n\n    const sessions = [\n      makeSession('example1.com', 'session_1'),\n      makeSession('example2.com', 'session_1'),\n      makeSession('example2.com', 'session_2'),\n      makeSession('hidden.com', 'session_3'),\n    ];\n    model.dispatchEventToListeners(\n        Application.DeviceBoundSessionsModel.DeviceBoundSessionModelEvents.INITIALIZE_SESSIONS, {sessions});\n    assert.strictEqual(root.childCount(), 0);\n\n    model.addVisibleSite('example1.com');\n    model.addVisibleSite('example2.com');\n    assert.strictEqual(root.childCount(), 2);\n    const siteNode1 = root.children()[0];\n    assert.strictEqual(siteNode1.title, 'example1.com');\n    assert.strictEqual(siteNode1.childCount(), 1);\n    assert.strictEqual(siteNode1.children()[0].title, 'session_1');\n    const siteNode2 = root.children()[1];\n    assert.strictEqual(siteNode2.title, 'example2.com');\n    assert.strictEqual(siteNode2.childCount(), 2);\n    assert.strictEqual(siteNode2.children()[0].title, 'session_1');\n    assert.strictEqual(siteNode2.children()[1].title, 'session_2');\n  });\n\n  it('removes empty tree elements on CLEAR_EVENTS', () => {\n    const root = new Application.DeviceBoundSessionsTreeElement.RootTreeElement(mockPanel, model);\n    root.onbind();\n    model.addVisibleSite('example1.com');\n    model.addVisibleSite('example2.com');\n\n    model.dispatchEventToListeners(\n        Application.DeviceBoundSessionsModel.DeviceBoundSessionModelEvents.EVENT_OCCURRED,\n        {site: 'example1.com', sessionId: undefined});\n    model.dispatchEventToListeners(\n        Application.DeviceBoundSessionsModel.DeviceBoundSessionModelEvents.EVENT_OCCURRED,\n        {site: 'example1.com', sessionId: 'session_1'});\n    model.dispatchEventToListeners(\n        Application.DeviceBoundSessionsModel.DeviceBoundSessionModelEvents.EVENT_OCCURRED,\n        {site: 'example1.com', sessionId: 'session_2'});\n    model.dispatchEventToListeners(\n        Application.DeviceBoundSessionsModel.DeviceBoundSessionModelEvents.EVENT_OCCURRED,\n        {site: 'example2.com', sessionId: 'session_1'});\n    model.dispatchEventToListeners(\n        Application.DeviceBoundSessionsModel.DeviceBoundSessionModelEvents.EVENT_OCCURRED,\n        {site: 'hidden.com', sessionId: 'session_1'});\n\n    assert.strictEqual(root.childCount(), 2);\n    const siteNode1 = root.children()[0];\n    const siteNode2 = root.children()[1];\n    assert.strictEqual(siteNode1.title, 'example1.com');\n    assert.strictEqual(siteNode2.title, 'example2.com');\n    assert.strictEqual(siteNode1.childCount(), 3);\n    assert.strictEqual(siteNode2.childCount(), 1);\n    assert.strictEqual(siteNode1.children()[0].title, 'No session');\n    assert.strictEqual(siteNode1.children()[1].title, 'session_1');\n    assert.strictEqual(siteNode1.children()[2].title, 'session_2');\n    assert.strictEqual(siteNode2.children()[0].title, 'session_1');\n\n    model.dispatchEventToListeners(Application.DeviceBoundSessionsModel.DeviceBoundSessionModelEvents.CLEAR_EVENTS, {\n      emptySessions: new Map([\n        ['example1.com', [undefined, 'session_1']],\n        ['example2.com', ['session_1']],\n        ['hidden.com', ['session_1']],\n      ]),\n      emptySites: new Set(['example2.com', 'hidden.com']),\n      noLongerFailedSessions: new Map(),\n    });\n\n    model.addVisibleSite('hidden.com');\n\n    assert.strictEqual(root.childCount(), 1);\n    const siteNode = root.children()[0];\n    assert.strictEqual(siteNode.title, 'example1.com');\n    assert.strictEqual(siteNode.children()[0].title, 'session_2');\n  });\n\n  it('removes a tree element if visible sites are cleared', () => {\n    const root = new Application.DeviceBoundSessionsTreeElement.RootTreeElement(mockPanel, model);\n    root.onbind();\n\n    model.addVisibleSite('example.com');\n    const session = makeSession('example.com', 'session_1');\n    model.dispatchEventToListeners(\n        Application.DeviceBoundSessionsModel.DeviceBoundSessionModelEvents.INITIALIZE_SESSIONS, {sessions: [session]});\n    assert.strictEqual(root.childCount(), 1);\n    model.clearVisibleSites();\n    assert.strictEqual(root.childCount(), 0);\n  });\n\n  it('does not duplicate sites or sessions if data is re-sent', () => {\n    const root = new Application.DeviceBoundSessionsTreeElement.RootTreeElement(mockPanel, model);\n    root.onbind();\n\n    model.addVisibleSite('example1.com');\n    const session = makeSession('example1.com', 'session_1');\n\n    // First event.\n    model.dispatchEventToListeners(\n        Application.DeviceBoundSessionsModel.DeviceBoundSessionModelEvents.INITIALIZE_SESSIONS, {sessions: [session]});\n    assert.strictEqual(root.childCount(), 1);\n    assert.strictEqual(root.children()[0].childCount(), 1);\n\n    // Second event.\n    model.dispatchEventToListeners(\n        Application.DeviceBoundSessionsModel.DeviceBoundSessionModelEvents.INITIALIZE_SESSIONS, {sessions: [session]});\n    assert.strictEqual(root.childCount(), 1);\n    assert.strictEqual(root.children()[0].childCount(), 1);\n  });\n\n  it('shows the details view when a session tree element is selected', () => {\n    const showSessionSpy = sinon.spy();\n    mockPanel.showDeviceBoundSession = showSessionSpy;\n    const root = new Application.DeviceBoundSessionsTreeElement.RootTreeElement(mockPanel, model);\n    root.onbind();\n\n    model.addVisibleSite('example.com');\n    const session = makeSession('example.com', 'session-123');\n    model.dispatchEventToListeners(\n        Application.DeviceBoundSessionsModel.DeviceBoundSessionModelEvents.INITIALIZE_SESSIONS, {sessions: [session]});\n\n    assert.strictEqual(root.childCount(), 1);\n    const siteNode = root.children()[0];\n    assert.strictEqual(siteNode.childCount(), 1);\n    const sessionNode = siteNode.children()[0];\n    sessionNode.onselect(false);\n\n    sinon.assert.calledOnce(showSessionSpy);\n    sinon.assert.calledWith(showSessionSpy, model, 'example.com', 'session-123');\n  });\n\n  it('shows the default view when a site tree element is selected', () => {\n    const showDefaultSpy = sinon.spy();\n    mockPanel.showDeviceBoundSessionDefault = showDefaultSpy;\n    const root = new Application.DeviceBoundSessionsTreeElement.RootTreeElement(mockPanel, model);\n    root.onbind();\n\n    model.addVisibleSite('example.com');\n    const session = makeSession('example.com', 'session-123');\n    model.dispatchEventToListeners(\n        Application.DeviceBoundSessionsModel.DeviceBoundSessionModelEvents.INITIALIZE_SESSIONS, {sessions: [session]});\n\n    assert.strictEqual(root.childCount(), 1);\n    const siteNode = root.children()[0];\n    siteNode.onselect(false);\n\n    sinon.assert.calledOnce(showDefaultSpy);\n    sinon.assert.calledWith(\n        showDefaultSpy, model, 'Device bound sessions',\n        'On this page you can view device bound sessions and associated events');\n  });\n\n  it('shows the default view when the root tree element is selected', () => {\n    const showDefaultSpy = sinon.spy();\n    mockPanel.showDeviceBoundSessionDefault = showDefaultSpy;\n    const root = new Application.DeviceBoundSessionsTreeElement.RootTreeElement(mockPanel, model);\n    root.onbind();\n\n    root.onselect(false);\n\n    sinon.assert.calledOnce(showDefaultSpy);\n    sinon.assert.calledWith(\n        showDefaultSpy, model, 'Device bound sessions',\n        'On this page you can view device bound sessions and associated events');\n  });\n\n  it('adds a tree element when EVENT_OCCURRED fires for a new session', () => {\n    const root = new Application.DeviceBoundSessionsTreeElement.RootTreeElement(mockPanel, model);\n    root.onbind();\n\n    model.addVisibleSite('example1.com');\n    model.addVisibleSite('example2.com');\n    assert.strictEqual(root.childCount(), 0);\n\n    // An event occurs that adds a new site + session.\n    model.dispatchEventToListeners(\n        Application.DeviceBoundSessionsModel.DeviceBoundSessionModelEvents.EVENT_OCCURRED,\n        {site: 'example1.com', sessionId: 'session_1'});\n    assert.strictEqual(root.childCount(), 1);\n    const siteNode1 = root.children()[0];\n    assert.strictEqual(siteNode1.title, 'example1.com');\n    assert.strictEqual(siteNode1.childCount(), 1);\n    assert.strictEqual(siteNode1.children()[0].title, 'session_1');\n\n    // An event occurs that adds a new session to the existing site.\n    model.dispatchEventToListeners(\n        Application.DeviceBoundSessionsModel.DeviceBoundSessionModelEvents.EVENT_OCCURRED,\n        {site: 'example1.com', sessionId: 'session_2'});\n    assert.strictEqual(root.childCount(), 1);\n    const siteNode2 = root.children()[0];\n    assert.strictEqual(siteNode2.title, 'example1.com');\n    assert.strictEqual(siteNode2.childCount(), 2);\n    assert.strictEqual(siteNode2.children()[0].title, 'session_1');\n    assert.strictEqual(siteNode2.children()[1].title, 'session_2');\n\n    // An event occurs that adds a \"no session\" to the existing site.\n    model.dispatchEventToListeners(\n        Application.DeviceBoundSessionsModel.DeviceBoundSessionModelEvents.EVENT_OCCURRED, {site: 'example1.com'});\n    assert.strictEqual(root.childCount(), 1);\n    const siteNode3 = root.children()[0];\n    assert.strictEqual(siteNode3.title, 'example1.com');\n    assert.strictEqual(siteNode3.childCount(), 3);\n    assert.strictEqual(siteNode3.children()[0].title, 'No session');\n    assert.isTrue(siteNode3.children()[0].listItemElement.classList.contains('no-device-bound-session'));\n    assert.strictEqual(siteNode3.children()[1].title, 'session_1');\n    assert.isFalse(siteNode3.children()[1].listItemElement.classList.contains('no-device-bound-session'));\n    assert.strictEqual(siteNode3.children()[2].title, 'session_2');\n    assert.isFalse(siteNode3.children()[2].listItemElement.classList.contains('no-device-bound-session'));\n\n    // An event occurs that adds a \"no session\" to a new site.\n    model.dispatchEventToListeners(\n        Application.DeviceBoundSessionsModel.DeviceBoundSessionModelEvents.EVENT_OCCURRED, {site: 'example2.com'});\n    assert.strictEqual(root.childCount(), 2);\n    assert.strictEqual(root.children()[0].title, 'example1.com');\n    const siteNode4 = root.children()[1];\n    assert.strictEqual(siteNode4.title, 'example2.com');\n    assert.strictEqual(siteNode4.childCount(), 1);\n    assert.strictEqual(siteNode4.children()[0].title, 'No session');\n    assert.isTrue(siteNode4.children()[0].listItemElement.classList.contains('no-device-bound-session'));\n\n    // An event occurs that adds a new session + site but it is not visible.\n    model.dispatchEventToListeners(\n        Application.DeviceBoundSessionsModel.DeviceBoundSessionModelEvents.EVENT_OCCURRED,\n        {site: 'hidden.com', sessionId: 'hidden_session'});\n    assert.strictEqual(root.childCount(), 2);\n    assert.strictEqual(root.children()[0].title, 'example1.com');\n    assert.strictEqual(root.children()[1].title, 'example2.com');\n  });\n\n  it('updates the session tree element visual state when a session is terminated', () => {\n    const root = new Application.DeviceBoundSessionsTreeElement.RootTreeElement(mockPanel, model);\n    root.onbind();\n\n    const site = 'example.com';\n    const sessionId = 'session_1';\n    const otherSessionId = 'session_2';\n    model.addVisibleSite(site);\n\n    const session1 = makeSession(site, sessionId);\n    const session2 = makeSession(site, otherSessionId);\n    model.dispatchEventToListeners(\n        Application.DeviceBoundSessionsModel.DeviceBoundSessionModelEvents.INITIALIZE_SESSIONS,\n        {sessions: [session1, session2]});\n    const siteNode = root.children()[0];\n    const session1Node = siteNode.children()[0];\n    const session2Node = siteNode.children()[1];\n\n    // Initially is not terminated.\n    assert.isFalse(session1Node.listItemElement.classList.contains('device-bound-session-terminated'));\n    assert.isFalse(session2Node.listItemElement.classList.contains('device-bound-session-terminated'));\n\n    // Simulate termination event.\n    const isSessionTerminatedStub = sinon.stub(model, 'isSessionTerminated');\n    isSessionTerminatedStub.withArgs(site, sessionId).returns(true);\n    model.dispatchEventToListeners(\n        Application.DeviceBoundSessionsModel.DeviceBoundSessionModelEvents.EVENT_OCCURRED, {site, sessionId});\n\n    // Session 1 should now be terminated. Session 2 remains unterminated.\n    assert.isTrue(session1Node.listItemElement.classList.contains('device-bound-session-terminated'));\n    assert.isFalse(session2Node.listItemElement.classList.contains('device-bound-session-terminated'));\n\n    // Simulate recreation event.\n    isSessionTerminatedStub.withArgs(site, sessionId).returns(false);\n    model.dispatchEventToListeners(\n        Application.DeviceBoundSessionsModel.DeviceBoundSessionModelEvents.EVENT_OCCURRED, {site, sessionId});\n\n    // Session 1 should no longer be terminated.\n    assert.isFalse(session1Node.listItemElement.classList.contains('device-bound-session-terminated'));\n    assert.isFalse(session2Node.listItemElement.classList.contains('device-bound-session-terminated'));\n  });\n\n  it('updates the session tree element visual state when a session has errors', () => {\n    const root = new Application.DeviceBoundSessionsTreeElement.RootTreeElement(mockPanel, model);\n    root.onbind();\n\n    const site = 'example.com';\n    const sessionId = 'session_1';\n    const sessionId2 = 'session_2';\n    model.addVisibleSite(site);\n\n    const session = makeSession(site, sessionId);\n    const session2 = makeSession(site, sessionId2);\n    model.dispatchEventToListeners(\n        Application.DeviceBoundSessionsModel.DeviceBoundSessionModelEvents.INITIALIZE_SESSIONS,\n        {sessions: [session, session2]});\n    const siteNode = root.children()[0];\n    const sessionNode = siteNode.children()[0];\n    const sessionNode2 = siteNode.children()[1];\n\n    function checkIcon(node: TreeElement, expectedIcon: string) {\n      const icon = node.listItemElement.querySelector('devtools-icon');\n      assert.exists(icon);\n      assert.strictEqual(icon.getAttribute('name'), expectedIcon);\n    }\n\n    // Initially has database icon.\n    checkIcon(sessionNode, 'database');\n    checkIcon(sessionNode2, 'database');\n\n    // A failed event should change it to a warning icon.\n    const sessionHasErrorsStub = sinon.stub(model, 'sessionHasErrors');\n    sessionHasErrorsStub.withArgs(site, sessionId).returns(true);\n    model.dispatchEventToListeners(\n        Application.DeviceBoundSessionsModel.DeviceBoundSessionModelEvents.EVENT_OCCURRED, {site, sessionId});\n    checkIcon(sessionNode, 'warning');\n    checkIcon(sessionNode2, 'database');\n\n    // Clearing events should change it back to a database icon.\n    sessionHasErrorsStub.withArgs(site, sessionId).returns(false);\n    model.dispatchEventToListeners(Application.DeviceBoundSessionsModel.DeviceBoundSessionModelEvents.CLEAR_EVENTS, {\n      emptySessions: new Map(),\n      emptySites: new Set(),\n      noLongerFailedSessions: new Map([[site, [sessionId]]]),\n    });\n    checkIcon(sessionNode, 'database');\n    checkIcon(sessionNode2, 'database');\n  });\n});\n"]}