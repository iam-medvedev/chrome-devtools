{"version":3,"file":"InterestGroupTreeElement.test.js","sourceRoot":"","sources":["../../../../../../front_end/panels/application/InterestGroupTreeElement.test.ts"],"names":[],"mappings":"AAAA,4DAA4D;AAC5D,yEAAyE;AACzE,6BAA6B;AAE7B,MAAM,EAAC,MAAM,EAAC,GAAG,IAAI,CAAC;AAEtB,OAAO,KAAK,SAAS,MAAM,kBAAkB,CAAC;AAE9C,OAAO,KAAK,GAAG,MAAM,uBAAuB,CAAC;AAC7C,OAAO,EAAC,0BAA0B,EAAC,MAAM,iCAAiC,CAAC;AAC3E,OAAO,EAAC,YAAY,EAAC,MAAM,qCAAqC,CAAC;AAEjE,0BAA0B,CAAC,0BAA0B,EAAE,GAAG,EAAE;IAC1D,MAAM,KAAK,GAAG,OAAO,CAAC;IACtB,MAAM,IAAI,GAAG,MAAM,CAAC;IACpB,MAAM,OAAO,GAAG;QACd,WAAW,EAAE,KAAK;QAClB,IAAI,EAAE,IAAI;QACV,cAAc,EAAE,EAAE;QAClB,aAAa,EAAE,gBAAgB;QAC/B,yBAAyB,EAAE,EAAE;QAC7B,GAAG,EAAE,EAAE;QACP,YAAY,EAAE,EAAE;KACwB,CAAC;IAE3C,EAAE,CAAC,kCAAkC,EAAE,KAAK,IAAI,EAAE;QAChD,MAAM,MAAM,GAAG,YAAY,EAAE,CAAC;QAC9B,MAAM,IAAI,GACN,IAAI,SAAS,CAAC,wBAAwB,CAAC,wBAAwB,CAAC,EAA6C,CAAC,CAAC;QACnH,KAAK,CAAC,IAAI,CAAC,MAAM,CAAC,YAAY,EAAE,EAAE,gCAAgC,CAAC;aAC9D,QAAQ,CAAC,EAAC,WAAW,EAAE,KAAK,EAAE,IAAI,EAAE,IAAI,EAAC,CAAC;aAC1C,OAAO,CAAC,OAAO,CAAC,OAAO,CAAC,EAAC,OAAO,EAAE,OAAO,EAAqD,CAAC,CAAC,CAAC;QACtG,MAAM,OAAO,GAAG,MAAM,IAAI,CAAC,uBAAuB,CAAC,KAAK,EAAE,IAAI,CAAC,CAAC;QAChE,MAAM,CAAC,eAAe,CAAC,OAAO,EAAE,OAAO,CAAC,CAAC;IAC3C,CAAC,CAAC,CAAC;IAEH,EAAE,CAAC,+BAA+B,EAAE,KAAK,IAAI,EAAE;QAC7C,MAAM,SAAS,GAAG,YAAY,CAAC,EAAC,IAAI,EAAE,GAAG,CAAC,MAAM,CAAC,IAAI,CAAC,GAAG,EAAC,CAAC,CAAC;QAC5D,MAAM,WAAW,GAAG,YAAY,CAAC,EAAC,YAAY,EAAE,SAAS,EAAC,CAAC,CAAC;QAC5D,YAAY,CAAC,EAAC,YAAY,EAAE,SAAS,EAAE,OAAO,EAAE,WAAW,EAAC,CAAC,CAAC;QAC9D,MAAM,IAAI,GACN,IAAI,SAAS,CAAC,wBAAwB,CAAC,wBAAwB,CAAC,EAA6C,CAAC,CAAC;QACnH,KAAK,CAAC,IAAI,CAAC,WAAW,CAAC,YAAY,EAAE,EAAE,gCAAgC,CAAC;aACnE,QAAQ,CAAC,EAAC,WAAW,EAAE,KAAK,EAAE,IAAI,EAAE,IAAI,EAAC,CAAC;aAC1C,OAAO,CAAC,OAAO,CAAC,OAAO,CAAC,EAAC,OAAO,EAAE,OAAO,EAAqD,CAAC,CAAC,CAAC;QACtG,MAAM,OAAO,GAAG,MAAM,IAAI,CAAC,uBAAuB,CAAC,KAAK,EAAE,IAAI,CAAC,CAAC;QAChE,MAAM,CAAC,eAAe,CAAC,OAAO,EAAE,OAAO,CAAC,CAAC;IAC3C,CAAC,CAAC,CAAC;AACL,CAAC,CAAC,CAAC","sourcesContent":["// Copyright 2022 The Chromium Authors. All rights reserved.\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\n\nconst {assert} = chai;\n\nimport * as Resources from './application.js';\nimport type * as Protocol from '../../generated/protocol.js';\nimport * as SDK from '../../core/sdk/sdk.js';\nimport {describeWithMockConnection} from '../../testing/MockConnection.js';\nimport {createTarget} from '../../testing/EnvironmentHelpers.js';\n\ndescribeWithMockConnection('InterestGroupTreeElement', () => {\n  const OWNER = 'OWNER';\n  const NAME = 'NAME';\n  const DETAILS = {\n    ownerOrigin: OWNER,\n    name: NAME,\n    expirationTime: 42,\n    joiningOrigin: 'JOINING_ORIGIN',\n    trustedBiddingSignalsKeys: [],\n    ads: [],\n    adComponents: [],\n  } as Protocol.Storage.InterestGroupDetails;\n\n  it('reads details without tab target', async () => {\n    const target = createTarget();\n    const view =\n        new Resources.InterestGroupTreeElement.InterestGroupTreeElement({} as Resources.ResourcesPanel.ResourcesPanel);\n    sinon.stub(target.storageAgent(), 'invoke_getInterestGroupDetails')\n        .withArgs({ownerOrigin: OWNER, name: NAME})\n        .returns(Promise.resolve({details: DETAILS} as Protocol.Storage.GetInterestGroupDetailsResponse));\n    const details = await view.getInterestGroupDetails(OWNER, NAME);\n    assert.deepStrictEqual(details, DETAILS);\n  });\n\n  it('reads details with tab target', async () => {\n    const tabTarget = createTarget({type: SDK.Target.Type.Tab});\n    const frameTarget = createTarget({parentTarget: tabTarget});\n    createTarget({parentTarget: tabTarget, subtype: 'prerender'});\n    const view =\n        new Resources.InterestGroupTreeElement.InterestGroupTreeElement({} as Resources.ResourcesPanel.ResourcesPanel);\n    sinon.stub(frameTarget.storageAgent(), 'invoke_getInterestGroupDetails')\n        .withArgs({ownerOrigin: OWNER, name: NAME})\n        .returns(Promise.resolve({details: DETAILS} as Protocol.Storage.GetInterestGroupDetailsResponse));\n    const details = await view.getInterestGroupDetails(OWNER, NAME);\n    assert.deepStrictEqual(details, DETAILS);\n  });\n});\n"]}