{"version":3,"file":"PreloadingDetailsReportView.js","sourceRoot":"","sources":["../../../../../../../../front_end/panels/application/preloading/components/PreloadingDetailsReportView.ts"],"names":[],"mappings":"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","sourcesContent":["// Copyright 2022 The Chromium Authors. All rights reserved.\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\n\nimport '../../../../ui/components/report_view/report_view.js';\nimport '../../../../ui/components/request_link_icon/request_link_icon.js';\n\nimport * as Common from '../../../../core/common/common.js';\nimport * as i18n from '../../../../core/i18n/i18n.js';\nimport type * as Platform from '../../../../core/platform/platform.js';\nimport {assertNotNullOrUndefined} from '../../../../core/platform/platform.js';\nimport * as SDK from '../../../../core/sdk/sdk.js';\nimport * as Protocol from '../../../../generated/protocol.js';\nimport * as Logs from '../../../../models/logs/logs.js';\nimport * as Buttons from '../../../../ui/components/buttons/buttons.js';\nimport * as LegacyWrapper from '../../../../ui/components/legacy_wrapper/legacy_wrapper.js';\nimport * as RenderCoordinator from '../../../../ui/components/render_coordinator/render_coordinator.js';\n// eslint-disable-next-line rulesdir/es-modules-import\nimport inspectorCommonStylesRaw from '../../../../ui/legacy/inspectorCommon.css.js';\nimport * as UI from '../../../../ui/legacy/legacy.js';\nimport * as Lit from '../../../../ui/lit/lit.js';\nimport * as VisualLogging from '../../../../ui/visual_logging/visual_logging.js';\nimport * as PreloadingHelper from '../helper/helper.js';\n\nimport preloadingDetailsReportViewStylesRaw from './preloadingDetailsReportView.css.js';\nimport * as PreloadingString from './PreloadingString.js';\nimport {prefetchFailureReason, prerenderFailureReason, ruleSetLocationShort} from './PreloadingString.js';\n\n// TODO(crbug.com/391381439): Fully migrate off of constructed style sheets.\nconst preloadingDetailsReportViewStyles = new CSSStyleSheet();\npreloadingDetailsReportViewStyles.replaceSync(preloadingDetailsReportViewStylesRaw.cssContent);\n\n// TODO(crbug.com/391381439): Fully migrate off of constructed style sheets.\nconst inspectorCommonStyles = new CSSStyleSheet();\ninspectorCommonStyles.replaceSync(inspectorCommonStylesRaw.cssContent);\n\nconst {html} = Lit;\n\nconst UIStrings = {\n  /**\n   *@description Text in PreloadingDetailsReportView of the Application panel if no element is selected. An element here is an item in a\n   * table of target URLs and additional prefetching states. https://developer.chrome.com/docs/devtools/application/debugging-speculation-rules\n   */\n  noElementSelected: 'No element selected',\n  /**\n   *@description Text in PreloadingDetailsReportView of the Application panel to prompt user to select an element in a table. An element here is an item in a\n   * table of target URLs and additional prefetching states. https://developer.chrome.com/docs/devtools/application/debugging-speculation-rules\n   */\n  selectAnElementForMoreDetails: 'Select an element for more details',\n  /**\n   *@description Text in details\n   */\n  detailsDetailedInformation: 'Detailed information',\n  /**\n   *@description Text in details\n   */\n  detailsAction: 'Action',\n  /**\n   *@description Text in details\n   */\n  detailsStatus: 'Status',\n  /**\n   *@description Text in details\n   */\n  detailsFailureReason: 'Failure reason',\n  /**\n   *@description Header of rule set\n   */\n  detailsRuleSet: 'Rule set',\n  /**\n   *@description Description: status\n   */\n  automaticallyFellBackToPrefetch: '(automatically fell back to prefetch)',\n  /**\n   *@description Description: status\n   */\n  detailedStatusNotTriggered: 'Speculative load attempt is not yet triggered.',\n  /**\n   *@description Description: status\n   */\n  detailedStatusPending: 'Speculative load attempt is eligible but pending.',\n  /**\n   *@description Description: status\n   */\n  detailedStatusRunning: 'Speculative load is running.',\n  /**\n   *@description Description: status\n   */\n  detailedStatusReady: 'Speculative load finished and the result is ready for the next navigation.',\n  /**\n   *@description Description: status\n   */\n  detailedStatusSuccess: 'Speculative load finished and used for a navigation.',\n  /**\n   *@description Description: status\n   */\n  detailedStatusFailure: 'Speculative load failed.',\n  /**\n   *@description Description: status\n   */\n  detailedStatusFallbackToPrefetch: 'Speculative load failed, but fallback to prefetch succeeded.',\n  /**\n   *@description button: Contents of button to inspect prerendered page\n   */\n  buttonInspect: 'Inspect',\n  /**\n   *@description button: Title of button to inspect prerendered page\n   */\n  buttonClickToInspect: 'Click to inspect prerendered page',\n  /**\n   *@description button: Title of button to reveal rule set\n   */\n  buttonClickToRevealRuleSet: 'Click to reveal rule set',\n} as const;\nconst str_ =\n    i18n.i18n.registerUIStrings('panels/application/preloading/components/PreloadingDetailsReportView.ts', UIStrings);\nconst i18nString = i18n.i18n.getLocalizedString.bind(undefined, str_);\n\nclass PreloadingUIUtils {\n  static detailedStatus({status}: SDK.PreloadingModel.PreloadingAttempt): string {\n    // See content/public/browser/preloading.h PreloadingAttemptOutcome.\n    switch (status) {\n      case SDK.PreloadingModel.PreloadingStatus.NOT_TRIGGERED:\n        return i18nString(UIStrings.detailedStatusNotTriggered);\n      case SDK.PreloadingModel.PreloadingStatus.PENDING:\n        return i18nString(UIStrings.detailedStatusPending);\n      case SDK.PreloadingModel.PreloadingStatus.RUNNING:\n        return i18nString(UIStrings.detailedStatusRunning);\n      case SDK.PreloadingModel.PreloadingStatus.READY:\n        return i18nString(UIStrings.detailedStatusReady);\n      case SDK.PreloadingModel.PreloadingStatus.SUCCESS:\n        return i18nString(UIStrings.detailedStatusSuccess);\n      case SDK.PreloadingModel.PreloadingStatus.FAILURE:\n        return i18nString(UIStrings.detailedStatusFailure);\n      // NotSupported is used to handle unreachable case. For example,\n      // there is no code path for\n      // PreloadingTriggeringOutcome::kTriggeredButPending in prefetch,\n      // which is mapped to NotSupported. So, we regard it as an\n      // internal error.\n      case SDK.PreloadingModel.PreloadingStatus.NOT_SUPPORTED:\n        return i18n.i18n.lockedString('Internal error');\n    }\n  }\n}\n\nexport type PreloadingDetailsReportViewData = PreloadingDetailsReportViewDataInternal|null;\ninterface PreloadingDetailsReportViewDataInternal {\n  pipeline: SDK.PreloadingModel.PreloadPipeline;\n  ruleSets: Protocol.Preload.RuleSet[];\n  pageURL: Platform.DevToolsPath.UrlString;\n  requestResolver?: Logs.RequestResolver.RequestResolver;\n}\n\nexport class PreloadingDetailsReportView extends LegacyWrapper.LegacyWrapper.WrappableComponent<UI.Widget.VBox> {\n  readonly #shadow = this.attachShadow({mode: 'open'});\n  #data: PreloadingDetailsReportViewData = null;\n\n  connectedCallback(): void {\n    this.#shadow.adoptedStyleSheets = [preloadingDetailsReportViewStyles, inspectorCommonStyles];\n  }\n\n  set data(data: PreloadingDetailsReportViewData) {\n    this.#data = data;\n    void this.#render();\n  }\n\n  async #render(): Promise<void> {\n    await RenderCoordinator.write('PreloadingDetailsReportView render', () => {\n      if (this.#data === null) {\n        // Disabled until https://crbug.com/1079231 is fixed.\n        // clang-format off\n        Lit.render(html`\n          <div class=\"empty-state\">\n            <span class=\"empty-state-header\">${i18nString(UIStrings.noElementSelected)}</span>\n            <span class=\"empty-state-description\">${i18nString(UIStrings.selectAnElementForMoreDetails)}</span>\n          </div>\n        `, this.#shadow, {host: this});\n        // clang-format on\n        return;\n      }\n\n      const pipeline = this.#data.pipeline;\n      const pageURL = this.#data.pageURL;\n      const isFallbackToPrefetch = pipeline.getPrerender()?.status === SDK.PreloadingModel.PreloadingStatus.FAILURE &&\n          (pipeline.getPrefetch()?.status === SDK.PreloadingModel.PreloadingStatus.READY ||\n           pipeline.getPrefetch()?.status === SDK.PreloadingModel.PreloadingStatus.SUCCESS);\n\n      // Disabled until https://crbug.com/1079231 is fixed.\n      // clang-format off\n      Lit.render(html`\n        <devtools-report\n          .data=${{reportTitle: 'Speculative Loading Attempt'}}\n          jslog=${VisualLogging.section('preloading-details')}>\n          <devtools-report-section-header>${i18nString(UIStrings.detailsDetailedInformation)}</devtools-report-section-header>\n\n          ${this.#url()}\n          ${this.#action(isFallbackToPrefetch)}\n          ${this.#status(isFallbackToPrefetch)}\n          ${this.#maybePrefetchFailureReason()}\n          ${this.#maybePrerenderFailureReason()}\n\n          ${this.#data.ruleSets.map(ruleSet => this.#renderRuleSet(ruleSet, pageURL))}\n        </devtools-report>\n      `, this.#shadow, {host: this});\n      // clang-format on\n    });\n  }\n\n  #url(): Lit.LitTemplate {\n    assertNotNullOrUndefined(this.#data);\n    const attempt = this.#data.pipeline.getOriginallyTriggered();\n\n    const prefetchStatus = this.#data.pipeline.getPrefetch()?.status;\n\n    let value;\n    if (attempt.action === Protocol.Preload.SpeculationAction.Prefetch && attempt.requestId !== undefined &&\n        prefetchStatus !== SDK.PreloadingModel.PreloadingStatus.NOT_TRIGGERED) {\n      // Disabled until https://crbug.com/1079231 is fixed.\n      // clang-format off\n      const {requestId, key: {url}} = attempt;\n      const affectedRequest: {requestId?: Protocol.Network.RequestId, url?: string} = {requestId, url};\n      value = html`\n          <devtools-request-link-icon\n            .data=${\n              {\n                affectedRequest,\n                requestResolver: this.#data.requestResolver || new Logs.RequestResolver.RequestResolver(),\n                displayURL: true,\n                urlToDisplay: url,\n              }\n            }\n          >\n          </devtools-request-link-icon>\n      `;\n    } else {\n      // Disabled until https://crbug.com/1079231 is fixed.\n      // clang-format off\n      value = html`\n          <div class=\"text-ellipsis\" title=${attempt.key.url}>${attempt.key.url}</div>\n      `;\n      // clang-format on\n    }\n\n    // Disabled until https://crbug.com/1079231 is fixed.\n    // clang-format off\n    return html`\n        <devtools-report-key>${i18n.i18n.lockedString('URL')}</devtools-report-key>\n        <devtools-report-value>\n          ${value}\n        </devtools-report-value>\n    `;\n    // clang-format on\n  }\n\n  #action(isFallbackToPrefetch: boolean): Lit.LitTemplate {\n    assertNotNullOrUndefined(this.#data);\n    const attempt = this.#data.pipeline.getOriginallyTriggered();\n\n    const action = PreloadingString.capitalizedAction(attempt.action);\n\n    let maybeFellback: Lit.LitTemplate = Lit.nothing;\n    if (isFallbackToPrefetch) {\n      maybeFellback = html`${i18nString(UIStrings.automaticallyFellBackToPrefetch)}`;\n    }\n\n    let maybeInspectButton: Lit.LitTemplate = Lit.nothing;\n    (() => {\n      if (attempt.action !== Protocol.Preload.SpeculationAction.Prerender) {\n        return;\n      }\n\n      const target = SDK.TargetManager.TargetManager.instance().primaryPageTarget();\n      if (target === null) {\n        return;\n      }\n\n      const prerenderTarget = SDK.TargetManager.TargetManager.instance().targets().find(\n          child => child.targetInfo()?.subtype === 'prerender' && child.inspectedURL() === attempt.key.url);\n\n      const disabled = (prerenderTarget === undefined);\n      const inspect = (): void => {\n        if (prerenderTarget === undefined) {\n          return;\n        }\n        UI.Context.Context.instance().setFlavor(SDK.Target.Target, prerenderTarget);\n      };\n      // Disabled until https://crbug.com/1079231 is fixed.\n      // clang-format off\n      maybeInspectButton = html`\n          <devtools-button\n            @click=${inspect}\n            .title=${i18nString(UIStrings.buttonClickToInspect)}\n            .size=${Buttons.Button.Size.SMALL}\n            .variant=${Buttons.Button.Variant.OUTLINED}\n            .disabled=${disabled}\n            jslog=${VisualLogging.action('inspect-prerendered-page').track({click: true})}\n          >\n            ${i18nString(UIStrings.buttonInspect)}\n          </devtools-button>\n      `;\n      // clang-format on\n    })();\n\n    // Disabled until https://crbug.com/1079231 is fixed.\n    // clang-format off\n    return html`\n        <devtools-report-key>${i18nString(UIStrings.detailsAction)}</devtools-report-key>\n        <devtools-report-value>\n          <div class=\"text-ellipsis\" title=\"\">\n            ${action}\n            ${maybeFellback}\n            ${maybeInspectButton}\n          </div>\n        </devtools-report-value>\n    `;\n    // clang-format on\n  }\n\n  #status(isFallbackToPrefetch: boolean): Lit.LitTemplate {\n    assertNotNullOrUndefined(this.#data);\n    const attempt = this.#data.pipeline.getOriginallyTriggered();\n\n    const detailedStatus = isFallbackToPrefetch ? i18nString(UIStrings.detailedStatusFallbackToPrefetch) :\n                                                  PreloadingUIUtils.detailedStatus(attempt);\n\n    return html`\n        <devtools-report-key>${i18nString(UIStrings.detailsStatus)}</devtools-report-key>\n        <devtools-report-value>\n          ${detailedStatus}\n        </devtools-report-value>\n    `;\n  }\n\n  #maybePrefetchFailureReason(): Lit.LitTemplate {\n    assertNotNullOrUndefined(this.#data);\n    const attempt = this.#data.pipeline.getOriginallyTriggered();\n\n    if (attempt.action !== Protocol.Preload.SpeculationAction.Prefetch) {\n      return Lit.nothing;\n    }\n\n    const failureDescription = prefetchFailureReason(attempt);\n    if (failureDescription === null) {\n      return Lit.nothing;\n    }\n\n    return html`\n        <devtools-report-key>${i18nString(UIStrings.detailsFailureReason)}</devtools-report-key>\n        <devtools-report-value>\n          ${failureDescription}\n        </devtools-report-value>\n    `;\n  }\n\n  #maybePrerenderFailureReason(): Lit.LitTemplate {\n    assertNotNullOrUndefined(this.#data);\n    const attempt = this.#data.pipeline.getOriginallyTriggered();\n\n    if (attempt.action !== Protocol.Preload.SpeculationAction.Prerender) {\n      return Lit.nothing;\n    }\n\n    const failureReason = prerenderFailureReason(attempt);\n    if (failureReason === null) {\n      return Lit.nothing;\n    }\n\n    return html`\n        <devtools-report-key>${i18nString(UIStrings.detailsFailureReason)}</devtools-report-key>\n        <devtools-report-value>\n          ${failureReason}\n        </devtools-report-value>\n    `;\n  }\n\n  #renderRuleSet(ruleSet: Protocol.Preload.RuleSet, pageURL: Platform.DevToolsPath.UrlString): Lit.LitTemplate {\n    const revealRuleSetView = (): void => {\n      void Common.Revealer.reveal(new PreloadingHelper.PreloadingForward.RuleSetView(ruleSet.id));\n    };\n    const location = ruleSetLocationShort(ruleSet, pageURL);\n\n    // Disabled until https://crbug.com/1079231 is fixed.\n    // clang-format off\n    return html`\n      <devtools-report-key>${i18nString(UIStrings.detailsRuleSet)}</devtools-report-key>\n      <devtools-report-value>\n        <div class=\"text-ellipsis\" title=\"\">\n          <button class=\"link\" role=\"link\"\n            @click=${revealRuleSetView}\n            title=${i18nString(UIStrings.buttonClickToRevealRuleSet)}\n            style=${Lit.Directives.styleMap({\n              color: 'var(--sys-color-primary)',\n              'text-decoration': 'underline',\n            })}\n            jslog=${VisualLogging.action('reveal-rule-set').track({click: true})}\n          >\n            ${location}\n          </button>\n        </div>\n      </devtools-report-value>\n    `;\n    // clang-format on\n  }\n}\n\ncustomElements.define('devtools-resources-preloading-details-report-view', PreloadingDetailsReportView);\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    'devtools-resources-preloading-details-report-view': PreloadingDetailsReportView;\n  }\n}\n"]}