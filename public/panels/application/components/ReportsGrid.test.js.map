{"version":3,"file":"ReportsGrid.test.js","sourceRoot":"","sources":["../../../../../../../front_end/panels/application/components/ReportsGrid.test.ts"],"names":[],"mappings":"AAAA,sCAAsC;AACtC,yEAAyE;AACzE,6BAA6B;AAG7B,OAAO,EAAC,gBAAgB,EAAE,oBAAoB,EAAC,MAAM,gCAAgC,CAAC;AACtF,OAAO,EAAC,uBAAuB,EAAC,MAAM,wCAAwC,CAAC;AAC/E,OAAO,EAAC,sBAAsB,EAAC,MAAM,yCAAyC,CAAC;AAC/E,OAAO,KAAK,EAAE,MAAM,8BAA8B,CAAC;AAEnD,OAAO,KAAK,qBAAqB,MAAM,iBAAiB,CAAC;AAEzD,MAAM,IAAI,GAAG;IACX,YAAY,EAAE,CAAC;IACf,EAAE,EAAE,qBAAqB;IACzB,UAAU,EAAE,EAAE;IACd,OAAO,EAAE,8FAA8F;QACnG,mDAAmD;IACvD,UAAU,EAAE,+BAA+B;CAC5C,CAAC;AACF,MAAM,OAAO,GAAG,CAAC;QACf,EAAE,EAAE,SAAsC;QAC1C,YAAY,EAAE,+BAA+B;QAC7C,WAAW,EAAE,eAAe;QAC5B,IAAI,EAAE,aAAa;QACnB,SAAS,EAAE,gBAAgB;QAC3B,KAAK,EAAE,CAAC;QACR,iBAAiB,EAAE,CAAC;QACpB,IAAI,EAAE,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC;QAC1B,MAAM,qDAAsC;KAC7C,CAAC,CAAC;AAEH,uBAAuB,CAAC,aAAa,EAAE,GAAG,EAAE;IAC1C,QAAQ,CAAC,MAAM,EAAE,GAAG,EAAE;QACpB,IAAI,MAAoB,CAAC;QAEzB,UAAU,CAAC,KAAK,IAAI,EAAE;YACpB,MAAM,SAAS,GAAG,QAAQ,CAAC,aAAa,CAAC,KAAK,CAAC,CAAC;YAChD,oBAAoB,CAAC,SAAS,CAAC,CAAC;YAChC,MAAM,MAAM,GAAG,IAAI,EAAE,CAAC,MAAM,CAAC,MAAM,EAAE,CAAC;YACtC,MAAM,CAAC,UAAU,EAAE,CAAC;YACpB,MAAM,CAAC,IAAI,CAAC,SAAS,CAAC,CAAC;YACvB,MAAM,GAAG,MAAM,CAAC,OAAO,CAAC;YACxB,MAAM,CAAC,KAAK,CAAC,OAAO,GAAG,MAAM,CAAC;YAC9B,MAAM,CAAC,KAAK,CAAC,KAAK,GAAG,OAAO,CAAC;YAC7B,MAAM,CAAC,KAAK,CAAC,MAAM,GAAG,OAAO,CAAC;QAChC,CAAC,CAAC,CAAC;QAEH,EAAE,CAAC,4BAA4B,EAAE,KAAK,IAAI,EAAE;YAC1C,qBAAqB,CAAC,WAAW,CAAC,YAAY,CAC1C,EAAC,OAAO,EAAE,EAAE,EAAE,gCAAgC,EAAE,IAAI,EAAE,QAAQ,EAAE,GAAG,EAAE,GAAE,CAAC,EAAC,EAAE,SAAS,EAAE,MAAM,CAAC,CAAC;YAClG,MAAM,gBAAgB,CAAC,oCAAoC,CAAC,CAAC;QAC/D,CAAC,CAAC,CAAC;QAEH,EAAE,CAAC,wBAAwB,EAAE,KAAK,IAAI,EAAE;YACtC,qBAAqB,CAAC,WAAW,CAAC,YAAY,CAC1C,EAAC,OAAO,EAAE,gCAAgC,EAAE,IAAI,EAAE,QAAQ,EAAE,GAAG,EAAE,GAAE,CAAC,EAAC,EAAE,SAAS,EAAE,MAAM,CAAC,CAAC;YAC9F,MAAM,gBAAgB,CAAC,8BAA8B,CAAC,CAAC;QACzD,CAAC,CAAC,CAAC;IACL,CAAC,CAAC,CAAC;IAEH,EAAE,CAAC,sCAAsC,EAAE,KAAK,IAAI,EAAE;QACpD,MAAM,WAAW,GAAG,KAAK,CAAC,GAAG,EAAE,CAAC;QAChC,MAAM,IAAI,GAAG,sBAAsB,CAAC,qBAAqB,CAAC,WAAW,CAAC,WAAW,CAAC,CAAC;QACnF,MAAM,MAAM,GAAG,IAAI,qBAAqB,CAAC,WAAW,CAAC,WAAW,CAAC,SAAS,EAAE,IAAI,CAAC,CAAC;QAClF,MAAM,CAAC,gBAAgB,GAAG,WAAW,CAAC;QACtC,MAAM,IAAI,CAAC,SAAS,CAAC;QAErB,MAAM,CAAC,OAAO,GAAG,OAAO,CAAC;QACzB,MAAM,CAAC,aAAa,EAAE,CAAC;QACvB,MAAM,SAAS,GAAG,MAAM,IAAI,CAAC,SAAS,CAAC;QAEvC,SAAS,CAAC,QAAQ,CAAC,SAAS,CAAC,CAAC;QAC9B,KAAK,CAAC,MAAM,CAAC,UAAU,CAAC,WAAW,EAAE,SAAS,CAAC,CAAC;IAClD,CAAC,CAAC,CAAC;AACL,CAAC,CAAC,CAAC","sourcesContent":["// Copyright 2021 The Chromium Authors\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\n\nimport * as Protocol from '../../../generated/protocol.js';\nimport {assertScreenshot, renderElementIntoDOM} from '../../../testing/DOMHelpers.js';\nimport {describeWithEnvironment} from '../../../testing/EnvironmentHelpers.js';\nimport {createViewFunctionStub} from '../../../testing/ViewFunctionHelpers.js';\nimport * as UI from '../../../ui/legacy/legacy.js';\n\nimport * as ApplicationComponents from './components.js';\n\nconst body = {\n  columnNumber: 8,\n  id: 'PrefixedStorageInfo',\n  lineNumber: 15,\n  message: '\\'window.webkitStorageInfo\\' is deprecated. Please use \\'navigator.webkitTemporaryStorage\\' ' +\n      'or \\'navigator.webkitPersistentStorage\\' instead.',\n  sourceFile: 'https://example.com/script.js',\n};\nconst reports = [{\n  id: 'some_id' as Protocol.Network.ReportId,\n  initiatorUrl: 'https://example.com/script.js',\n  destination: 'main-endpoint',\n  type: 'deprecation',\n  timestamp: 1632747042.12696,\n  depth: 1,\n  completedAttempts: 0,\n  body: JSON.stringify(body),\n  status: Protocol.Network.ReportStatus.Queued,\n}];\n\ndescribeWithEnvironment('ReportsGrid', () => {\n  describe('view', () => {\n    let target!: HTMLElement;\n\n    beforeEach(async () => {\n      const container = document.createElement('div');\n      renderElementIntoDOM(container);\n      const widget = new UI.Widget.Widget();\n      widget.markAsRoot();\n      widget.show(container);\n      target = widget.element;\n      target.style.display = 'flex';\n      target.style.width = '780px';\n      target.style.height = '400px';\n    });\n\n    it('looks fine with no reports', async () => {\n      ApplicationComponents.ReportsGrid.DEFAULT_VIEW(\n          {reports: [], protocolMonitorExperimentEnabled: true, onSelect: () => {}}, undefined, target);\n      await assertScreenshot('application/reports_grid_empty.png');\n    });\n\n    it('looks fine with report', async () => {\n      ApplicationComponents.ReportsGrid.DEFAULT_VIEW(\n          {reports, protocolMonitorExperimentEnabled: true, onSelect: () => {}}, undefined, target);\n      await assertScreenshot('application/reports_grid.png');\n    });\n  });\n\n  it('calls selection-handler on selection', async () => {\n    const selectedSpy = sinon.spy();\n    const view = createViewFunctionStub(ApplicationComponents.ReportsGrid.ReportsGrid);\n    const widget = new ApplicationComponents.ReportsGrid.ReportsGrid(undefined, view);\n    widget.onReportSelected = selectedSpy;\n    await view.nextInput;\n\n    widget.reports = reports;\n    widget.requestUpdate();\n    const viewInput = await view.nextInput;\n\n    viewInput.onSelect('some_id');\n    sinon.assert.calledWith(selectedSpy, 'some_id');\n  });\n});\n"]}