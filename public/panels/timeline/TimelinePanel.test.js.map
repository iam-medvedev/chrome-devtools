{"version":3,"file":"TimelinePanel.test.js","sourceRoot":"","sources":["../../../../../../front_end/panels/timeline/TimelinePanel.test.ts"],"names":[],"mappings":"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","sourcesContent":["// Copyright 2025 The Chromium Authors. All rights reserved.\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\n\nimport * as Common from '../../core/common/common.js';\nimport * as Root from '../../core/root/root.js';\nimport * as SDK from '../../core/sdk/sdk.js';\nimport type * as Protocol from '../../generated/protocol.js';\nimport * as Bindings from '../../models/bindings/bindings.js';\nimport type * as TextUtils from '../../models/text_utils/text_utils.js';\nimport * as Trace from '../../models/trace/trace.js';\nimport * as Workspace from '../../models/workspace/workspace.js';\nimport {dispatchClickEvent, renderElementIntoDOM} from '../../testing/DOMHelpers.js';\nimport {\n  describeWithEnvironment,\n  registerNoopActions,\n} from '../../testing/EnvironmentHelpers.js';\nimport {TraceLoader} from '../../testing/TraceLoader.js';\nimport * as UI from '../../ui/legacy/legacy.js';\n\nimport * as Timeline from './timeline.js';\n\nasync function contentDataToFile(contentData: TextUtils.ContentData.ContentData): Promise<Trace.Types.File.TraceFile> {\n  if (contentData.isTextContent) {\n    return JSON.parse(contentData.text) as Trace.Types.File.TraceFile;\n  }\n\n  const decoded = Common.Base64.decode(contentData.base64);\n  const text = await Common.Gzip.arrayBufferToString(decoded.buffer);\n  return JSON.parse(text) as Trace.Types.File.TraceFile;\n}\n\ndescribeWithEnvironment('TimelinePanel', function() {\n  let timeline: Timeline.TimelinePanel.TimelinePanel;\n  let traceModel: Trace.TraceModel.Model;\n  beforeEach(() => {\n    registerNoopActions(\n        ['timeline.toggle-recording', 'timeline.record-reload', 'timeline.show-history', 'components.collect-garbage']);\n    const resourceMapping = new Bindings.ResourceMapping.ResourceMapping(\n        SDK.TargetManager.TargetManager.instance(),\n        Workspace.Workspace.WorkspaceImpl.instance(),\n    );\n    const ignoreListManager = Workspace.IgnoreListManager.IgnoreListManager.instance({forceNew: true});\n    Bindings.DebuggerWorkspaceBinding.DebuggerWorkspaceBinding.instance({\n      forceNew: true,\n      resourceMapping,\n      targetManager: SDK.TargetManager.TargetManager.instance(),\n      ignoreListManager,\n    });\n    traceModel = Trace.TraceModel.Model.createWithAllHandlers();\n    timeline = Timeline.TimelinePanel.TimelinePanel.instance({forceNew: true, isNode: false, traceModel});\n    renderElementIntoDOM(timeline);\n  });\n\n  afterEach(() => {\n    timeline.detach();\n    Bindings.DebuggerWorkspaceBinding.DebuggerWorkspaceBinding.removeInstance();\n    Workspace.IgnoreListManager.IgnoreListManager.removeInstance();\n    UI.ActionRegistry.ActionRegistry.reset();\n    Timeline.TimelinePanel.TimelinePanel.removeInstance();\n  });\n\n  it('should keep other tracks when the custom tracks setting is toggled', async function() {\n    const events =\n        await TraceLoader.rawEvents(this, 'extension-tracks-and-marks.json.gz') as Trace.Types.Events.Event[];\n    await timeline.loadingComplete(events, null, null);\n    const tracksBeforeDisablingSetting = timeline.getFlameChart().getMainDataProvider().timelineData().groups;\n    const parsedTrace = traceModel.parsedTrace();\n    const extensionTracksInTrace = parsedTrace?.ExtensionTraceData.extensionTrackData;\n    const extensionTrackInTraceNames = extensionTracksInTrace?.flatMap(\n        track => track.isTrackGroup ? [...Object.keys(track.entriesByTrack), track.name] : track.name);\n\n    assert.exists(extensionTrackInTraceNames);\n\n    // Test that extension tracks from the trace model are rendered in\n    // the flamechart data.\n    const extensionTracksInFlamechartBeforeDisabling =\n        tracksBeforeDisablingSetting\n            .filter(\n                track => track.jslogContext === Timeline.CompatibilityTracksAppender.VisualLoggingTrackName.EXTENSION)\n            .map(track => track.name.split(' — Custom track')[0]);\n    const nonExtensionTrackNames =\n        tracksBeforeDisablingSetting\n            .filter(\n                track => track.jslogContext !== Timeline.CompatibilityTracksAppender.VisualLoggingTrackName.EXTENSION)\n            .map(track => track.name);\n\n    assert.includeMembers(extensionTracksInFlamechartBeforeDisabling, extensionTrackInTraceNames.map(track => track));\n    assert.lengthOf(extensionTracksInFlamechartBeforeDisabling, extensionTrackInTraceNames.length);\n\n    // Disable setting\n    const customTracksSetting = Timeline.TimelinePanel.TimelinePanel.extensionDataVisibilitySetting();\n    customTracksSetting.set(false);\n\n    // Test that extension tracks are not rendered in the flamechart,\n    // but other tracks are.\n    const tracksAfterDisablingSetting = timeline.getFlameChart().getMainDataProvider().timelineData().groups;\n    const extensionTracksAfterDisabling = tracksAfterDisablingSetting.filter(\n        track => track.jslogContext === Timeline.CompatibilityTracksAppender.VisualLoggingTrackName.EXTENSION);\n    const trackNamesAfterDisablingSetting =\n        tracksAfterDisablingSetting.map(track => track.name.split(' — Custom track')[0]);\n    assert.lengthOf(extensionTracksAfterDisabling, 0);\n    assert.deepEqual(trackNamesAfterDisablingSetting, nonExtensionTrackNames);\n\n    // Enable setting again\n    customTracksSetting.set(true);\n\n    const tracksAfterEnablingSetting = timeline.getFlameChart().getMainDataProvider().timelineData().groups;\n    assert.deepEqual(tracksBeforeDisablingSetting, tracksAfterEnablingSetting);\n  });\n  it('should keep marker overlays when the custom tracks setting is toggled', async function() {\n    const events = await TraceLoader.rawEvents(this, 'web-dev.json.gz') as Trace.Types.Events.Event[];\n    await timeline.loadingComplete(events, null, null);\n    const overlaysBeforeDisablingSetting = timeline.getFlameChart().overlays().allOverlays();\n\n    // Test that overlays are rendered in the timeline\n    assert.isAbove(overlaysBeforeDisablingSetting.length, 0);\n\n    // Disable setting\n    const customTracksSetting = Timeline.TimelinePanel.TimelinePanel.extensionDataVisibilitySetting();\n    customTracksSetting.set(false);\n\n    // Test that overlays remain untouched\n    const overlaysAfterDisablingSetting = timeline.getFlameChart().overlays().allOverlays();\n    assert.deepEqual(overlaysBeforeDisablingSetting, overlaysAfterDisablingSetting);\n\n    // Enable setting again\n    customTracksSetting.set(true);\n\n    const overlaysAfterEnablingSetting = timeline.getFlameChart().overlays().allOverlays();\n    assert.deepEqual(overlaysBeforeDisablingSetting, overlaysAfterEnablingSetting);\n  });\n\n  it('keeps entries set to be dimmed as so after toggling the custom tracks setting', async function() {\n    const events = await TraceLoader.rawEvents(this, 'web-dev.json.gz') as Trace.Types.Events.Event[];\n    await timeline.loadingComplete(events, null, null);\n    const thirdPartyDimSetting = Common.Settings.Settings.instance().createSetting('timeline-dim-third-parties', false);\n\n    // Dim 3P entries.\n    thirdPartyDimSetting.set(true);\n    const dimIndicesBeforeToggle = timeline.getFlameChart().getMainFlameChart().getDimIndices();\n    assert.exists(dimIndicesBeforeToggle);\n    assert.isAbove(dimIndicesBeforeToggle.length, 0);\n\n    // Toggle the custom track setting and verify 3P entries remain dimmed.\n    Timeline.TimelinePanel.TimelinePanel.extensionDataVisibilitySetting().set(true);\n    const dimIndicesAfterToggle = timeline.getFlameChart().getMainFlameChart().getDimIndices();\n    assert.exists(dimIndicesAfterToggle);\n    assert.isAbove(dimIndicesAfterToggle.length, 0);\n  });\n\n  it('keeps annotations after toggling the custom tracks setting', async function() {\n    const events = await TraceLoader.rawEvents(this, 'web-dev.json.gz') as Trace.Types.Events.Event[];\n    await timeline.loadingComplete(events, null, null);\n    const parsedTrace = traceModel.parsedTrace();\n    assert.isOk(parsedTrace?.Meta.traceBounds.min);\n    const modificationsManager = Timeline.ModificationsManager.ModificationsManager.activeManager();\n    assert.isOk(modificationsManager);\n\n    // Add an annotation\n    modificationsManager.createAnnotation({\n      bounds: Trace.Helpers.Timing.traceWindowFromMicroSeconds(\n          parsedTrace.Meta.traceBounds.min, parsedTrace.Meta.traceBounds.max),\n      type: 'TIME_RANGE',\n      label: '',\n    });\n\n    const annotationsBeforeToggle =\n        timeline.getFlameChart().overlays().allOverlays().filter(e => e.type === 'TIME_RANGE');\n    assert.exists(annotationsBeforeToggle);\n    assert.isAbove(annotationsBeforeToggle.length, 0);\n\n    // Toggle the custom track setting and verify annotations remain.\n    Timeline.TimelinePanel.TimelinePanel.extensionDataVisibilitySetting().set(true);\n    const annotationsAfterToggle =\n        timeline.getFlameChart().overlays().allOverlays().filter(e => e.type === 'TIME_RANGE');\n    assert.exists(annotationsAfterToggle);\n    assert.isAbove(annotationsAfterToggle.length, 0);\n  });\n\n  it('clears out AI related contexts when the user presses \"Clear\"', async () => {\n    const context = UI.Context.Context.instance();\n    const {AIContext, AICallTree} = Timeline.Utils;\n\n    const callTree = sinon.createStubInstance(AICallTree.AICallTree);\n    context.setFlavor(AIContext.AgentFocus, AIContext.AgentFocus.fromCallTree(callTree));\n\n    const clearButton = timeline.element.querySelector('[aria-label=\"Clear\"]');\n    assert.isOk(clearButton);\n    dispatchClickEvent(clearButton);\n\n    assert.isNull(context.flavor(AIContext.AgentFocus));\n  });\n\n  // These next few tests can move into the saveToFile describe block below.\n  it('saves visual track config metadata to disk if the user has modified it', async function() {\n    const events = await TraceLoader.rawEvents(this, 'web-dev.json.gz') as Trace.Types.Events.Event[];\n    await timeline.loadingComplete(events, null, null);\n\n    const flameChartView = timeline.getFlameChart();\n\n    const FAKE_METADATA: Trace.Types.File.PersistedTraceVisualConfig = {\n      main: [{hidden: true, expanded: false, originalIndex: 0, visualIndex: 0}],\n      network: [{hidden: false, expanded: false, originalIndex: 0, visualIndex: 0}],\n    };\n\n    sinon.stub(flameChartView, 'getPersistedConfigMetadata').callsFake(() => {\n      return FAKE_METADATA;\n    });\n\n    const fileManager = Workspace.FileManager.FileManager.instance();\n    const saveSpy = sinon.stub(fileManager, 'save').callsFake((): Promise<Workspace.FileManager.SaveCallbackParam> => {\n      return Promise.resolve({});\n    });\n    const closeSpy = sinon.stub(fileManager, 'close');\n\n    await timeline.saveToFile({\n      includeScriptContent: false,\n      includeSourceMaps: false,\n      addModifications: true,\n    });\n\n    sinon.assert.calledOnce(saveSpy);\n    sinon.assert.calledOnce(closeSpy);\n\n    const [fileName, contentData] = saveSpy.getCall(0).args;\n    // Matches Trace-20250613T132120.json\n    assert.match(fileName, /Trace-[\\d|T]+\\.json$/);\n\n    const file = await contentDataToFile(contentData);\n    assert.deepEqual(file.metadata.visualTrackConfig, FAKE_METADATA);\n  });\n\n  it('does not save visual track config if the user does not save with modifications', async function() {\n    const events = await TraceLoader.rawEvents(this, 'web-dev.json.gz') as Trace.Types.Events.Event[];\n    await timeline.loadingComplete(events, null, null);\n\n    const flameChartView = timeline.getFlameChart();\n\n    const FAKE_METADATA: Trace.Types.File.PersistedTraceVisualConfig = {\n      main: [{hidden: true, expanded: false, originalIndex: 0, visualIndex: 0}],\n      network: [{hidden: false, expanded: false, originalIndex: 0, visualIndex: 0}],\n    };\n\n    sinon.stub(flameChartView, 'getPersistedConfigMetadata').callsFake(() => {\n      return FAKE_METADATA;\n    });\n\n    const fileManager = Workspace.FileManager.FileManager.instance();\n    const saveSpy = sinon.stub(fileManager, 'save').callsFake((): Promise<Workspace.FileManager.SaveCallbackParam> => {\n      return Promise.resolve({});\n    });\n    sinon.stub(fileManager, 'close');\n\n    await timeline.saveToFile({\n      includeScriptContent: false,\n      includeSourceMaps: false,\n      addModifications: false,\n    });\n\n    sinon.assert.calledOnce(saveSpy);\n\n    const [, contentData] = saveSpy.getCall(0).args;\n\n    const file = await contentDataToFile(contentData);\n    assert.isUndefined(file.metadata.visualTrackConfig);\n  });\n\n  it('does not save visual track config if the user has not made any', async function() {\n    const events = await TraceLoader.rawEvents(this, 'web-dev.json.gz') as Trace.Types.Events.Event[];\n    await timeline.loadingComplete(events, null, null);\n\n    const flameChartView = timeline.getFlameChart();\n    sinon.stub(flameChartView, 'getPersistedConfigMetadata').callsFake(() => {\n      return {main: null, network: null};\n    });\n\n    const fileManager = Workspace.FileManager.FileManager.instance();\n    const saveSpy = sinon.stub(fileManager, 'save').callsFake((): Promise<Workspace.FileManager.SaveCallbackParam> => {\n      return Promise.resolve({});\n    });\n    sinon.stub(fileManager, 'close');\n    await timeline.saveToFile({\n      includeScriptContent: false,\n      includeSourceMaps: false,\n      addModifications: true,\n    });\n    sinon.assert.calledOnce(saveSpy);\n\n    const [, contentData] = saveSpy.getCall(0).args;\n\n    const file = await contentDataToFile(contentData);\n    assert.isUndefined(file.metadata.visualTrackConfig);\n  });\n\n  it('includes the trace metadata when saving to a file', async function() {\n    const events = await TraceLoader.rawEvents(this, 'web-dev-with-commit.json.gz') as Trace.Types.Events.Event[];\n    const metadata = await TraceLoader.metadata(this, 'web-dev-with-commit.json.gz');\n    await timeline.loadingComplete(events, null, metadata);\n    const fileManager = Workspace.FileManager.FileManager.instance();\n    const saveSpy = sinon.stub(fileManager, 'save').callsFake((): Promise<Workspace.FileManager.SaveCallbackParam> => {\n      return Promise.resolve({});\n    });\n    sinon.stub(fileManager, 'close');\n\n    await timeline.saveToFile({\n      includeScriptContent: false,\n      includeSourceMaps: false,\n      addModifications: false,\n    });\n\n    sinon.assert.calledOnce(saveSpy);\n\n    const [, contentData] = saveSpy.getCall(0).args;\n\n    // Assert that each value in the metadata of the JSON matches the metadata in memory.\n    // We can't do a simple deepEqual() on the two objects as the in-memory\n    // contains values that are `undefined` which do not exist in the JSON\n    // version.\n    const file = await contentDataToFile(contentData);\n    for (const k in file) {\n      const key = k as keyof Trace.Types.File.MetaData;\n      assert.deepEqual(file.metadata[key], metadata[key]);\n    }\n  });\n\n  describe('handleExternalRecordRequest', () => {\n    it('returns information on the insights found in the recording', async function() {\n      const uiView = UI.ViewManager.ViewManager.instance({forceNew: true});\n      sinon.stub(uiView, 'showView');\n\n      const events = await TraceLoader.rawEvents(this, 'web-dev-with-commit.json.gz') as Trace.Types.Events.Event[];\n      await timeline.loadingComplete(events, null, null);\n\n      sinon.stub(timeline, 'recordReload').callsFake(() => {\n        timeline.dispatchEventToListeners(Timeline.TimelinePanel.Events.RECORDING_COMPLETED, {traceIndex: 0});\n      });\n\n      const generator = Timeline.TimelinePanel.TimelinePanel.handleExternalRecordRequest();\n      let externalRequestResponse = await generator.next();\n      while (!externalRequestResponse.done) {\n        externalRequestResponse = await generator.next();\n      }\n      const {message} = externalRequestResponse.value;\n      assert.include(message, '# Trace recording results');\n      const EXPECTED_INSIGHT_TITLES = [\n        'LCP breakdown',\n        'LCP request discovery',\n        'Render blocking requests',\n        'Document request latency',\n      ];\n      for (const title of EXPECTED_INSIGHT_TITLES) {\n        assert.include(message, `### Insight Title: ${title}`);\n      }\n\n      assert.include(message, `- Time to first byte: 7.94 ms (6.1% of total LCP time)\n- Resource load delay: 33.16 ms (25.7% of total LCP time)\n- Resource load duration: 14.70 ms (11.4% of total LCP time)\n- Element render delay: 73.41 ms (56.8% of total LCP time)`);\n    });\n\n    it('includes information on passing insights under a separate heading', async function() {\n      const uiView = UI.ViewManager.ViewManager.instance({forceNew: true});\n      sinon.stub(uiView, 'showView');\n\n      const events = await TraceLoader.rawEvents(this, 'web-dev-with-commit.json.gz') as Trace.Types.Events.Event[];\n      await timeline.loadingComplete(events, null, null);\n\n      sinon.stub(timeline, 'recordReload').callsFake(() => {\n        timeline.dispatchEventToListeners(Timeline.TimelinePanel.Events.RECORDING_COMPLETED, {traceIndex: 0});\n      });\n\n      const generator = Timeline.TimelinePanel.TimelinePanel.handleExternalRecordRequest();\n      let externalRequestResponse = await generator.next();\n      while (!externalRequestResponse.done) {\n        externalRequestResponse = await generator.next();\n      }\n      const {message} = externalRequestResponse.value;\n      assert.include(message, '# Trace recording results');\n\n      assert.include(message, '## Non-passing insights:');\n      const EXPECTED_INSIGHT_TITLES = [\n        'INP breakdown',\n        'Layout shift culprits',\n      ];\n      for (const title of EXPECTED_INSIGHT_TITLES) {\n        assert.include(message, `### Insight Title: ${title}`);\n      }\n    });\n  });\n\n  describe('saveToFile', function() {\n    let fileManager: Workspace.FileManager.FileManager;\n    let saveSpy: sinon.SinonStub;\n    let closeSpy: sinon.SinonStub;\n\n    beforeEach(() => {\n      fileManager = Workspace.FileManager.FileManager.instance();\n      saveSpy = sinon.stub(fileManager, 'save').callsFake((): Promise<Workspace.FileManager.SaveCallbackParam> => {\n        return Promise.resolve({});\n      });\n      closeSpy = sinon.stub(fileManager, 'close');\n    });\n\n    describe('with gz', function() {\n      this.beforeAll(() => {\n        Root.Runtime.experiments.enableForTest(Root.Runtime.ExperimentName.TIMELINE_SAVE_AS_GZ);\n      });\n\n      this.afterAll(() => {\n        Root.Runtime.experiments.disableForTest(Root.Runtime.ExperimentName.TIMELINE_SAVE_AS_GZ);\n      });\n\n      it('saves a regular trace file', async function() {\n        const {traceEvents, metadata} = await TraceLoader.traceFile(this, 'web-dev.json.gz');\n        await timeline.innerSaveToFile(traceEvents, metadata, {\n          savingEnhancedTrace: false,\n          addModifications: false,\n        });\n\n        sinon.assert.calledOnce(saveSpy);\n        sinon.assert.calledOnce(closeSpy);\n\n        const [fileName, contentData] = saveSpy.getCall(0).args;\n        assert.match(fileName, /Trace-[\\d|T]+\\.json.gz$/);\n\n        const file = await contentDataToFile(contentData);\n        assert.isUndefined(file.metadata.enhancedTraceVersion);\n        assert.deepEqual(file.traceEvents, traceEvents);\n      });\n\n      it('saves a CPU profile trace file', async function() {\n        const profile = await TraceLoader.rawCPUProfile(this, 'node-fibonacci-website.cpuprofile.gz');\n        const file = Trace.Helpers.SamplesIntegrator.SamplesIntegrator.createFakeTraceFromCpuProfile(\n            profile, Trace.Types.Events.ThreadID(1));\n        const {traceEvents, metadata} = file;\n\n        await timeline.innerSaveToFile(traceEvents, metadata, {\n          savingEnhancedTrace: false,\n          addModifications: false,\n        });\n\n        sinon.assert.calledOnce(saveSpy);\n        sinon.assert.calledOnce(closeSpy);\n\n        const [fileName, contentData] = saveSpy.getCall(0).args;\n        assert.match(fileName, /CPU-[\\d|T]+\\.cpuprofile.gz$/);\n\n        const traceFile = await contentDataToFile(contentData);\n        const cpuFile = traceFile as unknown as Protocol.Profiler.Profile;\n        const profile2 = Trace.Helpers.SamplesIntegrator.SamplesIntegrator.extractCpuProfileFromFakeTrace(traceEvents);\n        assert.deepEqual(cpuFile, profile2);\n      });\n\n      it('saves an enhanced trace file', async function() {\n        const {traceEvents, metadata} = await TraceLoader.traceFile(this, 'enhanced-traces.json.gz');\n        await timeline.innerSaveToFile(traceEvents, metadata, {\n          savingEnhancedTrace: true,\n          addModifications: false,\n        });\n\n        sinon.assert.calledOnce(saveSpy);\n        sinon.assert.calledOnce(closeSpy);\n\n        const [fileName, contentData] = saveSpy.getCall(0).args;\n        assert.match(fileName, /EnhancedTrace-[\\d|T]+\\.json\\.gz$/);\n\n        const file = await contentDataToFile(contentData);\n        assert.isDefined(file.metadata.enhancedTraceVersion);\n      });\n\n      it('saves a trace file with modifications', async function() {\n        const {traceEvents, metadata} = await TraceLoader.traceFile(this, 'web-dev.json.gz');\n        // Load to initialize modification manager\n        await timeline.loadingComplete(traceEvents as Trace.Types.Events.Event[], null, metadata);\n        const modificationsManager = Timeline.ModificationsManager.ModificationsManager.activeManager();\n        assert.isOk(modificationsManager);\n\n        modificationsManager.createAnnotation({\n          bounds: Trace.Helpers.Timing.traceWindowFromMicroSeconds(\n              Trace.Types.Timing.Micro(1), Trace.Types.Timing.Micro(2)),\n          type: 'TIME_RANGE',\n          label: 'Test Annotation',\n        });\n\n        await timeline.saveToFile({\n          includeScriptContent: false,\n          includeSourceMaps: false,\n          addModifications: true,\n        });\n\n        sinon.assert.calledOnce(saveSpy);\n        sinon.assert.calledOnce(closeSpy);\n\n        const [, contentData] = saveSpy.getCall(0).args;\n        const file = await contentDataToFile(contentData);\n        assert.isDefined(file.metadata.modifications);\n        assert.lengthOf(file.metadata.modifications.annotations.labelledTimeRanges, 1);\n        assert.strictEqual(file.metadata.modifications.annotations.labelledTimeRanges[0].label, 'Test Annotation');\n      });\n    });\n    describe('without gz', function() {\n      it('saves a regular trace file', async function() {\n        const {traceEvents, metadata} = await TraceLoader.traceFile(this, 'web-dev.json.gz');\n        await timeline.innerSaveToFile(traceEvents, metadata, {\n          savingEnhancedTrace: false,\n          addModifications: false,\n        });\n\n        sinon.assert.calledOnce(saveSpy);\n        sinon.assert.calledOnce(closeSpy);\n\n        const [fileName, contentData] = saveSpy.getCall(0).args;\n        assert.match(fileName, /Trace-[\\d|T]+\\.json$/);\n\n        const file = await contentDataToFile(contentData);\n        assert.isUndefined(file.metadata.enhancedTraceVersion);\n        assert.deepEqual(file.traceEvents, traceEvents);\n      });\n    });\n  });\n});\n"]}