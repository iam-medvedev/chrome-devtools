{"version":3,"file":"TimelineFlameChartNetworkDataProvider.js","sourceRoot":"","sources":["../../../../../../front_end/panels/timeline/TimelineFlameChartNetworkDataProvider.ts"],"names":[],"mappings":"AAAA,4DAA4D;AAC5D,yEAAyE;AACzE,6BAA6B;AAE7B,OAAO,KAAK,IAAI,MAAM,yBAAyB,CAAC;AAChD,OAAO,KAAK,QAAQ,MAAM,iCAAiC,CAAC;AAC5D,OAAO,KAAK,GAAG,MAAM,uBAAuB,CAAC;AAC7C,OAAO,KAAK,KAAK,MAAM,6BAA6B,CAAC;AACrD,OAAO,KAAK,MAAM,MAAM,+CAA+C,CAAC;AACxE,OAAO,KAAK,EAAE,MAAM,2BAA2B,CAAC;AAChD,OAAO,KAAK,YAAY,MAAM,gDAAgD,CAAC;AAE/E,OAAO,KAAK,kBAAkB,MAAM,4BAA4B,CAAC;AACjE,OAAO,EAAC,8BAA8B,EAAC,MAAM,iBAAiB,CAAC;AAC/D,OAAO,EAAC,oBAAoB,EAAC,MAAM,2BAA2B,CAAC;AAC/D,OAAO,EAAC,oBAAoB,EAAyB,MAAM,2BAA2B,CAAC;AACvF,OAAO,+BAA+B,MAAM,oCAAoC,CAAC;AACjF,OAAO,EAAC,eAAe,EAAE,SAAS,EAAC,MAAM,6BAA6B,CAAC;AACvE,OAAO,EACL,kBAAkB,EAClB,gBAAgB,EAChB,eAAe,GAEhB,MAAM,wBAAwB,CAAC;AAChC,OAAO,KAAK,aAAa,MAAM,kBAAkB,CAAC;AAElD,MAAM,OAAO,qCAAqC;IAChD,gBAAgB,GAAG,CAAC,CAAC;IACrB,SAAS,GAAG,CAAC,CAAC;IACd,OAAO,GAAwB,EAAE,CAAC;IAClC,SAAS,GAAG,CAAC,CAAC;IACd,qBAAqB,GAA8B,IAAI,CAAC;IAExD,qBAAqB,GAAkD,IAAI,CAAC;IAC5E,cAAc,GAAmB,IAAI,CAAC;IACtC,YAAY,GAA0C,IAAI,CAAC;IAC3D,kBAAkB,GAAG,IAAI,GAAG,EAAkC,CAAC;IAC/D,iCAAiC;IACjC,mBAAmB,GAAG,CAAC,CAAC,CAAC;IACzB,mBAAmB,GAAgD,EAAE,CAAC;IACtE,aAAa,GAAiD,IAAI,CAAC;IAEnE;QACE,IAAI,CAAC,KAAK,EAAE,CAAC;IACf,CAAC;IAED,6CAA6C;IAC7C,6BAA6B;IAC7B,kCAAkC;IAClC,6DAA6D;IAC7D,OAAO;IACP,KAAK;QACH,IAAI,CAAC,SAAS,GAAG,CAAC,CAAC;QACnB,IAAI,CAAC,gBAAgB,GAAG,CAAC,CAAC;QAC1B,IAAI,CAAC,SAAS,GAAG,CAAC,CAAC;QACnB,IAAI,CAAC,kBAAkB,CAAC,KAAK,EAAE,CAAC;QAChC,IAAI,CAAC,OAAO,GAAG,EAAE,CAAC;QAClB,IAAI,CAAC,qBAAqB,GAAG,IAAI,CAAC;QAClC,IAAI,CAAC,YAAY,GAAG,IAAI,CAAC;QAEzB,IAAI,CAAC,qBAAqB,GAAG,IAAI,CAAC;IACpC,CAAC;IAED,QAAQ,CAAC,WAA6C,EAAE,YAAqD;QAC3G,IAAI,CAAC,KAAK,EAAE,CAAC;QACb,IAAI,CAAC,YAAY,GAAG,WAAW,CAAC;QAChC,IAAI,CAAC,aAAa,GAAG,YAAY,CAAC;QAElC,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC,YAAY,CAAC,CAAC;QAClC,IAAI,CAAC,oBAAoB,CAAC,IAAI,CAAC,YAAY,CAAC,CAAC;IAC/C,CAAC;IAED,SAAS,CAAC,WAA6C;QACrD,IAAI,WAAW,CAAC,eAAe,CAAC,SAAS,EAAE,CAAC;YAC1C,WAAW,CAAC,eAAe,CAAC,SAAS,CAAC,OAAO,CAAC,aAAa,CAAC,EAAE;gBAC5D,IAAI,aAAa,CAAC,mBAAmB,EAAE,CAAC;oBACtC,IAAI,CAAC,OAAO,CAAC,IAAI,CAAC,aAAa,CAAC,mBAAmB,CAAC,CAAC;gBACvD,CAAC;gBACD,IAAI,CAAC,OAAO,CAAC,IAAI,CAAC,GAAG,aAAa,CAAC,MAAM,CAAC,CAAC;YAC7C,CAAC,CAAC,CAAC;QACL,CAAC;QACD,IAAI,WAAW,CAAC,eAAe,CAAC,MAAM,EAAE,CAAC;YACvC,IAAI,CAAC,OAAO,CAAC,IAAI,CAAC,GAAG,WAAW,CAAC,eAAe,CAAC,MAAM,CAAC,CAAC;QAC3D,CAAC;IACH,CAAC;IAED,OAAO;QACL,IAAI,CAAC,YAAY,EAAE,CAAC;QACpB,OAAO,CAAC,IAAI,CAAC,OAAO,CAAC,MAAM,CAAC;IAC9B,CAAC;IAED,aAAa;QACX,OAAO,IAAI,CAAC,SAAS,CAAC;IACxB,CAAC;IAED,yBAAyB;QACvB,OAAO,KAAK,CAAC;IACf,CAAC;IAED,YAAY;QACV,IAAI,IAAI,CAAC,qBAAqB,IAAI,IAAI,CAAC,qBAAqB,CAAC,WAAW,CAAC,MAAM,KAAK,CAAC,EAAE,CAAC;YACtF,oEAAoE;YACpE,OAAO,IAAI,CAAC,qBAAqB,CAAC;QACpC,CAAC;QAED,IAAI,CAAC,qBAAqB,GAAG,MAAM,CAAC,UAAU,CAAC,sBAAsB,CAAC,WAAW,EAAE,CAAC;QACpF,IAAI,CAAC,IAAI,CAAC,YAAY,EAAE,CAAC;YACvB,OAAO,IAAI,CAAC,qBAAqB,CAAC;QACpC,CAAC;QAED,IAAI,CAAC,IAAI,CAAC,OAAO,CAAC,MAAM,EAAE,CAAC;YACzB,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC,YAAY,CAAC,CAAC;QACpC,CAAC;QACD,IAAI,CAAC,qBAAqB,GAAG,IAAI,oBAAoB,CAAC,IAAI,CAAC,qBAAqB,EAAE,IAAI,CAAC,OAAO,CAAC,CAAC;QAChG,IAAI,CAAC,SAAS,GAAG,IAAI,CAAC,qBAAqB,CAAC,kBAAkB,CAAC,CAAC,CAAC,CAAC;QAElE,OAAO,IAAI,CAAC,qBAAqB,CAAC;IACpC,CAAC;IAED,eAAe;QACb,OAAO,IAAI,CAAC,gBAAgB,CAAC;IAC/B,CAAC;IAED,SAAS;QACP,OAAO,IAAI,CAAC,SAAS,CAAC;IACxB,CAAC;IAED,cAAc,CAAC,SAAmC,EAAE,OAAiC;QACnF,IAAI,CAAC,mBAAmB,CAAC,SAAS,EAAE,OAAO,CAAC,CAAC;IAC/C,CAAC;IAED,eAAe,CAAC,KAAa;QAC3B,IAAI,KAAK,KAAK,CAAC,CAAC,EAAE,CAAC;YACjB,OAAO,IAAI,CAAC;QACd,CAAC;QACD,MAAM,KAAK,GAAG,IAAI,CAAC,OAAO,CAAC,KAAK,CAAC,CAAC;QAClC,IAAI,CAAC,cAAc,GAAG,IAAI,SAAS,CAAC,kBAAkB,CAAC,KAAK,CAAC,EAAE,KAAK,CAAC,CAAC;QACtE,OAAO,IAAI,CAAC,cAAc,CAAC,iBAAiB,CAAC;IAC/C,CAAC;IAED,qBAAqB,CAAC,KAAiB,EAAE,UAAkB,EAAE,WAAmB;QAE9E,MAAM,cAAc,GAAG,IAAI,CAAC,YAAY,CAAC,UAAU,CAAC,CAAC;QACrD,IAAI,CAAC,cAAc,IAAI,CAAC,KAAK,CAAC,KAAK,CAAC,MAAM,CAAC,yBAAyB,CAAC,cAAc,CAAC,EAAE,CAAC;YACrF,OAAO;QACT,CAAC;QACD,MAAM,sBAAsB,GAAG,GAAG,CAAC,WAAW,CAAC,wBAAwB,CAAC,MAAM,CAAC,cAAc,CAAC,CAAC;QAC/F,MAAM,WAAW,GAAG,IAAI,EAAE,CAAC,WAAW,CAAC,WAAW,CAAC,KAAK,CAAC,CAAC;QAC1D,WAAW,CAAC,qBAAqB,CAAC,sBAAsB,CAAC,CAAC;QAC1D,OAAO,WAAW,CAAC;IACrB,CAAC;IAED,aAAa,CAAC,KAA+B;QAC3C,IAAI,CAAC,KAAK,CAAC,KAAK,CAAC,MAAM,CAAC,mBAAmB,CAAC,KAAK,CAAC,EAAE,CAAC;YACnD,OAAO,IAAI,CAAC;QACd,CAAC;QACD,MAAM,SAAS,GAAG,IAAI,CAAC,kBAAkB,CAAC,GAAG,CAAC,KAAK,CAAC,CAAC;QACrD,2CAA2C;QAC3C,IAAI,SAAS,KAAK,SAAS,EAAE,CAAC;YAC5B,OAAO,SAAS,CAAC;QACnB,CAAC;QACD,MAAM,KAAK,GAAG,IAAI,CAAC,OAAO,CAAC,OAAO,CAAC,KAAK,CAAC,CAAC;QAC1C,MAAM,MAAM,GAAG,KAAK,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC,KAAK,CAAC,CAAC,CAAC,IAAI,CAAC;QACzC,IAAI,CAAC,kBAAkB,CAAC,GAAG,CAAC,KAAK,EAAE,MAAM,CAAC,CAAC;QAC3C,OAAO,MAAM,CAAC;IAChB,CAAC;IAED,YAAY,CAAC,UAAkB;QAC7B,OAAO,IAAI,CAAC,OAAO,CAAC,EAAE,CAAC,UAAU,CAAC,IAAI,IAAI,CAAC;IAC7C,CAAC;IAED,mBAAmB,CAAC,UAAkB;QACpC,MAAM,KAAK,GAAG,IAAI,CAAC,YAAY,CAAC,UAAU,CAAC,CAAC;QAC5C,IAAI,CAAC,KAAK,EAAE,CAAC;YACX,OAAO,KAAK,CAAC;QACf,CAAC;QACD,MAAM,gBAAgB,GAAG,oBAAoB,CAAC,aAAa,EAAE,EAAE,mBAAmB,CAAC,KAAK,CAAC,CAAC;QAC1F,OAAO,gBAAgB,KAAK,SAAS,IAAI,gBAAgB,CAAC,MAAM,GAAG,CAAC,CAAC;IACvE,CAAC;IAED,yBAAyB,CAAC,UAAkB;QAC1C,MAAM,KAAK,GAAG,IAAI,CAAC,YAAY,CAAC,UAAU,CAAC,CAAC;QAC5C,IAAI,CAAC,KAAK,EAAE,CAAC;YACX,OAAO;QACT,CAAC;QACD,oBAAoB,CAAC,aAAa,EAAE,EAAE,sBAAsB,CAAC,KAAK,CAAC,CAAC;IACtE,CAAC;IAED,sBAAsB,CAAC,SAAiC;QACtD,IAAI,CAAC,SAAS,IAAI,gBAAgB,CAAC,SAAS,CAAC,EAAE,CAAC;YAC9C,OAAO,CAAC,CAAC,CAAC;QACZ,CAAC;QAED,IAAI,IAAI,CAAC,cAAc,IAAI,eAAe,CAAC,IAAI,CAAC,cAAc,CAAC,iBAAiB,EAAE,SAAS,CAAC,EAAE,CAAC;YAC7F,OAAO,IAAI,CAAC,cAAc,CAAC,UAAU,CAAC;QACxC,CAAC;QAED,IAAI,CAAC,KAAK,CAAC,KAAK,CAAC,MAAM,CAAC,mBAAmB,CAAC,SAAS,CAAC,KAAK,CAAC,EAAE,CAAC;YAC7D,OAAO,CAAC,CAAC,CAAC;QACZ,CAAC;QAED,MAAM,KAAK,GAAG,IAAI,CAAC,OAAO,CAAC,OAAO,CAAC,SAAS,CAAC,KAAK,CAAC,CAAC;QACpD,IAAI,KAAK,KAAK,CAAC,CAAC,EAAE,CAAC;YACjB,IAAI,CAAC,cAAc,GAAG,IAAI,SAAS,CAAC,kBAAkB,CAAC,SAAS,CAAC,KAAK,CAAC,EAAE,KAAK,CAAC,CAAC;QAClF,CAAC;QACD,OAAO,KAAK,CAAC;IACf,CAAC;IAED,aAAa,CAAC,WAAmB;QAC/B,uEAAuE;QACvE,+BAA+B;QAC/B,MAAM,KAAK,GAAG,IAAI,CAAC,qBAAqB,EAAE,KAAK,EAAE,IAAI,IAAI,CAAC;QAC1D,OAAO,KAAK,CAAC;IACf,CAAC;IAED,UAAU,CAAC,KAAa;QACtB,IAAI,CAAC,IAAI,CAAC,qBAAqB,EAAE,CAAC;YAChC,MAAM,IAAI,KAAK,CAAC,0CAA0C,CAAC,CAAC;QAC9D,CAAC;QACD,OAAO,IAAI,CAAC,qBAAqB,CAAC,aAAa,CAAC,IAAI,CAAC,OAAO,CAAC,KAAK,CAAC,CAAC,CAAC;IACvE,CAAC;IAED,SAAS,CAAC,MAAc;QACtB,OAAO,eAAe,CAAC,SAAS,CAAC;IACnC,CAAC;IAED,UAAU,CAAC,KAAa;QACtB,MAAM,KAAK,GAAG,IAAI,CAAC,OAAO,CAAC,KAAK,CAAC,CAAC;QAClC,OAAO,aAAa,CAAC,SAAS,CAAC,YAAY,CAAC,KAAK,CAAC,CAAC;IACrD,CAAC;IAED,SAAS,CAAC,MAAc;QACtB,OAAO,IAAI,CAAC,qBAAqB,EAAE,IAAI,EAAE,IAAI,IAAI,CAAC;IACpD,CAAC;IAED;;;;;;;;;;;;OAYG;IACH,mBAAmB,CACf,KAAiD,EAAE,aAAqB,EACxE,gBAAwB;QAC1B,MAAM,SAAS,GAAG,KAAK,CAAC,OAAO,CAAC,MAAM,CAAC,YAAY,CAAC,KAAK,CAAC,EAAE,CAAC,CAAC;QAC9D,MAAM,WAAW,GAAG,CAAC,IAAY,EAAU,EAAE,CAAC,aAAa,GAAG,CAAC,IAAI,GAAG,SAAS,CAAC,GAAG,gBAAgB,CAAC;QACpG,MAAM,SAAS,GAAG,KAAK,CAAC,OAAO,CAAC,MAAM,CAAC,YAAY,CAAC,KAAK,CAAC,EAAE,CAAC,CAAC;QAC9D,MAAM,OAAO,GAAG,KAAK,CAAC,OAAO,CAAC,MAAM,CAAC,YAAY,CAAC,CAAC,KAAK,CAAC,EAAE,GAAG,KAAK,CAAC,GAAG,CAA6B,CAAC,CAAC;QACtG,MAAM,aAAa,GAAG,KAAK,CAAC,OAAO,CAAC,MAAM,CAAC,YAAY,CAAC,KAAK,CAAC,IAAI,CAAC,IAAI,CAAC,aAAa,CAAC,aAAa,CAAC,CAAC;QACrG,MAAM,cAAc,GAAG,KAAK,CAAC,OAAO,CAAC,MAAM,CAAC,YAAY,CAAC,KAAK,CAAC,IAAI,CAAC,IAAI,CAAC,aAAa,CAAC,aAAa,CAAC,CAAC;QACtG,MAAM,SAAS,GAAG,IAAI,CAAC,GAAG,CAAC,WAAW,CAAC,aAAa,CAAC,EAAE,aAAa,CAAC,CAAC;QACtE,MAAM,UAAU,GAAG,IAAI,CAAC,GAAG,CAAC,WAAW,CAAC,cAAc,CAAC,EAAE,SAAS,CAAC,CAAC;QACpE,MAAM,MAAM,GACR,IAAI,CAAC,GAAG,CAAC,WAAW,CAAC,KAAK,CAAC,OAAO,CAAC,MAAM,CAAC,YAAY,CAAC,KAAK,CAAC,IAAI,CAAC,IAAI,CAAC,aAAa,CAAC,UAAU,CAAC,CAAC,EAAE,UAAU,CAAC,CAAC;QACnH,MAAM,KAAK,GAAG,WAAW,CAAC,SAAS,CAAC,CAAC;QACrC,MAAM,GAAG,GAAG,IAAI,CAAC,GAAG,CAAC,WAAW,CAAC,OAAO,CAAC,EAAE,MAAM,CAAC,CAAC;QAEnD,OAAO,EAAC,SAAS,EAAE,UAAU,EAAE,MAAM,EAAE,KAAK,EAAE,GAAG,EAAC,CAAC;IACrD,CAAC;IAED;;;;;;;;;;;OAWG;IACH,aAAa,CACT,KAAa,EAAE,OAAiC,EAAE,KAAkB,EAAE,IAAY,EAAE,IAAY,EAChG,QAAgB,EAAE,SAAiB,EAAE,aAAqB,EAAE,gBAAwB;QACtF,MAAM,KAAK,GAAG,IAAI,CAAC,OAAO,CAAC,KAAK,CAAC,CAAC;QAClC,IAAI,KAAK,CAAC,KAAK,CAAC,MAAM,CAAC,8BAA8B,CAAC,KAAK,CAAC,EAAE,CAAC;YAC7D,OAAO,IAAI,CAAC,qCAAqC,CAC7C,KAAK,EAAE,OAAO,EAAE,IAAI,EAAE,SAAS,EAAE,aAAa,EAAE,gBAAgB,CAAC,CAAC;QACxE,CAAC;QACD,IAAI,CAAC,KAAK,CAAC,KAAK,CAAC,MAAM,CAAC,yBAAyB,CAAC,KAAK,CAAC,EAAE,CAAC;YACzD,OAAO,KAAK,CAAC;QACf,CAAC;QACD,OAAO,IAAI,CAAC,uBAAuB,CAC/B,KAAK,EAAE,OAAO,EAAE,KAAK,EAAE,IAAI,EAAE,IAAI,EAAE,QAAQ,EAAE,SAAS,EAAE,aAAa,EAAE,gBAAgB,CAAC,CAAC;IAC/F,CAAC;IAED;;;;;;;;;;;;SAYK;IACL,uBAAuB,CACnB,KAAa,EAAE,OAAiC,EAAE,KAAkB,EAAE,IAAY,EAAE,IAAY,EAChG,QAAgB,EAAE,SAAiB,EAAE,aAAqB,EAAE,gBAAwB;QACtF,MAAM,KAAK,GAAG,IAAI,CAAC,OAAO,CAAC,KAAK,CAAC,CAAC;QAClC,IAAI,CAAC,KAAK,CAAC,KAAK,CAAC,MAAM,CAAC,yBAAyB,CAAC,KAAK,CAAC,EAAE,CAAC;YACzD,OAAO,KAAK,CAAC;QACf,CAAC;QACD,MAAM,EAAC,SAAS,EAAE,UAAU,EAAE,MAAM,EAAE,KAAK,EAAE,GAAG,EAAC,GAC7C,IAAI,CAAC,mBAAmB,CAAC,KAAK,EAAE,aAAa,EAAE,gBAAgB,CAAC,CAAC;QAErE,qBAAqB;QACrB,OAAO,CAAC,SAAS,GAAG,0BAA0B,CAAC;QAC/C,OAAO,CAAC,QAAQ,CAAC,SAAS,GAAG,GAAG,EAAE,IAAI,GAAG,GAAG,EAAE,UAAU,GAAG,SAAS,GAAG,GAAG,EAAE,SAAS,GAAG,CAAC,CAAC,CAAC;QAC3F,2DAA2D;QAC3D,OAAO,CAAC,SAAS,GAAG,YAAY,CAAC,YAAY,CAAC,QAAQ,EAAE,CAAC,gBAAgB,CAAC,gCAAgC,CAAC,CAAC;QAC5G,OAAO,CAAC,QAAQ,CAAC,IAAI,EAAE,IAAI,GAAG,GAAG,EAAE,SAAS,GAAG,IAAI,EAAE,SAAS,CAAC,CAAC;QAChE,OAAO,CAAC,QAAQ,CAAC,MAAM,EAAE,IAAI,GAAG,GAAG,EAAE,IAAI,GAAG,QAAQ,GAAG,MAAM,EAAE,SAAS,CAAC,CAAC;QAE1E,gCAAgC;QAChC,SAAS,QAAQ,CAAC,KAAa,EAAE,GAAW,EAAE,CAAS;YACrD,MAAM,aAAa,CAAC,YAAY,GAAG,CAAC,CAAC;YACrC,OAAO,CAAC,MAAM,CAAC,KAAK,EAAE,CAAC,GAAG,YAAY,GAAG,CAAC,CAAC,CAAC;YAC5C,OAAO,CAAC,MAAM,CAAC,KAAK,EAAE,CAAC,GAAG,YAAY,GAAG,CAAC,CAAC,CAAC;YAC5C,OAAO,CAAC,MAAM,CAAC,KAAK,EAAE,CAAC,CAAC,CAAC;YACzB,OAAO,CAAC,MAAM,CAAC,GAAG,EAAE,CAAC,CAAC,CAAC;QACzB,CAAC;QAED,OAAO,CAAC,SAAS,EAAE,CAAC;QACpB,OAAO,CAAC,SAAS,GAAG,CAAC,CAAC;QACtB,OAAO,CAAC,WAAW,GAAG,MAAM,CAAC;QAC7B,MAAM,KAAK,GAAG,IAAI,CAAC,KAAK,CAAC,IAAI,GAAG,SAAS,GAAG,CAAC,CAAC,GAAG,GAAG,CAAC;QACrD,MAAM,QAAQ,GAAG,KAAK,GAAG,GAAG,CAAC;QAC7B,MAAM,SAAS,GAAG,GAAG,GAAG,GAAG,CAAC;QAC5B,QAAQ,CAAC,QAAQ,EAAE,SAAS,EAAE,KAAK,CAAC,CAAC;QACrC,QAAQ,CAAC,SAAS,EAAE,MAAM,EAAE,KAAK,CAAC,CAAC;QACnC,OAAO,CAAC,MAAM,EAAE,CAAC;QAEjB,2BAA2B;QAC3B,MAAM,SAAS,GAAG,IAAI,CAAC,GAAG,CAAC,SAAS,EAAE,CAAC,CAAC,CAAC;QACzC,MAAM,SAAS,GAAG,MAAM,GAAG,SAAS,CAAC;QACrC,MAAM,aAAa,CAAC,cAAc,GAAG,EAAE,CAAC;QACxC,IAAI,SAAS,IAAI,cAAc,EAAE,CAAC;YAChC,IAAI,KAAK,GAAG,IAAI,CAAC,UAAU,CAAC,KAAK,CAAC,IAAI,EAAE,CAAC;YACzC,IAAI,KAAK,CAAC,IAAI,CAAC,IAAI,CAAC,iBAAiB,EAAE,CAAC;gBACtC,KAAK,GAAG,IAAI,GAAG,KAAK,CAAC;YACvB,CAAC;YACD,IAAI,KAAK,EAAE,CAAC;gBACV,MAAM,aAAa,CAAC,WAAW,GAAG,CAAC,CAAC;gBACpC,MAAM,aAAa,CAAC,YAAY,GAAG,CAAC,CAAC;gBACrC,MAAM,cAAc,GAAG,SAAS,GAAG,YAAY,CAAC;gBAChD,MAAM,WAAW,GAAG,EAAE,CAAC,OAAO,CAAC,WAAW,CAAC,OAAO,EAAE,KAAK,EAAE,SAAS,GAAG,CAAC,GAAG,WAAW,CAAC,CAAC;gBACxF,OAAO,CAAC,SAAS,GAAG,MAAM,CAAC;gBAC3B,OAAO,CAAC,QAAQ,CAAC,WAAW,EAAE,SAAS,GAAG,WAAW,EAAE,IAAI,GAAG,cAAc,CAAC,CAAC;YAChF,CAAC;QACH,CAAC;QAED,OAAO,IAAI,CAAC;IACd,CAAC;IAED;;;;SAIK;IACL,qCAAqC,CACjC,KAAa,EAAE,OAAiC,EAAE,IAAY,EAAE,SAAiB,EAAE,aAAqB,EACxG,gBAAwB;QAC1B,OAAO,CAAC,IAAI,EAAE,CAAC;QACf,MAAM,KAAK,GAAG,IAAI,CAAC,OAAO,CAAC,KAAK,CAAoD,CAAC;QACrF,MAAM,SAAS,GAAG,KAAK,CAAC,OAAO,CAAC,MAAM,CAAC,YAAY,CAAC,KAAK,CAAC,EAAE,CAAC,CAAC;QAC9D,MAAM,WAAW,GAAG,CAAC,IAAY,EAAU,EAAE,CAAC,IAAI,CAAC,KAAK,CAAC,aAAa,GAAG,CAAC,IAAI,GAAG,SAAS,CAAC,GAAG,gBAAgB,CAAC,CAAC;QAChH,MAAM,OAAO,GAAG,KAAK,CAAC,OAAO,CAAC,MAAM,CAAC,YAAY,CAAC,CAAC,KAAK,CAAC,EAAE,GAAG,KAAK,CAAC,GAAG,CAA6B,CAAC,CAAC;QACtG,MAAM,KAAK,GAAG,WAAW,CAAC,SAAS,CAAC,GAAG,GAAG,CAAC;QAC3C,MAAM,GAAG,GAAG,WAAW,CAAC,OAAO,CAAC,GAAG,GAAG,CAAC;QACvC,OAAO,CAAC,WAAW,GAAG,YAAY,CAAC,YAAY,CAAC,QAAQ,EAAE,CAAC,gBAAgB,CAAC,uBAAuB,CAAC,CAAC;QAErG,MAAM,KAAK,GAAG,IAAI,CAAC,KAAK,CAAC,IAAI,GAAG,SAAS,GAAG,CAAC,CAAC,GAAG,GAAG,CAAC;QACrD,OAAO,CAAC,WAAW,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC;QAC5B,OAAO,CAAC,MAAM,CAAC,KAAK,EAAE,KAAK,GAAG,CAAC,CAAC,CAAC;QACjC,OAAO,CAAC,MAAM,CAAC,GAAG,EAAE,KAAK,GAAG,CAAC,CAAC,CAAC;QAC/B,OAAO,CAAC,MAAM,CAAC,KAAK,EAAE,KAAK,GAAG,CAAC,CAAC,CAAC;QACjC,OAAO,CAAC,MAAM,CAAC,GAAG,EAAE,KAAK,GAAG,CAAC,CAAC,CAAC;QAC/B,OAAO,CAAC,MAAM,EAAE,CAAC;QACjB,OAAO,CAAC,OAAO,EAAE,CAAC;QAClB,OAAO,IAAI,CAAC;IACd,CAAC;IAED,eAAe,CAAC,MAAc;QAC5B,OAAO,IAAI,CAAC;IACd,CAAC;IAED;;;;;;;;SAQK;IACL,kBAAkB,CAAC,UAAkB;QACnC,OAAO,IAAI,CAAC,qBAAqB,EAAE,kBAAkB,CAAC,GAAG,CAAC,UAAU,CAAC,IAAI,KAAK,CAAC;IACjF,CAAC;IAED,qBAAqB,CAAC,KAAa;QACjC,MAAM,KAAK,GAAG,IAAI,CAAC,OAAO,CAAC,KAAK,CAAC,CAAC;QAClC,IAAI,KAAK,CAAC,KAAK,CAAC,MAAM,CAAC,yBAAyB,CAAC,KAAK,CAAC,EAAE,CAAC;YACxD,MAAM,OAAO,GAAG,QAAQ,CAAC,aAAa,CAAC,KAAK,CAAC,CAAC;YAC9C,MAAM,IAAI,GAAG,EAAE,CAAC,OAAO,CAAC,8BAA8B,CAAC,OAAO,EAAE,EAAC,OAAO,EAAE,+BAA+B,EAAC,CAAC,CAAC;YAE5G,MAAM,QAAQ,GAAG,IAAI,CAAC,WAAW,CAAC,KAAK,EAAE,6BAA6B,CAAC,CAAC;YACxE,MAAM,WAAW,GAAG,IAAI,kBAAkB,CAAC,qBAAqB,CAAC,qBAAqB,EAAE,CAAC;YACzF,WAAW,CAAC,IAAI,GAAG,EAAC,cAAc,EAAE,KAAK,EAAE,YAAY,EAAE,IAAI,CAAC,aAAa,EAAC,CAAC;YAC7E,QAAQ,CAAC,WAAW,CAAC,WAAW,CAAC,CAAC;YAClC,OAAO,OAAO,CAAC;QACjB,CAAC;QACD,OAAO,IAAI,CAAC;IACd,CAAC;IAED;;;OAGG;IACH,oBAAoB,CAAC,cAAgD;QACnE,MAAM,EAAC,WAAW,EAAC,GAAG,cAAc,CAAC,IAAI,CAAC;QAC1C,MAAM,OAAO,GAAG,KAAK,CAAC,OAAO,CAAC,MAAM,CAAC,YAAY,CAAC,WAAW,CAAC,GAAG,CAAC,CAAC;QACnE,MAAM,OAAO,GAAG,KAAK,CAAC,OAAO,CAAC,MAAM,CAAC,YAAY,CAAC,WAAW,CAAC,GAAG,CAAC,CAAC;QACnE,IAAI,CAAC,gBAAgB,GAAG,OAAO,CAAC;QAChC,IAAI,CAAC,SAAS,GAAG,OAAO,KAAK,OAAO,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC,OAAO,GAAG,IAAI,CAAC,gBAAgB,CAAC;IAChF,CAAC;IAED;;;;;;OAMG;IACH,mBAAmB,CAAC,SAAmC,EAAE,OAAiC;QACxF,IAAI,CAAC,IAAI,CAAC,qBAAqB,IAAI,CAAC,IAAI,CAAC,qBAAqB,EAAE,CAAC;YAC/D,OAAO;QACT,CAAC;QACD,IAAI,CAAC,SAAS,GAAG,IAAI,CAAC,qBAAqB,CAAC,2BAA2B,CAAC,IAAI,CAAC,OAAO,EAAE,SAAS,EAAE,OAAO,CAAC,CAAC;QAE1G,wDAAwD;QACxD,0EAA0E;QAC1E,4EAA4E;QAC5E,IAAI,CAAC,qBAAqB,GAAG,MAAM,CAAC,UAAU,CAAC,sBAAsB,CAAC,MAAM,CAAC;YAC3E,WAAW,EAAE,IAAI,CAAC,qBAAqB,EAAE,WAAW;YACpD,eAAe,EAAE,IAAI,CAAC,qBAAqB,EAAE,eAAe;YAC5D,eAAe,EAAE,IAAI,CAAC,qBAAqB,EAAE,eAAe;YAC5D,MAAM,EAAE,IAAI,CAAC,qBAAqB,EAAE,MAAM;YAC1C,cAAc,EAAE,IAAI,CAAC,qBAAqB,CAAC,cAAc;YACzD,gBAAgB,EAAE,IAAI,CAAC,qBAAqB,CAAC,gBAAgB;SAC9D,CAAC,CAAC;IACL,CAAC;IAED,eAAe;QACb,IAAI,CAAC,IAAI,CAAC,qBAAqB,IAAI,IAAI,CAAC,SAAS,KAAK,CAAC,EAAE,CAAC;YACxD,OAAO,CAAC,CAAC;QACX,CAAC;QACD,MAAM,KAAK,GAAG,IAAI,CAAC,qBAAqB,CAAC,KAAK,EAAE,CAAC;QACjD,IAAI,CAAC,KAAK,EAAE,CAAC;YACX,OAAO,CAAC,CAAC;QACX,CAAC;QACD,6DAA6D;QAC7D,OAAO,KAAK,CAAC,KAAK,CAAC,MAAM,GAAG,CAAC,IAAI,CAAC,UAAU,EAAE,CAAC,CAAC,CAAC,QAAQ,CAAC,eAAe,CAAC,KAAK,CAAC,IAAI,CAAC,SAAS,GAAG,CAAC,EAAE,CAAC,EAAE,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;IACnH,CAAC;IAED,UAAU;QACR,OAAO,OAAO,CAAC,IAAI,CAAC,qBAAqB,EAAE,KAAK,EAAE,EAAE,QAAQ,CAAC,CAAC;IAChE,CAAC;IAED,WAAW,CAAC,KAAa,EAAE,SAAkB;QAC3C,OAAO,IAAI,CAAC,aAAa,CAAC,qBAAqB,CAAC,KAAK,EAAE,SAAS,CAAC,CAAC;IACpE,CAAC;IAED,cAAc,CAAC,WAAmB;QAChC,OAAO,KAAK,CAAC;IACf,CAAC;IAED;;;OAGG;IACH,MAAM,CACF,aAAkD,EAClD,MAA6C;QAE/C,MAAM,OAAO,GAAiD,EAAE,CAAC;QACjE,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,IAAI,CAAC,OAAO,CAAC,MAAM,EAAE,CAAC,EAAE,EAAE,CAAC;YAC7C,MAAM,KAAK,GAAG,IAAI,CAAC,OAAO,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC;YACjC,IAAI,CAAC,KAAK,EAAE,CAAC;gBACX,SAAS;YACX,CAAC;YAED,IAAI,CAAC,KAAK,CAAC,OAAO,CAAC,MAAM,CAAC,eAAe,CAAC,KAAK,EAAE,aAAa,CAAC,EAAE,CAAC;gBAChE,SAAS;YACX,CAAC;YAED,IAAI,CAAC,MAAM,IAAI,MAAM,CAAC,MAAM,CAAC,KAAK,EAAE,IAAI,CAAC,YAAY,IAAI,SAAS,CAAC,EAAE,CAAC;gBACpE,MAAM,cAAc,GAAG,KAAK,CAAC,OAAO,CAAC,MAAM,CAAC,YAAY,CAAC,KAAK,CAAC,EAAE,CAAC,CAAC;gBACnE,OAAO,CAAC,IAAI,CAAC,EAAC,cAAc,EAAE,KAAK,EAAE,CAAC,EAAE,QAAQ,EAAE,SAAS,EAAC,CAAC,CAAC;YAChE,CAAC;QACH,CAAC;QACD,OAAO,OAAO,CAAC;IACjB,CAAC;IAED;;;;QAII;IACJ,8BAA8B;QAC5B,IAAI,CAAC,IAAI,CAAC,YAAY,EAAE,CAAC;YACvB,OAAO,EAAE,CAAC;QACZ,CAAC;QACD,OAAO,IAAI,CAAC,YAAY,CAAC,IAAI,CAAC,oBAAoB,CAAC;IACrD,CAAC;IAED,qBAAqB,CAAC,UAAkB;QACtC,IAAI,CAAC,IAAI,CAAC,YAAY,EAAE,CAAC;YACvB,OAAO,KAAK,CAAC;QACf,CAAC;QACD,IAAI,CAAC,IAAI,CAAC,qBAAqB,EAAE,CAAC;YAChC,OAAO,KAAK,CAAC;QACf,CAAC;QACD,IAAI,IAAI,CAAC,mBAAmB,KAAK,UAAU,EAAE,CAAC;YAC5C,IAAI,IAAI,CAAC,mBAAmB,EAAE,CAAC;gBAC7B,IAAI,CAAC,qBAAqB,CAAC,cAAc,GAAG,IAAI,CAAC,mBAAmB,CAAC;YACvE,CAAC;YACD,OAAO,IAAI,CAAC;QACd,CAAC;QACD,IAAI,CAAC,IAAI,CAAC,qBAAqB,EAAE,CAAC;YAChC,OAAO,KAAK,CAAC;QACf,CAAC;QAED,+FAA+F;QAC/F,MAAM,4BAA4B,GAAG,IAAI,CAAC,qBAAqB,CAAC,cAAc,CAAC,MAAM,CAAC;QACtF,0EAA0E;QAC1E,oEAAoE;QACpE,aAAa;QACb,IAAI,UAAU,KAAK,CAAC,CAAC,EAAE,CAAC;YACtB,IAAI,CAAC,mBAAmB,GAAG,UAAU,CAAC;YACtC,IAAI,4BAA4B,KAAK,CAAC,EAAE,CAAC;gBACvC,sEAAsE;gBACtE,OAAO,KAAK,CAAC;YACf,CAAC;YACD,0DAA0D;YAC1D,IAAI,CAAC,qBAAqB,CAAC,aAAa,EAAE,CAAC;YAC3C,OAAO,IAAI,CAAC;QACd,CAAC;QAED,MAAM,KAAK,GAAG,IAAI,CAAC,OAAO,CAAC,UAAU,CAAC,CAAC;QACvC,0DAA0D;QAC1D,IAAI,CAAC,qBAAqB,CAAC,aAAa,EAAE,CAAC;QAC3C,IAAI,CAAC,mBAAmB,GAAG,UAAU,CAAC;QAEtC,MAAM,cAAc,GAAG,8BAA8B,CAAC,IAAI,CAAC,YAAY,EAAE,KAAK,CAAC,CAAC;QAChF,4CAA4C;QAC5C,IAAI,4BAA4B,KAAK,CAAC,IAAI,cAAc,CAAC,MAAM,KAAK,CAAC,EAAE,CAAC;YACtE,OAAO,KAAK,CAAC;QACf,CAAC;QACD,KAAK,MAAM,aAAa,IAAI,cAAc,EAAE,CAAC;YAC3C,MAAM,UAAU,GAAG,IAAI,CAAC,aAAa,CAAC,aAAa,CAAC,KAAK,CAAC,CAAC;YAC3D,MAAM,cAAc,GAAG,IAAI,CAAC,aAAa,CAAC,aAAa,CAAC,SAAS,CAAC,CAAC;YACnE,IAAI,UAAU,KAAK,IAAI,IAAI,cAAc,KAAK,IAAI,EAAE,CAAC;gBACnD,SAAS;YACX,CAAC;YACD,IAAI,CAAC,qBAAqB,CAAC,cAAc,CAAC,IAAI,CAAC;gBAC7C,cAAc;gBACd,UAAU;aACX,CAAC,CAAC;QACL,CAAC;QACD,IAAI,CAAC,mBAAmB,GAAG,IAAI,CAAC,qBAAqB,CAAC,cAAc,CAAC;QACrE,OAAO,IAAI,CAAC;IACd,CAAC;CACF","sourcesContent":["// Copyright 2016 The Chromium Authors. All rights reserved.\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\n\nimport * as i18n from '../../core/i18n/i18n.js';\nimport * as Platform from '../../core/platform/platform.js';\nimport * as SDK from '../../core/sdk/sdk.js';\nimport * as Trace from '../../models/trace/trace.js';\nimport * as PerfUI from '../../ui/legacy/components/perf_ui/perf_ui.js';\nimport * as UI from '../../ui/legacy/legacy.js';\nimport * as ThemeSupport from '../../ui/legacy/theme_support/theme_support.js';\n\nimport * as TimelineComponents from './components/components.js';\nimport {initiatorsDataToDrawForNetwork} from './Initiators.js';\nimport {ModificationsManager} from './ModificationsManager.js';\nimport {NetworkTrackAppender, type NetworkTrackEvent} from './NetworkTrackAppender.js';\nimport timelineFlamechartPopoverStyles from './timelineFlamechartPopover.css.js';\nimport {FlameChartStyle, Selection} from './TimelineFlameChartView.js';\nimport {\n  selectionFromEvent,\n  selectionIsRange,\n  selectionsEqual,\n  type TimelineSelection,\n} from './TimelineSelection.js';\nimport * as TimelineUtils from './utils/utils.js';\n\nexport class TimelineFlameChartNetworkDataProvider implements PerfUI.FlameChart.FlameChartDataProvider {\n  #minimumBoundary = 0;\n  #timeSpan = 0;\n  #events: NetworkTrackEvent[] = [];\n  #maxLevel = 0;\n  #networkTrackAppender: NetworkTrackAppender|null = null;\n\n  #timelineDataInternal: PerfUI.FlameChart.FlameChartTimelineData|null = null;\n  #lastSelection: Selection|null = null;\n  #parsedTrace: Trace.Handlers.Types.ParsedTrace|null = null;\n  #eventIndexByEvent = new Map<NetworkTrackEvent, number|null>();\n  // -1 means no entry is selected.\n  #lastInitiatorEntry = -1;\n  #lastInitiatorsData: PerfUI.FlameChart.FlameChartInitiatorData[] = [];\n  #entityMapper: TimelineUtils.EntityMapper.EntityMapper|null = null;\n\n  constructor() {\n    this.reset();\n  }\n\n  // Reset all data other than the UI elements.\n  // This should be called when\n  // - initialized the data provider\n  // - a new trace file is coming (when `setModel()` is called)\n  // etc.\n  reset(): void {\n    this.#maxLevel = 0;\n    this.#minimumBoundary = 0;\n    this.#timeSpan = 0;\n    this.#eventIndexByEvent.clear();\n    this.#events = [];\n    this.#timelineDataInternal = null;\n    this.#parsedTrace = null;\n\n    this.#networkTrackAppender = null;\n  }\n\n  setModel(parsedTrace: Trace.Handlers.Types.ParsedTrace, entityMapper: TimelineUtils.EntityMapper.EntityMapper): void {\n    this.reset();\n    this.#parsedTrace = parsedTrace;\n    this.#entityMapper = entityMapper;\n\n    this.setEvents(this.#parsedTrace);\n    this.#setTimingBoundsData(this.#parsedTrace);\n  }\n\n  setEvents(parsedTrace: Trace.Handlers.Types.ParsedTrace): void {\n    if (parsedTrace.NetworkRequests.webSocket) {\n      parsedTrace.NetworkRequests.webSocket.forEach(webSocketData => {\n        if (webSocketData.syntheticConnection) {\n          this.#events.push(webSocketData.syntheticConnection);\n        }\n        this.#events.push(...webSocketData.events);\n      });\n    }\n    if (parsedTrace.NetworkRequests.byTime) {\n      this.#events.push(...parsedTrace.NetworkRequests.byTime);\n    }\n  }\n\n  isEmpty(): boolean {\n    this.timelineData();\n    return !this.#events.length;\n  }\n\n  maxStackDepth(): number {\n    return this.#maxLevel;\n  }\n\n  hasTrackConfigurationMode(): boolean {\n    return false;\n  }\n\n  timelineData(): PerfUI.FlameChart.FlameChartTimelineData {\n    if (this.#timelineDataInternal && this.#timelineDataInternal.entryLevels.length !== 0) {\n      // The flame chart data is built already, so return the cached data.\n      return this.#timelineDataInternal;\n    }\n\n    this.#timelineDataInternal = PerfUI.FlameChart.FlameChartTimelineData.createEmpty();\n    if (!this.#parsedTrace) {\n      return this.#timelineDataInternal;\n    }\n\n    if (!this.#events.length) {\n      this.setEvents(this.#parsedTrace);\n    }\n    this.#networkTrackAppender = new NetworkTrackAppender(this.#timelineDataInternal, this.#events);\n    this.#maxLevel = this.#networkTrackAppender.appendTrackAtLevel(0);\n\n    return this.#timelineDataInternal;\n  }\n\n  minimumBoundary(): number {\n    return this.#minimumBoundary;\n  }\n\n  totalTime(): number {\n    return this.#timeSpan;\n  }\n\n  setWindowTimes(startTime: Trace.Types.Timing.Milli, endTime: Trace.Types.Timing.Milli): void {\n    this.#updateTimelineData(startTime, endTime);\n  }\n\n  createSelection(index: number): TimelineSelection|null {\n    if (index === -1) {\n      return null;\n    }\n    const event = this.#events[index];\n    this.#lastSelection = new Selection(selectionFromEvent(event), index);\n    return this.#lastSelection.timelineSelection;\n  }\n\n  customizedContextMenu(event: MouseEvent, eventIndex: number, _groupIndex: number): UI.ContextMenu.ContextMenu\n      |undefined {\n    const networkRequest = this.eventByIndex(eventIndex);\n    if (!networkRequest || !Trace.Types.Events.isSyntheticNetworkRequest(networkRequest)) {\n      return;\n    }\n    const timelineNetworkRequest = SDK.TraceObject.RevealableNetworkRequest.create(networkRequest);\n    const contextMenu = new UI.ContextMenu.ContextMenu(event);\n    contextMenu.appendApplicableItems(timelineNetworkRequest);\n    return contextMenu;\n  }\n\n  indexForEvent(event: Trace.Types.Events.Event): number|null {\n    if (!Trace.Types.Events.isNetworkTrackEntry(event)) {\n      return null;\n    }\n    const fromCache = this.#eventIndexByEvent.get(event);\n    // Cached value might be null, which is OK.\n    if (fromCache !== undefined) {\n      return fromCache;\n    }\n    const index = this.#events.indexOf(event);\n    const result = index > -1 ? index : null;\n    this.#eventIndexByEvent.set(event, result);\n    return result;\n  }\n\n  eventByIndex(entryIndex: number): Trace.Types.Events.SyntheticNetworkRequest|Trace.Types.Events.WebSocketEvent|null {\n    return this.#events.at(entryIndex) ?? null;\n  }\n\n  entryHasAnnotations(entryIndex: number): boolean {\n    const event = this.eventByIndex(entryIndex);\n    if (!event) {\n      return false;\n    }\n    const entryAnnotations = ModificationsManager.activeManager()?.annotationsForEntry(event);\n    return entryAnnotations !== undefined && entryAnnotations.length > 0;\n  }\n\n  deleteAnnotationsForEntry(entryIndex: number): void {\n    const event = this.eventByIndex(entryIndex);\n    if (!event) {\n      return;\n    }\n    ModificationsManager.activeManager()?.deleteEntryAnnotations(event);\n  }\n\n  entryIndexForSelection(selection: TimelineSelection|null): number {\n    if (!selection || selectionIsRange(selection)) {\n      return -1;\n    }\n\n    if (this.#lastSelection && selectionsEqual(this.#lastSelection.timelineSelection, selection)) {\n      return this.#lastSelection.entryIndex;\n    }\n\n    if (!Trace.Types.Events.isNetworkTrackEntry(selection.event)) {\n      return -1;\n    }\n\n    const index = this.#events.indexOf(selection.event);\n    if (index !== -1) {\n      this.#lastSelection = new Selection(selectionFromEvent(selection.event), index);\n    }\n    return index;\n  }\n\n  groupForEvent(_entryIndex: number): PerfUI.FlameChart.Group|null {\n    // Because the network track only contains one group, we don't actually\n    // need to do any lookups here.\n    const group = this.#networkTrackAppender?.group() ?? null;\n    return group;\n  }\n\n  entryColor(index: number): string {\n    if (!this.#networkTrackAppender) {\n      throw new Error('networkTrackAppender should not be empty');\n    }\n    return this.#networkTrackAppender.colorForEvent(this.#events[index]);\n  }\n\n  textColor(_index: number): string {\n    return FlameChartStyle.textColor;\n  }\n\n  entryTitle(index: number): string|null {\n    const event = this.#events[index];\n    return TimelineUtils.EntryName.nameForEntry(event);\n  }\n\n  entryFont(_index: number): string|null {\n    return this.#networkTrackAppender?.font() || null;\n  }\n\n  /**\n   * Returns the pixels needed to decorate the event.\n   * The pixels compare to the start of the earliest event of the request.\n   *\n   * Request.beginTime(), which is used in FlameChart to calculate the unclippedBarX\n   * v\n   *    |----------------[ (URL text)    waiting time   |   request  ]--------|\n   *    ^start           ^sendStart                     ^headersEnd  ^Finish  ^end\n   * @param request\n   * @param unclippedBarX The start pixel of the request. It is calculated with request.beginTime() in FlameChart.\n   * @param timeToPixelRatio\n   * @returns the pixels to draw waiting time and left and right whiskers and url text\n   */\n  getDecorationPixels(\n      event: Trace.Types.Events.SyntheticNetworkRequest, unclippedBarX: number,\n      timeToPixelRatio: number): {sendStart: number, headersEnd: number, finish: number, start: number, end: number} {\n    const beginTime = Trace.Helpers.Timing.microToMilli(event.ts);\n    const timeToPixel = (time: number): number => unclippedBarX + (time - beginTime) * timeToPixelRatio;\n    const startTime = Trace.Helpers.Timing.microToMilli(event.ts);\n    const endTime = Trace.Helpers.Timing.microToMilli((event.ts + event.dur) as Trace.Types.Timing.Micro);\n    const sendStartTime = Trace.Helpers.Timing.microToMilli(event.args.data.syntheticData.sendStartTime);\n    const headersEndTime = Trace.Helpers.Timing.microToMilli(event.args.data.syntheticData.downloadStart);\n    const sendStart = Math.max(timeToPixel(sendStartTime), unclippedBarX);\n    const headersEnd = Math.max(timeToPixel(headersEndTime), sendStart);\n    const finish =\n        Math.max(timeToPixel(Trace.Helpers.Timing.microToMilli(event.args.data.syntheticData.finishTime)), headersEnd);\n    const start = timeToPixel(startTime);\n    const end = Math.max(timeToPixel(endTime), finish);\n\n    return {sendStart, headersEnd, finish, start, end};\n  }\n\n  /**\n   * Decorates the entry depends on the type of the event:\n   * @param index\n   * @param context\n   * @param barX The x pixel of the visible part request\n   * @param barY The y pixel of the visible part request\n   * @param barWidth The width of the visible part request\n   * @param barHeight The height of the visible part request\n   * @param unclippedBarX The start pixel of the request compare to the visible area. It is calculated with request.beginTime() in FlameChart.\n   * @param timeToPixelRatio\n   * @returns if the entry needs to be decorate, which is alway true if the request has \"timing\" field\n   */\n  decorateEntry(\n      index: number, context: CanvasRenderingContext2D, _text: string|null, barX: number, barY: number,\n      barWidth: number, barHeight: number, unclippedBarX: number, timeToPixelRatio: number): boolean {\n    const event = this.#events[index];\n    if (Trace.Types.Events.isSyntheticWebSocketConnection(event)) {\n      return this.#decorateSyntheticWebSocketConnection(\n          index, context, barY, barHeight, unclippedBarX, timeToPixelRatio);\n    }\n    if (!Trace.Types.Events.isSyntheticNetworkRequest(event)) {\n      return false;\n    }\n    return this.#decorateNetworkRequest(\n        index, context, _text, barX, barY, barWidth, barHeight, unclippedBarX, timeToPixelRatio);\n  }\n\n  /**\n   * Decorates the Network Request entry with the following steps:\n   *   Draw a waiting time between |sendStart| and |headersEnd|\n   *     By adding a extra transparent white layer\n   *   Draw a whisk between |start| and |sendStart|\n   *   Draw a whisk between |finish| and |end|\n   *     By draw another layer of background color to \"clear\" the area\n   *     Then draw the whisk\n   *   Draw the URL after the |sendStart|\n   *\n   *   |----------------[ (URL text)    waiting time   |   request  ]--------|\n   *   ^start           ^sendStart                     ^headersEnd  ^Finish  ^end\n   * */\n  #decorateNetworkRequest(\n      index: number, context: CanvasRenderingContext2D, _text: string|null, barX: number, barY: number,\n      barWidth: number, barHeight: number, unclippedBarX: number, timeToPixelRatio: number): boolean {\n    const event = this.#events[index];\n    if (!Trace.Types.Events.isSyntheticNetworkRequest(event)) {\n      return false;\n    }\n    const {sendStart, headersEnd, finish, start, end} =\n        this.getDecorationPixels(event, unclippedBarX, timeToPixelRatio);\n\n    // Draw waiting time.\n    context.fillStyle = 'hsla(0, 100%, 100%, 0.8)';\n    context.fillRect(sendStart + 0.5, barY + 0.5, headersEnd - sendStart - 0.5, barHeight - 2);\n    // Clear portions of initial rect to prepare for the ticks.\n    context.fillStyle = ThemeSupport.ThemeSupport.instance().getComputedValue('--sys-color-cdt-base-container');\n    context.fillRect(barX, barY - 0.5, sendStart - barX, barHeight);\n    context.fillRect(finish, barY - 0.5, barX + barWidth - finish, barHeight);\n\n    // Draws left and right whiskers\n    function drawTick(begin: number, end: number, y: number): void {\n      const /** @const */ tickHeightPx = 6;\n      context.moveTo(begin, y - tickHeightPx / 2);\n      context.lineTo(begin, y + tickHeightPx / 2);\n      context.moveTo(begin, y);\n      context.lineTo(end, y);\n    }\n\n    context.beginPath();\n    context.lineWidth = 1;\n    context.strokeStyle = '#ccc';\n    const lineY = Math.floor(barY + barHeight / 2) + 0.5;\n    const leftTick = start + 0.5;\n    const rightTick = end - 0.5;\n    drawTick(leftTick, sendStart, lineY);\n    drawTick(rightTick, finish, lineY);\n    context.stroke();\n\n    // Draw request URL as text\n    const textStart = Math.max(sendStart, 0);\n    const textWidth = finish - textStart;\n    const /** @const */ minTextWidthPx = 20;\n    if (textWidth >= minTextWidthPx) {\n      let title = this.entryTitle(index) || '';\n      if (event.args.data.fromServiceWorker) {\n        title = '⚙ ' + title;\n      }\n      if (title) {\n        const /** @const */ textPadding = 4;\n        const /** @const */ textBaseline = 5;\n        const textBaseHeight = barHeight - textBaseline;\n        const trimmedText = UI.UIUtils.trimTextEnd(context, title, textWidth - 2 * textPadding);\n        context.fillStyle = '#333';\n        context.fillText(trimmedText, textStart + textPadding, barY + textBaseHeight);\n      }\n    }\n\n    return true;\n  }\n\n  /**\n   * Decorates the synthetic websocket event entry with a whisk from the start to the end.\n   *   ------------------------\n   *   ^start                 ^end\n   * */\n  #decorateSyntheticWebSocketConnection(\n      index: number, context: CanvasRenderingContext2D, barY: number, barHeight: number, unclippedBarX: number,\n      timeToPixelRatio: number): boolean {\n    context.save();\n    const event = this.#events[index] as Trace.Types.Events.SyntheticWebSocketConnection;\n    const beginTime = Trace.Helpers.Timing.microToMilli(event.ts);\n    const timeToPixel = (time: number): number => Math.floor(unclippedBarX + (time - beginTime) * timeToPixelRatio);\n    const endTime = Trace.Helpers.Timing.microToMilli((event.ts + event.dur) as Trace.Types.Timing.Micro);\n    const start = timeToPixel(beginTime) + 0.5;\n    const end = timeToPixel(endTime) - 0.5;\n    context.strokeStyle = ThemeSupport.ThemeSupport.instance().getComputedValue('--app-color-rendering');\n\n    const lineY = Math.floor(barY + barHeight / 2) + 0.5;\n    context.setLineDash([3, 2]);\n    context.moveTo(start, lineY - 1);\n    context.lineTo(end, lineY - 1);\n    context.moveTo(start, lineY + 1);\n    context.lineTo(end, lineY + 1);\n    context.stroke();\n    context.restore();\n    return true;\n  }\n\n  forceDecoration(_index: number): boolean {\n    return true;\n  }\n\n  /**\n   *In the FlameChart.ts, when filtering through the events for a level, it starts\n   * from the last event of that level and stops when it hit an event that has start\n   * time greater than the filtering window.\n   * For example, in this websocket level we have A(socket event), B, C, D. If C\n   * event has start time greater than the window, the rest of the events (A and B)\n   * wont be drawn. So if this level is the force Drawable level, we wont stop at\n   * event C and will include the socket event A.\n   * */\n  forceDrawableLevel(levelIndex: number): boolean {\n    return this.#networkTrackAppender?.webSocketIdToLevel.has(levelIndex) || false;\n  }\n\n  preparePopoverElement(index: number): Element|null {\n    const event = this.#events[index];\n    if (Trace.Types.Events.isSyntheticNetworkRequest(event)) {\n      const element = document.createElement('div');\n      const root = UI.UIUtils.createShadowRootWithCoreStyles(element, {cssFile: timelineFlamechartPopoverStyles});\n\n      const contents = root.createChild('div', 'timeline-flamechart-popover');\n      const infoElement = new TimelineComponents.NetworkRequestTooltip.NetworkRequestTooltip();\n      infoElement.data = {networkRequest: event, entityMapper: this.#entityMapper};\n      contents.appendChild(infoElement);\n      return element;\n    }\n    return null;\n  }\n\n  /**\n   * Sets the minimum time and total time span of a trace using the\n   * new engine data.\n   */\n  #setTimingBoundsData(newParsedTrace: Trace.Handlers.Types.ParsedTrace): void {\n    const {traceBounds} = newParsedTrace.Meta;\n    const minTime = Trace.Helpers.Timing.microToMilli(traceBounds.min);\n    const maxTime = Trace.Helpers.Timing.microToMilli(traceBounds.max);\n    this.#minimumBoundary = minTime;\n    this.#timeSpan = minTime === maxTime ? 1000 : maxTime - this.#minimumBoundary;\n  }\n\n  /**\n   * When users zoom in the flamechart, we only want to show them the network\n   * requests between startTime and endTime. This function will call the\n   * trackAppender to update the timeline data, and then force to create a new\n   * PerfUI.FlameChart.FlameChartTimelineData instance to force the flamechart\n   * to re-render.\n   */\n  #updateTimelineData(startTime: Trace.Types.Timing.Milli, endTime: Trace.Types.Timing.Milli): void {\n    if (!this.#networkTrackAppender || !this.#timelineDataInternal) {\n      return;\n    }\n    this.#maxLevel = this.#networkTrackAppender.relayoutEntriesWithinBounds(this.#events, startTime, endTime);\n\n    // TODO(crbug.com/1459225): Remove this recreating code.\n    // Force to create a new PerfUI.FlameChart.FlameChartTimelineData instance\n    // to force the flamechart to re-render. This also causes crbug.com/1459225.\n    this.#timelineDataInternal = PerfUI.FlameChart.FlameChartTimelineData.create({\n      entryLevels: this.#timelineDataInternal?.entryLevels,\n      entryTotalTimes: this.#timelineDataInternal?.entryTotalTimes,\n      entryStartTimes: this.#timelineDataInternal?.entryStartTimes,\n      groups: this.#timelineDataInternal?.groups,\n      initiatorsData: this.#timelineDataInternal.initiatorsData,\n      entryDecorations: this.#timelineDataInternal.entryDecorations,\n    });\n  }\n\n  preferredHeight(): number {\n    if (!this.#networkTrackAppender || this.#maxLevel === 0) {\n      return 0;\n    }\n    const group = this.#networkTrackAppender.group();\n    if (!group) {\n      return 0;\n    }\n    // Bump up to 7 because the tooltip is around 7 rows' height.\n    return group.style.height * (this.isExpanded() ? Platform.NumberUtilities.clamp(this.#maxLevel + 1, 7, 8.5) : 1);\n  }\n\n  isExpanded(): boolean {\n    return Boolean(this.#networkTrackAppender?.group()?.expanded);\n  }\n\n  formatValue(value: number, precision?: number): string {\n    return i18n.TimeUtilities.preciseMillisToString(value, precision);\n  }\n\n  canJumpToEntry(_entryIndex: number): boolean {\n    return false;\n  }\n\n  /**\n   * searches entries within the specified time and returns a list of entry\n   * indexes\n   */\n  search(\n      visibleWindow: Trace.Types.Timing.TraceWindowMicro,\n      filter?: Trace.Extras.TraceFilter.TraceFilter,\n      ): PerfUI.FlameChart.DataProviderSearchResult[] {\n    const results: PerfUI.FlameChart.DataProviderSearchResult[] = [];\n    for (let i = 0; i < this.#events.length; i++) {\n      const entry = this.#events.at(i);\n      if (!entry) {\n        continue;\n      }\n\n      if (!Trace.Helpers.Timing.eventIsInBounds(entry, visibleWindow)) {\n        continue;\n      }\n\n      if (!filter || filter.accept(entry, this.#parsedTrace ?? undefined)) {\n        const startTimeMilli = Trace.Helpers.Timing.microToMilli(entry.ts);\n        results.push({startTimeMilli, index: i, provider: 'network'});\n      }\n    }\n    return results;\n  }\n\n  /**\n   * Returns a map of navigations that happened in the main frame, ignoring any\n   * that happened in other frames.\n   * The map's key is the frame ID.\n   **/\n  mainFrameNavigationStartEvents(): readonly Trace.Types.Events.NavigationStart[] {\n    if (!this.#parsedTrace) {\n      return [];\n    }\n    return this.#parsedTrace.Meta.mainFrameNavigations;\n  }\n\n  buildFlowForInitiator(entryIndex: number): boolean {\n    if (!this.#parsedTrace) {\n      return false;\n    }\n    if (!this.#timelineDataInternal) {\n      return false;\n    }\n    if (this.#lastInitiatorEntry === entryIndex) {\n      if (this.#lastInitiatorsData) {\n        this.#timelineDataInternal.initiatorsData = this.#lastInitiatorsData;\n      }\n      return true;\n    }\n    if (!this.#networkTrackAppender) {\n      return false;\n    }\n\n    // Remove all previously assigned decorations indicating that the flow event entries are hidden\n    const previousInitiatorsDataLength = this.#timelineDataInternal.initiatorsData.length;\n    // |entryIndex| equals -1 means there is no entry selected, just clear the\n    // initiator cache if there is any previous arrow and return true to\n    // re-render.\n    if (entryIndex === -1) {\n      this.#lastInitiatorEntry = entryIndex;\n      if (previousInitiatorsDataLength === 0) {\n        // This means there is no arrow before, so we don't need to re-render.\n        return false;\n      }\n      // Reset to clear any previous arrows from the last event.\n      this.#timelineDataInternal.resetFlowData();\n      return true;\n    }\n\n    const event = this.#events[entryIndex];\n    // Reset to clear any previous arrows from the last event.\n    this.#timelineDataInternal.resetFlowData();\n    this.#lastInitiatorEntry = entryIndex;\n\n    const initiatorsData = initiatorsDataToDrawForNetwork(this.#parsedTrace, event);\n    // This means there is no change for arrows.\n    if (previousInitiatorsDataLength === 0 && initiatorsData.length === 0) {\n      return false;\n    }\n    for (const initiatorData of initiatorsData) {\n      const eventIndex = this.indexForEvent(initiatorData.event);\n      const initiatorIndex = this.indexForEvent(initiatorData.initiator);\n      if (eventIndex === null || initiatorIndex === null) {\n        continue;\n      }\n      this.#timelineDataInternal.initiatorsData.push({\n        initiatorIndex,\n        eventIndex,\n      });\n    }\n    this.#lastInitiatorsData = this.#timelineDataInternal.initiatorsData;\n    return true;\n  }\n}\n"]}