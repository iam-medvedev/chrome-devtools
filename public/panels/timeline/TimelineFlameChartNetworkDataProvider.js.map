{"version":3,"file":"TimelineFlameChartNetworkDataProvider.js","sourceRoot":"","sources":["../../../../../../front_end/panels/timeline/TimelineFlameChartNetworkDataProvider.ts"],"names":[],"mappings":"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","sourcesContent":["// Copyright 2016 The Chromium Authors. All rights reserved.\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\n\nimport * as Common from '../../core/common/common.js';\nimport * as i18n from '../../core/i18n/i18n.js';\nimport * as Platform from '../../core/platform/platform.js';\nimport * as TraceEngine from '../../models/trace/trace.js';\nimport * as PerfUI from '../../ui/legacy/components/perf_ui/perf_ui.js';\nimport * as UI from '../../ui/legacy/legacy.js';\nimport * as ThemeSupport from '../../ui/legacy/theme_support/theme_support.js';\n\nimport * as TimelineComponents from './components/components.js';\nimport {initiatorsDataToDrawForNetwork} from './Initiators.js';\nimport {NetworkTrackAppender, type NetworkTrackEvent} from './NetworkTrackAppender.js';\nimport timelineFlamechartPopoverStyles from './timelineFlamechartPopover.css.js';\nimport {FlameChartStyle, Selection} from './TimelineFlameChartView.js';\nimport {TimelineSelection} from './TimelineSelection.js';\nimport * as TimelineUtils from './utils/utils.js';\n\nexport class TimelineFlameChartNetworkDataProvider implements PerfUI.FlameChart.FlameChartDataProvider {\n  #minimumBoundaryInternal: number;\n  #timeSpan: number;\n  #events: NetworkTrackEvent[];\n  #maxLevel: number;\n  #networkTrackAppender: NetworkTrackAppender|null;\n\n  #timelineDataInternal?: PerfUI.FlameChart.FlameChartTimelineData|null;\n  #lastSelection?: Selection;\n  #traceParseData: TraceEngine.Handlers.Types.TraceParseData|null;\n  #eventIndexByEvent: Map<NetworkTrackEvent, number|null> = new Map();\n  // -1 means no entry is selected.\n  #lastInitiatorEntry: number = -1;\n  #lastInitiatorsData: PerfUI.FlameChart.FlameChartInitiatorData[] = [];\n\n  constructor() {\n    this.#minimumBoundaryInternal = 0;\n    this.#timeSpan = 0;\n    this.#events = [];\n    this.#maxLevel = 0;\n\n    this.#networkTrackAppender = null;\n    this.#traceParseData = null;\n  }\n\n  setModel(traceEngineData: TraceEngine.Handlers.Types.TraceParseData|null): void {\n    this.#timelineDataInternal = null;\n    this.#events = [];\n    this.#traceParseData = traceEngineData;\n    this.#eventIndexByEvent.clear();\n\n    if (this.#traceParseData) {\n      this.setEvents(this.#traceParseData);\n      this.#setTimingBoundsData(this.#traceParseData);\n    }\n  }\n\n  setEvents(traceEngineData: TraceEngine.Handlers.Types.TraceParseData): void {\n    if (traceEngineData.NetworkRequests.webSocket) {\n      traceEngineData.NetworkRequests.webSocket.forEach(webSocketData => {\n        if (webSocketData.syntheticConnectionEvent) {\n          this.#events.push(webSocketData.syntheticConnectionEvent);\n        }\n        this.#events.push(...webSocketData.events);\n      });\n    }\n    if (traceEngineData.NetworkRequests.byTime) {\n      this.#events.push(...traceEngineData.NetworkRequests.byTime);\n    }\n  }\n\n  isEmpty(): boolean {\n    this.timelineData();\n    return !this.#events.length;\n  }\n\n  maxStackDepth(): number {\n    return this.#maxLevel;\n  }\n\n  hasTrackConfigurationMode(): boolean {\n    return false;\n  }\n\n  timelineData(): PerfUI.FlameChart.FlameChartTimelineData {\n    if (this.#timelineDataInternal && this.#timelineDataInternal.entryLevels.length !== 0) {\n      // The flame chart data is built already, so return the cached data.\n      return this.#timelineDataInternal;\n    }\n\n    this.#timelineDataInternal = PerfUI.FlameChart.FlameChartTimelineData.createEmpty();\n    if (!this.#traceParseData) {\n      return this.#timelineDataInternal;\n    }\n\n    if (!this.#events.length) {\n      this.setEvents(this.#traceParseData);\n    }\n    this.#networkTrackAppender = new NetworkTrackAppender(this.#timelineDataInternal, this.#events);\n    this.#maxLevel = this.#networkTrackAppender.appendTrackAtLevel(0);\n\n    return this.#timelineDataInternal;\n  }\n\n  minimumBoundary(): number {\n    return this.#minimumBoundaryInternal;\n  }\n\n  totalTime(): number {\n    return this.#timeSpan;\n  }\n\n  setWindowTimes(startTime: TraceEngine.Types.Timing.MilliSeconds, endTime: TraceEngine.Types.Timing.MilliSeconds):\n      void {\n    this.#updateTimelineData(startTime, endTime);\n  }\n\n  createSelection(index: number): TimelineSelection|null {\n    if (index === -1) {\n      return null;\n    }\n    const event = this.#events[index];\n    this.#lastSelection = new Selection(TimelineSelection.fromTraceEvent(event), index);\n    return this.#lastSelection.timelineSelection;\n  }\n\n  customizedContextMenu(event: MouseEvent, eventIndex: number): UI.ContextMenu.ContextMenu|undefined {\n    const networkRequest = this.eventByIndex(eventIndex);\n    if (!networkRequest || !TraceEngine.Types.TraceEvents.isSyntheticNetworkRequestEvent(networkRequest)) {\n      return;\n    }\n    const request = new TimelineUtils.NetworkRequest.TimelineNetworkRequest(networkRequest);\n    const contextMenu = new UI.ContextMenu.ContextMenu(event, {useSoftMenu: true});\n    contextMenu.appendApplicableItems(request);\n    return contextMenu;\n  }\n\n  indexForEvent(event: TraceEngine.Types.TraceEvents.TraceEventData|\n                TraceEngine.Handlers.ModelHandlers.Frames.TimelineFrame): number|null {\n    // In the NetworkDataProvider we will never be dealing with frames, but we need to satisfy the interface for a DataProvider.\n    if (event instanceof TraceEngine.Handlers.ModelHandlers.Frames.TimelineFrame) {\n      return null;\n    }\n    if (!TraceEngine.Types.TraceEvents.isNetworkTrackEntry(event)) {\n      return null;\n    }\n    const fromCache = this.#eventIndexByEvent.get(event);\n    // Cached value might be null, which is OK.\n    if (fromCache !== undefined) {\n      return fromCache;\n    }\n    const index = this.#events.indexOf(event);\n    const result = index > -1 ? index : null;\n    this.#eventIndexByEvent.set(event, result);\n    return result;\n  }\n\n  eventByIndex(entryIndex: number): TraceEngine.Types.TraceEvents.SyntheticNetworkRequest\n      |TraceEngine.Types.TraceEvents.WebSocketEvent|null {\n    return this.#events.at(entryIndex) ?? null;\n  }\n\n  entryIndexForSelection(selection: TimelineSelection|null): number {\n    if (!selection) {\n      return -1;\n    }\n\n    if (this.#lastSelection && this.#lastSelection.timelineSelection.object === selection.object) {\n      return this.#lastSelection.entryIndex;\n    }\n\n    if (!TimelineSelection.isNetworkEventSelection(selection.object)) {\n      return -1;\n    }\n\n    const index = this.#events.indexOf(selection.object);\n    if (index !== -1) {\n      this.#lastSelection = new Selection(TimelineSelection.fromTraceEvent(selection.object), index);\n    }\n    return index;\n  }\n\n  entryColor(index: number): string {\n    if (!this.#networkTrackAppender) {\n      throw new Error('networkTrackAppender should not be empty');\n    }\n    return this.#networkTrackAppender.colorForEvent(this.#events[index]);\n  }\n\n  textColor(_index: number): string {\n    return FlameChartStyle.textColor;\n  }\n\n  entryTitle(index: number): string|null {\n    const event = this.#events[index];\n    if (TraceEngine.Types.TraceEvents.isWebSocketTraceEvent(event) ||\n        TraceEngine.Types.TraceEvents.isSyntheticWebSocketConnectionEvent(event)) {\n      return this.#networkTrackAppender?.titleForWebSocketEvent(event) || '';\n    }\n    const parsedURL = new Common.ParsedURL.ParsedURL(event.args.data.url);\n    return parsedURL.isValid ? `${parsedURL.displayName} (${parsedURL.host})` : event.args.data.url || null;\n  }\n\n  entryFont(_index: number): string|null {\n    return this.#networkTrackAppender?.font() || null;\n  }\n\n  /**\n   * Returns the pixels needed to decorate the event.\n   * The pixels compare to the start of the earliest event of the request.\n   *\n   * Request.beginTime(), which is used in FlameChart to calculate the unclippedBarX\n   * v\n   *    |----------------[ (URL text)    waiting time   |   request  ]--------|\n   *    ^start           ^sendStart                     ^headersEnd  ^Finish  ^end\n   * @param request\n   * @param unclippedBarX The start pixel of the request. It is calculated with request.beginTime() in FlameChart.\n   * @param timeToPixelRatio\n   * @returns the pixels to draw waiting time and left and right whiskers and url text\n   */\n  getDecorationPixels(\n      event: TraceEngine.Types.TraceEvents.SyntheticNetworkRequest, unclippedBarX: number,\n      timeToPixelRatio: number): {sendStart: number, headersEnd: number, finish: number, start: number, end: number} {\n    const beginTime = TraceEngine.Helpers.Timing.microSecondsToMilliseconds(event.ts);\n    const timeToPixel = (time: number): number => unclippedBarX + (time - beginTime) * timeToPixelRatio;\n    const startTime = TraceEngine.Helpers.Timing.microSecondsToMilliseconds(event.ts);\n    const endTime = TraceEngine.Helpers.Timing.microSecondsToMilliseconds(\n        (event.ts + event.dur) as TraceEngine.Types.Timing.MicroSeconds);\n    const sendStartTime =\n        TraceEngine.Helpers.Timing.microSecondsToMilliseconds(event.args.data.syntheticData.sendStartTime);\n    const headersEndTime =\n        TraceEngine.Helpers.Timing.microSecondsToMilliseconds(event.args.data.syntheticData.downloadStart);\n    const sendStart = Math.max(timeToPixel(sendStartTime), unclippedBarX);\n    const headersEnd = Math.max(timeToPixel(headersEndTime), sendStart);\n    const finish = Math.max(\n        timeToPixel(TraceEngine.Helpers.Timing.microSecondsToMilliseconds(event.args.data.syntheticData.finishTime)),\n        headersEnd);\n    const start = timeToPixel(startTime);\n    const end = Math.max(timeToPixel(endTime), finish);\n\n    return {sendStart, headersEnd, finish, start, end};\n  }\n\n  /**\n   * Decorates the entry depends on the type of the event:\n   * @param index\n   * @param context\n   * @param barX The x pixel of the visible part request\n   * @param barY The y pixel of the visible part request\n   * @param barWidth The width of the visible part request\n   * @param barHeight The height of the visible part request\n   * @param unclippedBarX The start pixel of the request compare to the visible area. It is calculated with request.beginTime() in FlameChart.\n   * @param timeToPixelRatio\n   * @returns if the entry needs to be decorate, which is alway true if the request has \"timing\" field\n   */\n  decorateEntry(\n      index: number, context: CanvasRenderingContext2D, _text: string|null, barX: number, barY: number,\n      barWidth: number, barHeight: number, unclippedBarX: number, timeToPixelRatio: number): boolean {\n    const event = this.#events[index];\n    if (TraceEngine.Types.TraceEvents.isSyntheticWebSocketConnectionEvent(event)) {\n      return this.#decorateSyntheticWebSocketConnectionEvent(\n          index, context, barY, barHeight, unclippedBarX, timeToPixelRatio);\n    }\n    if (!TraceEngine.Types.TraceEvents.isSyntheticNetworkRequestEvent(event)) {\n      return false;\n    }\n    return this.#decorateNetworkRequest(\n        index, context, _text, barX, barY, barWidth, barHeight, unclippedBarX, timeToPixelRatio);\n  }\n\n  /**\n   * Decorates the Network Request entry with the following steps:\n   *   Draw a waiting time between |sendStart| and |headersEnd|\n   *     By adding a extra transparent white layer\n   *   Draw a whisk between |start| and |sendStart|\n   *   Draw a whisk between |finish| and |end|\n   *     By draw another layer of background color to \"clear\" the area\n   *     Then draw the whisk\n   *   Draw the URL after the |sendStart|\n   *\n   *   |----------------[ (URL text)    waiting time   |   request  ]--------|\n   *   ^start           ^sendStart                     ^headersEnd  ^Finish  ^end\n   * */\n  #decorateNetworkRequest(\n      index: number, context: CanvasRenderingContext2D, _text: string|null, barX: number, barY: number,\n      barWidth: number, barHeight: number, unclippedBarX: number, timeToPixelRatio: number): boolean {\n    const event = this.#events[index];\n    if (!TraceEngine.Types.TraceEvents.isSyntheticNetworkRequestEvent(event)) {\n      return false;\n    }\n    const {sendStart, headersEnd, finish, start, end} =\n        this.getDecorationPixels(event, unclippedBarX, timeToPixelRatio);\n\n    // Draw waiting time.\n    context.fillStyle = 'hsla(0, 100%, 100%, 0.8)';\n    context.fillRect(sendStart + 0.5, barY + 0.5, headersEnd - sendStart - 0.5, barHeight - 2);\n    // Clear portions of initial rect to prepare for the ticks.\n    context.fillStyle = ThemeSupport.ThemeSupport.instance().getComputedValue('--sys-color-cdt-base-container');\n    context.fillRect(barX, barY - 0.5, sendStart - barX, barHeight);\n    context.fillRect(finish, barY - 0.5, barX + barWidth - finish, barHeight);\n\n    // Draws left and right whiskers\n    function drawTick(begin: number, end: number, y: number): void {\n      const /** @const */ tickHeightPx = 6;\n      context.moveTo(begin, y - tickHeightPx / 2);\n      context.lineTo(begin, y + tickHeightPx / 2);\n      context.moveTo(begin, y);\n      context.lineTo(end, y);\n    }\n\n    context.beginPath();\n    context.lineWidth = 1;\n    context.strokeStyle = '#ccc';\n    const lineY = Math.floor(barY + barHeight / 2) + 0.5;\n    const leftTick = start + 0.5;\n    const rightTick = end - 0.5;\n    drawTick(leftTick, sendStart, lineY);\n    drawTick(rightTick, finish, lineY);\n    context.stroke();\n\n    // Draw request URL as text\n    const textStart = Math.max(sendStart, 0);\n    const textWidth = finish - textStart;\n    const /** @const */ minTextWidthPx = 20;\n    if (textWidth >= minTextWidthPx) {\n      let title = this.entryTitle(index) || '';\n      if (event.args.data.fromServiceWorker) {\n        title = 'âš™ ' + title;\n      }\n      if (title) {\n        const /** @const */ textPadding = 4;\n        const /** @const */ textBaseline = 5;\n        const textBaseHeight = barHeight - textBaseline;\n        const trimmedText = UI.UIUtils.trimTextEnd(context, title, textWidth - 2 * textPadding);\n        context.fillStyle = '#333';\n        context.fillText(trimmedText, textStart + textPadding, barY + textBaseHeight);\n      }\n    }\n\n    return true;\n  }\n\n  /**\n   * Decorates the synthetic websocket event entry with a whisk from the start to the end.\n   *   ------------------------\n   *   ^start                 ^end\n   * */\n  #decorateSyntheticWebSocketConnectionEvent(\n      index: number, context: CanvasRenderingContext2D, barY: number, barHeight: number, unclippedBarX: number,\n      timeToPixelRatio: number): boolean {\n    context.save();\n    const event = this.#events[index] as TraceEngine.Types.TraceEvents.SyntheticWebSocketConnectionEvent;\n    const beginTime = TraceEngine.Helpers.Timing.microSecondsToMilliseconds(event.ts);\n    const timeToPixel = (time: number): number => Math.floor(unclippedBarX + (time - beginTime) * timeToPixelRatio);\n    const endTime = TraceEngine.Helpers.Timing.microSecondsToMilliseconds(\n        (event.ts + event.dur) as TraceEngine.Types.Timing.MicroSeconds);\n    const start = timeToPixel(beginTime) + 0.5;\n    const end = timeToPixel(endTime) - 0.5;\n    context.strokeStyle = ThemeSupport.ThemeSupport.instance().getComputedValue('--app-color-rendering');\n\n    const lineY = Math.floor(barY + barHeight / 2) + 0.5;\n    context.setLineDash([3, 2]);\n    context.moveTo(start, lineY - 1);\n    context.lineTo(end, lineY - 1);\n    context.moveTo(start, lineY + 1);\n    context.lineTo(end, lineY + 1);\n    context.stroke();\n    context.restore();\n    return true;\n  }\n\n  forceDecoration(_index: number): boolean {\n    return true;\n  }\n\n  /**\n   *In the FlameChart.ts, when filtering through the events for a level, it starts\n   * from the last event of that level and stops when it hit an event that has start\n   * time greater than the filtering window.\n   * For example, in this websocket level we have A(socket event), B, C, D. If C\n   * event has start time greater than the window, the rest of the events (A and B)\n   * wont be drawn. So if this level is the force Drawable level, we wont stop at\n   * event C and will include the socket event A.\n   * */\n  forceDrawableLevel(levelIndex: number): boolean {\n    return this.#networkTrackAppender?.webSocketIdToLevel.has(levelIndex) || false;\n  }\n\n  prepareHighlightedEntryInfo(index: number): Element|null {\n    const event = this.#events[index];\n    if (TraceEngine.Types.TraceEvents.isSyntheticNetworkRequestEvent(event)) {\n      const element = document.createElement('div');\n      const root = UI.UIUtils.createShadowRootWithCoreStyles(element, {\n        cssFile: [timelineFlamechartPopoverStyles],\n        delegatesFocus: undefined,\n      });\n\n      const contents = root.createChild('div', 'timeline-flamechart-popover');\n      const infoElement = new TimelineComponents.NetworkRequestTooltip.NetworkRequestTooltip();\n      infoElement.networkRequest = event;\n      contents.appendChild(infoElement);\n      return element;\n    }\n    return null;\n  }\n\n  /**\n   * Sets the minimum time and total time span of a trace using the\n   * new engine data.\n   */\n  #setTimingBoundsData(newTraceEngineData: TraceEngine.Handlers.Types.TraceParseData): void {\n    const {traceBounds} = newTraceEngineData.Meta;\n    const minTime = TraceEngine.Helpers.Timing.microSecondsToMilliseconds(traceBounds.min);\n    const maxTime = TraceEngine.Helpers.Timing.microSecondsToMilliseconds(traceBounds.max);\n    this.#minimumBoundaryInternal = minTime;\n    this.#timeSpan = minTime === maxTime ? 1000 : maxTime - this.#minimumBoundaryInternal;\n  }\n\n  /**\n   * When users zoom in the flamechart, we only want to show them the network\n   * requests between startTime and endTime. This function will call the\n   * trackAppender to update the timeline data, and then force to create a new\n   * PerfUI.FlameChart.FlameChartTimelineData instance to force the flamechart\n   * to re-render.\n   */\n  #updateTimelineData(startTime: TraceEngine.Types.Timing.MilliSeconds, endTime: TraceEngine.Types.Timing.MilliSeconds):\n      void {\n    if (!this.#networkTrackAppender || !this.#timelineDataInternal) {\n      return;\n    }\n    this.#maxLevel = this.#networkTrackAppender.relayoutEntriesWithinBounds(this.#events, startTime, endTime);\n\n    // TODO(crbug.com/1459225): Remove this recreating code.\n    // Force to create a new PerfUI.FlameChart.FlameChartTimelineData instance\n    // to force the flamechart to re-render. This also causes crbug.com/1459225.\n    this.#timelineDataInternal = PerfUI.FlameChart.FlameChartTimelineData.create({\n      entryLevels: this.#timelineDataInternal?.entryLevels,\n      entryTotalTimes: this.#timelineDataInternal?.entryTotalTimes,\n      entryStartTimes: this.#timelineDataInternal?.entryStartTimes,\n      groups: this.#timelineDataInternal?.groups,\n      initiatorsData: this.#timelineDataInternal.initiatorsData,\n      entryDecorations: this.#timelineDataInternal.entryDecorations,\n    });\n  }\n\n  preferredHeight(): number {\n    if (!this.#networkTrackAppender || this.#maxLevel === 0) {\n      return 0;\n    }\n    const group = this.#networkTrackAppender.group();\n    if (!group) {\n      return 0;\n    }\n    // Bump up to 7 because the tooltip is around 7 rows' height.\n    return group.style.height * (this.isExpanded() ? Platform.NumberUtilities.clamp(this.#maxLevel + 1, 7, 8.5) : 1);\n  }\n\n  isExpanded(): boolean {\n    return Boolean(this.#networkTrackAppender?.group()?.expanded);\n  }\n\n  formatValue(value: number, precision?: number): string {\n    return i18n.TimeUtilities.preciseMillisToString(value, precision);\n  }\n\n  canJumpToEntry(_entryIndex: number): boolean {\n    return false;\n  }\n\n  /**\n   * Returns a map of navigations that happened in the main frame, ignoring any\n   * that happened in other frames.\n   * The map's key is the frame ID.\n   **/\n  mainFrameNavigationStartEvents(): readonly TraceEngine.Types.TraceEvents.TraceEventNavigationStart[] {\n    if (!this.#traceParseData) {\n      return [];\n    }\n    return this.#traceParseData.Meta.mainFrameNavigations;\n  }\n\n  buildFlowForInitiator(entryIndex: number): boolean {\n    if (!this.#traceParseData) {\n      return false;\n    }\n    if (!this.#timelineDataInternal) {\n      return false;\n    }\n    if (this.#lastInitiatorEntry === entryIndex) {\n      if (this.#lastInitiatorsData) {\n        this.#timelineDataInternal.initiatorsData = this.#lastInitiatorsData;\n      }\n      return true;\n    }\n    if (!this.#networkTrackAppender) {\n      return false;\n    }\n\n    // Remove all previously assigned decorations indicating that the flow event entries are hidden\n    const previousInitiatorsDataLength = this.#timelineDataInternal.initiatorsData.length;\n    // |entryIndex| equals -1 means there is no entry selected, just clear the\n    // initiator cache if there is any previous arrow and return true to\n    // re-render.\n    if (entryIndex === -1) {\n      this.#lastInitiatorEntry = entryIndex;\n      if (previousInitiatorsDataLength === 0) {\n        // This means there is no arrow before, so we don't need to re-render.\n        return false;\n      }\n      // Reset to clear any previous arrows from the last event.\n      this.#timelineDataInternal.resetFlowData();\n      return true;\n    }\n\n    const event = this.#events[entryIndex];\n    // Reset to clear any previous arrows from the last event.\n    this.#timelineDataInternal.resetFlowData();\n    this.#lastInitiatorEntry = entryIndex;\n\n    const initiatorsData = initiatorsDataToDrawForNetwork(this.#traceParseData, event);\n    // This means there is no change for arrows.\n    if (previousInitiatorsDataLength === 0 && initiatorsData.length === 0) {\n      return false;\n    }\n    for (const initiatorData of initiatorsData) {\n      const eventIndex = this.indexForEvent(initiatorData.event);\n      const initiatorIndex = this.indexForEvent(initiatorData.initiator);\n      if (eventIndex === null || initiatorIndex === null) {\n        continue;\n      }\n      this.#timelineDataInternal.initiatorsData.push({\n        initiatorIndex,\n        eventIndex,\n      });\n    }\n    this.#lastInitiatorsData = this.#timelineDataInternal.initiatorsData;\n    return true;\n  }\n}\n"]}