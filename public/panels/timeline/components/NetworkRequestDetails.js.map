{"version":3,"file":"NetworkRequestDetails.js","sourceRoot":"","sources":["../../../../../../../front_end/panels/timeline/components/NetworkRequestDetails.ts"],"names":[],"mappings":"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","sourcesContent":["// Copyright 2024 The Chromium Authors. All rights reserved.\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\n\nimport '../../../ui/components/request_link_icon/request_link_icon.js';\n\nimport * as i18n from '../../../core/i18n/i18n.js';\nimport * as Platform from '../../../core/platform/platform.js';\nimport type * as SDK from '../../../core/sdk/sdk.js';\nimport * as Helpers from '../../../models/trace/helpers/helpers.js';\nimport * as Trace from '../../../models/trace/trace.js';\nimport * as LegacyComponents from '../../../ui/legacy/components/utils/utils.js';\nimport * as UI from '../../../ui/legacy/legacy.js';\nimport * as LitHtml from '../../../ui/lit-html/lit-html.js';\nimport * as TimelineUtils from '../utils/utils.js';\n\nimport NetworkRequestDetailsStyles from './networkRequestDetails.css.js';\nimport networkRequestTooltipStyles from './networkRequestTooltip.css.js';\nimport {NetworkRequestTooltip} from './NetworkRequestTooltip.js';\nimport {colorForNetworkRequest} from './Utils.js';\n\nconst {html} = LitHtml;\n\nconst MAX_URL_LENGTH = 100;\n\nconst UIStrings = {\n  /**\n   *@description Text that refers to the network request method\n   */\n  requestMethod: 'Request method',\n  /**\n   *@description Text to show the priority of an item\n   */\n  priority: 'Priority',\n  /**\n   *@description Text used when referring to the data sent in a network request that is encoded as a particular file format.\n   */\n  encodedData: 'Encoded data',\n  /**\n   *@description Text used to refer to the data sent in a network request that has been decoded.\n   */\n  decodedBody: 'Decoded body',\n  /**\n   *@description Text in Timeline indicating that input has happened recently\n   */\n  yes: 'Yes',\n  /**\n   *@description Text in Timeline indicating that input has not happened recently\n   */\n  no: 'No',\n  /**\n   *@description Text for previewing items\n   */\n  preview: 'Preview',\n  /**\n   *@description Text to indicate to the user they are viewing an event representing a network request.\n   */\n  networkRequest: 'Network request',\n  /**\n   *@description Text for the data source of a network request.\n   */\n  fromCache: 'From cache',\n  /**\n   *@description Text used to show the mime-type of the data transferred with a network request (e.g. \"application/json\").\n   */\n  mimeType: 'MIME type',\n  /**\n   *@description Text used to show the user that a request was served from the browser's in-memory cache.\n   */\n  FromMemoryCache: ' (from memory cache)',\n  /**\n   *@description Text used to show the user that a request was served from the browser's file cache.\n   */\n  FromCache: ' (from cache)',\n  /**\n   *@description Label for a network request indicating that it was a HTTP2 server push instead of a regular network request, in the Performance panel\n   */\n  FromPush: ' (from push)',\n  /**\n   *@description Text used to show a user that a request was served from an installed, active service worker.\n   */\n  FromServiceWorker: ' (from `service worker`)',\n  /**\n   *@description Text for the event initiated by another one\n   */\n  initiatedBy: 'Initiated by',\n  /**\n   *@description Text that refers to if the network request is blocking\n   */\n  blocking: 'Blocking',\n  /**\n   *@description Text that refers to if the network request is in-body parser render blocking\n   */\n  inBodyParserBlocking: 'In-body parser blocking',\n  /**\n   *@description Text that refers to if the network request is render blocking\n   */\n  renderBlocking: 'Render blocking',\n};\nconst str_ = i18n.i18n.registerUIStrings('panels/timeline/components/NetworkRequestDetails.ts', UIStrings);\nconst i18nString = i18n.i18n.getLocalizedString.bind(undefined, str_);\n\nexport class NetworkRequestDetails extends HTMLElement {\n  readonly #shadow = this.attachShadow({mode: 'open'});\n\n  #networkRequest: Trace.Types.Events.SyntheticNetworkRequest|null = null;\n  #maybeTarget: SDK.Target.Target|null = null;\n  #requestPreviewElements = new WeakMap<Trace.Types.Events.SyntheticNetworkRequest, HTMLImageElement>();\n  #linkifier: LegacyComponents.Linkifier.Linkifier;\n  #parsedTrace: Trace.Handlers.Types.ParsedTrace|null = null;\n  constructor(linkifier: LegacyComponents.Linkifier.Linkifier) {\n    super();\n    this.#linkifier = linkifier;\n  }\n\n  connectedCallback(): void {\n    this.#shadow.adoptedStyleSheets = [NetworkRequestDetailsStyles, networkRequestTooltipStyles];\n  }\n\n  async setData(\n      parsedTrace: Trace.Handlers.Types.ParsedTrace, networkRequest: Trace.Types.Events.SyntheticNetworkRequest,\n      maybeTarget: SDK.Target.Target|null): Promise<void> {\n    if (this.#networkRequest === networkRequest && parsedTrace === this.#parsedTrace) {\n      return;\n    }\n    this.#parsedTrace = parsedTrace;\n    this.#networkRequest = networkRequest;\n    this.#maybeTarget = maybeTarget;\n    await this.#render();\n  }\n\n  #renderTitle(): LitHtml.TemplateResult|null {\n    if (!this.#networkRequest) {\n      return null;\n    }\n    const style = {\n      backgroundColor: `${colorForNetworkRequest(this.#networkRequest)}`,\n    };\n    return html`\n      <div class=\"network-request-details-title\">\n        <div style=${LitHtml.Directives.styleMap(style)}></div>\n        ${i18nString(UIStrings.networkRequest)}\n      </div>\n    `;\n  }\n\n  #renderRow(title: string, value?: string|Node|LitHtml.TemplateResult): LitHtml.TemplateResult|null {\n    if (!value) {\n      return null;\n    }\n    return html`\n      <div class=\"network-request-details-row\"><div class=\"title\">${title}</div><div class=\"value\">${value}</div></div>\n    `;\n  }\n\n  #renderURL(): LitHtml.TemplateResult|null {\n    if (!this.#networkRequest) {\n      return null;\n    }\n    const options: LegacyComponents.Linkifier.LinkifyURLOptions = {\n      tabStop: true,\n      showColumnNumber: false,\n      inlineFrameIndex: 0,\n      maxLength: MAX_URL_LENGTH,\n    };\n    const linkifiedURL = LegacyComponents.Linkifier.Linkifier.linkifyURL(\n        this.#networkRequest.args.data.url as Platform.DevToolsPath.UrlString, options);\n\n    const networkRequest = TimelineUtils.NetworkRequest.getNetworkRequest(this.#networkRequest);\n    if (networkRequest) {\n      linkifiedURL.addEventListener('contextmenu', (event: MouseEvent) => {\n        if (!this.#networkRequest) {\n          return;\n        }\n        // Add a wrapper class here.\n        // The main reason is the `Reveal in Network panel` option is handled by the context menu provider, which will\n        // add this option for all supporting types. And there are a lot of context menu providers that support\n        // `SDK.NetworkRequest.NetworkRequest`, for example `Override content` by PersistenceActions, but we so far just\n        // want the one to reveal in network panel, so add a new class which will only be supported by Network panel.\n        // Also we want to have a different behavior(select the network request) from the\n        // `SDK.NetworkRequest.NetworkRequest` (highlight the network request once).\n        const contextMenu = new UI.ContextMenu.ContextMenu(event, {useSoftMenu: true});\n        contextMenu.appendApplicableItems(new TimelineUtils.NetworkRequest.TimelineNetworkRequest(networkRequest));\n        void contextMenu.show();\n      });\n\n      // clang-format off\n      const urlElement = html`\n        ${linkifiedURL}\n        <devtools-request-link-icon .data=${{request: networkRequest}}>\n        </devtools-request-link-icon>\n      `;\n      // clang-format on\n      return html`<div class=\"network-request-details-row\">${urlElement}</div>`;\n    }\n\n    return html`<div class=\"network-request-details-row\">${linkifiedURL}</div>`;\n  }\n\n  #renderFromCache(): LitHtml.TemplateResult|null {\n    if (!this.#networkRequest) {\n      return null;\n    }\n    const cached = this.#networkRequest.args.data.syntheticData.isMemoryCached ||\n        this.#networkRequest.args.data.syntheticData.isDiskCached;\n    return this.#renderRow(\n        i18nString(UIStrings.fromCache), cached ? i18nString(UIStrings.yes) : i18nString(UIStrings.no));\n  }\n\n  #renderEncodedDataLength(): LitHtml.TemplateResult|null {\n    if (!this.#networkRequest) {\n      return null;\n    }\n    let lengthText = '';\n    if (this.#networkRequest.args.data.syntheticData.isMemoryCached) {\n      lengthText += i18nString(UIStrings.FromMemoryCache);\n    } else if (this.#networkRequest.args.data.syntheticData.isDiskCached) {\n      lengthText += i18nString(UIStrings.FromCache);\n    } else if (this.#networkRequest.args.data.timing?.pushStart) {\n      lengthText += i18nString(UIStrings.FromPush);\n    }\n    if (this.#networkRequest.args.data.fromServiceWorker) {\n      lengthText += i18nString(UIStrings.FromServiceWorker);\n    }\n    if (this.#networkRequest.args.data.encodedDataLength || !lengthText) {\n      lengthText =\n          `${Platform.NumberUtilities.bytesToString(this.#networkRequest.args.data.encodedDataLength)}${lengthText}`;\n    }\n    return this.#renderRow(i18nString(UIStrings.encodedData), lengthText);\n  }\n\n  #renderInitiatedBy(): LitHtml.TemplateResult|null {\n    if (!this.#networkRequest) {\n      return null;\n    }\n\n    const hasStackTrace = Trace.Helpers.Trace.stackTraceForEvent(this.#networkRequest) !== null;\n\n    // If we have a stack trace, that is the most reliable way to get the initiator data and display a link to the source.\n    if (hasStackTrace) {\n      const topFrame = Trace.Helpers.Trace.getZeroIndexedStackTraceForEvent(this.#networkRequest)?.at(0) ?? null;\n      if (topFrame) {\n        const link = this.#linkifier.maybeLinkifyConsoleCallFrame(\n            this.#maybeTarget, topFrame, {tabStop: true, inlineFrameIndex: 0, showColumnNumber: true});\n        if (link) {\n          return this.#renderRow(i18nString(UIStrings.initiatedBy), link);\n        }\n      }\n    }\n    // If we do not, we can see if the network handler found an initiator and try to link by URL\n    const initiator = this.#parsedTrace?.NetworkRequests.eventToInitiator.get(this.#networkRequest);\n    if (initiator) {\n      const link = this.#linkifier.maybeLinkifyScriptLocation(\n          this.#maybeTarget,\n          null,  // this would be the scriptId, but we don't have one. The linkifier will fallback to using the URL.\n          initiator.args.data.url as Platform.DevToolsPath.UrlString,\n          undefined,  // line number\n      );\n      if (link) {\n        return this.#renderRow(i18nString(UIStrings.initiatedBy), link);\n      }\n    }\n\n    return null;\n  }\n\n  #renderBlockingRow(): LitHtml.TemplateResult|null {\n    if (!this.#networkRequest || !Helpers.Network.isSyntheticNetworkRequestEventRenderBlocking(this.#networkRequest)) {\n      return null;\n    }\n\n    let renderBlockingText;\n    switch (this.#networkRequest.args.data.renderBlocking) {\n      case 'blocking':\n        renderBlockingText = UIStrings.renderBlocking;\n        break;\n      case 'in_body_parser_blocking':\n        renderBlockingText = UIStrings.inBodyParserBlocking;\n        break;\n      default:\n        // Shouldn't fall to this block, if so, this network request is not render blocking, so return null.\n        return null;\n    }\n    return this.#renderRow(i18nString(UIStrings.blocking), renderBlockingText);\n  }\n\n  async #renderPreviewElement(): Promise<LitHtml.TemplateResult|null> {\n    if (!this.#networkRequest) {\n      return null;\n    }\n    if (!this.#requestPreviewElements.get(this.#networkRequest) && this.#networkRequest.args.data.url &&\n        this.#maybeTarget) {\n      const previewElement =\n          (await LegacyComponents.ImagePreview.ImagePreview.build(\n               this.#maybeTarget, this.#networkRequest.args.data.url as Platform.DevToolsPath.UrlString, false, {\n                 imageAltText: LegacyComponents.ImagePreview.ImagePreview.defaultAltTextForImageURL(\n                     this.#networkRequest.args.data.url as Platform.DevToolsPath.UrlString),\n                 precomputedFeatures: undefined,\n                 align: LegacyComponents.ImagePreview.Align.START,\n               }) as HTMLImageElement);\n\n      this.#requestPreviewElements.set(this.#networkRequest, previewElement);\n    }\n\n    const requestPreviewElement = this.#requestPreviewElements.get(this.#networkRequest);\n    if (requestPreviewElement) {\n      return this.#renderRow(i18nString(UIStrings.preview), requestPreviewElement);\n    }\n    return null;\n  }\n\n  async #render(): Promise<void> {\n    if (!this.#networkRequest) {\n      return;\n    }\n    const networkData = this.#networkRequest.args.data;\n\n    // clang-format off\n    const output = html`\n      ${this.#renderTitle()}\n      ${this.#renderURL()}\n      <div class=\"network-request-details-cols\">\n        <div class=\"network-request-details-col\">\n          ${this.#renderRow(i18nString(UIStrings.requestMethod), networkData.requestMethod)}\n          ${this.#renderRow(i18nString(UIStrings.priority), NetworkRequestTooltip.renderPriorityValue(this.#networkRequest))}\n          ${this.#renderRow(i18nString(UIStrings.mimeType), networkData.mimeType)}\n          ${this.#renderEncodedDataLength()}\n          ${this.#renderRow(i18nString(UIStrings.decodedBody), Platform.NumberUtilities.bytesToString(this.#networkRequest.args.data.decodedBodyLength))}\n          ${this.#renderBlockingRow()}\n          ${this.#renderFromCache()}\n        </div>\n        <div class=\"network-request-details-col\">\n          <div class=\"timing-rows\">\n            ${NetworkRequestTooltip.renderTimings(this.#networkRequest)}\n          </div>\n        </div>\n      </div>\n      ${this.#renderInitiatedBy()}\n      ${await this.#renderPreviewElement()}\n    `; // The last items are outside the 2 column layout because InitiatedBy can be very wide\n    // clang-format on\n    LitHtml.render(output, this.#shadow, {host: this});\n  }\n}\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    'devtools-performance-network-request-details': NetworkRequestDetails;\n  }\n}\n\ncustomElements.define('devtools-performance-network-request-details', NetworkRequestDetails);\n"]}