{"version":3,"file":"LiveMetricsView.js","sourceRoot":"","sources":["../../../../../../../front_end/panels/timeline/components/LiveMetricsView.ts"],"names":[],"mappings":"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","sourcesContent":["// Copyright 2024 The Chromium Authors. All rights reserved.\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\n\nimport * as Common from '../../../core/common/common.js';\nimport * as i18n from '../../../core/i18n/i18n.js';\nimport * as Platform from '../../../core/platform/platform.js';\nimport * as SDK from '../../../core/sdk/sdk.js';\nimport * as CrUXManager from '../../../models/crux-manager/crux-manager.js';\nimport * as EmulationModel from '../../../models/emulation/emulation.js';\nimport * as LiveMetrics from '../../../models/live-metrics/live-metrics.js';\nimport * as Buttons from '../../../ui/components/buttons/buttons.js';\nimport * as ComponentHelpers from '../../../ui/components/helpers/helpers.js';\nimport * as LegacyWrapper from '../../../ui/components/legacy_wrapper/legacy_wrapper.js';\nimport * as Menus from '../../../ui/components/menus/menus.js';\nimport * as UI from '../../../ui/legacy/legacy.js';\nimport * as LitHtml from '../../../ui/lit-html/lit-html.js';\nimport * as VisualLogging from '../../../ui/visual_logging/visual_logging.js';\nimport * as MobileThrottling from '../../mobile_throttling/mobile_throttling.js';\n\nimport {CPUThrottlingSelector} from './CPUThrottlingSelector.js';\nimport {FieldSettingsDialog} from './FieldSettingsDialog.js';\nimport liveMetricsViewStyles from './liveMetricsView.css.js';\nimport {renderCompareText, renderDetailedCompareText} from './MetricCompareStrings.js';\nimport {NetworkThrottlingSelector} from './NetworkThrottlingSelector.js';\n\nconst {html, nothing, Directives} = LitHtml;\nconst {until} = Directives;\n\ntype MetricRating = 'good'|'needs-improvement'|'poor';\ntype MetricThresholds = [number, number];\ntype DeviceOption = CrUXManager.DeviceScope|'AUTO';\n\n// TODO: Consolidate our metric rating logic with the trace engine.\nconst LCP_THRESHOLDS = [2500, 4000] as MetricThresholds;\nconst CLS_THRESHOLDS = [0.1, 0.25] as MetricThresholds;\nconst INP_THRESHOLDS = [200, 500] as MetricThresholds;\n\nconst DEVICE_OPTION_LIST: DeviceOption[] = ['AUTO', ...CrUXManager.DEVICE_SCOPE_LIST];\n\nconst RTT_COMPARISON_THRESHOLD = 200;\nconst RTT_MINIMUM = 60;\n\nconst UIStrings = {\n  /**\n   * @description Title of a view that shows performance metrics from the local environment and field metrics collected from real users in the field.\n   */\n  localAndFieldMetrics: 'Local and field metrics',\n  /**\n   * @description Title of a view that shows performance metrics from the local environment.\n   */\n  localMetrics: 'Local metrics',\n  /**\n   * @description Title of a section that lists user interactions.\n   */\n  interactions: 'Interactions',\n  /**\n   * @description Title of a sidebar section that shows options for the user to take after using the main view.\n   */\n  nextSteps: 'Next steps',\n  /**\n   * @description Title of a section that shows options for how real user data in the field should be fetched.\n   */\n  fieldData: 'Field data',\n  /**\n   * @description Title of a section that shows recording settings.\n   */\n  recordingSettings: 'Recording settings',\n  /**\n   * @description Title of a report section for the largest contentful paint metric.\n   */\n  lcpTitle: 'Largest Contentful Paint (LCP)',\n  /**\n   * @description Title of a report section for the cumulative layout shift metric.\n   */\n  clsTitle: 'Cumulative Layout Shift (CLS)',\n  /**\n   * @description Title of a report section for the interaction to next paint metric.\n   */\n  inpTitle: 'Interaction to Next Paint (INP)',\n  /**\n   * @description Label for a metric value that was measured in the local environment.\n   */\n  localValue: 'Local',\n  /**\n   * @description Label for the 75th percentile of a metric according to data collected from real users in the field.\n   */\n  field75thPercentile: 'Field 75th Percentile',\n  /**\n   * @description Label for an select box that selects which device type field data be shown for (e.g. desktop/mobile/all devices/etc).\n   * @example {Mobile} PH1\n   */\n  showFieldDataForDevice: 'Show field data for device type: {PH1}',\n  /**\n   * @description Label for an select box that selects which device type field data be shown for (e.g. desktop/mobile/all devices/etc).\n   * @example {Mobile} PH1\n   */\n  device: 'Device: {PH1}',\n  /**\n   * @description Label for an option to select all device form factors.\n   */\n  allDevices: 'All devices',\n  /**\n   * @description Label for an option to select the desktop form factor.\n   */\n  desktop: 'Desktop',\n  /**\n   * @description Label for an option to select the mobile form factor.\n   */\n  mobile: 'Mobile',\n  /**\n   * @description Label for an option to select the tablet form factor.\n   */\n  tablet: 'Tablet',\n  /**\n   * @description Label for an option to to automatically select the form factor. The automatic selection will be displayed in PH1.\n   * @example {Desktop} PH1\n   */\n  auto: 'Auto ({PH1})',\n  /**\n   * @description Label for an option that is loading.\n   * @example {Desktop} PH1\n   */\n  loadingOption: '{PH1} - Loading…',\n  /**\n   * @description Label for an option that does not have enough data and the user should ignore.\n   * @example {Desktop} PH1\n   */\n  needsDataOption: '{PH1} - No data',\n  /**\n   * @description Label for an option that selects the page's specific URL as opposed to it's entire origin/domain.\n   */\n  urlOption: 'URL',\n  /**\n   * @description Label for an option that selects the page's entire origin/domain as opposed to it's specific URL.\n   */\n  originOption: 'Origin',\n  /**\n   * @description Label for an option that selects the page's specific URL as opposed to it's entire origin/domain.\n   * @example {https://example.com/} PH1\n   */\n  urlOptionWithKey: 'URL: {PH1}',\n  /**\n   * @description Label for an option that selects the page's entire origin/domain as opposed to it's specific URL.\n   * @example {https://example.com} PH1\n   */\n  originOptionWithKey: 'Origin: {PH1}',\n  /**\n   * @description Label for an combo-box that indicates if field data should be taken from the page's URL or it's origin/domain.\n   * @example {Origin: https://example.com} PH1\n   */\n  showFieldDataForPage: 'Show field data for {PH1}',\n  /**\n   * @description Text block recommendation instructing the user to disable network throttling to best match real user network data.\n   */\n  tryDisablingThrottling: 'Try disabling network throttling to approximate the network latency measured by real users.',\n  /**\n   * @description Text block recommendation instructing the user to enable a throttling preset to best match real user network data.\n   * @example {Slow 4G} PH1\n   */\n  tryUsingThrottling: 'Try using {PH1} network throttling to approximate the network latency measured by real users.',\n  /**\n   * @description Text block recommendation instructing the user to emulate a mobile device to match most real users.\n   */\n  mostUsersMobile: 'A majority of users are on mobile. Try emulating a mobile device that matches real users.',\n  /**\n   * @description Text block recommendation instructing the user to emulate different desktop window sizes to match most real users.\n   */\n  mostUsersDesktop: 'A majority of users are on desktop. Try emulating a desktop window size that matches real users.',\n  /**\n   * @description Text label for a link to the Largest Contentful Paint (LCP) related DOM node.\n   */\n  lcpElement: 'LCP Element',\n  /**\n   * @description Text label for values that are classified as \"good\".\n   */\n  good: 'Good',\n  /**\n   * @description Text label for values that are classified as \"needs improvement\".\n   */\n  needsImprovement: 'Needs improvement',\n  /**\n   * @description Text label for values that are classified as \"poor\".\n   */\n  poor: 'Poor',\n  /**\n   * @description Text label for a range of values that are less than or equal to a certain value.\n   * @example {500 ms} PH1\n   */\n  leqRange: '(≤{PH1})',\n  /**\n   * @description Text label for a range of values that are between two values.\n   * @example {500 ms} PH1\n   * @example {800 ms} PH2\n   */\n  betweenRange: '({PH1}-{PH2})',\n  /**\n   * @description Text label for a range of values that are greater than a certain value.\n   * @example {500 ms} PH1\n   */\n  gtRange: '(>{PH1})',\n  /**\n   * @description Text for a percentage value in the live metrics view.\n   * @example {13} PH1\n   */\n  percentage: '{PH1}%',\n  /**\n   * @description Text instructing the user to interact with the page because a user interaction is required to measure Interaction to Next Paint (INP).\n   */\n  interactToMeasure: 'Interact with the page to measure INP.',\n  /**\n   * @description Label for a tooltip that provides more details.\n   */\n  viewCardDetails: 'View card details',\n  /**\n   * @description Label for a a range of dates that represents the period of time a set of field data is collected from.\n   */\n  collectionPeriod: 'Collection period:',\n  /**\n   * @description Text showing a range of dates meant to represent a period of time.\n   * @example {Oct 1, 2024} PH1\n   * @example {Nov 1, 2024} PH2\n   */\n  dateRange: '{PH1} - {PH2}',\n  /**\n   * @description Text block telling the user to see how performance metrics measured on their local computer compare to data collected from real users. PH1 will be a link to more information about the Chrome UX Report and the link text will be untranslated because it is a product name.\n   * @example {Chrome UX Report} PH1\n   */\n  seeHowYourLocalMetricsCompare: 'See how your local metrics compare to real user data in the {PH1}.',\n  /**\n   * @description Text block explaining that local metrics are collected from the local environment used to load the page being tested. PH1 will be a link with text that will be translated separately.\n   * @example {local metrics} PH1\n   */\n  theLocalMetricsAre: 'The {PH1} are captured from the current page using your network connection and device.',\n  /**\n   * @description Link text that is inserted in another translated text block that describes performance metrics measured in the developers local environment.\n   */\n  localMetricsLink: 'local metrics',\n  /**\n   * @description Text block explaining that field metrics are measured by real users using many different connections and hardware over a 28 period. PH1 will be a link with text that will be translated separately.\n   * @example {field data} PH1\n   */\n  theFieldMetricsAre: 'The {PH1} is measured by real users using many different network connections and devices.',\n  /**\n   * @description Link text that is inserted in another translated text block that describes performance data measured by real users in the field.\n   */\n  fieldDataLink: 'field data',\n};\n\nconst str_ = i18n.i18n.registerUIStrings('panels/timeline/components/LiveMetricsView.ts', UIStrings);\nconst i18nString = i18n.i18n.getLocalizedString.bind(undefined, str_);\n\nfunction rateMetric(value: number, thresholds: MetricThresholds): MetricRating {\n  if (value <= thresholds[0]) {\n    return 'good';\n  }\n  if (value <= thresholds[1]) {\n    return 'needs-improvement';\n  }\n  return 'poor';\n}\n\nfunction renderMetricValue(\n    jslogContext: string, value: number|undefined, thresholds: MetricThresholds, format: (value: number) => string,\n    options?: {dim?: boolean}): HTMLElement {\n  const metricValueEl = document.createElement('span');\n  metricValueEl.classList.add('metric-value');\n  if (value === undefined) {\n    metricValueEl.classList.add('waiting');\n    metricValueEl.textContent = '-';\n    return metricValueEl;\n  }\n\n  metricValueEl.textContent = format(value);\n  const rating = rateMetric(value, thresholds);\n  metricValueEl.classList.add(rating);\n  // Ensure we log impressions of each section. We purposefully add this here\n  // because if we don't have field data (dealt with in the undefined branch\n  // above), we do not want to log an impression on it.\n  metricValueEl.setAttribute('jslog', `${VisualLogging.section(jslogContext)}`);\n  if (options?.dim) {\n    metricValueEl.classList.add('dim');\n  }\n\n  return metricValueEl;\n}\n\nexport interface MetricCardData {\n  metric: 'LCP'|'CLS'|'INP';\n  localValue?: number;\n  fieldValue?: number|string;\n  histogram?: CrUXManager.MetricResponse['histogram'];\n  tooltipContainer?: HTMLElement;\n}\n\nexport class MetricCard extends HTMLElement {\n  static readonly litTagName = LitHtml.literal`devtools-metric-card`;\n  readonly #shadow = this.attachShadow({mode: 'open'});\n\n  constructor() {\n    super();\n\n    this.#render();\n  }\n\n  #tooltipEl?: HTMLElement;\n\n  #data: MetricCardData = {\n    metric: 'LCP',\n  };\n\n  set data(data: MetricCardData) {\n    this.#data = data;\n    void ComponentHelpers.ScheduledRender.scheduleRender(this, this.#render);\n  }\n\n  connectedCallback(): void {\n    this.#shadow.adoptedStyleSheets = [liveMetricsViewStyles];\n\n    void ComponentHelpers.ScheduledRender.scheduleRender(this, this.#render);\n  }\n\n  #hideTooltipOnEsc = (event: KeyboardEvent): void => {\n    if (Platform.KeyboardUtilities.isEscKey(event)) {\n      event.stopPropagation();\n      this.#hideTooltip();\n    }\n  };\n\n  #hideTooltipOnMouseLeave(event: Event): void {\n    const target = event.target as HTMLElement;\n    if (target?.hasFocus()) {\n      return;\n    }\n\n    this.#hideTooltip();\n  }\n\n  #hideTooltipOnFocusOut(event: FocusEvent): void {\n    const target = event.target as HTMLElement;\n    if (target?.hasFocus()) {\n      return;\n    }\n\n    const relatedTarget = event.relatedTarget;\n    if (relatedTarget instanceof Node && target.contains(relatedTarget)) {\n      // `focusout` bubbles so we should get another event once focus leaves `relatedTarget`\n      return;\n    }\n\n    this.#hideTooltip();\n  }\n\n  #hideTooltip(): void {\n    const tooltipEl = this.#tooltipEl;\n    if (!tooltipEl) {\n      return;\n    }\n\n    document.body.removeEventListener('keydown', this.#hideTooltipOnEsc);\n\n    tooltipEl.style.left = '';\n    tooltipEl.style.maxWidth = '';\n    tooltipEl.style.display = 'none';\n  }\n\n  #showTooltip(): void {\n    const tooltipEl = this.#tooltipEl;\n    if (!tooltipEl || tooltipEl.style.display === 'block') {\n      return;\n    }\n\n    document.body.addEventListener('keydown', this.#hideTooltipOnEsc);\n\n    tooltipEl.style.display = 'block';\n\n    const container = this.#data.tooltipContainer;\n    if (!container) {\n      return;\n    }\n\n    const containerBox = container.getBoundingClientRect();\n    tooltipEl.style.setProperty('--tooltip-container-width', `${Math.round(containerBox.width)}px`);\n\n    requestAnimationFrame(() => {\n      let offset = 0;\n\n      const tooltipBox = tooltipEl.getBoundingClientRect();\n\n      const rightDiff = tooltipBox.right - containerBox.right;\n      const leftDiff = tooltipBox.left - containerBox.left;\n\n      if (leftDiff < 0) {\n        offset = Math.round(leftDiff);\n      } else if (rightDiff > 0) {\n        offset = Math.round(rightDiff);\n      }\n\n      tooltipEl.style.left = `calc(50% - ${offset}px)`;\n    });\n  }\n\n  #getTitle(): string {\n    switch (this.#data.metric) {\n      case 'LCP':\n        return i18nString(UIStrings.lcpTitle);\n      case 'CLS':\n        return i18nString(UIStrings.clsTitle);\n      case 'INP':\n        return i18nString(UIStrings.inpTitle);\n    }\n  }\n\n  #getThresholds(): MetricThresholds {\n    switch (this.#data.metric) {\n      case 'LCP':\n        return LCP_THRESHOLDS;\n      case 'CLS':\n        return CLS_THRESHOLDS;\n      case 'INP':\n        return INP_THRESHOLDS;\n    }\n  }\n\n  #getFormatFn(): (value: number) => string {\n    switch (this.#data.metric) {\n      case 'LCP':\n        return v => i18n.TimeUtilities.millisToString(v);\n      case 'CLS':\n        return v => v === 0 ? '0' : v.toFixed(2);\n      case 'INP':\n        return v => i18n.TimeUtilities.millisToString(v);\n    }\n  }\n\n  #getLocalValue(): number|undefined {\n    const {localValue} = this.#data;\n    if (localValue === undefined) {\n      return;\n    }\n\n    return localValue;\n  }\n\n  #getFieldValue(): number|undefined {\n    let {fieldValue} = this.#data;\n    if (fieldValue === undefined) {\n      return;\n    }\n\n    if (typeof fieldValue === 'string') {\n      fieldValue = Number(fieldValue);\n    }\n\n    if (!Number.isFinite(fieldValue)) {\n      return;\n    }\n\n    return fieldValue;\n  }\n\n  #getCompareRating(): 'better'|'worse'|'similar'|undefined {\n    const localValue = this.#getLocalValue();\n    const fieldValue = this.#getFieldValue();\n    if (localValue === undefined || fieldValue === undefined) {\n      return;\n    }\n\n    const threshold = this.#getThresholds()[0];\n    if (localValue - fieldValue > threshold) {\n      return 'worse';\n    }\n    if (fieldValue - localValue > threshold) {\n      return 'better';\n    }\n\n    return 'similar';\n  }\n\n  #renderCompareString(): LitHtml.LitTemplate {\n    const localValue = this.#getLocalValue();\n    if (localValue === undefined) {\n      if (this.#data.metric === 'INP') {\n        return html`\n          <div class=\"compare-text\">${i18nString(UIStrings.interactToMeasure)}</div>\n        `;\n      }\n      return LitHtml.nothing;\n    }\n\n    const compare = this.#getCompareRating();\n    const rating = rateMetric(localValue, this.#getThresholds());\n\n    const valueEl = renderMetricValue(\n        this.#getMetricValueLogContext(true), localValue, this.#getThresholds(), this.#getFormatFn(), {dim: true});\n\n    // clang-format off\n    return html`\n      <div class=\"compare-text\">\n        ${renderCompareText(rating, compare, {\n          PH1: this.#data.metric,\n          PH2: valueEl,\n        })}\n      </div>\n    `;\n    // clang-format on\n  }\n\n  #getMetricValueLogContext(isLocal: boolean): string {\n    return `timeline.landing.${isLocal ? 'local' : 'field'}-${this.#data.metric.toLowerCase()}`;\n  }\n\n  #renderDetailedCompareString(): LitHtml.LitTemplate {\n    const localValue = this.#getLocalValue();\n    if (localValue === undefined) {\n      if (this.#data.metric === 'INP') {\n        return html`\n          <div class=\"detailed-compare-text\">${i18nString(UIStrings.interactToMeasure)}</div>\n        `;\n      }\n      return LitHtml.nothing;\n    }\n\n    const localRating = rateMetric(localValue, this.#getThresholds());\n\n    const fieldValue = this.#getFieldValue();\n    const fieldRating = fieldValue !== undefined ? rateMetric(fieldValue, this.#getThresholds()) : undefined;\n\n    const localValueEl = renderMetricValue(\n        this.#getMetricValueLogContext(true), localValue, this.#getThresholds(), this.#getFormatFn(), {dim: true});\n    const fieldValueEl = renderMetricValue(\n        this.#getMetricValueLogContext(false), fieldValue, this.#getThresholds(), this.#getFormatFn(), {dim: true});\n\n    // clang-format off\n    return html`\n      <div class=\"detailed-compare-text\">${renderDetailedCompareText(localRating, fieldRating, {\n        PH1: this.#data.metric,\n        PH2: localValueEl,\n        PH3: fieldValueEl,\n        PH4: this.#getPercentLabelForRating(localRating),\n      })}</div>\n    `;\n    // clang-format on\n  }\n\n  #bucketIndexForRating(rating: MetricRating): number {\n    switch (rating) {\n      case 'good':\n        return 0;\n      case 'needs-improvement':\n        return 1;\n      case 'poor':\n        return 2;\n    }\n  }\n\n  #getBarWidthForRating(rating: MetricRating): string {\n    const histogram = this.#data.histogram;\n    const density = histogram?.[this.#bucketIndexForRating(rating)].density || 0;\n    const percent = Math.round(density * 100);\n    return `${percent}%`;\n  }\n\n  #getPercentLabelForRating(rating: MetricRating): string {\n    const histogram = this.#data.histogram;\n    if (histogram === undefined) {\n      return '-';\n    }\n\n    // A missing density value should be interpreted as 0%\n    const density = histogram[this.#bucketIndexForRating(rating)].density || 0;\n    const percent = Math.round(density * 100);\n    return i18nString(UIStrings.percentage, {PH1: percent});\n  }\n\n  #renderFieldHistogram(): LitHtml.LitTemplate {\n    const fieldEnabled = CrUXManager.CrUXManager.instance().getConfigSetting().get().enabled;\n\n    const format = this.#getFormatFn();\n    const thresholds = this.#getThresholds();\n\n    // clang-format off\n    const goodLabel = html`\n      <div class=\"bucket-label\">\n        <span>${i18nString(UIStrings.good)}</span>\n        <span class=\"bucket-range\">${i18nString(UIStrings.leqRange, {PH1: format(thresholds[0])})}</span>\n      </div>\n    `;\n\n    const needsImprovementLabel = html`\n      <div class=\"bucket-label\">\n        <span>${i18nString(UIStrings.needsImprovement)}</span>\n        <span class=\"bucket-range\">${i18nString(UIStrings.betweenRange, {PH1: format(thresholds[0]), PH2: format(thresholds[1])})}</span>\n      </div>\n    `;\n\n    const poorLabel = html`\n      <div class=\"bucket-label\">\n        <span>${i18nString(UIStrings.poor)}</span>\n        <span class=\"bucket-range\">${i18nString(UIStrings.gtRange, {PH1: format(thresholds[1])})}</span>\n      </div>\n    `;\n    // clang-format on\n\n    if (!fieldEnabled) {\n      return html`\n        <div class=\"bucket-summaries\">\n          ${goodLabel}\n          ${needsImprovementLabel}\n          ${poorLabel}\n        </div>\n      `;\n    }\n\n    // clang-format off\n    return html`\n      <div class=\"bucket-summaries histogram\">\n        ${goodLabel}\n        <div class=\"histogram-bar good-bg\" style=\"width: ${this.#getBarWidthForRating('good')}\"></div>\n        <div class=\"histogram-percent\">${this.#getPercentLabelForRating('good')}</div>\n        ${needsImprovementLabel}\n        <div class=\"histogram-bar needs-improvement-bg\" style=\"width: ${this.#getBarWidthForRating('needs-improvement')}\"></div>\n        <div class=\"histogram-percent\">${this.#getPercentLabelForRating('needs-improvement')}</div>\n        ${poorLabel}\n        <div class=\"histogram-bar poor-bg\" style=\"width: ${this.#getBarWidthForRating('poor')}\"></div>\n        <div class=\"histogram-percent\">${this.#getPercentLabelForRating('poor')}</div>\n      </div>\n    `;\n    // clang-format on\n  }\n\n  #render = (): void => {\n    const fieldEnabled = CrUXManager.CrUXManager.instance().getConfigSetting().get().enabled;\n\n    // clang-format off\n    const output = html`\n      <div class=\"metric-card\">\n        <h3 class=\"card-title\">\n          ${this.#getTitle()}\n        </h3>\n        <div tabindex=\"0\" class=\"card-values\"\n          @mouseenter=${this.#showTooltip}\n          @mouseleave=${this.#hideTooltipOnMouseLeave}\n          @focusin=${this.#showTooltip}\n          @focusout=${this.#hideTooltipOnFocusOut}\n          aria-describedby=\"tooltip\"\n        >\n          <div class=\"card-value-block\">\n            <div class=\"card-value\" id=\"local-value\">${renderMetricValue(\n              this.#getMetricValueLogContext(true),\n              this.#getLocalValue(), this.#getThresholds(), this.#getFormatFn())}</div>\n            ${fieldEnabled ? html`<div class=\"card-metric-label\">${i18nString(UIStrings.localValue)}</div>` : nothing}\n          </div>\n          ${fieldEnabled ? html`\n            <div class=\"card-value-block\">\n              <div class=\"card-value\" id=\"field-value\">${renderMetricValue(\n                this.#getMetricValueLogContext(false),\n                this.#getFieldValue(), this.#getThresholds(), this.#getFormatFn())}</div>\n              <div class=\"card-value-label\">${i18nString(UIStrings.field75thPercentile)}</div>\n            </div>\n          `: nothing}\n          <div\n            id=\"tooltip\"\n            class=\"tooltip\"\n            role=\"tooltip\"\n            aria-label=${i18nString(UIStrings.viewCardDetails)}\n            on-render=${ComponentHelpers.Directives.nodeRenderedCallback(node => {\n              this.#tooltipEl = node as HTMLElement;\n            })}\n          >\n            ${this.#renderDetailedCompareString()}\n            <hr class=\"divider\">\n            ${this.#renderFieldHistogram()}\n          </div>\n        </div>\n        ${fieldEnabled ? html`<hr class=\"divider\">` : nothing}\n        ${this.#renderCompareString()}\n        <slot name=\"extra-info\"><slot>\n      </div>\n    `;\n    LitHtml.render(output, this.#shadow, {host: this});\n  };\n  // clang-format on\n}\n\nexport class LiveMetricsView extends LegacyWrapper.LegacyWrapper.WrappableComponent {\n  static readonly litTagName = LitHtml.literal`devtools-live-metrics-view`;\n  readonly #shadow = this.attachShadow({mode: 'open'});\n\n  #lcpValue?: LiveMetrics.LCPValue;\n  #clsValue?: LiveMetrics.CLSValue;\n  #inpValue?: LiveMetrics.INPValue;\n  #interactions: LiveMetrics.InteractionValue[] = [];\n\n  #cruxPageResult?: CrUXManager.PageResult;\n\n  #fieldDeviceOption: DeviceOption = 'AUTO';\n  #fieldPageScope: CrUXManager.PageScope = 'url';\n\n  #toggleRecordAction: UI.ActionRegistration.Action;\n  #recordReloadAction: UI.ActionRegistration.Action;\n\n  #tooltipContainerEl?: Element;\n  #interactionsListEl?: HTMLElement;\n  #interactionsListScrolling = false;\n\n  constructor() {\n    super();\n\n    this.#toggleRecordAction = UI.ActionRegistry.ActionRegistry.instance().getAction('timeline.toggle-recording');\n    this.#recordReloadAction = UI.ActionRegistry.ActionRegistry.instance().getAction('timeline.record-reload');\n\n    this.#render();\n  }\n\n  #onMetricStatus(event: {data: LiveMetrics.StatusEvent}): void {\n    this.#lcpValue = event.data.lcp;\n    this.#clsValue = event.data.cls;\n    this.#inpValue = event.data.inp;\n\n    const hasNewInteraction = this.#interactions.length < event.data.interactions.length;\n    this.#interactions = [...event.data.interactions];\n\n    const renderPromise = ComponentHelpers.ScheduledRender.scheduleRender(this, this.#render);\n\n    const listEl = this.#interactionsListEl;\n    if (!hasNewInteraction || !listEl) {\n      return;\n    }\n\n    const isAtBottom = Math.abs(listEl.scrollHeight - listEl.clientHeight - listEl.scrollTop) <= 1;\n\n    // We shouldn't scroll to the bottom if the list wasn't already at the bottom.\n    // However, if a new item appears while the animation for a previous item is still going,\n    // then we should \"finish\" the scroll by sending another scroll command even if the scroll position\n    // the element hasn't scrolled all the way to the bottom yet.\n    if (!isAtBottom && !this.#interactionsListScrolling) {\n      return;\n    }\n\n    void renderPromise.then(() => {\n      requestAnimationFrame(() => {\n        this.#interactionsListScrolling = true;\n        listEl.addEventListener('scrollend', () => {\n          this.#interactionsListScrolling = false;\n        }, {once: true});\n        listEl.scrollTo({top: listEl.scrollHeight, behavior: 'smooth'});\n      });\n    });\n  }\n\n  #onFieldDataChanged(event: {data: CrUXManager.PageResult|undefined}): void {\n    this.#cruxPageResult = event.data;\n    void ComponentHelpers.ScheduledRender.scheduleRender(this, this.#render);\n  }\n\n  #onEmulationChanged(): void {\n    void ComponentHelpers.ScheduledRender.scheduleRender(this, this.#render);\n  }\n\n  async #refreshFieldDataForCurrentPage(): Promise<void> {\n    this.#cruxPageResult = await CrUXManager.CrUXManager.instance().getFieldDataForCurrentPage();\n    void ComponentHelpers.ScheduledRender.scheduleRender(this, this.#render);\n  }\n\n  #getSelectedFieldResponse(): CrUXManager.CrUXResponse|null|undefined {\n    const deviceScope = this.#fieldDeviceOption === 'AUTO' ? this.#getAutoDeviceScope() : this.#fieldDeviceOption;\n    return this.#cruxPageResult?.[`${this.#fieldPageScope}-${deviceScope}`];\n  }\n\n  #getFieldMetricData(fieldMetric: CrUXManager.StandardMetricNames): CrUXManager.MetricResponse|undefined {\n    return this.#getSelectedFieldResponse()?.record.metrics[fieldMetric];\n  }\n\n  connectedCallback(): void {\n    this.#shadow.adoptedStyleSheets = [liveMetricsViewStyles];\n\n    const liveMetrics = LiveMetrics.LiveMetrics.instance();\n    liveMetrics.addEventListener(LiveMetrics.Events.Status, this.#onMetricStatus, this);\n\n    const cruxManager = CrUXManager.CrUXManager.instance();\n    cruxManager.addEventListener(CrUXManager.Events.FieldDataChanged, this.#onFieldDataChanged, this);\n\n    const emulationModel = EmulationModel.DeviceModeModel.DeviceModeModel.instance();\n    emulationModel.addEventListener(EmulationModel.DeviceModeModel.Events.Updated, this.#onEmulationChanged, this);\n\n    if (cruxManager.getConfigSetting().get().enabled) {\n      void this.#refreshFieldDataForCurrentPage();\n    }\n\n    this.#lcpValue = liveMetrics.lcpValue;\n    this.#clsValue = liveMetrics.clsValue;\n    this.#inpValue = liveMetrics.inpValue;\n    this.#interactions = liveMetrics.interactions;\n    void ComponentHelpers.ScheduledRender.scheduleRender(this, this.#render);\n  }\n\n  disconnectedCallback(): void {\n    LiveMetrics.LiveMetrics.instance().removeEventListener(LiveMetrics.Events.Status, this.#onMetricStatus, this);\n\n    const cruxManager = CrUXManager.CrUXManager.instance();\n    cruxManager.removeEventListener(CrUXManager.Events.FieldDataChanged, this.#onFieldDataChanged, this);\n\n    const emulationModel = EmulationModel.DeviceModeModel.DeviceModeModel.instance();\n    emulationModel.removeEventListener(EmulationModel.DeviceModeModel.Events.Updated, this.#onEmulationChanged, this);\n  }\n\n  #renderLcpCard(): LitHtml.LitTemplate {\n    const fieldData = this.#getFieldMetricData('largest_contentful_paint');\n    const node = this.#lcpValue?.node;\n\n    // clang-format off\n    return html`\n      <${MetricCard.litTagName} .data=${{\n        metric: 'LCP',\n        localValue: this.#lcpValue?.value,\n        fieldValue: fieldData?.percentiles?.p75,\n        histogram: fieldData?.histogram,\n        tooltipContainer: this.#tooltipContainerEl,\n      } as MetricCardData}>\n        ${node ? html`\n            <div class=\"related-element-info\" slot=\"extra-info\">\n              <span class=\"related-element-label\">${i18nString(UIStrings.lcpElement)}</span>\n              <span class=\"related-element-link\">${until(Common.Linkifier.Linkifier.linkify(node))}</span>\n            </div>\n          `\n          : nothing}\n      </${MetricCard.litTagName}>\n    `;\n    // clang-format on\n  }\n\n  #renderClsCard(): LitHtml.LitTemplate {\n    const fieldData = this.#getFieldMetricData('cumulative_layout_shift');\n\n    // clang-format off\n    return html`\n      <${MetricCard.litTagName} .data=${{\n        metric: 'CLS',\n        localValue: this.#clsValue?.value,\n        fieldValue: fieldData?.percentiles?.p75,\n        histogram: fieldData?.histogram,\n        tooltipContainer: this.#tooltipContainerEl,\n      } as MetricCardData}>\n      </${MetricCard.litTagName}>\n    `;\n    // clang-format on\n  }\n\n  #renderInpCard(): LitHtml.LitTemplate {\n    const fieldData = this.#getFieldMetricData('interaction_to_next_paint');\n\n    // clang-format off\n    return html`\n      <${MetricCard.litTagName} .data=${{\n        metric: 'INP',\n        localValue: this.#inpValue?.value,\n        fieldValue: fieldData?.percentiles?.p75,\n        histogram: fieldData?.histogram,\n        tooltipContainer: this.#tooltipContainerEl,\n      } as MetricCardData}>\n      </${MetricCard.litTagName}>\n    `;\n    // clang-format on\n  }\n\n  #renderRecordAction(action: UI.ActionRegistration.Action): LitHtml.LitTemplate {\n    function onClick(): void {\n      void action.execute();\n    }\n\n    // clang-format off\n    return html`\n      <div class=\"record-action\">\n        <${Buttons.Button.Button.litTagName} @click=${onClick} .data=${{\n            variant: Buttons.Button.Variant.TEXT,\n            size: Buttons.Button.Size.REGULAR,\n            iconName: action.icon(),\n            title: action.title(),\n            jslogContext: action.id(),\n        } as Buttons.Button.ButtonData}>\n          ${action.title()}\n        </${Buttons.Button.Button.litTagName}>\n        <span class=\"shortcut-label\">${UI.ShortcutRegistry.ShortcutRegistry.instance().shortcutTitleForAction(action.id())}</span>\n      </div>\n    `;\n    // clang-format on\n  }\n\n  #getClosestNetworkPreset(): SDK.NetworkManager.Conditions|null {\n    const response = this.#getFieldMetricData('round_trip_time');\n    if (!response?.percentiles) {\n      return null;\n    }\n\n    const rtt = Number(response.percentiles.p75);\n    if (!Number.isFinite(rtt)) {\n      return null;\n    }\n\n    if (rtt < RTT_MINIMUM) {\n      return SDK.NetworkManager.NoThrottlingConditions;\n    }\n\n    let closestPreset: SDK.NetworkManager.Conditions|null = null;\n    let smallestDiff = Infinity;\n    for (const preset of MobileThrottling.ThrottlingPresets.ThrottlingPresets.networkPresets) {\n      const {targetLatency} = preset;\n      if (!targetLatency) {\n        continue;\n      }\n\n      const diff = Math.abs(targetLatency - rtt);\n      if (diff > RTT_COMPARISON_THRESHOLD) {\n        continue;\n      }\n\n      if (smallestDiff < diff) {\n        continue;\n      }\n\n      closestPreset = preset;\n      smallestDiff = diff;\n    }\n\n    return closestPreset;\n  }\n\n  #getDeviceRec(): Common.UIString.LocalizedString|null {\n    // `form_factors` metric is only populated if CrUX data is fetched for all devices.\n    const fractions = this.#cruxPageResult?.[`${this.#fieldPageScope}-ALL`]?.record.metrics.form_factors?.fractions;\n    if (!fractions) {\n      return null;\n    }\n\n    if (fractions.desktop > 0.5) {\n      return i18nString(UIStrings.mostUsersDesktop);\n    }\n\n    if (fractions.phone > 0.5) {\n      return i18nString(UIStrings.mostUsersMobile);\n    }\n\n    return null;\n  }\n\n  #renderRecordingSettings(): LitHtml.LitTemplate {\n    const throttlingRec = this.#getClosestNetworkPreset();\n    const deviceRec = this.#getDeviceRec();\n\n    let networkRecEl;\n    if (throttlingRec) {\n      if (throttlingRec === SDK.NetworkManager.NoThrottlingConditions) {\n        networkRecEl = i18nString(UIStrings.tryDisablingThrottling);\n      } else {\n        const title = typeof throttlingRec.title === 'function' ? throttlingRec.title() : throttlingRec.title;\n\n        const recValueEl = document.createElement('span');\n        recValueEl.classList.add('throttling-recommendation-value');\n        recValueEl.textContent = title;\n\n        networkRecEl = i18n.i18n.getFormatLocalizedString(str_, UIStrings.tryUsingThrottling, {PH1: recValueEl});\n      }\n    }\n\n    // clang-format off\n    return html`\n      <h3 class=\"card-title\">${i18nString(UIStrings.recordingSettings)}</h3>\n      ${deviceRec ? html`<div id=\"device-recommendation\" class=\"setting-recommendation\">${deviceRec}</div>` : nothing}\n      ${networkRecEl ? html`<div id=\"network-recommendation\" class=\"setting-recommendation\">${networkRecEl}</div>` : nothing}\n      <${CPUThrottlingSelector.litTagName} class=\"live-metrics-option\"></${CPUThrottlingSelector.litTagName}>\n      <${NetworkThrottlingSelector.litTagName} class=\"live-metrics-option\"></${NetworkThrottlingSelector.litTagName}>\n    `;\n    // clang-format on\n  }\n\n  #getPageScopeLabel(pageScope: CrUXManager.PageScope): string {\n    const key = this.#cruxPageResult?.[`${pageScope}-ALL`]?.record.key[pageScope];\n    if (key) {\n      return pageScope === 'url' ? i18nString(UIStrings.urlOptionWithKey, {PH1: key}) :\n                                   i18nString(UIStrings.originOptionWithKey, {PH1: key});\n    }\n\n    const baseLabel = pageScope === 'url' ? i18nString(UIStrings.urlOption) : i18nString(UIStrings.originOption);\n    return i18nString(UIStrings.needsDataOption, {PH1: baseLabel});\n  }\n\n  #onPageScopeMenuItemSelected(event: Menus.SelectMenu.SelectMenuItemSelectedEvent): void {\n    if (event.itemValue === 'url') {\n      this.#fieldPageScope = 'url';\n    } else {\n      this.#fieldPageScope = 'origin';\n    }\n    void ComponentHelpers.ScheduledRender.scheduleRender(this, this.#render);\n  }\n\n  #renderPageScopeSetting(): LitHtml.LitTemplate {\n    if (!CrUXManager.CrUXManager.instance().getConfigSetting().get().enabled) {\n      return LitHtml.nothing;\n    }\n\n    const urlLabel = this.#getPageScopeLabel('url');\n    const originLabel = this.#getPageScopeLabel('origin');\n\n    const buttonTitle = this.#fieldPageScope === 'url' ? urlLabel : originLabel;\n    const accessibleTitle = i18nString(UIStrings.showFieldDataForPage, {PH1: buttonTitle});\n\n    // If there is no data at all we should force users to switch pages or reconfigure CrUX.\n    const shouldDisable = !this.#cruxPageResult?.['url-ALL'] && !this.#cruxPageResult?.['origin-ALL'];\n\n    return html`\n      <${Menus.SelectMenu.SelectMenu.litTagName}\n        id=\"page-scope-select\"\n        class=\"live-metrics-option\"\n        @selectmenuselected=${this.#onPageScopeMenuItemSelected}\n        .showDivider=${true}\n        .showArrow=${true}\n        .sideButton=${false}\n        .showSelectedItem=${true}\n        .showConnector=${false}\n        .buttonTitle=${buttonTitle}\n        .disabled=${shouldDisable}\n        title=${accessibleTitle}\n      >\n        <${Menus.Menu.MenuItem.litTagName}\n          .value=${'url'}\n          .selected=${this.#fieldPageScope === 'url'}\n        >\n          ${urlLabel}\n        </${Menus.Menu.MenuItem.litTagName}>\n        <${Menus.Menu.MenuItem.litTagName}\n          .value=${'origin'}\n          .selected=${this.#fieldPageScope === 'origin'}\n        >\n          ${originLabel}\n        </${Menus.Menu.MenuItem.litTagName}>\n      </${Menus.SelectMenu.SelectMenu.litTagName}>\n    `;\n  }\n\n  #getDeviceScopeDisplayName(deviceScope: CrUXManager.DeviceScope): string {\n    switch (deviceScope) {\n      case 'ALL':\n        return i18nString(UIStrings.allDevices);\n      case 'DESKTOP':\n        return i18nString(UIStrings.desktop);\n      case 'PHONE':\n        return i18nString(UIStrings.mobile);\n      case 'TABLET':\n        return i18nString(UIStrings.tablet);\n    }\n  }\n\n  #getAutoDeviceScope(): CrUXManager.DeviceScope {\n    const emulationModel = EmulationModel.DeviceModeModel.DeviceModeModel.instance();\n    if (emulationModel.isMobile()) {\n      if (this.#cruxPageResult?.[`${this.#fieldPageScope}-PHONE`]) {\n        return 'PHONE';\n      }\n\n      return 'ALL';\n    }\n\n    if (this.#cruxPageResult?.[`${this.#fieldPageScope}-DESKTOP`]) {\n      return 'DESKTOP';\n    }\n\n    return 'ALL';\n  }\n\n  #getLabelForDeviceOption(deviceOption: DeviceOption): string {\n    const deviceScope = deviceOption === 'AUTO' ? this.#getAutoDeviceScope() : deviceOption;\n    const deviceScopeLabel = this.#getDeviceScopeDisplayName(deviceScope);\n    const baseLabel = deviceOption === 'AUTO' ? i18nString(UIStrings.auto, {PH1: deviceScopeLabel}) : deviceScopeLabel;\n\n    if (!this.#cruxPageResult) {\n      return i18nString(UIStrings.loadingOption, {PH1: baseLabel});\n    }\n\n    const result = this.#cruxPageResult[`${this.#fieldPageScope}-${deviceScope}`];\n    if (!result) {\n      return i18nString(UIStrings.needsDataOption, {PH1: baseLabel});\n    }\n\n    return baseLabel;\n  }\n\n  #onDeviceOptionMenuItemSelected(event: Menus.SelectMenu.SelectMenuItemSelectedEvent): void {\n    this.#fieldDeviceOption = event.itemValue as DeviceOption;\n    void ComponentHelpers.ScheduledRender.scheduleRender(this, this.#render);\n  }\n\n  #renderDeviceScopeSetting(): LitHtml.LitTemplate {\n    if (!CrUXManager.CrUXManager.instance().getConfigSetting().get().enabled) {\n      return LitHtml.nothing;\n    }\n    // If there is no data at all we should force users to try adjusting the page scope\n    // before coming back to this option.\n    const shouldDisable = !this.#cruxPageResult?.[`${this.#fieldPageScope}-ALL`];\n\n    const currentDeviceLabel = this.#getLabelForDeviceOption(this.#fieldDeviceOption);\n\n    // clang-format off\n    return html`\n      <${Menus.SelectMenu.SelectMenu.litTagName}\n        id=\"device-scope-select\"\n        class=\"live-metrics-option\"\n        @selectmenuselected=${this.#onDeviceOptionMenuItemSelected}\n        .showDivider=${true}\n        .showArrow=${true}\n        .sideButton=${false}\n        .showSelectedItem=${true}\n        .showConnector=${false}\n        .buttonTitle=${i18nString(UIStrings.device, {PH1: currentDeviceLabel})}\n        .disabled=${shouldDisable}\n        title=${i18nString(UIStrings.showFieldDataForDevice, {PH1: currentDeviceLabel})}\n      >\n        ${DEVICE_OPTION_LIST.map(deviceOption => {\n          return html`\n            <${Menus.Menu.MenuItem.litTagName}\n              .value=${deviceOption}\n              .selected=${this.#fieldDeviceOption === deviceOption}\n            >\n              ${this.#getLabelForDeviceOption(deviceOption)}\n            </${Menus.Menu.MenuItem.litTagName}>\n          `;\n        })}\n      </${Menus.SelectMenu.SelectMenu.litTagName}>\n    `;\n    // clang-format on\n  }\n\n  #renderCollectionPeriod(): LitHtml.LitTemplate {\n    const selectedResponse = this.#getSelectedFieldResponse();\n    if (!selectedResponse) {\n      return LitHtml.nothing;\n    }\n\n    const {firstDate, lastDate} = selectedResponse.record.collectionPeriod;\n\n    const formattedFirstDate = new Date(\n        firstDate.year,\n        // CrUX month is 1-indexed but `Date` month is 0-indexed\n        firstDate.month - 1,\n        firstDate.day,\n    );\n    const formattedLastDate = new Date(\n        lastDate.year,\n        // CrUX month is 1-indexed but `Date` month is 0-indexed\n        lastDate.month - 1,\n        lastDate.day,\n    );\n\n    const options: Intl.DateTimeFormatOptions = {\n      year: 'numeric',\n      month: 'short',\n      day: 'numeric',\n    };\n\n    const dateEl = document.createElement('span');\n    dateEl.classList.add('collection-period-range');\n    dateEl.textContent = i18nString(UIStrings.dateRange, {\n      PH1: formattedFirstDate.toLocaleDateString(undefined, options),\n      PH2: formattedLastDate.toLocaleDateString(undefined, options),\n    });\n\n    return html`\n      <div class=\"field-data-message\">\n        ${i18nString(UIStrings.collectionPeriod)}\n        ${dateEl}\n      </div>\n    `;\n  }\n\n  #renderFieldDataMessage(): LitHtml.LitTemplate {\n    if (CrUXManager.CrUXManager.instance().getConfigSetting().get().enabled) {\n      return this.#renderCollectionPeriod();\n    }\n\n    // \"Chrome UX Report\" is intentionally left untranslated because it is a product name.\n    const linkEl = UI.XLink.XLink.create('https://developer.chrome.com/docs/crux', 'Chrome UX Report');\n    const messageEl = i18n.i18n.getFormatLocalizedString(str_, UIStrings.seeHowYourLocalMetricsCompare, {PH1: linkEl});\n\n    return html`\n      <div class=\"field-data-message\">${messageEl}</div>\n    `;\n  }\n\n  #renderDataDescriptions(): LitHtml.LitTemplate {\n    const fieldEnabled = CrUXManager.CrUXManager.instance().getConfigSetting().get().enabled;\n\n    const localLink = UI.XLink.XLink.create(\n        'https://web.dev/articles/lab-and-field-data-differences#lab_data', i18nString(UIStrings.localMetricsLink));\n    const localEl = i18n.i18n.getFormatLocalizedString(str_, UIStrings.theLocalMetricsAre, {PH1: localLink});\n\n    const fieldLink = UI.XLink.XLink.create(\n        'https://web.dev/articles/lab-and-field-data-differences#field_data', i18nString(UIStrings.fieldDataLink));\n    const fieldEl = i18n.i18n.getFormatLocalizedString(str_, UIStrings.theFieldMetricsAre, {PH1: fieldLink});\n\n    return html`\n      <div class=\"data-descriptions\">\n        <div>${localEl}</div>\n        ${fieldEnabled ? html`<div>${fieldEl}</div>` : nothing}\n      </div>\n    `;\n  }\n\n  #render = (): void => {\n    const fieldEnabled = CrUXManager.CrUXManager.instance().getConfigSetting().get().enabled;\n    const liveMetricsTitle =\n        fieldEnabled ? i18nString(UIStrings.localAndFieldMetrics) : i18nString(UIStrings.localMetrics);\n\n    // clang-format off\n    const output = html`\n      <div class=\"container\">\n        <div class=\"live-metrics-view\">\n          <main class=\"live-metrics\"\n          >\n            <h2 class=\"section-title\">${liveMetricsTitle}</h2>\n            <div class=\"metric-cards\"\n              on-render=${ComponentHelpers.Directives.nodeRenderedCallback(node => {\n                this.#tooltipContainerEl = node;\n              })}\n            >\n              <div id=\"lcp\">\n                ${this.#renderLcpCard()}\n              </div>\n              <div id=\"cls\">\n                ${this.#renderClsCard()}\n              </div>\n              <div id=\"inp\">\n                ${this.#renderInpCard()}\n              </div>\n            </div>\n            ${this.#renderDataDescriptions()}\n            ${this.#interactions.length > 0 ? html`\n              <section class=\"interactions-section\" aria-labelledby=\"interactions-section-title\">\n                <h2 id=\"interactions-section-title\" class=\"section-title\">${i18nString(UIStrings.interactions)}</h2>\n                <ol class=\"interactions-list\"\n                  on-render=${ComponentHelpers.Directives.nodeRenderedCallback(node => {\n                    this.#interactionsListEl = node as HTMLElement;\n                  })}\n                >\n                  ${this.#interactions.map(interaction => html`\n                    <li class=\"interaction\">\n                      <span class=\"interaction-type\">${interaction.interactionType}</span>\n                      <span class=\"interaction-node\">${\n                        interaction.node && until(Common.Linkifier.Linkifier.linkify(interaction.node))}</span>\n                      <span class=\"interaction-duration\">\n                        ${renderMetricValue(\n                          'timeline.landing.interaction-event-timing',\n                          interaction.duration, INP_THRESHOLDS, v => i18n.TimeUtilities.millisToString(v), {dim: true})}\n                      </span>\n                    </li>\n                  `)}\n                </ol>\n              </section>\n            ` : nothing}\n          </main>\n          <aside class=\"next-steps\" aria-labelledby=\"next-steps-section-title\">\n            <h2 id=\"next-steps-section-title\" class=\"section-title\">${i18nString(UIStrings.nextSteps)}</h2>\n            <div id=\"field-setup\" class=\"settings-card\">\n              <h3 class=\"card-title\">${i18nString(UIStrings.fieldData)}</h3>\n              ${this.#renderFieldDataMessage()}\n              ${this.#renderPageScopeSetting()}\n              ${this.#renderDeviceScopeSetting()}\n              <div class=\"field-setup-buttons\">\n                <${FieldSettingsDialog.litTagName}></${FieldSettingsDialog.litTagName}>\n              </div>\n            </div>\n            <div id=\"recording-settings\" class=\"settings-card\">\n              ${this.#renderRecordingSettings()}\n            </div>\n            <div id=\"record\" class=\"record-action-card\">\n              ${this.#renderRecordAction(this.#toggleRecordAction)}\n            </div>\n            <div id=\"record-page-load\" class=\"record-action-card\">\n              ${this.#renderRecordAction(this.#recordReloadAction)}\n            </div>\n          </aside>\n        </div>\n      </div>\n    `;\n    LitHtml.render(output, this.#shadow, {host: this});\n  };\n  // clang-format on\n}\n\ncustomElements.define('devtools-metric-card', MetricCard);\ncustomElements.define('devtools-live-metrics-view', LiveMetricsView);\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    'devtools-metric-card': MetricCard;\n    'devtools-live-metrics-view': LiveMetricsView;\n  }\n}\n"]}