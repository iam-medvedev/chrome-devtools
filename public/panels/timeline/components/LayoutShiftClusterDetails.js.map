{"version":3,"file":"LayoutShiftClusterDetails.js","sourceRoot":"","sources":["../../../../../../../front_end/panels/timeline/components/LayoutShiftClusterDetails.ts"],"names":[],"mappings":"AAAA,4DAA4D;AAC5D,yEAAyE;AACzE,6BAA6B;AAE7B,OAAO,KAAK,IAAI,MAAM,4BAA4B,CAAC;AACnD,OAAO,KAAK,OAAO,MAAM,0CAA0C,CAAC;AACpE,OAAO,KAAK,KAAK,MAAM,gCAAgC,CAAC;AACxD,OAAO,KAAK,OAAO,MAAM,kCAAkC,CAAC;AAE5D,OAAO,wBAAwB,MAAM,6BAA6B,CAAC;AAEnE,MAAM,SAAS,GAAG;IAChB;;OAEG;IACH,OAAO,EAAE,SAAS;IAClB;;OAEG;IACH,mBAAmB,EAAE,uBAAuB;IAC5C;;OAEG;IACH,kBAAkB,EAAE,sBAAsB;IAC1C;;OAEG;IACH,SAAS,EAAE,YAAY;IACvB;;OAEG;IACH,QAAQ,EAAE,UAAU;CACrB,CAAC;AAEF,MAAM,IAAI,GAAG,IAAI,CAAC,IAAI,CAAC,iBAAiB,CAAC,yDAAyD,EAAE,SAAS,CAAC,CAAC;AAC/G,MAAM,UAAU,GAAG,IAAI,CAAC,IAAI,CAAC,kBAAkB,CAAC,IAAI,CAAC,SAAS,EAAE,IAAI,CAAC,CAAC;AAEtE,MAAM,OAAO,yBAA0B,SAAQ,WAAW;IACxD,MAAM,CAAU,UAAU,GAAG,OAAO,CAAC,OAAO,CAAA,mDAAmD,CAAC;IACvF,OAAO,GAAG,IAAI,CAAC,YAAY,CAAC,EAAC,IAAI,EAAE,MAAM,EAAC,CAAC,CAAC;IAErD,QAAQ,CAAuD;IAC/D,YAAY,GAA0C,IAAI,CAAC;IAE3D,iBAAiB;QACf,IAAI,CAAC,OAAO,CAAC,kBAAkB,GAAG,CAAC,wBAAwB,CAAC,CAAC;QAC7D,IAAI,CAAC,OAAO,EAAE,CAAC;IACjB,CAAC;IAED,OAAO,CAAC,OAAuD,EAAE,WAAkD;QAEjH,IAAI,IAAI,CAAC,QAAQ,KAAK,OAAO,EAAE,CAAC;YAC9B,OAAO;QACT,CAAC;QACD,IAAI,CAAC,QAAQ,GAAG,OAAO,CAAC;QACxB,IAAI,CAAC,YAAY,GAAG,WAAW,CAAC;QAChC,IAAI,CAAC,OAAO,EAAE,CAAC;IACjB,CAAC;IAED,kBAAkB;QAChB,IAAI,CAAC,IAAI,CAAC,QAAQ,EAAE,CAAC;YACnB,OAAO,IAAI,CAAC;QACd,CAAC;QAED,mBAAmB;QACnB,OAAO,OAAO,CAAC,IAAI,CAAA;;uCAEgB,UAAU,CAAC,SAAS,CAAC,OAAO,CAAC;UAC1D,UAAU,CAAC,SAAS,CAAC,mBAAmB,CAAC;;KAE9C,CAAC;QACF,kBAAkB;IACpB,CAAC;IAED,YAAY;QACV,OAAO,OAAO,CAAC,IAAI,CAAA;;iDAE0B,UAAU,CAAC,SAAS,CAAC,kBAAkB,CAAC;KACpF,CAAC;IACJ,CAAC;IAED,cAAc,CACV,OAAuD,EACvD,WAA6C;QAC/C,MAAM,EAAE,GAAG,KAAK,CAAC,KAAK,CAAC,MAAM,CAAC,YAAY,CAAC,OAAO,CAAC,EAAE,GAAG,WAAW,CAAC,IAAI,CAAC,WAAW,CAAC,GAAG,CAAC,CAAC;QAC1F,MAAM,GAAG,GAAG,OAAO,CAAC,GAAG,IAAI,KAAK,CAAC,KAAK,CAAC,MAAM,CAAC,YAAY,CAAC,CAAC,CAAC,CAAC;QAE9D,mBAAmB;QACnB,OAAO,OAAO,CAAC,IAAI,CAAA;;0DAEmC,UAAU,CAAC,SAAS,CAAC,SAAS,CAAC,4BAA4B,IAAI,CAAC,aAAa,CAAC,qBAAqB,CAAC,OAAO,CAAC,MAAM,CAAC,0BAA0B,CAAC,EAAE,CAAC,CAAC;0DAClJ,UAAU,CAAC,SAAS,CAAC,QAAQ,CAAC,4BAA4B,IAAI,CAAC,aAAa,CAAC,qBAAqB,CAAC,OAAO,CAAC,MAAM,CAAC,0BAA0B,CAAC,GAAG,CAAC,CAAC;;KAEvM,CAAC;QACF,kBAAkB;IACpB,CAAC;IAED,OAAO;QACL,IAAI,CAAC,IAAI,CAAC,QAAQ,IAAI,CAAC,IAAI,CAAC,YAAY,EAAE,CAAC;YACzC,OAAO;QACT,CAAC;QACD,mBAAmB;QACnB,MAAM,MAAM,GAAG,OAAO,CAAC,IAAI,CAAA;;;YAGnB,IAAI,CAAC,YAAY,EAAE;YACnB,IAAI,CAAC,cAAc,CAAC,IAAI,CAAC,QAAQ,EAAE,IAAI,CAAC,YAAY,CAAC;;;YAGrD,IAAI,CAAC,kBAAkB,EAAE;;;KAGhC,CAAC;QACF,kBAAkB;QAClB,OAAO,CAAC,MAAM,CAAC,MAAM,EAAE,IAAI,CAAC,OAAO,EAAE,EAAC,IAAI,EAAE,IAAI,EAAC,CAAC,CAAC;IACrD,CAAC;;AASH,cAAc,CAAC,MAAM,CAAC,mDAAmD,EAAE,yBAAyB,CAAC,CAAC","sourcesContent":["// Copyright 2024 The Chromium Authors. All rights reserved.\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\n\nimport * as i18n from '../../../core/i18n/i18n.js';\nimport * as Helpers from '../../../models/trace/helpers/helpers.js';\nimport * as Trace from '../../../models/trace/trace.js';\nimport * as LitHtml from '../../../ui/lit-html/lit-html.js';\n\nimport layoutShiftDetailsStyles from './layoutShiftDetails.css.js';\n\nconst UIStrings = {\n  /**\n   * @description Text for a Layout shift cluster event indictating that it is an insight.\n   */\n  insight: 'Insight',\n  /**\n   * @description Title for a Layout shift cluster event.\n   */\n  layoutShiftCulprits: 'Layout shift culprits',\n  /**\n   * @description Text indicating a Layout shift cluster.\n   */\n  layoutShiftCluster: 'Layout shift cluster',\n  /**\n   * @description Text referring to the start time of a Layout shift cluster event.\n   */\n  startTime: 'Start time',\n  /**\n   * @description Text referring to the duration of the Layout shift cluster event.\n   */\n  duration: 'Duration',\n};\n\nconst str_ = i18n.i18n.registerUIStrings('panels/timeline/components/LayoutShiftClusterDetails.ts', UIStrings);\nconst i18nString = i18n.i18n.getLocalizedString.bind(undefined, str_);\n\nexport class LayoutShiftClusterDetails extends HTMLElement {\n  static readonly litTagName = LitHtml.literal`devtools-performance-layout-shift-cluster-details`;\n  readonly #shadow = this.attachShadow({mode: 'open'});\n\n  #cluster?: Trace.Types.Events.SyntheticLayoutShiftCluster|null;\n  #parsedTrace: Trace.Handlers.Types.ParsedTrace|null = null;\n\n  connectedCallback(): void {\n    this.#shadow.adoptedStyleSheets = [layoutShiftDetailsStyles];\n    this.#render();\n  }\n\n  setData(cluster: Trace.Types.Events.SyntheticLayoutShiftCluster, parsedTrace: Trace.Handlers.Types.ParsedTrace|null):\n      void {\n    if (this.#cluster === cluster) {\n      return;\n    }\n    this.#cluster = cluster;\n    this.#parsedTrace = parsedTrace;\n    this.#render();\n  }\n\n  #renderInsightChip(): LitHtml.TemplateResult|null {\n    if (!this.#cluster) {\n      return null;\n    }\n\n    // clang-format off\n    return LitHtml.html`\n      <div class=\"insight-chip\">\n        <div class=\"insight-keyword\">${i18nString(UIStrings.insight)}</div>\n        ${i18nString(UIStrings.layoutShiftCulprits)}\n      </div>\n    `;\n    // clang-format on\n  }\n\n  #renderTitle(): LitHtml.TemplateResult {\n    return LitHtml.html`\n      <div class=\"cluster-details-title\">\n        <div class=\"cluster-event-title\"></div>${i18nString(UIStrings.layoutShiftCluster)}</div>\n    `;\n  }\n\n  #renderDetails(\n      cluster: Trace.Types.Events.SyntheticLayoutShiftCluster,\n      parsedTrace: Trace.Handlers.Types.ParsedTrace): LitHtml.TemplateResult|null {\n    const ts = Trace.Types.Timing.MicroSeconds(cluster.ts - parsedTrace.Meta.traceBounds.min);\n    const dur = cluster.dur ?? Trace.Types.Timing.MicroSeconds(0);\n\n    // clang-format off\n    return LitHtml.html`\n        <div class=\"cluster-details\">\n            <div class=\"details-row\"><div class=\"title\">${i18nString(UIStrings.startTime)}</div><div class=\"value\">${i18n.TimeUtilities.preciseMillisToString(Helpers.Timing.microSecondsToMilliseconds(ts))}</div></div>\n            <div class=\"details-row\"><div class=\"title\">${i18nString(UIStrings.duration)}</div><div class=\"value\">${i18n.TimeUtilities.preciseMillisToString(Helpers.Timing.microSecondsToMilliseconds(dur))}</div></div>\n        </div>\n    `;\n    // clang-format on\n  }\n\n  #render(): void {\n    if (!this.#cluster || !this.#parsedTrace) {\n      return;\n    }\n    // clang-format off\n    const output = LitHtml.html`\n      <div class=\"layout-shift-cluster-summary-details\">\n      <div class=\"event-details\">\n          ${this.#renderTitle()}\n          ${this.#renderDetails(this.#cluster, this.#parsedTrace)}\n        </div>\n        <div class=\"insight-categories\">\n          ${this.#renderInsightChip()}\n        </div>\n      </div>\n    `;\n    // clang-format on\n    LitHtml.render(output, this.#shadow, {host: this});\n  }\n}\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    'devtools-performance-layout-shift-cluster-details': LayoutShiftClusterDetails;\n  }\n}\n\ncustomElements.define('devtools-performance-layout-shift-cluster-details', LayoutShiftClusterDetails);\n"]}