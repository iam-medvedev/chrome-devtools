{"version":3,"file":"CPUThrottlingSelector.test.js","sourceRoot":"","sources":["../../../../../../../front_end/panels/timeline/components/CPUThrottlingSelector.test.ts"],"names":[],"mappings":"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","sourcesContent":["// Copyright 2024 The Chromium Authors\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\n\nimport * as SDK from '../../../core/sdk/sdk.js';\nimport * as MobileThrottling from '../../../panels/mobile_throttling/mobile_throttling.js';\nimport {assertScreenshot, renderElementIntoDOM} from '../../../testing/DOMHelpers.js';\nimport {describeWithEnvironment} from '../../../testing/EnvironmentHelpers.js';\nimport {createViewFunctionStub} from '../../../testing/ViewFunctionHelpers.js';\nimport * as Menus from '../../../ui/components/menus/menus.js';\n\nimport * as Components from './components.js';\n\nconst {CPUThrottlingSelector, DEFAULT_VIEW} = Components.CPUThrottlingSelector;\n\nconst DEFAULT_INPUT: Parameters<typeof DEFAULT_VIEW>[0] = {\n  groups: [\n    {\n      name: 'first group',\n      items: [\n        SDK.CPUThrottlingManager.NoThrottlingOption, SDK.CPUThrottlingManager.MidTierThrottlingOption,\n        SDK.CPUThrottlingManager.LowTierThrottlingOption, SDK.CPUThrottlingManager.ExtraSlowThrottlingOption\n      ],\n    },\n    {\n      name: 'second group',\n      items: [\n        SDK.CPUThrottlingManager.CalibratedLowTierMobileThrottlingOption,\n        SDK.CPUThrottlingManager.CalibratedMidTierMobileThrottlingOption,\n      ],\n    }\n  ],\n  currentOption: SDK.CPUThrottlingManager.NoThrottlingOption,\n  recommendedOption: null,\n  throttling: {},\n  onMenuItemSelected: () => {},\n  onCalibrateClick: () => {},\n} as const;\n\ndescribeWithEnvironment('CPUThrottlingSelector view', () => {\n  it('renders all CPU throttling options', async () => {\n    const element = document.createElement('div');\n    renderElementIntoDOM(element);\n\n    DEFAULT_VIEW(DEFAULT_INPUT, undefined, element);\n\n    const menuItems = element.querySelectorAll('devtools-menu-item');\n\n    assert.lengthOf(menuItems, 6);\n\n    assert.strictEqual(menuItems[0].value, 1);\n    assert.isTrue(menuItems[0].selected);\n    assert.match(menuItems[0].innerText, /No throttling/);\n\n    assert.strictEqual(menuItems[1].value, 4);\n    assert.isFalse(menuItems[1].selected);\n    assert.match(menuItems[1].innerText, /4× slowdown/);\n\n    assert.strictEqual(menuItems[2].value, 6);\n    assert.isFalse(menuItems[2].selected);\n    assert.match(menuItems[2].innerText, /6× slowdown/);\n\n    assert.strictEqual(menuItems[3].value, 20);\n    assert.isFalse(menuItems[3].selected);\n    assert.match(menuItems[3].innerText, /20× slowdown/);\n\n    assert.strictEqual(menuItems[4].value, 'low-tier-mobile');\n    assert.isFalse(menuItems[4].selected);\n    assert.match(menuItems[4].innerText, /Low-tier mobile/);\n\n    assert.strictEqual(menuItems[5].value, 'mid-tier-mobile');\n    assert.isFalse(menuItems[5].selected);\n    assert.match(menuItems[5].innerText, /Mid-tier mobile/);\n  });\n\n  it('marks current option as selected', async () => {\n    const element = document.createElement('div');\n    renderElementIntoDOM(element);\n\n    DEFAULT_VIEW(\n        {...DEFAULT_INPUT, currentOption: SDK.CPUThrottlingManager.MidTierThrottlingOption}, undefined, element);\n\n    const menuItems = element.querySelectorAll('devtools-menu-item');\n\n    assert.strictEqual(menuItems[0].value, 1);\n    assert.isFalse(menuItems[0].selected);\n\n    assert.strictEqual(menuItems[1].value, 4);\n    assert.isTrue(menuItems[1].selected);\n\n    assert.strictEqual(menuItems[2].value, 6);\n    assert.isFalse(menuItems[2].selected);\n  });\n\n  it('renders recommended option if present', async () => {\n    const element = document.createElement('div');\n    renderElementIntoDOM(element);\n\n    DEFAULT_VIEW(\n        {...DEFAULT_INPUT, recommendedOption: SDK.CPUThrottlingManager.MidTierThrottlingOption}, undefined, element);\n\n    const menuItems = element.querySelectorAll('devtools-menu-item');\n\n    assert.strictEqual(menuItems[0].value, 1);\n    assert.isTrue(menuItems[0].selected);\n    assert.notMatch(menuItems[0].innerText, /recommended/);\n\n    assert.strictEqual(menuItems[1].value, 4);\n    assert.isFalse(menuItems[1].selected);\n    assert.match(menuItems[1].innerText, /recommended/);\n\n    assert.strictEqual(menuItems[2].value, 6);\n    assert.isFalse(menuItems[2].selected);\n    assert.notMatch(menuItems[2].innerText, /recommended/);\n\n    assert.strictEqual(menuItems[3].value, 20);\n    assert.isFalse(menuItems[3].selected);\n    assert.notMatch(menuItems[3].innerText, /recommended/);\n  });\n\n  function testCalibrationItem(throttling: SDK.CPUThrottlingManager.CalibratedCPUThrottling, expectedPattern: RegExp) {\n    const element = document.createElement('div');\n    const onCalibrateClick = sinon.spy();\n    renderElementIntoDOM(element);\n\n    DEFAULT_VIEW(\n        {\n          recommendedOption: null,\n          currentOption: SDK.CPUThrottlingManager.NoThrottlingOption,\n          groups: [\n            {\n              name: 'first group',\n              items: [SDK.CPUThrottlingManager.NoThrottlingOption],\n            },\n            {\n              name: 'Calibrated presets',\n              items: [\n                SDK.CPUThrottlingManager.CalibratedLowTierMobileThrottlingOption,\n                SDK.CPUThrottlingManager.CalibratedMidTierMobileThrottlingOption,\n              ],\n            },\n            {\n              name: 'last group',\n              items: [SDK.CPUThrottlingManager.MidTierThrottlingOption],\n            }\n          ],\n          throttling,\n          onMenuItemSelected: () => {},\n          onCalibrateClick\n        },\n        undefined, element);\n\n    const menuItems = element.querySelectorAll('devtools-menu-item');\n    assert.lengthOf(menuItems, 5);\n    const calibrateMenuItem = menuItems[3];\n\n    assert.strictEqual(calibrateMenuItem.value, -1);\n    assert.isFalse(calibrateMenuItem.selected);\n    assert.match(calibrateMenuItem.innerText, expectedPattern);\n\n    calibrateMenuItem.click();\n    sinon.assert.calledOnce(onCalibrateClick);\n  }\n\n  it('renders calibration item after calibrated presets', async () => {\n    testCalibrationItem({}, /Calibrate/);\n  });\n\n  it('uses recalibrate wording when throttling is present', async () => {\n    testCalibrationItem({low: 4, mid: 6}, /Recalibrate/);\n  });\n\n  const containerCss = `\n      box-sizing: border-box;\n      background-color: aqua;\n    `;\n\n  it('renders hint correctly', async () => {\n    const container = document.createElement('div');\n    container.style.cssText = containerCss;\n    renderElementIntoDOM(container);\n    DEFAULT_VIEW(\n        {...DEFAULT_INPUT, recommendedOption: SDK.CPUThrottlingManager.LowTierThrottlingOption},\n        undefined,\n        container,\n    );\n\n    await assertScreenshot('timeline/cpu_throttling_selector_recommendation.png');\n  });\n});\n\ndescribeWithEnvironment('CPUThrottlingSelector', () => {\n  let cpuThrottlingManager: SDK.CPUThrottlingManager.CPUThrottlingManager;\n\n  async function createWidget(recommendedOption: SDK.CPUThrottlingManager.CPUThrottlingOption|null = null) {\n    const view = createViewFunctionStub(CPUThrottlingSelector);\n    const widget = new CPUThrottlingSelector(undefined, view);\n    widget.markAsRoot();\n    renderElementIntoDOM(widget);\n    widget.recommendedOption = recommendedOption;\n    await view.nextInput;\n    return {view, widget};\n  }\n\n  beforeEach(() => {\n    cpuThrottlingManager = SDK.CPUThrottlingManager.CPUThrottlingManager.instance({forceNew: true});\n    MobileThrottling.ThrottlingManager.ThrottlingManager.instance({forceNew: true});\n  });\n\n  describe('updates CPU throttling manager on change', () => {\n    let setOptionSpy: sinon.SinonSpy;\n\n    beforeEach(() => {\n      setOptionSpy = sinon.spy(cpuThrottlingManager, 'setCPUThrottlingOption');\n    });\n\n    it('with preset option', async () => {\n      const {view} = await createWidget();\n\n      view.input.onMenuItemSelected(new Menus.SelectMenu.SelectMenuItemSelectedEvent(4));\n\n      sinon.assert.calledOnceWithExactly(setOptionSpy, SDK.CPUThrottlingManager.MidTierThrottlingOption);\n    });\n\n    it('with calibrated option', async () => {\n      const {view} = await createWidget();\n\n      view.input.onMenuItemSelected(new Menus.SelectMenu.SelectMenuItemSelectedEvent('low-tier-mobile'));\n\n      sinon.assert.calledOnceWithExactly(\n          setOptionSpy, SDK.CPUThrottlingManager.CalibratedLowTierMobileThrottlingOption);\n    });\n  });\n\n  it('reacts to changes in CPU throttling manager', async () => {\n    cpuThrottlingManager.setCPUThrottlingOption(SDK.CPUThrottlingManager.NoThrottlingOption);\n    const {view} = await createWidget();\n\n    assert.strictEqual(view.input.currentOption, SDK.CPUThrottlingManager.NoThrottlingOption);\n\n    cpuThrottlingManager.setCPUThrottlingOption(SDK.CPUThrottlingManager.LowTierThrottlingOption);\n    await view.nextInput;\n\n    assert.strictEqual(view.input.currentOption, SDK.CPUThrottlingManager.LowTierThrottlingOption);\n  });\n\n  it('reacts to changes in CPU throttling manager when it is unmounted and then remounted', async () => {\n    // Change the conditions before the component is put into the DOM.\n    cpuThrottlingManager.setCPUThrottlingOption(SDK.CPUThrottlingManager.LowTierThrottlingOption);\n    const {view} = await createWidget();\n\n    // Ensure that the component picks up the new changes and has selected the right throttling setting\n    assert.strictEqual(view.input.currentOption, SDK.CPUThrottlingManager.LowTierThrottlingOption);\n  });\n});\n"]}