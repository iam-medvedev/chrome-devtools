{"version":3,"file":"LayoutShiftDetails.js","sourceRoot":"","sources":["../../../../../../../front_end/panels/timeline/components/LayoutShiftDetails.ts"],"names":[],"mappings":"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","sourcesContent":["// Copyright 2024 The Chromium Authors. All rights reserved.\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\n\nimport * as i18n from '../../../core/i18n/i18n.js';\nimport type * as Platform from '../../../core/platform/platform.js';\nimport * as SDK from '../../../core/sdk/sdk.js';\nimport type * as Protocol from '../../../generated/protocol.js';\nimport * as Helpers from '../../../models/trace/helpers/helpers.js';\nimport * as Trace from '../../../models/trace/trace.js';\nimport * as Buttons from '../../../ui/components/buttons/buttons.js';\nimport * as LegacyComponents from '../../../ui/legacy/components/utils/utils.js';\nimport * as Lit from '../../../ui/lit/lit.js';\nimport * as Utils from '../utils/utils.js';\n\nimport * as Insights from './insights/insights.js';\nimport layoutShiftDetailsStylesRaw from './layoutShiftDetails.css.js';\n\n// TODO(crbug.com/391381439): Fully migrate off of constructed style sheets.\nconst layoutShiftDetailsStyles = new CSSStyleSheet();\nlayoutShiftDetailsStyles.replaceSync(layoutShiftDetailsStylesRaw.cssContent);\nconst textButtonStyles = new CSSStyleSheet();\ntextButtonStyles.replaceSync(Buttons.textButtonStyles.cssContent);\n\nconst {html} = Lit;\n\nconst MAX_URL_LENGTH = 20;\n\nconst UIStrings = {\n  /**\n   * @description Text referring to the start time of a given event.\n   */\n  startTime: 'Start time',\n  /**\n   * @description Text for a table header referring to the score of a Layout Shift event.\n   */\n  shiftScore: 'Shift score',\n  /**\n   * @description Text for a table header referring to the elements shifted for a Layout Shift event.\n   */\n  elementsShifted: 'Elements shifted',\n  /**\n   * @description Text for a table header referring to the culprit of a Layout Shift event.\n   */\n  culprit: 'Culprit',\n  /**\n   * @description Text for a culprit type of Injected iframe.\n   */\n  injectedIframe: 'Injected iframe',\n  /**\n   * @description Text for a culprit type of Font request.\n   */\n  fontRequest: 'Font request',\n  /**\n   * @description Text for a culprit type of non-composited animation.\n   */\n  nonCompositedAnimation: 'Non-composited animation',\n  /**\n   * @description Text referring to an animation.\n   */\n  animation: 'Animation',\n  /**\n   * @description Text referring to a parent cluster.\n   */\n  parentCluster: 'Parent cluster',\n  /**\n   * @description Text referring to a layout shift cluster and its start time.\n   * @example {32 ms} PH1\n   */\n  cluster: 'Layout shift cluster @ {PH1}',\n  /**\n   * @description Text referring to a layout shift and its start time.\n   * @example {32 ms} PH1\n   */\n  layoutShift: 'Layout shift @ {PH1}',\n  /**\n   * @description Text referring to the total cumulative score of a layout shift cluster.\n   */\n  total: 'Total',\n  /**\n   * @description Text for a culprit type of Unsized image.\n   */\n  unsizedImage: 'Unsized image',\n} as const;\n\nconst str_ = i18n.i18n.registerUIStrings('panels/timeline/components/LayoutShiftDetails.ts', UIStrings);\nconst i18nString = i18n.i18n.getLocalizedString.bind(undefined, str_);\n\nexport class LayoutShiftDetails extends HTMLElement {\n  readonly #shadow = this.attachShadow({mode: 'open'});\n\n  #event: Trace.Types.Events.SyntheticLayoutShift|Trace.Types.Events.SyntheticLayoutShiftCluster|null = null;\n  #traceInsightsSets: Trace.Insights.Types.TraceInsightSets|null = null;\n  #parsedTrace: Trace.Handlers.Types.ParsedTrace|null = null;\n  #isFreshRecording = false;\n\n  connectedCallback(): void {\n    this.#shadow.adoptedStyleSheets = [\n      layoutShiftDetailsStyles,\n      // Styles for linkifier button.\n      textButtonStyles,\n    ];\n    this.#render();\n  }\n\n  setData(\n      event: Trace.Types.Events.SyntheticLayoutShift|Trace.Types.Events.SyntheticLayoutShiftCluster,\n      traceInsightsSets: Trace.Insights.Types.TraceInsightSets|null, parsedTrace: Trace.Handlers.Types.ParsedTrace|null,\n      isFreshRecording: boolean): void {\n    if (this.#event === event) {\n      return;\n    }\n    this.#event = event;\n    this.#traceInsightsSets = traceInsightsSets;\n    this.#parsedTrace = parsedTrace;\n    this.#isFreshRecording = isFreshRecording;\n    this.#render();\n  }\n\n  #renderTitle(event: Trace.Types.Events.SyntheticLayoutShift|\n               Trace.Types.Events.SyntheticLayoutShiftCluster): Lit.TemplateResult {\n    const title = Utils.EntryName.nameForEntry(event);\n    return html`\n      <div class=\"layout-shift-details-title\">\n        <div class=\"layout-shift-event-title\"></div>\n        ${title}\n      </div>\n    `;\n  }\n\n  #renderShiftedElements(\n      shift: Trace.Types.Events.SyntheticLayoutShift,\n      elementsShifted: Trace.Types.Events.TraceImpactedNode[]|undefined): Lit.LitTemplate {\n    // clang-format off\n    return html`\n      ${elementsShifted?.map(el => {\n        if (el.node_id !== undefined) {\n          return html`\n            <devtools-performance-node-link\n              .data=${{\n                backendNodeId: el.node_id,\n                frame: shift.args.frame,\n                // TODO(crbug.com/371620361): if ever rendered for non-fresh traces, this needs to set a fallback text value.\n              } as Insights.NodeLink.NodeLinkData}>\n            </devtools-performance-node-link>`;\n        }\n          return Lit.nothing;\n      })}`;\n    // clang-format on\n  }\n\n  #renderIframe(iframeId: string): Lit.TemplateResult|null {\n    const domLoadingId = iframeId as Protocol.Page.FrameId;\n    if (!domLoadingId) {\n      return null;\n    }\n\n    const domLoadingFrame = SDK.FrameManager.FrameManager.instance().getFrame(domLoadingId);\n    if (!domLoadingFrame) {\n      return null;\n    }\n    const el = LegacyComponents.Linkifier.Linkifier.linkifyRevealable(domLoadingFrame, domLoadingFrame.displayName());\n    // clang-format off\n    return html`\n    <span class=\"culprit\"><span class=\"culprit-type\">${i18nString(UIStrings.injectedIframe)}: </span><span class=\"culprit-value\">${el}</span></span>`;\n    // clang-format on\n  }\n\n  #renderFontRequest(request: Trace.Types.Events.SyntheticNetworkRequest): Lit.TemplateResult|null {\n    const options = {\n      tabStop: true,\n      showColumnNumber: false,\n      inlineFrameIndex: 0,\n      maxLength: MAX_URL_LENGTH,\n    };\n\n    const linkifiedURL = LegacyComponents.Linkifier.Linkifier.linkifyURL(\n        request.args.data.url as Platform.DevToolsPath.UrlString, options);\n\n    // clang-format off\n    return html`\n    <span class=\"culprit\"><span class=\"culprit-type\">${i18nString(UIStrings.fontRequest)}: </span><span class=\"culprit-value\">${linkifiedURL}</span></span>`;\n    // clang-format on\n  }\n\n  // TODO(crbug.com/368170718): use eventRef instead\n  #clickEvent(event: Trace.Types.Events.Event): void {\n    this.dispatchEvent(new Insights.EventRef.EventReferenceClick(event));\n  }\n\n  #renderAnimation(failure: Trace.Insights.Models.CLSCulprits.NoncompositedAnimationFailure): Lit.TemplateResult|null {\n    const event = failure.animation;\n    if (!event) {\n      return null;\n    }\n    // clang-format off\n    return html`\n        <span class=\"culprit\">\n        <span class=\"culprit-type\">${i18nString(UIStrings.nonCompositedAnimation)}: </span>\n        <button type=\"button\" class=\"culprit-value timeline-link\" @click=${() => this.#clickEvent(event)}>${i18nString(UIStrings.animation)}</button>\n      </span>`;\n    // clang-format on\n  }\n\n  #renderUnsizedImage(frame: string, backendNodeId: Protocol.DOM.BackendNodeId): Lit.TemplateResult|null {\n    // clang-format off\n    const el = html`\n      <devtools-performance-node-link\n        .data=${{\n          backendNodeId,\n          frame,\n          // TODO(crbug.com/371620361): if ever rendered for non-fresh traces, this needs to set a fallback text value. This requires\n          // `rootCauses.unsizedImages` to have more than just the backend node id.\n        } as Insights.NodeLink.NodeLinkData}>\n      </devtools-performance-node-link>`;\n    return html`\n    <span class=\"culprit\"><span class=\"culprit-type\">${i18nString(UIStrings.unsizedImage)}: </span><span class=\"culprit-value\">${el}</span></span>`;\n    // clang-format on\n  }\n\n  #renderRootCauseValues(\n      frame: string,\n      rootCauses: Trace.Insights.Models.CLSCulprits.LayoutShiftRootCausesData|undefined): Lit.TemplateResult|null {\n    return html`\n      ${rootCauses?.fontRequests.map(fontReq => this.#renderFontRequest(fontReq))}\n      ${rootCauses?.iframeIds.map(iframe => this.#renderIframe(iframe))}\n      ${rootCauses?.nonCompositedAnimations.map(failure => this.#renderAnimation(failure))}\n      ${rootCauses?.unsizedImages.map(backendNodeId => this.#renderUnsizedImage(frame, backendNodeId))}\n    `;\n  }\n\n  #renderStartTime(shift: Trace.Types.Events.SyntheticLayoutShift, parsedTrace: Trace.Handlers.Types.ParsedTrace):\n      Lit.TemplateResult|null {\n    const ts = Trace.Types.Timing.Micro(shift.ts - parsedTrace.Meta.traceBounds.min);\n    if (shift === this.#event) {\n      return html`${i18n.TimeUtilities.preciseMillisToString(Helpers.Timing.microToMilli(ts))}`;\n    }\n    const shiftTs = i18n.TimeUtilities.formatMicroSecondsTime(ts);\n    // clang-format off\n    return html`\n         <button type=\"button\" class=\"timeline-link\" @click=${() => this.#clickEvent(shift)}>${i18nString(UIStrings.layoutShift, {PH1: shiftTs})}</button>`;\n    // clang-format on\n  }\n\n  #renderShiftRow(\n      shift: Trace.Types.Events.SyntheticLayoutShift, parsedTrace: Trace.Handlers.Types.ParsedTrace,\n      elementsShifted: Trace.Types.Events.TraceImpactedNode[],\n      rootCauses: Trace.Insights.Models.CLSCulprits.LayoutShiftRootCausesData|undefined): Lit.TemplateResult|null {\n    const score = shift.args.data?.weighted_score_delta;\n    if (!score) {\n      return null;\n    }\n    const hasCulprits = Boolean(\n        rootCauses &&\n        (rootCauses.fontRequests.length || rootCauses.iframeIds.length || rootCauses.nonCompositedAnimations.length ||\n         rootCauses.unsizedImages.length));\n\n    // TODO(crbug.com/371620361): Needs to show something for non-fresh recordings.\n\n    // clang-format off\n    return html`\n      <tr class=\"shift-row\" data-ts=${shift.ts}>\n        <td>${this.#renderStartTime(shift, parsedTrace)}</td>\n        <td>${(score.toFixed(4))}</td>\n        ${this.#isFreshRecording ? html`\n          <td>\n            <div class=\"elements-shifted\">\n              ${this.#renderShiftedElements(shift, elementsShifted)}\n            </div>\n          </td>` : Lit.nothing}\n        ${hasCulprits && this.#isFreshRecording ? html`\n          <td class=\"culprits\">\n            ${this.#renderRootCauseValues(shift.args.frame, rootCauses)}\n          </td>` : Lit.nothing}\n      </tr>`;\n    // clang-format on\n  }\n\n  #renderParentCluster(\n      cluster: Trace.Types.Events.SyntheticLayoutShiftCluster|undefined,\n      parsedTrace: Trace.Handlers.Types.ParsedTrace): Lit.TemplateResult|null {\n    if (!cluster) {\n      return null;\n    }\n    const ts = Trace.Types.Timing.Micro(cluster.ts - (parsedTrace?.Meta.traceBounds.min ?? 0));\n    const clusterTs = i18n.TimeUtilities.formatMicroSecondsTime(ts);\n\n    // clang-format off\n    return html`\n      <span class=\"parent-cluster\">${i18nString(UIStrings.parentCluster)}:\n         <button type=\"button\" class=\"timeline-link\" @click=${() => this.#clickEvent(cluster)}>${i18nString(UIStrings.cluster, {PH1: clusterTs})}</button>\n      </span>`;\n    // clang-format on\n  }\n\n  #renderClusterTotalRow(cluster: Trace.Types.Events.SyntheticLayoutShiftCluster): Lit.TemplateResult|null {\n    // clang-format off\n    return html`\n      <td class=\"total-row\">${i18nString(UIStrings.total)}</td>\n      <td class=\"total-row\">${(cluster.clusterCumulativeScore.toFixed(4))}</td>`;\n    // clang-format on\n  }\n\n  #renderShiftDetails(\n      layoutShift: Trace.Types.Events.SyntheticLayoutShift,\n      traceInsightsSets: Trace.Insights.Types.TraceInsightSets|null,\n      parsedTrace: Trace.Handlers.Types.ParsedTrace,\n      ): Lit.TemplateResult|null {\n    if (!traceInsightsSets) {\n      return null;\n    }\n    const insightsId = layoutShift.args.data?.navigationId ?? Trace.Types.Events.NO_NAVIGATION;\n    const clsInsight = traceInsightsSets.get(insightsId)?.model.CLSCulprits;\n    if (!clsInsight || clsInsight instanceof Error) {\n      return null;\n    }\n\n    const rootCauses = clsInsight.shifts.get(layoutShift);\n    const elementsShifted = layoutShift.args.data?.impacted_nodes ?? [];\n    const hasCulprits = rootCauses &&\n        (rootCauses.fontRequests.length || rootCauses.iframeIds.length || rootCauses.nonCompositedAnimations.length ||\n         rootCauses.unsizedImages.length);\n    const hasShiftedElements = elementsShifted?.length;\n\n    const parentCluster = clsInsight.clusters.find(cluster => {\n      return cluster.events.find(event => event === layoutShift);\n    });\n\n    // clang-format off\n    return html`\n      <table class=\"layout-shift-details-table\">\n        <thead class=\"table-title\">\n          <tr>\n            <th>${i18nString(UIStrings.startTime)}</th>\n            <th>${i18nString(UIStrings.shiftScore)}</th>\n            ${hasShiftedElements && this.#isFreshRecording ? html`\n              <th>${i18nString(UIStrings.elementsShifted)}</th>` : Lit.nothing}\n            ${hasCulprits && this.#isFreshRecording ? html`\n              <th>${i18nString(UIStrings.culprit)}</th> ` : Lit.nothing}\n          </tr>\n        </thead>\n        <tbody>\n          ${this.#renderShiftRow(layoutShift, parsedTrace, elementsShifted, rootCauses)}\n        </tbody>\n      </table>\n      ${this.#renderParentCluster(parentCluster, parsedTrace)}\n    `;\n    // clang-format on\n  }\n\n  #renderClusterDetails(\n      cluster: Trace.Types.Events.SyntheticLayoutShiftCluster,\n      traceInsightsSets: Trace.Insights.Types.TraceInsightSets|null,\n      parsedTrace: Trace.Handlers.Types.ParsedTrace): Lit.TemplateResult|null {\n    if (!traceInsightsSets) {\n      return null;\n    }\n    const insightsId = cluster.navigationId ?? Trace.Types.Events.NO_NAVIGATION;\n    const clsInsight = traceInsightsSets.get(insightsId)?.model.CLSCulprits;\n    if (!clsInsight || clsInsight instanceof Error) {\n      return null;\n    }\n\n    // This finds the culprits of the cluster and returns an array of the culprits.\n    const clusterCulprits = Array.from(clsInsight.shifts.entries())\n                                .filter(([key]) => cluster.events.includes(key))\n                                .map(([, value]) => value)\n                                .flatMap(x => Object.values(x))\n                                .flat();\n\n    const hasCulprits = Boolean(clusterCulprits.length);\n\n    // clang-format off\n        return html`\n          <table class=\"layout-shift-details-table\">\n            <thead class=\"table-title\">\n              <tr>\n                <th>${i18nString(UIStrings.startTime)}</th>\n                <th>${i18nString(UIStrings.shiftScore)}</th>\n                ${this.#isFreshRecording ? html`\n                  <th>${i18nString(UIStrings.elementsShifted)}</th>` : Lit.nothing}\n                ${hasCulprits && this.#isFreshRecording ? html`\n                  <th>${i18nString(UIStrings.culprit)}</th> ` : Lit.nothing}\n              </tr>\n            </thead>\n            <tbody>\n              ${cluster.events.map(shift => {\n                const rootCauses = clsInsight.shifts.get(shift);\n                const elementsShifted = shift.args.data?.impacted_nodes ?? [];\n                return this.#renderShiftRow(shift, parsedTrace, elementsShifted, rootCauses);\n              })}\n              ${this.#renderClusterTotalRow(cluster)}\n            </tbody>\n          </table>\n        `;\n    // clang-format on\n  }\n\n  #render(): void {\n    if (!this.#event || !this.#parsedTrace) {\n      return;\n    }\n\n    // clang-format off\n    const output = html`\n      <div class=\"layout-shift-summary-details\">\n        <div\n          class=\"event-details\"\n          @mouseover=${this.#togglePopover}\n          @mouseleave=${this.#togglePopover}\n        >\n          ${this.#renderTitle(this.#event)}\n          ${Trace.Types.Events.isSyntheticLayoutShift(this.#event)\n            ? this.#renderShiftDetails(this.#event, this.#traceInsightsSets, this.#parsedTrace)\n            : this.#renderClusterDetails(this.#event, this.#traceInsightsSets, this.#parsedTrace)\n          }\n        </div>\n      </div>\n    `;\n    // clang-format on\n    Lit.render(output, this.#shadow, {host: this});\n  }\n\n  #togglePopover(e: MouseEvent): void {\n    const show = e.type === 'mouseover';\n    if (e.type === 'mouseleave') {\n      this.dispatchEvent(new CustomEvent('toggle-popover', {detail: {show}, bubbles: true, composed: true}));\n    }\n\n    if (!(e.target instanceof HTMLElement) || !this.#event) {\n      return;\n    }\n    const rowEl = e.target.closest('tbody tr');\n    if (!rowEl?.parentElement) {\n      return;\n    }\n\n    // Grab the associated trace event of this row.\n    const event = Trace.Types.Events.isSyntheticLayoutShift(this.#event) ?\n        this.#event :\n        this.#event.events.find(e => e.ts === parseInt(rowEl.getAttribute('data-ts') ?? '', 10));\n    this.dispatchEvent(new CustomEvent('toggle-popover', {detail: {event, show}, bubbles: true, composed: true}));\n  }\n}\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    'devtools-performance-layout-shift-details': LayoutShiftDetails;\n  }\n}\n\ncustomElements.define('devtools-performance-layout-shift-details', LayoutShiftDetails);\n"]}