{"version":3,"file":"OriginMap.test.js","sourceRoot":"","sources":["../../../../../../../front_end/panels/timeline/components/OriginMap.test.ts"],"names":[],"mappings":"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","sourcesContent":["// Copyright 2024 The Chromium Authors. All rights reserved.\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\n\nimport * as SDK from '../../../core/sdk/sdk.js';\nimport * as CrUXManager from '../../../models/crux-manager/crux-manager.js';\nimport {renderElementIntoDOM} from '../../../testing/DOMHelpers.js';\nimport {describeWithMockConnection} from '../../../testing/MockConnection.js';\nimport * as RenderCoordinator from '../../../ui/components/render_coordinator/render_coordinator.js';\nimport * as UI from '../../../ui/legacy/legacy.js';\n\nimport * as Components from './components.js';\n\nfunction getOriginMappings(view: Element): Array<[string, string, string?]> {\n  const rows = view.querySelector('.vbox')!.shadowRoot!.querySelectorAll('.origin-mapping-row:not(.header)');\n  return Array.from(rows).map(row => {\n    const warning = row.querySelector<HTMLElement>('.origin-warning-icon');\n    return [\n      row.querySelector('.development-origin .origin')!.textContent || '',\n      row.querySelector('.production-origin .origin')!.textContent || '',\n      warning?.title,\n    ];\n  });\n}\n\nfunction getDevInput(view: Element): HTMLInputElement|null {\n  return view.querySelector('.vbox')!.shadowRoot!.querySelector('.development-origin-input input');\n}\n\nfunction getProdInput(view: Element): HTMLInputElement|null {\n  return view.querySelector('.vbox')!.shadowRoot!.querySelector('.production-origin-input input');\n}\n\nfunction getConfirmButton(view: Element): HTMLElementTagNameMap['devtools-button']|null {\n  const buttons = view.querySelector('.vbox')!.shadowRoot!.querySelectorAll('devtools-button');\n  return Array.from(buttons).find(b => b.textContent === 'Add') || null;\n}\n\nfunction getCancelButton(view: Element): HTMLElementTagNameMap['devtools-button']|null {\n  const buttons = view.querySelector('.vbox')!.shadowRoot!.querySelectorAll('devtools-button');\n  return Array.from(buttons).find(b => b.textContent === 'Cancel') || null;\n}\n\nfunction getValidationErrors(view: Element): string {\n  const errors =\n      view.querySelector('.vbox')!.shadowRoot!.querySelector<HTMLElement>('.list-widget-input-validation-error');\n  return errors?.innerText || '';\n}\n\nfunction mockResponse(): CrUXManager.CrUXResponse {\n  return {\n    record: {\n      key: {},\n      metrics: {\n        largest_contentful_paint: {\n          histogram: [\n            {start: 0, end: 2500, density: 0.5},\n            {start: 2500, end: 4000, density: 0.3},\n            {start: 4000, density: 0.2},\n          ],\n          percentiles: {p75: 1000},\n        },\n        cumulative_layout_shift: {\n          histogram: [\n            {start: 0, end: 0.1, density: 0.1},\n            {start: 0.1, end: 0.25, density: 0.1},\n            {start: 0.25, density: 0.8},\n          ],\n          percentiles: {p75: 0.25},\n        },\n      },\n      collectionPeriod: {\n        firstDate: {year: 2024, month: 1, day: 1},\n        lastDate: {year: 2024, month: 1, day: 29},\n      },\n    },\n  };\n}\n\nfunction createOriginMap(): Components.OriginMap.OriginMap {\n  const root = document.createElement('div');\n  renderElementIntoDOM(root);\n\n  const widget = new UI.Widget.Widget();\n  widget.markAsRoot();\n  widget.show(root);\n\n  const view = new Components.OriginMap.OriginMap();\n  widget.contentElement.append(view);\n\n  return view;\n}\n\ndescribeWithMockConnection('OriginMap', () => {\n  let cruxManager: CrUXManager.CrUXManager;\n  let targetManager: SDK.TargetManager.TargetManager;\n  let mockFieldData: CrUXManager.PageResult;\n  let getFieldDataStub: sinon.SinonStub;\n  let mockInspectedURL: sinon.SinonStub;\n\n  beforeEach(async () => {\n    cruxManager = CrUXManager.CrUXManager.instance({forceNew: true});\n    targetManager = SDK.TargetManager.TargetManager.instance({forceNew: true});\n    getFieldDataStub = sinon.stub(cruxManager, 'getFieldDataForPage').callsFake(async () => mockFieldData);\n    mockInspectedURL = sinon.stub(targetManager, 'inspectedURL').returns('http://localhost:8080');\n\n    mockFieldData = {\n      'origin-ALL': mockResponse(),\n      'origin-DESKTOP': null,\n      'origin-PHONE': null,\n      'origin-TABLET': null,\n      'url-ALL': null,\n      'url-DESKTOP': null,\n      'url-PHONE': null,\n      'url-TABLET': null,\n      warnings: [],\n    };\n\n    cruxManager.getConfigSetting().set({enabled: true, override: ''});\n  });\n\n  afterEach(async () => {\n    getFieldDataStub.restore();\n    mockInspectedURL.restore();\n  });\n\n  it('should show mappings from setting', async () => {\n    cruxManager.getConfigSetting().set({\n      enabled: true,\n      override: '',\n      originMappings: [\n        {developmentOrigin: 'http://localhost:8080', productionOrigin: 'https://example.com'},\n      ],\n    });\n    const view = createOriginMap();\n    await RenderCoordinator.done();\n\n    const mappings = getOriginMappings(view);\n    assert.deepEqual(mappings, [\n      ['http://localhost:8080', 'https://example.com', undefined],\n    ]);\n  });\n\n  it('should show warning if there is no field data', async () => {\n    mockFieldData['origin-ALL'] = null;\n    cruxManager.getConfigSetting().set({\n      enabled: true,\n      override: '',\n      originMappings: [\n        {developmentOrigin: 'http://localhost:8080', productionOrigin: 'https://no-data.com'},\n      ],\n    });\n    const view = createOriginMap();\n    await RenderCoordinator.done();\n\n    const mappings = getOriginMappings(view);\n    assert.deepEqual(mappings, [\n      [\n        'http://localhost:8080',\n        'https://no-data.com',\n        'The Chrome UX Report does not have sufficient real user data for this page.',\n      ],\n    ]);\n  });\n\n  it('should not show warning if field is disabled', async () => {\n    mockFieldData['origin-ALL'] = null;\n    cruxManager.getConfigSetting().set({\n      enabled: false,\n      override: '',\n      originMappings: [\n        {developmentOrigin: 'http://localhost:8080', productionOrigin: 'https://no-data.com'},\n      ],\n    });\n    const view = createOriginMap();\n    await RenderCoordinator.done();\n\n    const mappings = getOriginMappings(view);\n    assert.deepEqual(mappings, [\n      ['http://localhost:8080', 'https://no-data.com', undefined],\n    ]);\n  });\n\n  it('should react to setting changes', async () => {\n    cruxManager.getConfigSetting().set({\n      enabled: true,\n      override: '',\n      originMappings: [\n        {developmentOrigin: 'http://localhost:8080', productionOrigin: 'https://example.com'},\n      ],\n    });\n    const view = createOriginMap();\n    await RenderCoordinator.done();\n\n    {\n      const mappings = getOriginMappings(view);\n      assert.deepEqual(mappings, [\n        ['http://localhost:8080', 'https://example.com', undefined],\n      ]);\n    }\n\n    cruxManager.getConfigSetting().set({\n      enabled: true,\n      override: '',\n      originMappings: [\n        {developmentOrigin: 'http://localhost:8080', productionOrigin: 'https://example.com'},\n        {developmentOrigin: 'http://localhost:8081', productionOrigin: 'https://example2.com'},\n      ],\n    });\n    await RenderCoordinator.done();\n\n    {\n      const mappings = getOriginMappings(view);\n      assert.deepEqual(mappings, [\n        ['http://localhost:8080', 'https://example.com', undefined],\n        ['http://localhost:8081', 'https://example2.com', undefined],\n      ]);\n    }\n  });\n\n  it('should pre-fill new mapping fields', async () => {\n    const originMap = createOriginMap();\n    originMap.startCreation();\n    await RenderCoordinator.done();\n\n    const devInput = getDevInput(originMap)!;\n    assert.strictEqual(devInput.value, 'http://localhost:8080');\n\n    const prodInput = getProdInput(originMap)!;\n    assert.strictEqual(prodInput.value, '');\n  });\n\n  it('should accept new entries', async () => {\n    const originMap = createOriginMap();\n    originMap.startCreation();\n    await RenderCoordinator.done();\n\n    const devInput = getDevInput(originMap)!;\n    devInput.value = 'http://localhost:8080';\n    devInput.dispatchEvent(new Event('input'));\n\n    const prodInput = getProdInput(originMap)!;\n    prodInput.value = 'https://example.com';\n    prodInput.dispatchEvent(new Event('input'));\n\n    await RenderCoordinator.done();\n\n    getConfirmButton(originMap)!.click();\n\n    await RenderCoordinator.done();\n\n    const mappings = getOriginMappings(originMap);\n    assert.deepEqual(mappings, [\n      ['http://localhost:8080', 'https://example.com', undefined],\n    ]);\n  });\n\n  it('should ignore cancelled entries', async () => {\n    const originMap = createOriginMap();\n    originMap.startCreation();\n    await RenderCoordinator.done();\n\n    const devInput = getDevInput(originMap)!;\n    devInput.value = 'http://localhost:8080';\n    devInput.dispatchEvent(new Event('input'));\n\n    const prodInput = getProdInput(originMap)!;\n    prodInput.value = 'https://example.com';\n    prodInput.dispatchEvent(new Event('input'));\n\n    await RenderCoordinator.done();\n\n    getCancelButton(originMap)!.click();\n\n    await RenderCoordinator.done();\n\n    const mappings = getOriginMappings(originMap);\n    assert.deepEqual(mappings, []);\n    assert.isNull(getDevInput(originMap));\n    assert.isNull(getProdInput(originMap));\n  });\n\n  it('should coerce inputs to origin values', async () => {\n    const originMap = createOriginMap();\n    originMap.startCreation();\n    await RenderCoordinator.done();\n\n    const devInput = getDevInput(originMap)!;\n    devInput.value = 'http://localhost:8080/path/to/something';\n    devInput.dispatchEvent(new Event('input'));\n\n    const prodInput = getProdInput(originMap)!;\n    prodInput.value = 'https://example.com?hello';\n    prodInput.dispatchEvent(new Event('input'));\n\n    await RenderCoordinator.done();\n\n    getConfirmButton(originMap)!.click();\n\n    await RenderCoordinator.done();\n\n    const mappings = getOriginMappings(originMap);\n    assert.deepEqual(mappings, [\n      ['http://localhost:8080', 'https://example.com', undefined],\n    ]);\n  });\n\n  it('should show errors from invalid origins', async () => {\n    const originMap = createOriginMap();\n    originMap.startCreation();\n    await RenderCoordinator.done();\n\n    const devInput = getDevInput(originMap)!;\n    devInput.value = 'bad-origin';\n    devInput.dispatchEvent(new Event('input'));\n\n    const prodInput = getProdInput(originMap)!;\n    prodInput.value = 'jj**Sdafsdf';\n    prodInput.dispatchEvent(new Event('input'));\n\n    await RenderCoordinator.done();\n\n    const errors = getValidationErrors(originMap);\n    assert.deepEqual(errors, '\"bad-origin\" is not a valid origin or URL.\\n\"jj**Sdafsdf\" is not a valid origin or URL.');\n\n    const confirmButton = getConfirmButton(originMap);\n    assert.isTrue(confirmButton!.shadowRoot?.querySelector('button')!.disabled);\n  });\n\n  it('should show warning for duplicate dev origin', async () => {\n    cruxManager.getConfigSetting().set({\n      enabled: true,\n      override: '',\n      originMappings: [\n        {developmentOrigin: 'http://localhost:8080', productionOrigin: 'https://example.com'},\n      ],\n    });\n\n    const originMap = createOriginMap();\n    originMap.startCreation();\n    await RenderCoordinator.done();\n\n    const devInput = getDevInput(originMap)!;\n    devInput.value = 'http://localhost:8080';\n    devInput.dispatchEvent(new Event('input'));\n\n    const prodInput = getProdInput(originMap)!;\n    prodInput.value = 'https://example2.com';\n    prodInput.dispatchEvent(new Event('input'));\n\n    await RenderCoordinator.done();\n\n    const errors = getValidationErrors(originMap);\n    assert.deepEqual(errors, '\"http://localhost:8080\" is already mapped to a production origin.');\n\n    const confirmButton = getConfirmButton(originMap);\n    assert.isFalse(confirmButton!.shadowRoot?.querySelector('button')!.disabled);\n  });\n});\n"]}