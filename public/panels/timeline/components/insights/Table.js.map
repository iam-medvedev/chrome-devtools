{"version":3,"file":"Table.js","sourceRoot":"","sources":["../../../../../../../../front_end/panels/timeline/components/insights/Table.ts"],"names":[],"mappings":"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","sourcesContent":["// Copyright 2024 The Chromium Authors. All rights reserved.\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\n\nimport * as ComponentHelpers from '../../../../ui/components/helpers/helpers.js';\nimport * as LitHtml from '../../../../ui/lit-html/lit-html.js';\n\nimport tableStyles from './table.css.js';\n\nexport interface TableData {\n  headers: string[];\n  /** Each row is a tuple of values. */\n  rows: Array<Array<string|number>>;\n  onHoverRow?: (index: number, rowEl: HTMLElement) => void;\n  onClickRow?: (index: number, rowEl: HTMLElement) => void;\n  onMouseLeave?: () => void;\n}\n\nexport class Table extends HTMLElement {\n  static readonly litTagName = LitHtml.literal`devtools-performance-table`;\n\n  readonly #shadow = this.attachShadow({mode: 'open'});\n  readonly #boundRender = this.#render.bind(this);\n  #headers?: string[];\n  #rows?: Array<Array<string|number>>;\n  #onHoverRowCallback?: (index: number, rowEl: HTMLElement) => void;\n  #onClickRowCallback?: (index: number, rowEl: HTMLElement) => void;\n  #onMouseLeaveCallback?: () => void;\n  #currentHoverIndex: number|null = null;\n\n  set data(data: TableData) {\n    this.#headers = data.headers;\n    this.#rows = data.rows;\n    this.#onHoverRowCallback = data.onHoverRow;\n    this.#onClickRowCallback = data.onClickRow;\n    this.#onMouseLeaveCallback = data.onMouseLeave;\n    void ComponentHelpers.ScheduledRender.scheduleRender(this, this.#boundRender);\n  }\n\n  connectedCallback(): void {\n    this.#shadow.adoptedStyleSheets.push(tableStyles);\n  }\n\n  #onHoverRow(e: MouseEvent): void {\n    if (!this.#onHoverRowCallback || !(e.target instanceof HTMLElement)) {\n      return;\n    }\n\n    const rowEl = e.target.closest('tr');\n    if (!rowEl || !rowEl.parentElement) {\n      return;\n    }\n\n    const index = [...rowEl.parentElement.children].indexOf(rowEl);\n    if (index === -1 || index === this.#currentHoverIndex) {\n      return;\n    }\n\n    this.#currentHoverIndex = index;\n    this.#onHoverRowCallback(index, rowEl);\n  }\n\n  #onClickRow(e: MouseEvent): void {\n    if (!this.#onClickRowCallback || !(e.target instanceof HTMLElement)) {\n      return;\n    }\n\n    const rowEl = e.target.closest('tr');\n    if (!rowEl || !rowEl.parentElement) {\n      return;\n    }\n\n    const index = [...rowEl.parentElement.children].indexOf(rowEl);\n    if (index === -1) {\n      return;\n    }\n\n    this.#onClickRowCallback(index, rowEl);\n  }\n\n  #onMouseLeave(): void {\n    if (!this.#onMouseLeaveCallback) {\n      return;\n    }\n\n    this.#currentHoverIndex = null;\n    this.#onMouseLeaveCallback();\n  }\n\n  async #render(): Promise<void> {\n    if (!this.#headers || !this.#rows) {\n      return;\n    }\n\n    LitHtml.render(\n        LitHtml.html`<table\n          class=${LitHtml.Directives.classMap({\n          hoverable: Boolean(this.#onHoverRowCallback),\n        })}\n          @mouseleave=${this.#onMouseLeaveCallback ? this.#onMouseLeave : null}>\n        <thead>\n          <tr>\n          ${this.#headers.map(h => LitHtml.html`<th scope=\"col\">${h}</th>`)}\n          </tr>\n        </thead>\n        <tbody\n          @mouseover=${this.#onHoverRowCallback ? this.#onHoverRow : null}\n          @click=${this.#onClickRowCallback ? this.#onClickRow : null}\n        >\n          ${this.#rows.map(row => {\n          const rowsEls = row.map(\n              (value, i) => i === 0 ? LitHtml.html`<th scope=\"row\">${value}</th>` : LitHtml.html`<td>${value}</td>`);\n          return LitHtml.html`<tr>${rowsEls}</tr>`;\n        })}\n        </tbody>\n      </div>`,\n        this.#shadow, {host: this});\n  }\n}\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    'devtools-performance-table': Table;\n  }\n}\n\ncustomElements.define('devtools-performance-table', Table);\n"]}