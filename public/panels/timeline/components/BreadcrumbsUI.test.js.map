{"version":3,"file":"BreadcrumbsUI.test.js","sourceRoot":"","sources":["../../../../../../../front_end/panels/timeline/components/BreadcrumbsUI.test.ts"],"names":[],"mappings":"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","sourcesContent":["// Copyright 2023 The Chromium Authors. All rights reserved.\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\n\nimport * as Trace from '../../../models/trace/trace.js';\nimport {renderElementIntoDOM} from '../../../testing/DOMHelpers.js';\nimport {describeWithEnvironment} from '../../../testing/EnvironmentHelpers.js';\nimport * as RenderCoordinator from '../../../ui/components/render_coordinator/render_coordinator.js';\n\nimport * as TimelineComponents from './components.js';\n\nfunction milliToMicro(x: number): Trace.Types.Timing.Micro {\n  return Trace.Helpers.Timing.milliToMicro(\n      Trace.Types.Timing.Milli(x),\n  );\n}\n\ndescribeWithEnvironment('BreadcrumbsUI', () => {\n  const {BreadcrumbsUI} = TimelineComponents.BreadcrumbsUI;\n\n  function queryBreadcrumbs(component: HTMLElement): (string)[] {\n    assert.isNotNull(component.shadowRoot);\n    const breadcrumbsRanges = component.shadowRoot.querySelectorAll<HTMLElement>('.range');\n    return Array.from(breadcrumbsRanges).map(row => {\n      return row.textContent?.trim() || '';\n    });\n  }\n\n  function queryActiveBreadcrumb(component: HTMLElement): (string)[] {\n    assert.isNotNull(component.shadowRoot);\n    const breadcrumbsRanges = component.shadowRoot.querySelectorAll<HTMLElement>('.active-breadcrumb');\n    return Array.from(breadcrumbsRanges).map(row => {\n      return row.textContent?.trim() || '';\n    });\n  }\n\n  it('renders one breadcrumb', async () => {\n    const component = new BreadcrumbsUI();\n    renderElementIntoDOM(component);\n\n    const traceWindow: Trace.Types.Timing.TraceWindowMicro = {\n      min: milliToMicro(1),\n      max: milliToMicro(10),\n      range: milliToMicro(9),\n    };\n\n    const breadcrumb: Trace.Types.File.Breadcrumb = {\n      window: traceWindow,\n      child: null,\n    };\n\n    component.data = {initialBreadcrumb: breadcrumb, activeBreadcrumb: breadcrumb};\n\n    await RenderCoordinator.done();\n\n    const breadcrumbsRanges = queryBreadcrumbs(component);\n\n    assert.lengthOf(breadcrumbsRanges, 1);\n    assert.deepEqual(breadcrumbsRanges, ['Full range (9.00 ms)']);\n  });\n\n  it('renders all the breadcrumbs provided', async () => {\n    const component = new BreadcrumbsUI();\n    renderElementIntoDOM(component);\n\n    const traceWindow2: Trace.Types.Timing.TraceWindowMicro = {\n      min: milliToMicro(2),\n      max: milliToMicro(9),\n      range: milliToMicro(7),\n    };\n\n    const traceWindow: Trace.Types.Timing.TraceWindowMicro = {\n      min: milliToMicro(1),\n      max: milliToMicro(10),\n      range: milliToMicro(9),\n    };\n\n    const breadcrumb2: Trace.Types.File.Breadcrumb = {\n      window: traceWindow2,\n      child: null,\n    };\n\n    const breadcrumb: Trace.Types.File.Breadcrumb = {\n      window: traceWindow,\n      child: breadcrumb2,\n    };\n\n    component.data = {initialBreadcrumb: breadcrumb, activeBreadcrumb: breadcrumb2};\n\n    await RenderCoordinator.done();\n\n    const breadcrumbsRanges = queryBreadcrumbs(component);\n\n    assert.lengthOf(breadcrumbsRanges, 2);\n    assert.deepEqual(breadcrumbsRanges, ['Full range (9.00 ms)', '7.00 ms']);\n\n    // There should always be one active breadcrumb\n    const activeRange = queryActiveBreadcrumb(component);\n    assert.lengthOf(activeRange, 1);\n  });\n});\n"]}