{"version":3,"file":"NetworkRequestTooltip.test.js","sourceRoot":"","sources":["../../../../../../../front_end/panels/timeline/components/NetworkRequestTooltip.test.ts"],"names":[],"mappings":"AAAA,sCAAsC;AACtC,yEAAyE;AACzE,6BAA6B;AAE7B,OAAO,KAAK,GAAG,MAAM,0BAA0B,CAAC;AAEhD,OAAO,KAAK,KAAK,MAAM,gCAAgC,CAAC;AACxD,OAAO,EAAC,gBAAgB,EAAE,oBAAoB,EAAC,MAAM,gCAAgC,CAAC;AACtF,OAAO,EAAC,0BAA0B,EAAC,MAAM,oCAAoC,CAAC;AAE9E,OAAO,KAAK,kBAAkB,MAAM,iBAAiB,CAAC;AAEtD,0BAA0B,CAAC,uBAAuB,EAAE,GAAG,EAAE;IACvD,EAAE,CAAC,8BAA8B,EAAE,KAAK,IAAI,EAAE;QAC5C,MAAM,cAAc,GAAG,KAAK,CAAC,kBAAkB,CAAC,GAAG,CAAC,cAAc,CAAC,cAAc,CAAC,CAAC;QACnF,KAAK,CAAC,IAAI,CAAC,GAAG,CAAC,WAAW,CAAC,wBAAwB,EAAE,QAAQ,CAAC;aACzD,OAAO,CAAC,IAAI,GAAG,CAAC,WAAW,CAAC,wBAAwB,CAAC,cAAc,CAAC,CAAC,CAAC;QAC3E,KAAK,CAAC,IAAI,CAAC,GAAG,CAAC,cAAc,CAAC,yBAAyB,CAAC,QAAQ,EAAE,EAAE,0BAA0B,CAAC;aAC1F,OAAO,CAAC,IAAI,GAAG,CAAC,cAAc,CAAC,wBAAwB,CACpD,GAAG,CAAC,cAAc,CAAC,gBAAgB,EAAE,EAAE,EAAE,qBAAqB,CAAC,CAAC,CAAC;QACzE,MAAM,OAAO,GAAG,IAAI,kBAAkB,CAAC,qBAAqB,CAAC,qBAAqB,EAAE,CAAC;QACrF,oBAAoB,CAAC,OAAO,EAAE,EAAC,mBAAmB,EAAE,IAAI,EAAC,CAAC,CAAC;QAC3D,MAAM,IAAI,GAAgE;YACxE,cAAc,EAAE;gBACd,EAAE,EAAE,CAAC;gBACL,GAAG,EAAE,GAAG;gBACR,IAAI,EAAE;oBACJ,IAAI,EAAE;wBACJ,aAAa,EAAE,EAAC,aAAa,EAAE,GAAG,EAAC;wBACnC,GAAG,EAAE,qBAAqB;wBAC1B,QAAQ,yDAAwC;wBAChD,SAAS,EAAE,EAAE;qBACd;iBACF;aACuD;YAC1D,YAAY,EAAE,KAAK,CAAC,kBAAkB,CAAC,KAAK,CAAC,YAAY,CAAC,YAAY,CAAC;SACxE,CAAC;QACF,OAAO,CAAC,IAAI,GAAG,IAAI,CAAC;QAEpB,MAAM,gBAAgB,CAAC,iDAAiD,CAAC,CAAC;IAC5E,CAAC,CAAC,CAAC;AACL,CAAC,CAAC,CAAC","sourcesContent":["// Copyright 2025 The Chromium Authors\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\n\nimport * as SDK from '../../../core/sdk/sdk.js';\nimport * as Protocol from '../../../generated/protocol.js';\nimport * as Trace from '../../../models/trace/trace.js';\nimport {assertScreenshot, renderElementIntoDOM} from '../../../testing/DOMHelpers.js';\nimport {describeWithMockConnection} from '../../../testing/MockConnection.js';\n\nimport * as TimelineComponents from './components.js';\n\ndescribeWithMockConnection('NetworkRequestTooltip', () => {\n  it('shows a throttling indicator', async () => {\n    const networkRequest = sinon.createStubInstance(SDK.NetworkRequest.NetworkRequest);\n    sinon.stub(SDK.TraceObject.RevealableNetworkRequest, 'create')\n        .returns(new SDK.TraceObject.RevealableNetworkRequest(networkRequest));\n    sinon.stub(SDK.NetworkManager.MultitargetNetworkManager.instance(), 'appliedRequestConditions')\n        .returns(new SDK.NetworkManager.AppliedNetworkConditions(\n            SDK.NetworkManager.Slow3GConditions, '', 'https://example.com'));\n    const tooltip = new TimelineComponents.NetworkRequestTooltip.NetworkRequestTooltip();\n    renderElementIntoDOM(tooltip, {includeCommonStyles: true});\n    const data: TimelineComponents.NetworkRequestTooltip.NetworkTooltipData = {\n      networkRequest: {\n        ts: 0,\n        dur: 120,\n        args: {\n          data: {\n            syntheticData: {sendStartTime: 100},\n            url: 'https://example.com',\n            mimeType: Protocol.Network.ResourceType.Document,\n            redirects: []\n          }\n        }\n      } as unknown as Trace.Types.Events.SyntheticNetworkRequest,\n      entityMapper: sinon.createStubInstance(Trace.EntityMapper.EntityMapper),\n    };\n    tooltip.data = data;\n\n    await assertScreenshot('timeline/network-request-tooltip-throttling.png');\n  });\n});\n"]}