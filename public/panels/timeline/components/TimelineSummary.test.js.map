{"version":3,"file":"TimelineSummary.test.js","sourceRoot":"","sources":["../../../../../../../front_end/panels/timeline/components/TimelineSummary.test.ts"],"names":[],"mappings":"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","sourcesContent":["// Copyright 2024 The Chromium Authors. All rights reserved.\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\n\nimport {describeWithMockConnection} from '../../../testing/MockConnection.js';\n\nimport * as TimelineComponents from './components.js';\n\ndescribeWithMockConnection('TimelineSummary', () => {\n  it('correctly renders categories', async function() {\n    const categories: TimelineComponents.TimelineSummary.CategoryData[] = [\n      {title: 'System', value: 100, color: 'blue'},\n      {title: 'Scripting', value: 5, color: 'red'},\n      {title: 'Painting', value: 2, color: 'green'},\n      {title: 'Loading', value: 1, color: 'white'},\n      {title: 'Rendering', value: 0, color: 'black'},\n    ];\n\n    const summary = new TimelineComponents.TimelineSummary.CategorySummary();\n    summary.data = {\n      rangeStart: 0,\n      rangeEnd: 110,\n      total: 110,\n      categories,\n      selectedEvents: [],\n    };\n\n    categories.push({title: 'Total', value: 110, color: 'yellow'});\n\n    assert.isNotNull(summary.shadowRoot);\n    const range = summary.shadowRoot.querySelector('.summary-range');\n    assert.include(range?.textContent, 'Range: ');\n\n    const categorySummaries = summary.shadowRoot.querySelector('.category-summary');\n    const rows = categorySummaries?.querySelectorAll('.category-row') || [];\n    for (let i = 0; i < rows.length; i++) {\n      const swatch = rows[i].querySelector('.category-swatch');\n      assert.isNotNull(swatch);\n      const name = rows[i].querySelector('.category-name');\n      assert.include(name?.textContent, categories[i]?.title);\n      const value = rows[i].querySelector('.category-value');\n      assert.include(value?.textContent, categories[i]?.value.toString());\n    }\n  });\n  it('no categories should just render Total', async function() {\n    const categories: TimelineComponents.TimelineSummary.CategoryData[] = [];\n\n    const summary = new TimelineComponents.TimelineSummary.CategorySummary();\n    summary.data = {\n      rangeStart: 0,\n      rangeEnd: 110,\n      total: 110,\n      categories,\n      selectedEvents: [],\n    };\n\n    categories.push({title: 'Total', value: 110, color: 'grey'});\n\n    assert.isNotNull(summary.shadowRoot);\n    const range = summary.shadowRoot.querySelector('.summary-range');\n    assert.include(range?.textContent, 'Range: ');\n\n    const categorySummaries = summary.shadowRoot.querySelector('.category-summary');\n    // Should just have the \"Total\" row.\n    const rows = categorySummaries?.querySelectorAll('.category-row') || [];\n    assert.isTrue(rows.length === 1);\n\n    const swatch = rows[0].querySelector('.category-swatch');\n    assert.isNotNull(swatch);\n\n    const name = rows[0].querySelector('.category-name');\n    assert.include(name?.textContent, 'Total');\n\n    const value = rows[0].querySelector('.category-value');\n    assert.include(value?.textContent, (110).toString());\n  });\n});\n"]}