{"version":3,"file":"IgnoreList.test.js","sourceRoot":"","sources":["../../../../../../../front_end/panels/timeline/utils/IgnoreList.test.ts"],"names":[],"mappings":"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","sourcesContent":["// Copyright 2024 The Chromium Authors\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\n\nimport * as Common from '../../../core/common/common.js';\nimport * as Platform from '../../../core/platform/platform.js';\nimport * as SDK from '../../../core/sdk/sdk.js';\nimport type * as Protocol from '../../../generated/protocol.js';\nimport * as Bindings from '../../../models/bindings/bindings.js';\nimport * as Trace from '../../../models/trace/trace.js';\nimport * as SourceMapsResolver from '../../../models/trace_source_maps_resolver/trace_source_maps_resolver.js';\nimport * as Workspace from '../../../models/workspace/workspace.js';\nimport {createTarget} from '../../../testing/EnvironmentHelpers.js';\nimport {\n  describeWithMockConnection,\n} from '../../../testing/MockConnection.js';\nimport {MockProtocolBackend} from '../../../testing/MockScopeChain.js';\nimport {encodeSourceMap} from '../../../testing/SourceMapEncoder.js';\nimport {\n  makeMockSamplesHandlerData,\n  makeProfileCall,\n} from '../../../testing/TraceHelpers.js';\n\nimport * as Utils from './utils.js';\n\nconst {urlString} = Platform.DevToolsPath;\nexport async function loadCodeLocationResolvingScenario(): Promise<{\n  authoredScriptURL: string,\n  genScriptURL: string,\n  scriptId: Protocol.Runtime.ScriptId,\n  ignoreListedURL: string,\n  contentScriptURL: string,\n  contentScriptId: Protocol.Runtime.ScriptId,\n}> {\n  const target = createTarget();\n\n  const targetManager = SDK.TargetManager.TargetManager.instance();\n  const workspace = Workspace.Workspace.WorkspaceImpl.instance({forceNew: true});\n  const resourceMapping = new Bindings.ResourceMapping.ResourceMapping(targetManager, workspace);\n  const ignoreListManager = Workspace.IgnoreListManager.IgnoreListManager.instance({forceNew: true});\n  const debuggerWorkspaceBinding = Bindings.DebuggerWorkspaceBinding.DebuggerWorkspaceBinding.instance({\n    forceNew: true,\n    resourceMapping,\n    targetManager,\n    ignoreListManager,\n    workspace,\n  });\n\n  const backend = new MockProtocolBackend();\n\n  // The following mock data creates a source mapping from two authored\n  // scripts to a single complied script. One of the sources\n  // (ignored.ts) is marked as ignore listed in the source map.\n  const sourceRoot = 'http://example.com';\n  const scriptInfo = {\n    url: `${sourceRoot}/test.out.js`,\n    content: 'function f(x) {\\n  console.log(x);\\n}\\nfunction ignore(y){\\n console.log(y);\\n}',\n  };\n  const authoredScriptName = 'test.ts';\n  const ignoredScriptName = 'ignored.ts';\n  const authoredScriptURL = `${sourceRoot}/${authoredScriptName}`;\n  const ignoreListedScriptURL = `${sourceRoot}/${ignoredScriptName}`;\n  const sourceMap = encodeSourceMap(\n      [\n        `0:9 => ${authoredScriptName}:0:1`,\n        `1:0 => ${authoredScriptName}:4:0`,\n        `1:2 => ${authoredScriptName}:4:2`,\n        `2:0 => ${authoredScriptName}:2:0`,\n        `3:0 => ${ignoredScriptName}:3:0`,\n      ],\n      sourceRoot);\n  sourceMap.sources = [authoredScriptURL, ignoreListedScriptURL];\n  sourceMap.ignoreList = [1];\n  const sourceMapInfo = {\n    url: `${scriptInfo.url}.map`,\n    content: sourceMap,\n  };\n\n  // The following mock data creates content script\n  const contentScriptInfo = {\n    url: `${sourceRoot}/content-script.js`,\n    content: 'console.log(\"content script loaded\");',\n    isContentScript: true,\n  };\n\n  // Load mock data in devtools\n  const [, , script, , contentScript] = await Promise.all([\n    debuggerWorkspaceBinding.waitForUISourceCodeAdded(urlString`${authoredScriptURL}`, target),\n    debuggerWorkspaceBinding.waitForUISourceCodeAdded(urlString`${ignoreListedScriptURL}`, target),\n    backend.addScript(target, scriptInfo, sourceMapInfo),\n    debuggerWorkspaceBinding.waitForUISourceCodeAdded(urlString`${contentScriptInfo.url}`, target),\n    backend.addScript(target, contentScriptInfo, null),\n  ]);\n\n  return {\n    authoredScriptURL,\n    scriptId: script.scriptId,\n    genScriptURL: scriptInfo.url,\n    ignoreListedURL: ignoreListedScriptURL,\n    contentScriptURL: contentScriptInfo.url,\n    contentScriptId: contentScript.scriptId,\n  };\n}\n\ndescribeWithMockConnection('isIgnoreListedEntry', () => {\n  it('uses url mappings to determine if an url is ignore listed', async () => {\n    const {authoredScriptURL, genScriptURL, scriptId} = await loadCodeLocationResolvingScenario();\n\n    const LINE_NUMBER = 0;\n    const COLUMN_NUMBER = 9;\n\n    const profileCallWithMappings =\n        makeProfileCall('function', 10, 100, Trace.Types.Events.ProcessID(1), Trace.Types.Events.ThreadID(1));\n    profileCallWithMappings.callFrame = {\n      lineNumber: LINE_NUMBER,\n      columnNumber: COLUMN_NUMBER,\n      functionName: 'minified',\n      scriptId,\n      url: genScriptURL,\n    };\n\n    const workersData: Trace.Handlers.ModelHandlers.Workers.WorkersData = {\n      workerSessionIdEvents: [],\n      workerIdByThread: new Map(),\n      workerURLById: new Map(),\n    };\n\n    Workspace.IgnoreListManager.IgnoreListManager.instance().ignoreListURL(urlString`${authoredScriptURL}`);\n    const traceWithMappings = {\n      Samples: makeMockSamplesHandlerData([profileCallWithMappings]),\n      Workers: workersData,\n    } as Trace.Handlers.Types.HandlerData;\n    const parsedTrace = {data: traceWithMappings} as Trace.TraceModel.ParsedTrace;\n    const resolver = new SourceMapsResolver.SourceMapsResolver(parsedTrace);\n    await resolver.install();\n    assert.isTrue(Utils.IgnoreList.isIgnoreListedEntry(profileCallWithMappings));\n  });\n\n  it('ignores entries with a url in the source map\\'s ignoreList field when the user enables known third party ignoring',\n     async () => {\n       const {ignoreListedURL, scriptId} = await loadCodeLocationResolvingScenario();\n\n       // This matches the location mapping added to the sourcemap.\n       const LINE_NUMBER = 3;\n       const COLUMN_NUMBER = 0;\n\n       const profileCallWithMappings =\n           makeProfileCall('function', 10, 100, Trace.Types.Events.ProcessID(1), Trace.Types.Events.ThreadID(1));\n       profileCallWithMappings.callFrame = {\n         lineNumber: LINE_NUMBER,\n         columnNumber: COLUMN_NUMBER,\n         functionName: 'ignore',\n         scriptId,\n         url: ignoreListedURL,\n       };\n\n       const workersData: Trace.Handlers.ModelHandlers.Workers.WorkersData = {\n         workerSessionIdEvents: [],\n         workerIdByThread: new Map(),\n         workerURLById: new Map(),\n       };\n       const traceWithMappings = {\n         Samples: makeMockSamplesHandlerData([profileCallWithMappings]),\n         Workers: workersData,\n       } as Trace.Handlers.Types.HandlerData;\n       const parsedTrace = {data: traceWithMappings} as Trace.TraceModel.ParsedTrace;\n       const resolver = new SourceMapsResolver.SourceMapsResolver(parsedTrace);\n       await resolver.install();\n       assert.isTrue(Utils.IgnoreList.isIgnoreListedEntry(profileCallWithMappings));\n       const ignoreKnownThirdPartySetting =\n           Common.Settings.Settings.instance().moduleSetting('automatically-ignore-list-known-third-party-scripts');\n       const ignoreKnownThirdPartySettingValue = ignoreKnownThirdPartySetting.get();\n\n       ignoreKnownThirdPartySetting.set(true);\n       assert.isTrue(Utils.IgnoreList.isIgnoreListedEntry(profileCallWithMappings));\n       assert.strictEqual(\n           'Marked with ignoreList in source map', Utils.IgnoreList.getIgnoredReasonString(profileCallWithMappings));\n\n       ignoreKnownThirdPartySetting.set(false);\n       assert.isFalse(Utils.IgnoreList.isIgnoreListedEntry(profileCallWithMappings));\n\n       // restore to the original value.\n       ignoreKnownThirdPartySetting.set(ignoreKnownThirdPartySettingValue);\n     });\n  it('ignores entries belonging to content script when the user enables content script ignoring', async () => {\n    const {contentScriptURL, contentScriptId: scriptId} = await loadCodeLocationResolvingScenario();\n\n    const LINE_NUMBER = 0;\n    const COLUMN_NUMBER = 0;\n\n    const profileCallWithContentScript =\n        makeProfileCall('function', 10, 100, Trace.Types.Events.ProcessID(1), Trace.Types.Events.ThreadID(1));\n    profileCallWithContentScript.callFrame = {\n      lineNumber: LINE_NUMBER,\n      columnNumber: COLUMN_NUMBER,\n      functionName: '',\n      scriptId,\n      url: contentScriptURL,\n    };\n\n    const workersData: Trace.Handlers.ModelHandlers.Workers.WorkersData = {\n      workerSessionIdEvents: [],\n      workerIdByThread: new Map(),\n      workerURLById: new Map(),\n    };\n    const traceWithMappings = {\n      Samples: makeMockSamplesHandlerData([profileCallWithContentScript]),\n      Workers: workersData,\n    } as Trace.Handlers.Types.HandlerData;\n    const parsedTrace = {data: traceWithMappings} as Trace.TraceModel.ParsedTrace;\n    const resolver = new SourceMapsResolver.SourceMapsResolver(parsedTrace);\n    await resolver.install();\n    assert.isTrue(Utils.IgnoreList.isIgnoreListedEntry(profileCallWithContentScript));\n\n    const ignoreContentScriptSetting = Common.Settings.Settings.instance().moduleSetting('skip-content-scripts');\n    const ignoreContentScriptSettingValue = ignoreContentScriptSetting.get();\n\n    ignoreContentScriptSetting.set(true);\n    assert.isTrue(Utils.IgnoreList.isIgnoreListedEntry(profileCallWithContentScript));\n    assert.strictEqual('Content script', Utils.IgnoreList.getIgnoredReasonString(profileCallWithContentScript));\n\n    ignoreContentScriptSetting.set(false);\n    assert.isFalse(Utils.IgnoreList.isIgnoreListedEntry(profileCallWithContentScript));\n\n    // restore to the original value.\n    ignoreContentScriptSetting.set(ignoreContentScriptSettingValue);\n  });\n\n  it('get the first matched rule for the ignored script', async () => {\n    const targetManager = SDK.TargetManager.TargetManager.instance();\n    const workspace = Workspace.Workspace.WorkspaceImpl.instance({forceNew: true});\n    const resourceMapping = new Bindings.ResourceMapping.ResourceMapping(targetManager, workspace);\n    const ignoreListManager = Workspace.IgnoreListManager.IgnoreListManager.instance({forceNew: true});\n    Bindings.DebuggerWorkspaceBinding.DebuggerWorkspaceBinding.instance({\n      forceNew: true,\n      resourceMapping,\n      targetManager,\n      ignoreListManager,\n      workspace,\n    });\n    ignoreRegex('youtube*');\n    const url = urlString`https://www.youtube.com/s/desktop/2ebf714b/jsbin/desktop_polymer.vflset/desktop_polymer.js`;\n    Workspace.IgnoreListManager.IgnoreListManager.instance().ignoreListURL(url);\n\n    const entry = makeProfileCall(\n        'function name', 10, 100, Trace.Types.Events.ProcessID(1), Trace.Types.Events.ThreadID(1), /* nodeId= */ 1,\n        url);\n    // There are two matched rules (in order)\n    // - youtube*\n    // - \\\\/desktop_polymer\\\\.js$ (generated by the URL)\n    // So the first matched one is `youtube*`\n    assert.strictEqual('youtube*', Utils.IgnoreList.getIgnoredReasonString(entry));\n\n    unignoreRegex('youtube*');\n    // Now There is only one matched rule.\n    assert.strictEqual('\\\\/desktop_polymer\\\\.js$', Utils.IgnoreList.getIgnoredReasonString(entry));\n  });\n});\n\nfunction ignoreRegex(regexValue: string): void {\n  const regexPatterns =\n      (Common.Settings.Settings.instance().moduleSetting('skip-stack-frames-pattern') as Common.Settings.RegExpSetting)\n          .getAsArray();\n  regexPatterns.push({pattern: regexValue, disabled: false});\n}\n\nfunction unignoreRegex(regexValue: string): void {\n  const regexPatterns =\n      (Common.Settings.Settings.instance().moduleSetting('skip-stack-frames-pattern') as Common.Settings.RegExpSetting)\n          .getAsArray();\n  const result = regexPatterns.filter(regexPattern => regexPattern.pattern !== regexValue);\n\n  (Common.Settings.Settings.instance().moduleSetting('skip-stack-frames-pattern') as Common.Settings.RegExpSetting)\n      .setAsArray(result);\n}\n"]}