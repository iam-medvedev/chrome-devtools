{"version":3,"file":"UserActionRow.test.js","sourceRoot":"","sources":["../../../../../../../front_end/panels/ai_assistance/components/UserActionRow.test.ts"],"names":[],"mappings":"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","sourcesContent":["// Copyright 2024 The Chromium Authors. All rights reserved.\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\n\nimport * as Host from '../../../core/host/host.js';\nimport {\n  describeWithEnvironment,\n} from '../../../testing/EnvironmentHelpers.js';\nimport * as Freestyler from '../ai_assistance.js';\n\ndescribeWithEnvironment('UserActionRow', () => {\n  function createComponent(props: Freestyler.UserActionRowWidgetParams):\n      [sinon.SinonStub<[Freestyler.ViewInput, Freestyler.ViewOutput, HTMLElement], void>, Freestyler.UserActionRow] {\n    const view = sinon.stub<[Freestyler.ViewInput, Freestyler.ViewOutput, HTMLElement]>();\n    const component = new Freestyler.UserActionRow(undefined, view);\n    Object.assign(component, props);\n    component.wasShown();\n    return [view, component];\n  }\n\n  it('should show the feedback form when canShowFeedbackForm is true', async () => {\n    const [view] = createComponent({\n      showRateButtons: true,\n      canShowFeedbackForm: true,\n      onSuggestionClick: sinon.stub(),\n      onFeedbackSubmit: sinon.stub(),\n    });\n\n    assert.isTrue(view.calledOnce);\n\n    {\n      const [viewInput] = view.lastCall.args;\n      expect(viewInput.isShowingFeedbackForm).equals(false);\n      viewInput.onRatingClick(Host.AidaClient.Rating.POSITIVE);\n    }\n\n    assert.isTrue(view.calledTwice);\n    {\n      const [viewInput] = view.lastCall.args;\n      expect(viewInput.isShowingFeedbackForm).equals(true);\n    }\n  });\n\n  it('should not show the feedback form when canShowFeedbackForm is false', async () => {\n    const [view] = createComponent({\n      showRateButtons: true,\n      canShowFeedbackForm: false,\n      onSuggestionClick: sinon.stub(),\n      onFeedbackSubmit: sinon.stub(),\n    });\n\n    assert.isTrue(view.calledOnce);\n\n    {\n      const [viewInput] = view.lastCall.args;\n      expect(viewInput.isShowingFeedbackForm).equals(false);\n      viewInput.onRatingClick(Host.AidaClient.Rating.POSITIVE);\n    }\n\n    assert.isTrue(view.calledTwice);\n    {\n      const [viewInput] = view.lastCall.args;\n      expect(viewInput.isShowingFeedbackForm).equals(false);\n    }\n  });\n\n  it('should disable the submit button when the input is empty', async () => {\n    const [view] = createComponent({\n      showRateButtons: true,\n      canShowFeedbackForm: true,\n      onSuggestionClick: sinon.stub(),\n      onFeedbackSubmit: sinon.stub(),\n    });\n\n    assert.isTrue(view.calledOnce);\n\n    {\n      const [viewInput] = view.lastCall.args;\n      expect(viewInput.isSubmitButtonDisabled).equals(false);\n      viewInput.onRatingClick(Host.AidaClient.Rating.POSITIVE);\n    }\n\n    assert.isTrue(view.calledTwice);\n\n    {\n      const [viewInput] = view.lastCall.args;\n      expect(viewInput.isSubmitButtonDisabled).equals(false);\n      expect(viewInput.isShowingFeedbackForm).equals(true);\n      viewInput.onInputChange('test');\n      viewInput.onSubmit(new SubmitEvent('submit'));\n    }\n\n    {\n      const [viewInput] = view.lastCall.args;\n      expect(viewInput.isSubmitButtonDisabled).equals(true);\n    }\n  });\n});\n"]}