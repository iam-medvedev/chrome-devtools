{"version":3,"file":"ai_assistance-meta.js","sourceRoot":"","sources":["../../../../../../front_end/panels/ai_assistance/ai_assistance-meta.ts"],"names":[],"mappings":"AAAA,4DAA4D;AAC5D,yEAAyE;AACzE,6BAA6B;AAE7B,OAAO,KAAK,MAAM,MAAM,6BAA6B,CAAC;AACtD,OAAO,KAAK,IAAI,MAAM,yBAAyB,CAAC;AAChD,OAAO,KAAK,IAAI,MAAM,yBAAyB,CAAC;AAChD,OAAO,KAAK,EAAE,MAAM,2BAA2B,CAAC;AAIhD;;;;IAII;AACJ,MAAM,SAAS,GAAG;IAChB;;OAEG;IACH,YAAY,EAAE,eAAe;IAC7B;;OAEG;IACH,gBAAgB,EAAE,oBAAoB;IACtC;;;OAGG;IACH,kBAAkB,EAAE,sBAAsB;IAC1C;;;OAGG;IACH,KAAK,EAAE,QAAQ;IACf;;;OAGG;IACH,WAAW,EAAE,oFAAoF;IACjG;;;OAGG;IACH,aAAa,EAAE,6CAA6C;IAC5D;;;OAGG;IACH,gBAAgB,EAAE,gDAAgD;CAC1D,CAAC;AAEX,MAAM,IAAI,GAAG,IAAI,CAAC,IAAI,CAAC,iBAAiB,CAAC,4CAA4C,EAAE,SAAS,CAAC,CAAC;AAClG,MAAM,UAAU,GAAG,IAAI,CAAC,IAAI,CAAC,kBAAkB,CAAC,IAAI,CAAC,SAAS,EAAE,IAAI,CAAC,CAAC;AACtE,MAAM,cAAc,GAAG,IAAI,CAAC,IAAI,CAAC,gCAAgC,CAAC,IAAI,CAAC,SAAS,EAAE,IAAI,CAAC,CAAC;AAExF,MAAM,OAAO,GAAG,uBAAuB,CAAC;AAExC,SAAS,kBAAkB;IACzB,MAAM,cAAc,GAAG,IAAI,CAAC,cAAc,CAAC,cAAc,CAAC,QAAQ,EAAE,CAAC;IACrE,OAAO,CAAC,cAAc,CAAC,MAAM,CAAC,UAAU,CAAC,KAAK,CAAC,CAAC;AAClD,CAAC;AAED,SAAS,eAAe,CAAC,MAAgC;IACvD,OAAO,MAAM,EAAE,gBAAgB,EAAE,YAAY,KAAK,IAAI,CAAC;AACzD,CAAC;AAED,SAAS,kBAAkB,CAAC,MAAgC;IAC1D,OAAO,MAAM,EAAE,gBAAgB,EAAE,yBAAyB,KAAK,IAAI,CAAC;AACtE,CAAC;AAED,IAAI,wBAAyD,CAAC;AAC9D,KAAK,UAAU,sBAAsB;IACnC,IAAI,CAAC,wBAAwB,EAAE,CAAC;QAC9B,wBAAwB,GAAG,MAAM,MAAM,CAAC,oBAAoB,CAAC,CAAC;IAChE,CAAC;IACD,OAAO,wBAAwB,CAAC;AAClC,CAAC;AAED,SAAS,8BAA8B,CAAC,MAAgC;IACtE,OAAO,CAAC,MAAM,EAAE,gBAAgB,EAAE,OAAO,IAAI,MAAM,EAAE,kBAAkB,EAAE,OAAO,CAAC,KAAK,IAAI,CAAC;AAC7F,CAAC;AAED,SAAS,8BAA8B,CAAC,MAAgC;IACtE,OAAO,CAAC,MAAM,EAAE,gBAAgB,EAAE,OAAO,IAAI,CAAC,MAAM,EAAE,gCAAgC,EAAE,OAAO,CAAC,CAAC,KAAK,IAAI,CAAC;AAC7G,CAAC;AAED,SAAS,kCAAkC,CAAC,MAAgC;IAC1E,OAAO,CAAC,MAAM,EAAE,gBAAgB,EAAE,OAAO,IAAI,CAAC,MAAM,EAAE,oCAAoC,EAAE,OAAO,CAAC,CAAC,KAAK,IAAI,CAAC;AACjH,CAAC;AACD,SAAS,0CAA0C,CAAC,MAAgC;IAClF,OAAO,CAAC,MAAM,EAAE,gBAAgB,EAAE,OAAO,IAAI,MAAM,EAAE,oCAAoC,EAAE,OAAO;QAC1F,MAAM,EAAE,oCAAoC,CAAC,eAAe,CAAC,KAAK,IAAI,CAAC;AACjF,CAAC;AAED,SAAS,2BAA2B,CAAC,MAAgC;IACnE,OAAO,CAAC,MAAM,EAAE,gBAAgB,EAAE,OAAO,IAAI,CAAC,MAAM,EAAE,6BAA6B,EAAE,OAAO,CAAC,CAAC,KAAK,IAAI,CAAC;AAC1G,CAAC;AAED,SAAS,qBAAqB,CAAC,MAAgC;IAC7D,OAAO,8BAA8B,CAAC,MAAM,CAAC,IAAI,8BAA8B,CAAC,MAAM,CAAC;QACnF,kCAAkC,CAAC,MAAM,CAAC,IAAI,2BAA2B,CAAC,MAAM,CAAC,CAAC;AACxF,CAAC;AAED,EAAE,CAAC,WAAW,CAAC,qBAAqB,CAAC;IACnC,QAAQ,mEAA+C;IACvD,EAAE,EAAE,YAAY;IAChB,aAAa,EAAE,cAAc,CAAC,SAAS,CAAC,gBAAgB,CAAC;IACzD,KAAK,EAAE,cAAc,CAAC,SAAS,CAAC,YAAY,CAAC;IAC7C,KAAK,EAAE,EAAE;IACT,gBAAgB,EAAE,IAAI;IACtB,WAAW,4DAA0C;IACrD,UAAU,EAAE,KAAK;IACjB,SAAS,EAAE,MAAM,CAAC,EAAE,CAAC,qBAAqB,CAAC,MAAM,CAAC,IAAI,CAAC,kBAAkB,CAAC,MAAM,CAAC;IACjF,KAAK,CAAC,QAAQ;QACZ,MAAM,YAAY,GAAG,MAAM,sBAAsB,EAAE,CAAC;QACpD,OAAO,MAAM,YAAY,CAAC,iBAAiB,CAAC,QAAQ,EAAE,CAAC;IACzD,CAAC;CACF,CAAC,CAAC;AAEH,MAAM,CAAC,QAAQ,CAAC,wBAAwB,CAAC;IACvC,QAAQ,+CAAoC;IAC5C,WAAW,EAAE,OAAO;IACpB,WAAW,qDAAqC;IAChD,KAAK,EAAE,cAAc,CAAC,SAAS,CAAC,kBAAkB,CAAC;IACnD,YAAY,EAAE,KAAK;IACnB,cAAc,EAAE,KAAK;IACrB,SAAS,EAAE,qBAAqB;IAChC,iBAAiB,EAAE,MAAM,CAAC,EAAE;QAC1B,MAAM,OAAO,GAAG,EAAE,CAAC;QACnB,IAAI,eAAe,CAAC,MAAM,CAAC,EAAE,CAAC;YAC5B,OAAO,CAAC,IAAI,CAAC,UAAU,CAAC,SAAS,CAAC,aAAa,CAAC,CAAC,CAAC;QACpD,CAAC;QACD,IAAI,kBAAkB,CAAC,MAAM,CAAC,EAAE,CAAC;YAC/B,OAAO,CAAC,IAAI,CAAC,UAAU,CAAC,SAAS,CAAC,gBAAgB,CAAC,CAAC,CAAC;QACvD,CAAC;QACD,IAAI,kBAAkB,EAAE,EAAE,CAAC;YACzB,OAAO,CAAC,IAAI,CAAC,UAAU,CAAC,SAAS,CAAC,WAAW,CAAC,CAAC,CAAC;QAClD,CAAC;QACD,IAAI,OAAO,CAAC,MAAM,GAAG,CAAC,EAAE,CAAC;YACvB,OAAO,EAAC,QAAQ,EAAE,IAAI,EAAE,OAAO,EAAC,CAAC;QACnC,CAAC;QACD,OAAO,EAAC,QAAQ,EAAE,KAAK,EAAC,CAAC;IAC3B,CAAC;CACF,CAAC,CAAC;AAEH,EAAE,CAAC,kBAAkB,CAAC,uBAAuB,CAAC;IAC5C,QAAQ,EAAE,qCAAqC;IAC/C,YAAY;QACV,OAAO,EAAE,CAAC;IACZ,CAAC;IACD,UAAU,qHAAqE;IAC/E,QAAQ,4DAA6C;IACrD,KAAK,EAAE,cAAc,CAAC,SAAS,CAAC,KAAK,CAAC;IACtC,KAAK,CAAC,kBAAkB;QACtB,MAAM,YAAY,GAAG,MAAM,sBAAsB,EAAE,CAAC;QACpD,OAAO,IAAI,YAAY,CAAC,cAAc,EAAE,CAAC;IAC3C,CAAC;IACD,SAAS,EAAE,MAAM,CAAC,EAAE,CAAC,8BAA8B,CAAC,MAAM,CAAC,IAAI,CAAC,kBAAkB,CAAC,MAAM,CAAC;CAC3F,CAAC,CAAC;AAEH,EAAE,CAAC,kBAAkB,CAAC,uBAAuB,CAAC;IAC5C,QAAQ,EAAE,kCAAkC;IAC5C,YAAY;QACV,OAAO,EAAE,CAAC;IACZ,CAAC;IACD,QAAQ,4DAA6C;IACrD,KAAK,EAAE,cAAc,CAAC,SAAS,CAAC,KAAK,CAAC;IACtC,KAAK,CAAC,kBAAkB;QACtB,MAAM,YAAY,GAAG,MAAM,sBAAsB,EAAE,CAAC;QACpD,OAAO,IAAI,YAAY,CAAC,cAAc,EAAE,CAAC;IAC3C,CAAC;IACD,SAAS,EAAE,MAAM,CAAC,EAAE,CAAC,8BAA8B,CAAC,MAAM,CAAC,IAAI,CAAC,kBAAkB,CAAC,MAAM,CAAC;CAC3F,CAAC,CAAC;AAEH,EAAE,CAAC,kBAAkB,CAAC,uBAAuB,CAAC;IAC5C,QAAQ,EAAE,iCAAiC;IAC3C,YAAY;QACV,OAAO,EAAE,CAAC;IACZ,CAAC;IACD,UAAU,qHAAqE;IAC/E,QAAQ,4DAA6C;IACrD,KAAK,EAAE,cAAc,CAAC,SAAS,CAAC,KAAK,CAAC;IACtC,KAAK,CAAC,kBAAkB;QACtB,MAAM,YAAY,GAAG,MAAM,sBAAsB,EAAE,CAAC;QACpD,OAAO,IAAI,YAAY,CAAC,cAAc,EAAE,CAAC;IAC3C,CAAC;IACD,SAAS,EAAE,MAAM,CAAC,EAAE,CAAC,8BAA8B,CAAC,MAAM,CAAC,IAAI,CAAC,kBAAkB,CAAC,MAAM,CAAC;CAC3F,CAAC,CAAC;AAEH,EAAE,CAAC,kBAAkB,CAAC,uBAAuB,CAAC;IAC5C,QAAQ,EAAE,+BAA+B;IACzC,YAAY;QACV,OAAO,EAAE,CAAC;IACZ,CAAC;IACD,QAAQ,4DAA6C;IACrD,KAAK,EAAE,cAAc,CAAC,SAAS,CAAC,KAAK,CAAC;IACtC,KAAK,CAAC,kBAAkB;QACtB,MAAM,YAAY,GAAG,MAAM,sBAAsB,EAAE,CAAC;QACpD,OAAO,IAAI,YAAY,CAAC,cAAc,EAAE,CAAC;IAC3C,CAAC;IACD,SAAS,EAAE,MAAM,CAAC,EAAE,CAAC,8BAA8B,CAAC,MAAM,CAAC,IAAI,CAAC,kBAAkB,CAAC,MAAM,CAAC;CAC3F,CAAC,CAAC;AAEH,EAAE,CAAC,kBAAkB,CAAC,uBAAuB,CAAC;IAC5C,QAAQ,EAAE,mCAAmC;IAC7C,YAAY;QACV,OAAO,EAAE,CAAC;IACZ,CAAC;IACD,QAAQ,4DAA6C;IACrD,KAAK,EAAE,cAAc,CAAC,SAAS,CAAC,KAAK,CAAC;IACtC,KAAK,CAAC,kBAAkB;QACtB,MAAM,YAAY,GAAG,MAAM,sBAAsB,EAAE,CAAC;QACpD,OAAO,IAAI,YAAY,CAAC,cAAc,EAAE,CAAC;IAC3C,CAAC;IACD,SAAS,EAAE,MAAM,CAAC,EAAE,CAAC,kCAAkC,CAAC,MAAM,CAAC,IAAI,CAAC,kBAAkB,CAAC,MAAM,CAAC;CAC/F,CAAC,CAAC;AAEH,EAAE,CAAC,kBAAkB,CAAC,uBAAuB,CAAC;IAC5C,QAAQ,EAAE,qCAAqC;IAC/C,YAAY;QACV,OAAO,EAAE,CAAC;IACZ,CAAC;IACD,QAAQ,4DAA6C;IACrD,KAAK,EAAE,cAAc,CAAC,SAAS,CAAC,KAAK,CAAC;IACtC,KAAK,CAAC,kBAAkB;QACtB,MAAM,YAAY,GAAG,MAAM,sBAAsB,EAAE,CAAC;QACpD,OAAO,IAAI,YAAY,CAAC,cAAc,EAAE,CAAC;IAC3C,CAAC;IACD,SAAS,EAAE,MAAM,CAAC,EAAE;QAClB,OAAO,0CAA0C,CAAC,MAAM,CAAC,IAAI,CAAC,kBAAkB,CAAC,MAAM,CAAC,CAAC;IAC3F,CAAC;CACF,CAAC,CAAC;AAEH,EAAE,CAAC,kBAAkB,CAAC,uBAAuB,CAAC;IAC5C,QAAQ,EAAE,iCAAiC;IAC3C,YAAY;QACV,OAAO,EAAE,CAAC;IACZ,CAAC;IACD,UAAU,qHAAqE;IAC/E,QAAQ,4DAA6C;IACrD,KAAK,EAAE,cAAc,CAAC,SAAS,CAAC,KAAK,CAAC;IACtC,KAAK,CAAC,kBAAkB;QACtB,MAAM,YAAY,GAAG,MAAM,sBAAsB,EAAE,CAAC;QACpD,OAAO,IAAI,YAAY,CAAC,cAAc,EAAE,CAAC;IAC3C,CAAC;IACD,SAAS,EAAE,MAAM,CAAC,EAAE,CAAC,2BAA2B,CAAC,MAAM,CAAC,IAAI,CAAC,kBAAkB,CAAC,MAAM,CAAC;CACxF,CAAC,CAAC;AAEH,EAAE,CAAC,kBAAkB,CAAC,uBAAuB,CAAC;IAC5C,QAAQ,EAAE,+BAA+B;IACzC,YAAY;QACV,OAAO,EAAE,CAAC;IACZ,CAAC;IACD,QAAQ,4DAA6C;IACrD,KAAK,EAAE,cAAc,CAAC,SAAS,CAAC,KAAK,CAAC;IACtC,KAAK,CAAC,kBAAkB;QACtB,MAAM,YAAY,GAAG,MAAM,sBAAsB,EAAE,CAAC;QACpD,OAAO,IAAI,YAAY,CAAC,cAAc,EAAE,CAAC;IAC3C,CAAC;IACD,SAAS,EAAE,MAAM,CAAC,EAAE,CAAC,2BAA2B,CAAC,MAAM,CAAC,IAAI,CAAC,kBAAkB,CAAC,MAAM,CAAC;CACxF,CAAC,CAAC","sourcesContent":["// Copyright 2024 The Chromium Authors. All rights reserved.\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\n\nimport * as Common from '../../core/common/common.js';\nimport * as i18n from '../../core/i18n/i18n.js';\nimport * as Root from '../../core/root/root.js';\nimport * as UI from '../../ui/legacy/legacy.js';\n\nimport type * as AiAssistance from './ai_assistance.js';\n\n/*\n  * TODO(nvitkov): b/346933425\n  * Temporary string that should not be translated\n  * as they may change often during development.\n  */\nconst UIStrings = {\n  /**\n   * @description The title of the AI assistance panel.\n   */\n  aiAssistance: 'AI assistance',\n  /**\n   * @description The title of the command menu action for showing the AI assistance panel.\n   */\n  showAiAssistance: 'Show AI assistance',\n  /**\n   * @description The setting title to enable the AI assistance via\n   * the settings tab.\n   */\n  enableAiAssistance: 'Enable AI assistance',\n  /**\n   *@description Text of a tooltip to redirect to the AI assistance panel with\n   * the current element as context\n   */\n  askAi: 'Ask AI',\n  /**\n   * @description Message shown to the user if the DevTools locale is not\n   * supported.\n   */\n  wrongLocale: 'To use this feature, set your language preference to English in DevTools settings.',\n  /**\n   * @description Message shown to the user if the user's region is not\n   * supported.\n   */\n  geoRestricted: 'This feature is unavailable in your region.',\n  /**\n   * @description Message shown to the user if the enterprise policy does\n   * not allow this feature.\n   */\n  policyRestricted: 'This setting is managed by your administrator.',\n} as const;\n\nconst str_ = i18n.i18n.registerUIStrings('panels/ai_assistance/ai_assistance-meta.ts', UIStrings);\nconst i18nString = i18n.i18n.getLocalizedString.bind(undefined, str_);\nconst i18nLazyString = i18n.i18n.getLazilyComputedLocalizedString.bind(undefined, str_);\n\nconst setting = 'ai-assistance-enabled';\n\nfunction isLocaleRestricted(): boolean {\n  const devtoolsLocale = i18n.DevToolsLocale.DevToolsLocale.instance();\n  return !devtoolsLocale.locale.startsWith('en-');\n}\n\nfunction isGeoRestricted(config?: Root.Runtime.HostConfig): boolean {\n  return config?.aidaAvailability?.blockedByGeo === true;\n}\n\nfunction isPolicyRestricted(config?: Root.Runtime.HostConfig): boolean {\n  return config?.aidaAvailability?.blockedByEnterprisePolicy === true;\n}\n\nlet loadedAiAssistanceModule: (typeof AiAssistance|undefined);\nasync function loadAiAssistanceModule(): Promise<typeof AiAssistance> {\n  if (!loadedAiAssistanceModule) {\n    loadedAiAssistanceModule = await import('./ai_assistance.js');\n  }\n  return loadedAiAssistanceModule;\n}\n\nfunction isStylingAgentFeatureAvailable(config?: Root.Runtime.HostConfig): boolean {\n  return (config?.aidaAvailability?.enabled && config?.devToolsFreestyler?.enabled) === true;\n}\n\nfunction isNetworkAgentFeatureAvailable(config?: Root.Runtime.HostConfig): boolean {\n  return (config?.aidaAvailability?.enabled && (config?.devToolsAiAssistanceNetworkAgent?.enabled)) === true;\n}\n\nfunction isPerformanceAgentFeatureAvailable(config?: Root.Runtime.HostConfig): boolean {\n  return (config?.aidaAvailability?.enabled && (config?.devToolsAiAssistancePerformanceAgent?.enabled)) === true;\n}\nfunction isPerformanceInsightsAgentFeatureAvailable(config?: Root.Runtime.HostConfig): boolean {\n  return (config?.aidaAvailability?.enabled && config?.devToolsAiAssistancePerformanceAgent?.enabled &&\n          config?.devToolsAiAssistancePerformanceAgent.insightsEnabled) === true;\n}\n\nfunction isFileAgentFeatureAvailable(config?: Root.Runtime.HostConfig): boolean {\n  return (config?.aidaAvailability?.enabled && (config?.devToolsAiAssistanceFileAgent?.enabled)) === true;\n}\n\nfunction isAnyFeatureAvailable(config?: Root.Runtime.HostConfig): boolean {\n  return isStylingAgentFeatureAvailable(config) || isNetworkAgentFeatureAvailable(config) ||\n      isPerformanceAgentFeatureAvailable(config) || isFileAgentFeatureAvailable(config);\n}\n\nUI.ViewManager.registerViewExtension({\n  location: UI.ViewManager.ViewLocationValues.DRAWER_VIEW,\n  id: 'freestyler',\n  commandPrompt: i18nLazyString(UIStrings.showAiAssistance),\n  title: i18nLazyString(UIStrings.aiAssistance),\n  order: 10,\n  isPreviewFeature: true,\n  persistence: UI.ViewManager.ViewPersistence.CLOSEABLE,\n  hasToolbar: false,\n  condition: config => isAnyFeatureAvailable(config) && !isPolicyRestricted(config),\n  async loadView() {\n    const AiAssistance = await loadAiAssistanceModule();\n    return await AiAssistance.AiAssistancePanel.instance();\n  },\n});\n\nCommon.Settings.registerSettingExtension({\n  category: Common.Settings.SettingCategory.AI,\n  settingName: setting,\n  settingType: Common.Settings.SettingType.BOOLEAN,\n  title: i18nLazyString(UIStrings.enableAiAssistance),\n  defaultValue: false,\n  reloadRequired: false,\n  condition: isAnyFeatureAvailable,\n  disabledCondition: config => {\n    const reasons = [];\n    if (isGeoRestricted(config)) {\n      reasons.push(i18nString(UIStrings.geoRestricted));\n    }\n    if (isPolicyRestricted(config)) {\n      reasons.push(i18nString(UIStrings.policyRestricted));\n    }\n    if (isLocaleRestricted()) {\n      reasons.push(i18nString(UIStrings.wrongLocale));\n    }\n    if (reasons.length > 0) {\n      return {disabled: true, reasons};\n    }\n    return {disabled: false};\n  },\n});\n\nUI.ActionRegistration.registerActionExtension({\n  actionId: 'freestyler.elements-floating-button',\n  contextTypes(): [] {\n    return [];\n  },\n  experiment: Root.Runtime.ExperimentName.FLOATING_ENTRY_POINTS_FOR_AI_ASSISTANCE,\n  category: UI.ActionRegistration.ActionCategory.GLOBAL,\n  title: i18nLazyString(UIStrings.askAi),\n  async loadActionDelegate() {\n    const AiAssistance = await loadAiAssistanceModule();\n    return new AiAssistance.ActionDelegate();\n  },\n  condition: config => isStylingAgentFeatureAvailable(config) && !isPolicyRestricted(config),\n});\n\nUI.ActionRegistration.registerActionExtension({\n  actionId: 'freestyler.element-panel-context',\n  contextTypes(): [] {\n    return [];\n  },\n  category: UI.ActionRegistration.ActionCategory.GLOBAL,\n  title: i18nLazyString(UIStrings.askAi),\n  async loadActionDelegate() {\n    const AiAssistance = await loadAiAssistanceModule();\n    return new AiAssistance.ActionDelegate();\n  },\n  condition: config => isStylingAgentFeatureAvailable(config) && !isPolicyRestricted(config),\n});\n\nUI.ActionRegistration.registerActionExtension({\n  actionId: 'drjones.network-floating-button',\n  contextTypes(): [] {\n    return [];\n  },\n  experiment: Root.Runtime.ExperimentName.FLOATING_ENTRY_POINTS_FOR_AI_ASSISTANCE,\n  category: UI.ActionRegistration.ActionCategory.GLOBAL,\n  title: i18nLazyString(UIStrings.askAi),\n  async loadActionDelegate() {\n    const AiAssistance = await loadAiAssistanceModule();\n    return new AiAssistance.ActionDelegate();\n  },\n  condition: config => isNetworkAgentFeatureAvailable(config) && !isPolicyRestricted(config),\n});\n\nUI.ActionRegistration.registerActionExtension({\n  actionId: 'drjones.network-panel-context',\n  contextTypes(): [] {\n    return [];\n  },\n  category: UI.ActionRegistration.ActionCategory.GLOBAL,\n  title: i18nLazyString(UIStrings.askAi),\n  async loadActionDelegate() {\n    const AiAssistance = await loadAiAssistanceModule();\n    return new AiAssistance.ActionDelegate();\n  },\n  condition: config => isNetworkAgentFeatureAvailable(config) && !isPolicyRestricted(config),\n});\n\nUI.ActionRegistration.registerActionExtension({\n  actionId: 'drjones.performance-panel-context',\n  contextTypes(): [] {\n    return [];\n  },\n  category: UI.ActionRegistration.ActionCategory.GLOBAL,\n  title: i18nLazyString(UIStrings.askAi),\n  async loadActionDelegate() {\n    const AiAssistance = await loadAiAssistanceModule();\n    return new AiAssistance.ActionDelegate();\n  },\n  condition: config => isPerformanceAgentFeatureAvailable(config) && !isPolicyRestricted(config),\n});\n\nUI.ActionRegistration.registerActionExtension({\n  actionId: 'drjones.performance-insight-context',\n  contextTypes(): [] {\n    return [];\n  },\n  category: UI.ActionRegistration.ActionCategory.GLOBAL,\n  title: i18nLazyString(UIStrings.askAi),\n  async loadActionDelegate() {\n    const AiAssistance = await loadAiAssistanceModule();\n    return new AiAssistance.ActionDelegate();\n  },\n  condition: config => {\n    return isPerformanceInsightsAgentFeatureAvailable(config) && !isPolicyRestricted(config);\n  }\n});\n\nUI.ActionRegistration.registerActionExtension({\n  actionId: 'drjones.sources-floating-button',\n  contextTypes(): [] {\n    return [];\n  },\n  experiment: Root.Runtime.ExperimentName.FLOATING_ENTRY_POINTS_FOR_AI_ASSISTANCE,\n  category: UI.ActionRegistration.ActionCategory.GLOBAL,\n  title: i18nLazyString(UIStrings.askAi),\n  async loadActionDelegate() {\n    const AiAssistance = await loadAiAssistanceModule();\n    return new AiAssistance.ActionDelegate();\n  },\n  condition: config => isFileAgentFeatureAvailable(config) && !isPolicyRestricted(config),\n});\n\nUI.ActionRegistration.registerActionExtension({\n  actionId: 'drjones.sources-panel-context',\n  contextTypes() {\n    return [];\n  },\n  category: UI.ActionRegistration.ActionCategory.GLOBAL,\n  title: i18nLazyString(UIStrings.askAi),\n  async loadActionDelegate() {\n    const AiAssistance = await loadAiAssistanceModule();\n    return new AiAssistance.ActionDelegate();\n  },\n  condition: config => isFileAgentFeatureAvailable(config) && !isPolicyRestricted(config),\n});\n"]}