{"version":3,"file":"AiCodeCompletionDisclaimer.test.js","sourceRoot":"","sources":["../../../../../../front_end/panels/common/AiCodeCompletionDisclaimer.test.ts"],"names":[],"mappings":"AAAA,4DAA4D;AAC5D,yEAAyE;AACzE,6BAA6B;AAE7B,OAAO,KAAK,IAAI,MAAM,yBAAyB,CAAC;AAChD,OAAO,EAAC,oBAAoB,EAAC,MAAM,6BAA6B,CAAC;AACjE,OAAO,EAAC,uBAAuB,EAAE,gBAAgB,EAAC,MAAM,qCAAqC,CAAC;AAC9F,OAAO,EAAC,sBAAsB,EAAC,MAAM,sCAAsC,CAAC;AAC5E,OAAO,KAAK,EAAE,MAAM,2BAA2B,CAAC;AAEhD,OAAO,KAAK,MAAM,MAAM,aAAa,CAAC;AAEtC,uBAAuB,CAAC,4BAA4B,EAAE,GAAG,EAAE;IACzD,KAAK,UAAU,gBAAgB;QAC7B,MAAM,IAAI,GAAG,sBAAsB,CAAC,MAAM,CAAC,0BAA0B,CAAC,CAAC;QACvE,MAAM,MAAM,GAAG,IAAI,MAAM,CAAC,0BAA0B,CAAC,SAAS,EAAE,IAAI,CAAC,CAAC;QACtE,MAAM,CAAC,mBAAmB,GAAG,oBAAoB,CAAC;QAClD,MAAM,CAAC,UAAU,EAAE,CAAC;QACpB,oBAAoB,CAAC,MAAM,CAAC,CAAC;QAC7B,MAAM,IAAI,CAAC,SAAS,CAAC;QACrB,OAAO,EAAC,IAAI,EAAE,MAAM,EAAC,CAAC;IACxB,CAAC;IAED,EAAE,CAAC,mGAAmG,EAAE,KAAK,IAAI,EAAE;QACjH,gBAAgB,CAAC;YACf,gBAAgB,EAAE,EAAC,qBAAqB,EAAE,IAAI,CAAC,OAAO,CAAC,0BAA0B,CAAC,qBAAqB,EAAC;SACzG,CAAC,CAAC;QAEH,MAAM,EAAC,IAAI,EAAE,MAAM,EAAC,GAAG,MAAM,gBAAgB,EAAE,CAAC;QAEhD,MAAM,CAAC,MAAM,CAAC,IAAI,CAAC,KAAK,CAAC,SAAS,CAAC,CAAC;QACpC,MAAM,CAAC,MAAM,EAAE,CAAC;IAClB,CAAC,CAAC,CAAC;IAEH,EAAE,CAAC,sFAAsF,EAAE,KAAK,IAAI,EAAE;QACpG,gBAAgB,CAAC,EAAC,gBAAgB,EAAE,EAAC,qBAAqB,EAAE,IAAI,CAAC,OAAO,CAAC,0BAA0B,CAAC,KAAK,EAAC,EAAC,CAAC,CAAC;QAE7G,MAAM,EAAC,IAAI,EAAE,MAAM,EAAC,GAAG,MAAM,gBAAgB,EAAE,CAAC;QAEhD,MAAM,CAAC,OAAO,CAAC,IAAI,CAAC,KAAK,CAAC,SAAS,CAAC,CAAC;QACrC,MAAM,CAAC,MAAM,EAAE,CAAC;IAClB,CAAC,CAAC,CAAC;IAEH,EAAE,CAAC,0DAA0D,EAAE,KAAK,IAAI,EAAE;QACxE,MAAM,EAAC,IAAI,EAAE,MAAM,EAAC,GAAG,MAAM,gBAAgB,EAAE,CAAC;QAChD,MAAM,YAAY,GAAG,KAAK,CAAC,IAAI,CAAC,EAAE,CAAC,WAAW,CAAC,WAAW,CAAC,QAAQ,EAAE,EAAE,UAAU,CAAC,CAAC;QAEnF,IAAI,CAAC,KAAK,CAAC,8BAA8B,EAAE,CAAC;QAE5C,MAAM,CAAC,MAAM,CAAC,YAAY,CAAC,cAAc,CAAC,WAAW,CAAC,CAAC,CAAC;QACxD,MAAM,CAAC,MAAM,EAAE,CAAC;IAClB,CAAC,CAAC,CAAC;AACL,CAAC,CAAC,CAAC","sourcesContent":["// Copyright 2025 The Chromium Authors. All rights reserved.\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\n\nimport * as Root from '../../core/root/root.js';\nimport {renderElementIntoDOM} from '../../testing/DOMHelpers.js';\nimport {describeWithEnvironment, updateHostConfig} from '../../testing/EnvironmentHelpers.js';\nimport {createViewFunctionStub} from '../../testing/ViewFunctionHelpers.js';\nimport * as UI from '../../ui/legacy/legacy.js';\n\nimport * as Common from './common.js';\n\ndescribeWithEnvironment('AiCodeCompletionDisclaimer', () => {\n  async function createDisclaimer() {\n    const view = createViewFunctionStub(Common.AiCodeCompletionDisclaimer);\n    const widget = new Common.AiCodeCompletionDisclaimer(undefined, view);\n    widget.disclaimerTooltipId = 'disclaimer-tooltip';\n    widget.markAsRoot();\n    renderElementIntoDOM(widget);\n    await view.nextInput;\n    return {view, widget};\n  }\n\n  it('should show disclaimer with no logging text when enterprise policy value is ALLOW_WITHOUT_LOGGING', async () => {\n    updateHostConfig({\n      aidaAvailability: {enterprisePolicyValue: Root.Runtime.GenAiEnterprisePolicyValue.ALLOW_WITHOUT_LOGGING},\n    });\n\n    const {view, widget} = await createDisclaimer();\n\n    assert.isTrue(view.input.noLogging);\n    widget.detach();\n  });\n\n  it('should show disclaimer without no logging text when enterprise policy value is ALLOW', async () => {\n    updateHostConfig({aidaAvailability: {enterprisePolicyValue: Root.Runtime.GenAiEnterprisePolicyValue.ALLOW}});\n\n    const {view, widget} = await createDisclaimer();\n\n    assert.isFalse(view.input.noLogging);\n    widget.detach();\n  });\n\n  it('should open settings on manage in settings tooltip click', async () => {\n    const {view, widget} = await createDisclaimer();\n    const showViewStub = sinon.stub(UI.ViewManager.ViewManager.instance(), 'showView');\n\n    view.input.onManageInSettingsTooltipClick();\n\n    assert.isTrue(showViewStub.calledOnceWith('chrome-ai'));\n    widget.detach();\n  });\n});\n"]}