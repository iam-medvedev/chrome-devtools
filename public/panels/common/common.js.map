{"version":3,"file":"common.js","sourceRoot":"","sources":["../../../../../../front_end/panels/common/common.ts"],"names":[],"mappings":"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","sourcesContent":["// Copyright 2025 The Chromium Authors. All rights reserved.\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\n\nimport * as Host from '../../core/host/host.js';\nimport * as i18n from '../../core/i18n/i18n.js';\nimport type * as Platform from '../../core/platform/platform.js';\nimport * as Buttons from '../../ui/components/buttons/buttons.js';\nimport * as UI from '../../ui/legacy/legacy.js';\nimport * as Lit from '../../ui/lit/lit.js';\n\nimport commonStyles from './common.css.js';\n\nconst {html} = Lit;\n\nconst UIStrings = {\n  /**\n   *@description Header text for the feature reminder dialog.\n   */\n  thingsToConsider: 'Things to consider',\n  /**\n   *@description Text for the learn more button in the feature reminder dialog.\n   */\n  learnMore: 'Learn more',\n  /**\n   *@description Text for the cancel button in the feature reminder dialog.\n   */\n  cancel: 'Cancel',\n  /**\n   *@description Text for the cancel button in the \"type to allow\" dialog.\n   */\n  allow: 'Allow',\n  /**\n   *@description Text for the got it button in the feature reminder dialog.\n   */\n  gotIt: 'Got it',\n} as const;\n\nconst str_ = i18n.i18n.registerUIStrings('panels/common/common.ts', UIStrings);\nconst i18nString = i18n.i18n.getLocalizedString.bind(undefined, str_);\n\nexport class FreDialog {\n  static show({\n    header,\n    reminderItems,\n    onLearnMoreClick,\n  }: {\n    header: {\n      iconName: string,\n      text: Platform.UIString.LocalizedString,\n    },\n    reminderItems: Array<{\n      iconName: string,\n      content: Platform.UIString.LocalizedString|Lit.LitTemplate,\n    }>,\n    onLearnMoreClick: () => void,\n  }): Promise<boolean> {\n    const dialog = new UI.Dialog.Dialog();\n    const result = Promise.withResolvers<boolean>();\n    // clang-format off\n    Lit.render(html`\n      <div class=\"fre-disclaimer\">\n        <style>\n          ${commonStyles.cssText}\n        </style>\n        <header>\n          <div class=\"header-icon-container\">\n            <devtools-icon name=${header.iconName}></devtools-icon>\n          </div>\n          <h2 tabindex=\"-1\">\n            ${header.text}\n          </h2>\n        </header>\n        <main class=\"reminder-container\">\n          <h3>${i18nString(UIStrings.thingsToConsider)}</h3>\n          ${reminderItems.map(reminderItem => html`\n            <div class=\"reminder-item\">\n              <devtools-icon class=\"reminder-icon\" name=${reminderItem.iconName}></devtools-icon>\n              <span>${reminderItem.content}</span>\n            </div>\n          `)}\n        </main>\n        <footer>\n          <devtools-button\n            @click=${onLearnMoreClick}\n            .jslogContext=${'fre-disclaimer.learn-more'}\n            .variant=${Buttons.Button.Variant.OUTLINED}>\n            ${i18nString(UIStrings.learnMore)}\n          </devtools-button>\n          <div class=\"right-buttons\">\n            <devtools-button\n              @click=${() => {\n                dialog.hide();\n                result.resolve(false);\n              }}\n              .jslogContext=${'fre-disclaimer.cancel'}\n              .variant=${Buttons.Button.Variant.TONAL}>\n              ${i18nString(UIStrings.cancel)}\n            </devtools-button>\n            <devtools-button\n              @click=${() => {\n                dialog.hide();\n                result.resolve(true);\n              }}\n              .jslogContext=${'fre-disclaimer.continue'}\n              .variant=${Buttons.Button.Variant.PRIMARY}>\n              ${i18nString(UIStrings.gotIt)}\n            </devtools-button>\n          </div>\n        </footer>\n      </div>`, dialog.contentElement);\n    // clang-format on\n\n    dialog.setOutsideClickCallback(ev => {\n      ev.consume();\n      dialog.hide();\n      result.resolve(false);\n    });\n    dialog.setSizeBehavior(UI.GlassPane.SizeBehavior.MEASURE_CONTENT);\n    dialog.setDimmed(true);\n    dialog.show();\n\n    return result.promise;\n  }\n\n  private constructor() {\n  }\n}\n\nexport class TypeToAllowDialog {\n  static async show(options: {\n    jslogContext: {\n      dialog: string,\n      input: string,\n    },\n    header: Platform.UIString.LocalizedString,\n    message: Platform.UIString.LocalizedString,\n    typePhrase: Platform.UIString.LocalizedString,\n    inputPlaceholder: Platform.UIString.LocalizedString,\n  }): Promise<boolean> {\n    const dialog = new UI.Dialog.Dialog(options.jslogContext.dialog);\n    dialog.setMaxContentSize(new UI.Geometry.Size(504, 340));\n    dialog.setSizeBehavior(UI.GlassPane.SizeBehavior.SET_EXACT_WIDTH_MAX_HEIGHT);\n    dialog.setDimmed(true);\n    const shadowRoot = UI.UIUtils.createShadowRootWithCoreStyles(dialog.contentElement, {cssFile: commonStyles});\n    const content = shadowRoot.createChild('div', 'type-to-allow-dialog');\n\n    const result = await new Promise<boolean>(resolve => {\n      const header = content.createChild('div', 'header');\n      header.createChild('div', 'title').textContent = options.header;\n\n      const closeButton = header.createChild('dt-close-button', 'dialog-close-button');\n      closeButton.setTabbable(true);\n      self.onInvokeElement(closeButton, event => {\n        dialog.hide();\n        event.consume(true);\n        resolve(false);\n      });\n      closeButton.setSize(Buttons.Button.Size.SMALL);\n\n      content.createChild('div', 'message').textContent = options.message;\n\n      const input = UI.UIUtils.createInput('text-input', 'text', options.jslogContext.input);\n      input.placeholder = options.inputPlaceholder;\n      content.appendChild(input);\n\n      const buttonsBar = content.createChild('div', 'button');\n      const cancelButton =\n          UI.UIUtils.createTextButton(i18nString(UIStrings.cancel), () => resolve(false), {jslogContext: 'cancel'});\n\n      const allowButton = UI.UIUtils.createTextButton(i18nString(UIStrings.allow), () => {\n        resolve(input.value === options.typePhrase);\n      }, {jslogContext: 'confirm', variant: Buttons.Button.Variant.PRIMARY});\n      allowButton.disabled = true;\n\n      buttonsBar.appendChild(allowButton);\n      buttonsBar.appendChild(cancelButton);\n\n      input.addEventListener('input', () => {\n        allowButton.disabled = !Boolean(input.value);\n      }, false);\n      input.addEventListener('paste', e => e.preventDefault());\n      input.addEventListener('drop', e => e.preventDefault());\n\n      dialog.setOutsideClickCallback(event => {\n        event.consume();\n        resolve(false);\n      });\n      dialog.show();\n      Host.userMetrics.actionTaken(Host.UserMetrics.Action.SelfXssWarningDialogShown);\n    });\n    dialog.hide();\n    return result;\n  }\n}\n"]}