{"version":3,"file":"ElementsPanel.test.js","sourceRoot":"","sources":["../../../../../../front_end/panels/elements/ElementsPanel.test.ts"],"names":[],"mappings":"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","sourcesContent":["// Copyright 2022 The Chromium Authors\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\n\nimport * as Common from '../../core/common/common.js';\nimport * as Root from '../../core/root/root.js';\nimport * as SDK from '../../core/sdk/sdk.js';\nimport type * as Protocol from '../../generated/protocol.js';\nimport {raf, renderElementIntoDOM} from '../../testing/DOMHelpers.js';\nimport {createTarget, stubNoopSettings, updateHostConfig} from '../../testing/EnvironmentHelpers.js';\nimport {expectCall} from '../../testing/ExpectStubCall.js';\nimport {\n  describeWithMockConnection,\n  dispatchEvent,\n  setMockConnectionResponseHandler\n} from '../../testing/MockConnection.js';\nimport * as UI from '../../ui/legacy/legacy.js';\n\nimport * as Elements from './elements.js';\n\ndescribeWithMockConnection('ElementsPanel', () => {\n  let target: SDK.Target.Target;\n\n  beforeEach(() => {\n    stubNoopSettings();\n    target = createTarget();\n    Root.Runtime.experiments.register(Root.ExperimentNames.ExperimentName.APCA, '');\n    setMockConnectionResponseHandler('DOM.requestChildNodes', () => ({}));\n    setMockConnectionResponseHandler('DOM.getDocument', () => ({\n                                                          root: {\n                                                            nodeId: 1 as Protocol.DOM.NodeId,\n                                                            backendNodeId: 2 as Protocol.DOM.BackendNodeId,\n                                                            nodeType: Node.DOCUMENT_NODE,\n                                                            nodeName: '#document',\n                                                            childNodeCount: 1,\n                                                            children: [{\n                                                              nodeId: 4 as Protocol.DOM.NodeId,\n                                                              parentId: 1 as Protocol.DOM.NodeId,\n                                                              backendNodeId: 5 as Protocol.DOM.BackendNodeId,\n                                                              nodeType: Node.ELEMENT_NODE,\n                                                              nodeName: 'HTML',\n                                                              childNodeCount: 1,\n                                                              children: [{\n                                                                nodeId: 6 as Protocol.DOM.NodeId,\n                                                                parentId: 4 as Protocol.DOM.NodeId,\n                                                                backendNodeId: 7 as Protocol.DOM.BackendNodeId,\n                                                                nodeType: Node.ELEMENT_NODE,\n                                                                nodeName: 'BODY',\n                                                                childNodeCount: 1,\n                                                              } as Protocol.DOM.Node],\n                                                            } as Protocol.DOM.Node],\n                                                          },\n                                                        } as Protocol.DOM.GetDocumentResponse));\n    setMockConnectionResponseHandler('DOM.copyTo', () => {\n      dispatchEvent(target, 'DOM.childNodeInserted', {\n        parentNodeId: 4 as Protocol.DOM.NodeId,\n        previousNodeId: 6 as Protocol.DOM.NodeId,\n        node: {\n          nodeId: 7 as Protocol.DOM.NodeId,\n          parentId: 4 as Protocol.DOM.NodeId,\n          backendNodeId: 8 as Protocol.DOM.BackendNodeId,\n          nodeType: Node.ELEMENT_NODE,\n          nodeName: 'BODY',\n          childNodeCount: 1,\n        } as Protocol.DOM.Node\n      });\n      return {nodeId: 7 as Protocol.DOM.NodeId};\n    });\n  });\n\n  const createsTreeOutlines = (inScope: boolean) => () => {\n    SDK.TargetManager.TargetManager.instance().setScopeTarget(inScope ? target : null);\n    Elements.ElementsPanel.ElementsPanel.instance({forceNew: true});\n    const model = target.model(SDK.DOMModel.DOMModel);\n    assert.exists(model);\n    assert.strictEqual(Boolean(Elements.ElementsTreeOutline.ElementsTreeOutline.forDOMModel(model)), inScope);\n\n    const subtraget = createTarget({parentTarget: target});\n    const submodel = subtraget.model(SDK.DOMModel.DOMModel);\n    assert.exists(submodel);\n    assert.strictEqual(Boolean(Elements.ElementsTreeOutline.ElementsTreeOutline.forDOMModel(model)), inScope);\n\n    subtraget.dispose('');\n    assert.isNull(Elements.ElementsTreeOutline.ElementsTreeOutline.forDOMModel(submodel));\n  };\n\n  it('creates tree outlines for in scope models', createsTreeOutlines(true));\n  it('does not create tree outlines for out of scope models', createsTreeOutlines(false));\n\n  it('expands the tree even when target added later', async () => {\n    SDK.TargetManager.TargetManager.instance().setScopeTarget(null);\n    const model = target.model(SDK.DOMModel.DOMModel);\n    assert.exists(model);\n    await model.requestDocument();\n\n    const panel = Elements.ElementsPanel.ElementsPanel.instance({forceNew: true});\n    renderElementIntoDOM(panel);\n\n    SDK.TargetManager.TargetManager.instance().setScopeTarget(target);\n\n    const treeOutline = Elements.ElementsTreeOutline.ElementsTreeOutline.forDOMModel(model);\n    assert.exists(treeOutline);\n    const selectedNode = treeOutline.selectedDOMNode();\n    assert.exists(selectedNode);\n    const selectedTreeElement = treeOutline.findTreeElement(selectedNode);\n    assert.exists(selectedTreeElement);\n    assert.isTrue(selectedTreeElement.expanded);\n    panel.detach();\n  });\n\n  it('searches in in scope models', () => {\n    const anotherTarget = createTarget();\n    SDK.TargetManager.TargetManager.instance().setScopeTarget(target);\n    const inScopeModel = target.model(SDK.DOMModel.DOMModel);\n    assert.exists(inScopeModel);\n    const inScopeSearch = sinon.spy(inScopeModel, 'performSearch');\n    const outOfScopeModel = anotherTarget.model(SDK.DOMModel.DOMModel);\n    assert.exists(outOfScopeModel);\n    const outOfScopeSearch = sinon.spy(outOfScopeModel, 'performSearch');\n\n    const panel = Elements.ElementsPanel.ElementsPanel.instance({forceNew: true});\n    panel.performSearch({query: 'foo'} as UI.SearchableView.SearchConfig, false);\n\n    sinon.assert.called(inScopeSearch);\n    sinon.assert.notCalled(outOfScopeSearch);\n  });\n\n  it('deleting a node unhides it if it was hidden', async () => {\n    SDK.TargetManager.TargetManager.instance().setScopeTarget(null);\n    const model = target.model(SDK.DOMModel.DOMModel);\n    assert.exists(model);\n    await model.requestDocument();\n\n    const panel = Elements.ElementsPanel.ElementsPanel.instance({forceNew: true});\n    panel.markAsRoot();\n    renderElementIntoDOM(panel);\n\n    SDK.TargetManager.TargetManager.instance().setScopeTarget(target);\n\n    const treeOutline = Elements.ElementsTreeOutline.ElementsTreeOutline.forDOMModel(model);\n    assert.exists(treeOutline);\n    const selectedNode = treeOutline.selectedDOMNode();\n    assert.exists(selectedNode);\n    const selectedTreeElement = treeOutline.findTreeElement(selectedNode);\n    assert.exists(selectedTreeElement);\n    assert.isTrue(selectedTreeElement.expanded);\n\n    assert.strictEqual(selectedNode.nodeName(), 'BODY');\n\n    assert.isFalse(treeOutline.isToggledToHidden(selectedNode));\n\n    const mockResolveToObject = sinon.mock().twice().returns({callFunction: () => {}, release: () => {}});\n    selectedNode.resolveToObject = mockResolveToObject;\n\n    await treeOutline.toggleHideElement(selectedNode);\n    assert.isTrue(treeOutline.isToggledToHidden(selectedNode));\n\n    await selectedTreeElement.remove();\n    assert.isFalse(treeOutline.isToggledToHidden(selectedNode));\n\n    panel.detach();\n  });\n\n  it('duplicating a hidden node results in a hidden copy', async () => {\n    SDK.TargetManager.TargetManager.instance().setScopeTarget(null);\n    const model = target.model(SDK.DOMModel.DOMModel);\n    assert.exists(model);\n    await model.requestDocument();\n\n    const panel = Elements.ElementsPanel.ElementsPanel.instance({forceNew: true});\n    panel.markAsRoot();\n    renderElementIntoDOM(panel);\n\n    SDK.TargetManager.TargetManager.instance().setScopeTarget(target);\n\n    const treeOutline = Elements.ElementsTreeOutline.ElementsTreeOutline.forDOMModel(model);\n    assert.exists(treeOutline);\n    const selectedNode = treeOutline.selectedDOMNode();\n    assert.exists(selectedNode);\n    const selectedTreeElement = treeOutline.findTreeElement(selectedNode);\n    assert.exists(selectedTreeElement);\n    assert.isTrue(selectedTreeElement.expanded);\n\n    assert.strictEqual(selectedNode.nodeName(), 'BODY');\n\n    assert.isFalse(treeOutline.isToggledToHidden(selectedNode));\n\n    const mockResolveToObject = sinon.mock().twice().returns({callFunction: () => {}, release: () => {}});\n    selectedNode.resolveToObject = mockResolveToObject;\n\n    // Mock out a few things in the UI that's not necessary for this test.\n    const insertChildElement = sinon.mock().atLeast(1).returns(undefined);\n    treeOutline.insertChildElement = insertChildElement;\n    const animateOnDOMUpdate = sinon.mock().atLeast(1).returns(undefined);\n    Elements.ElementsTreeElement.ElementsTreeElement.animateOnDOMUpdate = animateOnDOMUpdate;\n    const stylesSidebarPaneUpdate = sinon.mock().atLeast(1).returns(undefined);\n    panel.stylesWidget.performUpdate = stylesSidebarPaneUpdate;\n\n    await treeOutline.toggleHideElement(selectedNode);\n    assert.isTrue(treeOutline.isToggledToHidden(selectedNode));\n\n    treeOutline.duplicateNode(selectedNode);\n    await raf();\n\n    const copiedNode = selectedNode.nextSibling;\n    assert.exists(copiedNode);\n    assert.strictEqual(copiedNode.nodeName(), 'BODY');\n    assert.isTrue(copiedNode !== null && treeOutline.isToggledToHidden(copiedNode));\n\n    treeOutline.runPendingUpdates();\n\n    panel.detach();\n  });\n\n  describe('tracking Computed styles', () => {\n    const StylesSidebarPane = Elements.StylesSidebarPane.StylesSidebarPane;\n    const ComputedStyleModel = Elements.ComputedStyleModel.ComputedStyleModel;\n    const ComputedStyleWidget = Elements.ComputedStyleWidget.ComputedStyleWidget;\n\n    let computedStyleNodeSpy: {\n      get: sinon.SinonSpy,\n      set: sinon.SinonSpy,\n    };\n    let panel: Elements.ElementsPanel.ElementsPanel;\n    let node: SDK.DOMModel.DOMNode;\n    let cssModel: sinon.SinonStubbedInstance<SDK.CSSModel.CSSModel>;\n\n    beforeEach(() => {\n      computedStyleNodeSpy = sinon.spy(ComputedStyleModel.prototype, 'node', ['get', 'set']);\n      Common.Debouncer.enableTestOverride();\n      panel = Elements.ElementsPanel.ElementsPanel.instance({forceNew: true});\n\n      cssModel = sinon.createStubInstance(SDK.CSSModel.CSSModel, {\n        target: sinon.createStubInstance(SDK.Target.Target, {\n          model: null,\n        }),\n      });\n\n      const domModel = sinon.createStubInstance(SDK.DOMModel.DOMModel, {\n        cssModel,\n      });\n      node = sinon.createStubInstance(SDK.DOMModel.DOMNode, {\n        domModel,\n      });\n      node.id = 1 as Protocol.DOM.NodeId;\n    });\n\n    afterEach(() => {\n      Common.Debouncer.disableTestOverride();\n      panel.detach();\n    });\n\n    it('updates the model when the selected DOM node changes', async () => {\n      UI.Context.Context.instance().setFlavor(SDK.DOMModel.DOMNode, node);\n      sinon.assert.calledOnceWithExactly(computedStyleNodeSpy.set, node);\n    });\n\n    it('enables tracking when a ComputedStyleWidget is created', async () => {\n      UI.Context.Context.instance().setFlavor(SDK.DOMModel.DOMNode, node);\n      const computedStylesWidget = sinon.createStubInstance(ComputedStyleWidget);\n      UI.Context.Context.instance().setFlavor(ComputedStyleWidget, computedStylesWidget);\n      await expectCall(cssModel.trackComputedStyleUpdatesForNode);\n      sinon.assert.calledOnceWithExactly(cssModel.trackComputedStyleUpdatesForNode, node.id);\n    });\n\n    it('stops tracking when the ComputedStyleWidget is removed', async () => {\n      UI.Context.Context.instance().setFlavor(SDK.DOMModel.DOMNode, node);\n\n      const computedStylesWidget = sinon.createStubInstance(ComputedStyleWidget);\n      UI.Context.Context.instance().setFlavor(ComputedStyleWidget, computedStylesWidget);\n      await expectCall(cssModel.trackComputedStyleUpdatesForNode);\n\n      sinon.assert.calledOnceWithExactly(cssModel.trackComputedStyleUpdatesForNode, node.id);\n      cssModel.trackComputedStyleUpdatesForNode.resetHistory();\n\n      UI.Context.Context.instance().setFlavor(ComputedStyleWidget, null);\n      await expectCall(cssModel.trackComputedStyleUpdatesForNode);\n      sinon.assert.calledOnceWithExactly(cssModel.trackComputedStyleUpdatesForNode, undefined);\n    });\n\n    it('enables tracking with a StylesSidebarPane and the DevToolsAnimationStylesInStylesTab experiment is enabled',\n       async () => {\n         UI.Context.Context.instance().setFlavor(SDK.DOMModel.DOMNode, node);\n         updateHostConfig({\n           devToolsAnimationStylesInStylesTab: {\n             enabled: true,\n           },\n         });\n\n         const stylesSidebarPane = sinon.createStubInstance(StylesSidebarPane);\n         UI.Context.Context.instance().setFlavor(StylesSidebarPane, stylesSidebarPane);\n         await expectCall(cssModel.trackComputedStyleUpdatesForNode);\n\n         sinon.assert.calledOnceWithExactly(cssModel.trackComputedStyleUpdatesForNode, node.id);\n       });\n\n    it('stops tracking when the StylesSidebarPane is removed', async () => {\n      UI.Context.Context.instance().setFlavor(SDK.DOMModel.DOMNode, node);\n      updateHostConfig({\n        devToolsAnimationStylesInStylesTab: {\n          enabled: true,\n        },\n      });\n\n      const stylesSidebarPane = sinon.createStubInstance(StylesSidebarPane);\n      UI.Context.Context.instance().setFlavor(StylesSidebarPane, stylesSidebarPane);\n      await expectCall(cssModel.trackComputedStyleUpdatesForNode);\n\n      sinon.assert.calledOnceWithExactly(cssModel.trackComputedStyleUpdatesForNode, node.id);\n      cssModel.trackComputedStyleUpdatesForNode.resetHistory();\n\n      UI.Context.Context.instance().setFlavor(StylesSidebarPane, null);\n      await expectCall(cssModel.trackComputedStyleUpdatesForNode);\n      sinon.assert.calledOnceWithExactly(cssModel.trackComputedStyleUpdatesForNode, undefined);\n    });\n\n    it('does not enabled tracking with a StylesSidebarPane but the DevToolsAnimationStylesInStylesTab experiment is disabled',\n       async () => {\n         UI.Context.Context.instance().setFlavor(SDK.DOMModel.DOMNode, node);\n         updateHostConfig({\n           devToolsAnimationStylesInStylesTab: {\n             enabled: false,\n           },\n         });\n         const stylesSidebarPane = sinon.createStubInstance(StylesSidebarPane);\n         UI.Context.Context.instance().setFlavor(StylesSidebarPane, stylesSidebarPane);\n         await expectCall(cssModel.trackComputedStyleUpdatesForNode);\n\n         sinon.assert.calledOnceWithExactly(cssModel.trackComputedStyleUpdatesForNode, undefined);\n       });\n  });\n});\n"]}