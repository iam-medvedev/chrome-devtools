{"version":3,"file":"StylePropertiesSection.test.js","sourceRoot":"","sources":["../../../../../../front_end/panels/elements/StylePropertiesSection.test.ts"],"names":[],"mappings":"AAAA,4DAA4D;AAC5D,yEAAyE;AACzE,6BAA6B;AAE7B,OAAO,EAAC,YAAY,EAAE,gBAAgB,EAAC,MAAM,iEAAiE,CAAC;AAC/G,OAAO,EAAC,0BAA0B,EAAC,MAAM,6DAA6D,CAAC;AACvG,OAAO,KAAK,QAAQ,MAAM,iCAAiC,CAAC;AAC5D,OAAO,KAAK,GAAG,MAAM,uBAAuB,CAAC;AAG7C,OAAO,KAAK,UAAU,MAAM,2CAA2C,CAAC;AAExE,OAAO,KAAK,QAAQ,MAAM,eAAe,CAAC;AAE1C,MAAM,EAAC,MAAM,EAAC,GAAG,IAAI,CAAC;AAEtB,QAAQ,CAAC,wBAAwB,EAAE,GAAG,EAAE;IACtC,EAAE,CAAC,kCAAkC,EAAE,KAAK,IAAI,EAAE;QAChD,MAAM,WAAW,GAAG,EAAC,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAC,CAAC;QACvC,MAAM,eAAe,GAAG,QAAQ,CAAC,sBAAsB,CAAC,sBAAsB,CAAC,eAAe,CAC1F,CAAC,EAAC,IAAI,EAAE,QAAQ,EAAE,WAAW,EAAC,CAAC,EAAE,CAAC,IAAI,CAAC,EAAE,IAAI,OAAO,EAAE,CAAC,CAAC;QAC5D,MAAM,CAAC,SAAS,CAAC,eAAe,CAAC,WAAW,EAAE,QAAQ,CAAC,CAAC;QACxD,MAAM,CAAC,SAAS,CACZ,QAAQ,CAAC,sBAAsB,CAAC,sBAAsB,CAAC,kCAAkC,CACpF,eAAe,CAAC,UAAsB,CAAC,EAC5C,WAAW,CAAC,CAAC;IACnB,CAAC,CAAC,CAAC;IAEH,EAAE,CAAC,6BAA6B,EAAE,KAAK,IAAI,EAAE;QAC3C,IAAI,eAAe,GAAG,QAAQ,CAAC,sBAAsB,CAAC,sBAAsB,CAAC,eAAe,CACxF,CAAC,EAAC,IAAI,EAAE,QAAQ,EAAE,WAAW,EAAE,EAAC,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAC,EAAC,EAAE,EAAC,IAAI,EAAE,OAAO,EAAE,WAAW,EAAE,EAAC,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAC,EAAC,CAAC,EAAE,CAAC,IAAI,CAAC,EAC7G,IAAI,OAAO,EAAE,CAAC,CAAC;QACnB,MAAM,CAAC,SAAS,CAAC,eAAe,CAAC,WAAW,EAAE,eAAe,CAAC,CAAC;QAC/D,eAAe,GAAG,QAAQ,CAAC,sBAAsB,CAAC,sBAAsB,CAAC,eAAe,CACpF,CAAC,EAAC,IAAI,EAAE,QAAQ,EAAE,WAAW,EAAE,EAAC,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAC,EAAC,EAAE,EAAC,IAAI,EAAE,SAAS,EAAE,WAAW,EAAE,EAAC,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAC,EAAC,CAAC,EAAE,CAAC,IAAI,CAAC,EAC/G,IAAI,OAAO,EAAE,CAAC,CAAC;QACnB,MAAM,CAAC,SAAS,CAAC,eAAe,CAAC,WAAW,EAAE,iBAAiB,CAAC,CAAC;QACjE,eAAe,GAAG,QAAQ,CAAC,sBAAsB,CAAC,sBAAsB,CAAC,eAAe,CACpF,CAAC,EAAC,IAAI,EAAE,SAAS,EAAE,WAAW,EAAE,EAAC,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAC,EAAC,EAAE,EAAC,IAAI,EAAE,SAAS,EAAE,WAAW,EAAE,EAAC,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAC,EAAC,CAAC,EACxG,CAAC,IAAI,CAAC,EAAE,IAAI,OAAO,EAAE,CAAC,CAAC;QAC3B,MAAM,CAAC,SAAS,CAAC,eAAe,CAAC,WAAW,EAAE,kBAAkB,CAAC,CAAC;IACpE,CAAC,CAAC,CAAC;AACL,CAAC,CAAC,CAAC;AAEH,SAAS,WAAW,CAChB,QAA+B,EAAE,MAAqC,EAAE,YAAuC,EAC/G,MAAiD,EACjD,OAA8D;IAChE,QAAQ,CAAC,eAAe,CAAC;QACvB,YAAY;QACZ,OAAO,EAAE,EAA2B;QACpC,SAAS,EAAE,EAAE;QACb,MAAM;QACN,KAAK,EAAE,EAAE;QACT,QAAQ,EAAE,KAAK;QACf,QAAQ,EAAE,KAAK;QACf,SAAS,EAAE,KAAK;QAChB,aAAa,EAAE,KAAK;QACpB,SAAS,EAAE,CAAC;QACZ,WAAW,EAAE,CAAC;QACd,MAAM,EAAE,CAAC;QACT,OAAO,EAAE,CAAC;QACV,SAAS,EAAE,CAAC;QACZ,GAAG,MAAM;KACV,CAAC,CAAC;IACH,OAAO,GAAG,CAAC,gBAAgB,CAAC,gBAAgB,CAAC,MAAM,CAAC;QAClD,QAAQ;QACR,IAAI,EAAE,KAAK,CAAC,kBAAkB,CAAC,GAAG,CAAC,QAAQ,CAAC,OAAO,CAAC;QACpD,aAAa,EAAE,IAAI;QACnB,iBAAiB,EAAE,IAAI;QACvB,cAAc,EAAE,EAAE;QAClB,aAAa,EAAE,EAAE;QACjB,gBAAgB,EAAE,EAAE;QACpB,sBAAsB,EAAE,EAAE;QAC1B,iBAAiB,EAAE,EAAE;QACrB,kBAAkB,EAAE,SAAS;QAC7B,qBAAqB,EAAE,EAAE;QACzB,aAAa,EAAE,EAAE;QACjB,wBAAwB,EAAE,EAAE;QAC5B,qBAAqB,EAAE,SAAS;QAChC,GAAG,OAAO;KACX,CAAC,CAAC;AACL,CAAC;AAED,0BAA0B,CAAC,uBAAuB,EAAE,GAAG,EAAE;IACvD,EAAE,CAAC,kEAAkE,EAAE,KAAK,IAAI,EAAE;QAChF,MAAM,QAAQ,GAAG,YAAY,EAAE,CAAC,KAAK,CAAC,GAAG,CAAC,QAAQ,CAAC,QAAQ,CAAC,CAAC;QAC7D,QAAQ,CAAC,wBAAwB,CAAC,QAAQ,CAAC,CAAC;QAC5C,MAAM,MAAM,wDAAwC,CAAC;QACrD,MAAM,YAAY,GAAG,GAAgC,CAAC;QACtD,MAAM,KAAK,GAAG,EAAC,SAAS,EAAE,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,WAAW,EAAE,CAAC,EAAE,SAAS,EAAE,CAAC,EAAC,CAAC;QACvE,MAAM,MAAM,GACR,EAAC,SAAS,EAAE,iBAAiB,EAAE,SAAS,EAAE,IAAI,EAAE,aAAa,EAAE,IAAI,EAAE,YAAY,EAAE,IAAI,EAAE,MAAM,EAAE,CAAC,EAAE,GAAG,KAAK,EAAC,CAAC;QAClH,MAAM,cAAc,GAA6B,CAAC;gBAChD,IAAI,EAAE;oBACJ,YAAY,EAAE,EAAC,SAAS,EAAE,CAAC,EAAC,IAAI,EAAE,KAAK,EAAC,CAAC,EAAE,IAAI,EAAE,KAAK,EAAC;oBACvD,MAAM;oBACN,YAAY;oBACZ,KAAK,EAAE,EAAC,aAAa,EAAE,CAAC,EAAC,IAAI,EAAE,OAAO,EAAE,KAAK,EAAE,KAAK,EAAC,CAAC,EAAE,gBAAgB,EAAE,EAAE,EAAE,KAAK,EAAC;iBACrF;gBACD,iBAAiB,EAAE,CAAC,CAAC,CAAC;aACvB,CAAC,CAAC;QACH,MAAM,aAAa,GAAG,MAAM,WAAW,CAAC,QAAQ,EAAE,MAAM,EAAE,YAAY,EAAE,MAAM,EAAE,EAAC,cAAc,EAAC,CAAC,CAAC;QAElG,MAAM,IAAI,GAAG,aAAa,CAAC,UAAU,EAAE,CAAC,CAAC,CAAC,CAAC,UAAU,CAAC;QACtD,MAAM,SAAS,GAAG,KAAK,CAAC,kBAAkB,CAAC,UAAU,CAAC,SAAS,CAAC,SAAS,CAAC,CAAC;QAC3E,MAAM,UAAU,GACZ,QAAQ,CAAC,sBAAsB,CAAC,sBAAsB,CAAC,oBAAoB,CAAC,aAAa,EAAE,SAAS,EAAE,IAAI,CAAC,CAAC;QAChH,MAAM,CAAC,WAAW,CAAC,UAAU,CAAC,WAAW,EAAE,SAAS,CAAC,CAAC;QACtD,MAAM,CAAC,MAAM,CAAC,SAAS,CAAC,kBAAkB,CAAC,UAAU,CAAC,CAAC;QACvD,MAAM,CAAC,WAAW,CAAC,SAAS,CAAC,kBAAkB,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,YAAY,EAAE,YAAY,CAAC,CAAC;QACvF,MAAM,CAAC,WAAW,CAAC,SAAS,CAAC,kBAAkB,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,GAAG,EAAE,iBAAiB,CAAC,CAAC;IACrF,CAAC,CAAC,CAAC;IAEH,EAAE,CAAC,yEAAyE,EAAE,KAAK,IAAI,EAAE;QACvF,MAAM,QAAQ,GAAG,YAAY,EAAE,CAAC,KAAK,CAAC,GAAG,CAAC,QAAQ,CAAC,QAAQ,CAAC,CAAC;QAC7D,QAAQ,CAAC,wBAAwB,CAAC,QAAQ,CAAC,CAAC;QAC5C,MAAM,MAAM,wDAAwC,CAAC;QACrD,MAAM,YAAY,GAAG,GAAgC,CAAC;QACtD,MAAM,KAAK,GAAG,EAAC,SAAS,EAAE,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,WAAW,EAAE,CAAC,EAAE,SAAS,EAAE,CAAC,EAAC,CAAC;QACvE,MAAM,MAAM,GAA8C;YACxD,YAAY,EAAE,wCAAwC;YACtD,SAAS,EAAE,IAAI;YACf,aAAa,EAAE,IAAI;YACnB,MAAM,EAAE,CAAC;YACT,GAAG,KAAK;SACT,CAAC;QACF,MAAM,cAAc,GAA6B,CAAC;gBAChD,IAAI,EAAE;oBACJ,YAAY,EAAE,EAAC,SAAS,EAAE,CAAC,EAAC,IAAI,EAAE,KAAK,EAAC,CAAC,EAAE,IAAI,EAAE,KAAK,EAAC;oBACvD,MAAM;oBACN,YAAY;oBACZ,KAAK,EAAE,EAAC,aAAa,EAAE,CAAC,EAAC,IAAI,EAAE,OAAO,EAAE,KAAK,EAAE,KAAK,EAAC,CAAC,EAAE,gBAAgB,EAAE,EAAE,EAAE,KAAK,EAAC;iBACrF;gBACD,iBAAiB,EAAE,CAAC,CAAC,CAAC;aACvB,CAAC,CAAC;QAEH,KAAK,CAAC,IAAI,CAAC,GAAG,CAAC,kBAAkB,CAAC,kBAAkB,CAAC,QAAQ,EAAE,EAAE,cAAc,CAAC,CAAC,SAAS,CAAC,GAAG,CAAC,EAAE,CAAC,OAAO,CAAC,OAAO,CAAC;YAChH,OAAO,EAAE,GAAG,KAAK,MAAM,CAAC,YAAY,CAAC,CAAC,CAAC,iBAAiB,CAAC,CAAC,CAAC,EAAE;SAC9D,CAAC,CAAC,CAAC;QACJ,MAAM,aAAa,GAAG,MAAM,WAAW,CAAC,QAAQ,EAAE,MAAM,EAAE,YAAY,EAAE,MAAM,EAAE,EAAC,cAAc,EAAC,CAAC,CAAC;QAElG,MAAM,gBAAgB,GAAG,QAAQ,CAAC,qBAAqB,CAAC,YAAY,CAAC,CAAC;QACtE,QAAQ,CAAC,wBAAwB,CAAC,gBAAgB,CAAC,CAAC;QACpD,MAAM,SAAS,GAAG,MAAM,QAAQ,CAAC,gBAAgB,EAAE,CAAC,yBAAyB,CAAC,gBAAgB,CAAC,CAAC;QAChG,QAAQ,CAAC,wBAAwB,CAAC,SAAS,CAAC,CAAC;QAE7C,MAAM,IAAI,GAAG,aAAa,CAAC,UAAU,EAAE,CAAC,CAAC,CAAC,CAAC,UAAU,CAAC;QACtD,MAAM,SAAS,GAAG,KAAK,CAAC,kBAAkB,CAAC,UAAU,CAAC,SAAS,CAAC,SAAS,CAAC,CAAC;QAC3E,MAAM,UAAU,GACZ,QAAQ,CAAC,sBAAsB,CAAC,sBAAsB,CAAC,oBAAoB,CAAC,aAAa,EAAE,SAAS,EAAE,IAAI,CAAC,CAAC;QAChH,MAAM,CAAC,WAAW,CAAC,UAAU,CAAC,WAAW,EAAE,wBAAwB,CAAC,CAAC;QACrE,MAAM,CAAC,MAAM,CAAC,SAAS,CAAC,kBAAkB,CAAC,UAAU,CAAC,CAAC;QACvD,kGAAkG;QAClG,+GAA+G;QAC/G,4BAA4B;QAC5B,MAAM,CAAC,WAAW,CAAC,SAAS,CAAC,kBAAkB,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,YAAY,EAAE,YAAY,CAAC,CAAC;QACvF,MAAM,CAAC,WAAW,CAAC,SAAS,CAAC,kBAAkB,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,GAAG,EAAE,EAAE,CAAC,CAAC;IACtE,CAAC,CAAC,CAAC;IAEH,EAAE,CAAC,sCAAsC,EAAE,KAAK,IAAI,EAAE;QACpD,gBAAgB,EAAE,CAAC;QACnB,MAAM,QAAQ,GAAG,YAAY,EAAE,CAAC,KAAK,CAAC,GAAG,CAAC,QAAQ,CAAC,QAAQ,CAAC,CAAC;QAC7D,QAAQ,CAAC,wBAAwB,CAAC,QAAQ,CAAC,CAAC;QAC5C,MAAM,iBAAiB,GAAG,QAAQ,CAAC,iBAAiB,CAAC,iBAAiB,CAAC,QAAQ,CAAC,EAAC,QAAQ,EAAE,IAAI,EAAC,CAAC,CAAC;QAClG,MAAM,MAAM,wDAAwC,CAAC;QACrD,MAAM,YAAY,GAAG,GAAgC,CAAC;QACtD,MAAM,KAAK,GAAG,EAAC,SAAS,EAAE,CAAC,EAAE,WAAW,EAAE,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,SAAS,EAAE,CAAC,EAAC,CAAC;QACvE,MAAM,YAAY,GAAuB,EAAC,IAAI,EAAE,QAAQ,EAAE,KAAK,EAAC,CAAC;QACjE,MAAM,iBAAiB,GAA0B;YAC/C,aAAa,EAAE;gBACb,EAAC,IAAI,EAAE,UAAU,EAAE,KAAK,EAAE,OAAO,EAAC;gBAClC,EAAC,IAAI,EAAE,eAAe,EAAE,KAAK,EAAE,KAAK,EAAC;gBACrC,EAAC,IAAI,EAAE,QAAQ,EAAE,KAAK,EAAE,WAAW,EAAC;aACrC;YACD,gBAAgB,EAAE,EAAE;SACrB,CAAC;QAEF,MAAM,aAAa,GAAmC,CAAC;gBACrD,YAAY;gBACZ,MAAM;gBACN,KAAK,EAAE,iBAAiB;gBACxB,YAAY;aACb,CAAC,CAAC;QACH,MAAM,cAAc,GAA6B,CAAC;gBAChD,IAAI,EAAE;oBACJ,YAAY,EAAE,EAAC,SAAS,EAAE,CAAC,EAAC,IAAI,EAAE,KAAK,EAAC,CAAC,EAAE,IAAI,EAAE,KAAK,EAAC;oBACvD,MAAM;oBACN,KAAK,EAAE,EAAC,aAAa,EAAE,CAAC,EAAC,IAAI,EAAE,YAAY,CAAC,IAAI,EAAE,KAAK,EAAE,KAAK,EAAC,CAAC,EAAE,gBAAgB,EAAE,EAAE,EAAC;iBACxF;gBACD,iBAAiB,EAAE,CAAC,CAAC,CAAC;aACvB,CAAC,CAAC;QAEH,MAAM,aAAa,GACf,MAAM,WAAW,CAAC,QAAQ,EAAE,MAAM,EAAE,YAAY,EAAE,EAAC,GAAG,KAAK,EAAC,EAAE,EAAC,aAAa,EAAE,cAAc,EAAC,CAAC,CAAC;QAEnG,SAAS,oBAAoB,CAAC,IAA8B;YAC1D,MAAM,CAAC,UAAU,CAAC,IAAI,EAAE,GAAG,CAAC,OAAO,CAAC,eAAe,CAAC,CAAC;QACvD,CAAC;QACD,MAAM,WAAW,GAAG,aAAa,CAAC,qBAAqB,CAAC,YAAY,CAAC,IAAI,CAAC,EAAE,KAAK,EAAE,CAAC;QACpF,QAAQ,CAAC,wBAAwB,CAAC,WAAW,CAAC,CAAC;QAC/C,MAAM,IAAI,GAAG,WAAW,CAAC,UAAU,CAAC;QACpC,oBAAoB,CAAC,IAAI,CAAC,CAAC;QAC3B,MAAM,OAAO,GAAG,IAAI,QAAQ,CAAC,sBAAsB,CAAC,2BAA2B,CAC3E,iBAAiB,EAAE,aAAa,EAAE,WAAW,EAAE,CAAC,EAAE,YAAY,CAAC,IAAI,EAAE,uBAAuB,CAAC,IAAI,CAAC,CAAC;QAEvG,MAAM,cAAc,GAAG,KAAK,CAAC,GAAG,CAAC,iBAAiB,EAAE,aAAa,CAAC,CAAC;QACnE,MAAM,UAAU,GAAG,KAAK,CAAC,IAAI,CAAC,QAAQ,EAAE,6BAA6B,CAAC,CAAC;QACvE,UAAU,CAAC,OAAO,CAAC,OAAO,CAAC,OAAO,CAAC,IAAI,CAAC,CAAC,CAAC;QAC1C,MAAM,OAAO,CAAC,aAAa,CAAC,IAAI,EAAE,YAAY,CAAC,IAAI,CAAC,CAAC;QAErD,MAAM,CAAC,MAAM,CAAC,cAAc,CAAC,WAAW,CAAC,UAAU,CAAC,CAAC,CAAC;QACtD,MAAM,CAAC,MAAM,CAAC,UAAU,CAAC,qBAAqB,CAC1C,YAAY,EACZ,KAAK,CAAC,KAAK,CACP,CAAC,CAAgC,EAAE,EAAE,CAAC,CAAC,CAAC,SAAS,KAAK,KAAK,CAAC,SAAS;YACjE,CAAC,CAAC,WAAW,KAAK,KAAK,CAAC,WAAW,IAAI,CAAC,CAAC,OAAO,KAAK,KAAK,CAAC,OAAO,IAAI,CAAC,CAAC,SAAS,KAAK,KAAK,CAAC,SAAS,CAAC,EAC9G,YAAY,CAAC,IAAI,CAAC,CAAC,CAAC;IAC1B,CAAC,CAAC,CAAC;AACL,CAAC,CAAC,CAAC","sourcesContent":["// Copyright 2023 The Chromium Authors. All rights reserved.\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\n\nimport {createTarget, stubNoopSettings} from '../../../test/unittests/front_end/helpers/EnvironmentHelpers.js';\nimport {describeWithMockConnection} from '../../../test/unittests/front_end/helpers/MockConnection.js';\nimport * as Platform from '../../core/platform/platform.js';\nimport * as SDK from '../../core/sdk/sdk.js';\nimport * as Protocol from '../../generated/protocol.js';\nimport type * as TextUtils from '../../models/text_utils/text_utils.js';\nimport * as Components from '../../ui/legacy/components/utils/utils.js';\n\nimport * as Elements from './elements.js';\n\nconst {assert} = chai;\n\ndescribe('StylePropertiesSection', () => {\n  it('contains specificity information', async () => {\n    const specificity = {a: 0, b: 1, c: 0};\n    const selectorElement = Elements.StylePropertiesSection.StylePropertiesSection.renderSelectors(\n        [{text: '.child', specificity}], [true], new WeakMap());\n    assert.deepEqual(selectorElement.textContent, '.child');\n    assert.deepEqual(\n        Elements.StylePropertiesSection.StylePropertiesSection.getSpecificityStoredForNodeElement(\n            (selectorElement.firstChild as Element)),\n        specificity);\n  });\n\n  it('renders selectors correctly', async () => {\n    let selectorElement = Elements.StylePropertiesSection.StylePropertiesSection.renderSelectors(\n        [{text: '.child', specificity: {a: 0, b: 2, c: 0}}, {text: '.item', specificity: {a: 0, b: 2, c: 0}}], [true],\n        new WeakMap());\n    assert.deepEqual(selectorElement.textContent, '.child, .item');\n    selectorElement = Elements.StylePropertiesSection.StylePropertiesSection.renderSelectors(\n        [{text: '.child', specificity: {a: 0, b: 2, c: 0}}, {text: '& .item', specificity: {a: 0, b: 2, c: 0}}], [true],\n        new WeakMap());\n    assert.deepEqual(selectorElement.textContent, '.child, & .item');\n    selectorElement = Elements.StylePropertiesSection.StylePropertiesSection.renderSelectors(\n        [{text: '&.child', specificity: {a: 0, b: 2, c: 0}}, {text: '& .item', specificity: {a: 0, b: 2, c: 0}}],\n        [true], new WeakMap());\n    assert.deepEqual(selectorElement.textContent, '&.child, & .item');\n  });\n});\n\nfunction setUpStyles(\n    cssModel: SDK.CSSModel.CSSModel, origin: Protocol.CSS.StyleSheetOrigin, styleSheetId: Protocol.CSS.StyleSheetId,\n    header: Partial<Protocol.CSS.CSSStyleSheetHeader>,\n    payload: Partial<SDK.CSSMatchedStyles.CSSMatchedStylesPayload>): Promise<SDK.CSSMatchedStyles.CSSMatchedStyles> {\n  cssModel.styleSheetAdded({\n    styleSheetId,\n    frameId: '' as Protocol.Page.FrameId,\n    sourceURL: '',\n    origin,\n    title: '',\n    disabled: false,\n    isInline: false,\n    isMutable: false,\n    isConstructed: false,\n    startLine: 0,\n    startColumn: 0,\n    length: 0,\n    endLine: 0,\n    endColumn: 0,\n    ...header,\n  });\n  return SDK.CSSMatchedStyles.CSSMatchedStyles.create({\n    cssModel,\n    node: sinon.createStubInstance(SDK.DOMModel.DOMNode),\n    inlinePayload: null,\n    attributesPayload: null,\n    matchedPayload: [],\n    pseudoPayload: [],\n    inheritedPayload: [],\n    inheritedPseudoPayload: [],\n    animationsPayload: [],\n    parentLayoutNodeId: undefined,\n    positionFallbackRules: [],\n    propertyRules: [],\n    cssPropertyRegistrations: [],\n    fontPaletteValuesRule: undefined,\n    ...payload,\n  });\n}\n\ndescribeWithMockConnection('StylesPropertySection', () => {\n  it('displays the proper sourceURL origin for constructed stylesheets', async () => {\n    const cssModel = createTarget().model(SDK.CSSModel.CSSModel);\n    Platform.assertNotNullOrUndefined(cssModel);\n    const origin = Protocol.CSS.StyleSheetOrigin.Regular;\n    const styleSheetId = '0' as Protocol.CSS.StyleSheetId;\n    const range = {startLine: 0, endLine: 1, startColumn: 0, endColumn: 0};\n    const header =\n        {sourceURL: 'constructed.css', isMutable: true, isConstructed: true, hasSourceURL: true, length: 1, ...range};\n    const matchedPayload: Protocol.CSS.RuleMatch[] = [{\n      rule: {\n        selectorList: {selectors: [{text: 'div'}], text: 'div'},\n        origin,\n        styleSheetId,\n        style: {cssProperties: [{name: 'color', value: 'red'}], shorthandEntries: [], range},\n      },\n      matchingSelectors: [0],\n    }];\n    const matchedStyles = await setUpStyles(cssModel, origin, styleSheetId, header, {matchedPayload});\n\n    const rule = matchedStyles.nodeStyles()[0].parentRule;\n    const linkifier = sinon.createStubInstance(Components.Linkifier.Linkifier);\n    const originNode =\n        Elements.StylePropertiesSection.StylePropertiesSection.createRuleOriginNode(matchedStyles, linkifier, rule);\n    assert.strictEqual(originNode.textContent, '<style>');\n    assert.isTrue(linkifier.linkifyCSSLocation.calledOnce);\n    assert.strictEqual(linkifier.linkifyCSSLocation.args[0][0].styleSheetId, styleSheetId);\n    assert.strictEqual(linkifier.linkifyCSSLocation.args[0][0].url, 'constructed.css');\n  });\n\n  it('displays the proper sourceMappingURL origin for constructed stylesheets', async () => {\n    const cssModel = createTarget().model(SDK.CSSModel.CSSModel);\n    Platform.assertNotNullOrUndefined(cssModel);\n    const origin = Protocol.CSS.StyleSheetOrigin.Regular;\n    const styleSheetId = '0' as Protocol.CSS.StyleSheetId;\n    const range = {startLine: 0, endLine: 1, startColumn: 0, endColumn: 0};\n    const header: Partial<Protocol.CSS.CSSStyleSheetHeader> = {\n      sourceMapURL: 'http://example.com/constructed.css.map',\n      isMutable: true,\n      isConstructed: true,\n      length: 1,\n      ...range,\n    };\n    const matchedPayload: Protocol.CSS.RuleMatch[] = [{\n      rule: {\n        selectorList: {selectors: [{text: 'div'}], text: 'div'},\n        origin,\n        styleSheetId,\n        style: {cssProperties: [{name: 'color', value: 'red'}], shorthandEntries: [], range},\n      },\n      matchingSelectors: [0],\n    }];\n\n    sinon.stub(SDK.PageResourceLoader.PageResourceLoader.instance(), 'loadResource').callsFake(url => Promise.resolve({\n      content: url === header.sourceMapURL ? '{\"sources\": []}' : '',\n    }));\n    const matchedStyles = await setUpStyles(cssModel, origin, styleSheetId, header, {matchedPayload});\n\n    const styleSheetHeader = cssModel.styleSheetHeaderForId(styleSheetId);\n    Platform.assertNotNullOrUndefined(styleSheetHeader);\n    const sourceMap = await cssModel.sourceMapManager().sourceMapForClientPromise(styleSheetHeader);\n    Platform.assertNotNullOrUndefined(sourceMap);\n\n    const rule = matchedStyles.nodeStyles()[0].parentRule;\n    const linkifier = sinon.createStubInstance(Components.Linkifier.Linkifier);\n    const originNode =\n        Elements.StylePropertiesSection.StylePropertiesSection.createRuleOriginNode(matchedStyles, linkifier, rule);\n    assert.strictEqual(originNode.textContent, 'constructed stylesheet');\n    assert.isTrue(linkifier.linkifyCSSLocation.calledOnce);\n    // Since we already asserted that a sourcemap exists for our header, it's sufficient to check that\n    // linkifyCSSLocation has been called. Verifying that linkifyCSSLocation applies source mapping is out of scope\n    // for this unit under test.\n    assert.strictEqual(linkifier.linkifyCSSLocation.args[0][0].styleSheetId, styleSheetId);\n    assert.strictEqual(linkifier.linkifyCSSLocation.args[0][0].url, '');\n  });\n\n  it('updates property rule property names', async () => {\n    stubNoopSettings();\n    const cssModel = createTarget().model(SDK.CSSModel.CSSModel);\n    Platform.assertNotNullOrUndefined(cssModel);\n    const stylesSidebarPane = Elements.StylesSidebarPane.StylesSidebarPane.instance({forceNew: true});\n    const origin = Protocol.CSS.StyleSheetOrigin.Regular;\n    const styleSheetId = '0' as Protocol.CSS.StyleSheetId;\n    const range = {startLine: 0, startColumn: 0, endLine: 0, endColumn: 6};\n    const propertyName: Protocol.CSS.Value = {text: '--prop', range};\n    const propertyRuleStyle: Protocol.CSS.CSSStyle = {\n      cssProperties: [\n        {name: 'inherits', value: 'false'},\n        {name: 'initial-value', value: 'red'},\n        {name: 'syntax', value: '\"<color>\"'},\n      ],\n      shorthandEntries: [],\n    };\n\n    const propertyRules: Protocol.CSS.CSSPropertyRule[] = [{\n      propertyName,\n      origin,\n      style: propertyRuleStyle,\n      styleSheetId,\n    }];\n    const matchedPayload: Protocol.CSS.RuleMatch[] = [{\n      rule: {\n        selectorList: {selectors: [{text: 'div'}], text: 'div'},\n        origin,\n        style: {cssProperties: [{name: propertyName.text, value: 'red'}], shorthandEntries: []},\n      },\n      matchingSelectors: [0],\n    }];\n\n    const matchedStyles =\n        await setUpStyles(cssModel, origin, styleSheetId, {...range}, {propertyRules, matchedPayload});\n\n    function assertIsPropertyRule(rule: SDK.CSSRule.CSSRule|null): asserts rule is SDK.CSSRule.CSSPropertyRule {\n      assert.instanceOf(rule, SDK.CSSRule.CSSPropertyRule);\n    }\n    const declaration = matchedStyles.getRegisteredProperty(propertyName.text)?.style();\n    Platform.assertNotNullOrUndefined(declaration);\n    const rule = declaration.parentRule;\n    assertIsPropertyRule(rule);\n    const section = new Elements.StylePropertiesSection.RegisteredPropertiesSection(\n        stylesSidebarPane, matchedStyles, declaration, 0, propertyName.text, /* expandedByDefault=*/ true);\n\n    const forceUpdateSpy = sinon.spy(stylesSidebarPane, 'forceUpdate');\n    const setNameSpy = sinon.stub(cssModel, 'setPropertyRulePropertyName');\n    setNameSpy.returns(Promise.resolve(true));\n    await section.setHeaderText(rule, propertyName.text);\n\n    assert.isTrue(forceUpdateSpy.calledAfter(setNameSpy));\n    assert.isTrue(setNameSpy.calledOnceWithExactly(\n        styleSheetId,\n        sinon.match(\n            (r: TextUtils.TextRange.TextRange) => r.startLine === range.startLine &&\n                r.startColumn === range.startColumn && r.endLine === range.endLine && r.endColumn === range.endColumn),\n        propertyName.text));\n  });\n});\n"]}