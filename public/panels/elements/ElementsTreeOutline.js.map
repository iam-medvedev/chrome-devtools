{"version":3,"file":"ElementsTreeOutline.js","sourceRoot":"","sources":["../../../../../../front_end/panels/elements/ElementsTreeOutline.ts"],"names":[],"mappings":"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","sourcesContent":["// Copyright 2021 The Chromium Authors\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\n/* eslint-disable rulesdir/no-imperative-dom-api */\n/* eslint-disable rulesdir/no-lit-render-outside-of-view */\n\n/*\n * Copyright (C) 2007, 2008 Apple Inc.  All rights reserved.\n * Copyright (C) 2008 Matt Lilek <webkit@mattlilek.com>\n * Copyright (C) 2009 Joseph Pecoraro\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions\n * are met:\n *\n * 1.  Redistributions of source code must retain the above copyright\n *     notice, this list of conditions and the following disclaimer.\n * 2.  Redistributions in binary form must reproduce the above copyright\n *     notice, this list of conditions and the following disclaimer in the\n *     documentation and/or other materials provided with the distribution.\n * 3.  Neither the name of Apple Computer, Inc. (\"Apple\") nor the names of\n *     its contributors may be used to endorse or promote products derived\n *     from this software without specific prior written permission.\n *\n * THIS SOFTWARE IS PROVIDED BY APPLE AND ITS CONTRIBUTORS \"AS IS\" AND ANY\n * EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL APPLE OR ITS CONTRIBUTORS BE LIABLE FOR ANY\n * DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF\n * THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */\n\nimport * as Common from '../../core/common/common.js';\nimport * as i18n from '../../core/i18n/i18n.js';\nimport * as SDK from '../../core/sdk/sdk.js';\nimport * as Badges from '../../models/badges/badges.js';\nimport * as Elements from '../../models/elements/elements.js';\nimport * as IssuesManager from '../../models/issues_manager/issues_manager.js';\nimport * as CodeHighlighter from '../../ui/components/code_highlighter/code_highlighter.js';\nimport * as CopyToClipboard from '../../ui/components/copy_to_clipboard/copy_to_clipboard.js';\nimport * as IssueCounter from '../../ui/components/issue_counter/issue_counter.js';\nimport * as UI from '../../ui/legacy/legacy.js';\nimport {html, nothing, render} from '../../ui/lit/lit.js';\nimport * as VisualLogging from '../../ui/visual_logging/visual_logging.js';\n\nimport {getElementIssueDetails} from './ElementIssueUtils.js';\nimport {ElementsPanel} from './ElementsPanel.js';\nimport {ElementsTreeElement, InitialChildrenLimit, isOpeningTag} from './ElementsTreeElement.js';\nimport elementsTreeOutlineStyles from './elementsTreeOutline.css.js';\nimport {ImagePreviewPopover} from './ImagePreviewPopover.js';\nimport type {MarkerDecoratorRegistration} from './MarkerDecorator.js';\nimport {ShortcutTreeElement} from './ShortcutTreeElement.js';\nimport {TopLayerContainer} from './TopLayerContainer.js';\n\nconst UIStrings = {\n  /**\n   * @description ARIA accessible name in Elements Tree Outline of the Elements panel\n   */\n  pageDom: 'Page DOM',\n  /**\n   * @description A context menu item to store a value as a global variable the Elements Panel\n   */\n  storeAsGlobalVariable: 'Store as global variable',\n  /**\n   * @description Tree element expand all button element button text content in Elements Tree Outline of the Elements panel\n   * @example {3} PH1\n   */\n  showAllNodesDMore: 'Show all nodes ({PH1} more)',\n  /**\n   * @description Text for popover that directs to Issues panel\n   */\n  viewIssue: 'View Issue:',\n} as const;\nconst str_ = i18n.i18n.registerUIStrings('panels/elements/ElementsTreeOutline.ts', UIStrings);\nconst i18nString = i18n.i18n.getLocalizedString.bind(undefined, str_);\nconst elementsTreeOutlineByDOMModel = new WeakMap<SDK.DOMModel.DOMModel, ElementsTreeOutline>();\n\nconst populatedTreeElements = new Set<ElementsTreeElement>();\n\nexport type View = typeof DEFAULT_VIEW;\n\ninterface ViewInput {\n  omitRootDOMNode: boolean;\n  selectEnabled: boolean;\n  hideGutter: boolean;\n  visibleWidth?: number;\n  visible?: boolean;\n  wrap: boolean;\n  showSelectionOnKeyboardFocus: boolean;\n  preventTabOrder: boolean;\n  deindentSingleNode: boolean;\n  currentHighlightedNode: SDK.DOMModel.DOMNode|null;\n\n  onSelectedNodeChanged:\n      (event: Common.EventTarget.EventTargetEvent<{node: SDK.DOMModel.DOMNode | null, focus: boolean}>) => void;\n  onElementsTreeUpdated: (event: Common.EventTarget.EventTargetEvent<SDK.DOMModel.DOMNode[]>) => void;\n  onElementCollapsed: () => void;\n  onElementExpanded: () => void;\n}\n\ninterface ViewOutput {\n  elementsTreeOutline?: ElementsTreeOutline;\n  highlightedTreeElement: ElementsTreeElement|null;\n  alreadyExpandedParentTreeElement: ElementsTreeElement|null;\n}\n\nexport const DEFAULT_VIEW = (input: ViewInput, output: ViewOutput, target: HTMLElement): void => {\n  if (!output.elementsTreeOutline) {\n    // FIXME: this is basically a ref to existing imperative\n    // implementation. Once this is declarative the ref should not be\n    // needed.\n    output.elementsTreeOutline = new ElementsTreeOutline(input.omitRootDOMNode, input.selectEnabled, input.hideGutter);\n    output.elementsTreeOutline.addEventListener(\n        ElementsTreeOutline.Events.SelectedNodeChanged, input.onSelectedNodeChanged, this);\n    output.elementsTreeOutline.addEventListener(\n        ElementsTreeOutline.Events.ElementsTreeUpdated, input.onElementsTreeUpdated, this);\n    output.elementsTreeOutline.addEventListener(UI.TreeOutline.Events.ElementExpanded, input.onElementCollapsed, this);\n    output.elementsTreeOutline.addEventListener(UI.TreeOutline.Events.ElementCollapsed, input.onElementExpanded, this);\n    target.appendChild(output.elementsTreeOutline.element);\n  }\n  if (input.visibleWidth !== undefined) {\n    output.elementsTreeOutline.setVisibleWidth(input.visibleWidth);\n  }\n  if (input.visible !== undefined) {\n    output.elementsTreeOutline.setVisible(input.visible);\n  }\n  output.elementsTreeOutline.setWordWrap(input.wrap);\n  output.elementsTreeOutline.setShowSelectionOnKeyboardFocus(input.showSelectionOnKeyboardFocus, input.preventTabOrder);\n  if (input.deindentSingleNode) {\n    output.elementsTreeOutline.deindentSingleNode();\n  }\n  // Node highlighting logic. FIXME: express as a lit template.\n  const previousHighlightedNode = output.highlightedTreeElement?.node() ?? null;\n  if (previousHighlightedNode !== input.currentHighlightedNode) {\n    let treeElement: ElementsTreeElement|null = null;\n\n    if (output.highlightedTreeElement) {\n      let currentTreeElement: ElementsTreeElement|null = output.highlightedTreeElement;\n      while (currentTreeElement && currentTreeElement !== output.alreadyExpandedParentTreeElement) {\n        if (currentTreeElement.expanded) {\n          currentTreeElement.collapse();\n        }\n\n        const parent: UI.TreeOutline.TreeElement|null = currentTreeElement.parent;\n        currentTreeElement = parent instanceof ElementsTreeElement ? parent : null;\n      }\n    }\n\n    output.highlightedTreeElement = null;\n    output.alreadyExpandedParentTreeElement = null;\n    if (input.currentHighlightedNode) {\n      let deepestExpandedParent: SDK.DOMModel.DOMNode|null = input.currentHighlightedNode;\n      const treeElementByNode = output.elementsTreeOutline.treeElementByNode;\n\n      const treeIsNotExpanded = (deepestExpandedParent: SDK.DOMModel.DOMNode): boolean => {\n        const element = treeElementByNode.get(deepestExpandedParent);\n        return element ? !element.expanded : true;\n      };\n      while (deepestExpandedParent && treeIsNotExpanded(deepestExpandedParent)) {\n        deepestExpandedParent = deepestExpandedParent.parentNode;\n      }\n\n      output.alreadyExpandedParentTreeElement =\n          (deepestExpandedParent ? treeElementByNode.get(deepestExpandedParent) :\n                                   output.elementsTreeOutline.rootElement()) as ElementsTreeElement;\n      treeElement = output.elementsTreeOutline.createTreeElementFor(input.currentHighlightedNode);\n    }\n\n    output.highlightedTreeElement = treeElement;\n    output.elementsTreeOutline.setHoverEffect(treeElement);\n    treeElement?.reveal(true);\n  }\n};\n\n/**\n * The main goal of this presenter is to wrap ElementsTreeOutline until\n * ElementsTreeOutline can be fully integrated into DOMTreeWidget.\n *\n * FIXME: once TreeOutline is declarative, this file needs to be renamed\n * to DOMTreeWidget.ts.\n */\nexport class DOMTreeWidget extends UI.Widget.Widget {\n  omitRootDOMNode = false;\n  selectEnabled = false;\n  hideGutter = false;\n  showSelectionOnKeyboardFocus = false;\n  preventTabOrder = false;\n  deindentSingleNode = false;\n  onSelectedNodeChanged:\n      (event:\n           Common.EventTarget.EventTargetEvent<{node: SDK.DOMModel.DOMNode | null, focus: boolean}>) => void = () => {};\n  onElementsTreeUpdated: (event: Common.EventTarget.EventTargetEvent<SDK.DOMModel.DOMNode[]>) => void = () => {};\n  onDocumentUpdated: (domModel: SDK.DOMModel.DOMModel) => void = () => {};\n\n  #visible = false;\n  #visibleWidth?: number;\n  #wrap = false;\n\n  set visibleWidth(width: number) {\n    this.#visibleWidth = width;\n    this.performUpdate();\n  }\n\n  // FIXME: this is not declarative because ElementsTreeOutline can\n  // change root node internally.\n  set rootDOMNode(node: SDK.DOMModel.DOMNode|null) {\n    this.performUpdate();\n    if (!this.#viewOutput.elementsTreeOutline) {\n      throw new Error('Unexpected: missing elementsTreeOutline');\n    }\n    this.#viewOutput.elementsTreeOutline.rootDOMNode = node;\n    this.performUpdate();\n  }\n  get rootDOMNode(): SDK.DOMModel.DOMNode|null {\n    return this.#viewOutput.elementsTreeOutline?.rootDOMNode ?? null;\n  }\n\n  #currentHighlightedNode: SDK.DOMModel.DOMNode|null = null;\n\n  #view: View;\n  #viewOutput: ViewOutput = {\n    highlightedTreeElement: null,\n    alreadyExpandedParentTreeElement: null,\n  };\n  #highlightThrottler = new Common.Throttler.Throttler(100);\n\n  constructor(element?: HTMLElement, view?: View) {\n    super(element, {\n      useShadowDom: false,\n      delegatesFocus: false,\n    });\n    this.#view = view ?? DEFAULT_VIEW;\n    if (Common.Settings.Settings.instance().moduleSetting('highlight-node-on-hover-in-overlay').get()) {\n      SDK.TargetManager.TargetManager.instance().addModelListener(\n          SDK.OverlayModel.OverlayModel, SDK.OverlayModel.Events.HIGHLIGHT_NODE_REQUESTED, this.#highlightNode, this,\n          {scoped: true});\n      SDK.TargetManager.TargetManager.instance().addModelListener(\n          SDK.OverlayModel.OverlayModel, SDK.OverlayModel.Events.INSPECT_MODE_WILL_BE_TOGGLED, this.#clearState, this,\n          {scoped: true});\n    }\n  }\n\n  #highlightNode(event: Common.EventTarget.EventTargetEvent<SDK.DOMModel.DOMNode>): void {\n    void this.#highlightThrottler.schedule(() => {\n      this.#currentHighlightedNode = event.data;\n      this.requestUpdate();\n    });\n  }\n\n  #clearState(): void {\n    this.#currentHighlightedNode = null;\n    this.requestUpdate();\n  }\n\n  selectDOMNode(node: SDK.DOMModel.DOMNode|null, focus?: boolean): void {\n    this.#viewOutput?.elementsTreeOutline?.selectDOMNode(node, focus);\n  }\n\n  setWordWrap(wrap: boolean): void {\n    this.#wrap = wrap;\n    this.performUpdate();\n  }\n\n  selectedDOMNode(): SDK.DOMModel.DOMNode|null {\n    return this.#viewOutput.elementsTreeOutline?.selectedDOMNode() ?? null;\n  }\n\n  /**\n   * FIXME: this is called to re-render everything from scratch, for\n   * example, if global settings changed. Instead, the setting values\n   * should be the input for the view function.\n   */\n  reload(): void {\n    this.#viewOutput.elementsTreeOutline?.update();\n  }\n\n  /**\n   * Used by layout tests.\n   */\n  getTreeOutlineForTesting(): ElementsTreeOutline|undefined {\n    return this.#viewOutput.elementsTreeOutline;\n  }\n\n  override performUpdate(): void {\n    this.#view(\n        {\n          omitRootDOMNode: this.omitRootDOMNode,\n          selectEnabled: this.selectEnabled,\n          hideGutter: this.hideGutter,\n          visibleWidth: this.#visibleWidth,\n          visible: this.#visible,\n          wrap: this.#wrap,\n          showSelectionOnKeyboardFocus: this.showSelectionOnKeyboardFocus,\n          preventTabOrder: this.preventTabOrder,\n          deindentSingleNode: this.deindentSingleNode,\n\n          currentHighlightedNode: this.#currentHighlightedNode,\n          onElementsTreeUpdated: this.onElementsTreeUpdated.bind(this),\n          onSelectedNodeChanged: event => {\n            this.#clearState();\n            this.onSelectedNodeChanged(event);\n          },\n          onElementCollapsed: this.#clearState.bind(this),\n          onElementExpanded: this.#clearState.bind(this),\n        },\n        this.#viewOutput, this.contentElement);\n  }\n\n  modelAdded(domModel: SDK.DOMModel.DOMModel): void {\n    this.performUpdate();\n    if (!this.#viewOutput.elementsTreeOutline) {\n      throw new Error('Unexpected: missing elementsTreeOutline');\n    }\n    this.#viewOutput.elementsTreeOutline.wireToDOMModel(domModel);\n    this.performUpdate();\n  }\n\n  modelRemoved(domModel: SDK.DOMModel.DOMModel): void {\n    this.#viewOutput.elementsTreeOutline?.unwireFromDOMModel(domModel);\n    this.performUpdate();\n  }\n\n  /**\n   * FIXME: which node is expanded should be part of the view input.\n   */\n  expand(): void {\n    if (this.#viewOutput.elementsTreeOutline?.selectedTreeElement) {\n      this.#viewOutput.elementsTreeOutline.selectedTreeElement.expand();\n    }\n  }\n\n  /**\n   * FIXME: which node is selected should be part of the view input.\n   */\n  selectDOMNodeWithoutReveal(node: SDK.DOMModel.DOMNode): void {\n    this.#viewOutput.elementsTreeOutline?.findTreeElement(node)?.select();\n  }\n\n  /**\n   * FIXME: adorners should be part of the view input.\n   */\n  updateNodeAdorners(node: SDK.DOMModel.DOMNode): void {\n    void this.#viewOutput.elementsTreeOutline?.findTreeElement(node)?.updateStyleAdorners();\n  }\n\n  highlightMatch(node: SDK.DOMModel.DOMNode, query?: string): void {\n    const treeElement = this.#viewOutput.elementsTreeOutline?.findTreeElement(node);\n    if (!treeElement) {\n      return;\n    }\n    if (query) {\n      treeElement.highlightSearchResults(query);\n    }\n    treeElement.reveal();\n    const matches = treeElement.listItemElement.getElementsByClassName(UI.UIUtils.highlightedSearchResultClassName);\n    if (matches.length) {\n      matches[0].scrollIntoViewIfNeeded(false);\n    }\n    treeElement.select(/* omitFocus */ true);\n  }\n\n  hideMatchHighlights(node: SDK.DOMModel.DOMNode): void {\n    const treeElement = this.#viewOutput.elementsTreeOutline?.findTreeElement(node);\n    if (!treeElement) {\n      return;\n    }\n    treeElement.hideSearchHighlights();\n  }\n\n  toggleHideElement(node: SDK.DOMModel.DOMNode): void {\n    void this.#viewOutput.elementsTreeOutline?.toggleHideElement(node);\n  }\n\n  toggleEditAsHTML(node: SDK.DOMModel.DOMNode): void {\n    this.#viewOutput.elementsTreeOutline?.toggleEditAsHTML(node);\n  }\n\n  duplicateNode(node: SDK.DOMModel.DOMNode): void {\n    this.#viewOutput.elementsTreeOutline?.duplicateNode(node);\n  }\n\n  copyStyles(node: SDK.DOMModel.DOMNode): void {\n    void this.#viewOutput.elementsTreeOutline?.findTreeElement(node)?.copyStyles();\n  }\n\n  /**\n   * FIXME: used to determine focus state, probably we can have a better\n   * way to do it.\n   */\n  empty(): boolean {\n    return !this.#viewOutput.elementsTreeOutline;\n  }\n\n  override focus(): void {\n    super.focus();\n    this.#viewOutput.elementsTreeOutline?.focus();\n  }\n\n  override wasShown(): void {\n    super.wasShown();\n    this.#visible = true;\n    this.performUpdate();\n  }\n\n  override detach(overrideHideOnDetach?: boolean): void {\n    super.detach(overrideHideOnDetach);\n    this.#visible = false;\n    this.performUpdate();\n  }\n\n  override show(parentElement: Element, insertBefore?: Node|null, suppressOrphanWidgetError = false): void {\n    this.performUpdate();\n    const domModels = SDK.TargetManager.TargetManager.instance().models(SDK.DOMModel.DOMModel, {scoped: true});\n    for (const domModel of domModels) {\n      if (domModel.parentModel()) {\n        continue;\n      }\n      if (!this.rootDOMNode) {\n        if (domModel.existingDocument()) {\n          this.rootDOMNode = domModel.existingDocument();\n          this.onDocumentUpdated(domModel);\n        } else {\n          void domModel.requestDocument();\n        }\n      }\n    }\n    super.show(parentElement, insertBefore, suppressOrphanWidgetError);\n  }\n}\n\nexport class ElementsTreeOutline extends\n    Common.ObjectWrapper.eventMixin<ElementsTreeOutline.EventTypes, typeof UI.TreeOutline.TreeOutline>(\n        UI.TreeOutline.TreeOutline) {\n  treeElementByNode: WeakMap<SDK.DOMModel.DOMNode, ElementsTreeElement>;\n  private readonly shadowRoot: ShadowRoot;\n  readonly elementInternal: HTMLElement;\n  private includeRootDOMNode: boolean;\n  private selectEnabled: boolean|undefined;\n  private rootDOMNodeInternal: SDK.DOMModel.DOMNode|null;\n  selectedDOMNodeInternal: SDK.DOMModel.DOMNode|null;\n  private visible: boolean;\n  private readonly imagePreviewPopover: ImagePreviewPopover;\n  private updateRecords: Map<SDK.DOMModel.DOMNode, Elements.ElementUpdateRecord.ElementUpdateRecord>;\n  private treeElementsBeingUpdated: Set<ElementsTreeElement>;\n  decoratorExtensions: MarkerDecoratorRegistration[]|null;\n  private showHTMLCommentsSetting: Common.Settings.Setting<boolean>;\n  private multilineEditing?: MultilineEditorController|null;\n  private visibleWidthInternal?: number;\n  private clipboardNodeData?: ClipboardData;\n  private isXMLMimeTypeInternal?: boolean|null;\n  suppressRevealAndSelect = false;\n  private previousHoveredElement?: UI.TreeOutline.TreeElement;\n  private treeElementBeingDragged?: ElementsTreeElement;\n  private dragOverTreeElement?: ElementsTreeElement;\n  private updateModifiedNodesTimeout?: number;\n  #topLayerContainerByParent = new Map<UI.TreeOutline.TreeElement, TopLayerContainer>();\n  #issuesManager?: IssuesManager.IssuesManager.IssuesManager;\n  #popupHelper?: UI.PopoverHelper.PopoverHelper;\n  #nodeElementToIssues = new Map<Element, IssuesManager.Issue.Issue[]>();\n\n  constructor(omitRootDOMNode?: boolean, selectEnabled?: boolean, hideGutter?: boolean) {\n    super();\n\n    this.#issuesManager = IssuesManager.IssuesManager.IssuesManager.instance();\n    this.#issuesManager.addEventListener(IssuesManager.IssuesManager.Events.ISSUE_ADDED, this.#onIssueAdded, this);\n\n    this.treeElementByNode = new WeakMap();\n    const shadowContainer = document.createElement('div');\n    this.shadowRoot = UI.UIUtils.createShadowRootWithCoreStyles(\n        shadowContainer, {cssFile: [elementsTreeOutlineStyles, CodeHighlighter.codeHighlighterStyles]});\n    const outlineDisclosureElement = this.shadowRoot.createChild('div', 'elements-disclosure');\n\n    this.elementInternal = this.element;\n    this.elementInternal.classList.add('elements-tree-outline', 'source-code');\n    if (hideGutter) {\n      this.elementInternal.classList.add('elements-hide-gutter');\n    }\n    UI.ARIAUtils.setLabel(this.elementInternal, i18nString(UIStrings.pageDom));\n    this.elementInternal.addEventListener('focusout', this.onfocusout.bind(this), false);\n    this.elementInternal.addEventListener('mousedown', this.onmousedown.bind(this), false);\n    this.elementInternal.addEventListener('mousemove', this.onmousemove.bind(this), false);\n    this.elementInternal.addEventListener('mouseleave', this.onmouseleave.bind(this), false);\n    this.elementInternal.addEventListener('dragstart', this.ondragstart.bind(this), false);\n    this.elementInternal.addEventListener('dragover', this.ondragover.bind(this), false);\n    this.elementInternal.addEventListener('dragleave', this.ondragleave.bind(this), false);\n    this.elementInternal.addEventListener('drop', this.ondrop.bind(this), false);\n    this.elementInternal.addEventListener('dragend', this.ondragend.bind(this), false);\n    this.elementInternal.addEventListener('contextmenu', this.contextMenuEventFired.bind(this), false);\n    this.elementInternal.addEventListener('clipboard-beforecopy', this.onBeforeCopy.bind(this), false);\n    this.elementInternal.addEventListener('clipboard-copy', this.onCopyOrCut.bind(this, false), false);\n    this.elementInternal.addEventListener('clipboard-cut', this.onCopyOrCut.bind(this, true), false);\n    this.elementInternal.addEventListener('clipboard-paste', this.onPaste.bind(this), false);\n    this.elementInternal.addEventListener('keydown', this.onKeyDown.bind(this), false);\n\n    outlineDisclosureElement.appendChild(this.elementInternal);\n    this.element = shadowContainer;\n    this.contentElement.setAttribute('jslog', `${VisualLogging.tree('elements')}`);\n\n    this.includeRootDOMNode = !omitRootDOMNode;\n    this.selectEnabled = selectEnabled;\n    this.rootDOMNodeInternal = null;\n    this.selectedDOMNodeInternal = null;\n\n    this.visible = false;\n\n    this.imagePreviewPopover = new ImagePreviewPopover(\n        this.contentElement,\n        event => {\n          let link: (Element|null) = (event.target as Element | null);\n          while (link && !ImagePreviewPopover.getImageURL(link)) {\n            link = link.parentElementOrShadowHost();\n          }\n          return link;\n        },\n        link => {\n          const listItem = UI.UIUtils.enclosingNodeOrSelfWithNodeName(link, 'li');\n          if (!listItem) {\n            return null;\n          }\n\n          const treeElement =\n              (UI.TreeOutline.TreeElement.getTreeElementBylistItemNode(listItem) as ElementsTreeElement | undefined);\n          if (!treeElement) {\n            return null;\n          }\n          return treeElement.node();\n        });\n\n    this.updateRecords = new Map();\n    this.treeElementsBeingUpdated = new Set();\n\n    this.decoratorExtensions = null;\n\n    this.showHTMLCommentsSetting = Common.Settings.Settings.instance().moduleSetting('show-html-comments');\n    this.showHTMLCommentsSetting.addChangeListener(this.onShowHTMLCommentsChange.bind(this));\n    this.setUseLightSelectionColor(true);\n    // TODO(changhaohan): refactor the popover to use tooltip component.\n    this.#popupHelper = new UI.PopoverHelper.PopoverHelper(this.elementInternal, event => {\n      const hoveredNode = event.composedPath()[0] as Element;\n      if (!hoveredNode?.matches('.violating-element')) {\n        return null;\n      }\n\n      const issues = this.#nodeElementToIssues.get(hoveredNode);\n      if (!issues) {\n        return null;\n      }\n\n      return {\n        box: hoveredNode.boxInWindow(),\n        show: async (popover: UI.GlassPane.GlassPane) => {\n          popover.setIgnoreLeftMargin(true);\n          // clang-format off\n          render(html`\n            <div class=\"squiggles-content\">\n              ${issues.map(issue => {\n                const elementIssueDetails = getElementIssueDetails(issue);\n                if (!elementIssueDetails) {\n                  // This shouldn't happen, but add this if check to pass ts check.\n                  return nothing;\n                }\n                const issueKindIconName = IssueCounter.IssueCounter.getIssueKindIconName(issue.getKind());\n                const openIssueEvent = (): Promise<void> => Common.Revealer.reveal(issue);\n                return html`\n                  <div class=\"squiggles-content-item\">\n                  <devtools-icon .name=${issueKindIconName} @click=${openIssueEvent}></devtools-icon>\n                  <x-link class=\"link\" @click=${openIssueEvent}>${i18nString(UIStrings.viewIssue)}</x-link>\n                  <span>${elementIssueDetails.tooltip}</span>\n                  </div>`;})}\n            </div>`, popover.contentElement);\n          // clang-format on\n          return true;\n        },\n      };\n    }, 'elements.issue');\n    this.#popupHelper.setTimeout(300);\n  }\n\n  static forDOMModel(domModel: SDK.DOMModel.DOMModel): ElementsTreeOutline|null {\n    return elementsTreeOutlineByDOMModel.get(domModel) || null;\n  }\n\n  #onIssueAdded(event: Common.EventTarget.EventTargetEvent<IssuesManager.IssuesManager.IssueAddedEvent>): void {\n    void this.#addTreeElementIssue(event.data.issue);\n  }\n\n  #addAllElementIssues(): void {\n    if (!this.#issuesManager) {\n      return;\n    }\n    for (const issue of this.#issuesManager.issues()) {\n      void this.#addTreeElementIssue(issue);\n    }\n  }\n\n  async #addTreeElementIssue(issue: IssuesManager.Issue.Issue): Promise<void> {\n    const elementIssueDetails = getElementIssueDetails(issue);\n    if (!elementIssueDetails) {\n      return;\n    }\n    const {nodeId} = elementIssueDetails;\n    if (!this.rootDOMNode || !nodeId) {\n      return;\n    }\n    const deferredDOMNode = new SDK.DOMModel.DeferredDOMNode(this.rootDOMNode.domModel().target(), nodeId);\n    const node = await deferredDOMNode.resolvePromise();\n\n    if (!node) {\n      return;\n    }\n\n    const treeElement = this.findTreeElement(node);\n    if (treeElement) {\n      treeElement.addIssue(issue);\n      const treeElementNodeElementsToIssues = treeElement.issuesByNodeElement;\n      // This element could be the treeElement tags name or an attribute.\n      for (const [element, issues] of treeElementNodeElementsToIssues) {\n        this.#nodeElementToIssues.set(element, issues);\n      }\n    }\n  }\n\n  deindentSingleNode(): void {\n    const firstChild = this.firstChild();\n    if (!firstChild || (firstChild && !firstChild.isExpandable())) {\n      this.shadowRoot.querySelector('.elements-disclosure')?.classList.add('single-node');\n    }\n  }\n\n  updateNodeElementToIssue(element: Element, issues: IssuesManager.Issue.Issue[]): void {\n    this.#nodeElementToIssues.set(element, issues);\n  }\n\n  private onShowHTMLCommentsChange(): void {\n    const selectedNode = this.selectedDOMNode();\n    if (selectedNode && selectedNode.nodeType() === Node.COMMENT_NODE && !this.showHTMLCommentsSetting.get()) {\n      this.selectDOMNode(selectedNode.parentNode);\n    }\n    this.update();\n  }\n\n  setWordWrap(wrap: boolean): void {\n    this.elementInternal.classList.toggle('elements-tree-nowrap', !wrap);\n  }\n\n  setMultilineEditing(multilineEditing: MultilineEditorController|null): void {\n    this.multilineEditing = multilineEditing;\n  }\n\n  visibleWidth(): number {\n    return this.visibleWidthInternal || 0;\n  }\n\n  setVisibleWidth(width: number): void {\n    this.visibleWidthInternal = width;\n    if (this.multilineEditing) {\n      this.multilineEditing.resize();\n    }\n  }\n\n  private setClipboardData(data: ClipboardData|null): void {\n    if (this.clipboardNodeData) {\n      const treeElement = this.findTreeElement(this.clipboardNodeData.node);\n      if (treeElement) {\n        treeElement.setInClipboard(false);\n      }\n      delete this.clipboardNodeData;\n    }\n\n    if (data) {\n      const treeElement = this.findTreeElement(data.node);\n      if (treeElement) {\n        treeElement.setInClipboard(true);\n      }\n      this.clipboardNodeData = data;\n    }\n  }\n\n  resetClipboardIfNeeded(removedNode: SDK.DOMModel.DOMNode): void {\n    if (this.clipboardNodeData && this.clipboardNodeData.node === removedNode) {\n      this.setClipboardData(null);\n    }\n  }\n\n  private onBeforeCopy(event: Event): void {\n    event.handled = true;\n  }\n\n  private onCopyOrCut(isCut: boolean, event: Event): void {\n    this.setClipboardData(null);\n    // @ts-expect-error this bound in the main entry point\n    const originalEvent = event['original'];\n\n    if (!originalEvent?.target) {\n      return;\n    }\n\n    // Don't prevent the normal copy if the user has a selection.\n    if (originalEvent.target instanceof Node && originalEvent.target.hasSelection()) {\n      return;\n    }\n\n    // Do not interfere with text editing.\n    if (UI.UIUtils.isEditing()) {\n      return;\n    }\n\n    const targetNode = this.selectedDOMNode();\n    if (!targetNode) {\n      return;\n    }\n\n    if (!originalEvent.clipboardData) {\n      return;\n    }\n    originalEvent.clipboardData.clearData();\n    event.handled = true;\n\n    this.performCopyOrCut(isCut, targetNode);\n  }\n\n  performCopyOrCut(isCut: boolean, node: SDK.DOMModel.DOMNode|null, includeShadowRoots = false): void {\n    if (!node) {\n      return;\n    }\n    if (isCut && (node.isShadowRoot() || node.ancestorUserAgentShadowRoot())) {\n      return;\n    }\n    void node.getOuterHTML(includeShadowRoots).then(outerHTML => {\n      if (outerHTML !== null) {\n        CopyToClipboard.copyTextToClipboard(outerHTML);\n      }\n    });\n    this.setClipboardData({node, isCut});\n  }\n\n  canPaste(targetNode: SDK.DOMModel.DOMNode): boolean {\n    if (targetNode.isShadowRoot() || targetNode.ancestorUserAgentShadowRoot()) {\n      return false;\n    }\n\n    if (!this.clipboardNodeData) {\n      return false;\n    }\n\n    const node = this.clipboardNodeData.node;\n    if (this.clipboardNodeData.isCut && (node === targetNode || node.isAncestor(targetNode))) {\n      return false;\n    }\n\n    if (targetNode.domModel() !== node.domModel()) {\n      return false;\n    }\n    return true;\n  }\n\n  pasteNode(targetNode: SDK.DOMModel.DOMNode): void {\n    if (this.canPaste(targetNode)) {\n      this.performPaste(targetNode);\n    }\n  }\n\n  duplicateNode(targetNode: SDK.DOMModel.DOMNode): void {\n    this.performDuplicate(targetNode);\n  }\n\n  private onPaste(event: Event): void {\n    // Do not interfere with text editing.\n    if (UI.UIUtils.isEditing()) {\n      return;\n    }\n\n    const targetNode = this.selectedDOMNode();\n    if (!targetNode || !this.canPaste(targetNode)) {\n      return;\n    }\n\n    event.handled = true;\n    this.performPaste(targetNode);\n  }\n\n  private performPaste(targetNode: SDK.DOMModel.DOMNode): void {\n    if (!this.clipboardNodeData) {\n      return;\n    }\n    if (this.clipboardNodeData.isCut) {\n      this.clipboardNodeData.node.moveTo(targetNode, null, expandCallback.bind(this));\n      this.setClipboardData(null);\n    } else {\n      this.clipboardNodeData.node.copyTo(targetNode, null, expandCallback.bind(this));\n    }\n\n    function expandCallback(\n        this: ElementsTreeOutline, error: string|null, pastedNode: SDK.DOMModel.DOMNode|null): void {\n      if (error || !pastedNode) {\n        return;\n      }\n      this.selectDOMNode(pastedNode);\n    }\n  }\n\n  private performDuplicate(targetNode: SDK.DOMModel.DOMNode): void {\n    if (targetNode.isInShadowTree()) {\n      return;\n    }\n\n    const parentNode = targetNode.parentNode ? targetNode.parentNode : targetNode;\n    if (parentNode.nodeName() === '#document') {\n      return;\n    }\n\n    targetNode.copyTo(parentNode, targetNode.nextSibling);\n  }\n\n  setVisible(visible: boolean): void {\n    if (visible === this.visible) {\n      return;\n    }\n    this.visible = visible;\n    if (!this.visible) {\n      this.imagePreviewPopover.hide();\n      if (this.multilineEditing) {\n        this.multilineEditing.cancel();\n      }\n      return;\n    }\n\n    this.runPendingUpdates();\n    if (this.selectedDOMNodeInternal) {\n      this.revealAndSelectNode(this.selectedDOMNodeInternal, false);\n    }\n  }\n\n  get rootDOMNode(): SDK.DOMModel.DOMNode|null {\n    return this.rootDOMNodeInternal;\n  }\n\n  set rootDOMNode(x: SDK.DOMModel.DOMNode|null) {\n    if (this.rootDOMNodeInternal === x) {\n      return;\n    }\n\n    this.rootDOMNodeInternal = x;\n\n    this.isXMLMimeTypeInternal = x?.isXMLNode();\n\n    this.update();\n  }\n\n  get isXMLMimeType(): boolean {\n    return Boolean(this.isXMLMimeTypeInternal);\n  }\n\n  selectedDOMNode(): SDK.DOMModel.DOMNode|null {\n    return this.selectedDOMNodeInternal;\n  }\n\n  selectDOMNode(node: SDK.DOMModel.DOMNode|null, focus?: boolean): void {\n    if (this.selectedDOMNodeInternal === node) {\n      this.revealAndSelectNode(node, !focus);\n      return;\n    }\n\n    this.selectedDOMNodeInternal = node;\n    this.revealAndSelectNode(node, !focus);\n\n    // The revealAndSelectNode() method might find a different element if there is inlined text,\n    // and the select() call would change the selectedDOMNode and reenter this setter. So to\n    // avoid calling selectedNodeChanged() twice, first check if selectedDOMNodeInternal is the same\n    // node as the one passed in.\n    if (this.selectedDOMNodeInternal === node) {\n      this.selectedNodeChanged(Boolean(focus));\n    }\n  }\n\n  editing(): boolean {\n    const node = this.selectedDOMNode();\n    if (!node) {\n      return false;\n    }\n    const treeElement = this.findTreeElement(node);\n    if (!treeElement) {\n      return false;\n    }\n    return treeElement.isEditing() || false;\n  }\n\n  update(): void {\n    const selectedNode = this.selectedDOMNode();\n    this.removeChildren();\n    if (!this.rootDOMNode) {\n      return;\n    }\n\n    if (this.includeRootDOMNode) {\n      const treeElement = this.createElementTreeElement(this.rootDOMNode);\n      this.appendChild(treeElement);\n    } else {\n      // FIXME: this could use findTreeElement to reuse a tree element if it already exists\n      const children = this.visibleChildren(this.rootDOMNode);\n      for (const child of children) {\n        const treeElement = this.createElementTreeElement(child);\n        this.appendChild(treeElement);\n      }\n    }\n    if (this.rootDOMNode instanceof SDK.DOMModel.DOMDocument) {\n      void this.createTopLayerContainer(this.rootElement(), this.rootDOMNode);\n    }\n\n    if (selectedNode) {\n      this.revealAndSelectNode(selectedNode, true);\n    }\n  }\n\n  selectedNodeChanged(focus: boolean): void {\n    this.dispatchEventToListeners(\n        ElementsTreeOutline.Events.SelectedNodeChanged, {node: this.selectedDOMNodeInternal, focus});\n  }\n\n  private fireElementsTreeUpdated(nodes: SDK.DOMModel.DOMNode[]): void {\n    this.dispatchEventToListeners(ElementsTreeOutline.Events.ElementsTreeUpdated, nodes);\n  }\n\n  findTreeElement(node: SDK.DOMModel.DOMNode): ElementsTreeElement|null {\n    let treeElement = this.lookUpTreeElement(node);\n    if (!treeElement && node.nodeType() === Node.TEXT_NODE) {\n      // The text node might have been inlined if it was short, so try to find the parent element.\n      treeElement = this.lookUpTreeElement(node.parentNode);\n    }\n\n    return treeElement as ElementsTreeElement | null;\n  }\n\n  private lookUpTreeElement(node: SDK.DOMModel.DOMNode|null): UI.TreeOutline.TreeElement|null {\n    if (!node) {\n      return null;\n    }\n\n    const cachedElement = this.treeElementByNode.get(node);\n    if (cachedElement) {\n      return cachedElement;\n    }\n\n    // Walk up the parent pointers from the desired node\n    const ancestors = [];\n    let currentNode;\n    for (currentNode = node.parentNode; currentNode; currentNode = currentNode.parentNode) {\n      ancestors.push(currentNode);\n      if (this.treeElementByNode.has(currentNode)) {  // stop climbing as soon as we hit\n        break;\n      }\n    }\n\n    if (!currentNode) {\n      return null;\n    }\n\n    // Walk down to populate each ancestor's children, to fill in the tree and the cache.\n    for (let i = ancestors.length - 1; i >= 0; --i) {\n      const child = ancestors[i - 1] || node;\n      const treeElement = this.treeElementByNode.get(ancestors[i]);\n      if (treeElement) {\n        void treeElement.onpopulate();  // fill the cache with the children of treeElement\n        if (child.index && child.index >= treeElement.expandedChildrenLimit()) {\n          this.setExpandedChildrenLimit(treeElement, child.index + 1);\n        }\n      }\n    }\n\n    return this.treeElementByNode.get(node) || null;\n  }\n\n  createTreeElementFor(node: SDK.DOMModel.DOMNode): ElementsTreeElement|null {\n    let treeElement = this.findTreeElement(node);\n    if (treeElement) {\n      return treeElement;\n    }\n    if (!node.parentNode) {\n      return null;\n    }\n\n    treeElement = this.createTreeElementFor(node.parentNode);\n    return treeElement ? this.showChild(treeElement, node) : null;\n  }\n\n  private revealAndSelectNode(node: SDK.DOMModel.DOMNode|null, omitFocus: boolean): void {\n    if (this.suppressRevealAndSelect) {\n      return;\n    }\n\n    if (!this.includeRootDOMNode && node === this.rootDOMNode && this.rootDOMNode) {\n      node = this.rootDOMNode.firstChild;\n    }\n    if (!node) {\n      return;\n    }\n    const treeElement = this.createTreeElementFor(node);\n    if (!treeElement) {\n      return;\n    }\n\n    treeElement.revealAndSelect(omitFocus);\n  }\n\n  treeElementFromEventInternal(event: MouseEvent): UI.TreeOutline.TreeElement|null {\n    const scrollContainer = this.element.parentElement;\n    if (!scrollContainer) {\n      return null;\n    }\n\n    const x = event.pageX;\n    const y = event.pageY;\n\n    // Our list items have 1-pixel cracks between them vertically. We avoid\n    // the cracks by checking slightly above and slightly below the mouse\n    // and seeing if we hit the same element each time.\n    const elementUnderMouse = this.treeElementFromPoint(x, y);\n    const elementAboveMouse = this.treeElementFromPoint(x, y - 2);\n    let element;\n    if (elementUnderMouse === elementAboveMouse) {\n      element = elementUnderMouse;\n    } else {\n      element = this.treeElementFromPoint(x, y + 2);\n    }\n\n    return element;\n  }\n\n  private onfocusout(_event: Event): void {\n    SDK.OverlayModel.OverlayModel.hideDOMNodeHighlight();\n  }\n\n  private onmousedown(event: MouseEvent): void {\n    const element = this.treeElementFromEventInternal(event);\n    if (element) {\n      element.select();\n    }\n  }\n\n  setHoverEffect(treeElement: UI.TreeOutline.TreeElement|null): void {\n    if (this.previousHoveredElement === treeElement) {\n      return;\n    }\n\n    if (this.previousHoveredElement instanceof ElementsTreeElement) {\n      this.previousHoveredElement.hovered = false;\n      delete this.previousHoveredElement;\n    }\n\n    if (treeElement instanceof ElementsTreeElement) {\n      treeElement.hovered = true;\n      this.previousHoveredElement = treeElement;\n    }\n  }\n\n  private onmousemove(event: MouseEvent): void {\n    const element = this.treeElementFromEventInternal(event);\n    if (element && this.previousHoveredElement === element) {\n      return;\n    }\n\n    this.setHoverEffect(element);\n    this.highlightTreeElement(\n        (element as UI.TreeOutline.TreeElement), !UI.KeyboardShortcut.KeyboardShortcut.eventHasEitherCtrlOrMeta(event));\n  }\n\n  private highlightTreeElement(element: UI.TreeOutline.TreeElement, showInfo: boolean): void {\n    if (element instanceof ElementsTreeElement) {\n      element.node().domModel().overlayModel().highlightInOverlay(\n          {node: element.node(), selectorList: undefined}, 'all', showInfo);\n      return;\n    }\n\n    if (element instanceof ShortcutTreeElement) {\n      element.domModel().overlayModel().highlightInOverlay(\n          {deferredNode: element.deferredNode(), selectorList: undefined}, 'all', showInfo);\n    }\n  }\n\n  private onmouseleave(_event: MouseEvent): void {\n    this.setHoverEffect(null);\n    SDK.OverlayModel.OverlayModel.hideDOMNodeHighlight();\n  }\n\n  private ondragstart(event: DragEvent): boolean|undefined {\n    const node = (event.target as Node | null);\n    if (!node || node.hasSelection()) {\n      return false;\n    }\n    if (node.nodeName === 'A') {\n      return false;\n    }\n\n    const treeElement = this.validDragSourceOrTarget(this.treeElementFromEventInternal(event));\n    if (!treeElement) {\n      return false;\n    }\n\n    if (treeElement.node().nodeName() === 'BODY' || treeElement.node().nodeName() === 'HEAD') {\n      return false;\n    }\n\n    if (!event.dataTransfer || !treeElement.listItemElement.textContent) {\n      return;\n    }\n    event.dataTransfer.setData('text/plain', treeElement.listItemElement.textContent.replace(/\\u200b/g, ''));\n    event.dataTransfer.effectAllowed = 'copyMove';\n    this.treeElementBeingDragged = treeElement;\n\n    SDK.OverlayModel.OverlayModel.hideDOMNodeHighlight();\n\n    return true;\n  }\n\n  private ondragover(event: DragEvent): boolean {\n    if (!this.treeElementBeingDragged) {\n      return false;\n    }\n\n    const treeElement = this.validDragSourceOrTarget(this.treeElementFromEventInternal(event));\n    if (!treeElement) {\n      return false;\n    }\n\n    let node: (SDK.DOMModel.DOMNode|null) = (treeElement.node() as SDK.DOMModel.DOMNode | null);\n    while (node) {\n      if (node === this.treeElementBeingDragged.nodeInternal) {\n        return false;\n      }\n      node = node.parentNode;\n    }\n\n    treeElement.listItemElement.classList.add('elements-drag-over');\n    this.dragOverTreeElement = treeElement;\n    event.preventDefault();\n    if (event.dataTransfer) {\n      event.dataTransfer.dropEffect = 'move';\n    }\n    return false;\n  }\n\n  private ondragleave(event: DragEvent): boolean {\n    this.clearDragOverTreeElementMarker();\n    event.preventDefault();\n    return false;\n  }\n\n  private validDragSourceOrTarget(treeElement: UI.TreeOutline.TreeElement|null): ElementsTreeElement|null {\n    if (!treeElement) {\n      return null;\n    }\n\n    if (!(treeElement instanceof ElementsTreeElement)) {\n      return null;\n    }\n    const elementsTreeElement = (treeElement);\n\n    const node = elementsTreeElement.node();\n    if (!node.parentNode || node.parentNode.nodeType() !== Node.ELEMENT_NODE) {\n      return null;\n    }\n\n    return elementsTreeElement;\n  }\n\n  private ondrop(event: DragEvent): void {\n    event.preventDefault();\n    const treeElement = this.treeElementFromEventInternal(event);\n    if (treeElement instanceof ElementsTreeElement) {\n      this.doMove(treeElement);\n    }\n  }\n\n  private doMove(treeElement: ElementsTreeElement): void {\n    if (!this.treeElementBeingDragged) {\n      return;\n    }\n\n    let parentNode;\n    let anchorNode;\n\n    if (treeElement.isClosingTag()) {\n      // Drop onto closing tag -> insert as last child.\n      parentNode = treeElement.node();\n      anchorNode = null;\n    } else {\n      const dragTargetNode = treeElement.node();\n      parentNode = dragTargetNode.parentNode;\n      anchorNode = dragTargetNode;\n    }\n\n    if (!parentNode) {\n      return;\n    }\n    const wasExpanded = this.treeElementBeingDragged.expanded;\n    this.treeElementBeingDragged.nodeInternal.moveTo(\n        parentNode, anchorNode, this.selectNodeAfterEdit.bind(this, wasExpanded));\n\n    delete this.treeElementBeingDragged;\n  }\n\n  private ondragend(event: DragEvent): void {\n    event.preventDefault();\n    this.clearDragOverTreeElementMarker();\n    delete this.treeElementBeingDragged;\n  }\n\n  private clearDragOverTreeElementMarker(): void {\n    if (this.dragOverTreeElement) {\n      this.dragOverTreeElement.listItemElement.classList.remove('elements-drag-over');\n      delete this.dragOverTreeElement;\n    }\n  }\n\n  private contextMenuEventFired(event: MouseEvent): void {\n    // The context menu construction may be async. In order to\n    // make sure that no other (default) context menu shows up, we need\n    // to stop propagating and prevent the default action.\n    event.stopPropagation();\n    event.preventDefault();\n    const treeElement = this.treeElementFromEventInternal(event);\n    if (treeElement instanceof ElementsTreeElement) {\n      void this.showContextMenu(treeElement, event);\n    }\n  }\n\n  async showContextMenu(treeElement: ElementsTreeElement, event: Event): Promise<void> {\n    if (UI.UIUtils.isEditing()) {\n      return;\n    }\n\n    const contextMenu = new UI.ContextMenu.ContextMenu(event);\n    const isPseudoElement = Boolean(treeElement.node().pseudoType());\n    const isTag = treeElement.node().nodeType() === Node.ELEMENT_NODE && !isPseudoElement;\n    const node = (event.target as Node | null);\n    if (!node) {\n      return;\n    }\n    let textNode: Element|null = node.enclosingNodeOrSelfWithClass('webkit-html-text-node');\n    if (textNode?.classList.contains('bogus')) {\n      textNode = null;\n    }\n    const commentNode = node.enclosingNodeOrSelfWithClass('webkit-html-comment');\n    contextMenu.saveSection().appendItem(\n        i18nString(UIStrings.storeAsGlobalVariable), this.saveNodeToTempVariable.bind(this, treeElement.node()),\n        {jslogContext: 'store-as-global-variable'});\n    if (textNode) {\n      await treeElement.populateTextContextMenu(contextMenu, textNode);\n    } else if (isTag) {\n      await treeElement.populateTagContextMenu(contextMenu, event);\n    } else if (commentNode) {\n      await treeElement.populateNodeContextMenu(contextMenu);\n    } else if (isPseudoElement) {\n      treeElement.populatePseudoElementContextMenu(contextMenu);\n    }\n\n    ElementsPanel.instance().populateAdornerSettingsContextMenu(contextMenu);\n\n    contextMenu.appendApplicableItems(treeElement.node());\n    void contextMenu.show();\n  }\n\n  private async saveNodeToTempVariable(node: SDK.DOMModel.DOMNode): Promise<void> {\n    const remoteObjectForConsole = await node.resolveToObject();\n    const consoleModel = remoteObjectForConsole?.runtimeModel().target()?.model(SDK.ConsoleModel.ConsoleModel);\n    await consoleModel?.saveToTempVariable(\n        UI.Context.Context.instance().flavor(SDK.RuntimeModel.ExecutionContext), remoteObjectForConsole);\n  }\n\n  runPendingUpdates(): void {\n    this.updateModifiedNodes();\n  }\n\n  private onKeyDown(event: Event): void {\n    const keyboardEvent = (event as KeyboardEvent);\n    if (UI.UIUtils.isEditing()) {\n      return;\n    }\n    const node = this.selectedDOMNode();\n    if (!node) {\n      return;\n    }\n    const treeElement = this.treeElementByNode.get(node);\n    if (!treeElement) {\n      return;\n    }\n\n    if (UI.KeyboardShortcut.KeyboardShortcut.eventHasCtrlEquivalentKey(keyboardEvent) && node.parentNode) {\n      if (keyboardEvent.key === 'ArrowUp' && node.previousSibling) {\n        node.moveTo(node.parentNode, node.previousSibling, this.selectNodeAfterEdit.bind(this, treeElement.expanded));\n        keyboardEvent.consume(true);\n        return;\n      }\n      if (keyboardEvent.key === 'ArrowDown' && node.nextSibling) {\n        node.moveTo(\n            node.parentNode, node.nextSibling.nextSibling, this.selectNodeAfterEdit.bind(this, treeElement.expanded));\n        keyboardEvent.consume(true);\n        return;\n      }\n    }\n  }\n\n  toggleEditAsHTML(node: SDK.DOMModel.DOMNode, startEditing?: boolean, callback?: (() => void)): void {\n    const treeElement = this.treeElementByNode.get(node);\n    if (!treeElement?.hasEditableNode()) {\n      return;\n    }\n\n    if (node.pseudoType()) {\n      return;\n    }\n\n    const parentNode = node.parentNode;\n    const index = node.index;\n    const wasExpanded = treeElement.expanded;\n\n    treeElement.toggleEditAsHTML(editingFinished.bind(this), startEditing);\n\n    function editingFinished(this: ElementsTreeOutline, success: boolean): void {\n      if (callback) {\n        callback();\n      }\n      if (!success) {\n        return;\n      }\n\n      Badges.UserBadges.instance().recordAction(Badges.BadgeAction.DOM_ELEMENT_OR_ATTRIBUTE_EDITED);\n\n      // Select it and expand if necessary. We force tree update so that it processes dom events and is up to date.\n      this.runPendingUpdates();\n\n      if (!index) {\n        return;\n      }\n\n      const children = parentNode?.children();\n      const newNode = children ? children[index] || parentNode : parentNode;\n      if (!newNode) {\n        return;\n      }\n\n      this.selectDOMNode(newNode, true);\n\n      if (wasExpanded) {\n        const newTreeItem = this.findTreeElement(newNode);\n        if (newTreeItem) {\n          newTreeItem.expand();\n        }\n      }\n    }\n  }\n\n  selectNodeAfterEdit(wasExpanded: boolean, error: string|null, newNode: SDK.DOMModel.DOMNode|null): ElementsTreeElement\n      |null {\n    if (error) {\n      return null;\n    }\n\n    // Select it and expand if necessary. We force tree update so that it processes dom events and is up to date.\n    this.runPendingUpdates();\n\n    if (!newNode) {\n      return null;\n    }\n\n    this.selectDOMNode(newNode, true);\n\n    const newTreeItem = this.findTreeElement(newNode);\n    if (wasExpanded) {\n      if (newTreeItem) {\n        newTreeItem.expand();\n      }\n    }\n    return newTreeItem;\n  }\n\n  /**\n   * Runs a script on the node's remote object that toggles a class name on\n   * the node and injects a stylesheet into the head of the node's document\n   * containing a rule to set \"visibility: hidden\" on the class and all it's\n   * ancestors.\n   */\n  async toggleHideElement(node: SDK.DOMModel.DOMNode): Promise<void> {\n    let pseudoElementName = node.pseudoType() ? node.nodeName() : null;\n    if (pseudoElementName && node.pseudoIdentifier()) {\n      pseudoElementName += `(${node.pseudoIdentifier()})`;\n    }\n\n    let effectiveNode: SDK.DOMModel.DOMNode|null = node;\n    while (effectiveNode?.pseudoType()) {\n      if (effectiveNode !== node && effectiveNode.pseudoType() === 'column') {\n        // Ideally we would select the specific column pseudo element, but\n        // we don't have a way to do that at the moment.\n        pseudoElementName = '::column' + pseudoElementName;\n      }\n      effectiveNode = effectiveNode.parentNode;\n    }\n    if (!effectiveNode) {\n      return;\n    }\n\n    const hidden = node.marker('hidden-marker');\n    const object = await effectiveNode.resolveToObject('');\n\n    if (!object) {\n      return;\n    }\n\n    await object.callFunction(\n        (toggleClassAndInjectStyleRule as (this: Object, ...arg1: unknown[]) => void),\n        [{value: pseudoElementName}, {value: !hidden}]);\n    object.release();\n    node.setMarker('hidden-marker', hidden ? null : true);\n\n    function toggleClassAndInjectStyleRule(this: Element, pseudoElementName: string|null, hidden: boolean): void {\n      const classNamePrefix = '__web-inspector-hide';\n      const classNameSuffix = '-shortcut__';\n      const styleTagId = '__web-inspector-hide-shortcut-style__';\n      const pseudoElementNameEscaped = pseudoElementName ? pseudoElementName.replace(/[\\(\\)\\:]/g, '_') : '';\n      const className = classNamePrefix + pseudoElementNameEscaped + classNameSuffix;\n      this.classList.toggle(className, hidden);\n\n      let localRoot: Element|HTMLHeadElement = this;\n      while (localRoot.parentNode) {\n        localRoot = (localRoot.parentNode as Element);\n      }\n      if (localRoot.nodeType === Node.DOCUMENT_NODE) {\n        localRoot = document.head;\n      }\n\n      let style = localRoot.querySelector('style#' + styleTagId);\n      if (!style) {\n        const selectors = [];\n        selectors.push('.__web-inspector-hide-shortcut__');\n        selectors.push('.__web-inspector-hide-shortcut__ *');\n        const selector = selectors.join(', ');\n        const ruleBody = '    visibility: hidden !important;';\n        const rule = '\\n' + selector + '\\n{\\n' + ruleBody + '\\n}\\n';\n\n        style = document.createElement('style');\n        style.id = styleTagId;\n        style.textContent = rule;\n\n        localRoot.appendChild(style);\n      }\n\n      // In addition to putting them on the element we want to hide, we will\n      // also add pseudo element classes to the style element to keep track of\n      // which pseudo elements we have style rules for.\n      if (pseudoElementName && !style.classList.contains(className)) {\n        style.classList.add(className);\n        style.textContent = `.${className}${pseudoElementName}, ${style.textContent}`;\n      }\n    }\n  }\n\n  isToggledToHidden(node: SDK.DOMModel.DOMNode): boolean {\n    return Boolean(node.marker('hidden-marker'));\n  }\n\n  private reset(): void {\n    this.rootDOMNode = null;\n    this.selectDOMNode(null, false);\n    this.imagePreviewPopover.hide();\n    delete this.clipboardNodeData;\n    SDK.OverlayModel.OverlayModel.hideDOMNodeHighlight();\n    this.updateRecords.clear();\n  }\n\n  wireToDOMModel(domModel: SDK.DOMModel.DOMModel): void {\n    elementsTreeOutlineByDOMModel.set(domModel, this);\n    domModel.addEventListener(SDK.DOMModel.Events.MarkersChanged, this.markersChanged, this);\n    domModel.addEventListener(SDK.DOMModel.Events.NodeInserted, this.nodeInserted, this);\n    domModel.addEventListener(SDK.DOMModel.Events.NodeRemoved, this.nodeRemoved, this);\n    domModel.addEventListener(SDK.DOMModel.Events.AttrModified, this.attributeModified, this);\n    domModel.addEventListener(SDK.DOMModel.Events.AttrRemoved, this.attributeRemoved, this);\n    domModel.addEventListener(SDK.DOMModel.Events.CharacterDataModified, this.characterDataModified, this);\n    domModel.addEventListener(SDK.DOMModel.Events.DocumentUpdated, this.documentUpdated, this);\n    domModel.addEventListener(SDK.DOMModel.Events.ChildNodeCountUpdated, this.childNodeCountUpdated, this);\n    domModel.addEventListener(SDK.DOMModel.Events.DistributedNodesChanged, this.distributedNodesChanged, this);\n    domModel.addEventListener(SDK.DOMModel.Events.TopLayerElementsChanged, this.topLayerElementsChanged, this);\n    domModel.addEventListener(SDK.DOMModel.Events.ScrollableFlagUpdated, this.scrollableFlagUpdated, this);\n  }\n\n  unwireFromDOMModel(domModel: SDK.DOMModel.DOMModel): void {\n    domModel.removeEventListener(SDK.DOMModel.Events.MarkersChanged, this.markersChanged, this);\n    domModel.removeEventListener(SDK.DOMModel.Events.NodeInserted, this.nodeInserted, this);\n    domModel.removeEventListener(SDK.DOMModel.Events.NodeRemoved, this.nodeRemoved, this);\n    domModel.removeEventListener(SDK.DOMModel.Events.AttrModified, this.attributeModified, this);\n    domModel.removeEventListener(SDK.DOMModel.Events.AttrRemoved, this.attributeRemoved, this);\n    domModel.removeEventListener(SDK.DOMModel.Events.CharacterDataModified, this.characterDataModified, this);\n    domModel.removeEventListener(SDK.DOMModel.Events.DocumentUpdated, this.documentUpdated, this);\n    domModel.removeEventListener(SDK.DOMModel.Events.ChildNodeCountUpdated, this.childNodeCountUpdated, this);\n    domModel.removeEventListener(SDK.DOMModel.Events.DistributedNodesChanged, this.distributedNodesChanged, this);\n    domModel.removeEventListener(SDK.DOMModel.Events.TopLayerElementsChanged, this.topLayerElementsChanged, this);\n    domModel.removeEventListener(SDK.DOMModel.Events.ScrollableFlagUpdated, this.scrollableFlagUpdated, this);\n    elementsTreeOutlineByDOMModel.delete(domModel);\n  }\n\n  private addUpdateRecord(node: SDK.DOMModel.DOMNode): Elements.ElementUpdateRecord.ElementUpdateRecord {\n    let record = this.updateRecords.get(node);\n    if (!record) {\n      record = new Elements.ElementUpdateRecord.ElementUpdateRecord();\n      this.updateRecords.set(node, record);\n    }\n    return record;\n  }\n\n  private updateRecordForHighlight(node: SDK.DOMModel.DOMNode): Elements.ElementUpdateRecord.ElementUpdateRecord|null {\n    if (!this.visible) {\n      return null;\n    }\n    return this.updateRecords.get(node) || null;\n  }\n\n  private documentUpdated(event: Common.EventTarget.EventTargetEvent<SDK.DOMModel.DOMModel>): void {\n    const domModel = event.data;\n    this.reset();\n    if (domModel.existingDocument()) {\n      this.rootDOMNode = domModel.existingDocument();\n      this.#addAllElementIssues();\n    }\n  }\n\n  private attributeModified(event: Common.EventTarget.EventTargetEvent<{node: SDK.DOMModel.DOMNode, name: string}>):\n      void {\n    const {node} = event.data;\n    this.addUpdateRecord(node).attributeModified(event.data.name);\n    this.updateModifiedNodesSoon();\n  }\n\n  private attributeRemoved(event: Common.EventTarget.EventTargetEvent<{node: SDK.DOMModel.DOMNode, name: string}>):\n      void {\n    const {node} = event.data;\n    this.addUpdateRecord(node).attributeRemoved(event.data.name);\n    this.updateModifiedNodesSoon();\n  }\n\n  private characterDataModified(event: Common.EventTarget.EventTargetEvent<SDK.DOMModel.DOMNode>): void {\n    const node = event.data;\n    this.addUpdateRecord(node).charDataModified();\n    // Text could be large and force us to render itself as the child in the tree outline.\n    if (node.parentNode && node.parentNode.firstChild === node.parentNode.lastChild) {\n      this.addUpdateRecord(node.parentNode).childrenModified();\n    }\n    this.updateModifiedNodesSoon();\n  }\n\n  private nodeInserted(event: Common.EventTarget.EventTargetEvent<SDK.DOMModel.DOMNode>): void {\n    const node = event.data;\n    this.addUpdateRecord((node.parentNode as SDK.DOMModel.DOMNode)).nodeInserted(node);\n    this.updateModifiedNodesSoon();\n  }\n\n  private nodeRemoved(\n      event: Common.EventTarget.EventTargetEvent<{node: SDK.DOMModel.DOMNode, parent: SDK.DOMModel.DOMNode}>): void {\n    const {node, parent} = event.data;\n    this.resetClipboardIfNeeded(node);\n    this.addUpdateRecord(parent).nodeRemoved(node);\n    this.updateModifiedNodesSoon();\n  }\n\n  private childNodeCountUpdated(event: Common.EventTarget.EventTargetEvent<SDK.DOMModel.DOMNode>): void {\n    const node = event.data;\n    this.addUpdateRecord(node).childrenModified();\n    this.updateModifiedNodesSoon();\n  }\n\n  private distributedNodesChanged(event: Common.EventTarget.EventTargetEvent<SDK.DOMModel.DOMNode>): void {\n    const node = event.data;\n    this.addUpdateRecord(node).childrenModified();\n    this.updateModifiedNodesSoon();\n  }\n\n  private updateModifiedNodesSoon(): void {\n    if (!this.updateRecords.size) {\n      return;\n    }\n    if (this.updateModifiedNodesTimeout) {\n      return;\n    }\n    this.updateModifiedNodesTimeout = window.setTimeout(this.updateModifiedNodes.bind(this), 50);\n  }\n\n  /**\n   * TODO: this is made public for unit tests until the ElementsTreeOutline is\n   * migrated into DOMTreeWidget and highlights are declarative.\n   */\n  updateModifiedNodes(): void {\n    if (this.updateModifiedNodesTimeout) {\n      clearTimeout(this.updateModifiedNodesTimeout);\n      delete this.updateModifiedNodesTimeout;\n    }\n\n    const updatedNodes = [...this.updateRecords.keys()];\n    const hidePanelWhileUpdating = updatedNodes.length > 10;\n\n    let treeOutlineContainerElement;\n    let originalScrollTop;\n    if (hidePanelWhileUpdating) {\n      treeOutlineContainerElement = (this.element.parentNode as Element | null);\n      originalScrollTop = treeOutlineContainerElement ? treeOutlineContainerElement.scrollTop : 0;\n      this.elementInternal.classList.add('hidden');\n    }\n    const rootNodeUpdateRecords = this.rootDOMNodeInternal && this.updateRecords.get(this.rootDOMNodeInternal);\n    if (rootNodeUpdateRecords?.hasChangedChildren()) {\n      // Document's children have changed, perform total update.\n      this.update();\n    } else {\n      for (const [node, record] of this.updateRecords) {\n        if (record.hasChangedChildren()) {\n          this.updateModifiedParentNode((node));\n        } else {\n          this.updateModifiedNode((node));\n        }\n      }\n    }\n\n    if (hidePanelWhileUpdating) {\n      this.elementInternal.classList.remove('hidden');\n      if (treeOutlineContainerElement && originalScrollTop) {\n        treeOutlineContainerElement.scrollTop = originalScrollTop;\n      }\n    }\n\n    this.updateRecords.clear();\n    this.fireElementsTreeUpdated(updatedNodes);\n  }\n\n  private updateModifiedNode(node: SDK.DOMModel.DOMNode): void {\n    const treeElement = this.findTreeElement(node);\n    if (treeElement) {\n      treeElement.updateTitle(this.updateRecordForHighlight(node));\n    }\n  }\n\n  private updateModifiedParentNode(node: SDK.DOMModel.DOMNode): void {\n    const parentTreeElement = this.findTreeElement(node);\n    if (parentTreeElement) {\n      parentTreeElement.setExpandable(this.hasVisibleChildren(node));\n      parentTreeElement.updateTitle(this.updateRecordForHighlight(node));\n      if (populatedTreeElements.has(parentTreeElement)) {\n        this.updateChildren(parentTreeElement);\n      }\n    }\n  }\n\n  populateTreeElement(treeElement: ElementsTreeElement): Promise<void> {\n    if (treeElement.childCount() || !treeElement.isExpandable()) {\n      return Promise.resolve();\n    }\n\n    return new Promise<void>(resolve => {\n      treeElement.node().getChildNodes(() => {\n        populatedTreeElements.add(treeElement);\n        this.updateModifiedParentNode(treeElement.node());\n        resolve();\n      });\n    });\n  }\n\n  async createTopLayerContainer(parent: UI.TreeOutline.TreeElement, document: SDK.DOMModel.DOMDocument): Promise<void> {\n    if (!parent.treeOutline || !(parent.treeOutline instanceof ElementsTreeOutline)) {\n      return;\n    }\n    const container = new TopLayerContainer(parent.treeOutline, document);\n    await container.throttledUpdateTopLayerElements();\n    if (container.currentTopLayerDOMNodes.size > 0) {\n      parent.appendChild(container);\n    }\n    this.#topLayerContainerByParent.set(parent, container);\n  }\n\n  private createElementTreeElement(node: SDK.DOMModel.DOMNode, isClosingTag?: boolean): ElementsTreeElement {\n    const treeElement = new ElementsTreeElement(node, isClosingTag);\n    treeElement.setExpandable(!isClosingTag && this.hasVisibleChildren(node));\n    if (node.nodeType() === Node.ELEMENT_NODE && node.parentNode && node.parentNode.nodeType() === Node.DOCUMENT_NODE &&\n        !node.parentNode.parentNode) {\n      treeElement.setCollapsible(false);\n    }\n\n    if (node.hasAssignedSlot()) {\n      treeElement.createSlotLink(node.assignedSlot);\n    }\n\n    treeElement.selectable = Boolean(this.selectEnabled);\n    return treeElement;\n  }\n\n  private showChild(treeElement: ElementsTreeElement, child: SDK.DOMModel.DOMNode): ElementsTreeElement|null {\n    if (treeElement.isClosingTag()) {\n      return null;\n    }\n\n    const index = this.visibleChildren(treeElement.node()).indexOf(child);\n    if (index === -1) {\n      return null;\n    }\n\n    if (index >= treeElement.expandedChildrenLimit()) {\n      this.setExpandedChildrenLimit(treeElement, index + 1);\n    }\n    return treeElement.childAt(index) as ElementsTreeElement;\n  }\n\n  private visibleChildren(node: SDK.DOMModel.DOMNode): SDK.DOMModel.DOMNode[] {\n    let visibleChildren = ElementsTreeElement.visibleShadowRoots(node);\n\n    const contentDocument = node.contentDocument();\n    if (contentDocument) {\n      visibleChildren.push(contentDocument);\n    }\n\n    const templateContent = node.templateContent();\n    if (templateContent) {\n      visibleChildren.push(templateContent);\n    }\n\n    visibleChildren.push(...node.viewTransitionPseudoElements());\n\n    const markerPseudoElement = node.markerPseudoElement();\n    if (markerPseudoElement) {\n      visibleChildren.push(markerPseudoElement);\n    }\n\n    const checkmarkPseudoElement = node.checkmarkPseudoElement();\n    if (checkmarkPseudoElement) {\n      visibleChildren.push(checkmarkPseudoElement);\n    }\n\n    const beforePseudoElement = node.beforePseudoElement();\n    if (beforePseudoElement) {\n      visibleChildren.push(beforePseudoElement);\n    }\n\n    visibleChildren.push(...node.carouselPseudoElements());\n\n    if (node.childNodeCount()) {\n      // Children may be stale when the outline is not wired to receive DOMModel updates.\n      let children: SDK.DOMModel.DOMNode[] = node.children() || [];\n      if (!this.showHTMLCommentsSetting.get()) {\n        children = children.filter(n => n.nodeType() !== Node.COMMENT_NODE);\n      }\n      visibleChildren = visibleChildren.concat(children);\n    }\n\n    const afterPseudoElement = node.afterPseudoElement();\n    if (afterPseudoElement) {\n      visibleChildren.push(afterPseudoElement);\n    }\n\n    const pickerIconPseudoElement = node.pickerIconPseudoElement();\n    if (pickerIconPseudoElement) {\n      visibleChildren.push(pickerIconPseudoElement);\n    }\n\n    const backdropPseudoElement = node.backdropPseudoElement();\n    if (backdropPseudoElement) {\n      visibleChildren.push(backdropPseudoElement);\n    }\n\n    return visibleChildren;\n  }\n\n  private hasVisibleChildren(node: SDK.DOMModel.DOMNode): boolean {\n    if (node.isIframe()) {\n      return true;\n    }\n    if (node.contentDocument()) {\n      return true;\n    }\n    if (node.templateContent()) {\n      return true;\n    }\n    if (ElementsTreeElement.visibleShadowRoots(node).length) {\n      return true;\n    }\n    if (node.hasPseudoElements()) {\n      return true;\n    }\n    if (node.isInsertionPoint()) {\n      return true;\n    }\n    return Boolean(node.childNodeCount()) && !ElementsTreeElement.canShowInlineText(node);\n  }\n\n  private createExpandAllButtonTreeElement(treeElement: ElementsTreeElement): UI.TreeOutline.TreeElement {\n    const button = UI.UIUtils.createTextButton('', handleLoadAllChildren.bind(this));\n    button.value = '';\n    const expandAllButtonElement = new UI.TreeOutline.TreeElement(button);\n    expandAllButtonElement.selectable = false;\n    expandAllButtonElement.button = button;\n    return expandAllButtonElement;\n\n    function handleLoadAllChildren(this: ElementsTreeOutline, event: Event): void {\n      const visibleChildCount = this.visibleChildren(treeElement.node()).length;\n      this.setExpandedChildrenLimit(\n          treeElement, Math.max(visibleChildCount, treeElement.expandedChildrenLimit() + InitialChildrenLimit));\n      event.consume();\n    }\n  }\n\n  setExpandedChildrenLimit(treeElement: ElementsTreeElement, expandedChildrenLimit: number): void {\n    if (treeElement.expandedChildrenLimit() === expandedChildrenLimit) {\n      return;\n    }\n\n    treeElement.setExpandedChildrenLimit(expandedChildrenLimit);\n    if (treeElement.treeOutline && !this.treeElementsBeingUpdated.has(treeElement)) {\n      this.updateModifiedParentNode(treeElement.node());\n    }\n  }\n\n  private updateChildren(treeElement: ElementsTreeElement): void {\n    if (!treeElement.isExpandable()) {\n      if (!treeElement.treeOutline) {\n        return;\n      }\n      const selectedTreeElement = treeElement.treeOutline.selectedTreeElement;\n      if (selectedTreeElement?.hasAncestor(treeElement)) {\n        treeElement.select(true);\n      }\n      treeElement.removeChildren();\n      return;\n    }\n\n    console.assert(!treeElement.isClosingTag());\n\n    this.innerUpdateChildren(treeElement);\n  }\n\n  insertChildElement(\n      treeElement: ElementsTreeElement|TopLayerContainer, child: SDK.DOMModel.DOMNode, index: number,\n      isClosingTag?: boolean): ElementsTreeElement {\n    const newElement = this.createElementTreeElement(child, isClosingTag);\n    treeElement.insertChild(newElement, index);\n    if (child instanceof SDK.DOMModel.DOMDocument) {\n      void this.createTopLayerContainer(newElement, child);\n    }\n    return newElement;\n  }\n\n  private moveChild(treeElement: ElementsTreeElement, child: ElementsTreeElement, targetIndex: number): void {\n    if (treeElement.indexOfChild(child) === targetIndex) {\n      return;\n    }\n    const wasSelected = child.selected;\n    if (child.parent) {\n      child.parent.removeChild(child);\n    }\n    treeElement.insertChild(child, targetIndex);\n    if (wasSelected) {\n      child.select();\n    }\n  }\n\n  private innerUpdateChildren(treeElement: ElementsTreeElement): void {\n    if (this.treeElementsBeingUpdated.has(treeElement)) {\n      return;\n    }\n\n    this.treeElementsBeingUpdated.add(treeElement);\n\n    const node = treeElement.node();\n    const visibleChildren = this.visibleChildren(node);\n    const visibleChildrenSet = new Set<SDK.DOMModel.DOMNode>(visibleChildren);\n\n    // Remove any tree elements that no longer have this node as their parent and save\n    // all existing elements that could be reused. This also removes closing tag element.\n    const existingTreeElements = new Map<SDK.DOMModel.DOMNode, UI.TreeOutline.TreeElement&ElementsTreeElement>();\n    for (let i = treeElement.childCount() - 1; i >= 0; --i) {\n      const existingTreeElement = treeElement.childAt(i);\n      if (!(existingTreeElement instanceof ElementsTreeElement)) {\n        // Remove expand all button and shadow host toolbar.\n        treeElement.removeChildAtIndex(i);\n        continue;\n      }\n      const elementsTreeElement = (existingTreeElement);\n      const existingNode = elementsTreeElement.node();\n\n      if (visibleChildrenSet.has(existingNode)) {\n        existingTreeElements.set(existingNode, existingTreeElement);\n        continue;\n      }\n\n      treeElement.removeChildAtIndex(i);\n    }\n\n    for (let i = 0; i < visibleChildren.length && i < treeElement.expandedChildrenLimit(); ++i) {\n      const child = visibleChildren[i];\n      const existingTreeElement = existingTreeElements.get(child) || this.findTreeElement(child);\n      if (existingTreeElement && existingTreeElement !== treeElement) {\n        // If an existing element was found, just move it.\n        this.moveChild(treeElement, existingTreeElement, i);\n      } else {\n        // No existing element found, insert a new element.\n        const newElement = this.insertChildElement(treeElement, child, i);\n        if (this.updateRecordForHighlight(node) && treeElement.expanded) {\n          ElementsTreeElement.animateOnDOMUpdate(newElement);\n        }\n        // If a node was inserted in the middle of existing list dynamically we might need to increase the limit.\n        if (treeElement.childCount() > treeElement.expandedChildrenLimit()) {\n          this.setExpandedChildrenLimit(treeElement, treeElement.expandedChildrenLimit() + 1);\n        }\n      }\n    }\n\n    // Update expand all button.\n    const expandedChildCount = treeElement.childCount();\n    if (visibleChildren.length > expandedChildCount) {\n      const targetButtonIndex = expandedChildCount;\n      if (!treeElement.expandAllButtonElement) {\n        treeElement.expandAllButtonElement = this.createExpandAllButtonTreeElement(treeElement);\n      }\n      treeElement.insertChild(treeElement.expandAllButtonElement, targetButtonIndex);\n      treeElement.expandAllButtonElement.title =\n          i18nString(UIStrings.showAllNodesDMore, {PH1: visibleChildren.length - expandedChildCount});\n    } else if (treeElement.expandAllButtonElement) {\n      treeElement.expandAllButtonElement = null;\n    }\n\n    // Insert shortcuts to distributed children.\n    if (node.isInsertionPoint()) {\n      for (const distributedNode of node.distributedNodes()) {\n        treeElement.appendChild(new ShortcutTreeElement(distributedNode));\n      }\n    }\n\n    // Insert close tag.\n    if (node.nodeType() === Node.ELEMENT_NODE && !node.pseudoType() && treeElement.isExpandable()) {\n      this.insertChildElement(treeElement, node, treeElement.childCount(), true);\n    }\n\n    this.treeElementsBeingUpdated.delete(treeElement);\n  }\n\n  private markersChanged(event: Common.EventTarget.EventTargetEvent<SDK.DOMModel.DOMNode>): void {\n    const node = event.data;\n    const treeElement = this.treeElementByNode.get(node);\n    if (treeElement) {\n      treeElement.updateDecorations();\n    }\n  }\n\n  private async topLayerElementsChanged(): Promise<void> {\n    for (const [parent, container] of this.#topLayerContainerByParent) {\n      await container.throttledUpdateTopLayerElements();\n      if (container.currentTopLayerDOMNodes.size > 0 && container.parent !== parent) {\n        parent.appendChild(container);\n      }\n      container.hidden = container.currentTopLayerDOMNodes.size === 0;\n    }\n  }\n\n  private scrollableFlagUpdated(event: Common.EventTarget.EventTargetEvent<{node: SDK.DOMModel.DOMNode}>): void {\n    let {node} = event.data;\n    if (node.nodeName() === '#document') {\n      // We show the scroll badge of the document on the <html> element.\n      if (!node.ownerDocument?.documentElement) {\n        return;\n      }\n      node = node.ownerDocument.documentElement;\n    }\n    const treeElement = this.treeElementByNode.get(node);\n    if (treeElement && isOpeningTag(treeElement.tagTypeContext)) {\n      void treeElement.tagTypeContext.adornersThrottler.schedule(async () => treeElement.updateScrollAdorner());\n    }\n  }\n}\n\nexport namespace ElementsTreeOutline {\n  export enum Events {\n    /* eslint-disable @typescript-eslint/naming-convention -- Used by web_tests. */\n    SelectedNodeChanged = 'SelectedNodeChanged',\n    ElementsTreeUpdated = 'ElementsTreeUpdated',\n    /* eslint-enable @typescript-eslint/naming-convention */\n  }\n\n  export interface EventTypes {\n    [Events.SelectedNodeChanged]: {node: SDK.DOMModel.DOMNode|null, focus: boolean};\n    [Events.ElementsTreeUpdated]: SDK.DOMModel.DOMNode[];\n  }\n}\n\n// clang-format off\nexport const MappedCharToEntity = new Map<string, string>([\n  ['\\xA0', 'nbsp'],\n  ['\\xAD', 'shy'],\n  ['\\u2002', 'ensp'],\n  ['\\u2003', 'emsp'],\n  ['\\u2009', 'thinsp'],\n  ['\\u200A', 'hairsp'],\n  ['\\u200B', 'ZeroWidthSpace'],\n  ['\\u200C', 'zwnj'],\n  ['\\u200D', 'zwj'],\n  ['\\u200E', 'lrm'],\n  ['\\u200F', 'rlm'],\n  ['\\u202A', '#x202A'],\n  ['\\u202B', '#x202B'],\n  ['\\u202C', '#x202C'],\n  ['\\u202D', '#x202D'],\n  ['\\u202E', '#x202E'],\n  ['\\u2060', 'NoBreak'],\n  ['\\uFEFF', '#xFEFF'],\n]);\n// clang-format on\n\nexport interface MultilineEditorController {\n  cancel: () => void;\n  commit: () => void;\n  resize: () => void;\n}\n\nexport interface ClipboardData {\n  node: SDK.DOMModel.DOMNode;\n  isCut: boolean;\n}\n"]}