{"version":3,"file":"DOMLinkifier.test.js","sourceRoot":"","sources":["../../../../../../front_end/panels/elements/DOMLinkifier.test.ts"],"names":[],"mappings":"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","sourcesContent":["// Copyright 2023 The Chromium Authors\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\n\nimport * as SDK from '../../core/sdk/sdk.js';\nimport * as Protocol from '../../generated/protocol.js';\nimport {raf, renderElementIntoDOM} from '../../testing/DOMHelpers.js';\nimport {describeWithEnvironment} from '../../testing/EnvironmentHelpers.js';\n\nimport * as Elements from './elements.js';\n\ndescribeWithEnvironment('DOMLinkifier', () => {\n  describe('linking view transition pseudo nodes', () => {\n    let viewTransitionNode: sinon.SinonStubbedInstance<SDK.DOMModel.DOMNode>;\n    beforeEach(() => {\n      viewTransitionNode = sinon.createStubInstance(SDK.DOMModel.DOMNode, {\n        nodeType: Node.ELEMENT_NODE,\n        pseudoType: Protocol.DOM.PseudoType.ViewTransitionGroup,\n        localName: '::view-transition-group',\n        nodeName: '::view-transition-group',\n        pseudoIdentifier: 'root',\n        shadowRootType: null,\n        nodeNameInCorrectCase: '::view-transition-group',\n      });\n      viewTransitionNode.isViewTransitionPseudoNode.returns(true);\n    });\n    it('includes pseudo identifier in the label', async () => {\n      const domLinkifier = Elements.DOMLinkifier.Linkifier.instance({forceNew: true});\n      const el = domLinkifier.linkify(viewTransitionNode) as HTMLElement;\n      renderElementIntoDOM(el);\n      await raf();\n      const pseudoLabel = el.shadowRoot?.querySelector('.node-label-pseudo')?.textContent;\n      assert.strictEqual(pseudoLabel, '::view-transition-group(root)');\n    });\n\n    it('does not include ancestor name for a view transition pseudo', async () => {\n      const domLinkifier = Elements.DOMLinkifier.Linkifier.instance({forceNew: true});\n\n      const el = domLinkifier.linkify(viewTransitionNode) as HTMLElement;\n      renderElementIntoDOM(el);\n      await raf();\n      const nodeLabel = el.shadowRoot?.querySelector('.node-label-name');\n      assert.isNull(nodeLabel);\n    });\n  });\n\n  it('can linkify DOM node with text content correctly', async () => {\n    const domLinkifier = Elements.DOMLinkifier.Linkifier.instance({forceNew: true});\n    const node = sinon.createStubInstance(SDK.DOMModel.DOMNode, {\n      nodeType: Node.ELEMENT_NODE,\n    });\n\n    const el = domLinkifier.linkify(node, {\n      textContent: 'sample content',\n    }) as HTMLElement;\n    renderElementIntoDOM(el);\n    await raf();\n    assert.strictEqual(el.shadowRoot?.querySelector('button')?.textContent, 'sample content');\n  });\n});\n"]}