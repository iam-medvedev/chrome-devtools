{"version":3,"file":"CSSPropertyDocsView.test.js","sourceRoot":"","sources":["../../../../../../../front_end/panels/elements/components/CSSPropertyDocsView.test.ts"],"names":[],"mappings":"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","sourcesContent":["// Copyright 2023 The Chromium Authors\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\n\nimport {renderElementIntoDOM} from '../../../testing/DOMHelpers.js';\nimport {describeWithEnvironment} from '../../../testing/EnvironmentHelpers.js';\n\nimport * as ElementsComponents from './components.js';\n\ndescribeWithEnvironment('CSSPropertyDocsView', () => {\n  it('renders every section', async () => {\n    const cssProperty = {\n      name: 'display',\n      description:\n          'In combination with \\'float\\' and \\'position\\', determines the type of box or boxes that are generated for an element.',\n      baseline: {\n        status: ElementsComponents.CSSPropertyDocsView.BaselineStatus.HIGH,\n        baseline_low_date: '2015-07-29',\n        baseline_high_date: '2018-01-29',\n      },\n      browsers: [\n        'E12',\n        'FF1',\n        'FFA4',\n        'S1',\n        'SM1',\n        'C1',\n        'CA18',\n        'IE4',\n        'O7',\n      ],\n      references: [\n        {\n          name: 'MDN Reference',\n          url: 'https://developer.mozilla.org/docs/Web/CSS/display',\n        },\n      ],\n    };\n\n    const popupComponent = new ElementsComponents.CSSPropertyDocsView.CSSPropertyDocsView(cssProperty);\n    renderElementIntoDOM(popupComponent);\n\n    assert.isNotNull(popupComponent.shadowRoot!.querySelector('#description'));\n    assert.isNotNull(popupComponent.shadowRoot!.querySelector('#baseline'));\n    assert.isNotNull(popupComponent.shadowRoot!.querySelector('#learn-more'));\n  });\n\n  it('renders correct baseline text for various scenarios', () => {\n    const testCases = [\n      {\n        description: 'limited availability with specific missing browsers',\n        cssProperty: {\n          name: 'property1',\n          baseline: {status: ElementsComponents.CSSPropertyDocsView.BaselineStatus.LIMITED},\n          // Assuming 'E' (Edge) and 'S' (Safari macOS) are known and FF, C are missing\n          browsers: ['E12', 'S1'],\n        },\n        expectedText:\n            'Limited availability across major browsers (not fully implemented in Chrome, Firefox, or Safari on iOS)',\n      },\n      {\n        description: 'limited availability with no specific missing browsers (all known are present)',\n        cssProperty: {\n          name: 'property2',\n          baseline: {status: ElementsComponents.CSSPropertyDocsView.BaselineStatus.LIMITED},\n          browsers: [\n            'C1',    // Chrome Desktop\n            'CA1',   // Chrome Android\n            'E12',   // Edge Desktop\n            'FF1',   // Firefox Desktop\n            'FFA1',  // Firefox Android\n            'S1',    // Safari macOS\n            'SM1',   // Safari iOS\n          ],\n        },\n        expectedText: 'Limited availability across major browsers',\n      },\n      {\n        description: 'limited availability with undefined browsers list',\n        cssProperty: {\n          name: 'property3',\n          baseline: {status: ElementsComponents.CSSPropertyDocsView.BaselineStatus.LIMITED},\n          browsers: undefined,\n        },\n        expectedText: 'Limited availability across major browsers',\n      },\n      {\n        description: 'newly available',\n        cssProperty: {\n          name: 'property4',\n          baseline:\n              {status: ElementsComponents.CSSPropertyDocsView.BaselineStatus.LOW, baseline_low_date: '2023-01-15'},\n        },\n        expectedText: 'Newly available across major browsers (Baseline since January 2023)',\n      },\n      {\n        description: 'widely available',\n        cssProperty: {\n          name: 'property5',\n          baseline:\n              {status: ElementsComponents.CSSPropertyDocsView.BaselineStatus.HIGH, baseline_high_date: '2020-05-10'},\n        },\n        expectedText: 'Widely available across major browsers (Baseline since May 2020)',\n      },\n      {\n        description: 'newly available with missing baseline_low_date',\n        cssProperty: {\n          name: 'property6',\n          baseline: {status: ElementsComponents.CSSPropertyDocsView.BaselineStatus.LOW},\n        },\n        expectedText: 'Newly available across major browsers',\n      },\n    ];\n\n    for (const testCase of testCases) {\n      const popupComponent = new ElementsComponents.CSSPropertyDocsView.CSSPropertyDocsView(testCase.cssProperty);\n      renderElementIntoDOM(popupComponent, {allowMultipleChildren: true});\n\n      const baselineSection = popupComponent.shadowRoot!.querySelector('#baseline');\n      assert.isNotNull(baselineSection, `${testCase.description}: baseline section should exist`);\n\n      const baselineTextElement = baselineSection!.querySelector('span');\n      assert.isNotNull(baselineTextElement, `${testCase.description}: baseline text element should exist`);\n\n      const actualText = baselineTextElement!.textContent?.trim();\n      assert.include(\n          actualText || '', testCase.expectedText,\n          `${testCase.description}: baseline text did not contain expected text`);\n    }\n  });\n});\n"]}