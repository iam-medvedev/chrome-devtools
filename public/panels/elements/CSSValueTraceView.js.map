{"version":3,"file":"CSSValueTraceView.js","sourceRoot":"","sources":["../../../../../../front_end/panels/elements/CSSValueTraceView.ts"],"names":[],"mappings":"AAAA,4DAA4D;AAC5D,yEAAyE;AACzE,6BAA6B;AAE7B,OAAO,KAAK,GAAG,MAAM,8BAA8B,CAAC;AACpD,OAAO,KAAK,EAAE,MAAM,2BAA2B,CAAC;AAEhD,OAAO,uBAAuB,MAAM,4BAA4B,CAAC;AAEjE,MAAM,EAAC,IAAI,EAAE,MAAM,EAAC,GAAG,GAAG,CAAC;AAgB3B,MAAM,OAAO,iBAAkB,SAAQ,EAAE,CAAC,MAAM,CAAC,IAAI;IACnD,KAAK,CAAO;IACZ,YAAY,GAAqB,SAAS,CAAC;IAC3C,YAAY,GAAa,EAAE,CAAC;IAC5B,cAAc,GAAa,EAAE,CAAC;IAE9B,YACI,OAAa,CAAC,KAAK,EAAE,MAAM,EAAE,MAAM,EAC1B,EAAE;QACL,MAAM,gBAAgB,GAAG,IAAI,CAAA,oEAAoE,CAAC;QAClG,MAAM,QAAQ,GAAG,IAAI,CAAA,oEAAoE,CAAC;QAC1F,MAAM,CAAC,eAAe,EAAE,GAAG,uBAAuB,CAAC,GAAG,KAAK,CAAC,WAAW,CAAC;QACxE,MAAM;QACF,mBAAmB;QAC3B,IAAI,CAAA;;IAER,KAAK,CAAC,aAAa,CAAC,GAAG,CAAC,IAAI,CAAC,EAAE,CAAC,IAAI,CAAA,GAAG,gBAAgB,4BAA4B,IAAI,SAAS,CAAC;IAEjG,eAAe,IAAI,uBAAuB,CAAC,MAAM,KAAK,CAAC;YACrD,CAAC,CAAC,IAAI,CAAA,GAAG,QAAQ,4BAA4B,eAAe,SAAS;YACrE,CAAC,CAAC,IAAI,CAAA;4BACgB,KAAK,CAAC,QAAQ;4BACd,CAAC,eAAe,IAAI,uBAAuB,CAAC,MAAM,KAAK,CAAC;;SAE3E,QAAQ,wEAAwE,eAAe;;;QAGhG,uBAAuB,CAAC,GAAG,CAAC,UAAU,CAAC,EAAE,CAAC,IAAI,CAAA,GAAG,QAAQ,4BAA4B,UAAU,SAAS,CAAC;;aAG/G;IACE,CAAC,KAAK,CAAC,WAAW,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,IAAI,CAAA,GAAG,QAAQ,4BAA4B,KAAK,CAAC,WAAW,SAAS;;CAElG;QACe,kBAAkB;QAClB,MAAM,CACT,CAAC;IACJ,CAAC;QAEP,KAAK,CAAC,IAAI,CAAC,CAAC;QACZ,IAAI,CAAC,mBAAmB,CAAC,uBAAuB,CAAC,CAAC;QAClD,IAAI,CAAC,KAAK,GAAG,IAAI,CAAC;QAClB,IAAI,CAAC,aAAa,EAAE,CAAC;IACvB,CAAC;IAED,SAAS,CACL,aAAuB,EACvB,WAAqB,EACrB,WAA6B;QAE/B,IAAI,CAAC,cAAc,GAAG,aAAa,CAAC;QACpC,IAAI,CAAC,YAAY,GAAG,WAAW,CAAC;QAChC,IAAI,CAAC,YAAY,GAAG,WAAW,CAAC;QAChC,IAAI,CAAC,aAAa,EAAE,CAAC;IACvB,CAAC;IAEQ,aAAa;QACpB,MAAM,SAAS,GAAc;YAC3B,aAAa,EAAE,IAAI,CAAC,cAAc;YAClC,WAAW,EAAE,IAAI,CAAC,YAAY;YAC9B,WAAW,EAAE,IAAI,CAAC,YAAY;YAC9B,QAAQ,EAAE,GAAG,EAAE,CAAC,IAAI,CAAC,QAAQ,EAAE;SAChC,CAAC;QACF,MAAM,UAAU,GAAG,EAAE,CAAC;QACtB,IAAI,CAAC,KAAK,CAAC,SAAS,EAAE,UAAU,EAAE,IAAI,CAAC,cAAc,CAAC,CAAC;IACzD,CAAC;CACF","sourcesContent":["// Copyright 2025 The Chromium Authors. All rights reserved.\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\n\nimport * as Lit from '../../third_party/lit/lit.js';\nimport * as UI from '../../ui/legacy/legacy.js';\n\nimport cssValueTraceViewStyles from './cssValueTraceView.css.js';\n\nconst {html, render} = Lit;\n\nexport interface ViewInput {\n  substitutions: Node[][];\n  evaluations: Node[][];\n  finalResult: Node[]|undefined;\n  onToggle: () => void;\n}\nexport interface ViewOutput {}\n\nexport type View = (\n    input: ViewInput,\n    output: ViewOutput,\n    target: HTMLElement,\n    ) => void;\n\nexport class CSSValueTraceView extends UI.Widget.VBox {\n  #view: View;\n  #finalResult: Node[]|undefined = undefined;\n  #evaluations: Node[][] = [];\n  #substitutions: Node[][] = [];\n\n  constructor(\n      view: View = (input, output, target):\n          void => {\n            const substitutionIcon = html`<span class=trace-line-icon aria-label=\"resolved to\">\\u21B3</span>`;\n            const evalIcon = html`<span class=trace-line-icon aria-label=\"is equal to\">\\u003D</span>`;\n            const [firstEvaluation, ...intermediateEvaluations] = input.evaluations;\n            render(\n                // clang-format off\n        html`\n<div class=\"css-value-trace monospace\">\n  ${input.substitutions.map(line => html`${substitutionIcon}<span class=\"trace-line\">${line}</span>`)}\n  ${\n    firstEvaluation && intermediateEvaluations.length === 0\n      ? html`${evalIcon}<span class=\"trace-line\">${firstEvaluation}</span>`\n      : html`<details\n                  @toggle=${input.onToggle}\n                  ?hidden=${!firstEvaluation || intermediateEvaluations.length === 0}>\n    <summary>\n       ${evalIcon}<devtools-icon class=marker></devtools-icon><span class=\"trace-line\">${firstEvaluation}</span>\n    </summary>\n    <div>\n      ${intermediateEvaluations.map(evaluation => html`${evalIcon}<span class=\"trace-line\">${evaluation}</span>`)}\n    </div>\n  </details>`\n  }\n  ${!input.finalResult ? '' : html`${evalIcon}<span class=\"trace-line\">${input.finalResult}</span>`}\n</div>\n`,\n                // clang-format on\n                target,\n            );\n          },\n  ) {\n    super(true);\n    this.registerRequiredCSS(cssValueTraceViewStyles);\n    this.#view = view;\n    this.requestUpdate();\n  }\n\n  showTrace(\n      substitutions: Node[][],\n      evaluations: Node[][],\n      finalResult: Node[]|undefined,\n      ): void {\n    this.#substitutions = substitutions;\n    this.#evaluations = evaluations;\n    this.#finalResult = finalResult;\n    this.requestUpdate();\n  }\n\n  override performUpdate(): void {\n    const viewInput: ViewInput = {\n      substitutions: this.#substitutions,\n      evaluations: this.#evaluations,\n      finalResult: this.#finalResult,\n      onToggle: () => this.onResize(),\n    };\n    const viewOutput = {};\n    this.#view(viewInput, viewOutput, this.contentElement);\n  }\n}\n"]}