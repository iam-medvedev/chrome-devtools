{
  "version": 3,
  "sources": ["../../../../../../front_end/panels/sources/AddSourceMapURLDialog.ts", "dialog.css.js", "../../../../../../front_end/panels/sources/AiWarningInfobarPlugin.ts", "../../../../../../front_end/panels/sources/Plugin.ts", "../../../../../../front_end/panels/sources/BreakpointEditDialog.ts", "breakpointEditDialog.css.js", "../../../../../../front_end/panels/sources/BreakpointsView.ts", "breakpointsView.css.js", "../../../../../../front_end/panels/sources/BreakpointsViewUtils.ts", "../../../../../../front_end/panels/sources/CallStackSidebarPane.ts", "callStackSidebarPane.css.js", "../../../../../../front_end/panels/sources/CategorizedBreakpointL10n.ts", "../../../../../../front_end/panels/sources/CoveragePlugin.ts", "../../../../../../front_end/panels/sources/CSSPlugin.ts", "../../../../../../front_end/panels/sources/DebuggerPausedMessage.ts", "debuggerPausedMessage.css.js", "../../../../../../front_end/panels/sources/DebuggerPlugin.ts", "../../../../../../front_end/panels/sources/SourcesPanel.ts", "../../../../../../front_end/panels/sources/NavigatorView.ts", "navigatorTree.css.js", "navigatorView.css.js", "../../../../../../front_end/panels/sources/SearchSourcesView.ts", "../../../../../../front_end/panels/sources/SourcesSearchScope.ts", "sourcesPanel.css.js", "../../../../../../front_end/panels/sources/SourcesView.ts", "../../../../../../front_end/panels/sources/EditingLocationHistoryManager.ts", "sourcesView.css.js", "../../../../../../front_end/panels/sources/TabbedEditorContainer.ts", "../../../../../../front_end/panels/sources/UISourceCodeFrame.ts", "../../entrypoints/formatter_worker/FormatterActions.prebundle.ts", "../../../../../../front_end/panels/sources/ProfilePlugin.ts", "../../../../../../front_end/panels/sources/ResourceOriginPlugin.ts", "../../../../../../front_end/panels/sources/SnippetsPlugin.ts", "../../../../../../front_end/panels/sources/ThreadsSidebarPane.ts", "threadsSidebarPane.css.js", "../../../../../../front_end/panels/sources/FilePathScoreFunction.ts", "../../../../../../front_end/panels/sources/FilteredUISourceCodeListProvider.ts", "../../../../../../front_end/panels/sources/GoToLineQuickOpen.ts", "../../../../../../front_end/panels/sources/InplaceFormatterEditorAction.ts", "../../../../../../front_end/panels/sources/OpenFileQuickOpen.ts", "../../../../../../front_end/panels/sources/OutlineQuickOpen.ts", "../../../../../../front_end/panels/sources/ScopeChainSidebarPane.ts", "scopeChainSidebarPane.css.js", "../../../../../../front_end/panels/sources/SourcesNavigator.ts", "sourcesNavigator.css.js", "../../../../../../front_end/panels/sources/WatchExpressionsSidebarPane.ts", "../../ui/legacy/components/object_ui/objectValue.css.js", "watchExpressionsSidebarPane.css.js"],
  "sourcesContent": ["// Copyright 2014 The Chromium Authors. All rights reserved.\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\n\nimport * as i18n from '../../core/i18n/i18n.js';\nimport type * as Platform from '../../core/platform/platform.js';\nimport * as Buttons from '../../ui/components/buttons/buttons.js';\nimport * as UI from '../../ui/legacy/legacy.js';\nimport {Directives, html, render} from '../../ui/lit/lit.js';\nimport * as VisualLogging from '../../ui/visual_logging/visual_logging.js';\n\nimport dialogStyles from './dialog.css.js';\n\nconst UIStrings = {\n  /**\n   * @description Text in Add Source Map URLDialog of the Sources panel\n   */\n  sourceMapUrl: 'Source map URL: ',\n  /**\n   * @description Text in Add Debug Info URL Dialog of the Sources panel\n   */\n  debugInfoUrl: 'DWARF symbols URL: ',\n  /**\n   * @description Text to add something\n   */\n  add: 'Add',\n} as const;\nconst str_ = i18n.i18n.registerUIStrings('panels/sources/AddSourceMapURLDialog.ts', UIStrings);\nconst i18nString = i18n.i18n.getLocalizedString.bind(undefined, str_);\nconst {ref} = Directives;\n\ninterface ViewInput {\n  label: Platform.UIString.LocalizedString;\n  onKeyDown: (event: KeyboardEvent) => void;\n  apply: () => void;\n}\n\ninterface ViewOutput {\n  input: HTMLInputElement;\n}\n\ntype View = (input: ViewInput, output: ViewOutput, target: HTMLElement) => void;\n\nexport const DEFAULT_VIEW: View = (input, output, target) => {\n  // clang-format off\n  render(html`\n    <style>${UI.Widget.widgetScoped(dialogStyles)}</style>\n    <label>${input.label}</label>\n    <input class=\"harmony-input add-source-map\" spellcheck=\"false\" type=\"text\"\n        jslog=${VisualLogging.textField('url').track({keydown: 'Enter', change: true})}\n        @keydown=${input.onKeyDown} ${ref(e => { output.input = e as HTMLInputElement; })}>\n    <devtools-button @click=${input.apply} .jslogContext=${'add'}\n        .variant=${Buttons.Button.Variant.OUTLINED}>${i18nString(UIStrings.add)}</devtools-button>`,\n    target);\n  // clang-format on\n};\n\nexport class AddDebugInfoURLDialog extends UI.Widget.HBox {\n  private input!: HTMLInputElement;\n  private readonly dialog: UI.Dialog.Dialog;\n  private readonly callback: (arg0: Platform.DevToolsPath.UrlString) => void;\n  private constructor(\n      label: Platform.UIString.LocalizedString, jslogContext: string,\n      callback: (arg0: Platform.DevToolsPath.UrlString) => void, view = DEFAULT_VIEW) {\n    super({useShadowDom: true});\n\n    const viewInput = {\n      label,\n      onKeyDown: this.onKeyDown.bind(this),\n      apply: this.apply.bind(this),\n    };\n    const that = this;\n    const viewOutput = {\n      set input(input: HTMLInputElement) {\n        that.input = input;\n      },\n    };\n    view(viewInput, viewOutput, this.contentElement);\n\n    this.dialog = new UI.Dialog.Dialog(jslogContext);\n    this.dialog.setSizeBehavior(UI.GlassPane.SizeBehavior.MEASURE_CONTENT);\n    this.dialog.setDefaultFocusedElement(this.input);\n\n    this.callback = callback;\n  }\n\n  static createAddSourceMapURLDialog(callback: (arg0: Platform.DevToolsPath.UrlString) => void): AddDebugInfoURLDialog {\n    return new AddDebugInfoURLDialog(i18nString(UIStrings.sourceMapUrl), 'add-source-map-url', callback);\n  }\n\n  static createAddDWARFSymbolsURLDialog(callback: (arg0: Platform.DevToolsPath.UrlString) => void):\n      AddDebugInfoURLDialog {\n    return new AddDebugInfoURLDialog(i18nString(UIStrings.debugInfoUrl), 'add-debug-info-url', callback);\n  }\n\n  override show(): void {\n    super.show(this.dialog.contentElement);\n    this.dialog.show();\n  }\n\n  private done(value: Platform.DevToolsPath.UrlString): void {\n    this.dialog.hide();\n    this.callback(value);\n  }\n\n  private apply(): void {\n    this.done(this.input.value as Platform.DevToolsPath.UrlString);\n  }\n\n  private onKeyDown(event: KeyboardEvent): void {\n    if (event.key === 'Enter') {\n      event.consume(true);\n      this.apply();\n    }\n  }\n}\n", "// Copyright 2025 The Chromium Authors. All rights reserved.\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\n// IMPORTANT: this file is auto generated. Please do not edit this file.\n/* istanbul ignore file */\nexport default `/*\n * Copyright (c) 2015 The Chromium Authors. All rights reserved.\n * Use of this source code is governed by a BSD-style license that can be\n * found in the LICENSE file.\n */\n\n:scope {\n  padding: var(--sys-size-7) var(--sys-size-8);\n  align-items: center;\n}\n\nlabel {\n  white-space: nowrap;\n}\n\ninput[type=\"text\"].add-source-map {\n  box-shadow: 0 0 0 1px var(--box-shadow-outline-color);\n  font-size: inherit;\n  margin: 0 8px 0 5px;\n}\n\n/*# sourceURL=${import.meta.resolve('./dialog.css')} */`;", "// Copyright 2025 The Chromium Authors. All rights reserved.\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\n\nimport * as i18n from '../../core/i18n/i18n.js';\nimport * as Workspace from '../../models/workspace/workspace.js';\nimport type * as TextEditor from '../../ui/components/text_editor/text_editor.js';\nimport * as SourceFrame from '../../ui/legacy/components/source_frame/source_frame.js';\nimport * as UI from '../../ui/legacy/legacy.js';\n\nimport {Plugin} from './Plugin.js';\n\nconst UIStrings = {\n  /**\n   * @description Infobar text announcing that the file contents have been changed by AI\n   */\n  aiContentWarning: 'This file contains AI-generated content',\n} as const;\nconst str_ = i18n.i18n.registerUIStrings('panels/sources/AiWarningInfobarPlugin.ts', UIStrings);\nconst i18nString = i18n.i18n.getLocalizedString.bind(undefined, str_);\n\nexport class AiWarningInfobarPlugin extends Plugin {\n  #editor: TextEditor.TextEditor.TextEditor|undefined = undefined;\n  #aiWarningInfobar: UI.Infobar.Infobar|null = null;\n\n  constructor(uiSourceCode: Workspace.UISourceCode.UISourceCode) {\n    super(uiSourceCode);\n    this.uiSourceCode.addEventListener(\n        Workspace.UISourceCode.Events.WorkingCopyCommitted, this.#onWorkingCopyCommitted, this);\n  }\n\n  override dispose(): void {\n    this.#aiWarningInfobar?.dispose();\n    this.#aiWarningInfobar = null;\n    this.uiSourceCode.removeEventListener(\n        Workspace.UISourceCode.Events.WorkingCopyCommitted, this.#onWorkingCopyCommitted, this);\n    super.dispose();\n  }\n\n  static override accepts(uiSourceCode: Workspace.UISourceCode.UISourceCode): boolean {\n    return uiSourceCode.contentType().hasScripts() || uiSourceCode.contentType().hasStyleSheets();\n  }\n\n  override editorInitialized(editor: TextEditor.TextEditor.TextEditor): void {\n    this.#editor = editor;\n    if (this.uiSourceCode.containsAiChanges()) {\n      this.#showAiWarningInfobar();\n    }\n  }\n\n  #onWorkingCopyCommitted(): void {\n    if (!this.uiSourceCode.containsAiChanges()) {\n      this.#aiWarningInfobar?.dispose();\n      this.#aiWarningInfobar = null;\n    }\n  }\n\n  #showAiWarningInfobar(): void {\n    const infobar = new UI.Infobar.Infobar(\n        UI.Infobar.Type.WARNING, i18nString(UIStrings.aiContentWarning), undefined, undefined,\n        'contains-ai-content-warning');\n    this.#aiWarningInfobar = infobar;\n    infobar.setCloseCallback(() => this.removeInfobar(this.#aiWarningInfobar));\n    this.attachInfobar(this.#aiWarningInfobar);\n  }\n\n  attachInfobar(bar: UI.Infobar.Infobar): void {\n    if (this.#editor) {\n      this.#editor.dispatch({effects: SourceFrame.SourceFrame.addInfobar.of(bar)});\n    }\n  }\n\n  removeInfobar(bar: UI.Infobar.Infobar|null): void {\n    if (this.#editor && bar) {\n      this.#editor.dispatch({effects: SourceFrame.SourceFrame.removeInfobar.of(bar)});\n    }\n  }\n}\n", "// Copyright 2020 The Chromium Authors. All rights reserved.\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\n\nimport type * as Workspace from '../../models/workspace/workspace.js';\nimport type * as CodeMirror from '../../third_party/codemirror.next/codemirror.next.js';\nimport type * as TextEditor from '../../ui/components/text_editor/text_editor.js';\nimport type * as SourceFrame from '../../ui/legacy/components/source_frame/source_frame.js';\nimport type * as UI from '../../ui/legacy/legacy.js';\n\nexport class Plugin {\n  constructor(\n      protected readonly uiSourceCode: Workspace.UISourceCode.UISourceCode,\n      _transformer?: SourceFrame.SourceFrame.Transformer) {\n  }\n\n  static accepts(_uiSourceCode: Workspace.UISourceCode.UISourceCode): boolean {\n    return false;\n  }\n\n  willHide(): void {\n  }\n\n  rightToolbarItems(): UI.Toolbar.ToolbarItem[] {\n    return [];\n  }\n\n  /**\n   *\n   * TODO(szuend): It is OK to asyncify this function (similar to {rightToolbarItems}),\n   *               but it is currently not strictly necessary.\n   */\n  leftToolbarItems(): UI.Toolbar.ToolbarItem[] {\n    return [];\n  }\n\n  populateLineGutterContextMenu(_contextMenu: UI.ContextMenu.ContextMenu, _lineNumber: number): void {\n  }\n\n  populateTextAreaContextMenu(_contextMenu: UI.ContextMenu.ContextMenu, _lineNumber: number, _columnNumber: number):\n      void {\n  }\n\n  decorationChanged(_type: SourceFrame.SourceFrame.DecoratorType, _editor: TextEditor.TextEditor.TextEditor): void {\n  }\n\n  editorExtension(): CodeMirror.Extension {\n    return [];\n  }\n\n  editorInitialized(_editor: TextEditor.TextEditor.TextEditor): void {\n  }\n\n  dispose(): void {\n  }\n}\n", "// Copyright 2018 The Chromium Authors. All rights reserved.\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\n/* eslint-disable rulesdir/no-imperative-dom-api */\n\nimport '../../ui/legacy/legacy.js';\n\nimport * as Common from '../../core/common/common.js';\nimport * as i18n from '../../core/i18n/i18n.js';\nimport * as SDK from '../../core/sdk/sdk.js';\nimport type * as BreakpointManager from '../../models/breakpoints/breakpoints.js';\nimport * as CodeMirror from '../../third_party/codemirror.next/codemirror.next.js';\nimport * as IconButton from '../../ui/components/icon_button/icon_button.js';\nimport * as TextEditor from '../../ui/components/text_editor/text_editor.js';\nimport * as UI from '../../ui/legacy/legacy.js';\nimport * as VisualLogging from '../../ui/visual_logging/visual_logging.js';\n\nimport breakpointEditDialogStyles from './breakpointEditDialog.css.js';\n\nconst {Direction} = TextEditor.TextEditorHistory;\n\nconst UIStrings = {\n  /**\n   * @description Screen reader label for a select box that chooses the breakpoint type in the Sources panel when editing a breakpoint\n   */\n  breakpointType: 'Breakpoint type',\n  /**\n   * @description Text in Breakpoint Edit Dialog of the Sources panel\n   */\n  breakpoint: 'Breakpoint',\n  /**\n   * @description Tooltip text in Breakpoint Edit Dialog of the Sources panel that shows up when hovering over the close icon\n   */\n  closeDialog: 'Close edit dialog and save changes',\n  /**\n   * @description Text in Breakpoint Edit Dialog of the Sources panel\n   */\n  conditionalBreakpoint: 'Conditional breakpoint',\n  /**\n   * @description Text in Breakpoint Edit Dialog of the Sources panel\n   */\n  logpoint: 'Logpoint',\n  /**\n   * @description Text in Breakpoint Edit Dialog of the Sources panel\n   */\n  expressionToCheckBeforePausingEg: 'Expression to check before pausing, e.g. x > 5',\n  /**\n   * @description Type selector element title in Breakpoint Edit Dialog of the Sources panel\n   */\n  pauseOnlyWhenTheConditionIsTrue: 'Pause only when the condition is true',\n  /**\n   * @description Link text in the Breakpoint Edit Dialog of the Sources panel\n   */\n  learnMoreOnBreakpointTypes: 'Learn more: Breakpoint Types',\n  /**\n   * @description Text in Breakpoint Edit Dialog of the Sources panel. It is used as\n   *the placeholder for a text input field before the user enters text. Provides the user with\n   *an example on how to use Logpoints. 'Log' is a verb and 'message' is a noun.\n   *See: https://developer.chrome.com/blog/new-in-devtools-73/#logpoints\n   */\n  logMessageEgXIsX: 'Log message, e.g. `\\'x is\\', x`',\n  /**\n   * @description Type selector element title in Breakpoint Edit Dialog of the Sources panel\n   */\n  logAMessageToConsoleDoNotBreak: 'Log a message to Console, do not break',\n} as const;\nconst str_ = i18n.i18n.registerUIStrings('panels/sources/BreakpointEditDialog.ts', UIStrings);\nconst i18nString = i18n.i18n.getLocalizedString.bind(undefined, str_);\n\nexport interface BreakpointEditDialogResult {\n  committed: boolean;\n  condition: BreakpointManager.BreakpointManager.UserCondition;\n  isLogpoint: boolean;\n}\n\nexport class BreakpointEditDialog extends UI.Widget.Widget {\n  private readonly onFinish: (result: BreakpointEditDialogResult) => void;\n  private finished: boolean;\n  private editor: TextEditor.TextEditor.TextEditor;\n  private readonly typeSelector: UI.Toolbar.ToolbarComboBox;\n  private placeholderCompartment: CodeMirror.Compartment;\n\n  #history: TextEditor.AutocompleteHistory.AutocompleteHistory;\n  #editorHistory: TextEditor.TextEditorHistory.TextEditorHistory;\n\n  constructor(\n      editorLineNumber: number, oldCondition: string, isLogpoint: boolean,\n      onFinish: (result: BreakpointEditDialogResult) => void) {\n    super({\n      jslog: `${VisualLogging.dialog('edit-breakpoint')}`,\n      useShadowDom: true,\n    });\n    this.registerRequiredCSS(breakpointEditDialogStyles);\n\n    const editorConfig = [\n      CodeMirror.javascript.javascriptLanguage,\n      TextEditor.Config.baseConfiguration(oldCondition || ''),\n      TextEditor.Config.closeBrackets.instance(),\n      TextEditor.Config.autocompletion.instance(),\n      CodeMirror.EditorView.lineWrapping,\n      TextEditor.Config.showCompletionHint,\n      TextEditor.Config.conservativeCompletion,\n      CodeMirror.javascript.javascriptLanguage.data.of({\n        autocomplete: (context: CodeMirror.CompletionContext) => this.#editorHistory.historyCompletions(context),\n      }),\n      CodeMirror.autocompletion(),\n      TextEditor.JavaScript.argumentHints(),\n    ];\n\n    this.onFinish = onFinish;\n    this.finished = false;\n    this.element.tabIndex = -1;\n\n    this.element.classList.add('sources-edit-breakpoint-dialog');\n    const header = this.contentElement.createChild('div', 'dialog-header');\n    const toolbar = header.createChild('devtools-toolbar', 'source-frame-breakpoint-toolbar');\n    toolbar.appendText(`Line ${editorLineNumber + 1}:`);\n\n    this.typeSelector = new UI.Toolbar.ToolbarComboBox(\n        this.onTypeChanged.bind(this), i18nString(UIStrings.breakpointType), undefined, 'type');\n    this.typeSelector.createOption(\n        i18nString(UIStrings.breakpoint), SDK.DebuggerModel.BreakpointType.REGULAR_BREAKPOINT);\n    const conditionalOption = this.typeSelector.createOption(\n        i18nString(UIStrings.conditionalBreakpoint), SDK.DebuggerModel.BreakpointType.CONDITIONAL_BREAKPOINT);\n    const logpointOption =\n        this.typeSelector.createOption(i18nString(UIStrings.logpoint), SDK.DebuggerModel.BreakpointType.LOGPOINT);\n    this.typeSelector.select(isLogpoint ? logpointOption : conditionalOption);\n    toolbar.appendToolbarItem(this.typeSelector);\n\n    const content = oldCondition || '';\n    const finishIfComplete = (view: CodeMirror.EditorView): boolean => {\n      void TextEditor.JavaScript.isExpressionComplete(view.state.doc.toString()).then(complete => {\n        if (complete) {\n          this.finishEditing(true, this.editor.state.doc.toString());\n        } else {\n          CodeMirror.insertNewlineAndIndent(view);\n        }\n      });\n      return true;\n    };\n    const keymap = [\n      {key: 'ArrowUp', run: () => this.#editorHistory.moveHistory(Direction.BACKWARD)},\n      {key: 'ArrowDown', run: () => this.#editorHistory.moveHistory(Direction.FORWARD)},\n      {mac: 'Ctrl-p', run: () => this.#editorHistory.moveHistory(Direction.BACKWARD, true)},\n      {mac: 'Ctrl-n', run: () => this.#editorHistory.moveHistory(Direction.FORWARD, true)},\n      {\n        key: 'Mod-Enter',\n        run: finishIfComplete,\n      },\n      {\n        key: 'Enter',\n        run: finishIfComplete,\n      },\n      {\n        key: 'Shift-Enter',\n        run: CodeMirror.insertNewlineAndIndent,\n      },\n      {\n        key: 'Escape',\n        run: () => {\n          this.finishEditing(false, '');\n          return true;\n        },\n      },\n    ];\n\n    this.placeholderCompartment = new CodeMirror.Compartment();\n\n    const editorWrapper = this.contentElement.appendChild(document.createElement('div'));\n    editorWrapper.classList.add('condition-editor');\n    editorWrapper.setAttribute('jslog', `${VisualLogging.textField().track({change: true})}`);\n\n    this.editor = new TextEditor.TextEditor.TextEditor(CodeMirror.EditorState.create({\n      doc: content,\n      selection: {anchor: 0, head: content.length},\n      extensions: [\n        this.placeholderCompartment.of(this.getPlaceholder()),\n        CodeMirror.keymap.of(keymap),\n        editorConfig,\n      ],\n    }));\n    editorWrapper.appendChild(this.editor);\n\n    const closeIcon = IconButton.Icon.create('cross');\n    closeIcon.title = i18nString(UIStrings.closeDialog);\n    closeIcon.setAttribute('jslog', `${VisualLogging.close().track({click: true})}`);\n    closeIcon.onclick = () => this.finishEditing(true, this.editor.state.doc.toString());\n    header.appendChild(closeIcon);\n\n    this.#history = new TextEditor.AutocompleteHistory.AutocompleteHistory(\n        Common.Settings.Settings.instance().createLocalSetting('breakpoint-condition-history', []));\n    this.#editorHistory = new TextEditor.TextEditorHistory.TextEditorHistory(this.editor, this.#history);\n\n    const linkWrapper = this.contentElement.appendChild(document.createElement('div'));\n    linkWrapper.classList.add('link-wrapper');\n    const link = UI.Fragment.html`<x-link class=\"link devtools-link\" tabindex=\"0\" href=\"https://goo.gle/devtools-loc\"\n                                          jslog=\"${VisualLogging.link('learn-more')}\">${\n                     i18nString(UIStrings.learnMoreOnBreakpointTypes)}</x-link>` as UI.XLink.XLink;\n    const linkIcon = IconButton.Icon.create('open-externally', 'link-icon');\n    link.prepend(linkIcon);\n    linkWrapper.appendChild(link);\n\n    this.updateTooltip();\n  }\n\n  saveAndFinish(): void {\n    this.finishEditing(true, this.editor.state.doc.toString());\n  }\n\n  focusEditor(): void {\n    this.editor.editor.focus();\n  }\n\n  private onTypeChanged(): void {\n    if (this.breakpointType === SDK.DebuggerModel.BreakpointType.REGULAR_BREAKPOINT) {\n      this.finishEditing(true, '');\n      return;\n    }\n    this.focusEditor();\n    this.editor.dispatch({effects: this.placeholderCompartment.reconfigure(this.getPlaceholder())});\n    this.updateTooltip();\n  }\n\n  private get breakpointType(): string|null {\n    const option = this.typeSelector.selectedOption();\n    return option ? option.value : null;\n  }\n\n  private getPlaceholder(): CodeMirror.Extension {\n    const type = this.breakpointType;\n    if (type === SDK.DebuggerModel.BreakpointType.CONDITIONAL_BREAKPOINT) {\n      return CodeMirror.placeholder(i18nString(UIStrings.expressionToCheckBeforePausingEg));\n    }\n    if (type === SDK.DebuggerModel.BreakpointType.LOGPOINT) {\n      return CodeMirror.placeholder(i18nString(UIStrings.logMessageEgXIsX));\n    }\n    return [];\n  }\n\n  private updateTooltip(): void {\n    const type = this.breakpointType;\n    if (type === SDK.DebuggerModel.BreakpointType.CONDITIONAL_BREAKPOINT) {\n      UI.Tooltip.Tooltip.install((this.typeSelector.element), i18nString(UIStrings.pauseOnlyWhenTheConditionIsTrue));\n    } else if (type === SDK.DebuggerModel.BreakpointType.LOGPOINT) {\n      UI.Tooltip.Tooltip.install((this.typeSelector.element), i18nString(UIStrings.logAMessageToConsoleDoNotBreak));\n    }\n  }\n\n  finishEditing(committed: boolean, condition: string): void {\n    if (this.finished) {\n      return;\n    }\n    this.finished = true;\n    this.editor.remove();\n    this.#history.pushHistoryItem(condition);\n    const isLogpoint = this.breakpointType === SDK.DebuggerModel.BreakpointType.LOGPOINT;\n    this.onFinish({committed, condition: condition as BreakpointManager.BreakpointManager.UserCondition, isLogpoint});\n  }\n\n  get editorForTest(): TextEditor.TextEditor.TextEditor {\n    return this.editor;\n  }\n}\n", "// Copyright 2025 The Chromium Authors. All rights reserved.\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\n// IMPORTANT: this file is auto generated. Please do not edit this file.\n/* istanbul ignore file */\nexport default `/*\n * Copyright 2018 The Chromium Authors. All rights reserved.\n * Use of this source code is governed by a BSD-style license that can be\n * found in the LICENSE file.\n */\n\n:host {\n  z-index: 30;\n  padding: 4px;\n  background-color: var(--sys-color-surface3);\n  border-radius: 7px;\n  border: 2px solid var(--sys-color-divider);\n  width: 90%;\n  pointer-events: auto;\n}\n\n:host(.sources-edit-breakpoint-dialog) {\n  border-radius: 0;\n  z-index: 30;\n  background-color: var(--sys-color-surface3);\n  width: 555px;\n  pointer-events: auto;\n  margin-left: -1px;\n  padding: 0 10px 10px 5px;\n  border: 1px solid var(--sys-color-divider);\n}\n\n:host-context(.sources-edit-breakpoint-dialog) .condition-editor {\n  background-color: var(--sys-color-cdt-base-container);\n  margin: 0 6px 20px 3px;\n}\n\n:host-context(.sources-edit-breakpoint-dialog) .source-frame-breakpoint-toolbar {\n  font-family: sans-serif;\n  font-size: 12px;\n}\n\n:host-context(.sources-edit-breakpoint-dialog) .link,\n.devtools-link {\n  font-family: sans-serif;\n  font-size: 12px;\n  margin: 0 3px;\n}\n\n:host-context(.sources-edit-breakpoint-dialog) devtools-icon.link-icon {\n  vertical-align: sub;\n  margin-right: 0.5ch;\n  color: var(--icon-link);\n  width: 16px;\n  height: 16px;\n}\n\n:host-context(.sources-edit-breakpoint-dialog) .link-wrapper {\n  display: inline-flex;\n}\n\n:host-context(.sources-edit-breakpoint-dialog) .dialog-header {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n}\n\n:host-context(.sources-edit-breakpoint-dialog) .dialog-header > devtools-icon:hover {\n  color: var(--icon-default-hover);\n}\n\n/*# sourceURL=${import.meta.resolve('./breakpointEditDialog.css')} */`;", "// Copyright (c) 2022 The Chromium Authors. All rights reserved.\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\n\nimport '../../ui/components/icon_button/icon_button.js';\n\nimport * as Common from '../../core/common/common.js';\nimport * as Host from '../../core/host/host.js';\nimport * as i18n from '../../core/i18n/i18n.js';\nimport * as Platform from '../../core/platform/platform.js';\nimport {assertNotNullOrUndefined} from '../../core/platform/platform.js';\nimport * as SDK from '../../core/sdk/sdk.js';\nimport * as Bindings from '../../models/bindings/bindings.js';\nimport * as Breakpoints from '../../models/breakpoints/breakpoints.js';\nimport * as TextUtils from '../../models/text_utils/text_utils.js';\nimport * as Workspace from '../../models/workspace/workspace.js';\nimport * as Input from '../../ui/components/input/input.js';\nimport * as RenderCoordinator from '../../ui/components/render_coordinator/render_coordinator.js';\nimport * as UI from '../../ui/legacy/legacy.js';\nimport * as Lit from '../../ui/lit/lit.js';\nimport * as VisualLogging from '../../ui/visual_logging/visual_logging.js';\n\nimport breakpointsViewStyles from './breakpointsView.css.js';\nimport {findNextNodeForKeyboardNavigation, getDifferentiatingPathMap, type TitleInfo} from './BreakpointsViewUtils.js';\n\nconst {html, render, Directives: {ifDefined, repeat, classMap, live}} = Lit;\n\nconst UIStrings = {\n  /**\n   * @description Label for a checkbox to toggle pausing on uncaught exceptions in the breakpoint sidebar of the Sources panel. When the checkbox is checked, DevTools will pause if an uncaught exception is thrown at runtime.\n   */\n  pauseOnUncaughtExceptions: 'Pause on uncaught exceptions',\n  /**\n   * @description Label for a checkbox to toggling pausing on caught exceptions in the breakpoint sidebar of the Sources panel. When the checkbox is checked, DevTools will pause if an exception is thrown, but caught (handled) at runtime.\n   */\n  pauseOnCaughtExceptions: 'Pause on caught exceptions',\n  /**\n   * @description Text exposed to screen readers on checked items.\n   */\n  checked: 'checked',\n  /**\n   * @description Accessible text exposed to screen readers when the screen reader encounters an unchecked checkbox.\n   */\n  unchecked: 'unchecked',\n  /**\n   * @description Accessible text for a breakpoint collection with a combination of checked states.\n   */\n  indeterminate: 'mixed',\n  /**\n   * @description Accessibility label for hit breakpoints in the Sources panel.\n   * @example {checked} PH1\n   */\n  breakpointHit: '{PH1} breakpoint hit',\n  /**\n   * @description Tooltip text that shows when hovered over a remove button that appears next to a filename in the breakpoint sidebar of the sources panel. Also used in the context menu for breakpoint groups.\n   */\n  removeAllBreakpointsInFile: 'Remove all breakpoints in file',\n  /**\n   * @description Context menu item in the Breakpoints Sidebar Pane of the Sources panel that disables all breakpoints in a file.\n   */\n  disableAllBreakpointsInFile: 'Disable all breakpoints in file',\n  /**\n   * @description Context menu item in the Breakpoints Sidebar Pane of the Sources panel that enables all breakpoints in a file.\n   */\n  enableAllBreakpointsInFile: 'Enable all breakpoints in file',\n  /**\n   * @description Tooltip text that shows when hovered over an edit button that appears next to a breakpoint or conditional breakpoint in the breakpoint sidebar of the sources panel.\n   */\n  editCondition: 'Edit condition',\n  /**\n   * @description Tooltip text that shows when hovered over an edit button that appears next to a logpoint in the breakpoint sidebar of the sources panel.\n   */\n  editLogpoint: 'Edit logpoint',\n  /**\n   * @description Context menu item in the Breakpoints Sidebar Pane of the Sources panel that disables all breakpoints.\n   */\n  disableAllBreakpoints: 'Disable all breakpoints',\n  /**\n   * @description Context menu item in the Breakpoints Sidebar Pane of the Sources panel that enables all breakpoints.\n   */\n  enableAllBreakpoints: 'Enable all breakpoints',\n  /**\n   * @description Tooltip text that shows when hovered over a remove button that appears next to a breakpoint in the breakpoint sidebar of the sources panel. Also used in the context menu for breakpoint items.\n   */\n  removeBreakpoint: 'Remove breakpoint',\n  /**\n   * @description Text to remove all breakpoints\n   */\n  removeAllBreakpoints: 'Remove all breakpoints',\n  /**\n   * @description Text in Breakpoints Sidebar Pane of the Sources panel\n   */\n  removeOtherBreakpoints: 'Remove other breakpoints',\n  /**\n   * @description Context menu item that reveals the source code location of a breakpoint in the Sources panel.\n   */\n  revealLocation: 'Reveal location',\n  /**\n   * @description Tooltip text that shows when hovered over a piece of code of a breakpoint in the breakpoint sidebar of the sources panel. It shows the condition, on which the breakpoint will stop.\n   * @example {x < 3} PH1\n   */\n  conditionCode: 'Condition: {PH1}',\n  /**\n   * @description Tooltip text that shows when hovered over a piece of code of a breakpoint in the breakpoint sidebar of the sources panel. It shows what is going to be printed in the console, if execution hits this breakpoint.\n   * @example {'hello'} PH1\n   */\n  logpointCode: 'Logpoint: {PH1}',\n} as const;\nconst str_ = i18n.i18n.registerUIStrings('panels/sources/BreakpointsView.ts', UIStrings);\nconst i18nString = i18n.i18n.getLocalizedString.bind(undefined, str_);\nconst MAX_SNIPPET_LENGTH = 200;\n\nexport interface BreakpointsViewData {\n  breakpointsActive: boolean;\n  pauseOnUncaughtExceptions: boolean;\n  pauseOnCaughtExceptions: boolean;\n  groups: BreakpointGroup[];\n}\n\nexport interface BreakpointGroup {\n  name: string;\n  url: Platform.DevToolsPath.UrlString;\n  editable: boolean;\n  expanded: boolean;\n  breakpointItems: BreakpointItem[];\n}\n\nexport interface BreakpointItem {\n  id: string;\n  location: string;\n  codeSnippet: string;\n  isHit: boolean;\n  status: BreakpointStatus;\n  type: SDK.DebuggerModel.BreakpointType;\n  hoverText?: string;\n}\n\nexport const enum BreakpointStatus {\n  ENABLED = 'ENABLED',\n  DISABLED = 'DISABLED',\n  INDETERMINATE = 'INDETERMINATE',\n}\n\nlet breakpointsViewInstance: BreakpointsView|null = null;\nlet breakpointsViewControllerInstance: BreakpointsSidebarController|null;\n\nexport class BreakpointsSidebarController implements UI.ContextFlavorListener.ContextFlavorListener {\n  readonly #breakpointManager: Breakpoints.BreakpointManager.BreakpointManager;\n  readonly #breakpointItemToLocationMap =\n      new WeakMap<BreakpointItem, Breakpoints.BreakpointManager.BreakpointLocation[]>();\n  readonly #breakpointsActiveSetting: Common.Settings.Setting<boolean>;\n  readonly #pauseOnUncaughtExceptionSetting: Common.Settings.Setting<boolean>;\n  readonly #pauseOnCaughtExceptionSetting: Common.Settings.Setting<boolean>;\n\n  readonly #collapsedFilesSettings: Common.Settings.Setting<Platform.DevToolsPath.UrlString[]>;\n  readonly #collapsedFiles: Set<Platform.DevToolsPath.UrlString>;\n\n  // This is used to keep track of outstanding edits to breakpoints that were initiated\n  // by the breakpoint edit button (for UMA).\n  #outstandingBreakpointEdited: Breakpoints.BreakpointManager.Breakpoint|undefined;\n  #updateScheduled = false;\n  #updateRunning = false;\n\n  private constructor(\n      breakpointManager: Breakpoints.BreakpointManager.BreakpointManager, settings: Common.Settings.Settings) {\n    this.#collapsedFilesSettings = Common.Settings.Settings.instance().createSetting('collapsed-files', []);\n    this.#collapsedFiles = new Set(this.#collapsedFilesSettings.get());\n    this.#breakpointManager = breakpointManager;\n    this.#breakpointManager.addEventListener(\n        Breakpoints.BreakpointManager.Events.BreakpointAdded, this.#onBreakpointAdded, this);\n    this.#breakpointManager.addEventListener(\n        Breakpoints.BreakpointManager.Events.BreakpointRemoved, this.#onBreakpointRemoved, this);\n    this.#breakpointsActiveSetting = settings.moduleSetting('breakpoints-active');\n    this.#breakpointsActiveSetting.addChangeListener(this.update, this);\n    this.#pauseOnUncaughtExceptionSetting = settings.moduleSetting('pause-on-uncaught-exception');\n    this.#pauseOnUncaughtExceptionSetting.addChangeListener(this.update, this);\n    this.#pauseOnCaughtExceptionSetting = settings.moduleSetting('pause-on-caught-exception');\n    this.#pauseOnCaughtExceptionSetting.addChangeListener(this.update, this);\n  }\n\n  static instance({forceNew, breakpointManager, settings}: {\n    forceNew: boolean|null,\n    breakpointManager: Breakpoints.BreakpointManager.BreakpointManager,\n    settings: Common.Settings.Settings,\n  } = {\n    forceNew: null,\n    breakpointManager: Breakpoints.BreakpointManager.BreakpointManager.instance(),\n    settings: Common.Settings.Settings.instance(),\n  }): BreakpointsSidebarController {\n    if (!breakpointsViewControllerInstance || forceNew) {\n      breakpointsViewControllerInstance = new BreakpointsSidebarController(breakpointManager, settings);\n    }\n    return breakpointsViewControllerInstance;\n  }\n\n  static removeInstance(): void {\n    breakpointsViewControllerInstance = null;\n  }\n\n  flavorChanged(_object: Object|null): void {\n    void this.update();\n  }\n\n  breakpointEditFinished(breakpoint: Breakpoints.BreakpointManager.Breakpoint|null, edited: boolean): void {\n    if (this.#outstandingBreakpointEdited && this.#outstandingBreakpointEdited === breakpoint) {\n      if (edited) {\n        Host.userMetrics.actionTaken(Host.UserMetrics.Action.BreakpointConditionEditedFromSidebar);\n      }\n      this.#outstandingBreakpointEdited = undefined;\n    }\n  }\n\n  breakpointStateChanged(breakpointItem: BreakpointItem, checked: boolean): void {\n    const locations = this.#getLocationsForBreakpointItem(breakpointItem);\n    locations.forEach((value: Breakpoints.BreakpointManager.BreakpointLocation) => {\n      const breakpoint = value.breakpoint;\n      breakpoint.setEnabled(checked);\n    });\n  }\n\n  async breakpointEdited(breakpointItem: BreakpointItem, editButtonClicked: boolean): Promise<void> {\n    const locations = this.#getLocationsForBreakpointItem(breakpointItem);\n    let location: Breakpoints.BreakpointManager.BreakpointLocation|undefined;\n    for (const locationCandidate of locations) {\n      if (!location || locationCandidate.uiLocation.compareTo(location.uiLocation) < 0) {\n        location = locationCandidate;\n      }\n    }\n    if (location) {\n      if (editButtonClicked) {\n        this.#outstandingBreakpointEdited = location.breakpoint;\n      }\n      await Common.Revealer.reveal(location);\n    }\n  }\n\n  breakpointsRemoved(breakpointItems: BreakpointItem[]): void {\n    const locations = breakpointItems.flatMap(breakpointItem => this.#getLocationsForBreakpointItem(breakpointItem));\n    locations.forEach(location => location?.breakpoint.remove(false /* keepInStorage */));\n  }\n\n  expandedStateChanged(url: Platform.DevToolsPath.UrlString, expanded: boolean): void {\n    if (expanded) {\n      this.#collapsedFiles.delete(url);\n    } else {\n      this.#collapsedFiles.add(url);\n    }\n\n    this.#saveSettings();\n  }\n\n  async jumpToSource(breakpointItem: BreakpointItem): Promise<void> {\n    const uiLocations = this.#getLocationsForBreakpointItem(breakpointItem).map(location => location.uiLocation);\n    let uiLocation: Workspace.UISourceCode.UILocation|undefined;\n    for (const uiLocationCandidate of uiLocations) {\n      if (!uiLocation || uiLocationCandidate.compareTo(uiLocation) < 0) {\n        uiLocation = uiLocationCandidate;\n      }\n    }\n    if (uiLocation) {\n      await Common.Revealer.reveal(uiLocation);\n    }\n  }\n\n  setPauseOnUncaughtExceptions(value: boolean): void {\n    this.#pauseOnUncaughtExceptionSetting.set(value);\n  }\n\n  setPauseOnCaughtExceptions(value: boolean): void {\n    this.#pauseOnCaughtExceptionSetting.set(value);\n  }\n\n  async update(): Promise<void> {\n    this.#updateScheduled = true;\n    if (this.#updateRunning) {\n      return;\n    }\n    this.#updateRunning = true;\n    while (this.#updateScheduled) {\n      this.#updateScheduled = false;\n      const data = await this.getUpdatedBreakpointViewData();\n      BreakpointsView.instance().data = data;\n    }\n    this.#updateRunning = false;\n  }\n\n  async getUpdatedBreakpointViewData(): Promise<BreakpointsViewData> {\n    const breakpointsActive = this.#breakpointsActiveSetting.get();\n    const pauseOnUncaughtExceptions = this.#pauseOnUncaughtExceptionSetting.get();\n    const pauseOnCaughtExceptions = this.#pauseOnCaughtExceptionSetting.get();\n\n    const breakpointLocations = this.#getBreakpointLocations();\n    if (!breakpointLocations.length) {\n      return {\n        breakpointsActive,\n        pauseOnCaughtExceptions,\n        pauseOnUncaughtExceptions,\n        groups: [],\n      };\n    }\n\n    const locationsGroupedById = this.#groupBreakpointLocationsById(breakpointLocations);\n    const locationIdsByLineId = this.#getLocationIdsByLineId(breakpointLocations);\n\n    const [content, selectedUILocation] = await Promise.all([\n      this.#getContent(locationsGroupedById),\n      this.#getHitUILocation(),\n    ]);\n\n    const scriptIdToGroup = new Map<string, BreakpointGroup>();\n\n    for (let idx = 0; idx < locationsGroupedById.length; idx++) {\n      const locations = locationsGroupedById[idx];\n      const fstLocation = locations[0];\n      const sourceURL = fstLocation.uiLocation.uiSourceCode.url();\n      const scriptId = fstLocation.uiLocation.uiSourceCode.canonicalScriptId();\n      const uiLocation = fstLocation.uiLocation;\n\n      const isHit = selectedUILocation !== null &&\n          locations.some(location => location.uiLocation.id() === selectedUILocation.id());\n\n      const numBreakpointsOnLine = locationIdsByLineId.get(uiLocation.lineId()).size;\n      const showColumn = numBreakpointsOnLine > 1;\n      const locationText = uiLocation.lineAndColumnText(showColumn) as string;\n\n      const contentData = content[idx];\n      const codeSnippet = contentData instanceof TextUtils.WasmDisassembly.WasmDisassembly ?\n          contentData.lines[contentData.bytecodeOffsetToLineNumber(uiLocation.columnNumber ?? 0)] ?? '' :\n          contentData.textObj.lineAt(uiLocation.lineNumber);\n\n      if (isHit && this.#collapsedFiles.has(sourceURL)) {\n        this.#collapsedFiles.delete(sourceURL);\n        this.#saveSettings();\n      }\n      const expanded = !this.#collapsedFiles.has(sourceURL);\n\n      const status: BreakpointStatus = this.#getBreakpointState(locations);\n      const {type, hoverText} = this.#getBreakpointTypeAndDetails(locations);\n      const item = {\n        id: fstLocation.breakpoint.breakpointStorageId(),\n        location: locationText,\n        codeSnippet,\n        isHit,\n        status,\n        type,\n        hoverText,\n      };\n      this.#breakpointItemToLocationMap.set(item, locations);\n\n      let group = scriptIdToGroup.get(scriptId);\n      if (group) {\n        group.breakpointItems.push(item);\n        group.expanded ||= expanded;\n      } else {\n        const editable = this.#breakpointManager.supportsConditionalBreakpoints(uiLocation.uiSourceCode);\n        group = {\n          url: sourceURL,\n          name: uiLocation.uiSourceCode.displayName(),\n          editable,\n          expanded,\n          breakpointItems: [item],\n        };\n        scriptIdToGroup.set(scriptId, group);\n      }\n    }\n    return {\n      breakpointsActive,\n      pauseOnCaughtExceptions,\n      pauseOnUncaughtExceptions,\n      groups: Array.from(scriptIdToGroup.values()),\n    };\n  }\n\n  #onBreakpointAdded(event: Common.EventTarget.EventTargetEvent<Breakpoints.BreakpointManager.BreakpointLocation>):\n      Promise<void> {\n    const breakpoint = event.data.breakpoint;\n    if (breakpoint.origin === Breakpoints.BreakpointManager.BreakpointOrigin.USER_ACTION &&\n        this.#collapsedFiles.has(breakpoint.url())) {\n      // Auto-expand if a new breakpoint was added to a collapsed group.\n      this.#collapsedFiles.delete(breakpoint.url());\n      this.#saveSettings();\n    }\n    return this.update();\n  }\n\n  #onBreakpointRemoved(event: Common.EventTarget.EventTargetEvent<Breakpoints.BreakpointManager.BreakpointLocation>):\n      Promise<void> {\n    const breakpoint = event.data.breakpoint;\n    if (this.#collapsedFiles.has(breakpoint.url())) {\n      const locations = Breakpoints.BreakpointManager.BreakpointManager.instance().allBreakpointLocations();\n      const otherBreakpointsOnSameFileExist =\n          locations.some(location => location.breakpoint.url() === breakpoint.url());\n      if (!otherBreakpointsOnSameFileExist) {\n        // Clear up the #collapsedFiles set from this url if no breakpoint is left in this group.\n        this.#collapsedFiles.delete(breakpoint.url());\n        this.#saveSettings();\n      }\n    }\n    return this.update();\n  }\n\n  #saveSettings(): void {\n    this.#collapsedFilesSettings.set(Array.from(this.#collapsedFiles.values()));\n  }\n\n  #getBreakpointTypeAndDetails(locations: Breakpoints.BreakpointManager.BreakpointLocation[]):\n      {type: SDK.DebuggerModel.BreakpointType, hoverText?: string} {\n    const breakpointWithCondition = locations.find(location => Boolean(location.breakpoint.condition()));\n    const breakpoint = breakpointWithCondition?.breakpoint;\n    if (!breakpoint || !breakpoint.condition()) {\n      return {type: SDK.DebuggerModel.BreakpointType.REGULAR_BREAKPOINT};\n    }\n\n    const condition = breakpoint.condition();\n    if (breakpoint.isLogpoint()) {\n      return {type: SDK.DebuggerModel.BreakpointType.LOGPOINT, hoverText: condition};\n    }\n\n    return {type: SDK.DebuggerModel.BreakpointType.CONDITIONAL_BREAKPOINT, hoverText: condition};\n  }\n\n  #getLocationsForBreakpointItem(breakpointItem: BreakpointItem): Breakpoints.BreakpointManager.BreakpointLocation[] {\n    const locations = this.#breakpointItemToLocationMap.get(breakpointItem);\n    assertNotNullOrUndefined(locations);\n    return locations;\n  }\n\n  async #getHitUILocation(): Promise<Workspace.UISourceCode.UILocation|null> {\n    const details = UI.Context.Context.instance().flavor(SDK.DebuggerModel.DebuggerPausedDetails);\n    if (details?.callFrames.length) {\n      return await Bindings.DebuggerWorkspaceBinding.DebuggerWorkspaceBinding.instance().rawLocationToUILocation(\n          details.callFrames[0].location());\n    }\n    return null;\n  }\n\n  #getBreakpointLocations(): Breakpoints.BreakpointManager.BreakpointLocation[] {\n    const locations = this.#breakpointManager.allBreakpointLocations().filter(\n        breakpointLocation =>\n            breakpointLocation.uiLocation.uiSourceCode.project().type() !== Workspace.Workspace.projectTypes.Debugger);\n\n    locations.sort((item1, item2) => item1.uiLocation.compareTo(item2.uiLocation));\n\n    const result = [];\n    let lastBreakpoint: Breakpoints.BreakpointManager.Breakpoint|null = null;\n    let lastLocation: Workspace.UISourceCode.UILocation|null = null;\n    for (const location of locations) {\n      if (location.breakpoint !== lastBreakpoint || (lastLocation && location.uiLocation.compareTo(lastLocation))) {\n        result.push(location);\n        lastBreakpoint = location.breakpoint;\n        lastLocation = location.uiLocation;\n      }\n    }\n    return result;\n  }\n\n  #groupBreakpointLocationsById(breakpointLocations: Breakpoints.BreakpointManager.BreakpointLocation[]):\n      Breakpoints.BreakpointManager.BreakpointLocation[][] {\n    const map = new Platform.MapUtilities.Multimap<string, Breakpoints.BreakpointManager.BreakpointLocation>();\n    for (const breakpointLocation of breakpointLocations) {\n      const uiLocation = breakpointLocation.uiLocation;\n      map.set(uiLocation.id(), breakpointLocation);\n    }\n    const arr: Breakpoints.BreakpointManager.BreakpointLocation[][] = [];\n    for (const id of map.keysArray()) {\n      const locations = Array.from(map.get(id));\n      if (locations.length) {\n        arr.push(locations);\n      }\n    }\n    return arr;\n  }\n\n  #getLocationIdsByLineId(breakpointLocations: Breakpoints.BreakpointManager.BreakpointLocation[]):\n      Platform.MapUtilities.Multimap<string, string> {\n    const result = new Platform.MapUtilities.Multimap<string, string>();\n\n    for (const breakpointLocation of breakpointLocations) {\n      const uiLocation = breakpointLocation.uiLocation;\n      result.set(uiLocation.lineId(), uiLocation.id());\n    }\n\n    return result;\n  }\n\n  #getBreakpointState(locations: Breakpoints.BreakpointManager.BreakpointLocation[]): BreakpointStatus {\n    const hasEnabled = locations.some(location => location.breakpoint.enabled());\n    const hasDisabled = locations.some(location => !location.breakpoint.enabled());\n    let status: BreakpointStatus;\n    if (hasEnabled) {\n      status = hasDisabled ? BreakpointStatus.INDETERMINATE : BreakpointStatus.ENABLED;\n    } else {\n      status = BreakpointStatus.DISABLED;\n    }\n    return status;\n  }\n\n  #getContent(locations: Breakpoints.BreakpointManager.BreakpointLocation[][]):\n      Promise<TextUtils.ContentData.ContentData[]> {\n    return Promise.all(locations.map(async ([{uiLocation: {uiSourceCode}}]) => {\n      const contentData = await uiSourceCode.requestContentData({cachedWasmOnly: true});\n      return TextUtils.ContentData.ContentData.contentDataOrEmpty(contentData);\n    }));\n  }\n}\n\n/**\n * These properties should really be part of {@link BreakpointItem}, but for migrating\n * to the UI eng vision, we use a Map<BreakpointItemId, BreakpointItemDetails>.\n */\nexport interface BreakpointItemDetails {\n  itemDescription: string;\n  codeSnippet: string;\n  codeSnippetTooltip: string|undefined;\n}\n\nexport interface BreakpointsViewInput {\n  clickHandler: (event: Event) => void;\n  keyDownHandler: (event: KeyboardEvent) => Promise<void>;\n  pauseOnUncaughtExceptions: boolean;\n  onPauseOnUncaughtExceptionsStateChanged: (event: Event) => void;\n  pauseOnCaughtExceptions: boolean;\n  onPauseOnCaughtExceptionsStateChanged: (event: Event) => void;\n  breakpointGroups: BreakpointGroup[];\n  breakpointsActive: boolean;\n  groupContextMenuHandler: (group: BreakpointGroup, event: Event) => void;\n  groupToggleHandler: (group: BreakpointGroup, event: Event) => void;\n  groupClickHandler: (event: Event) => void;\n  groupCheckboxToggled: (group: BreakpointGroup, event: Event) => void;\n  urlToDifferentiatingPath: Map<Platform.DevToolsPath.UrlString, string>;\n  removeAllBreakpointsInFileClickHandler: (items: BreakpointItem[], event: Event) => void;\n  itemDetails: Map<string, BreakpointItemDetails>;\n  itemContextMenuHandler: (item: BreakpointItem, editable: boolean, event: Event) => void;\n  itemClickHandler: (event: Event) => void;\n  itemSnippetClickHandler: (item: BreakpointItem, event: Event) => void;\n  itemCheckboxToggled: (item: BreakpointItem, event: Event) => void;\n  itemEditClickHandler: (item: BreakpointItem, event: Event) => void;\n  itemRemoveClickHandler: (item: BreakpointItem, event: Event) => void;\n}\n\nexport type View = (input: BreakpointsViewInput, output: object, target: HTMLElement) => void;\nexport const DEFAULT_VIEW: View = (input, _output, target) => {\n  // clang-format off\n  render(html`\n    <style>${UI.Widget.widgetScoped(Input.checkboxStyles)}</style>\n    <style>${UI.Widget.widgetScoped(breakpointsViewStyles)}</style>\n    <div jslog=${VisualLogging.section('sources.js-breakpoints')} id=\"devtools-breakpoint-view\">\n      <div class='pause-on-uncaught-exceptions'\n          tabindex='0'\n          @click=${input.clickHandler}\n          @keydown=${input.keyDownHandler}\n          role='checkbox'\n          aria-checked=${input.pauseOnUncaughtExceptions}\n          data-first-pause>\n        <label class='checkbox-label'>\n          <input type='checkbox' tabindex=-1 class=\"small\" ?checked=${input.pauseOnUncaughtExceptions} @change=${input.onPauseOnUncaughtExceptionsStateChanged} jslog=${VisualLogging.toggle('pause-uncaught').track({ change: true })}>\n          <span>${i18nString(UIStrings.pauseOnUncaughtExceptions)}</span>\n        </label>\n      </div>\n      <div class='pause-on-caught-exceptions'\n            tabindex='-1'\n            @click=${input.clickHandler}\n            @keydown=${input.keyDownHandler}\n            role='checkbox'\n            aria-checked=${input.pauseOnCaughtExceptions}\n            data-last-pause>\n          <label class='checkbox-label'>\n            <input data-pause-on-caught-checkbox type='checkbox' class=\"small\" tabindex=-1 ?checked=${input.pauseOnCaughtExceptions} @change=${input.onPauseOnCaughtExceptionsStateChanged.bind(this)} jslog=${VisualLogging.toggle('pause-on-caught-exception').track({ change: true })}>\n            <span>${i18nString(UIStrings.pauseOnCaughtExceptions)}</span>\n          </label>\n      </div>\n      <div role=tree>\n        ${repeat(\n          input.breakpointGroups,\n          group => group.url,\n          (group, groupIndex) => html`\n            <details class=${classMap({active: input.breakpointsActive})}\n                  ?data-first-group=${groupIndex === 0}\n                  ?data-last-group=${groupIndex === input.breakpointGroups.length - 1}\n                  role=group\n                  aria-label='${group.name}'\n                  aria-description='${group.url}'\n                  ?open=${live(group.expanded)}\n                  @toggle=${input.groupToggleHandler.bind(undefined, group)}>\n              <summary @contextmenu=${input.groupContextMenuHandler.bind(undefined, group)}\n                      tabindex='-1'\n                      @keydown=${input.keyDownHandler}\n                      @click=${input.clickHandler}>\n                <span class='group-header' aria-hidden=true>\n                  <span class='group-icon-or-disable'>\n                    <devtools-icon name=\"file-script\"></devtools-icon>\n                    <input class='group-checkbox small' type='checkbox'\n                          aria-label=''\n                          .checked=${group.breakpointItems.some(item => item.status === BreakpointStatus.ENABLED)}\n                          @change=${input.groupCheckboxToggled.bind(undefined, group)}\n                          tabindex=-1\n                          jslog=${VisualLogging.toggle('breakpoint-group').track({change: true,})}></input>\n                  </span>\n                  <span class='group-header-title' title='${group.url}'>\n                    ${group.name}\n                    <span class='group-header-differentiator'>\n                      ${input.urlToDifferentiatingPath.get(group.url)}\n                    </span>\n                  </span>\n                </span>\n                <span class='group-hover-actions'>\n                  <button data-remove-breakpoint\n                          @click=${input.removeAllBreakpointsInFileClickHandler.bind(undefined, group.breakpointItems)}\n                          title=${i18nString(UIStrings.removeAllBreakpointsInFile)}\n                          aria-label=${i18nString(UIStrings.removeAllBreakpointsInFile)}\n                          jslog=${VisualLogging.action('remove-breakpoint').track({click: true})}>\n                    <devtools-icon name=\"bin\"></devtools-icon>\n                  </button>\n                </span>\n              </summary>\n            ${repeat(\n              group.breakpointItems,\n              item => item.id,\n              (item, itemIndex) => html`\n                <div class=${classMap({\n                        'breakpoint-item': true,\n                        hit: item.isHit,\n                        'conditional-breakpoint': item.type === SDK.DebuggerModel.BreakpointType.CONDITIONAL_BREAKPOINT,\n                        logpoint: item.type === SDK.DebuggerModel.BreakpointType.LOGPOINT,\n                      })}\n                    ?data-first-breakpoint=${itemIndex === 0}\n                    ?data-last-breakpoint=${itemIndex === group.breakpointItems.length - 1}\n                    aria-label=${ifDefined(input.itemDetails.get(item.id)?.itemDescription)}\n                    role=treeitem\n                    tabindex='-1'\n                    @contextmenu=${input.itemContextMenuHandler.bind(undefined, item, group.editable)}\n                    @click=${input.itemClickHandler}\n                    @keydown=${input.keyDownHandler}>\n                  <label class='checkbox-label'>\n                    <span class='type-indicator'></span>\n                    <input type='checkbox'\n                          aria-label=${item.location}\n                          class='small'\n                          ?indeterminate=${item.status === BreakpointStatus.INDETERMINATE}\n                          .checked=${item.status === BreakpointStatus.ENABLED}\n                          @change=${input.itemCheckboxToggled.bind(undefined, item)}\n                          tabindex=-1\n                          jslog=${VisualLogging.toggle('breakpoint').track({change: true})}>\n                  </label>\n                  <span class='code-snippet' @click=${input.itemSnippetClickHandler.bind(undefined, item)}\n                          title=${ifDefined(input.itemDetails.get(item.id)?.codeSnippetTooltip)}\n                          jslog=${VisualLogging.action('sources.jump-to-breakpoint').track({click: true})}>${input.itemDetails.get(item.id)?.codeSnippet}</span>\n                  <span class='breakpoint-item-location-or-actions'>\n                    ${group.editable ? html`\n                          <button data-edit-breakpoint @click=${input.itemEditClickHandler.bind(undefined, item)}\n                                  title=${item.type === SDK.DebuggerModel.BreakpointType.LOGPOINT ? i18nString(UIStrings.editLogpoint) : i18nString(UIStrings.editCondition)}\n                                  jslog=${VisualLogging.action('edit-breakpoint').track({click: true})}>\n                            <devtools-icon name=\"edit\"></devtools-icon>\n                          </button>` : Lit.nothing}\n                    <button data-remove-breakpoint\n                            @click=${input.itemRemoveClickHandler.bind(undefined, item)}\n                            title=${i18nString(UIStrings.removeBreakpoint)}\n                            aria-label=${i18nString(UIStrings.removeBreakpoint)}\n                            jslog=${VisualLogging.action('remove-breakpoint').track({click: true})}>\n                      <devtools-icon name=\"bin\"></devtools-icon>\n                    </button>\n                    <span class='location'>${item.location}</span>\n                  </span>\n                </div>`)}\n            </details>`)}\n      </div>\n    </div>`, target);\n  // clang-format on\n};\n\nexport class BreakpointsView extends UI.Widget.VBox {\n  readonly #view: View;\n  readonly #controller: BreakpointsSidebarController;\n\n  static instance({forceNew}: {forceNew: boolean} = {forceNew: false}): BreakpointsView {\n    if (!breakpointsViewInstance || forceNew) {\n      breakpointsViewInstance = new BreakpointsView(undefined);\n    }\n    return breakpointsViewInstance;\n  }\n\n  constructor(element: HTMLElement|undefined, view: View = DEFAULT_VIEW) {\n    // TODO(crbug.com/407751705): Scope CSS via naming/nesting and remove the shadow root.\n    super(element, {useShadowDom: true});\n    this.#view = view;\n    this.#controller = BreakpointsSidebarController.instance();\n    void this.#controller.update();\n  }\n\n  #pauseOnUncaughtExceptions = false;\n  #pauseOnCaughtExceptions = false;\n\n  #breakpointsActive = true;\n  #breakpointGroups: BreakpointGroup[] = [];\n  #urlToDifferentiatingPath = new Map<Platform.DevToolsPath.UrlString, string>();\n  #breakpointItemDetails = new Map<string, BreakpointItemDetails>();\n\n  set data(data: BreakpointsViewData) {\n    this.#pauseOnUncaughtExceptions = data.pauseOnUncaughtExceptions;\n    this.#pauseOnCaughtExceptions = data.pauseOnCaughtExceptions;\n    this.#breakpointsActive = data.breakpointsActive;\n    this.#breakpointGroups = data.groups;\n    this.#breakpointItemDetails = new Map<string, BreakpointItemDetails>();\n\n    const titleInfos: TitleInfo[] = [];\n    for (const group of data.groups) {\n      titleInfos.push({name: group.name, url: group.url});\n\n      for (const item of group.breakpointItems) {\n        this.#breakpointItemDetails.set(item.id, {\n          itemDescription: this.#getBreakpointItemDescription(item),\n          codeSnippet: Platform.StringUtilities.trimEndWithMaxLength(item.codeSnippet, MAX_SNIPPET_LENGTH),\n          codeSnippetTooltip: this.#getCodeSnippetTooltip(item.type, item.hoverText),\n        });\n      }\n    }\n    this.#urlToDifferentiatingPath = getDifferentiatingPathMap(titleInfos);\n\n    this.requestUpdate();\n  }\n\n  override wasShown(): void {\n    this.requestUpdate();\n  }\n\n  override performUpdate(): void {\n    const input: BreakpointsViewInput = {\n      clickHandler: this.#clickHandler.bind(this),\n      keyDownHandler: this.#keyDownHandler.bind(this),\n      pauseOnUncaughtExceptions: this.#pauseOnUncaughtExceptions,\n      onPauseOnUncaughtExceptionsStateChanged: this.#onPauseOnUncaughtExceptionsStateChanged.bind(this),\n      pauseOnCaughtExceptions: this.#pauseOnCaughtExceptions,\n      onPauseOnCaughtExceptionsStateChanged: this.#onPauseOnCaughtExceptionsStateChanged.bind(this),\n      breakpointGroups: this.#breakpointGroups,\n      breakpointsActive: this.#breakpointsActive,\n      groupContextMenuHandler: this.#groupContextMenuHandler.bind(this),\n      groupToggleHandler: this.#groupToggleHandler.bind(this),\n      groupClickHandler: this.#groupClickHandler.bind(this),\n      groupCheckboxToggled: this.#groupCheckboxToggled.bind(this),\n      urlToDifferentiatingPath: this.#urlToDifferentiatingPath,\n      removeAllBreakpointsInFileClickHandler: this.#removeAllBreakpointsInFileClickHandler.bind(this),\n      itemDetails: this.#breakpointItemDetails,\n      itemContextMenuHandler: this.#itemContextMenuHandler.bind(this),\n      itemClickHandler: this.#itemClickHandler.bind(this),\n      itemSnippetClickHandler: this.#itemSnippetClickHandler.bind(this),\n      itemCheckboxToggled: this.#onCheckboxToggled.bind(this),\n      itemEditClickHandler: this.#itemEditClickHandler.bind(this),\n      itemRemoveClickHandler: this.#itemRemoveClickHandler.bind(this),\n    };\n    this.#view(input, {}, this.contentElement);\n\n    // If no element is tabbable, set the pause-on-exceptions to be tabbable. This can happen\n    // if the previously focused element was removed.\n    if (this.contentElement.querySelector('[tabindex=\"0\"]') === null) {\n      const element = this.contentElement.querySelector<HTMLElement>('[data-first-pause]');\n      element?.setAttribute('tabindex', '0');\n    }\n  }\n\n  async #clickHandler(event: Event): Promise<void> {\n    const currentTarget = event.currentTarget as HTMLElement;\n    await this.#setSelected(currentTarget);\n    event.consume();\n  }\n\n  #groupContextMenuHandler(group: BreakpointGroup, event: Event): void {\n    this.#onBreakpointGroupContextMenu(event, group);\n    event.consume();\n  }\n\n  #groupToggleHandler(group: BreakpointGroup, event: Event): void {\n    const htmlDetails = event.target as HTMLDetailsElement;\n    group.expanded = htmlDetails.open;\n    void this.#controller.expandedStateChanged(group.url, group.expanded);\n  }\n\n  async #groupClickHandler(event: Event): Promise<void> {\n    const selected = event.currentTarget as HTMLElement;\n    await this.#setSelected(selected);\n    // Record the metric for expanding/collapsing in the click handler,\n    // as we only then get the number of expand/collapse actions that were\n    // initiated by the user.\n    Host.userMetrics.actionTaken(Host.UserMetrics.Action.BreakpointGroupExpandedStateChanged);\n    event.consume();\n  }\n\n  #groupCheckboxToggled(group: BreakpointGroup, event: Event): void {\n    Host.userMetrics.actionTaken(Host.UserMetrics.Action.BreakpointsInFileCheckboxToggled);\n    const element = event.target as HTMLInputElement;\n    const updatedStatus = element.checked ? BreakpointStatus.ENABLED : BreakpointStatus.DISABLED;\n    const itemsToUpdate = group.breakpointItems.filter(item => item.status !== updatedStatus);\n    itemsToUpdate.forEach(item => {\n      this.#controller.breakpointStateChanged(item, element.checked);\n    });\n    event.consume();\n  }\n\n  #removeAllBreakpointsInFileClickHandler(items: BreakpointItem[], event: Event): void {\n    Host.userMetrics.actionTaken(Host.UserMetrics.Action.BreakpointsInFileRemovedFromRemoveButton);\n    void this.#controller.breakpointsRemoved(items);\n    event.consume();\n  }\n\n  #itemContextMenuHandler(item: BreakpointItem, editable: boolean, event: Event): void {\n    this.#onBreakpointEntryContextMenu(event, item, editable);\n    event.consume();\n  }\n\n  async #itemClickHandler(event: Event): Promise<void> {\n    const target = event.currentTarget as HTMLDivElement;\n    await this.#setSelected(target);\n    event.consume();\n  }\n\n  #itemSnippetClickHandler(item: BreakpointItem, event: Event): void {\n    void this.#controller.jumpToSource(item);\n    event.consume();\n  }\n\n  #itemEditClickHandler(item: BreakpointItem, event: Event): void {\n    void this.#controller.breakpointEdited(item, true /* editButtonClicked */);\n    event.consume();\n  }\n\n  #itemRemoveClickHandler(item: BreakpointItem, event: Event): void {\n    Host.userMetrics.actionTaken(Host.UserMetrics.Action.BreakpointRemovedFromRemoveButton);\n    void this.#controller.breakpointsRemoved([item]);\n    event.consume();\n  }\n\n  async #keyDownHandler(event: KeyboardEvent): Promise<void> {\n    if (!event.target || !(event.target instanceof HTMLElement)) {\n      return;\n    }\n\n    if (event.key === 'Home' || event.key === 'End') {\n      event.consume(true);\n      return await this.#handleHomeOrEndKey(event.key);\n    }\n    if (Platform.KeyboardUtilities.keyIsArrowKey(event.key)) {\n      event.consume(true);\n      return await this.#handleArrowKey(event.key, event.target);\n    }\n    if (Platform.KeyboardUtilities.isEnterOrSpaceKey(event)) {\n      const currentTarget = event.currentTarget as HTMLElement;\n      await this.#setSelected(currentTarget);\n      const input = currentTarget.querySelector<HTMLInputElement>('input');\n      if (input) {\n        input.click();\n      }\n      event.consume();\n    }\n    return;\n  }\n\n  async #setSelected(element: HTMLElement|null): Promise<void> {\n    if (!element) {\n      return;\n    }\n    void RenderCoordinator.write('BreakpointsView focus on selected element', () => {\n      const prevSelected = this.contentElement.querySelector('[tabindex=\"0\"]');\n      prevSelected?.setAttribute('tabindex', '-1');\n      element.setAttribute('tabindex', '0');\n      element.focus();\n    });\n  }\n\n  async #handleArrowKey(key: Platform.KeyboardUtilities.ArrowKey, target: HTMLElement): Promise<void> {\n    const setGroupExpandedState = (detailsElement: HTMLDetailsElement, expanded: boolean): Promise<void> => {\n      if (expanded) {\n        return RenderCoordinator.write('BreakpointsView expand', () => {\n          detailsElement.setAttribute('open', '');\n        });\n      }\n      return RenderCoordinator.write('BreakpointsView expand', () => {\n        detailsElement.removeAttribute('open');\n      });\n    };\n    const nextNode = await findNextNodeForKeyboardNavigation(target, key, setGroupExpandedState);\n    return await this.#setSelected(nextNode);\n  }\n\n  async #handleHomeOrEndKey(key: 'Home'|'End'): Promise<void> {\n    if (key === 'Home') {\n      const pauseOnExceptionsNode = this.contentElement.querySelector<HTMLElement>('[data-first-pause]');\n      return await this.#setSelected(pauseOnExceptionsNode);\n    }\n    if (key === 'End') {\n      const numGroups = this.#breakpointGroups.length;\n      if (numGroups === 0) {\n        const lastPauseOnExceptionsNode = this.contentElement.querySelector<HTMLElement>('[data-last-pause]');\n        return await this.#setSelected(lastPauseOnExceptionsNode);\n      }\n      const lastGroupIndex = numGroups - 1;\n      const lastGroup = this.#breakpointGroups[lastGroupIndex];\n\n      if (lastGroup.expanded) {\n        const lastBreakpointItem =\n            this.contentElement.querySelector<HTMLElement>('[data-last-group] > [data-last-breakpoint]');\n        return await this.#setSelected(lastBreakpointItem);\n      }\n      const lastGroupSummaryElement = this.contentElement.querySelector<HTMLElement>('[data-last-group] > summary');\n      return await this.#setSelected(lastGroupSummaryElement);\n    }\n  }\n\n  #onBreakpointGroupContextMenu(event: Event, breakpointGroup: BreakpointGroup): void {\n    const {breakpointItems} = breakpointGroup;\n    const menu = new UI.ContextMenu.ContextMenu(event);\n\n    menu.defaultSection().appendItem(i18nString(UIStrings.removeAllBreakpointsInFile), () => {\n      Host.userMetrics.actionTaken(Host.UserMetrics.Action.BreakpointsInFileRemovedFromContextMenu);\n      void this.#controller.breakpointsRemoved(breakpointItems);\n    }, {jslogContext: 'remove-file-breakpoints'});\n    const otherGroups = this.#breakpointGroups.filter(group => group !== breakpointGroup);\n    menu.defaultSection().appendItem(i18nString(UIStrings.removeOtherBreakpoints), () => {\n      const breakpointItems = otherGroups.map(({breakpointItems}) => breakpointItems).flat();\n      void this.#controller.breakpointsRemoved(breakpointItems);\n    }, {disabled: otherGroups.length === 0, jslogContext: 'remove-other-breakpoints'});\n    menu.defaultSection().appendItem(i18nString(UIStrings.removeAllBreakpoints), () => {\n      const breakpointItems = this.#breakpointGroups.map(({breakpointItems}) => breakpointItems).flat();\n      void this.#controller.breakpointsRemoved(breakpointItems);\n    }, {jslogContext: 'remove-all-breakpoints'});\n\n    const notEnabledItems =\n        breakpointItems.filter(breakpointItem => breakpointItem.status !== BreakpointStatus.ENABLED);\n    menu.debugSection().appendItem(i18nString(UIStrings.enableAllBreakpointsInFile), () => {\n      Host.userMetrics.actionTaken(Host.UserMetrics.Action.BreakpointsInFileEnabledDisabledFromContextMenu);\n      for (const breakpointItem of notEnabledItems) {\n        this.#controller.breakpointStateChanged(breakpointItem, true);\n      }\n    }, {disabled: notEnabledItems.length === 0, jslogContext: 'enable-file-breakpoints'});\n    const notDisabledItems =\n        breakpointItems.filter(breakpointItem => breakpointItem.status !== BreakpointStatus.DISABLED);\n    menu.debugSection().appendItem(i18nString(UIStrings.disableAllBreakpointsInFile), () => {\n      Host.userMetrics.actionTaken(Host.UserMetrics.Action.BreakpointsInFileEnabledDisabledFromContextMenu);\n      for (const breakpointItem of notDisabledItems) {\n        this.#controller.breakpointStateChanged(breakpointItem, false);\n      }\n    }, {disabled: notDisabledItems.length === 0, jslogContext: 'disable-file-breakpoints'});\n\n    void menu.show();\n  }\n\n  #onBreakpointEntryContextMenu(event: Event, breakpointItem: BreakpointItem, editable: boolean): void {\n    const items = this.#breakpointGroups.map(({breakpointItems}) => breakpointItems).flat();\n    const otherItems = items.filter(item => item !== breakpointItem);\n\n    const menu = new UI.ContextMenu.ContextMenu(event);\n    const editBreakpointText = breakpointItem.type === SDK.DebuggerModel.BreakpointType.LOGPOINT ?\n        i18nString(UIStrings.editLogpoint) :\n        i18nString(UIStrings.editCondition);\n    menu.revealSection().appendItem(i18nString(UIStrings.revealLocation), () => {\n      void this.#controller.jumpToSource(breakpointItem);\n    }, {jslogContext: 'jump-to-breakpoint'});\n\n    menu.editSection().appendItem(editBreakpointText, () => {\n      void this.#controller.breakpointEdited(breakpointItem, false /* editButtonClicked */);\n    }, {disabled: !editable, jslogContext: 'edit-breakpoint'});\n\n    menu.defaultSection().appendItem(\n        i18nString(UIStrings.enableAllBreakpoints),\n        items.forEach.bind(items, item => this.#controller.breakpointStateChanged(item, true)), {\n          disabled: items.every(item => item.status === BreakpointStatus.ENABLED),\n          jslogContext: 'enable-all-breakpoints',\n        });\n    menu.defaultSection().appendItem(\n        i18nString(UIStrings.disableAllBreakpoints),\n        items.forEach.bind(items, item => this.#controller.breakpointStateChanged(item, false)), {\n          disabled: items.every(item => item.status === BreakpointStatus.DISABLED),\n          jslogContext: 'disable-all-breakpoints',\n        });\n\n    menu.footerSection().appendItem(i18nString(UIStrings.removeBreakpoint), () => {\n      Host.userMetrics.actionTaken(Host.UserMetrics.Action.BreakpointRemovedFromContextMenu);\n      void this.#controller.breakpointsRemoved([breakpointItem]);\n    }, {jslogContext: 'remove-breakpoint'});\n    menu.footerSection().appendItem(i18nString(UIStrings.removeOtherBreakpoints), () => {\n      void this.#controller.breakpointsRemoved(otherItems);\n    }, {disabled: otherItems.length === 0, jslogContext: 'remove-other-breakpoints'});\n    menu.footerSection().appendItem(i18nString(UIStrings.removeAllBreakpoints), () => {\n      const breakpointItems = this.#breakpointGroups.map(({breakpointItems}) => breakpointItems).flat();\n      void this.#controller.breakpointsRemoved(breakpointItems);\n    }, {jslogContext: 'remove-all-breakpoints'});\n\n    void menu.show();\n  }\n\n  #getCodeSnippetTooltip(type: SDK.DebuggerModel.BreakpointType, hoverText?: string): string|undefined {\n    switch (type) {\n      case SDK.DebuggerModel.BreakpointType.REGULAR_BREAKPOINT:\n        return undefined;\n      case SDK.DebuggerModel.BreakpointType.CONDITIONAL_BREAKPOINT:\n        assertNotNullOrUndefined(hoverText);\n        return i18nString(UIStrings.conditionCode, {PH1: hoverText});\n      case SDK.DebuggerModel.BreakpointType.LOGPOINT:\n        assertNotNullOrUndefined(hoverText);\n        return i18nString(UIStrings.logpointCode, {PH1: hoverText});\n    }\n  }\n\n  #getBreakpointItemDescription(breakpointItem: BreakpointItem): Platform.UIString.LocalizedString {\n    let checkboxDescription;\n    switch (breakpointItem.status) {\n      case BreakpointStatus.ENABLED:\n        checkboxDescription = i18nString(UIStrings.checked);\n        break;\n      case BreakpointStatus.DISABLED:\n        checkboxDescription = i18nString(UIStrings.unchecked);\n        break;\n      case BreakpointStatus.INDETERMINATE:\n        checkboxDescription = i18nString(UIStrings.indeterminate);\n        break;\n    }\n    if (!breakpointItem.isHit) {\n      return checkboxDescription;\n    }\n    return i18nString(UIStrings.breakpointHit, {PH1: checkboxDescription});\n  }\n\n  #onCheckboxToggled(item: BreakpointItem, event: Event): void {\n    const element = event.target as HTMLInputElement;\n    this.#controller.breakpointStateChanged(item, element.checked);\n  }\n\n  #onPauseOnCaughtExceptionsStateChanged(e: Event): void {\n    const {checked} = e.target as HTMLInputElement;\n    this.#controller.setPauseOnCaughtExceptions(checked);\n  }\n\n  #onPauseOnUncaughtExceptionsStateChanged(e: Event): void {\n    const {checked} = e.target as HTMLInputElement;\n    this.#controller.setPauseOnUncaughtExceptions(checked);\n  }\n}\n", "// Copyright 2025 The Chromium Authors. All rights reserved.\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\n// IMPORTANT: this file is auto generated. Please do not edit this file.\n/* istanbul ignore file */\nexport default `/*\n * Copyright 2022 The Chromium Authors. All rights reserved.\n * Use of this source code is governed by a BSD-style license that can be\n * found in the LICENSE file.\n */\n\n:scope {\n  flex: auto;\n  display: flex;\n  flex-direction: column;\n}\n\n.code-snippet {\n  width: 100%;\n  font-family: var(--source-code-font-family);\n  font-size: var(--source-code-font-size);\n  color: var(--sys-color-token-subtle);\n  text-overflow: ellipsis;\n  overflow: hidden;\n  white-space: nowrap;\n  flex-shrink: 100;\n  cursor: pointer;\n}\n\n.code-snippet:hover {\n  color: var(--sys-color-on-surface);\n  text-decoration: underline;\n}\n\ninput {\n  height: 12px;\n  width: 12px;\n  flex-shrink: 0;\n  margin: 3px 0;\n}\n\ndetails {\n  border-top: 1px solid var(--sys-color-divider);\n  padding: 2px 0;\n}\n\ndetails:not(.active) {\n  background-color: var(--sys-color-state-disabled-container);\n  opacity: 30%;\n}\n\ndetails > summary {\n  min-height: 20px;\n  list-style: none;\n  display: flex;\n  padding: 0 8px 0 6px;\n  align-items: center;\n}\n\ndetails > summary:hover {\n  background-color: var(--sys-color-state-hover-on-subtle);\n}\n\ndetails > summary::before {\n  display: block;\n  user-select: none;\n  mask-image: var(--image-file-arrow-collapse);\n  background-color: var(--icon-default);\n  content: \"\";\n  height: var(--sys-size-8);\n  min-width: var(--sys-size-8);\n  max-width: var(--sys-size-8);\n  margin-top: calc(-1 * var(--sys-size-2));\n  margin-left: calc(-1 * var(--sys-size-3));\n  overflow: hidden;\n}\n\ndetails[open] > summary::before {\n  mask-image: var(--image-file-arrow-drop-down);\n}\n\n.group-header {\n  display: inline-flex;\n  align-items: center;\n  width: 100%;\n  padding-right: 8px;\n  overflow: hidden;\n}\n\n.group-icon-or-disable {\n  justify-content: center;\n  display: flex;\n  width: 16px;\n  margin-left: 2px;\n}\n\n.group-header-title {\n  margin-left: 4px;\n  text-overflow: ellipsis;\n  overflow: hidden;\n  white-space: nowrap;\n}\n\n.group-header-differentiator {\n  font-weight: normal;\n  color: var(--sys-color-state-disabled);\n  margin-left: 8px;\n}\n\n.group-hover-actions {\n  display: flex;\n  align-items: center;\n  justify-content: right;\n  font-size: 10px;\n  font-weight: 500;\n}\n\n.breakpoint-item-location-or-actions {\n  min-width: 20px;\n  flex: 0 0 auto;\n  display: flex;\n  padding-left: 8px;\n  justify-content: right;\n}\n\nbutton {\n  cursor: pointer;\n  width: 13px;\n  height: 13px;\n  border: none;\n  background-color: transparent;\n  display: none;\n  align-items: center;\n  justify-content: center;\n}\n\nbutton + span {\n  padding-left: 6px;\n}\n\nbutton + button {\n  padding-left: 11px;\n}\n\nsummary:hover button {\n  display: flex;\n}\n\ndevtools-icon {\n  width: 16px;\n  height: 16px;\n\n  button:hover & {\n    color: var(--icon-default-hover);\n  }\n}\n\n.type-indicator {\n  --override-color-conditional-breakpoint: var(--ref-palette-orange70);\n  --override-color-logpoint: var(--ref-palette-pink60);\n\n  border-right: 4px solid;\n  border-radius: 0 2px 2px 0;\n  border-color: transparent;\n  height: 16px;\n}\n\n.breakpoint-item {\n  display: flex;\n  align-items: center;\n  line-height: 13px;\n  height: 20px;\n  padding-right: 8px;\n}\n\n.breakpoint-item.hit {\n  background-color: var(--sys-color-yellow-container);\n  color: var(--sys-color-on-yellow-container);\n}\n\n.breakpoint-item.hit:focus {\n  background-color: var(--sys-color-tonal-container);\n}\n\n.theme-with-dark-background .type-indicator,\n:host-context(.theme-with-dark-background) .type-indicator {\n  --override-color-conditional-breakpoint: var(--ref-palette-yellow60);\n  --override-color-logpoint: var(--ref-palette-pink70);\n}\n\n.breakpoint-item.logpoint > label > .type-indicator {\n  border-color: var(--override-color-logpoint);\n}\n\n.breakpoint-item.conditional-breakpoint > label > .type-indicator {\n  border-color: var(--override-color-conditional-breakpoint);\n}\n\n.checkbox-label {\n  display: flex;\n  align-items: center;\n}\n\n.checkbox-label > input {\n  margin-left: 16px;\n  margin-right: 6px;\n}\n\ndevtools-icon[name=\"file-script\"] {\n  color: var(--icon-file-script);\n  width: 18px;\n  height: 18px;\n\n  summary:hover & {\n    display: none;\n  }\n}\n\ninput.group-checkbox {\n  margin: 0;\n  display: none;\n}\n\nsummary:hover .group-checkbox {\n  display: flex;\n}\n\n.location {\n  line-height: 14px;\n  text-overflow: ellipsis;\n  overflow: hidden;\n}\n\n.breakpoint-item:hover button {\n  display: flex;\n}\n\n.pause-on-uncaught-exceptions {\n  margin-top: 3px;\n}\n\n.pause-on-caught-exceptions {\n  margin-bottom: 3px;\n}\n\n/* TODO(crbug.com/1382762): Remove special casing with dependent toggles as soon as Node LTS caught up on independent pause of exception toggles. */\ninput:disabled + span {\n  color: var(--sys-color-state-disabled);\n}\n\n.pause-on-caught-exceptions > .checkbox-label > input,\n.pause-on-uncaught-exceptions > .checkbox-label > input {\n  margin-left: 6px;\n}\n\n.pause-on-caught-exceptions > .checkbox-label > span,\n.pause-on-uncaught-exceptions > .checkbox-label > span {\n  text-overflow: ellipsis;\n  overflow: hidden;\n  white-space: nowrap;\n}\n\n.pause-on-uncaught-exceptions,\n.pause-on-caught-exceptions {\n  line-height: 13px;\n  height: 18px;\n  padding-right: 8px;\n\n  & > label {\n    width: fit-content;\n  }\n}\n\ndetails > summary:focus,\n.breakpoint-item:focus,\n.pause-on-uncaught-exceptions:focus,\n.pause-on-caught-exceptions:focus {\n  background-color: var(--sys-color-tonal-container);\n  outline-width: 0;\n}\n\n/*# sourceURL=${import.meta.resolve('./breakpointsView.css')} */`;", "// Copyright (c) 2022 The Chromium Authors. All rights reserved.\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\n\nimport * as Common from '../../core/common/common.js';\nimport * as Platform from '../../core/platform/platform.js';\nimport {assertNotNullOrUndefined} from '../../core/platform/platform.js';\n\nconst SUMMARY_ELEMENT_SELECTOR = 'summary';\n\nconst domNodeIsTree = (domNode: HTMLElement): boolean => {\n  return domNode.getAttribute('role') === 'tree';\n};\n\nconst domNodeIsBreakpointItemNode = (domNode: HTMLElement): boolean => {\n  return domNode.getAttribute('role') === 'treeitem';\n};\n\nconst domNodeIsPauseOnExceptionsNode = (domNode: HTMLElement): boolean => {\n  return domNode.getAttribute('data-first-pause') !== null || domNode.getAttribute('data-last-pause') !== null;\n};\n\nconst domNodeIsSummaryNode = (domNode: HTMLElement): boolean => {\n  return !domNodeIsBreakpointItemNode(domNode);\n};\n\nconst groupIsExpanded = (detailsElement: HTMLDetailsElement): boolean => {\n  return detailsElement.getAttribute('open') !== null;\n};\n\nconst getFirstBreakpointItemInGroup = (detailsElement: HTMLDetailsElement): HTMLElement|null => {\n  return detailsElement.querySelector<HTMLElement>('[data-first-breakpoint]');\n};\n\nconst getLastBreakpointItemInGroup = (detailsElement: HTMLDetailsElement): HTMLElement|null => {\n  return detailsElement.querySelector<HTMLDivElement>('[data-last-breakpoint]');\n};\n\nconst getNextGroupsSummaryNode = (detailsElement: HTMLDetailsElement): HTMLElement|null => {\n  const nextDetailsElement = getNextDetailsElement(detailsElement);\n  if (nextDetailsElement && nextDetailsElement instanceof HTMLDetailsElement) {\n    return nextDetailsElement?.querySelector<HTMLElement>('summary');\n  }\n  return null;\n};\n\nconst getCurrentSummaryNode = (detailsElement: HTMLDetailsElement): HTMLElement|null => {\n  return detailsElement.querySelector<HTMLElement>(SUMMARY_ELEMENT_SELECTOR);\n};\n\nconst getNextDetailsElement = (detailsElement: HTMLDetailsElement): HTMLDetailsElement|null => {\n  const nextDetailsElement = detailsElement.nextElementSibling;\n  if (nextDetailsElement && nextDetailsElement instanceof HTMLDetailsElement) {\n    return nextDetailsElement;\n  }\n  return null;\n};\n\nconst getPreviousDetailsElement = (detailsElement: HTMLDetailsElement): HTMLDetailsElement|null => {\n  const previousDetailsElement = detailsElement.previousElementSibling;\n  if (previousDetailsElement && previousDetailsElement instanceof HTMLDetailsElement) {\n    return previousDetailsElement;\n  }\n  return null;\n};\n\nfunction findNextNodeForPauseOnExceptions(target: HTMLElement, key: Platform.KeyboardUtilities.ArrowKey): HTMLElement|\n    null {\n  // Handle keyboard navigation on one of the pause on exceptions checkboxes.\n  console.assert(domNodeIsPauseOnExceptionsNode(target));\n  let nextNode: HTMLElement|null = null;\n  switch (key) {\n    case Platform.KeyboardUtilities.ArrowKey.UP: {\n      const previousElementSibling = target.previousElementSibling;\n      if (previousElementSibling instanceof HTMLElement) {\n        nextNode = previousElementSibling;\n        console.assert(domNodeIsPauseOnExceptionsNode(nextNode));\n      }\n      break;\n    }\n    case Platform.KeyboardUtilities.ArrowKey.DOWN: {\n      const nextElementSibling = target.nextElementSibling;\n      if (nextElementSibling instanceof HTMLElement) {\n        if (domNodeIsTree(nextElementSibling)) {\n          const detailsElement = nextElementSibling.querySelector<HTMLDetailsElement>('[data-first-group]');\n          if (detailsElement) {\n            nextNode = getCurrentSummaryNode(detailsElement);\n          }\n        } else {\n          nextNode = nextElementSibling;\n          console.assert(domNodeIsPauseOnExceptionsNode(nextNode));\n        }\n      }\n      break;\n    }\n    default:\n      break;\n  }\n\n  return nextNode;\n}\n\nexport async function findNextNodeForKeyboardNavigation(\n    target: HTMLElement, key: Platform.KeyboardUtilities.ArrowKey,\n    setGroupExpandedStateCallback: (detailsElement: HTMLDetailsElement, expanded: boolean) =>\n        Promise<unknown>): Promise<HTMLElement|null> {\n  if (domNodeIsPauseOnExceptionsNode(target)) {\n    return findNextNodeForPauseOnExceptions(target, key);\n  }\n\n  // Handle keyboard navigation in the breakpoint tree.\n  const detailsElement = target.parentElement;\n  if (!detailsElement || !(detailsElement instanceof HTMLDetailsElement)) {\n    throw new Error('The selected nodes should be direct children of an HTMLDetails element.');\n  }\n\n  let nextNode: HTMLElement|null = null;\n  switch (key) {\n    case Platform.KeyboardUtilities.ArrowKey.LEFT: {\n      if (domNodeIsSummaryNode(target)) {\n        // On a summary node, collapse if group is expanded.\n        if (groupIsExpanded(detailsElement)) {\n          await setGroupExpandedStateCallback(detailsElement, false);\n        }\n      } else {\n        // On a breakpoint item node, navigate up to the summary node.\n        return getCurrentSummaryNode(detailsElement);\n      }\n      break;\n    }\n    case Platform.KeyboardUtilities.ArrowKey.RIGHT: {\n      if (domNodeIsSummaryNode(target)) {\n        // On a summary node, expand if group is collapsed, and otherwise navigate\n        // to the first breakpoint item in this group.\n        if (groupIsExpanded(detailsElement)) {\n          return getFirstBreakpointItemInGroup(detailsElement);\n        }\n        await setGroupExpandedStateCallback(detailsElement, true);\n      }\n      break;\n    }\n    case Platform.KeyboardUtilities.ArrowKey.DOWN: {\n      if (domNodeIsSummaryNode(target)) {\n        if (groupIsExpanded(detailsElement)) {\n          // If the current node is a summary node of an expanded group, navigating down\n          // should lead to the first breakpoint item within the group.\n          nextNode = getFirstBreakpointItemInGroup(detailsElement);\n        } else {\n          // If the current node is a summary node of a collapsed group, go to the next\n          // group's summary node if existent.\n          nextNode = getNextGroupsSummaryNode(detailsElement);\n        }\n      } else {\n        // If the current node is a breakpoint item, try to get the next\n        // breakpoint item if available, otherwise the next group's summary\n        // node.\n        const nextSibling = target.nextElementSibling;\n        if (nextSibling && nextSibling instanceof HTMLDivElement) {\n          nextNode = nextSibling;\n        } else {\n          nextNode = getNextGroupsSummaryNode(detailsElement);\n        }\n      }\n      break;\n    }\n    case Platform.KeyboardUtilities.ArrowKey.UP: {\n      // If the current node is a summary node, navigating upwards will either\n      // navigate to the last breakpoint item of the previous group (if expanded),\n      // and otherwise navigate to the previous group's summary node.\n      if (domNodeIsSummaryNode(target)) {\n        const previousDetailsElement = getPreviousDetailsElement(detailsElement);\n        if (previousDetailsElement) {\n          if (groupIsExpanded(previousDetailsElement)) {\n            nextNode = getLastBreakpointItemInGroup(previousDetailsElement);\n          } else {\n            nextNode = getCurrentSummaryNode(previousDetailsElement);\n          }\n        } else {\n          const pauseOnExceptions = detailsElement.parentElement?.previousElementSibling;\n          if (pauseOnExceptions instanceof HTMLElement) {\n            nextNode = pauseOnExceptions;\n          }\n        }\n      } else {\n        // If the current node is a breakpoint item, going up should get\n        // the previous sibling, which can be both a summary node or a\n        // a breakpoint item.\n        const previousSibling = target.previousElementSibling;\n        if (previousSibling instanceof HTMLElement) {\n          nextNode = previousSibling;\n        }\n      }\n      break;\n    }\n  }\n  return nextNode;\n}\n\nexport interface TitleInfo {\n  name: string;\n  url: Platform.DevToolsPath.UrlString;\n}\n\nfunction findFirstDifferingSegmentIndex(splitUrls: string[][]): number {\n  const firstUrl = splitUrls[0];\n  let firstDifferingIndex = -1;\n  for (let segmentIndex = 0; segmentIndex < firstUrl.length && firstDifferingIndex === -1; ++segmentIndex) {\n    const segment = firstUrl[segmentIndex];\n    for (let urlIndex = 1; urlIndex < splitUrls.length; ++urlIndex) {\n      const url = splitUrls[urlIndex];\n      if (url.length <= segmentIndex || url[segmentIndex] !== segment) {\n        firstDifferingIndex = segmentIndex;\n        break;\n      }\n    }\n  }\n\n  return firstDifferingIndex === -1 ? firstUrl.length : firstDifferingIndex;\n}\n\nfunction findDifferentiatingPath(url: string[], allUrls: string[][], startIndex: number): string[] {\n  const differentiatingPath = [];\n  let remainingUrlsToDifferentiate = allUrls.filter(other => other !== url);\n\n  for (let segmentIndex = startIndex; segmentIndex < url.length; ++segmentIndex) {\n    const segment = url[segmentIndex];\n    differentiatingPath.push(segment);\n    remainingUrlsToDifferentiate =\n        remainingUrlsToDifferentiate.filter(url => url.length > segmentIndex && url[segmentIndex] === segment);\n    if (remainingUrlsToDifferentiate.length === 0) {\n      break;\n    }\n  }\n  return differentiatingPath;\n}\n\n// This function tries to find a subpath (if available) that we can use to differentiate\n// urls that have the same file name.\n// It does so by 1. removing common suffixes, 2. taking segments of the path (from right to left) until the path is\n// unique.\n//\n// Example:\n//\n//     Paths:  'http://www.google.com/src/a/index.js', 'http://www.google.com/src2/a/index.js'\n//     Output: 'src/…/', 'src2/…/'\nfunction populateDifferentiatingPathMap(\n    urls: Platform.DevToolsPath.UrlString[], urlToDifferentiator: Map<Platform.DevToolsPath.UrlString, string>): void {\n  const splitReversedUrls = urls.map(url => {\n    // Get the folder path components without the first '/'.\n    const paths = Common.ParsedURL.ParsedURL.fromString(url)?.folderPathComponents.slice(1);\n    assertNotNullOrUndefined(paths);\n    return paths.split('/').reverse();\n  });\n\n  const startIndex = findFirstDifferingSegmentIndex(splitReversedUrls);\n\n  for (let i = 0; i < splitReversedUrls.length; ++i) {\n    const splitUrl = splitReversedUrls[i];\n    const differentiator = findDifferentiatingPath(splitUrl, splitReversedUrls, startIndex);\n    const reversed = differentiator.reverse().join('/');\n    // If we start to collect the differentiator from the last segment (startIndex === 0),\n    // only append a '/', otherwise' …/'.\n    if (startIndex === 0) {\n      urlToDifferentiator.set(urls[i], reversed + '/');\n    } else {\n      urlToDifferentiator.set(urls[i], reversed + '/\\u2026/');\n    }\n  }\n  console.assert(new Set(urlToDifferentiator.values()).size === urls.length, 'Differentiators should be unique.');\n}\n\nexport function getDifferentiatingPathMap(titleInfos: TitleInfo[]): Map<Platform.DevToolsPath.UrlString, string> {\n  const nameToUrl = new Map<string, Platform.DevToolsPath.UrlString[]>();\n  const urlToDifferentiatingPath = new Map<Platform.DevToolsPath.UrlString, Platform.DevToolsPath.UrlString>();\n\n  for (const {name, url} of titleInfos) {\n    if (!nameToUrl.has(name)) {\n      nameToUrl.set(name, []);\n    }\n    nameToUrl.get(name)?.push(url);\n  }\n\n  for (const urlsGroupedByName of nameToUrl.values()) {\n    if (urlsGroupedByName.length > 1) {\n      populateDifferentiatingPathMap(urlsGroupedByName, urlToDifferentiatingPath);\n    }\n  }\n  return urlToDifferentiatingPath;\n}\n", "// Copyright 2021 The Chromium Authors. All rights reserved.\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\n/* eslint-disable rulesdir/no-imperative-dom-api */\n\n/*\n * Copyright (C) 2008 Apple Inc. All Rights Reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions\n * are met:\n * 1. Redistributions of source code must retain the above copyright\n *    notice, this list of conditions and the following disclaimer.\n * 2. Redistributions in binary form must reproduce the above copyright\n *    notice, this list of conditions and the following disclaimer in the\n *    documentation and/or other materials provided with the distribution.\n *\n * THIS SOFTWARE IS PROVIDED BY APPLE INC. ``AS IS'' AND ANY\n * EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE\n * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR\n * PURPOSE ARE DISCLAIMED.  IN NO EVENT SHALL APPLE INC. OR\n * CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,\n * EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,\n * PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR\n * PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY\n * OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE\n * OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */\n\nimport * as Common from '../../core/common/common.js';\nimport * as Host from '../../core/host/host.js';\nimport * as i18n from '../../core/i18n/i18n.js';\nimport * as Platform from '../../core/platform/platform.js';\nimport * as SDK from '../../core/sdk/sdk.js';\nimport type * as Protocol from '../../generated/protocol.js';\nimport * as Bindings from '../../models/bindings/bindings.js';\nimport * as Persistence from '../../models/persistence/persistence.js';\nimport * as SourceMapScopes from '../../models/source_map_scopes/source_map_scopes.js';\nimport * as Workspace from '../../models/workspace/workspace.js';\nimport * as IconButton from '../../ui/components/icon_button/icon_button.js';\nimport * as UI from '../../ui/legacy/legacy.js';\nimport * as VisualLogging from '../../ui/visual_logging/visual_logging.js';\n\nimport callStackSidebarPaneStyles from './callStackSidebarPane.css.js';\n\nconst UIStrings = {\n  /**\n   * @description Text in Call Stack Sidebar Pane of the Sources panel\n   */\n  callStack: 'Call Stack',\n  /**\n   * @description Not paused message element text content in Call Stack Sidebar Pane of the Sources panel\n   */\n  notPaused: 'Not paused',\n  /**\n   * @description Text exposed to screen reader when navigating through a ignore-listed call frame in the sources panel\n   */\n  onIgnoreList: 'on ignore list',\n  /**\n   * @description Show all link text content in Call Stack Sidebar Pane of the Sources panel\n   */\n  showIgnorelistedFrames: 'Show ignore-listed frames',\n  /**\n   * @description Text to show more content\n   */\n  showMore: 'Show more',\n  /**\n   * @description A context menu item in the Call Stack Sidebar Pane of the Sources panel\n   */\n  copyStackTrace: 'Copy stack trace',\n  /**\n   * @description Text in Call Stack Sidebar Pane of the Sources panel when some call frames have warnings\n   */\n  callFrameWarnings: 'Some call frames have warnings',\n  /**\n   * @description Error message that is displayed in UI when a file needed for debugging information for a call frame is missing\n   * @example {src/myapp.debug.wasm.dwp} PH1\n   */\n  debugFileNotFound: 'Failed to load debug file \"{PH1}\".',\n  /**\n   * @description A context menu item in the Call Stack Sidebar Pane. \"Restart\" is a verb and\n   * \"frame\" is a noun. \"Frame\" refers to an individual item in the call stack, i.e. a call frame.\n   * The user opens this context menu by selecting a specific call frame in the call stack sidebar pane.\n   */\n  restartFrame: 'Restart frame',\n} as const;\nconst str_ = i18n.i18n.registerUIStrings('panels/sources/CallStackSidebarPane.ts', UIStrings);\nconst i18nString = i18n.i18n.getLocalizedString.bind(undefined, str_);\n\nlet callstackSidebarPaneInstance: CallStackSidebarPane;\n\nexport class CallStackSidebarPane extends UI.View.SimpleView implements UI.ContextFlavorListener.ContextFlavorListener,\n                                                                        UI.ListControl.ListDelegate<Item> {\n  private readonly ignoreListMessageElement: Element;\n  private readonly ignoreListCheckboxElement: HTMLInputElement;\n  private readonly notPausedMessageElement: HTMLElement;\n  private readonly callFrameWarningsElement: HTMLElement;\n  private readonly items: UI.ListModel.ListModel<Item>;\n  private list: UI.ListControl.ListControl<Item>;\n  private readonly showMoreMessageElement: Element;\n  private showIgnoreListed: boolean;\n  private readonly locationPool: Bindings.LiveLocation.LiveLocationPool;\n  private readonly updateThrottler: Common.Throttler.Throttler;\n  private maxAsyncStackChainDepth: number;\n  private readonly updateItemThrottler: Common.Throttler.Throttler;\n  private readonly scheduledForUpdateItems: Set<Item>;\n  private muteActivateItem?: boolean;\n  private lastDebuggerModel: SDK.DebuggerModel.DebuggerModel|null = null;\n\n  private constructor() {\n    super({\n      jslog: `${VisualLogging.section('sources.callstack')}`,\n      title: i18nString(UIStrings.callStack),\n      viewId: 'sources.callstack',\n      useShadowDom: true,\n    });\n    this.registerRequiredCSS(callStackSidebarPaneStyles);\n\n    ({element: this.ignoreListMessageElement, checkbox: this.ignoreListCheckboxElement} =\n         this.createIgnoreListMessageElementAndCheckbox());\n    this.contentElement.appendChild(this.ignoreListMessageElement);\n\n    this.notPausedMessageElement = this.contentElement.createChild('div', 'gray-info-message');\n    this.notPausedMessageElement.textContent = i18nString(UIStrings.notPaused);\n    this.notPausedMessageElement.tabIndex = -1;\n\n    this.callFrameWarningsElement = this.contentElement.createChild('div', 'call-frame-warnings-message');\n    const icon = new IconButton.Icon.Icon();\n    icon.data = {\n      iconName: 'warning-filled',\n      color: 'var(--icon-warning)',\n      width: '14px',\n      height: '14px',\n    };\n    icon.classList.add('call-frame-warning-icon');\n    this.callFrameWarningsElement.appendChild(icon);\n    this.callFrameWarningsElement.appendChild(document.createTextNode(i18nString(UIStrings.callFrameWarnings)));\n    this.callFrameWarningsElement.tabIndex = -1;\n\n    this.items = new UI.ListModel.ListModel();\n    this.list = new UI.ListControl.ListControl(this.items, this, UI.ListControl.ListMode.NonViewport);\n    this.contentElement.appendChild(this.list.element);\n    this.list.element.addEventListener('contextmenu', this.onContextMenu.bind(this), false);\n    self.onInvokeElement(this.list.element, event => {\n      const item = this.list.itemForNode((event.target as Node | null));\n      if (item) {\n        this.activateItem(item);\n        event.consume(true);\n      }\n    });\n\n    this.showMoreMessageElement = this.createShowMoreMessageElement();\n    this.showMoreMessageElement.classList.add('hidden');\n    this.contentElement.appendChild(this.showMoreMessageElement);\n\n    this.showIgnoreListed = false;\n    this.locationPool = new Bindings.LiveLocation.LiveLocationPool();\n\n    this.updateThrottler = new Common.Throttler.Throttler(100);\n    this.maxAsyncStackChainDepth = defaultMaxAsyncStackChainDepth;\n    this.update();\n\n    this.updateItemThrottler = new Common.Throttler.Throttler(100);\n    this.scheduledForUpdateItems = new Set();\n\n    SDK.TargetManager.TargetManager.instance().addModelListener(\n        SDK.DebuggerModel.DebuggerModel, SDK.DebuggerModel.Events.DebugInfoAttached, this.debugInfoAttached, this);\n  }\n\n  static instance(opts: {\n    forceNew: boolean|null,\n  } = {forceNew: null}): CallStackSidebarPane {\n    const {forceNew} = opts;\n    if (!callstackSidebarPaneInstance || forceNew) {\n      callstackSidebarPaneInstance = new CallStackSidebarPane();\n    }\n\n    return callstackSidebarPaneInstance;\n  }\n\n  flavorChanged(_object: Object|null): void {\n    this.showIgnoreListed = false;\n    this.ignoreListCheckboxElement.checked = false;\n    this.maxAsyncStackChainDepth = defaultMaxAsyncStackChainDepth;\n    this.update();\n  }\n\n  private debugInfoAttached(): void {\n    this.update();\n  }\n\n  private setSourceMapSubscription(debuggerModel: SDK.DebuggerModel.DebuggerModel|null): void {\n    // Shortcut for the case when we are listening to the same model.\n    if (this.lastDebuggerModel === debuggerModel) {\n      return;\n    }\n\n    if (this.lastDebuggerModel) {\n      this.lastDebuggerModel.sourceMapManager().removeEventListener(\n          SDK.SourceMapManager.Events.SourceMapAttached, this.debugInfoAttached, this);\n    }\n\n    this.lastDebuggerModel = debuggerModel;\n    if (this.lastDebuggerModel) {\n      this.lastDebuggerModel.sourceMapManager().addEventListener(\n          SDK.SourceMapManager.Events.SourceMapAttached, this.debugInfoAttached, this);\n    }\n  }\n\n  update(): void {\n    void this.updateThrottler.schedule(() => this.doUpdate());\n  }\n\n  async doUpdate(): Promise<void> {\n    this.locationPool.disposeAll();\n\n    this.callFrameWarningsElement.classList.add('hidden');\n\n    const details = UI.Context.Context.instance().flavor(SDK.DebuggerModel.DebuggerPausedDetails);\n    this.setSourceMapSubscription(details?.debuggerModel ?? null);\n    if (!details) {\n      this.notPausedMessageElement.classList.remove('hidden');\n      this.ignoreListMessageElement.classList.add('hidden');\n      this.showMoreMessageElement.classList.add('hidden');\n      this.items.replaceAll([]);\n      UI.Context.Context.instance().setFlavor(SDK.DebuggerModel.CallFrame, null);\n      return;\n    }\n\n    this.notPausedMessageElement.classList.add('hidden');\n\n    const itemPromises = [];\n    const uniqueWarnings = new Set<string>();\n    for (const frame of details.callFrames) {\n      const itemPromise = Item.createForDebuggerCallFrame(frame, this.locationPool, this.refreshItem.bind(this));\n      itemPromises.push(itemPromise);\n      if (frame.missingDebugInfoDetails) {\n        uniqueWarnings.add(frame.missingDebugInfoDetails.details);\n      }\n    }\n    const items = await Promise.all(itemPromises);\n    if (uniqueWarnings.size) {\n      this.callFrameWarningsElement.classList.remove('hidden');\n      UI.Tooltip.Tooltip.install(this.callFrameWarningsElement, Array.from(uniqueWarnings).join('\\n'));\n    }\n\n    let previousStackTrace: Protocol.Runtime.CallFrame[]|SDK.DebuggerModel.CallFrame[] = details.callFrames;\n    let {maxAsyncStackChainDepth} = this;\n    let asyncStackTrace: Protocol.Runtime.StackTrace|null = null;\n    for await (asyncStackTrace of details.debuggerModel.iterateAsyncParents(details)) {\n      const title = UI.UIUtils.asyncStackTraceLabel(asyncStackTrace.description, previousStackTrace);\n      items.push(...await Item.createItemsForAsyncStack(\n          title, details.debuggerModel, asyncStackTrace.callFrames, this.locationPool, this.refreshItem.bind(this)));\n      previousStackTrace = asyncStackTrace.callFrames;\n\n      if (--maxAsyncStackChainDepth <= 0) {\n        break;\n      }\n    }\n\n    this.showMoreMessageElement.classList.toggle('hidden', !asyncStackTrace);\n    this.items.replaceAll(items);\n    for (const item of this.items) {\n      this.refreshItem(item);\n    }\n    if (this.maxAsyncStackChainDepth === defaultMaxAsyncStackChainDepth) {\n      this.list.selectNextItem(true /* canWrap */, false /* center */);\n      const selectedItem = this.list.selectedItem();\n      if (selectedItem) {\n        this.activateItem(selectedItem);\n      }\n    }\n    this.updatedForTest();\n  }\n\n  private updatedForTest(): void {\n  }\n\n  private refreshItem(item: Item): void {\n    this.scheduledForUpdateItems.add(item);\n    void this.updateItemThrottler.schedule(async () => {\n      const items = Array.from(this.scheduledForUpdateItems);\n      this.scheduledForUpdateItems.clear();\n\n      this.muteActivateItem = true;\n      if (!this.showIgnoreListed && this.items.every(item => item.isIgnoreListed)) {\n        this.showIgnoreListed = true;\n        for (let i = 0; i < this.items.length; ++i) {\n          this.list.refreshItemByIndex(i);\n        }\n        this.ignoreListMessageElement.classList.toggle('hidden', true);\n      } else {\n        this.showIgnoreListed = this.ignoreListCheckboxElement.checked;\n        const itemsSet = new Set<Item>(items);\n        let hasIgnoreListed = false;\n        for (let i = 0; i < this.items.length; ++i) {\n          const item = this.items.at(i);\n          if (itemsSet.has(item)) {\n            this.list.refreshItemByIndex(i);\n          }\n          hasIgnoreListed = hasIgnoreListed || item.isIgnoreListed;\n        }\n        this.ignoreListMessageElement.classList.toggle('hidden', !hasIgnoreListed);\n      }\n      delete this.muteActivateItem;\n    });\n  }\n\n  createElementForItem(item: Item): Element {\n    const element = document.createElement('div');\n    element.classList.add('call-frame-item');\n    const title = element.createChild('div', 'call-frame-item-title');\n    const titleElement = title.createChild('div', 'call-frame-title-text');\n    titleElement.textContent = item.title;\n    if (item.isAsyncHeader) {\n      element.classList.add('async-header');\n    } else {\n      UI.Tooltip.Tooltip.install(titleElement, item.title);\n      const linkElement = element.createChild('div', 'call-frame-location');\n      linkElement.textContent = Platform.StringUtilities.trimMiddle(item.linkText, 30);\n      UI.Tooltip.Tooltip.install(linkElement, item.linkText);\n      element.classList.toggle('ignore-listed-call-frame', item.isIgnoreListed);\n      if (item.isIgnoreListed) {\n        UI.ARIAUtils.setDescription(element, i18nString(UIStrings.onIgnoreList));\n      }\n      if (!item.frame) {\n        UI.ARIAUtils.setDisabled(element, true);\n      }\n    }\n    const callframe = item.frame;\n    const isSelected = callframe === UI.Context.Context.instance().flavor(SDK.DebuggerModel.CallFrame);\n\n    element.classList.toggle('selected', isSelected);\n    UI.ARIAUtils.setSelected(element, isSelected);\n    element.classList.toggle('hidden', !this.showIgnoreListed && item.isIgnoreListed);\n    const icon = new IconButton.Icon.Icon();\n    icon.data = {\n      iconName: 'large-arrow-right-filled',\n      color: 'var(--icon-arrow-main-thread)',\n      width: '14px',\n      height: '14px',\n    };\n    icon.classList.add('selected-call-frame-icon');\n    element.appendChild(icon);\n    element.tabIndex = item === this.list.selectedItem() ? 0 : -1;\n\n    if (callframe?.missingDebugInfoDetails) {\n      const icon = new IconButton.Icon.Icon();\n      icon.data = {\n        iconName: 'warning-filled',\n        color: 'var(--icon-warning)',\n        width: '14px',\n        height: '14px',\n      };\n      icon.classList.add('call-frame-warning-icon');\n      const messages = callframe.missingDebugInfoDetails.resources.map(\n          r => i18nString(UIStrings.debugFileNotFound, {PH1: Common.ParsedURL.ParsedURL.extractName(r.resourceUrl)}));\n      UI.Tooltip.Tooltip.install(icon, [callframe.missingDebugInfoDetails.details, ...messages].join('\\n'));\n      element.appendChild(icon);\n    }\n    return element;\n  }\n\n  heightForItem(_item: Item): number {\n    console.assert(false);  // Should not be called.\n    return 0;\n  }\n\n  isItemSelectable(_item: Item): boolean {\n    return true;\n  }\n\n  selectedItemChanged(_from: Item|null, _to: Item|null, fromElement: HTMLElement|null, toElement: HTMLElement|null):\n      void {\n    if (fromElement) {\n      fromElement.tabIndex = -1;\n    }\n    if (toElement) {\n      this.setDefaultFocusedElement(toElement);\n      toElement.tabIndex = 0;\n      if (this.hasFocus()) {\n        toElement.focus();\n      }\n    }\n  }\n\n  updateSelectedItemARIA(_fromElement: Element|null, _toElement: Element|null): boolean {\n    return true;\n  }\n\n  private createIgnoreListMessageElementAndCheckbox(): {element: Element, checkbox: HTMLInputElement} {\n    const element = document.createElement('div');\n    element.classList.add('ignore-listed-message');\n    const label = element.createChild('label');\n    label.classList.add('ignore-listed-message-label');\n    const checkbox = label.createChild('input');\n    checkbox.tabIndex = 0;\n    checkbox.type = 'checkbox';\n    checkbox.classList.add('ignore-listed-checkbox');\n    label.append(i18nString(UIStrings.showIgnorelistedFrames));\n    const showAll = (): void => {\n      this.showIgnoreListed = checkbox.checked;\n      for (const item of this.items) {\n        this.refreshItem(item);\n      }\n    };\n    checkbox.addEventListener('click', showAll);\n    return {element, checkbox};\n  }\n\n  private createShowMoreMessageElement(): Element {\n    const element = document.createElement('div');\n    element.classList.add('show-more-message');\n    element.createChild('span');\n    const showAllLink = element.createChild('span', 'link');\n    showAllLink.textContent = i18nString(UIStrings.showMore);\n    showAllLink.addEventListener('click', () => {\n      this.maxAsyncStackChainDepth += defaultMaxAsyncStackChainDepth;\n      this.update();\n    }, false);\n    return element;\n  }\n\n  private onContextMenu(event: Event): void {\n    const item = this.list.itemForNode((event.target as Node | null));\n    if (!item) {\n      return;\n    }\n    const contextMenu = new UI.ContextMenu.ContextMenu(event);\n    const debuggerCallFrame = item.frame;\n    if (debuggerCallFrame) {\n      contextMenu.defaultSection().appendItem(i18nString(UIStrings.restartFrame), () => {\n        Host.userMetrics.actionTaken(Host.UserMetrics.Action.StackFrameRestarted);\n        void debuggerCallFrame.restart();\n      }, {disabled: !debuggerCallFrame.canBeRestarted, jslogContext: 'restart-frame'});\n    }\n    contextMenu.defaultSection().appendItem(\n        i18nString(UIStrings.copyStackTrace), this.copyStackTrace.bind(this), {jslogContext: 'copy-stack-trace'});\n    if (item.uiLocation) {\n      this.appendIgnoreListURLContextMenuItems(contextMenu, item.uiLocation.uiSourceCode);\n    }\n    void contextMenu.show();\n  }\n\n  private activateItem(item: Item): void {\n    const uiLocation = item.uiLocation;\n    if (this.muteActivateItem || !uiLocation) {\n      return;\n    }\n    this.list.selectItem(item);\n    const debuggerCallFrame = item.frame;\n    const oldItem = this.activeCallFrameItem();\n    if (debuggerCallFrame && oldItem !== item) {\n      debuggerCallFrame.debuggerModel.setSelectedCallFrame(debuggerCallFrame);\n      UI.Context.Context.instance().setFlavor(SDK.DebuggerModel.CallFrame, debuggerCallFrame);\n      if (oldItem) {\n        this.refreshItem(oldItem);\n      }\n      this.refreshItem(item);\n    } else {\n      void Common.Revealer.reveal(uiLocation);\n    }\n  }\n\n  activeCallFrameItem(): Item|null {\n    const callFrame = UI.Context.Context.instance().flavor(SDK.DebuggerModel.CallFrame);\n    if (callFrame) {\n      return this.items.find(callFrameItem => callFrameItem.frame === callFrame) || null;\n    }\n    return null;\n  }\n\n  appendIgnoreListURLContextMenuItems(\n      contextMenu: UI.ContextMenu.ContextMenu, uiSourceCode: Workspace.UISourceCode.UISourceCode): void {\n    const binding = Persistence.Persistence.PersistenceImpl.instance().binding(uiSourceCode);\n    if (binding) {\n      uiSourceCode = binding.network;\n    }\n\n    const menuSection = contextMenu.section('ignoreList');\n    if (menuSection.items.length > 0) {\n      // Already added menu items.\n      return;\n    }\n\n    for (const {text, callback, jslogContext} of Workspace.IgnoreListManager.IgnoreListManager.instance()\n             .getIgnoreListURLContextMenuItems(uiSourceCode)) {\n      menuSection.appendItem(text, callback, {jslogContext});\n    }\n  }\n\n  selectNextCallFrameOnStack(): void {\n    const oldItem = this.activeCallFrameItem();\n    const startIndex = oldItem ? this.items.indexOf(oldItem) + 1 : 0;\n    for (let i = startIndex; i < this.items.length; i++) {\n      const newItem = this.items.at(i);\n      if (newItem.frame) {\n        this.activateItem(newItem);\n        break;\n      }\n    }\n  }\n\n  selectPreviousCallFrameOnStack(): void {\n    const oldItem = this.activeCallFrameItem();\n    const startIndex = oldItem ? this.items.indexOf(oldItem) - 1 : this.items.length - 1;\n    for (let i = startIndex; i >= 0; i--) {\n      const newItem = this.items.at(i);\n      if (newItem.frame) {\n        this.activateItem(newItem);\n        break;\n      }\n    }\n  }\n\n  private copyStackTrace(): void {\n    const text = [];\n    for (const item of this.items) {\n      let itemText = item.title;\n      if (item.uiLocation) {\n        itemText += ' (' + item.uiLocation.linkText(true /* skipTrim */) + ')';\n      }\n      text.push(itemText);\n    }\n    Host.InspectorFrontendHost.InspectorFrontendHostInstance.copyText(text.join('\\n'));\n  }\n}\n\nexport const elementSymbol = Symbol('element');\nexport const defaultMaxAsyncStackChainDepth = 32;\n\nexport class ActionDelegate implements UI.ActionRegistration.ActionDelegate {\n  handleAction(_context: UI.Context.Context, actionId: string): boolean {\n    switch (actionId) {\n      case 'debugger.next-call-frame':\n        CallStackSidebarPane.instance().selectNextCallFrameOnStack();\n        return true;\n      case 'debugger.previous-call-frame':\n        CallStackSidebarPane.instance().selectPreviousCallFrameOnStack();\n        return true;\n    }\n    return false;\n  }\n}\n\nexport class Item {\n  isIgnoreListed: boolean;\n  title: string;\n  linkText: string;\n  uiLocation: Workspace.UISourceCode.UILocation|null;\n  isAsyncHeader: boolean;\n  updateDelegate: (arg0: Item) => void;\n  /** Only set for synchronous frames */\n  readonly frame?: SDK.DebuggerModel.CallFrame;\n\n  static async createForDebuggerCallFrame(\n      frame: SDK.DebuggerModel.CallFrame, locationPool: Bindings.LiveLocation.LiveLocationPool,\n      updateDelegate: (arg0: Item) => void): Promise<Item> {\n    const name = frame.functionName;\n    const item = new Item(UI.UIUtils.beautifyFunctionName(name), updateDelegate, frame);\n    await Bindings.DebuggerWorkspaceBinding.DebuggerWorkspaceBinding.instance().createCallFrameLiveLocation(\n        frame.location(), item.update.bind(item), locationPool);\n    void SourceMapScopes.NamesResolver.resolveDebuggerFrameFunctionName(frame).then(functionName => {\n      if (functionName && functionName !== name) {\n        // Just update the item's title and call the update delegate directly,\n        // instead of going through the update method below, since location\n        // didn't change.\n        item.title = functionName;\n        item.updateDelegate(item);\n      }\n    });\n    return item;\n  }\n\n  static async createItemsForAsyncStack(\n      title: string, debuggerModel: SDK.DebuggerModel.DebuggerModel, frames: Protocol.Runtime.CallFrame[],\n      locationPool: Bindings.LiveLocation.LiveLocationPool, updateDelegate: (arg0: Item) => void): Promise<Item[]> {\n    const headerItemToItemsSet = new WeakMap<Item, Set<Item>>();\n    const asyncHeaderItem = new Item(title, updateDelegate);\n    headerItemToItemsSet.set(asyncHeaderItem, new Set());\n    asyncHeaderItem.isAsyncHeader = true;\n\n    const asyncFrameItems = [];\n    const liveLocationPromises = [];\n    for (const frame of frames) {\n      const item = new Item(UI.UIUtils.beautifyFunctionName(frame.functionName), update);\n      const rawLocation =\n          debuggerModel.createRawLocationByScriptId(frame.scriptId, frame.lineNumber, frame.columnNumber);\n      liveLocationPromises.push(\n          Bindings.DebuggerWorkspaceBinding.DebuggerWorkspaceBinding.instance().createCallFrameLiveLocation(\n              rawLocation, item.update.bind(item), locationPool));\n      void SourceMapScopes.NamesResolver.resolveProfileFrameFunctionName(frame, debuggerModel.target())\n          .then(functionName => {\n            if (functionName && functionName !== frame.functionName) {\n              item.title = functionName;\n              item.updateDelegate(item);\n            }\n          });\n      asyncFrameItems.push(item);\n    }\n\n    await Promise.all(liveLocationPromises);\n    updateDelegate(asyncHeaderItem);\n\n    return [asyncHeaderItem, ...asyncFrameItems];\n\n    function update(item: Item): void {\n      updateDelegate(item);\n      let shouldUpdate = false;\n      const items = headerItemToItemsSet.get(asyncHeaderItem);\n      if (items) {\n        if (item.isIgnoreListed) {\n          items.delete(item);\n          shouldUpdate = items.size === 0;\n        } else {\n          shouldUpdate = items.size === 0;\n          items.add(item);\n        }\n        asyncHeaderItem.isIgnoreListed = items.size === 0;\n      }\n      if (shouldUpdate) {\n        updateDelegate(asyncHeaderItem);\n      }\n    }\n  }\n\n  constructor(title: string, updateDelegate: (arg0: Item) => void, frame?: SDK.DebuggerModel.CallFrame) {\n    this.isIgnoreListed = false;\n    this.title = title;\n    this.linkText = '';\n    this.uiLocation = null;\n    this.isAsyncHeader = false;\n    this.updateDelegate = updateDelegate;\n    this.frame = frame;\n  }\n\n  private async update(liveLocation: Bindings.LiveLocation.LiveLocation): Promise<void> {\n    const uiLocation = await liveLocation.uiLocation();\n    this.isIgnoreListed = Boolean(uiLocation?.isIgnoreListed());\n    this.linkText = uiLocation ? uiLocation.linkText() : '';\n    this.uiLocation = uiLocation;\n    this.updateDelegate(this);\n  }\n}\n", "// Copyright 2025 The Chromium Authors. All rights reserved.\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\n// IMPORTANT: this file is auto generated. Please do not edit this file.\n/* istanbul ignore file */\nexport default `/*\n * Copyright 2016 The Chromium Authors. All rights reserved.\n * Use of this source code is governed by a BSD-style license that can be\n * found in the LICENSE file.\n */\n\n.call-frame-warnings-message {\n  text-align: center;\n  font-style: italic;\n  padding: 4px;\n  color: var(--sys-color-on-surface-yellow);\n  background-color: var(--sys-color-surface-yellow);\n}\n\n.ignore-listed-message {\n  padding: 1px;\n}\n\n.ignore-listed-message-label {\n  color: var(--sys-color-token-subtle);\n  align-items: center;\n  display: flex;\n}\n\n.show-more-message > .link {\n  margin-left: 5px;\n}\n\n.show-more-message {\n  text-align: center;\n  font-style: italic;\n  padding: 4px;\n  border-top: 1px solid var(--sys-color-divider);\n}\n\n.call-frame-item {\n  padding: 3px 8px 3px 20px;\n  position: relative;\n  min-height: 18px;\n  line-height: 15px;\n  display: flex;\n  flex-wrap: wrap;\n}\n\n.call-frame-title-text {\n  text-overflow: ellipsis;\n  overflow: hidden;\n}\n\n.async-header + .call-frame-item {\n  border-top: 0;\n}\n\n.call-frame-item:not(.async-header) {\n  border-top: 1px solid var(--sys-color-divider);\n}\n\n.call-frame-item-title,\n.call-frame-location {\n  display: flex;\n  white-space: nowrap;\n}\n\n.async-header .call-frame-item-title {\n  font-weight: bold;\n  color: var(--sys-color-on-surface);\n  background-color: var(--sys-color-cdt-base-container);\n  margin-left: -5px;\n  padding: 0 5px;\n  z-index: 1;\n}\n\n.call-frame-item:focus-visible,\n.call-frame-item.async-header:focus-visible .call-frame-item-title {\n  background-color: var(--sys-color-tonal-container);\n}\n\n.ignore-listed-checkbox:focus-visible {\n  outline-width: unset;\n}\n\n.call-frame-item:not(.async-header):hover {\n  background-color: var(--sys-color-state-hover-on-subtle);\n}\n\n.call-frame-location {\n  color: var(--sys-color-token-subtle);\n  margin-left: auto;\n  padding: 0 10px;\n}\n\n.async-header::before {\n  content: \" \";\n  width: 100%;\n  border-top: 1px solid var(--sys-color-divider);\n  margin-top: 8px;\n  position: absolute;\n  left: 0;\n}\n\n.ignore-listed-call-frame {\n  opacity: 60%;\n  font-style: italic;\n}\n\n.selected-call-frame-icon {\n  display: none;\n  position: absolute;\n  top: 3px;\n  left: 4px;\n}\n\n.call-frame-item.selected .selected-call-frame-icon {\n  display: block;\n}\n\n.call-frame-warning-icon {\n  display: block;\n  position: absolute;\n  top: 3px;\n  right: 4px;\n}\n\n@media (forced-colors: active) {\n  .call-frame-item:focus-visible,\n  .call-frame-item:not(.async-header):hover {\n    forced-color-adjust: none;\n    background-color: Highlight;\n  }\n\n  .call-frame-item:focus-visible *,\n  .call-frame-item:not(.async-header):hover * {\n    color: HighlightText;\n  }\n}\n\n/*# sourceURL=${import.meta.resolve('./callStackSidebarPane.css')} */`;", "// Copyright 2023 The Chromium Authors. All rights reserved.\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\n\n/**\n * @file The sources panel (via DebuggerPausedMessage) and the\n * \"browser_debugger\" module both require localized CategorizedBreakpoint\n * names. We put them \"upstream\" into \"panels/sources\" so they are\n * available to both.\n */\n\nimport * as i18n from '../../core/i18n/i18n.js';\nimport type * as Platform from '../../core/platform/platform.js';\nimport * as SDK from '../../core/sdk/sdk.js';\nimport * as Protocol from '../../generated/protocol.js';\n\nconst UIStrings = {\n  /**\n   * @description Name of a breakpoint type.\n   * https://github.com/WICG/turtledove/blob/main/FLEDGE.md#32-on-device-bidding\n   */\n  beforeBidderWorkletBiddingStart: 'Bidder Bidding Phase Start',\n\n  /**\n   * @description Name of a breakpoint type.\n   * https://github.com/WICG/turtledove/blob/main/FLEDGE.md#52-buyer-reporting-on-render-and-ad-events\n   */\n  beforeBidderWorkletReportingStart: 'Bidder Reporting Phase Start',\n\n  /**\n   * @description Name of a breakpoint type.\n   * https://github.com/WICG/turtledove/blob/main/FLEDGE.md#23-scoring-bids\n   */\n  beforeSellerWorkletScoringStart: 'Seller Scoring Phase Start',\n\n  /**\n   * @description Name of a breakpoint type.\n   * https://github.com/WICG/turtledove/blob/main/FLEDGE.md#51-seller-reporting-on-render\n   */\n  beforeSellerWorkletReportingStart: 'Seller Reporting Phase Start',\n  /**\n   * @description Text in the Event Listener Breakpoints Panel of the JavaScript Debugger in the Sources Panel\n   * @example {setTimeout} PH1\n   */\n  setTimeoutOrIntervalFired: '{PH1} fired',\n  /**\n   * @description Text in the Event Listener Breakpoints Panel of the JavaScript Debugger in the Sources Panel\n   */\n  scriptFirstStatement: 'Script First Statement',\n  /**\n   * @description Text in the Event Listener Breakpoints Panel of the JavaScript Debugger in the Sources Panel\n   */\n  scriptBlockedByContentSecurity: 'Script Blocked by Content Security Policy',\n  /**\n   * @description Text for the request animation frame event\n   */\n  requestAnimationFrame: 'Request Animation Frame',\n  /**\n   * @description Text to cancel the animation frame\n   */\n  cancelAnimationFrame: 'Cancel Animation Frame',\n  /**\n   * @description Text for the event that an animation frame is fired\n   */\n  animationFrameFired: 'Animation Frame Fired',\n  /**\n   * @description Text in the Event Listener Breakpoints Panel of the JavaScript Debugger in the Sources Panel\n   */\n  webglErrorFired: 'WebGL Error Fired',\n  /**\n   * @description Text in the Event Listener Breakpoints Panel of the JavaScript Debugger in the Sources Panel\n   */\n  webglWarningFired: 'WebGL Warning Fired',\n  /**\n   * @description Text in the Event Listener Breakpoints Panel of the JavaScript Debugger in the Sources Panel\n   */\n  setInnerhtml: 'Set `innerHTML`',\n  /**\n   * @description Name of a breakpoint type in the Sources Panel.\n   */\n  createCanvasContext: 'Create canvas context',\n  /**\n   * @description Name of a breakpoint type in the Sources Panel.\n   */\n  createAudiocontext: 'Create `AudioContext`',\n  /**\n   * @description Name of a breakpoint type in the Sources Panel. Close is a verb.\n   */\n  closeAudiocontext: 'Close `AudioContext`',\n  /**\n   * @description Name of a breakpoint type in the Sources Panel. Resume is a verb.\n   */\n  resumeAudiocontext: 'Resume `AudioContext`',\n  /**\n   * @description Name of a breakpoint type in the Sources Panel.\n   */\n  suspendAudiocontext: 'Suspend `AudioContext`',\n  /**\n   * @description Noun. Title for a checkbox that turns on breakpoints on Trusted Type sink violations.\n   * \"Trusted Types\" is a Web API. A \"Sink\" (Noun, singular) is a special function, akin to a data sink, that expects\n   * to receive data in a specific format. Should the data be in the wrong format, or something else\n   * go wrong, its called a \"sink violation\".\n   */\n  sinkViolations: 'Sink Violations',\n  /**\n   * @description Title for a checkbox that turns on breakpoints on Trusted Type policy violations\n   */\n  policyViolations: 'Policy Violations',\n} as const;\nconst str_ = i18n.i18n.registerUIStrings('panels/sources/CategorizedBreakpointL10n.ts', UIStrings);\nconst i18nLazyString = i18n.i18n.getLazilyComputedLocalizedString.bind(undefined, str_);\n\nexport function getLocalizedBreakpointName(name: string): Platform.UIString.LocalizedString {\n  const l10nLazyName = LOCALIZED_NAMES.get(name) ?? i18n.i18n.lockedLazyString(name);\n  return l10nLazyName();\n}\n\nconst LOCALIZED_INSTRUMENTATION_NAMES:\n    Record<SDK.EventBreakpointsModel.InstrumentationNames, () => Platform.UIString.LocalizedString> = {\n      [SDK.EventBreakpointsModel.InstrumentationNames.BEFORE_BIDDER_WORKLET_BIDDING_START]:\n          i18nLazyString(UIStrings.beforeBidderWorkletBiddingStart),\n      [SDK.EventBreakpointsModel.InstrumentationNames.BEFORE_BIDDER_WORKLET_REPORTING_START]:\n          i18nLazyString(UIStrings.beforeBidderWorkletReportingStart),\n      [SDK.EventBreakpointsModel.InstrumentationNames.BEFORE_SELLER_WORKLET_SCORING_START]:\n          i18nLazyString(UIStrings.beforeSellerWorkletScoringStart),\n      [SDK.EventBreakpointsModel.InstrumentationNames.BEFORE_SELLER_WORKLET_REPORTING_START]:\n          i18nLazyString(UIStrings.beforeSellerWorkletReportingStart),\n      [SDK.EventBreakpointsModel.InstrumentationNames.SET_TIMEOUT]: i18n.i18n.lockedLazyString('setTimeout'),\n      [SDK.EventBreakpointsModel.InstrumentationNames.CLEAR_TIMEOUT]: i18n.i18n.lockedLazyString('clearTimeout'),\n      [SDK.EventBreakpointsModel.InstrumentationNames.SET_TIMEOUT_CALLBACK]:\n          i18nLazyString(UIStrings.setTimeoutOrIntervalFired, {PH1: 'setTimeout'}),\n      [SDK.EventBreakpointsModel.InstrumentationNames.SET_INTERVAL]: i18n.i18n.lockedLazyString('setInterval'),\n      [SDK.EventBreakpointsModel.InstrumentationNames.CLEAR_INTERVAL]: i18n.i18n.lockedLazyString('clearInterval'),\n      [SDK.EventBreakpointsModel.InstrumentationNames.SET_INTERVAL_CALLBACK]:\n          i18nLazyString(UIStrings.setTimeoutOrIntervalFired, {PH1: 'setInterval'}),\n      [SDK.EventBreakpointsModel.InstrumentationNames.SCRIPT_FIRST_STATEMENT]:\n          i18nLazyString(UIStrings.scriptFirstStatement),\n      [SDK.EventBreakpointsModel.InstrumentationNames.SCRIPT_BLOCKED_BY_CSP]:\n          i18nLazyString(UIStrings.scriptBlockedByContentSecurity),\n      [SDK.EventBreakpointsModel.InstrumentationNames.SHARED_STORAGE_WORKLET_SCRIPT_FIRST_STATEMENT]:\n          i18nLazyString(UIStrings.scriptFirstStatement),\n      [SDK.EventBreakpointsModel.InstrumentationNames.REQUEST_ANIMATION_FRAME]:\n          i18nLazyString(UIStrings.requestAnimationFrame),\n      [SDK.EventBreakpointsModel.InstrumentationNames.CANCEL_ANIMATION_FRAME]:\n          i18nLazyString(UIStrings.cancelAnimationFrame),\n      [SDK.EventBreakpointsModel.InstrumentationNames.REQUEST_ANIMATION_FRAME_CALLBACK]:\n          i18nLazyString(UIStrings.animationFrameFired),\n      [SDK.EventBreakpointsModel.InstrumentationNames.WEBGL_ERROR_FIRED]: i18nLazyString(UIStrings.webglErrorFired),\n      [SDK.EventBreakpointsModel.InstrumentationNames.WEBGL_WARNING_FIRED]: i18nLazyString(UIStrings.webglWarningFired),\n      [SDK.EventBreakpointsModel.InstrumentationNames.ELEMENT_SET_INNER_HTML]: i18nLazyString(UIStrings.setInnerhtml),\n      [SDK.EventBreakpointsModel.InstrumentationNames.CANVAS_CONTEXT_CREATED]:\n          i18nLazyString(UIStrings.createCanvasContext),\n      [SDK.EventBreakpointsModel.InstrumentationNames.GEOLOCATION_GET_CURRENT_POSITION]:\n          i18n.i18n.lockedLazyString('getCurrentPosition'),\n      [SDK.EventBreakpointsModel.InstrumentationNames.GEOLOCATION_WATCH_POSITION]:\n          i18n.i18n.lockedLazyString('watchPosition'),\n      [SDK.EventBreakpointsModel.InstrumentationNames.NOTIFICATION_REQUEST_PERMISSION]:\n          i18n.i18n.lockedLazyString('requestPermission'),\n      [SDK.EventBreakpointsModel.InstrumentationNames.DOM_WINDOW_CLOSE]: i18n.i18n.lockedLazyString('window.close'),\n      [SDK.EventBreakpointsModel.InstrumentationNames.DOCUMENT_WRITE]: i18n.i18n.lockedLazyString('document.write'),\n      [SDK.EventBreakpointsModel.InstrumentationNames.AUDIO_CONTEXT_CREATED]:\n          i18nLazyString(UIStrings.createAudiocontext),\n      [SDK.EventBreakpointsModel.InstrumentationNames.AUDIO_CONTEXT_CLOSED]:\n          i18nLazyString(UIStrings.closeAudiocontext),\n      [SDK.EventBreakpointsModel.InstrumentationNames.AUDIO_CONTEXT_RESUMED]:\n          i18nLazyString(UIStrings.resumeAudiocontext),\n      [SDK.EventBreakpointsModel.InstrumentationNames.AUDIO_CONTEXT_SUSPENDED]:\n          i18nLazyString(UIStrings.suspendAudiocontext),\n    };\n\nconst LOCALIZED_CSP_VIOLATION_TYPES:\n    Record<Protocol.DOMDebugger.CSPViolationType, () => Platform.UIString.LocalizedString> = {\n      [Protocol.DOMDebugger.CSPViolationType.TrustedtypePolicyViolation]: i18nLazyString(UIStrings.policyViolations),\n      [Protocol.DOMDebugger.CSPViolationType.TrustedtypeSinkViolation]: i18nLazyString(UIStrings.sinkViolations),\n    };\n\nconst LOCALIZED_NAMES = new Map<string, () => Platform.UIString.LocalizedString>([\n  ...Object.entries(LOCALIZED_INSTRUMENTATION_NAMES),\n  ...Object.entries(LOCALIZED_CSP_VIOLATION_TYPES),\n]);\n", "// Copyright 2019 The Chromium Authors. All rights reserved.\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\n/* eslint-disable rulesdir/no-imperative-dom-api */\n\nimport * as i18n from '../../core/i18n/i18n.js';\nimport type * as Platform from '../../core/platform/platform.js';\nimport * as SDK from '../../core/sdk/sdk.js';\nimport * as TextUtils from '../../models/text_utils/text_utils.js';\nimport type * as Workspace from '../../models/workspace/workspace.js';\nimport * as CodeMirror from '../../third_party/codemirror.next/codemirror.next.js';\nimport type * as TextEditor from '../../ui/components/text_editor/text_editor.js';\nimport * as SourceFrame from '../../ui/legacy/components/source_frame/source_frame.js';\nimport * as UI from '../../ui/legacy/legacy.js';\nimport * as Coverage from '../coverage/coverage.js';\n\nimport {Plugin} from './Plugin.js';\n\n// Plugin that shows a gutter with coverage information when available.\n\nconst UIStrings = {\n  /**\n   * @description Text for Coverage Status Bar Item in Sources Panel\n   */\n  clickToShowCoveragePanel: 'Click to show Coverage Panel',\n  /**\n   * @description Text for Coverage Status Bar Item in Sources Panel\n   */\n  showDetails: 'Show Details',\n  /**\n   * @description Text to show in the status bar if coverage data is available\n   * @example {12.3} PH1\n   */\n  coverageS: 'Coverage: {PH1}',\n  /**\n   * @description Text to be shown in the status bar if no coverage data is available\n   */\n  coverageNa: 'Coverage: n/a',\n} as const;\nconst str_ = i18n.i18n.registerUIStrings('panels/sources/CoveragePlugin.ts', UIStrings);\nconst i18nString = i18n.i18n.getLocalizedString.bind(undefined, str_);\n\nexport class CoveragePlugin extends Plugin {\n  private originalSourceCode: Workspace.UISourceCode.UISourceCode;\n  private infoInToolbar: UI.Toolbar.ToolbarButton;\n  private model: Coverage.CoverageModel.CoverageModel|null|undefined;\n  private coverage: Coverage.CoverageModel.URLCoverageInfo|null|undefined;\n\n  readonly #transformer: SourceFrame.SourceFrame.Transformer;\n\n  constructor(uiSourceCode: Workspace.UISourceCode.UISourceCode, transformer: SourceFrame.SourceFrame.Transformer) {\n    super(uiSourceCode);\n    this.originalSourceCode = this.uiSourceCode;\n    this.#transformer = transformer;\n    this.infoInToolbar = new UI.Toolbar.ToolbarButton(\n        i18nString(UIStrings.clickToShowCoveragePanel), undefined, undefined, 'debugger.show-coverage');\n    this.infoInToolbar.setSecondary();\n    this.infoInToolbar.addEventListener(UI.Toolbar.ToolbarButton.Events.CLICK, () => {\n      void UI.ViewManager.ViewManager.instance().showView('coverage');\n    });\n\n    const mainTarget = SDK.TargetManager.TargetManager.instance().primaryPageTarget();\n    if (mainTarget) {\n      this.model = mainTarget.model(Coverage.CoverageModel.CoverageModel);\n      if (this.model) {\n        this.model.addEventListener(Coverage.CoverageModel.Events.CoverageReset, this.handleReset, this);\n\n        this.coverage = this.model.getCoverageForUrl(this.originalSourceCode.url());\n        if (this.coverage) {\n          this.coverage.addEventListener(\n              Coverage.CoverageModel.URLCoverageInfo.Events.SizesChanged, this.handleCoverageSizesChanged, this);\n        }\n      }\n    }\n\n    this.updateStats();\n  }\n\n  override dispose(): void {\n    if (this.coverage) {\n      this.coverage.removeEventListener(\n          Coverage.CoverageModel.URLCoverageInfo.Events.SizesChanged, this.handleCoverageSizesChanged, this);\n    }\n    if (this.model) {\n      this.model.removeEventListener(Coverage.CoverageModel.Events.CoverageReset, this.handleReset, this);\n    }\n  }\n\n  static override accepts(uiSourceCode: Workspace.UISourceCode.UISourceCode): boolean {\n    return uiSourceCode.contentType().isDocumentOrScriptOrStyleSheet();\n  }\n\n  private handleReset(): void {\n    this.coverage = null;\n    this.updateStats();\n  }\n\n  private handleCoverageSizesChanged(): void {\n    this.updateStats();\n  }\n\n  private updateStats(): void {\n    if (this.coverage) {\n      this.infoInToolbar.setTitle(i18nString(UIStrings.showDetails));\n      const formatter = new Intl.NumberFormat(i18n.DevToolsLocale.DevToolsLocale.instance().locale, {\n        style: 'percent',\n        maximumFractionDigits: 1,\n      });\n      this.infoInToolbar.setText(\n          i18nString(UIStrings.coverageS, {PH1: formatter.format(this.coverage.usedPercentage())}));\n    } else {\n      this.infoInToolbar.setTitle(i18nString(UIStrings.clickToShowCoveragePanel));\n      this.infoInToolbar.setText(i18nString(UIStrings.coverageNa));\n    }\n  }\n\n  override rightToolbarItems(): UI.Toolbar.ToolbarItem[] {\n    return [this.infoInToolbar];\n  }\n\n  override editorExtension(): CodeMirror.Extension {\n    return coverageCompartment.of([]);\n  }\n\n  private getCoverageManager(): Coverage.CoverageDecorationManager.CoverageDecorationManager|undefined {\n    return this.uiSourceCode.getDecorationData(SourceFrame.SourceFrame.DecoratorType.COVERAGE);\n  }\n\n  override editorInitialized(editor: TextEditor.TextEditor.TextEditor): void {\n    if (this.getCoverageManager()) {\n      this.startDecoUpdate(editor);\n    }\n  }\n\n  override decorationChanged(type: SourceFrame.SourceFrame.DecoratorType, editor: TextEditor.TextEditor.TextEditor):\n      void {\n    if (type === SourceFrame.SourceFrame.DecoratorType.COVERAGE) {\n      this.startDecoUpdate(editor);\n    }\n  }\n\n  private startDecoUpdate(editor: TextEditor.TextEditor.TextEditor): void {\n    const manager = this.getCoverageManager();\n    void (manager ? manager.usageByLine(this.uiSourceCode, this.#editorLines(editor)) : Promise.resolve([]))\n        .then(usageByLine => {\n          const enabled = Boolean(editor.state.field(coverageState, false));\n          if (!usageByLine.length) {\n            if (enabled) {\n              editor.dispatch({effects: coverageCompartment.reconfigure([])});\n            }\n          } else if (!enabled) {\n            editor.dispatch({\n              effects: coverageCompartment.reconfigure([\n                coverageState.init(state => markersFromCoverageData(usageByLine, state)),\n                coverageGutter(this.uiSourceCode.url()),\n                theme,\n              ]),\n            });\n          } else {\n            editor.dispatch({effects: setCoverageState.of(usageByLine)});\n          }\n        });\n  }\n\n  /**\n   * @returns The current lines of the CodeMirror editor expressed in terms of UISourceCode.\n   */\n  #editorLines(editor: TextEditor.TextEditor.TextEditor): TextUtils.TextRange.TextRange[] {\n    const result: TextUtils.TextRange.TextRange[] = [];\n    for (let n = 1; n <= editor.state.doc.lines; ++n) {\n      const line = editor.state.doc.line(n);\n      // CodeMirror lines are 1-based where-as the transformer expects 0-based.\n      const {lineNumber: startLine, columnNumber: startColumn} = this.#transformer.editorLocationToUILocation(n - 1, 0);\n      const {lineNumber: endLine, columnNumber: endColumn} =\n          this.#transformer.editorLocationToUILocation(n - 1, line.length);\n      result.push(new TextUtils.TextRange.TextRange(startLine, startColumn, endLine, endColumn));\n    }\n    return result;\n  }\n}\n\nconst coveredMarker = new (class extends CodeMirror.GutterMarker {\n  override elementClass = 'cm-coverageUsed';\n})();\n\nconst notCoveredMarker = new (class extends CodeMirror.GutterMarker {\n  override elementClass = 'cm-coverageUnused';\n})();\n\nfunction markersFromCoverageData(usageByLine: Array<boolean|undefined>, state: CodeMirror.EditorState):\n    CodeMirror.RangeSet<CodeMirror.GutterMarker> {\n  const builder = new CodeMirror.RangeSetBuilder<CodeMirror.GutterMarker>();\n  for (let line = 0; line < usageByLine.length; line++) {\n    const usage = usageByLine[line];\n    if (usage !== undefined && line < state.doc.lines) {\n      const lineStart = state.doc.line(line + 1).from;\n      builder.add(lineStart, lineStart, usage ? coveredMarker : notCoveredMarker);\n    }\n  }\n  return builder.finish();\n}\n\nconst setCoverageState = CodeMirror.StateEffect.define<Array<boolean|undefined>>();\n\nconst coverageState = CodeMirror.StateField.define<CodeMirror.RangeSet<CodeMirror.GutterMarker>>({\n  create(): CodeMirror.RangeSet<CodeMirror.GutterMarker> {\n    return CodeMirror.RangeSet.empty;\n  },\n  update(markers, tr) {\n    return tr.effects.reduce((markers, effect) => {\n      return effect.is(setCoverageState) ? markersFromCoverageData(effect.value, tr.state) : markers;\n    }, markers.map(tr.changes));\n  },\n});\n\nfunction coverageGutter(url: Platform.DevToolsPath.UrlString): CodeMirror.Extension {\n  return CodeMirror.gutter({\n    markers: view => view.state.field(coverageState),\n\n    domEventHandlers: {\n      click() {\n        void UI.ViewManager.ViewManager.instance()\n            .showView('coverage')\n            .then(() => {\n              const view = UI.ViewManager.ViewManager.instance().view('coverage');\n              return view?.widget();\n            })\n            .then(widget => {\n              const matchFormattedSuffix = url.match(/(.*):formatted$/);\n              const urlWithoutFormattedSuffix = (matchFormattedSuffix?.[1]) || url;\n              (widget as Coverage.CoverageView.CoverageView).selectCoverageItemByUrl(urlWithoutFormattedSuffix);\n            });\n        return true;\n      },\n    },\n\n    class: 'cm-coverageGutter',\n  });\n}\n\nconst coverageCompartment = new CodeMirror.Compartment();\n\nconst theme = CodeMirror.EditorView.baseTheme({\n  '.cm-line::selection': {\n    backgroundColor: 'transparent',\n    color: 'currentColor',\n  },\n  '.cm-coverageGutter': {\n    width: '5px',\n    marginLeft: '3px',\n  },\n  '.cm-coverageUnused': {\n    backgroundColor: 'var(--app-color-coverage-unused)',\n  },\n  '.cm-coverageUsed': {\n    backgroundColor: 'var(--app-color-coverage-used)',\n  },\n});\n", "// Copyright 2021 The Chromium Authors. All rights reserved.\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\n/* eslint-disable rulesdir/no-imperative-dom-api */\n\nimport * as Common from '../../core/common/common.js';\nimport * as i18n from '../../core/i18n/i18n.js';\nimport type * as Platform from '../../core/platform/platform.js';\nimport {assertNotNullOrUndefined} from '../../core/platform/platform.js';\nimport * as SDK from '../../core/sdk/sdk.js';\nimport type * as Protocol from '../../generated/protocol.js';\nimport * as Bindings from '../../models/bindings/bindings.js';\nimport * as Workspace from '../../models/workspace/workspace.js';\nimport * as CodeMirror from '../../third_party/codemirror.next/codemirror.next.js';\nimport * as IconButton from '../../ui/components/icon_button/icon_button.js';\nimport * as ColorPicker from '../../ui/legacy/components/color_picker/color_picker.js';\nimport * as InlineEditor from '../../ui/legacy/components/inline_editor/inline_editor.js';\nimport type * as SourceFrame from '../../ui/legacy/components/source_frame/source_frame.js';\nimport * as UI from '../../ui/legacy/legacy.js';\nimport * as VisualLogging from '../../ui/visual_logging/visual_logging.js';\n\nimport {AddDebugInfoURLDialog} from './AddSourceMapURLDialog.js';\nimport {Plugin} from './Plugin.js';\n\n// Plugin to add CSS completion, shortcuts, and color/curve swatches\n// to editors with CSS content.\n\nconst UIStrings = {\n  /**\n   * @description Swatch icon element title in CSSPlugin of the Sources panel\n   */\n  openColorPicker: 'Open color picker.',\n  /**\n   * @description Text to open the cubic bezier editor\n   */\n  openCubicBezierEditor: 'Open cubic bezier editor.',\n  /**\n   * @description Text for a context menu item for attaching a sourcemap to the currently open css file\n   */\n  addSourceMap: 'Add source map…',\n} as const;\nconst str_ = i18n.i18n.registerUIStrings('panels/sources/CSSPlugin.ts', UIStrings);\nconst i18nString = i18n.i18n.getLocalizedString.bind(undefined, str_);\n\nconst doNotCompleteIn = new Set(['ColorLiteral', 'NumberLiteral', 'StringLiteral', 'Comment', 'Important']);\n\nfunction findPropertyAt(node: CodeMirror.SyntaxNode, pos: number): CodeMirror.SyntaxNode|null {\n  if (doNotCompleteIn.has(node.name)) {\n    return null;\n  }\n  for (let cur: CodeMirror.SyntaxNode|null = node; cur; cur = cur.parent) {\n    if (cur.name === 'StyleSheet' || cur.name === 'Styles' || cur.name === 'CallExpression') {\n      break;\n    } else if (cur.name === 'Declaration') {\n      const name = cur.getChild('PropertyName'), colon = cur.getChild(':');\n      return name && colon && colon.to <= pos ? name : null;\n    }\n  }\n  return null;\n}\n\nfunction getCurrentStyleSheet(\n    url: Platform.DevToolsPath.UrlString, cssModel: SDK.CSSModel.CSSModel): Protocol.CSS.StyleSheetId {\n  const currentStyleSheet = cssModel.getStyleSheetIdsForURL(url);\n  if (currentStyleSheet.length === 0) {\n    throw new Error('Can\\'t find style sheet ID for current URL');\n  }\n\n  return currentStyleSheet[0];\n}\n\nasync function specificCssCompletion(\n    cx: CodeMirror.CompletionContext, uiSourceCode: Workspace.UISourceCode.UISourceCode,\n    cssModel: SDK.CSSModel.CSSModel|undefined): Promise<CodeMirror.CompletionResult|null> {\n  const node = CodeMirror.syntaxTree(cx.state).resolveInner(cx.pos, -1);\n  if (node.name === 'ClassName') {\n    // Should never happen, but let's code defensively here\n    assertNotNullOrUndefined(cssModel);\n\n    const currentStyleSheet = getCurrentStyleSheet(uiSourceCode.url(), cssModel);\n    const existingClassNames = await cssModel.getClassNames(currentStyleSheet);\n\n    return {\n      from: node.from,\n      options: existingClassNames.map(value => ({type: 'constant', label: value})),\n    };\n  }\n  const property = findPropertyAt(node, cx.pos);\n  if (property) {\n    const propertyValues =\n        SDK.CSSMetadata.cssMetadata().getPropertyValues(cx.state.sliceDoc(property.from, property.to));\n    return {\n      from: node.name === 'ValueName' ? node.from : cx.pos,\n      options: propertyValues.map(value => ({type: 'constant', label: value})),\n      validFor: /^[\\w\\P{ASCII}\\-]+$/u,\n    };\n  }\n  return null;\n}\n\nfunction findColorsAndCurves(\n    state: CodeMirror.EditorState,\n    from: number,\n    to: number,\n    onColor: (pos: number, parsedColor: Common.Color.Color, text: string) => void,\n    onCurve: (pos: number, curve: UI.Geometry.CubicBezier, text: string) => void,\n    ): void {\n  let line = state.doc.lineAt(from);\n  function getToken(from: number, to: number): string {\n    if (from >= line.to) {\n      line = state.doc.lineAt(from);\n    }\n    return line.text.slice(from - line.from, to - line.from);\n  }\n\n  const tree = CodeMirror.ensureSyntaxTree(state, to, 100);\n  if (!tree) {\n    return;\n  }\n  tree.iterate({\n    from,\n    to,\n    enter: node => {\n      let content;\n      if (node.name === 'ValueName' || node.name === 'ColorLiteral') {\n        content = getToken(node.from, node.to);\n      } else if (\n          node.name === 'Callee' &&\n          /^(?:(?:rgba?|hsla?|hwba?|lch|oklch|lab|oklab|color)|cubic-bezier)$/.test(getToken(node.from, node.to))) {\n        content = state.sliceDoc(node.from, (node.node.parent as CodeMirror.SyntaxNode).to);\n      }\n      if (content) {\n        const parsedColor = Common.Color.parse(content);\n        if (parsedColor) {\n          onColor(node.from, parsedColor, content);\n        } else {\n          const parsedCurve = UI.Geometry.CubicBezier.parse(content);\n          if (parsedCurve) {\n            onCurve(node.from, parsedCurve, content);\n          }\n        }\n      }\n    },\n  });\n}\n\nclass ColorSwatchWidget extends CodeMirror.WidgetType {\n  #text: string;\n  #color: Common.Color.Color;\n  readonly #from: number;\n\n  constructor(color: Common.Color.Color, text: string, from: number) {\n    super();\n    this.#color = color;\n    this.#text = text;\n    this.#from = from;\n  }\n\n  override eq(other: ColorSwatchWidget): boolean {\n    return this.#color.equal(other.#color) && this.#text === other.#text && this.#from === other.#from;\n  }\n\n  toDOM(view: CodeMirror.EditorView): HTMLElement {\n    const swatch = new InlineEditor.ColorSwatch.ColorSwatch(i18nString(UIStrings.openColorPicker));\n    swatch.renderColor(this.#color);\n    const value = swatch.createChild('span');\n    value.textContent = this.#text;\n    value.setAttribute('hidden', 'true');\n    swatch.addEventListener(InlineEditor.ColorSwatch.ColorChangedEvent.eventName, event => {\n      const insert = event.data.color.getAuthoredText() ?? event.data.color.asString();\n      view.dispatch({changes: {from: this.#from, to: this.#from + this.#text.length, insert}});\n      this.#text = insert;\n      this.#color = swatch.getColor() as Common.Color.Color;\n    });\n    swatch.addEventListener(InlineEditor.ColorSwatch.ColorFormatChangedEvent.eventName, event => {\n      const insert = event.data.color.getAuthoredText() ?? event.data.color.asString();\n      view.dispatch({changes: {from: this.#from, to: this.#from + this.#text.length, insert}});\n      this.#text = insert;\n      this.#color = swatch.getColor() as Common.Color.Color;\n    });\n    swatch.addEventListener(InlineEditor.ColorSwatch.ClickEvent.eventName, event => {\n      event.consume(true);\n      view.dispatch({\n        effects: setTooltip.of({\n          type: TooltipType.COLOR,\n          pos: view.posAtDOM(swatch),\n          text: this.#text,\n          swatch,\n          color: this.#color,\n        }),\n      });\n    });\n    return swatch;\n  }\n\n  override ignoreEvent(): boolean {\n    return true;\n  }\n}\n\nclass CurveSwatchWidget extends CodeMirror.WidgetType {\n  constructor(readonly curve: UI.Geometry.CubicBezier, readonly text: string) {\n    super();\n  }\n\n  override eq(other: CurveSwatchWidget): boolean {\n    return this.curve.asCSSText() === other.curve.asCSSText() && this.text === other.text;\n  }\n\n  toDOM(view: CodeMirror.EditorView): HTMLElement {\n    const container = document.createElement('span');\n    const bezierText = container.createChild('span');\n    const icon = IconButton.Icon.create('bezier-curve-filled', 'bezier-swatch-icon');\n    icon.setAttribute('jslog', `${VisualLogging.showStyleEditor('bezier')}`);\n    bezierText.append(this.text);\n    UI.Tooltip.Tooltip.install(icon, i18nString(UIStrings.openCubicBezierEditor));\n    icon.addEventListener('click', (event: MouseEvent) => {\n      event.consume(true);\n      view.dispatch({\n        effects: setTooltip.of({\n          type: TooltipType.CURVE,\n          pos: view.posAtDOM(icon),\n          text: this.text,\n          swatch: icon,\n          curve: this.curve,\n        }),\n      });\n    }, false);\n    return icon;\n  }\n\n  override ignoreEvent(): boolean {\n    return true;\n  }\n}\n\nconst enum TooltipType {\n  COLOR = 0,\n  CURVE = 1,\n}\n\ntype ActiveTooltip = {\n  type: TooltipType.COLOR,\n  pos: number,\n  text: string,\n  color: Common.Color.Color,\n  swatch: InlineEditor.ColorSwatch.ColorSwatch,\n}|{\n  type: TooltipType.CURVE,\n  pos: number,\n  text: string,\n  curve: UI.Geometry.CubicBezier,\n  swatch: IconButton.Icon.Icon,\n};\n\nfunction createCSSTooltip(active: ActiveTooltip): CodeMirror.Tooltip {\n  return {\n    pos: active.pos,\n    arrow: false,\n    create(view): CodeMirror.TooltipView {\n      let text = active.text;\n      let widget: UI.Widget.VBox, addListener: (handler: (event: {data: string}) => void) => void;\n      if (active.type === TooltipType.COLOR) {\n        const spectrum = new ColorPicker.Spectrum.Spectrum();\n        addListener = handler => {\n          spectrum.addEventListener(ColorPicker.Spectrum.Events.COLOR_CHANGED, handler);\n        };\n        spectrum.addEventListener(ColorPicker.Spectrum.Events.SIZE_CHANGED, () => view.requestMeasure());\n        spectrum.setColor(active.color);\n        widget = spectrum;\n      } else {\n        const spectrum = new InlineEditor.BezierEditor.BezierEditor(active.curve);\n        widget = spectrum;\n        addListener = handler => {\n          spectrum.addEventListener(InlineEditor.BezierEditor.Events.BEZIER_CHANGED, handler);\n        };\n      }\n      const dom = document.createElement('div');\n      dom.className = 'cm-tooltip-swatchEdit';\n      widget.markAsRoot();\n      widget.show(dom);\n      widget.showWidget();\n      widget.element.addEventListener('keydown', event => {\n        if (event.key === 'Escape') {\n          event.consume();\n          view.dispatch({\n            effects: setTooltip.of(null),\n            changes: text === active.text ? undefined :\n                                            {from: active.pos, to: active.pos + text.length, insert: active.text},\n          });\n          widget.hideWidget();\n          view.focus();\n        }\n      });\n      widget.element.addEventListener('focusout', event => {\n        if (event.relatedTarget && !widget.element.contains(event.relatedTarget as Node)) {\n          view.dispatch({effects: setTooltip.of(null)});\n          widget.hideWidget();\n        }\n      }, false);\n      widget.element.addEventListener('mousedown', event => event.consume());\n      return {\n        dom,\n        resize: false,\n        offset: {x: -8, y: 0},\n        mount: () => {\n          widget.focus();\n          widget.wasShown();\n          addListener((event: {data: string}) => {\n            view.dispatch({\n              changes: {from: active.pos, to: active.pos + text.length, insert: event.data},\n              annotations: isSwatchEdit.of(true),\n            });\n            text = event.data;\n          });\n        },\n      };\n    },\n  };\n}\n\nconst setTooltip = CodeMirror.StateEffect.define<ActiveTooltip|null>();\n\nconst isSwatchEdit = CodeMirror.Annotation.define<boolean>();\n\nconst cssTooltipState = CodeMirror.StateField.define<ActiveTooltip|null>({\n  create() {\n    return null;\n  },\n\n  update(value: ActiveTooltip|null, tr: CodeMirror.Transaction): ActiveTooltip |\n      null {\n        if ((tr.docChanged || tr.selection) && !tr.annotation(isSwatchEdit)) {\n          value = null;\n        }\n        for (const effect of tr.effects) {\n          if (effect.is(setTooltip)) {\n            value = effect.value;\n          }\n        }\n        return value;\n      },\n\n  provide: field => CodeMirror.showTooltip.from(field, active => active && createCSSTooltip(active)),\n});\n\nfunction computeSwatchDeco(state: CodeMirror.EditorState, from: number, to: number): CodeMirror.DecorationSet {\n  const builder = new CodeMirror.RangeSetBuilder<CodeMirror.Decoration>();\n  findColorsAndCurves(\n      state, from, to,\n      (pos, parsedColor, colorText) => {\n        builder.add(\n            pos, pos, CodeMirror.Decoration.widget({widget: new ColorSwatchWidget(parsedColor, colorText, pos)}));\n      },\n      (pos, curve, text) => {\n        builder.add(pos, pos, CodeMirror.Decoration.widget({widget: new CurveSwatchWidget(curve, text)}));\n      });\n  return builder.finish();\n}\n\nconst cssSwatchPlugin = CodeMirror.ViewPlugin.fromClass(class {\n  decorations: CodeMirror.DecorationSet;\n\n  constructor(view: CodeMirror.EditorView) {\n    this.decorations = computeSwatchDeco(view.state, view.viewport.from, view.viewport.to);\n  }\n\n  update(update: CodeMirror.ViewUpdate): void {\n    if (update.viewportChanged || update.docChanged) {\n      this.decorations = computeSwatchDeco(update.state, update.view.viewport.from, update.view.viewport.to);\n    }\n  }\n}, {\n  decorations: v => v.decorations,\n});\n\nfunction cssSwatches(): CodeMirror.Extension {\n  return [cssSwatchPlugin, cssTooltipState, theme];\n}\n\nfunction getNumberAt(node: CodeMirror.SyntaxNode): {from: number, to: number}|null {\n  if (node.name === 'Unit') {\n    node = node.parent as CodeMirror.SyntaxNode;\n  }\n  if (node.name === 'NumberLiteral') {\n    const lastChild = node.lastChild;\n    return {from: node.from, to: lastChild && lastChild.name === 'Unit' ? lastChild.from : node.to};\n  }\n  return null;\n}\n\nfunction modifyUnit(view: CodeMirror.EditorView, by: number): boolean {\n  const {head} = view.state.selection.main;\n  const context = CodeMirror.syntaxTree(view.state).resolveInner(head, -1);\n  const numberRange = getNumberAt(context) || getNumberAt(context.resolve(head, 1));\n  if (!numberRange) {\n    return false;\n  }\n\n  const currentNumber = Number(view.state.sliceDoc(numberRange.from, numberRange.to));\n  if (isNaN(currentNumber)) {\n    return false;\n  }\n\n  view.dispatch({\n    changes: {from: numberRange.from, to: numberRange.to, insert: String(currentNumber + by)},\n    scrollIntoView: true,\n    userEvent: 'insert.modifyUnit',\n  });\n  return true;\n}\n\nexport function cssBindings(): CodeMirror.Extension {\n  // This is an awkward way to pass the argument given to the editor\n  // event handler through the ShortcutRegistry calling convention.\n  let currentView: CodeMirror.EditorView = null as unknown as CodeMirror.EditorView;\n  const listener = UI.ShortcutRegistry.ShortcutRegistry.instance().getShortcutListener({\n    'sources.increment-css': () => Promise.resolve(modifyUnit(currentView, 1)),\n    'sources.increment-css-by-ten': () => Promise.resolve(modifyUnit(currentView, 10)),\n    'sources.decrement-css': () => Promise.resolve(modifyUnit(currentView, -1)),\n    'sources.decrement-css-by-ten': () => Promise.resolve(modifyUnit(currentView, -10)),\n  });\n\n  return CodeMirror.EditorView.domEventHandlers({\n    keydown: (event, view) => {\n      const prevView = currentView;\n      currentView = view;\n      listener(event);\n      currentView = prevView;\n      return event.defaultPrevented;\n    },\n  });\n}\n\nexport class CSSPlugin extends Plugin implements SDK.TargetManager.SDKModelObserver<SDK.CSSModel.CSSModel> {\n  #cssModel?: SDK.CSSModel.CSSModel;\n\n  constructor(uiSourceCode: Workspace.UISourceCode.UISourceCode, _transformer?: SourceFrame.SourceFrame.Transformer) {\n    super(uiSourceCode, _transformer);\n    SDK.TargetManager.TargetManager.instance().observeModels(SDK.CSSModel.CSSModel, this);\n  }\n\n  static override accepts(uiSourceCode: Workspace.UISourceCode.UISourceCode): boolean {\n    return uiSourceCode.contentType().hasStyleSheets();\n  }\n\n  modelAdded(cssModel: SDK.CSSModel.CSSModel): void {\n    if (cssModel.target() !== SDK.TargetManager.TargetManager.instance().primaryPageTarget()) {\n      return;\n    }\n    this.#cssModel = cssModel;\n  }\n  modelRemoved(cssModel: SDK.CSSModel.CSSModel): void {\n    if (this.#cssModel === cssModel) {\n      this.#cssModel = undefined;\n    }\n  }\n\n  override editorExtension(): CodeMirror.Extension {\n    return [cssBindings(), this.#cssCompletion(), cssSwatches()];\n  }\n\n  #cssCompletion(): CodeMirror.Extension {\n    const {cssCompletionSource} = CodeMirror.css;\n\n    // CodeMirror binds the function below to the state object.\n    // Therefore, we can't access `this` and retrieve the following properties.\n    // Instead, retrieve them up front to bind them to the correct closure.\n    const uiSourceCode = this.uiSourceCode;\n    const cssModel = this.#cssModel;\n\n    return CodeMirror.autocompletion({\n      override:\n          [async(cx: CodeMirror.CompletionContext):\n               Promise<CodeMirror.CompletionResult|null> => {\n                 return await ((await specificCssCompletion(cx, uiSourceCode, cssModel)) || cssCompletionSource(cx));\n               }],\n    });\n  }\n\n  override populateTextAreaContextMenu(contextMenu: UI.ContextMenu.ContextMenu): void {\n    function addSourceMapURL(cssModel: SDK.CSSModel.CSSModel, sourceUrl: Platform.DevToolsPath.UrlString): void {\n      const dialog = AddDebugInfoURLDialog.createAddSourceMapURLDialog(sourceMapUrl => {\n        Bindings.CSSWorkspaceBinding.CSSWorkspaceBinding.instance().modelToInfo.get(cssModel)?.addSourceMap(\n            sourceUrl, sourceMapUrl);\n      });\n      dialog.show();\n    }\n\n    const cssModel = this.#cssModel;\n    const url = this.uiSourceCode.url();\n    if (this.uiSourceCode.project().type() === Workspace.Workspace.projectTypes.Network && cssModel &&\n        !Workspace.IgnoreListManager.IgnoreListManager.instance().isUserIgnoreListedURL(url)) {\n      const addSourceMapURLLabel = i18nString(UIStrings.addSourceMap);\n      contextMenu.debugSection().appendItem(\n          addSourceMapURLLabel, () => addSourceMapURL(cssModel, url), {jslogContext: 'add-source-map'});\n    }\n  }\n}\n\nconst theme = CodeMirror.EditorView.baseTheme({\n  '.cm-tooltip.cm-tooltip-swatchEdit': {\n    'box-shadow': 'var(--sys-elevation-level2)',\n    'background-color': 'var(--sys-color-base-container-elevated)',\n    'border-radius': 'var(--sys-shape-corner-extra-small)',\n  },\n});\n", "// Copyright 2016 The Chromium Authors. All rights reserved.\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\n/* eslint-disable rulesdir/no-imperative-dom-api */\n\nimport * as Common from '../../core/common/common.js';\nimport * as i18n from '../../core/i18n/i18n.js';\nimport type * as Platform from '../../core/platform/platform.js';\nimport * as SDK from '../../core/sdk/sdk.js';\nimport * as Protocol from '../../generated/protocol.js';\nimport type * as Bindings from '../../models/bindings/bindings.js';\nimport type * as BreakpointManager from '../../models/breakpoints/breakpoints.js';\nimport * as IconButton from '../../ui/components/icon_button/icon_button.js';\nimport * as UI from '../../ui/legacy/legacy.js';\nimport * as VisualLogging from '../../ui/visual_logging/visual_logging.js';\n\nimport {getLocalizedBreakpointName} from './CategorizedBreakpointL10n.js';\nimport debuggerPausedMessageStyles from './debuggerPausedMessage.css.js';\n\nconst UIStrings = {\n  /**\n   * @description Text in the JavaScript Debugging pane of the Sources pane when a DOM breakpoint is hit\n   * @example {conditional breakpoint} PH1\n   */\n  pausedOnS: 'Paused on {PH1}',\n  /**\n   * @description Text in the JavaScript Debugging pane of the Sources pane when a DOM breakpoint is hit because a child is added to the subtree\n   * @example {node} PH1\n   */\n  childSAdded: 'Child {PH1} added',\n  /**\n   * @description Text in the JavaScript Debugging pane of the Sources pane when a DOM breakpoint is hit because a descendant is added\n   * @example {node} PH1\n   */\n  descendantSAdded: 'Descendant {PH1} added',\n  /**\n   * @description Text in the JavaScript Debugging pane of the Sources pane when a DOM breakpoint is hit because a descendant is removed\n   * @example {node} PH1\n   */\n  descendantSRemoved: 'Descendant {PH1} removed',\n  /**\n   * @description Text in Debugger Paused Message of the Sources panel\n   */\n  pausedOnEventListener: 'Paused on event listener',\n  /**\n   * @description Text in Debugger Paused Message of the Sources panel\n   */\n  pausedOnXhrOrFetch: 'Paused on XHR or fetch',\n  /**\n   * @description Text in Debugger Paused Message of the Sources panel\n   */\n  pausedOnException: 'Paused on exception',\n  /**\n   * @description We pause exactly when the promise rejection is happening, so that the user can see where in the code it comes from.\n   * A Promise is a Web API object (https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise),\n   * that will either be 'fulfilled' or 'rejected' at some unknown time in the future.\n   * The subject of the term is omited but it is \"Execution\", that is, \"Execution was paused on <event>\".\n   */\n  pausedOnPromiseRejection: 'Paused on `promise` rejection',\n  /**\n   * @description Text in Debugger Paused Message of the Sources panel\n   */\n  pausedOnAssertion: 'Paused on assertion',\n  /**\n   * @description Text in Debugger Paused Message of the Sources panel\n   */\n  pausedOnDebuggedFunction: 'Paused on debugged function',\n  /**\n   * @description Text in Debugger Paused Message of the Sources panel\n   */\n  pausedBeforePotentialOutofmemory: 'Paused before potential out-of-memory crash',\n  /**\n   * @description Text in Debugger Paused Message of the Sources panel\n   */\n  pausedOnCspViolation: 'Paused on CSP violation',\n  /**\n   * @description Text in Debugger Paused Message of the Sources panel specifying cause of break\n   */\n  trustedTypeSinkViolation: '`Trusted Type` Sink Violation',\n  /**\n   * @description Text in Debugger Paused Message of the Sources panel specifying cause of break\n   */\n  trustedTypePolicyViolation: '`Trusted Type` Policy Violation',\n  /**\n   * @description Text in Debugger Paused Message of the Sources panel\n   */\n  pausedOnBreakpoint: 'Paused on breakpoint',\n  /**\n   * @description Text in Debugger Paused Message of the Sources panel\n   */\n  debuggerPaused: 'Debugger paused',\n  /**\n   * @description Text in Debugger Paused Message of the Sources panel\n   */\n  subtreeModifications: 'subtree modifications',\n  /**\n   * @description Text in Debugger Paused Message of the Sources panel\n   */\n  attributeModifications: 'attribute modifications',\n  /**\n   * @description Text in Debugger Paused Message of the Sources panel\n   */\n  nodeRemoval: 'node removal',\n  /**\n   * @description Error message text\n   * @example {Snag Error} PH1\n   */\n  webglErrorFiredS: 'WebGL Error Fired ({PH1})',\n  /**\n   * @description Text in DOMDebugger Model\n   * @example {\"script-src 'self'\"} PH1\n   */\n  scriptBlockedDueToContent: 'Script blocked due to Content Security Policy directive: {PH1}',\n} as const;\nconst str_ = i18n.i18n.registerUIStrings('panels/sources/DebuggerPausedMessage.ts', UIStrings);\nconst i18nString = i18n.i18n.getLocalizedString.bind(undefined, str_);\nconst i18nLazyString = i18n.i18n.getLazilyComputedLocalizedString.bind(undefined, str_);\n\nexport class DebuggerPausedMessage {\n  private readonly elementInternal: HTMLDivElement;\n  private contentElement: HTMLElement;\n  constructor() {\n    this.elementInternal = document.createElement('div');\n    this.elementInternal.classList.add('paused-message');\n    this.elementInternal.classList.add('flex-none');\n    this.elementInternal.setAttribute('jslog', `${VisualLogging.dialog('debugger-paused')}`);\n    const root =\n        UI.UIUtils.createShadowRootWithCoreStyles(this.elementInternal, {cssFile: debuggerPausedMessageStyles});\n    this.contentElement = root.createChild('div');\n    UI.ARIAUtils.markAsPoliteLiveRegion(this.elementInternal, false);\n  }\n\n  element(): Element {\n    return this.elementInternal;\n  }\n\n  private static descriptionWithoutStack(description: string): string {\n    const firstCallFrame = /^\\s+at\\s/m.exec(description);\n    return firstCallFrame ? description.substring(0, firstCallFrame.index - 1) :\n                            description.substring(0, description.lastIndexOf('\\n'));\n  }\n\n  private static async createDOMBreakpointHitMessage(details: SDK.DebuggerModel.DebuggerPausedDetails):\n      Promise<Element> {\n    const messageWrapper = document.createElement('span');\n    const domDebuggerModel = details.debuggerModel.target().model(SDK.DOMDebuggerModel.DOMDebuggerModel);\n    if (!details.auxData || !domDebuggerModel) {\n      return messageWrapper;\n    }\n    const data = domDebuggerModel.resolveDOMBreakpointData((details.auxData as {\n      type: Protocol.DOMDebugger.DOMBreakpointType,\n      nodeId: Protocol.DOM.NodeId,\n      targetNodeId: Protocol.DOM.NodeId,\n      insertion: boolean,\n    }));\n    if (!data) {\n      return messageWrapper;\n    }\n\n    const mainElement = messageWrapper.createChild('div', 'status-main');\n    const mainIcon = new IconButton.Icon.Icon();\n    mainIcon.data = {\n      iconName: 'info',\n      color: 'var(--sys-color-on-yellow-container)',\n      width: '16px',\n      height: '16px',\n    };\n    mainElement.appendChild(mainIcon);\n    const breakpointType = BreakpointTypeNouns.get(data.type);\n    mainElement.appendChild(document.createTextNode(\n        i18nString(UIStrings.pausedOnS, {PH1: breakpointType ? breakpointType() : String(null)})));\n\n    const subElement = messageWrapper.createChild('div', 'status-sub monospace');\n    const linkifiedNode = await Common.Linkifier.Linkifier.linkify(data.node);\n    subElement.appendChild(linkifiedNode);\n\n    if (data.targetNode) {\n      const targetNodeLink = await Common.Linkifier.Linkifier.linkify(data.targetNode);\n      let messageElement;\n      if (data.insertion) {\n        if (data.targetNode === data.node) {\n          messageElement = i18n.i18n.getFormatLocalizedString(str_, UIStrings.childSAdded, {PH1: targetNodeLink});\n        } else {\n          messageElement = i18n.i18n.getFormatLocalizedString(str_, UIStrings.descendantSAdded, {PH1: targetNodeLink});\n        }\n      } else {\n        messageElement = i18n.i18n.getFormatLocalizedString(str_, UIStrings.descendantSRemoved, {PH1: targetNodeLink});\n      }\n      subElement.appendChild(document.createElement('br'));\n      subElement.appendChild(messageElement);\n    }\n    return messageWrapper;\n  }\n\n  static #findEventNameForUi(detailsAuxData?: SDK.DebuggerModel.EventListenerPausedDetailsAuxData): string {\n    if (!detailsAuxData) {\n      return '';\n    }\n    const {eventName, webglErrorName, directiveText, targetName} = detailsAuxData;\n\n    if (eventName === 'instrumentation:webglErrorFired' && webglErrorName) {\n      // If there is a hex code of the error, display only this.\n      const errorName = webglErrorName.replace(/^.*(0x[0-9a-f]+).*$/i, '$1');\n      return i18nString(UIStrings.webglErrorFiredS, {PH1: errorName});\n    }\n    if (eventName === 'instrumentation:scriptBlockedByCSP' && directiveText) {\n      return i18nString(UIStrings.scriptBlockedDueToContent, {PH1: directiveText});\n    }\n\n    let breakpoint: SDK.CategorizedBreakpoint.CategorizedBreakpoint|null =\n        SDK.EventBreakpointsModel.EventBreakpointsManager.instance().resolveEventListenerBreakpoint(detailsAuxData);\n    if (breakpoint) {\n      // EventBreakpointsManager breakpoints are the only ones with localized names.\n      return getLocalizedBreakpointName(breakpoint.name);\n    }\n\n    breakpoint = SDK.DOMDebuggerModel.DOMDebuggerManager.instance().resolveEventListenerBreakpoint(detailsAuxData);\n    if (breakpoint && targetName) {\n      // For standard DOM event listeners we prepend the target of the event.\n      return targetName + '.' + breakpoint.name;\n    }\n    return breakpoint?.name ?? '';\n  }\n\n  async render(\n      details: SDK.DebuggerModel.DebuggerPausedDetails|null,\n      debuggerWorkspaceBinding: Bindings.DebuggerWorkspaceBinding.DebuggerWorkspaceBinding,\n      breakpointManager: BreakpointManager.BreakpointManager.BreakpointManager): Promise<void> {\n    this.contentElement.removeChildren();\n    this.contentElement.hidden = !details;\n    if (!details) {\n      return;\n    }\n\n    const status = this.contentElement.createChild('div', 'paused-status');\n\n    const errorLike = details.reason === Protocol.Debugger.PausedEventReason.Exception ||\n        details.reason === Protocol.Debugger.PausedEventReason.PromiseRejection ||\n        details.reason === Protocol.Debugger.PausedEventReason.Assert ||\n        details.reason === Protocol.Debugger.PausedEventReason.OOM;\n    let messageWrapper;\n    if (details.reason === Protocol.Debugger.PausedEventReason.DOM) {\n      messageWrapper = await DebuggerPausedMessage.createDOMBreakpointHitMessage(details);\n    } else if (details.reason === Protocol.Debugger.PausedEventReason.EventListener) {\n      const eventNameForUI = DebuggerPausedMessage.#findEventNameForUi(\n          details.auxData as SDK.DebuggerModel.EventListenerPausedDetailsAuxData);\n      messageWrapper = buildWrapper(i18nString(UIStrings.pausedOnEventListener), eventNameForUI);\n    } else if (details.reason === Protocol.Debugger.PausedEventReason.XHR) {\n      const auxData = (details.auxData as PausedDetailsAuxData);\n      messageWrapper = buildWrapper(i18nString(UIStrings.pausedOnXhrOrFetch), auxData.url || '');\n    } else if (details.reason === Protocol.Debugger.PausedEventReason.Exception) {\n      const auxData = (details.auxData as PausedDetailsAuxData);\n      const description = auxData.description || auxData.value || '';\n      const descriptionWithoutStack = DebuggerPausedMessage.descriptionWithoutStack(description);\n      messageWrapper = buildWrapper(i18nString(UIStrings.pausedOnException), descriptionWithoutStack, description);\n    } else if (details.reason === Protocol.Debugger.PausedEventReason.PromiseRejection) {\n      const auxData = (details.auxData as PausedDetailsAuxData);\n      const description = auxData.description || auxData.value || '';\n      const descriptionWithoutStack = DebuggerPausedMessage.descriptionWithoutStack(description);\n      messageWrapper =\n          buildWrapper(i18nString(UIStrings.pausedOnPromiseRejection), descriptionWithoutStack, description);\n    } else if (details.reason === Protocol.Debugger.PausedEventReason.Assert) {\n      messageWrapper = buildWrapper(i18nString(UIStrings.pausedOnAssertion));\n    } else if (details.reason === Protocol.Debugger.PausedEventReason.DebugCommand) {\n      messageWrapper = buildWrapper(i18nString(UIStrings.pausedOnDebuggedFunction));\n    } else if (details.reason === Protocol.Debugger.PausedEventReason.OOM) {\n      messageWrapper = buildWrapper(i18nString(UIStrings.pausedBeforePotentialOutofmemory));\n    } else if (\n        details.reason === Protocol.Debugger.PausedEventReason.CSPViolation && details.auxData?.['violationType']) {\n      const text = (details.auxData['violationType'] as string);\n      if (text === Protocol.DOMDebugger.CSPViolationType.TrustedtypeSinkViolation) {\n        messageWrapper =\n            buildWrapper(i18nString(UIStrings.pausedOnCspViolation), i18nString(UIStrings.trustedTypeSinkViolation));\n      } else if (text === Protocol.DOMDebugger.CSPViolationType.TrustedtypePolicyViolation) {\n        messageWrapper =\n            buildWrapper(i18nString(UIStrings.pausedOnCspViolation), i18nString(UIStrings.trustedTypePolicyViolation));\n      }\n    } else if (details.callFrames.length) {\n      const uiLocation = await debuggerWorkspaceBinding.rawLocationToUILocation(details.callFrames[0].location());\n      const breakpoint = uiLocation ? breakpointManager.findBreakpoint(uiLocation) : null;\n      const defaultText = breakpoint ? i18nString(UIStrings.pausedOnBreakpoint) : i18nString(UIStrings.debuggerPaused);\n      messageWrapper = buildWrapper(defaultText);\n    } else {\n      console.warn(\n          'ScriptsPanel paused, but callFrames.length is zero.');  // TODO remove this once we understand this case better\n    }\n\n    status.classList.toggle('error-reason', errorLike);\n    if (messageWrapper) {\n      status.appendChild(messageWrapper);\n    }\n\n    function buildWrapper(mainText: string, subText?: string, title?: string): Element {\n      const messageWrapper = document.createElement('span');\n      const mainElement = messageWrapper.createChild('div', 'status-main');\n      const mainIcon = new IconButton.Icon.Icon();\n      mainIcon.data = {\n        iconName: errorLike ? 'cross-circle-filled' : 'info',\n        color: errorLike ? 'var(--icon-error)' : 'var(--sys-color-on-yellow-container)',\n        width: '16px',\n        height: '16px',\n      };\n      mainElement.appendChild(mainIcon);\n      mainElement.appendChild(document.createTextNode(mainText));\n      if (subText) {\n        const subElement = messageWrapper.createChild('div', 'status-sub monospace');\n        subElement.textContent = subText;\n        UI.Tooltip.Tooltip.install(subElement, title || subText);\n      }\n      return messageWrapper;\n    }\n  }\n}\n\nexport const BreakpointTypeNouns = new Map([\n  [Protocol.DOMDebugger.DOMBreakpointType.SubtreeModified, i18nLazyString(UIStrings.subtreeModifications)],\n  [Protocol.DOMDebugger.DOMBreakpointType.AttributeModified, i18nLazyString(UIStrings.attributeModifications)],\n  [Protocol.DOMDebugger.DOMBreakpointType.NodeRemoved, i18nLazyString(UIStrings.nodeRemoval)],\n]);\ninterface PausedDetailsAuxData {\n  description?: string;\n  url?: Platform.DevToolsPath.UrlString;\n  value?: string;\n}\n", "// Copyright 2025 The Chromium Authors. All rights reserved.\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\n// IMPORTANT: this file is auto generated. Please do not edit this file.\n/* istanbul ignore file */\nexport default `/*\n * Copyright 2016 The Chromium Authors. All rights reserved.\n * Use of this source code is governed by a BSD-style license that can be\n * found in the LICENSE file.\n */\n\n.paused-status {\n  margin: 6px;\n  padding: 4px 10px;\n  border-radius: 10px;\n  background-color: var(--sys-color-yellow-container);\n  color: var(--sys-color-on-yellow-container);\n}\n\n.paused-status.error-reason {\n  background-color: var(--sys-color-surface-error);\n  color: var(--sys-color-on-surface-error);\n}\n\n.status-main {\n  padding-left: 18px;\n  position: relative;\n}\n\n.status-sub:not(:empty) {\n  padding-left: 15px;\n  padding-top: 5px;\n  overflow: hidden;\n  text-overflow: ellipsis;\n}\n\n.paused-status.error-reason .status-sub {\n  color: var(--sys-color-error);\n  line-height: 11px;\n  max-height: 27px;\n  user-select: text;\n}\n\ndevtools-icon {\n  position: absolute;\n  left: -1px;\n  top: -1px;\n}\n\n/*# sourceURL=${import.meta.resolve('./debuggerPausedMessage.css')} */`;", "/*\n * Copyright (C) 2011 Google Inc. All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are\n * met:\n *\n *     * Redistributions of source code must retain the above copyright\n * notice, this list of conditions and the following disclaimer.\n *     * Redistributions in binary form must reproduce the above\n * copyright notice, this list of conditions and the following disclaimer\n * in the documentation and/or other materials provided with the\n * distribution.\n *     * Neither the name of Google Inc. nor the names of its\n * contributors may be used to endorse or promote products derived from\n * this software without specific prior written permission.\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS\n * \"AS IS\" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT\n * LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR\n * A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT\n * OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,\n * SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT\n * LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,\n * DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY\n * THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE\n * OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */\n\n/* eslint-disable rulesdir/no-imperative-dom-api */\n\nimport * as Common from '../../core/common/common.js';\nimport * as Host from '../../core/host/host.js';\nimport * as i18n from '../../core/i18n/i18n.js';\nimport * as Platform from '../../core/platform/platform.js';\nimport * as SDK from '../../core/sdk/sdk.js';\nimport * as Protocol from '../../generated/protocol.js';\nimport * as Bindings from '../../models/bindings/bindings.js';\nimport * as Breakpoints from '../../models/breakpoints/breakpoints.js';\nimport * as Formatter from '../../models/formatter/formatter.js';\nimport * as SourceMapScopes from '../../models/source_map_scopes/source_map_scopes.js';\nimport * as TextUtils from '../../models/text_utils/text_utils.js';\nimport * as Workspace from '../../models/workspace/workspace.js';\nimport * as CodeMirror from '../../third_party/codemirror.next/codemirror.next.js';\nimport * as Buttons from '../../ui/components/buttons/buttons.js';\nimport * as TextEditor from '../../ui/components/text_editor/text_editor.js';\nimport * as Tooltips from '../../ui/components/tooltips/tooltips.js';\nimport * as ObjectUI from '../../ui/legacy/components/object_ui/object_ui.js';\nimport * as SourceFrame from '../../ui/legacy/components/source_frame/source_frame.js';\nimport * as UI from '../../ui/legacy/legacy.js';\nimport * as VisualLogging from '../../ui/visual_logging/visual_logging.js';\n\nimport {AddDebugInfoURLDialog} from './AddSourceMapURLDialog.js';\nimport {BreakpointEditDialog} from './BreakpointEditDialog.js';\nimport {BreakpointsSidebarController} from './BreakpointsView.js';\nimport {Plugin} from './Plugin.js';\nimport {SourcesPanel} from './SourcesPanel.js';\n\nconst {EMPTY_BREAKPOINT_CONDITION, NEVER_PAUSE_HERE_CONDITION} = Breakpoints.BreakpointManager;\n\nconst UIStrings = {\n  /**\n   * @description Text in Debugger Plugin of the Sources panel\n   */\n  thisScriptIsOnTheDebuggersIgnore: 'This script is on the debugger\\'s ignore list',\n  /**\n   * @description Text to stop preventing the debugger from stepping into library code\n   */\n  removeFromIgnoreList: 'Remove from ignore list',\n  /**\n   * @description Text of a button in the Sources panel Debugger Plugin to configure ignore listing in Settings\n   */\n  configure: 'Configure',\n  /**\n   * @description Text to add a breakpoint\n   */\n  addBreakpoint: 'Add breakpoint',\n  /**\n   * @description A context menu item in the Debugger Plugin of the Sources panel\n   */\n  addConditionalBreakpoint: 'Add conditional breakpoint…',\n  /**\n   * @description A context menu item in the Debugger Plugin of the Sources panel\n   */\n  addLogpoint: 'Add logpoint…',\n  /**\n   * @description A context menu item in the Debugger Plugin of the Sources panel\n   */\n  neverPauseHere: 'Never pause here',\n  /**\n   * @description Context menu command to delete/remove a breakpoint that the user\n   *has set. One line of code can have multiple breakpoints. Always >= 1 breakpoint.\n   */\n  removeBreakpoint: '{n, plural, =1 {Remove breakpoint} other {Remove all breakpoints in line}}',\n  /**\n   * @description A context menu item in the Debugger Plugin of the Sources panel\n   */\n  editBreakpoint: 'Edit breakpoint…',\n  /**\n   * @description Context menu command to disable (but not delete) a breakpoint\n   *that the user has set. One line of code can have multiple breakpoints. Always\n   *>= 1 breakpoint.\n   */\n  disableBreakpoint: '{n, plural, =1 {Disable breakpoint} other {Disable all breakpoints in line}}',\n  /**\n   * @description Context menu command to enable a breakpoint that the user has\n   *set. One line of code can have multiple breakpoints. Always >= 1 breakpoint.\n   */\n  enableBreakpoint: '{n, plural, =1 {Enable breakpoint} other {Enable all breakpoints in line}}',\n  /**\n   * @description Text in Debugger Plugin of the Sources panel\n   */\n  addSourceMap: 'Add source map…',\n  /**\n   * @description Text in Debugger Plugin of the Sources panel\n   */\n  addWasmDebugInfo: 'Add DWARF debug info…',\n  /**\n   * @description Text in Debugger Plugin of the Sources panel\n   */\n  sourceMapLoaded: 'Source map loaded',\n  /**\n   * @description Title of the Filtered List WidgetProvider of Quick Open\n   * @example {Ctrl+P Ctrl+O} PH1\n   */\n  associatedFilesAreAvailable: 'Associated files are available via file tree or {PH1}.',\n  /**\n   * @description Text in Debugger Plugin of the Sources panel\n   */\n  associatedFilesShouldBeAdded:\n      'Associated files should be added to the file tree. You can debug these resolved source files as regular JavaScript files.',\n  /**\n   * @description Text in Debugger Plugin of the Sources panel\n   */\n  theDebuggerWillSkipStepping: 'The debugger will skip stepping through this script, and will not stop on exceptions.',\n  /**\n   * @description Text in Debugger Plugin of the Sources panel\n   */\n  sourceMapSkipped: 'Source map skipped for this file',\n  /**\n   * @description Text in Debugger Plugin of the Sources panel\n   */\n  sourceMapFailed: 'Source map failed to load',\n  /**\n   * @description Text in Debugger Plugin of the Sources panel\n   */\n  debuggingPowerReduced: 'DevTools can\\'t show authored sources, but you can debug the deployed code.',\n  /**\n   * @description Text in Debugger Plugin of the Sources panel\n   */\n  reloadForSourceMap: 'To enable again, make sure the file isn\\'t on the ignore list and reload.',\n  /**\n   * @description Text in Debugger Plugin of the Sources panel\n   * @example {http://site.com/lib.js.map} PH1\n   * @example {HTTP error: status code 404, net::ERR_UNKNOWN_URL_SCHEME} PH2\n   */\n  errorLoading: 'Error loading url {PH1}: {PH2}',\n  /**\n   * @description Error message that is displayed in UI when a file needed for debugging information for a call frame is missing\n   * @example {src/myapp.debug.wasm.dwp} PH1\n   */\n  debugFileNotFound: 'Failed to load debug file \"{PH1}\".',\n  /**\n   * @description Error message that is displayed when no debug info could be loaded\n   * @example {app.wasm} PH1\n   */\n  debugInfoNotFound: 'Failed to load any debug info for {PH1}',\n  /**\n   * @description Text of a button to open up details on a request when no debug info could be loaded\n   */\n  showRequest: 'Show request',\n  /**\n   * @description Tooltip text that shows on hovering over a button to see more details on a request\n   */\n  openDeveloperResources: 'Opens the request in the Developer resource panel',\n} as const;\nconst str_ = i18n.i18n.registerUIStrings('panels/sources/DebuggerPlugin.ts', UIStrings);\nconst i18nString = i18n.i18n.getLocalizedString.bind(undefined, str_);\n\n// Note: Line numbers are passed around as zero-based numbers (though\n// CodeMirror numbers them from 1).\n\n// Don't scan for possible breakpoints on a line beyond this position;\nconst MAX_POSSIBLE_BREAKPOINT_LINE = 2500;\n\n// Limits on inline variable view computation.\nconst MAX_CODE_SIZE_FOR_VALUE_DECORATIONS = 10000;\nconst MAX_PROPERTIES_IN_SCOPE_FOR_VALUE_DECORATIONS = 500;\n\ninterface BreakpointDescription {\n  position: number;\n  breakpoint: Breakpoints.BreakpointManager.Breakpoint;\n}\n\ninterface BreakpointEditRequest {\n  line: CodeMirror.Line;\n  breakpoint: Breakpoints.BreakpointManager.Breakpoint|null;\n  location: {lineNumber: number, columnNumber: number}|null;\n  isLogpoint?: boolean;\n}\n\nconst debuggerPluginForUISourceCode = new Map<Workspace.UISourceCode.UISourceCode, DebuggerPlugin>();\n\nexport class DebuggerPlugin extends Plugin {\n  private editor: TextEditor.TextEditor.TextEditor|undefined = undefined;\n  // Set if the debugger is stopped on a breakpoint in this file\n  private executionLocation: Workspace.UISourceCode.UILocation|null = null;\n  // Track state of the control key because holding it makes debugger\n  // target locations show up in the editor\n  private controlDown = false;\n  private controlTimeout: number|undefined = undefined;\n  private sourceMapInfobar: UI.Infobar.Infobar|null = null;\n  private readonly scriptsPanel: SourcesPanel;\n  private readonly breakpointManager: Breakpoints.BreakpointManager.BreakpointManager;\n  // Manages pop-overs shown when the debugger is active and the user\n  // hovers over an expression\n  private popoverHelper: UI.PopoverHelper.PopoverHelper|null = null;\n  private scriptFileForDebuggerModel:\n      Map<SDK.DebuggerModel.DebuggerModel, Bindings.ResourceScriptMapping.ResourceScriptFile>;\n  // The current set of breakpoints for this file. The locations in\n  // here are kept in sync with their editor position. When a file's\n  // content is edited and later saved, these are used as a source of\n  // truth for re-creating the breakpoints.\n  private breakpoints: BreakpointDescription[] = [];\n  private continueToLocations: Array<{from: number, to: number, async: boolean, click: () => void}>|null = null;\n  private readonly liveLocationPool: Bindings.LiveLocation.LiveLocationPool;\n  // When the editor content is changed by the user, this becomes\n  // true. When the plugin is muted, breakpoints show up as disabled\n  // and can't be manipulated. It is cleared again when the content is\n  // saved.\n  private muted: boolean;\n  // If the plugin is initialized in muted state, we cannot correlated\n  // breakpoint position in the breakpoint manager with editor\n  // locations, so breakpoint manipulation is permanently disabled.\n  private initializedMuted: boolean;\n  private ignoreListInfobar: UI.Infobar.Infobar|null;\n  private refreshBreakpointsTimeout: undefined|number = undefined;\n  private activeBreakpointDialog: BreakpointEditDialog|null = null;\n  #activeBreakpointEditRequest?: BreakpointEditRequest = undefined;\n  #scheduledFinishingActiveDialog = false;\n  private missingDebugInfoBar: UI.Infobar.Infobar|null = null;\n  #sourcesPanelDebuggedMetricsRecorded = false;\n  private readonly loader: SDK.PageResourceLoader.PageResourceLoader;\n\n  private readonly ignoreListCallback: () => void;\n\n  constructor(\n      uiSourceCode: Workspace.UISourceCode.UISourceCode,\n      private readonly transformer: SourceFrame.SourceFrame.Transformer) {\n    super(uiSourceCode);\n\n    debuggerPluginForUISourceCode.set(uiSourceCode, this);\n\n    this.scriptsPanel = SourcesPanel.instance();\n    this.breakpointManager = Breakpoints.BreakpointManager.BreakpointManager.instance();\n\n    this.breakpointManager.addEventListener(\n        Breakpoints.BreakpointManager.Events.BreakpointAdded, this.breakpointChange, this);\n    this.breakpointManager.addEventListener(\n        Breakpoints.BreakpointManager.Events.BreakpointRemoved, this.breakpointChange, this);\n\n    this.uiSourceCode.addEventListener(Workspace.UISourceCode.Events.WorkingCopyChanged, this.workingCopyChanged, this);\n    this.uiSourceCode.addEventListener(\n        Workspace.UISourceCode.Events.WorkingCopyCommitted, this.workingCopyCommitted, this);\n\n    this.scriptFileForDebuggerModel = new Map();\n\n    this.loader = SDK.PageResourceLoader.PageResourceLoader.instance();\n    this.loader.addEventListener(\n        SDK.PageResourceLoader.Events.UPDATE, this.showSourceMapInfobarIfNeeded.bind(this), this);\n\n    this.ignoreListCallback = this.showIgnoreListInfobarIfNeeded.bind(this);\n    Workspace.IgnoreListManager.IgnoreListManager.instance().addChangeListener(this.ignoreListCallback);\n\n    UI.Context.Context.instance().addFlavorChangeListener(SDK.DebuggerModel.CallFrame, this.callFrameChanged, this);\n    this.liveLocationPool = new Bindings.LiveLocation.LiveLocationPool();\n\n    this.updateScriptFiles();\n\n    this.muted = this.uiSourceCode.isDirty();\n    this.initializedMuted = this.muted;\n\n    this.ignoreListInfobar = null;\n    this.showIgnoreListInfobarIfNeeded();\n    for (const scriptFile of this.scriptFileForDebuggerModel.values()) {\n      scriptFile.checkMapping();\n    }\n  }\n\n  override editorExtension(): CodeMirror.Extension {\n    // Kludge to hook editor keyboard events into the ShortcutRegistry\n    // system.\n    const handlers = this.shortcutHandlers();\n\n    return [\n      CodeMirror.EditorView.updateListener.of(update => this.onEditorUpdate(update)),\n      CodeMirror.EditorView.domEventHandlers({\n        keydown: event => {\n          if (this.onKeyDown(event)) {\n            return true;\n          }\n          handlers(event);\n          return event.defaultPrevented;\n        },\n        keyup: event => this.onKeyUp(event),\n        mousemove: event => this.onMouseMove(event),\n        mousedown: event => this.onMouseDown(event),\n        focusout: event => this.onBlur(event),\n        wheel: event => this.onWheel(event),\n      }),\n      CodeMirror.lineNumbers({\n        domEventHandlers: {\n          click: (view, block, event) => this.handleGutterClick(view.state.doc.lineAt(block.from), event as MouseEvent),\n        },\n      }),\n      breakpointMarkers,\n      TextEditor.ExecutionPositionHighlighter.positionHighlighter('cm-executionLine', 'cm-executionToken'),\n      CodeMirror.Prec.lowest(continueToMarkers.field),\n      markIfContinueTo,\n      valueDecorations.field,\n      CodeMirror.Prec.lowest(evalExpression.field),\n      theme,\n      this.uiSourceCode.project().type() === Workspace.Workspace.projectTypes.Debugger ?\n          CodeMirror.EditorView.editorAttributes.of({class: 'source-frame-debugger-script'}) :\n          [],\n    ];\n  }\n\n  private shortcutHandlers(): (event: KeyboardEvent) => void {\n    const selectionLine = (editor: TextEditor.TextEditor.TextEditor): CodeMirror.Line => {\n      return editor.state.doc.lineAt(editor.state.selection.main.head);\n    };\n\n    return UI.ShortcutRegistry.ShortcutRegistry.instance().getShortcutListener({\n      'debugger.toggle-breakpoint': async () => {\n        if (this.muted || !this.editor) {\n          return false;\n        }\n        await this.toggleBreakpoint(selectionLine(this.editor), false);\n        return true;\n      },\n      'debugger.toggle-breakpoint-enabled': async () => {\n        if (this.muted || !this.editor) {\n          return false;\n        }\n        await this.toggleBreakpoint(selectionLine(this.editor), true);\n        return true;\n      },\n      'debugger.breakpoint-input-window': async () => {\n        if (this.muted || !this.editor) {\n          return false;\n        }\n        const line = selectionLine(this.editor);\n        this.#openEditDialogForLine(line);\n        return true;\n      },\n    });\n  }\n\n  #openEditDialogForLine(line: CodeMirror.Line, isLogpoint?: boolean): void {\n    if (this.muted) {\n      return;\n    }\n    if (this.activeBreakpointDialog) {\n      this.activeBreakpointDialog.finishEditing(false, '');\n    }\n    const breakpoint = this.breakpoints.find(b => b.position >= line.from && b.position <= line.to)?.breakpoint || null;\n    if (isLogpoint === undefined && breakpoint !== null) {\n      isLogpoint = breakpoint.isLogpoint();\n    }\n    this.editBreakpointCondition({line, breakpoint, location: null, isLogpoint});\n  }\n\n  override editorInitialized(editor: TextEditor.TextEditor.TextEditor): void {\n    // Start asynchronous actions that require access to the editor\n    // instance\n    this.editor = editor;\n    computeNonBreakableLines(editor.state, this.transformer, this.uiSourceCode).then(linePositions => {\n      if (linePositions.length) {\n        editor.dispatch({effects: SourceFrame.SourceFrame.addNonBreakableLines.of(linePositions)});\n      }\n    }, console.error);\n    if (this.ignoreListInfobar) {\n      this.attachInfobar(this.ignoreListInfobar);\n    }\n    if (this.missingDebugInfoBar) {\n      this.attachInfobar(this.missingDebugInfoBar);\n    }\n    if (this.sourceMapInfobar) {\n      this.attachInfobar(this.sourceMapInfobar);\n    }\n    if (!this.muted) {\n      void this.refreshBreakpoints();\n    }\n    void this.callFrameChanged();\n\n    this.popoverHelper?.dispose();\n    this.popoverHelper =\n        new UI.PopoverHelper.PopoverHelper(editor, this.getPopoverRequest.bind(this), 'sources.object-properties');\n    this.popoverHelper.setDisableOnClick(true);\n    this.popoverHelper.setTimeout(250, 250);\n  }\n\n  static override accepts(uiSourceCode: Workspace.UISourceCode.UISourceCode): boolean {\n    return uiSourceCode.contentType().hasScripts();\n  }\n\n  private showIgnoreListInfobarIfNeeded(): void {\n    const uiSourceCode = this.uiSourceCode;\n    if (!uiSourceCode.contentType().hasScripts()) {\n      return;\n    }\n\n    if (!Workspace.IgnoreListManager.IgnoreListManager.instance().isUserOrSourceMapIgnoreListedUISourceCode(\n            uiSourceCode)) {\n      this.hideIgnoreListInfobar();\n      return;\n    }\n\n    if (this.ignoreListInfobar) {\n      this.ignoreListInfobar.dispose();\n    }\n\n    function unIgnoreList(): void {\n      Workspace.IgnoreListManager.IgnoreListManager.instance().unIgnoreListUISourceCode(uiSourceCode);\n    }\n\n    const infobar = new UI.Infobar.Infobar(\n        UI.Infobar.Type.WARNING, i18nString(UIStrings.thisScriptIsOnTheDebuggersIgnore),\n        [\n          {\n            text: i18nString(UIStrings.configure),\n            delegate:\n                UI.ViewManager.ViewManager.instance().showView.bind(UI.ViewManager.ViewManager.instance(), 'blackbox'),\n            dismiss: false,\n            jslogContext: 'configure',\n          },\n          {\n            text: i18nString(UIStrings.removeFromIgnoreList),\n            delegate: unIgnoreList,\n            buttonVariant: Buttons.Button.Variant.TONAL,\n            dismiss: true,\n            jslogContext: 'remove-from-ignore-list',\n          }\n        ],\n        undefined, 'script-on-ignore-list');\n    this.ignoreListInfobar = infobar;\n    infobar.setCloseCallback(() => this.removeInfobar(this.ignoreListInfobar));\n\n    infobar.createDetailsRowMessage(i18nString(UIStrings.theDebuggerWillSkipStepping));\n\n    this.attachInfobar(this.ignoreListInfobar);\n  }\n\n  attachInfobar(bar: UI.Infobar.Infobar): void {\n    if (this.editor) {\n      this.editor.dispatch({effects: SourceFrame.SourceFrame.addInfobar.of(bar)});\n    }\n  }\n\n  removeInfobar(bar: UI.Infobar.Infobar|null): void {\n    if (this.editor && bar) {\n      this.editor.dispatch({effects: SourceFrame.SourceFrame.removeInfobar.of(bar)});\n    }\n  }\n\n  private hideIgnoreListInfobar(): void {\n    if (!this.ignoreListInfobar) {\n      return;\n    }\n    this.ignoreListInfobar.dispose();\n    this.ignoreListInfobar = null;\n  }\n\n  override willHide(): void {\n    this.popoverHelper?.hidePopover();\n  }\n\n  editBreakpointLocation({breakpoint, uiLocation}: Breakpoints.BreakpointManager.BreakpointLocation): void {\n    const {lineNumber} = this.transformer.uiLocationToEditorLocation(uiLocation.lineNumber, uiLocation.columnNumber);\n    const line = this.editor?.state.doc.line(lineNumber + 1);\n    if (!line) {\n      return;\n    }\n    this.editBreakpointCondition({line, breakpoint, location: null, isLogpoint: breakpoint.isLogpoint()});\n  }\n\n  override populateLineGutterContextMenu(contextMenu: UI.ContextMenu.ContextMenu, editorLineNumber: number): void {\n    const uiLocation = new Workspace.UISourceCode.UILocation(this.uiSourceCode, editorLineNumber, 0);\n    this.scriptsPanel.appendUILocationItems(contextMenu, uiLocation);\n    if (this.muted || !this.editor) {\n      return;\n    }\n    const line = this.editor.state.doc.line(editorLineNumber + 1);\n    const breakpoints = this.lineBreakpoints(line);\n    const supportsConditionalBreakpoints =\n        Bindings.DebuggerWorkspaceBinding.DebuggerWorkspaceBinding.instance().supportsConditionalBreakpoints(\n            this.uiSourceCode);\n    if (!breakpoints.length) {\n      if (this.editor && SourceFrame.SourceFrame.isBreakableLine(this.editor.state, line)) {\n        contextMenu.debugSection().appendItem(\n            i18nString(UIStrings.addBreakpoint),\n            this.createNewBreakpoint.bind(\n                this, line, EMPTY_BREAKPOINT_CONDITION, /* enabled */ true, /* isLogpoint */ false),\n            {jslogContext: 'add-breakpoint'});\n        if (supportsConditionalBreakpoints) {\n          contextMenu.debugSection().appendItem(i18nString(UIStrings.addConditionalBreakpoint), () => {\n            this.editBreakpointCondition({line, breakpoint: null, location: null, isLogpoint: false});\n          }, {jslogContext: 'add-cnd-breakpoint'});\n          contextMenu.debugSection().appendItem(i18nString(UIStrings.addLogpoint), () => {\n            this.editBreakpointCondition({line, breakpoint: null, location: null, isLogpoint: true});\n          }, {jslogContext: 'add-logpoint'});\n          contextMenu.debugSection().appendItem(\n              i18nString(UIStrings.neverPauseHere),\n              this.createNewBreakpoint.bind(\n                  this, line, NEVER_PAUSE_HERE_CONDITION, /* enabled */ true, /* isLogpoint */ false),\n              {jslogContext: 'never-pause-here'});\n        }\n      }\n    } else {\n      const removeTitle = i18nString(UIStrings.removeBreakpoint, {n: breakpoints.length});\n      contextMenu.debugSection().appendItem(\n          removeTitle, () => breakpoints.forEach(breakpoint => {\n            Host.userMetrics.actionTaken(Host.UserMetrics.Action.BreakpointRemovedFromGutterContextMenu);\n            void breakpoint.remove(false);\n          }),\n          {jslogContext: 'remove-breakpoint'});\n      if (breakpoints.length === 1 && supportsConditionalBreakpoints) {\n        // Editing breakpoints only make sense for conditional breakpoints\n        // and logpoints and both are currently only available for JavaScript\n        // debugging.\n        contextMenu.debugSection().appendItem(i18nString(UIStrings.editBreakpoint), () => {\n          this.editBreakpointCondition({line, breakpoint: breakpoints[0], location: null});\n        }, {jslogContext: 'edit-breakpoint'});\n      }\n      const hasEnabled = breakpoints.some(breakpoint => breakpoint.enabled());\n      if (hasEnabled) {\n        const title = i18nString(UIStrings.disableBreakpoint, {n: breakpoints.length});\n        contextMenu.debugSection().appendItem(\n            title, () => breakpoints.forEach(breakpoint => breakpoint.setEnabled(false)),\n            {jslogContext: 'enable-breakpoint'});\n      }\n      const hasDisabled = breakpoints.some(breakpoint => !breakpoint.enabled());\n      if (hasDisabled) {\n        const title = i18nString(UIStrings.enableBreakpoint, {n: breakpoints.length});\n        contextMenu.debugSection().appendItem(\n            title, () => breakpoints.forEach(breakpoint => breakpoint.setEnabled(true)),\n            {jslogContext: 'disable-breakpoint'});\n      }\n    }\n  }\n\n  override populateTextAreaContextMenu(contextMenu: UI.ContextMenu.ContextMenu): void {\n    function addSourceMapURL(scriptFile: Bindings.ResourceScriptMapping.ResourceScriptFile): void {\n      const dialog =\n          AddDebugInfoURLDialog.createAddSourceMapURLDialog(addSourceMapURLDialogCallback.bind(null, scriptFile));\n      dialog.show();\n    }\n\n    function addSourceMapURLDialogCallback(\n        scriptFile: Bindings.ResourceScriptMapping.ResourceScriptFile, url: Platform.DevToolsPath.UrlString): void {\n      if (!url) {\n        return;\n      }\n      scriptFile.addSourceMapURL(url);\n    }\n\n    function addDebugInfoURL(\n        this: DebuggerPlugin, scriptFile: Bindings.ResourceScriptMapping.ResourceScriptFile): void {\n      const dialog =\n          AddDebugInfoURLDialog.createAddDWARFSymbolsURLDialog(addDebugInfoURLDialogCallback.bind(this, scriptFile));\n      dialog.show();\n    }\n\n    function addDebugInfoURLDialogCallback(\n        this: DebuggerPlugin, scriptFile: Bindings.ResourceScriptMapping.ResourceScriptFile,\n        url: Platform.DevToolsPath.UrlString): void {\n      if (!url) {\n        return;\n      }\n      scriptFile.addDebugInfoURL(url);\n      if (scriptFile.script?.debuggerModel) {\n        this.updateScriptFile(scriptFile.script?.debuggerModel);\n      }\n    }\n\n    if (this.uiSourceCode.project().type() === Workspace.Workspace.projectTypes.Network &&\n        Common.Settings.Settings.instance().moduleSetting('js-source-maps-enabled').get() &&\n        !Workspace.IgnoreListManager.IgnoreListManager.instance().isUserIgnoreListedURL(this.uiSourceCode.url())) {\n      if (this.scriptFileForDebuggerModel.size) {\n        const scriptFile: Bindings.ResourceScriptMapping.ResourceScriptFile =\n            this.scriptFileForDebuggerModel.values().next().value as Bindings.ResourceScriptMapping.ResourceScriptFile;\n        const addSourceMapURLLabel = i18nString(UIStrings.addSourceMap);\n        contextMenu.debugSection().appendItem(\n            addSourceMapURLLabel, addSourceMapURL.bind(null, scriptFile), {jslogContext: 'add-source-map'});\n        if (scriptFile.script?.isWasm() &&\n            !Bindings.DebuggerWorkspaceBinding.DebuggerWorkspaceBinding.instance().pluginManager.hasPluginForScript(\n                scriptFile.script)) {\n          contextMenu.debugSection().appendItem(\n              i18nString(UIStrings.addWasmDebugInfo), addDebugInfoURL.bind(this, scriptFile),\n              {jslogContext: 'add-wasm-debug-info'});\n        }\n      }\n    }\n  }\n\n  private workingCopyChanged(): void {\n    if (!this.scriptFileForDebuggerModel.size) {\n      this.setMuted(this.uiSourceCode.isDirty());\n    }\n  }\n\n  private workingCopyCommitted(): void {\n    this.scriptsPanel.updateLastModificationTime();\n    if (!this.scriptFileForDebuggerModel.size) {\n      this.setMuted(false);\n    }\n  }\n\n  private didMergeToVM(): void {\n    if (this.consistentScripts()) {\n      this.setMuted(false);\n    }\n  }\n\n  private didDivergeFromVM(): void {\n    this.setMuted(true);\n  }\n\n  private setMuted(value: boolean): void {\n    if (this.initializedMuted) {\n      return;\n    }\n    if (value !== this.muted) {\n      this.muted = value;\n      if (!value) {\n        void this.restoreBreakpointsAfterEditing();\n      } else if (this.editor) {\n        this.editor.dispatch({effects: muteBreakpoints.of(null)});\n      }\n    }\n  }\n\n  private consistentScripts(): boolean {\n    for (const scriptFile of this.scriptFileForDebuggerModel.values()) {\n      if (scriptFile.hasDivergedFromVM() || scriptFile.isMergingToVM()) {\n        return false;\n      }\n    }\n    return true;\n  }\n\n  private isIdentifier(tokenType: string): boolean {\n    return tokenType === 'VariableName' || tokenType === 'VariableDefinition' || tokenType === 'PropertyName' ||\n        tokenType === 'PropertyDefinition';\n  }\n\n  private getPopoverRequest(event: MouseEvent|KeyboardEvent): UI.PopoverHelper.PopoverRequest|null {\n    if (event instanceof KeyboardEvent) {\n      return null;\n    }\n    if (UI.KeyboardShortcut.KeyboardShortcut.eventHasCtrlEquivalentKey(event)) {\n      return null;\n    }\n    const target = UI.Context.Context.instance().flavor(SDK.Target.Target);\n    const debuggerModel = target ? target.model(SDK.DebuggerModel.DebuggerModel) : null;\n    const {editor} = this;\n    if (!debuggerModel || !debuggerModel.isPaused() || !editor) {\n      return null;\n    }\n\n    const selectedCallFrame =\n        (UI.Context.Context.instance().flavor(SDK.DebuggerModel.CallFrame) as SDK.DebuggerModel.CallFrame);\n    if (!selectedCallFrame) {\n      return null;\n    }\n\n    let textPosition = editor.editor.posAtCoords(event);\n    if (!textPosition) {\n      return null;\n    }\n    const positionCoords = editor.editor.coordsAtPos(textPosition);\n    if (!positionCoords || event.clientY < positionCoords.top || event.clientY > positionCoords.bottom ||\n        event.clientX < positionCoords.left - 30 || event.clientX > positionCoords.right + 30) {\n      return null;\n    }\n    if (event.clientX < positionCoords.left && textPosition > editor.state.doc.lineAt(textPosition).from) {\n      textPosition -= 1;\n    }\n\n    const highlightRange = computePopoverHighlightRange(editor.state, this.uiSourceCode.mimeType(), textPosition);\n    if (!highlightRange) {\n      return null;\n    }\n\n    const highlightLine = editor.state.doc.lineAt(highlightRange.from);\n    if (highlightRange.to > highlightLine.to) {\n      return null;\n    }\n\n    const leftCorner = editor.editor.coordsAtPos(highlightRange.from);\n    const rightCorner = editor.editor.coordsAtPos(highlightRange.to);\n    if (!leftCorner || !rightCorner) {\n      return null;\n    }\n    const box = new AnchorBox(\n        leftCorner.left, leftCorner.top - 2, rightCorner.right - leftCorner.left, rightCorner.bottom - leftCorner.top);\n    const evaluationText = editor.state.sliceDoc(highlightRange.from, highlightRange.to);\n\n    let objectPopoverHelper: ObjectUI.ObjectPopoverHelper.ObjectPopoverHelper|null = null;\n    return {\n      box,\n      show: async (popover: UI.GlassPane.GlassPane) => {\n        let resolvedText = '';\n        if (selectedCallFrame.script.isJavaScript()) {\n          const nameMap = await SourceMapScopes.NamesResolver.allVariablesInCallFrame(selectedCallFrame);\n          try {\n            resolvedText =\n                await Formatter.FormatterWorkerPool.formatterWorkerPool().javaScriptSubstitute(evaluationText, nameMap);\n          } catch {\n          }\n        }\n        // We use side-effect free debug-evaluate when the highlighted expression contains a\n        // function/method call. Otherwise we allow side-effects. The motiviation here are\n        // frameworks like Vue, that heavily use proxies for caching:\n        //\n        //   * We deem a simple property access of a proxy as deterministic so it should be\n        //     successful even if V8 thinks its side-effecting.\n        //   * Explicit function calls on the other hand must be side-effect free. The canonical\n        //     example is hovering over {Math.random()} which would result in a different value\n        //     each time the user hovers over it.\n        const throwOnSideEffect = highlightRange.containsSideEffects;\n        const result = await selectedCallFrame.evaluate({\n          expression: resolvedText || evaluationText,\n          objectGroup: 'popover',\n          includeCommandLineAPI: false,\n          silent: true,\n          returnByValue: false,\n          generatePreview: false,\n          throwOnSideEffect,\n          timeout: undefined,\n          disableBreaks: undefined,\n          replMode: undefined,\n          allowUnsafeEvalBlockedByCSP: undefined,\n        });\n        if (!result || 'error' in result || !result.object ||\n            (result.object.type === 'object' && result.object.subtype === 'error')) {\n          return false;\n        }\n        objectPopoverHelper =\n            await ObjectUI.ObjectPopoverHelper.ObjectPopoverHelper.buildObjectPopover(result.object, popover);\n        const potentiallyUpdatedCallFrame = UI.Context.Context.instance().flavor(SDK.DebuggerModel.CallFrame);\n        if (!objectPopoverHelper || selectedCallFrame !== potentiallyUpdatedCallFrame) {\n          debuggerModel.runtimeModel().releaseObjectGroup('popover');\n          if (objectPopoverHelper) {\n            objectPopoverHelper.dispose();\n          }\n          return false;\n        }\n        const decoration = CodeMirror.Decoration.set(evalExpressionMark.range(highlightRange.from, highlightRange.to));\n        editor.dispatch({effects: evalExpression.update.of(decoration)});\n        return true;\n      },\n      hide: () => {\n        if (objectPopoverHelper) {\n          objectPopoverHelper.dispose();\n        }\n        debuggerModel.runtimeModel().releaseObjectGroup('popover');\n        editor.dispatch({effects: evalExpression.update.of(CodeMirror.Decoration.none)});\n      },\n    };\n  }\n\n  private onEditorUpdate(update: CodeMirror.ViewUpdate): void {\n    if (!update.changes.empty) {\n      // If the document changed, adjust known breakpoint positions\n      // for that change\n      for (const breakpointDesc of this.breakpoints) {\n        breakpointDesc.position = update.changes.mapPos(breakpointDesc.position);\n      }\n    }\n  }\n\n  private onWheel(event: WheelEvent): void {\n    if (this.executionLocation && UI.KeyboardShortcut.KeyboardShortcut.eventHasCtrlEquivalentKey(event)) {\n      event.preventDefault();\n    }\n  }\n\n  private onKeyDown(event: KeyboardEvent): boolean {\n    const ctrlDown = UI.KeyboardShortcut.KeyboardShortcut.eventHasCtrlEquivalentKey(event);\n    if (!ctrlDown) {\n      this.setControlDown(false);\n    }\n    if (event.key === Platform.KeyboardUtilities.ESCAPE_KEY) {\n      if (this.popoverHelper?.isPopoverVisible()) {\n        this.popoverHelper.hidePopover();\n        event.consume();\n        return true;\n      }\n    }\n    if (ctrlDown && this.executionLocation) {\n      this.setControlDown(true);\n    }\n    return false;\n  }\n\n  private onMouseMove(event: MouseEvent): void {\n    if (this.executionLocation && this.controlDown &&\n        UI.KeyboardShortcut.KeyboardShortcut.eventHasCtrlEquivalentKey(event)) {\n      if (!this.continueToLocations) {\n        void this.showContinueToLocations();\n      }\n    }\n  }\n\n  private onMouseDown(event: MouseEvent): void {\n    if (!this.executionLocation || !UI.KeyboardShortcut.KeyboardShortcut.eventHasCtrlEquivalentKey(event)) {\n      return;\n    }\n    if (!this.continueToLocations || !this.editor) {\n      return;\n    }\n    event.consume();\n    const textPosition = this.editor.editor.posAtCoords(event);\n    if (textPosition === null) {\n      return;\n    }\n    for (const {from, to, click} of this.continueToLocations) {\n      if (from <= textPosition && to >= textPosition) {\n        click();\n        break;\n      }\n    }\n  }\n\n  private onBlur(_event: Event): void {\n    this.setControlDown(false);\n  }\n\n  private onKeyUp(_event: KeyboardEvent): void {\n    this.setControlDown(false);\n  }\n\n  private setControlDown(state: boolean): void {\n    if (state !== this.controlDown) {\n      this.controlDown = state;\n      clearTimeout(this.controlTimeout);\n      this.controlTimeout = undefined;\n      if (state && this.executionLocation) {\n        this.controlTimeout = window.setTimeout(() => {\n          if (this.executionLocation && this.controlDown) {\n            void this.showContinueToLocations();\n          }\n        }, 150);\n      } else {\n        this.clearContinueToLocations();\n      }\n    }\n  }\n\n  private editBreakpointCondition(breakpointEditRequest: BreakpointEditRequest): void {\n    const {line, breakpoint, location, isLogpoint} = breakpointEditRequest;\n    if (breakpoint?.isRemoved) {\n      // This method can get called for stale breakpoints, e.g. via the revealer.\n      // In that case we don't show the edit dialog as to not resurrect the breakpoint\n      // unintentionally.\n      return;\n    }\n\n    this.#scheduledFinishingActiveDialog = false;\n    const isRepeatedEditRequest = this.#activeBreakpointEditRequest &&\n        isSameEditRequest(this.#activeBreakpointEditRequest, breakpointEditRequest);\n    if (isRepeatedEditRequest) {\n      // Do not re-show the same edit dialog, instead use the already open one.\n      return;\n    }\n\n    if (this.activeBreakpointDialog) {\n      // If this a request to edit a different dialog, make sure to close the current active one\n      // to avoid showing two dialogs at the same time.\n      this.activeBreakpointDialog.saveAndFinish();\n    }\n\n    const editor = this.editor as TextEditor.TextEditor.TextEditor;\n    const oldCondition = breakpoint ? breakpoint.condition() : '';\n    const isLogpointForDialog = breakpoint?.isLogpoint() ?? Boolean(isLogpoint);\n    const decorationElement = document.createElement('div');\n    const compartment = new CodeMirror.Compartment();\n    const dialog = new BreakpointEditDialog(line.number - 1, oldCondition, isLogpointForDialog, async result => {\n      this.activeBreakpointDialog = null;\n      this.#activeBreakpointEditRequest = undefined;\n      dialog.detach();\n      editor.dispatch({effects: compartment.reconfigure([])});\n      if (!result.committed) {\n        BreakpointsSidebarController.instance().breakpointEditFinished(breakpoint, false);\n        return;\n      }\n      BreakpointsSidebarController.instance().breakpointEditFinished(breakpoint, oldCondition !== result.condition);\n      if (breakpoint) {\n        breakpoint.setCondition(result.condition, result.isLogpoint);\n      } else if (location) {\n        await this.setBreakpoint(\n            location.lineNumber, location.columnNumber, result.condition, /* enabled */ true, result.isLogpoint);\n      } else {\n        await this.createNewBreakpoint(line, result.condition, /* enabled */ true, result.isLogpoint);\n      }\n    });\n    editor.dispatch({\n      effects: CodeMirror.StateEffect.appendConfig.of(compartment.of(CodeMirror.EditorView.decorations.of(\n          CodeMirror.Decoration.set([CodeMirror.Decoration\n                                         .widget({\n                                           block: true, widget: new class extends CodeMirror.WidgetType {\n                                             toDOM(): HTMLElement {\n                                               return decorationElement;\n                                             }\n                                           }(),\n                                                                                  side: 1,\n                                         })\n                                         .range(line.to)])))),\n    });\n    dialog.element.addEventListener('blur', async event => {\n      if (!event.relatedTarget ||\n          (event.relatedTarget && !(event.relatedTarget as Node).isSelfOrDescendant(dialog.element))) {\n        this.#scheduledFinishingActiveDialog = true;\n        // Debounce repeated clicks on opening the edit dialog. Wait for a short amount of time\n        // in order to see whether we get a request to open the exact same dialog again.\n        setTimeout(() => {\n          if (this.activeBreakpointDialog === dialog) {\n            if (this.#scheduledFinishingActiveDialog) {\n              dialog.saveAndFinish();\n              this.#scheduledFinishingActiveDialog = false;\n            } else {\n              dialog.focusEditor();\n            }\n          }\n        }, 200);\n      }\n    }, true);\n\n    dialog.markAsExternallyManaged();\n    dialog.show(decorationElement);\n    dialog.focusEditor();\n    this.activeBreakpointDialog = dialog;\n    this.#activeBreakpointEditRequest = breakpointEditRequest;\n\n    function isSameEditRequest(editA: BreakpointEditRequest, editB: BreakpointEditRequest): boolean {\n      if (editA.line.number !== editB.line.number) {\n        return false;\n      }\n      if (editA.line.from !== editB.line.from) {\n        return false;\n      }\n      if (editA.line.text !== editB.line.text) {\n        return false;\n      }\n      if (editA.breakpoint !== editB.breakpoint) {\n        return false;\n      }\n      if (editA.location !== editB.location) {\n        return false;\n      }\n      return editA.isLogpoint === editB.isLogpoint;\n    }\n  }\n\n  // Show widgets with variable's values after lines that mention the\n  // variables, if the debugger is paused in this file.\n  private async updateValueDecorations(): Promise<void> {\n    if (!this.editor) {\n      return;\n    }\n    const decorations = this.executionLocation ? await this.computeValueDecorations() : null;\n    // After the `await` the DebuggerPlugin could have been disposed. Re-check `this.editor`.\n    if (!this.editor) {\n      return;\n    }\n    if (decorations || this.editor.state.field(valueDecorations.field).size) {\n      this.editor.dispatch({effects: valueDecorations.update.of(decorations || CodeMirror.Decoration.none)});\n    }\n  }\n\n  async #rawLocationToEditorOffset(location: SDK.DebuggerModel.Location|null, url: Platform.DevToolsPath.UrlString):\n      Promise<number|null> {\n    const uiLocation = location &&\n        await Bindings.DebuggerWorkspaceBinding.DebuggerWorkspaceBinding.instance().rawLocationToUILocation(location);\n    if (!uiLocation || uiLocation.uiSourceCode.url() !== url) {\n      return null;\n    }\n    const offset = this.editor?.toOffset(\n        this.transformer.uiLocationToEditorLocation(uiLocation.lineNumber, uiLocation.columnNumber));\n    return offset ?? null;\n  }\n\n  private async computeValueDecorations(): Promise<CodeMirror.DecorationSet|null> {\n    if (!this.editor) {\n      return null;\n    }\n    if (!Common.Settings.Settings.instance().moduleSetting('inline-variable-values').get()) {\n      return null;\n    }\n    const executionContext = UI.Context.Context.instance().flavor(SDK.RuntimeModel.ExecutionContext);\n    if (!executionContext) {\n      return null;\n    }\n    const callFrame = UI.Context.Context.instance().flavor(SDK.DebuggerModel.CallFrame);\n    if (!callFrame) {\n      return null;\n    }\n    const url = this.uiSourceCode.url();\n\n    const rawLocationToEditorOffset: (location: SDK.DebuggerModel.Location|null) => Promise<number|null> = location =>\n        this.#rawLocationToEditorOffset(location, url);\n\n    const functionOffsetPromise = this.#rawLocationToEditorOffset(callFrame.functionLocation(), url);\n    const executionOffsetPromise = this.#rawLocationToEditorOffset(callFrame.location(), url);\n    const [functionOffset, executionOffset] = await Promise.all([functionOffsetPromise, executionOffsetPromise]);\n    if (!functionOffset || !executionOffset || !this.editor) {\n      return null;\n    }\n\n    if (functionOffset >= executionOffset || executionOffset - functionOffset > MAX_CODE_SIZE_FOR_VALUE_DECORATIONS) {\n      return null;\n    }\n\n    while (CodeMirror.syntaxParserRunning(this.editor.editor)) {\n      await new Promise(resolve => window.requestIdleCallback(resolve));\n      // After the `await` the DebuggerPlugin could have been disposed. Re-check `this.editor`.\n      if (!this.editor) {\n        return null;\n      }\n      CodeMirror.ensureSyntaxTree(this.editor.state, executionOffset, 16);\n    }\n\n    const variableNames = getVariableNamesByLine(this.editor.state, functionOffset, executionOffset, executionOffset);\n    if (variableNames.length === 0) {\n      return null;\n    }\n\n    const scopeMappings = await computeScopeMappings(callFrame, rawLocationToEditorOffset);\n    // After the `await` the DebuggerPlugin could have been disposed. Re-check `this.editor`.\n    if (!this.editor || scopeMappings.length === 0) {\n      return null;\n    }\n\n    const variablesByLine = getVariableValuesByLine(scopeMappings, variableNames);\n    if (!variablesByLine || !this.editor) {\n      return null;\n    }\n\n    const decorations: Array<CodeMirror.Range<CodeMirror.Decoration>> = [];\n\n    for (const [line, names] of variablesByLine) {\n      const prevLine = variablesByLine.get(line - 1);\n      let newNames = prevLine ? Array.from(names).filter(n => prevLine.get(n[0]) !== n[1]) : Array.from(names);\n      if (!newNames.length) {\n        continue;\n      }\n      if (newNames.length > 10) {\n        newNames = newNames.slice(0, 10);\n      }\n      decorations.push(CodeMirror.Decoration.widget({widget: new ValueDecoration(newNames), side: 1})\n                           .range(this.editor.state.doc.line(line + 1).to));\n    }\n    return CodeMirror.Decoration.set(decorations, true);\n  }\n\n  // Highlight the locations the debugger can continue to (when\n  // Control is held)\n  private async showContinueToLocations(): Promise<void> {\n    this.popoverHelper?.hidePopover();\n    const executionContext = UI.Context.Context.instance().flavor(SDK.RuntimeModel.ExecutionContext);\n    if (!executionContext || !this.editor) {\n      return;\n    }\n    const callFrame = UI.Context.Context.instance().flavor(SDK.DebuggerModel.CallFrame);\n    if (!callFrame) {\n      return;\n    }\n    const start = callFrame.functionLocation() || callFrame.location();\n    const debuggerModel = callFrame.debuggerModel;\n\n    const {state} = this.editor;\n    const locations = await debuggerModel.getPossibleBreakpoints(start, null, true);\n\n    this.continueToLocations = [];\n    let previousCallLine = -1;\n    for (const location of locations.reverse()) {\n      const editorLocation = this.transformer.uiLocationToEditorLocation(location.lineNumber, location.columnNumber);\n      if (previousCallLine === editorLocation.lineNumber &&\n              location.type !== Protocol.Debugger.BreakLocationType.Call ||\n          editorLocation.lineNumber >= state.doc.lines) {\n        continue;\n      }\n      const line = state.doc.line(editorLocation.lineNumber + 1);\n      const position = Math.min(line.to, line.from + editorLocation.columnNumber);\n      let syntaxNode = CodeMirror.syntaxTree(state).resolveInner(position, 1);\n      if (syntaxNode.firstChild || syntaxNode.from < line.from ||\n          syntaxNode.to > line.to) {  // Only use leaf nodes within the line\n        continue;\n      }\n      if (syntaxNode.name === '.') {\n        const nextNode = syntaxNode.resolve(syntaxNode.to, 1);\n        if (nextNode.firstChild || nextNode.from < line.from || nextNode.to > line.to) {\n          continue;\n        }\n        syntaxNode = nextNode;\n      }\n      const syntaxType = syntaxNode.name;\n      const validKeyword = syntaxType === 'this' || syntaxType === 'return' || syntaxType === 'new' ||\n          syntaxType === 'break' || syntaxType === 'continue';\n      if (!validKeyword && !this.isIdentifier(syntaxType)) {\n        continue;\n      }\n\n      this.continueToLocations.push(\n          {from: syntaxNode.from, to: syntaxNode.to, async: false, click: () => location.continueToLocation()});\n      if (location.type === Protocol.Debugger.BreakLocationType.Call) {\n        previousCallLine = editorLocation.lineNumber;\n      }\n\n      const identifierName =\n          validKeyword ? '' : line.text.slice(syntaxNode.from - line.from, syntaxNode.to - line.from);\n      let asyncCall: CodeMirror.SyntaxNode|null = null;\n      if (identifierName === 'then' && syntaxNode.parent?.name === 'MemberExpression') {\n        asyncCall = syntaxNode.parent.parent;\n      } else if (\n          identifierName === 'setTimeout' || identifierName === 'setInterval' || identifierName === 'postMessage') {\n        asyncCall = syntaxNode.parent;\n      }\n      if (syntaxType === 'new') {\n        const callee = syntaxNode.parent?.getChild('Expression');\n        if (callee && callee.name === 'VariableName' && state.sliceDoc(callee.from, callee.to) === 'Worker') {\n          asyncCall = syntaxNode.parent;\n        }\n      }\n      if (asyncCall && (asyncCall.name === 'CallExpression' || asyncCall.name === 'NewExpression') &&\n          location.type === Protocol.Debugger.BreakLocationType.Call) {\n        const firstArg = asyncCall.getChild('ArgList')?.firstChild?.nextSibling;\n        let highlightNode;\n        if (firstArg?.name === 'VariableName') {\n          highlightNode = firstArg;\n        } else if (firstArg?.name === 'ArrowFunction' || firstArg?.name === 'FunctionExpression') {\n          highlightNode = firstArg.firstChild;\n          if (highlightNode?.name === 'async') {\n            highlightNode = highlightNode.nextSibling;\n          }\n        }\n        if (highlightNode) {\n          const isCurrentPosition = this.executionLocation &&\n              location.lineNumber === this.executionLocation.lineNumber &&\n              location.columnNumber === this.executionLocation.columnNumber;\n          this.continueToLocations.push({\n            from: highlightNode.from,\n            to: highlightNode.to,\n            async: true,\n            click: () => this.asyncStepIn(location, Boolean(isCurrentPosition)),\n          });\n        }\n      }\n    }\n    const decorations = CodeMirror.Decoration.set(\n        this.continueToLocations.map(loc => {\n          return (loc.async ? asyncContinueToMark : continueToMark).range(loc.from, loc.to);\n        }),\n        true);\n    this.editor.dispatch({effects: continueToMarkers.update.of(decorations)});\n  }\n\n  private clearContinueToLocations(): void {\n    if (this.editor?.state.field(continueToMarkers.field).size) {\n      this.editor.dispatch({effects: continueToMarkers.update.of(CodeMirror.Decoration.none)});\n    }\n  }\n\n  private asyncStepIn(location: SDK.DebuggerModel.BreakLocation, isCurrentPosition: boolean): void {\n    if (!isCurrentPosition) {\n      location.continueToLocation(asyncStepIn);\n    } else {\n      asyncStepIn();\n    }\n\n    function asyncStepIn(): void {\n      location.debuggerModel.scheduleStepIntoAsync();\n    }\n  }\n\n  private fetchBreakpoints(): Array<{\n    position: number,\n    breakpoint: Breakpoints.BreakpointManager.Breakpoint,\n  }> {\n    if (!this.editor) {\n      return [];\n    }\n    const {editor} = this;\n    const breakpointLocations = this.breakpointManager.breakpointLocationsForUISourceCode(this.uiSourceCode);\n    return breakpointLocations.map(({uiLocation, breakpoint}) => {\n      const editorLocation =\n          this.transformer.uiLocationToEditorLocation(uiLocation.lineNumber, uiLocation.columnNumber);\n      return {\n        position: editor.toOffset(editorLocation),\n        breakpoint,\n      };\n    });\n  }\n\n  private lineBreakpoints(line: CodeMirror.Line): readonly Breakpoints.BreakpointManager.Breakpoint[] {\n    return this.breakpoints.filter(b => b.position >= line.from && b.position <= line.to).map(b => b.breakpoint);\n  }\n\n  private async linePossibleBreakpoints(line: CodeMirror.Line): Promise<Workspace.UISourceCode.UILocation[]> {\n    const start = this.transformer.editorLocationToUILocation(line.number - 1, 0);\n    const end = this.transformer.editorLocationToUILocation(\n        line.number - 1, Math.min(line.length, MAX_POSSIBLE_BREAKPOINT_LINE));\n    const range = new TextUtils.TextRange.TextRange(\n        start.lineNumber, start.columnNumber || 0, end.lineNumber, end.columnNumber || 0);\n    return await this.breakpointManager.possibleBreakpoints(this.uiSourceCode, range);\n  }\n\n  // Compute the decorations for existing breakpoints (both on the\n  // gutter and inline in the code)\n  private async computeBreakpointDecoration(state: CodeMirror.EditorState, breakpoints: BreakpointDescription[]):\n      Promise<BreakpointDecoration> {\n    const decorations: Array<CodeMirror.Range<CodeMirror.Decoration>> = [];\n    const gutterMarkers: Array<CodeMirror.Range<CodeMirror.GutterMarker>> = [];\n    const breakpointsByLine = new Map<number, Breakpoints.BreakpointManager.Breakpoint[]>();\n    const inlineMarkersByLine =\n        new Map<number, Array<{breakpoint: Breakpoints.BreakpointManager.Breakpoint | null, column: number}>>();\n    const possibleBreakpointRequests: Array<Promise<void>> = [];\n    const inlineMarkerPositions = new Set<number>();\n\n    const addInlineMarker =\n        (linePos: number, columnNumber: number, breakpoint: Breakpoints.BreakpointManager.Breakpoint|null): void => {\n          let inlineMarkers = inlineMarkersByLine.get(linePos);\n          if (!inlineMarkers) {\n            inlineMarkers = [];\n            inlineMarkersByLine.set(linePos, inlineMarkers);\n          }\n          inlineMarkers.push({breakpoint, column: columnNumber});\n        };\n\n    for (const {position, breakpoint} of breakpoints) {\n      const line = state.doc.lineAt(position);\n      let forThisLine = breakpointsByLine.get(line.from);\n      if (!forThisLine) {\n        forThisLine = [];\n        breakpointsByLine.set(line.from, forThisLine);\n      }\n      if (breakpoint.enabled() && forThisLine.every(b => !b.enabled())) {\n        // Start a request for possible breakpoint positions on this line\n        possibleBreakpointRequests.push(\n            this.linePossibleBreakpoints(line).then(locations => addPossibleBreakpoints(line, locations)));\n      }\n      forThisLine.push(breakpoint);\n      if (breakpoint.enabled()) {\n        inlineMarkerPositions.add(position);\n        addInlineMarker(line.from, position - line.from, breakpoint);\n      }\n    }\n\n    for (const [lineStart, lineBreakpoints] of breakpointsByLine) {\n      const main = lineBreakpoints.sort(mostSpecificBreakpoint)[0];\n      let gutterClass = 'cm-breakpoint';\n      if (!main.enabled()) {\n        gutterClass += ' cm-breakpoint-disabled';\n      }\n      if (!main.bound()) {\n        gutterClass += ' cm-breakpoint-unbound';\n      }\n      if (main.isLogpoint()) {\n        gutterClass += ' cm-breakpoint-logpoint';\n      } else if (main.condition()) {\n        gutterClass += ' cm-breakpoint-conditional';\n      }\n      gutterMarkers.push((new BreakpointGutterMarker(gutterClass, lineStart, main.condition())).range(lineStart));\n    }\n\n    const addPossibleBreakpoints = (line: CodeMirror.Line, locations: Workspace.UISourceCode.UILocation[]): void => {\n      for (const location of locations) {\n        const editorLocation = this.transformer.uiLocationToEditorLocation(location.lineNumber, location.columnNumber);\n        if (editorLocation.lineNumber !== line.number - 1) {\n          continue;\n        }\n        const position = Math.min(line.to, line.from + editorLocation.columnNumber);\n        if (!inlineMarkerPositions.has(position)) {\n          addInlineMarker(line.from, editorLocation.columnNumber, null);\n        }\n      }\n    };\n\n    await Promise.all(possibleBreakpointRequests);\n    for (const [linePos, inlineMarkers] of inlineMarkersByLine) {\n      if (inlineMarkers.length > 1) {\n        for (const {column, breakpoint} of inlineMarkers) {\n          const marker = new BreakpointInlineMarker(breakpoint, this);\n          decorations.push(CodeMirror.Decoration.widget({widget: marker, side: -1}).range(linePos + column));\n        }\n      }\n    }\n\n    return {content: CodeMirror.Decoration.set(decorations, true), gutter: CodeMirror.RangeSet.of(gutterMarkers, true)};\n  }\n\n  // If, after editing, the editor is synced again (either by going\n  // back to the original document or by saving), we replace any\n  // breakpoints the breakpoint manager might have (which point into\n  // the old file) with the breakpoints we have, which had their\n  // positions tracked through the changes.\n  private async restoreBreakpointsAfterEditing(): Promise<void> {\n    const {breakpoints} = this;\n    const editor = this.editor as TextEditor.TextEditor.TextEditor;\n    this.breakpoints = [];\n    await Promise.all(breakpoints.map(async description => {\n      const {breakpoint, position} = description;\n      const condition = breakpoint.condition(), enabled = breakpoint.enabled(), isLogpoint = breakpoint.isLogpoint();\n      await breakpoint.remove(false);\n      const editorLocation = editor.toLineColumn(position);\n      const uiLocation =\n          this.transformer.editorLocationToUILocation(editorLocation.lineNumber, editorLocation.columnNumber);\n      await this.setBreakpoint(uiLocation.lineNumber, uiLocation.columnNumber, condition, enabled, isLogpoint);\n    }));\n  }\n\n  private async refreshBreakpoints(): Promise<void> {\n    if (this.editor) {\n      this.breakpoints = this.fetchBreakpoints();\n      const forBreakpoints = this.breakpoints;\n      const decorations = await this.computeBreakpointDecoration(this.editor.state, forBreakpoints);\n      // After the `await` we could have disposed of this DebuggerPlugin, so re-check `this.editor`.\n      if (this.editor && this.breakpoints === forBreakpoints &&\n          (decorations.gutter.size || this.editor.state.field(breakpointMarkers, false)?.gutter.size)) {\n        this.editor.dispatch({effects: setBreakpointDeco.of(decorations)});\n      }\n    }\n  }\n\n  private breakpointChange(\n      event: Common.EventTarget.EventTargetEvent<Breakpoints.BreakpointManager.BreakpointLocation>): void {\n    const {uiLocation} = event.data;\n    if (uiLocation.uiSourceCode !== this.uiSourceCode || this.muted) {\n      return;\n    }\n    for (const scriptFile of this.scriptFileForDebuggerModel.values()) {\n      if (scriptFile.isDivergingFromVM() || scriptFile.isMergingToVM()) {\n        return;\n      }\n    }\n    // These tend to arrive in bursts, so debounce them\n    window.clearTimeout(this.refreshBreakpointsTimeout);\n    this.refreshBreakpointsTimeout = window.setTimeout(() => this.refreshBreakpoints(), 50);\n  }\n\n  onInlineBreakpointMarkerClick(event: MouseEvent, breakpoint: Breakpoints.BreakpointManager.Breakpoint|null): void {\n    event.consume(true);\n    if (breakpoint) {\n      if (event.shiftKey) {\n        breakpoint.setEnabled(!breakpoint.enabled());\n      } else {\n        void breakpoint.remove(false);\n      }\n    } else if (this.editor) {\n      const editorLocation = this.editor.editor.posAtDOM(event.target as unknown as HTMLElement);\n      const line = this.editor.state.doc.lineAt(editorLocation);\n      const uiLocation = this.transformer.editorLocationToUILocation(line.number - 1, editorLocation - line.from);\n      void this.setBreakpoint(\n          uiLocation.lineNumber, uiLocation.columnNumber, EMPTY_BREAKPOINT_CONDITION, /* enabled */ true,\n          /* isLogpoint */ false);\n    }\n  }\n\n  onInlineBreakpointMarkerContextMenu(event: MouseEvent, breakpoint: Breakpoints.BreakpointManager.Breakpoint|null):\n      void {\n    event.consume(true);\n    // If there's events coming from the editor, there must be an editor.\n    const editor = this.editor as TextEditor.TextEditor.TextEditor;\n    const position = editor.editor.posAtDOM(event.target as unknown as HTMLElement);\n    const line = editor.state.doc.lineAt(position);\n    if (!SourceFrame.SourceFrame.isBreakableLine(editor.state, line) ||\n        // Editing breakpoints only make sense for conditional breakpoints\n        // and logpoints.\n        !Bindings.DebuggerWorkspaceBinding.DebuggerWorkspaceBinding.instance().supportsConditionalBreakpoints(\n            this.uiSourceCode)) {\n      return;\n    }\n    const contextMenu = new UI.ContextMenu.ContextMenu(event);\n    if (breakpoint) {\n      contextMenu.debugSection().appendItem(i18nString(UIStrings.editBreakpoint), () => {\n        this.editBreakpointCondition({line, breakpoint, location: null});\n      }, {jslogContext: 'edit-breakpoint'});\n    } else {\n      const uiLocation = this.transformer.editorLocationToUILocation(line.number - 1, position - line.from);\n      contextMenu.debugSection().appendItem(i18nString(UIStrings.addConditionalBreakpoint), () => {\n        this.editBreakpointCondition({line, breakpoint: null, location: uiLocation, isLogpoint: false});\n      }, {jslogContext: 'add-cnd-breakpoint'});\n      contextMenu.debugSection().appendItem(i18nString(UIStrings.addLogpoint), () => {\n        this.editBreakpointCondition({line, breakpoint: null, location: uiLocation, isLogpoint: true});\n      }, {jslogContext: 'add-logpoint'});\n      contextMenu.debugSection().appendItem(\n          i18nString(UIStrings.neverPauseHere),\n          () => this.setBreakpoint(\n              uiLocation.lineNumber, uiLocation.columnNumber, NEVER_PAUSE_HERE_CONDITION, /* enabled */ true,\n              /* isLogpoint */ false),\n          {jslogContext: 'never-pause-here'});\n    }\n    void contextMenu.show();\n  }\n\n  private updateScriptFiles(): void {\n    for (const debuggerModel of SDK.TargetManager.TargetManager.instance().models(SDK.DebuggerModel.DebuggerModel)) {\n      const scriptFile = Bindings.DebuggerWorkspaceBinding.DebuggerWorkspaceBinding.instance().scriptFile(\n          this.uiSourceCode, debuggerModel);\n      if (scriptFile) {\n        this.updateScriptFile(debuggerModel);\n      }\n    }\n    this.showSourceMapInfobarIfNeeded();\n  }\n\n  private updateScriptFile(debuggerModel: SDK.DebuggerModel.DebuggerModel): void {\n    const oldScriptFile = this.scriptFileForDebuggerModel.get(debuggerModel);\n    const newScriptFile = Bindings.DebuggerWorkspaceBinding.DebuggerWorkspaceBinding.instance().scriptFile(\n        this.uiSourceCode, debuggerModel);\n    this.scriptFileForDebuggerModel.delete(debuggerModel);\n    if (oldScriptFile) {\n      oldScriptFile.removeEventListener(\n          Bindings.ResourceScriptMapping.ResourceScriptFile.Events.DID_MERGE_TO_VM, this.didMergeToVM, this);\n      oldScriptFile.removeEventListener(\n          Bindings.ResourceScriptMapping.ResourceScriptFile.Events.DID_DIVERGE_FROM_VM, this.didDivergeFromVM, this);\n      if (this.muted && !this.uiSourceCode.isDirty() && this.consistentScripts()) {\n        this.setMuted(false);\n      }\n    }\n    if (!newScriptFile) {\n      return;\n    }\n    this.scriptFileForDebuggerModel.set(debuggerModel, newScriptFile);\n    newScriptFile.addEventListener(\n        Bindings.ResourceScriptMapping.ResourceScriptFile.Events.DID_MERGE_TO_VM, this.didMergeToVM, this);\n    newScriptFile.addEventListener(\n        Bindings.ResourceScriptMapping.ResourceScriptFile.Events.DID_DIVERGE_FROM_VM, this.didDivergeFromVM, this);\n    newScriptFile.checkMapping();\n\n    void newScriptFile.missingSymbolFiles().then(resources => {\n      if (resources) {\n        const details = i18nString(UIStrings.debugInfoNotFound, {PH1: newScriptFile.uiSourceCode.url()});\n        this.updateMissingDebugInfoInfobar({resources, details});\n      } else {\n        this.updateMissingDebugInfoInfobar(null);\n      }\n    });\n  }\n\n  private updateMissingDebugInfoInfobar(warning: SDK.DebuggerModel.MissingDebugInfoDetails|null): void {\n    if (this.missingDebugInfoBar) {\n      return;\n    }\n    if (warning === null) {\n      this.removeInfobar(this.missingDebugInfoBar);\n      this.missingDebugInfoBar = null;\n      return;\n    }\n    this.missingDebugInfoBar =\n        UI.Infobar.Infobar.create(UI.Infobar.Type.ERROR, warning.details, [], undefined, 'missing-debug-info');\n    if (!this.missingDebugInfoBar) {\n      return;\n    }\n    for (const resource of warning.resources) {\n      const detailsRow = this.missingDebugInfoBar?.createDetailsRowMessage(\n          i18nString(UIStrings.debugFileNotFound, {PH1: Common.ParsedURL.ParsedURL.extractName(resource.resourceUrl)}));\n      if (detailsRow) {\n        const pageResourceKey =\n            SDK.PageResourceLoader.PageResourceLoader.makeExtensionKey(resource.resourceUrl, resource.initiator);\n        if (SDK.PageResourceLoader.PageResourceLoader.instance().getResourcesLoaded().get(pageResourceKey)) {\n          const showRequest = UI.UIUtils.createTextButton(i18nString(UIStrings.showRequest), () => {\n            void Common.Revealer.reveal(new SDK.PageResourceLoader.ResourceKey(pageResourceKey));\n          }, {jslogContext: 'show-request', variant: Buttons.Button.Variant.TEXT});\n          showRequest.style.setProperty('margin-left', '10px');\n          showRequest.title = i18nString(UIStrings.openDeveloperResources);\n          detailsRow.appendChild(showRequest);\n        }\n        detailsRow.classList.add('infobar-selectable');\n      }\n    }\n    this.missingDebugInfoBar.setCloseCallback(() => {\n      this.removeInfobar(this.missingDebugInfoBar);\n      this.missingDebugInfoBar = null;\n    });\n    this.attachInfobar(this.missingDebugInfoBar);\n  }\n\n  private scriptHasSourceMap(): boolean {\n    for (const debuggerModel of SDK.TargetManager.TargetManager.instance().models(SDK.DebuggerModel.DebuggerModel)) {\n      const scriptFile = Bindings.DebuggerWorkspaceBinding.DebuggerWorkspaceBinding.instance().scriptFile(\n          this.uiSourceCode, debuggerModel);\n      if (scriptFile?.hasSourceMapURL()) {\n        return true;\n      }\n    }\n    return false;\n  }\n\n  private getSourceMapResource(): SDK.PageResourceLoader.PageResource|null {\n    const resourceMap = this.loader.getResourcesLoaded();\n    for (const [debuggerModel, script] of this.scriptFileForDebuggerModel.entries()) {\n      const url = script.script?.sourceMapURL;\n      if (url) {\n        const initiatorUrl = SDK.SourceMapManager.SourceMapManager.resolveRelativeSourceURL(\n            debuggerModel.target(), script.script.sourceURL);\n        const resolvedUrl = Common.ParsedURL.ParsedURL.completeURL(initiatorUrl, url);\n        if (resolvedUrl) {\n          const resource = resourceMap.get(SDK.PageResourceLoader.PageResourceLoader.makeKey(\n              resolvedUrl, script.script.createPageResourceLoadInitiator()));\n          if (resource) {\n            return resource;\n          }\n        }\n      }\n    }\n    return null;\n  }\n\n  private showSourceMapInfobarIfNeeded(): void {\n    if (this.sourceMapInfobar) {\n      return;\n    }\n    if (!Common.Settings.Settings.instance().moduleSetting('js-source-maps-enabled').get()) {\n      return;\n    }\n    if (!this.scriptHasSourceMap()) {\n      return;\n    }\n\n    const resource = this.getSourceMapResource();\n    if (resource && resource.success === null) {\n      // Don't create the infobar until we know whether loading succeeded or failed.\n      return;\n    }\n\n    if (!resource) {\n      this.sourceMapInfobar = UI.Infobar.Infobar.create(\n          UI.Infobar.Type.INFO, i18nString(UIStrings.sourceMapSkipped), [],\n          Common.Settings.Settings.instance().createSetting('source-map-skipped-infobar-disabled', false),\n          'source-map-skipped');\n      if (!this.sourceMapInfobar) {\n        return;\n      }\n      this.sourceMapInfobar.createDetailsRowMessage(i18nString(UIStrings.debuggingPowerReduced));\n      this.sourceMapInfobar.createDetailsRowMessage(i18nString(UIStrings.reloadForSourceMap));\n    } else if (resource.success) {\n      this.sourceMapInfobar = UI.Infobar.Infobar.create(\n          UI.Infobar.Type.INFO, i18nString(UIStrings.sourceMapLoaded), [],\n          Common.Settings.Settings.instance().createSetting('source-map-infobar-disabled', false), 'source-map-loaded');\n      if (!this.sourceMapInfobar) {\n        return;\n      }\n      this.sourceMapInfobar.createDetailsRowMessage(i18nString(UIStrings.associatedFilesShouldBeAdded));\n      this.sourceMapInfobar.createDetailsRowMessage(i18nString(UIStrings.associatedFilesAreAvailable, {\n        PH1: String(UI.ShortcutRegistry.ShortcutRegistry.instance().shortcutTitleForAction('quick-open.show')),\n      }));\n    } else {\n      this.sourceMapInfobar = UI.Infobar.Infobar.create(\n          UI.Infobar.Type.WARNING, i18nString(UIStrings.sourceMapFailed), [], undefined, 'source-map-failed');\n      if (!this.sourceMapInfobar) {\n        return;\n      }\n      this.sourceMapInfobar.createDetailsRowMessage(i18nString(UIStrings.debuggingPowerReduced));\n      if (resource.errorMessage) {\n        this.sourceMapInfobar.createDetailsRowMessage(i18nString(UIStrings.errorLoading, {\n          PH1: Platform.StringUtilities.trimMiddle(resource.url, UI.UIUtils.MaxLengthForDisplayedURLs),\n          PH2: resource.errorMessage,\n        }));\n      }\n    }\n    this.sourceMapInfobar.setCloseCallback(() => {\n      this.removeInfobar(this.sourceMapInfobar);\n      this.sourceMapInfobar = null;\n    });\n    this.attachInfobar(this.sourceMapInfobar);\n  }\n\n  private handleGutterClick(line: CodeMirror.Line, event: MouseEvent): boolean {\n    if (this.muted || event.button !== 0 || event.altKey) {\n      return false;\n    }\n    if (event.metaKey || event.ctrlKey) {\n      this.#openEditDialogForLine(line, event.shiftKey);\n      return true;\n    }\n\n    void this.toggleBreakpoint(line, event.shiftKey);\n    return true;\n  }\n\n  private async toggleBreakpoint(line: CodeMirror.Line, onlyDisable: boolean): Promise<void> {\n    if (this.muted) {\n      return;\n    }\n    if (this.activeBreakpointDialog) {\n      this.activeBreakpointDialog.finishEditing(false, '');\n    }\n\n    const breakpoints = this.lineBreakpoints(line);\n    if (!breakpoints.length) {\n      await this.createNewBreakpoint(line, EMPTY_BREAKPOINT_CONDITION, /* enabled */ true, /* isLogpoint */ false);\n      return;\n    }\n    const hasDisabled = breakpoints.some(b => !b.enabled());\n    for (const breakpoint of breakpoints) {\n      if (onlyDisable) {\n        breakpoint.setEnabled(hasDisabled);\n      } else {\n        Host.userMetrics.actionTaken(Host.UserMetrics.Action.BreakpointRemovedFromGutterToggle);\n        void breakpoint.remove(false);\n      }\n    }\n  }\n\n  private async defaultBreakpointLocation(line: CodeMirror.Line): Promise<{lineNumber: number, columnNumber?: number}> {\n    // If the breakpoint is being set at the execution location, use the execution location exactly,\n    // otherwise calculate the location from the line number.\n    if (this.executionLocation) {\n      const editorExecutionLocation = this.transformer.uiLocationToEditorLocation(\n          this.executionLocation.lineNumber, this.executionLocation.columnNumber);\n      if (editorExecutionLocation.lineNumber === line.number - 1) {\n        const possibleBreakpoints = await this.linePossibleBreakpoints(line);\n        for (const location of possibleBreakpoints) {\n          if (location.compareTo(this.executionLocation) === 0) {\n            return this.executionLocation;\n          }\n        }\n      }\n    }\n    return this.transformer.editorLocationToUILocation(line.number - 1);\n  }\n\n  private async createNewBreakpoint(\n      line: CodeMirror.Line, condition: Breakpoints.BreakpointManager.UserCondition, enabled: boolean,\n      isLogpoint: boolean): Promise<void> {\n    if (!this.editor || !SourceFrame.SourceFrame.isBreakableLine(this.editor.state, line)) {\n      return;\n    }\n    Host.userMetrics.actionTaken(Host.UserMetrics.Action.ScriptsBreakpointSet);\n    this.#recordSourcesPanelDebuggedMetrics();\n    const origin = await this.defaultBreakpointLocation(line);\n    await this.setBreakpoint(origin.lineNumber, origin.columnNumber, condition, enabled, isLogpoint);\n  }\n\n  private async setBreakpoint(\n      lineNumber: number, columnNumber: number|undefined, condition: Breakpoints.BreakpointManager.UserCondition,\n      enabled: boolean, isLogpoint: boolean): Promise<Breakpoints.BreakpointManager.Breakpoint|undefined> {\n    Common.Settings.Settings.instance().moduleSetting('breakpoints-active').set(true);\n    const bp = await this.breakpointManager.setBreakpoint(\n        this.uiSourceCode, lineNumber, columnNumber, condition, enabled, isLogpoint,\n        Breakpoints.BreakpointManager.BreakpointOrigin.USER_ACTION);\n    this.breakpointWasSetForTest(lineNumber, columnNumber, condition, enabled);\n    return bp;\n  }\n\n  private breakpointWasSetForTest(\n      _lineNumber: number, _columnNumber: number|undefined, _condition: string, _enabled: boolean): void {\n  }\n\n  private async callFrameChanged(): Promise<void> {\n    this.liveLocationPool.disposeAll();\n    const callFrame = UI.Context.Context.instance().flavor(SDK.DebuggerModel.CallFrame);\n    if (!callFrame) {\n      this.setExecutionLocation(null);\n    } else {\n      await Bindings.DebuggerWorkspaceBinding.DebuggerWorkspaceBinding.instance().createCallFrameLiveLocation(\n          callFrame.location(), async (liveLocation: Bindings.LiveLocation.LiveLocation) => {\n            const uiLocation = await liveLocation.uiLocation();\n            if (uiLocation && uiLocation.uiSourceCode.canonicalScriptId() === this.uiSourceCode.canonicalScriptId()) {\n              this.setExecutionLocation(uiLocation);\n              this.updateMissingDebugInfoInfobar(callFrame.missingDebugInfoDetails);\n              // We are paused and the user is specifically looking at this UISourceCode either because\n              // this file is on top of stack, or the user explicitly selected a stack frame for this UISourceCode.\n              this.#recordSourcesPanelDebuggedMetrics();\n            } else {\n              this.setExecutionLocation(null);\n            }\n          }, this.liveLocationPool);\n    }\n  }\n\n  private setExecutionLocation(executionLocation: Workspace.UISourceCode.UILocation|null): void {\n    if (this.executionLocation === executionLocation || !this.editor) {\n      return;\n    }\n    this.executionLocation = executionLocation;\n\n    if (executionLocation) {\n      const editorLocation =\n          this.transformer.uiLocationToEditorLocation(executionLocation.lineNumber, executionLocation.columnNumber);\n      const editorPosition = TextEditor.Position.toOffset(this.editor.state.doc, editorLocation);\n      this.editor.dispatch({\n        effects: [\n          TextEditor.ExecutionPositionHighlighter.setHighlightedPosition.of(editorPosition),\n        ],\n      });\n      void this.updateValueDecorations();\n      if (this.controlDown) {\n        void this.showContinueToLocations();\n      }\n    } else {\n      this.editor.dispatch({\n        effects: [\n          continueToMarkers.update.of(CodeMirror.Decoration.none),\n          valueDecorations.update.of(CodeMirror.Decoration.none),\n          TextEditor.ExecutionPositionHighlighter.clearHighlightedPosition.of(),\n        ],\n      });\n    }\n  }\n\n  override dispose(): void {\n    this.hideIgnoreListInfobar();\n    if (this.sourceMapInfobar) {\n      this.sourceMapInfobar.dispose();\n    }\n    for (const script of this.scriptFileForDebuggerModel.values()) {\n      script.removeEventListener(\n          Bindings.ResourceScriptMapping.ResourceScriptFile.Events.DID_MERGE_TO_VM, this.didMergeToVM, this);\n      script.removeEventListener(\n          Bindings.ResourceScriptMapping.ResourceScriptFile.Events.DID_DIVERGE_FROM_VM, this.didDivergeFromVM, this);\n    }\n    this.scriptFileForDebuggerModel.clear();\n\n    this.popoverHelper?.hidePopover();\n    this.popoverHelper?.dispose();\n    this.setExecutionLocation(null);\n\n    this.breakpointManager.removeEventListener(\n        Breakpoints.BreakpointManager.Events.BreakpointAdded, this.breakpointChange, this);\n    this.breakpointManager.removeEventListener(\n        Breakpoints.BreakpointManager.Events.BreakpointRemoved, this.breakpointChange, this);\n    this.uiSourceCode.removeEventListener(\n        Workspace.UISourceCode.Events.WorkingCopyChanged, this.workingCopyChanged, this);\n    this.uiSourceCode.removeEventListener(\n        Workspace.UISourceCode.Events.WorkingCopyCommitted, this.workingCopyCommitted, this);\n\n    Workspace.IgnoreListManager.IgnoreListManager.instance().removeChangeListener(this.ignoreListCallback);\n\n    debuggerPluginForUISourceCode.delete(this.uiSourceCode);\n    super.dispose();\n\n    window.clearTimeout(this.refreshBreakpointsTimeout);\n    // Clear `this.editor` to signal that we are disposed. Any function from this `DebuggerPlugin` instance\n    // still running or scheduled will early return and not do any work.\n    this.editor = undefined;\n\n    UI.Context.Context.instance().removeFlavorChangeListener(SDK.DebuggerModel.CallFrame, this.callFrameChanged, this);\n    this.liveLocationPool.disposeAll();\n  }\n\n  /**\n   * Only records metrics once per DebuggerPlugin instance and must only be\n   * called once the content of the UISourceCode is available.\n   */\n  #recordSourcesPanelDebuggedMetrics(): void {\n    if (this.#sourcesPanelDebuggedMetricsRecorded) {\n      return;\n    }\n    this.#sourcesPanelDebuggedMetricsRecorded = true;\n\n    const mimeType = Common.ResourceType.ResourceType.mimeFromURL(this.uiSourceCode.url());\n    const mediaType = Common.ResourceType.ResourceType.mediaTypeForMetrics(\n        mimeType ?? '', this.uiSourceCode.contentType().isFromSourceMap(),\n        TextUtils.TextUtils.isMinified(this.uiSourceCode.content()), this.uiSourceCode.url().startsWith('snippet://'),\n        this.uiSourceCode.url().startsWith('debugger://'));\n    Host.userMetrics.sourcesPanelFileDebugged(mediaType);\n  }\n}\n\nexport class BreakpointLocationRevealer implements\n    Common.Revealer.Revealer<Breakpoints.BreakpointManager.BreakpointLocation> {\n  async reveal(breakpointLocation: Breakpoints.BreakpointManager.BreakpointLocation, omitFocus?: boolean|undefined):\n      Promise<void> {\n    const {uiLocation} = breakpointLocation;\n    SourcesPanel.instance().showUILocation(uiLocation, omitFocus);\n    const debuggerPlugin = debuggerPluginForUISourceCode.get(uiLocation.uiSourceCode);\n    if (debuggerPlugin) {\n      debuggerPlugin.editBreakpointLocation(breakpointLocation);\n    } else {\n      BreakpointsSidebarController.instance().breakpointEditFinished(breakpointLocation.breakpoint, false);\n    }\n  }\n}\n\n// Enumerate non-breakable lines (lines without a known corresponding\n// position in the UISource).\nasync function computeNonBreakableLines(\n    state: CodeMirror.EditorState, transformer: SourceFrame.SourceFrame.Transformer,\n    sourceCode: Workspace.UISourceCode.UISourceCode): Promise<readonly number[]> {\n  const debuggerWorkspaceBinding = Bindings.DebuggerWorkspaceBinding.DebuggerWorkspaceBinding.instance();\n  const mappedLines = await debuggerWorkspaceBinding.getMappedLines(sourceCode);\n  if (!mappedLines) {\n    return [];\n  }\n  const linePositions = [];\n  for (let i = 0; i < state.doc.lines; i++) {\n    const {lineNumber} = transformer.editorLocationToUILocation(i, 0);\n    if (!mappedLines.has(lineNumber)) {\n      linePositions.push(state.doc.line(i + 1).from);\n    }\n  }\n  return linePositions;\n}\n\n// Breakpoint markers\n\ninterface BreakpointDecoration {\n  content: CodeMirror.DecorationSet;\n  gutter: CodeMirror.RangeSet<CodeMirror.GutterMarker>;\n}\n\nconst setBreakpointDeco = CodeMirror.StateEffect.define<BreakpointDecoration>();\nconst muteBreakpoints = CodeMirror.StateEffect.define<null>();\n\nfunction muteGutterMarkers(markers: CodeMirror.RangeSet<CodeMirror.GutterMarker>, doc: CodeMirror.Text):\n    CodeMirror.RangeSet<CodeMirror.GutterMarker> {\n  const newMarkers: Array<CodeMirror.Range<CodeMirror.GutterMarker>> = [];\n  markers.between(0, doc.length, (from, _to, marker) => {\n    let className: string = marker.elementClass;\n    if (!/cm-breakpoint-disabled/.test(className)) {\n      className += ' cm-breakpoint-disabled';\n    }\n    newMarkers.push(new BreakpointGutterMarker(\n                        className, from, marker instanceof BreakpointGutterMarker ? marker.condition : undefined)\n                        .range(from));\n  });\n  return CodeMirror.RangeSet.of(newMarkers, false);\n}\n\n// Holds the inline breakpoint marker decorations and the gutter\n// markers for lines with breakpoints. When the set of active markers\n// changes in non-muted state (the editor content matches the original\n// file), it is recomputed and updated with `setBreakpointDeco`. When\n// the editor content goes out of sync with the original file, the\n// `muteBreakpoints` effect hides the inline markers and makes sure\n// all gutter markers are displayed as disabled.\nconst breakpointMarkers = CodeMirror.StateField.define<BreakpointDecoration>({\n  create(): BreakpointDecoration {\n    return {content: CodeMirror.RangeSet.empty, gutter: CodeMirror.RangeSet.empty};\n  },\n  update(deco, tr): BreakpointDecoration {\n    if (!tr.changes.empty) {\n      deco = {content: deco.content.map(tr.changes), gutter: deco.gutter.map(tr.changes)};\n    }\n    for (const effect of tr.effects) {\n      if (effect.is(setBreakpointDeco)) {\n        deco = effect.value;\n      } else if (effect.is(muteBreakpoints)) {\n        deco = {content: CodeMirror.RangeSet.empty, gutter: muteGutterMarkers(deco.gutter, tr.state.doc)};\n      }\n    }\n    return deco;\n  },\n  provide: field =>\n      [CodeMirror.EditorView.decorations.from(field, deco => deco.content),\n       CodeMirror.lineNumberMarkers.from(field, deco => deco.gutter)],\n});\n\nclass BreakpointInlineMarker extends CodeMirror.WidgetType {\n  class: string;\n\n  constructor(readonly breakpoint: Breakpoints.BreakpointManager.Breakpoint|null, readonly parent: DebuggerPlugin) {\n    super();\n    // Eagerly compute DOM class so that the widget is recreated when it changes.\n    this.class = 'cm-inlineBreakpoint';\n    if (breakpoint?.isLogpoint()) {\n      this.class += ' cm-inlineBreakpoint-logpoint';\n    } else if (breakpoint?.condition()) {\n      this.class += ' cm-inlineBreakpoint-conditional';\n    }\n    if (!breakpoint?.enabled()) {\n      this.class += ' cm-inlineBreakpoint-disabled';\n    }\n  }\n\n  override eq(other: BreakpointInlineMarker): boolean {\n    return other.class === this.class && other.breakpoint === this.breakpoint;\n  }\n\n  toDOM(): HTMLElement {\n    const span = document.createElement('span');\n    span.className = this.class;\n    span.setAttribute('jslog', `${VisualLogging.breakpointMarker().track({click: true})}`);\n    span.addEventListener('click', (event: MouseEvent) => {\n      this.parent.onInlineBreakpointMarkerClick(event, this.breakpoint);\n      event.consume();\n    });\n    span.addEventListener('contextmenu', (event: MouseEvent) => {\n      this.parent.onInlineBreakpointMarkerContextMenu(event, this.breakpoint);\n      event.consume();\n    });\n    return span;\n  }\n\n  override ignoreEvent(): boolean {\n    return true;\n  }\n}\n\nclass BreakpointGutterMarker extends CodeMirror.GutterMarker {\n  static nextTooltipId = 0;\n  readonly #position: number;\n  readonly condition: Breakpoints.BreakpointManager.UserCondition|undefined;\n\n  constructor(\n      override readonly elementClass: string, position: number,\n      condition?: Breakpoints.BreakpointManager.UserCondition) {\n    super();\n    this.#position = position;\n    this.condition = condition;\n  }\n\n  override eq(other: BreakpointGutterMarker): boolean {\n    return other.elementClass === this.elementClass;\n  }\n\n  override toDOM(view: CodeMirror.EditorView): Node {\n    const div = document.createElement('div');  // We want {display: block} so it uses all of the space.\n    div.setAttribute('jslog', `${VisualLogging.breakpointMarker().track({click: true})}`);\n    const line = view.state.doc.lineAt(this.#position).number;\n    const formatNumber = view.state.facet(SourceFrame.SourceFrame.LINE_NUMBER_FORMATTER);\n    div.textContent = formatNumber(line, view.state);\n    if (!this.condition) {\n      return div;\n    }\n    const container = document.createElement('div');\n    const id = `cm-breakpoint-tooltip-${BreakpointGutterMarker.nextTooltipId++}`;\n    div.setAttribute('aria-details', id);\n    container.appendChild(div);\n    const tooltip = new Tooltips.Tooltip.Tooltip({\n      id,\n      anchor: div,\n      jslogContext: 'breakpoint-tooltip',\n    });\n    tooltip.append(this.condition);\n    container.appendChild(tooltip);\n    return container;\n  }\n}\n\nfunction mostSpecificBreakpoint(\n    a: Breakpoints.BreakpointManager.Breakpoint, b: Breakpoints.BreakpointManager.Breakpoint): number {\n  if (a.enabled() !== b.enabled()) {\n    return a.enabled() ? -1 : 1;\n  }\n  if (a.bound() !== b.bound()) {\n    return a.bound() ? -1 : 1;\n  }\n  if (Boolean(a.condition()) !== Boolean(b.condition())) {\n    return Boolean(a.condition()) ? -1 : 1;\n  }\n  return 0;\n}\n\n// Generic helper for creating pairs of editor state fields and\n// effects to model imperatively updated decorations.\n\nfunction defineStatefulDecoration(): {\n  update: CodeMirror.StateEffectType<CodeMirror.DecorationSet>,\n  field: CodeMirror.StateField<CodeMirror.DecorationSet>,\n} {\n  const update = CodeMirror.StateEffect.define<CodeMirror.DecorationSet>();\n  const field = CodeMirror.StateField.define<CodeMirror.DecorationSet>({\n    create(): CodeMirror.DecorationSet {\n      return CodeMirror.Decoration.none;\n    },\n    update(deco, tr): CodeMirror.DecorationSet {\n      return tr.effects.reduce((deco, effect) => effect.is(update) ? effect.value : deco, deco.map(tr.changes));\n    },\n    provide: field => CodeMirror.EditorView.decorations.from(field),\n  });\n  return {update, field};\n}\n\n// Continue-to markers\n\nconst continueToMark = CodeMirror.Decoration.mark({class: 'cm-continueToLocation'});\nconst asyncContinueToMark = CodeMirror.Decoration.mark({class: 'cm-continueToLocation cm-continueToLocation-async'});\n\nconst continueToMarkers = defineStatefulDecoration();\n\nconst noMarkers = {}, hasContinueMarkers = {\n  class: 'cm-hasContinueMarkers',\n};\n\n// Add a class to the content element when there are active\n// continue-to markers. This hides the background on the current\n// execution line.\nconst markIfContinueTo = CodeMirror.EditorView.contentAttributes.compute([continueToMarkers.field], state => {\n  return state.field(continueToMarkers.field).size ? hasContinueMarkers : noMarkers;\n});\n\n// Variable value decorations\n\nclass ValueDecoration extends CodeMirror.WidgetType {\n  constructor(readonly pairs: Array<[string, SDK.RemoteObject.RemoteObject]>) {\n    super();\n  }\n\n  override eq(other: ValueDecoration): boolean {\n    return this.pairs.length === other.pairs.length &&\n        this.pairs.every((p, i) => p[0] === other.pairs[i][0] && p[1] === other.pairs[i][1]);\n  }\n\n  toDOM(): HTMLElement {\n    const formatter = new ObjectUI.RemoteObjectPreviewFormatter.RemoteObjectPreviewFormatter();\n    const widget = document.createElement('div');\n    widget.classList.add('cm-variableValues');\n    let first = true;\n    for (const [name, value] of this.pairs) {\n      if (first) {\n        first = false;\n      } else {\n        UI.UIUtils.createTextChild(widget, ', ');\n      }\n      const nameValuePair = widget.createChild('span');\n      UI.UIUtils.createTextChild(nameValuePair, name + ' = ');\n      const propertyCount = value.preview ? value.preview.properties.length : 0;\n      const entryCount = value.preview?.entries ? value.preview.entries.length : 0;\n      if (value.preview && propertyCount + entryCount < 10) {\n        formatter.appendObjectPreview(nameValuePair, value.preview, false /* isEntry */);\n      } else {\n        const propertyValue = ObjectUI.ObjectPropertiesSection.ObjectPropertiesSection.createPropertyValue(\n            value, /* wasThrown */ false, /* showPreview */ false);\n        nameValuePair.appendChild(propertyValue.element);\n      }\n    }\n    return widget;\n  }\n}\n\nconst valueDecorations = defineStatefulDecoration();\n\nfunction isVariableIdentifier(tokenType: string): boolean {\n  return tokenType === 'VariableName' || tokenType === 'VariableDefinition';\n}\n\nfunction isVariableDefinition(tokenType: string): boolean {\n  return tokenType === 'VariableDefinition';\n}\n\nfunction isLetConstDefinition(tokenType: string): boolean {\n  return tokenType === 'let' || tokenType === 'const';\n}\n\nfunction isScopeNode(tokenType: string): boolean {\n  return tokenType === 'Block' || tokenType === 'ForSpec';\n}\n\nclass SiblingScopeVariables {\n  blockList: Set<string> = new Set<string>();\n  variables: Array<{line: number, from: number, id: string}> = [];\n}\n\nexport function getVariableNamesByLine(\n    editorState: CodeMirror.EditorState, fromPos: number, toPos: number,\n    currentPos: number): Array<{line: number, from: number, id: string}> {\n  const fromLine = editorState.doc.lineAt(fromPos);\n  fromPos = Math.min(fromLine.to, fromPos);\n  toPos = editorState.doc.lineAt(toPos).from;\n  const tree = CodeMirror.syntaxTree(editorState);\n\n  // Sibling scope is a scope that does not contain the current position.\n  // We will exclude variables that are defined (and used in those scopes (since we are currently outside of their lifetime).\n  function isSiblingScopeNode(node: {name: string, from: number, to: number}): boolean {\n    return isScopeNode(node.name) && (node.to < currentPos || currentPos < node.from);\n  }\n\n  const names: Array<{line: number, from: number, id: string}> = [];\n  let curLine = fromLine;\n  const siblingStack: SiblingScopeVariables[] = [];\n  let currentLetConstDefinition: CodeMirror.SyntaxNode|null = null;\n\n  function currentNames(): Array<{line: number, from: number, id: string}> {\n    return siblingStack.length ? siblingStack[siblingStack.length - 1].variables : names;\n  }\n\n  tree.iterate({\n    from: fromPos,\n    to: toPos,\n    enter: node => {\n      if (node.from < fromPos) {\n        return;\n      }\n\n      if (isLetConstDefinition(node.name)) {\n        currentLetConstDefinition = node.node.nextSibling;\n        return;\n      }\n\n      if (isSiblingScopeNode(node)) {\n        siblingStack.push(new SiblingScopeVariables());\n        return;\n      }\n\n      const varName = isVariableIdentifier(node.name) && editorState.sliceDoc(node.from, node.to);\n      if (!varName) {\n        return;\n      }\n\n      if (currentLetConstDefinition && isVariableDefinition(node.name) && siblingStack.length > 0) {\n        siblingStack[siblingStack.length - 1].blockList.add(varName);\n        return;\n      }\n\n      if (node.from > curLine.to) {\n        curLine = editorState.doc.lineAt(node.from);\n      }\n\n      currentNames().push({line: curLine.number - 1, from: node.from, id: varName});\n    },\n    leave: node => {\n      if (currentLetConstDefinition === node.node) {\n        currentLetConstDefinition = null;\n      } else if (isSiblingScopeNode(node)) {\n        const topScope = siblingStack.pop();\n        const nameList = currentNames();\n        for (const token of topScope?.variables ?? []) {\n          if (!topScope?.blockList.has(token.id)) {\n            nameList.push(token);\n          }\n        }\n      }\n    },\n  });\n  return names;\n}\n\nexport async function computeScopeMappings(\n    callFrame: SDK.DebuggerModel.CallFrame,\n    rawLocationToEditorOffset: (l: SDK.DebuggerModel.Location|null) => Promise<number|null>):\n    Promise<Array<{scopeStart: number, scopeEnd: number, variableMap: Map<string, SDK.RemoteObject.RemoteObject>}>> {\n  const scopeMappings:\n      Array<{scopeStart: number, scopeEnd: number, variableMap: Map<string, SDK.RemoteObject.RemoteObject>}> = [];\n  for (const scope of callFrame.scopeChain()) {\n    const scopeStart = await rawLocationToEditorOffset(scope.range()?.start ?? null);\n    if (!scopeStart) {\n      break;\n    }\n    const scopeEnd = await rawLocationToEditorOffset(scope.range()?.end ?? null);\n    if (!scopeEnd) {\n      break;\n    }\n\n    const {properties} = await SourceMapScopes.NamesResolver.resolveScopeInObject(scope).getAllProperties(false, false);\n    if (!properties || properties.length > MAX_PROPERTIES_IN_SCOPE_FOR_VALUE_DECORATIONS) {\n      break;\n    }\n    const variableMap = new Map<string, SDK.RemoteObject.RemoteObject>(\n        properties.map(p => [p.name, p.value] as [string, SDK.RemoteObject.RemoteObject]));\n\n    scopeMappings.push({scopeStart, scopeEnd, variableMap});\n\n    // Let us only get mappings for block scopes until we see a surrounding function (local) scope.\n    if (scope.type() === Protocol.Debugger.ScopeType.Local) {\n      break;\n    }\n  }\n  return scopeMappings;\n}\n\nexport function getVariableValuesByLine(\n    scopeMappings:\n        Array<{scopeStart: number, scopeEnd: number, variableMap: Map<string, SDK.RemoteObject.RemoteObject>}>,\n    variableNames: Array<{line: number, from: number, id: string}>):\n    Map<number, Map<string, SDK.RemoteObject.RemoteObject>>|null {\n  const namesPerLine = new Map<number, Map<string, SDK.RemoteObject.RemoteObject>>();\n  for (const {line, from, id} of variableNames) {\n    const varValue = findVariableInChain(id, from, scopeMappings);\n    if (!varValue) {\n      continue;\n    }\n    let names = namesPerLine.get(line);\n    if (!names) {\n      names = new Map();\n      namesPerLine.set(line, names);\n    }\n    names.set(id, varValue);\n  }\n  return namesPerLine;\n\n  function findVariableInChain(\n      name: string,\n      pos: number,\n      scopeMappings:\n          Array<{scopeStart: number, scopeEnd: number, variableMap: Map<string, SDK.RemoteObject.RemoteObject>}>,\n      ): SDK.RemoteObject.RemoteObject|null {\n    for (const scope of scopeMappings) {\n      if (pos < scope.scopeStart || pos >= scope.scopeEnd) {\n        continue;\n      }\n      const value = scope.variableMap.get(name);\n      if (value) {\n        return value;\n      }\n    }\n    return null;\n  }\n}\n\n// Pop-over\n\nexport function computePopoverHighlightRange(state: CodeMirror.EditorState, mimeType: string, cursorPos: number): {\n  from: number,\n  to: number,\n  containsSideEffects: boolean,\n}|null {\n  const {main} = state.selection;\n  if (!main.empty) {\n    if (cursorPos < main.from || main.to < cursorPos) {\n      return null;\n    }\n    // If the user goes through the trouble of manually selecting an expression, we'll allow side-effects.\n    return {from: main.from, to: main.to, containsSideEffects: false};\n  }\n\n  const tree = CodeMirror.ensureSyntaxTree(state, cursorPos, 5 * 1000);\n  if (!tree) {\n    return null;\n  }\n\n  const node = tree.resolveInner(cursorPos, 1);\n  // Only do something if the cursor is over a leaf node.\n  if (node.firstChild) {\n    return null;\n  }\n\n  switch (mimeType) {\n    case 'application/wasm': {\n      if (node.name !== 'Identifier') {\n        return null;\n      }\n      // For $label identifiers we can't show a meaningful preview (https://crbug.com/1155548),\n      // so we suppress them for now. Label identifiers can only appear as operands to control\n      // instructions[1].\n      //\n      // [1]: https://webassembly.github.io/spec/core/text/instructions.html#control-instructions\n      const controlInstructions = ['block', 'loop', 'if', 'else', 'end', 'br', 'br_if', 'br_table'];\n      for (let parent: CodeMirror.SyntaxNode|null = node.parent; parent; parent = parent.parent) {\n        if (parent.name === 'App') {\n          const firstChild = parent.firstChild;\n          const opName = firstChild?.name === 'Keyword' && state.sliceDoc(firstChild.from, firstChild.to);\n          if (opName && controlInstructions.includes(opName)) {\n            return null;\n          }\n        }\n      }\n      return {from: node.from, to: node.to, containsSideEffects: false};\n    }\n\n    case 'text/html':\n    case 'text/javascript':\n    case 'text/jsx':\n    case 'text/typescript':\n    case 'text/typescript-jsx': {\n      let current: CodeMirror.SyntaxNode|null = node;\n      while (current && current.name !== 'this' && current.name !== 'VariableDefinition' &&\n             current.name !== 'VariableName' && current.name !== 'MemberExpression' &&\n             !(current.name === 'PropertyName' && current.parent?.name === 'PatternProperty' &&\n               current.nextSibling?.name !== ':') &&\n             !(current.name === 'PropertyDefinition' && current.parent?.name === 'Property' &&\n               current.nextSibling?.name !== ':')) {\n        current = current.parent;\n      }\n      if (!current) {\n        return null;\n      }\n      return {from: current.from, to: current.to, containsSideEffects: containsSideEffects(state.doc, current)};\n    }\n\n    default: {\n      // In other languages, just assume a token consisting entirely\n      // of identifier-like characters is an identifier.\n      if (node.to - node.from > 50 || /[^\\w_\\-$]/.test(state.sliceDoc(node.from, node.to))) {\n        return null;\n      }\n      return {from: node.from, to: node.to, containsSideEffects: false};\n    }\n  }\n}\n\nfunction containsSideEffects(doc: CodeMirror.Text, root: CodeMirror.SyntaxNode): boolean {\n  let containsSideEffects = false;\n  root.toTree().iterate({\n    enter(node: CodeMirror.SyntaxNode): boolean {\n      switch (node.name) {\n        case 'AssignmentExpression':\n        case 'CallExpression': {\n          containsSideEffects = true;\n          return false;\n        }\n        case 'ArithOp': {\n          const op = doc.sliceString(root.from + node.from, root.from + node.to);\n          if (op === '++' || op === '--') {\n            containsSideEffects = true;\n            return false;\n          }\n          break;\n        }\n      }\n      return true;\n    },\n  });\n  return containsSideEffects;\n}\n\n// Evaluated expression mark for pop-over\n\nconst evalExpressionMark = CodeMirror.Decoration.mark({class: 'cm-evaluatedExpression'});\n\nconst evalExpression = defineStatefulDecoration();\n\n// Styling for plugin-local elements\n\nconst theme = CodeMirror.EditorView.baseTheme({\n  '.cm-line::selection': {\n    backgroundColor: 'transparent',\n    color: 'currentColor',\n  },\n  '.cm-gutters .cm-gutter.cm-lineNumbers .cm-gutterElement': {\n    '&:hover, &.cm-breakpoint': {\n      borderStyle: 'solid',\n      borderWidth: '1px 4px 1px 1px',\n      marginRight: '-4px',\n      paddingLeft: '8px',\n      // Make sure text doesn't move down due to the border above it.\n      lineHeight: 'calc(1.2em - 2px)',\n      position: 'relative',\n    },\n    '&:hover': {\n      WebkitBorderImage: lineNumberArrow('#ebeced', '#ebeced'),\n    },\n    '&.cm-breakpoint': {\n      color: '#fff',\n      WebkitBorderImage: lineNumberArrow('#4285f4', '#1a73e8'),\n    },\n    '&.cm-breakpoint-conditional': {\n      WebkitBorderImage: lineNumberArrow('#f29900', '#e37400'),\n      '&::before': {\n        content: '\"?\"',\n        position: 'absolute',\n        top: 0,\n        left: '1px',\n      },\n    },\n    '&.cm-breakpoint-logpoint': {\n      WebkitBorderImage: lineNumberArrow('#f439a0', '#d01884'),\n      '&::before': {\n        content: '\"‥\"',\n        position: 'absolute',\n        top: '-3px',\n        left: '1px',\n      },\n    },\n  },\n  '&dark .cm-gutters .cm-gutter.cm-lineNumbers .cm-gutterElement': {\n    '&:hover': {\n      WebkitBorderImage: lineNumberArrow('#3c4043', '#3c4043'),\n    },\n    '&.cm-breakpoint': {\n      WebkitBorderImage: lineNumberArrow('#5186EC', '#1a73e8'),\n    },\n    '&.cm-breakpoint-conditional': {\n      WebkitBorderImage: lineNumberArrow('#e9a33a', '#e37400'),\n    },\n    '&.cm-breakpoint-logpoint': {\n      WebkitBorderImage: lineNumberArrow('#E54D9B', '#d01884'),\n    },\n  },\n  ':host-context(.breakpoints-deactivated) & .cm-gutters .cm-gutter.cm-lineNumbers .cm-gutterElement.cm-breakpoint, .cm-gutters .cm-gutter.cm-lineNumbers .cm-gutterElement.cm-breakpoint-disabled':\n      {\n        color: '#1a73e8',\n        WebkitBorderImage: lineNumberArrow('#d9e7fd', '#1a73e8'),\n        '&.cm-breakpoint-conditional': {\n          color: '#e37400',\n          WebkitBorderImage: lineNumberArrow('#fcebcc', '#e37400'),\n        },\n        '&.cm-breakpoint-logpoint': {\n          color: '#d01884',\n          WebkitBorderImage: lineNumberArrow('#fdd7ec', '#f439a0'),\n        },\n      },\n  ':host-context(.breakpoints-deactivated) &dark .cm-gutters .cm-gutter.cm-lineNumbers .cm-gutterElement.cm-breakpoint, &dark .cm-gutters .cm-gutter.cm-lineNumbers .cm-gutterElement.cm-breakpoint-disabled':\n      {\n        WebkitBorderImage: lineNumberArrow('#2a384e', '#1a73e8'),\n        '&.cm-breakpoint-conditional': {\n          WebkitBorderImage: lineNumberArrow('#4d3c1d', '#e37400'),\n        },\n        '&.cm-breakpoint-logpoint': {\n          WebkitBorderImage: lineNumberArrow('#4e283d', '#f439a0'),\n        },\n      },\n\n  '.cm-inlineBreakpoint': {\n    cursor: 'pointer',\n    position: 'relative',\n    top: '1px',\n    content: inlineBreakpointArrow('#4285F4', '#1A73E8'),\n    height: '10px',\n    '&.cm-inlineBreakpoint-conditional': {\n      content: inlineConditionalBreakpointArrow('#F29900', '#E37400'),\n    },\n    '&.cm-inlineBreakpoint-logpoint': {\n      content: inlineLogpointArrow('#F439A0', '#D01884'),\n    },\n  },\n  '&dark .cm-inlineBreakpoint': {\n    content: inlineBreakpointArrow('#5186EC', '#1A73E8'),\n    '&.cm-inlineBreakpoint-conditional': {\n      content: inlineConditionalBreakpointArrow('#e9a33a', '#E37400'),\n    },\n    '&.cm-inlineBreakpoint-logpoint': {\n      content: inlineLogpointArrow('#E54D9B', '#D01884'),\n    },\n  },\n  ':host-context(.breakpoints-deactivated) & .cm-inlineBreakpoint, .cm-inlineBreakpoint-disabled': {\n    content: inlineBreakpointArrow('#4285F4', '#1A73E8', '0.2'),\n    '&.cm-inlineBreakpoint-conditional': {\n      content: inlineConditionalBreakpointArrow('#F9AB00', '#E37400', '0.2'),\n    },\n    '&.cm-inlineBreakpoint-logpoint': {\n      content: inlineLogpointArrow('#F439A0', '#D01884', '0.2'),\n    },\n  },\n\n  '.cm-executionLine': {\n    backgroundColor: 'var(--sys-color-yellow-container)',\n    outline: '1px solid var(--sys-color-yellow-outline)',\n    '.cm-hasContinueMarkers &': {\n      backgroundColor: 'transparent',\n    },\n    '&.cm-highlightedLine': {\n      animation: 'cm-fading-highlight-execution 2s 0s',\n    },\n    '&.cm-line::selection, &.cm-line ::selection': {\n      backgroundColor: 'var(--sys-color-tonal-container) !important',\n    },\n  },\n  '.cm-executionToken': {\n    backgroundColor: 'var(--sys-color-state-focus-select)',\n  },\n  '@keyframes cm-fading-highlight-execution': {\n    from: {\n      backgroundColor: 'var(--sys-color-tonal-container)',\n    },\n    to: {\n      backgroundColor: 'var(--sys-color-yellow-container)',\n    },\n  },\n\n  '.cm-continueToLocation': {\n    cursor: 'pointer',\n    backgroundColor: 'var(--color-continue-to-location)',\n    '&:hover': {\n      backgroundColor: 'var(--color-continue-to-location-hover)',\n      border: '1px solid var(--color-continue-to-location-hover-border)',\n      margin: '0 -1px',\n    },\n    '&.cm-continueToLocation-async': {\n      backgroundColor: 'var(--color-continue-to-location-async)',\n      '&:hover': {\n        backgroundColor: 'var(--color-continue-to-location-async-hover)',\n        border: '1px solid var(--color-continue-to-location-async-hover-border)',\n        margin: '0 -1px',\n      },\n    },\n  },\n\n  '.cm-evaluatedExpression': {\n    backgroundColor: 'var(--color-evaluated-expression)',\n    border: '1px solid var(--color-evaluated-expression-border)',\n    margin: '0 -1px',\n  },\n\n  '.cm-variableValues': {\n    display: 'inline',\n    whiteSpace: 'nowrap',\n    overflow: 'hidden',\n    textOverflow: 'ellipsis',\n    maxWidth: '1000px',\n    opacity: '80%',\n    backgroundColor: 'var(--color-variable-values)',\n    marginLeft: '10px',\n    padding: '0 5px',\n    userSelect: 'text',\n    '.cm-executionLine &': {\n      backgroundColor: 'transparent',\n      opacity: '50%',\n    },\n  },\n});\n\nfunction lineNumberArrow(color: string, outline: string): string {\n  return `url('data:image/svg+xml,<svg height=\"11\" width=\"26\" xmlns=\"http://www.w3.org/2000/svg\"><path d=\"M22.8.5l2.7 5-2.7 5H.5V.5z\" fill=\"${\n      encodeURIComponent(color)}\" stroke=\"${encodeURIComponent(outline)}\"/></svg>') 1 3 1 1`;\n}\n\nfunction inlineBreakpointArrow(color: string, outline: string, opacity = '1'): string {\n  return `url('data:image/svg+xml,<svg width=\"11\" height=\"12\" viewBox=\"0 0 11 12\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\"><path d=\"M0.5 0.5H5.80139C6.29382 0.5 6.7549 0.741701 7.03503 1.14669L10.392 6L7.03503 10.8533C6.7549 11.2583 6.29382 11.5 5.80139 11.5H0.5V0.5Z\" fill=\"${\n      encodeURIComponent(\n          color)}\" stroke=\"${encodeURIComponent(outline)}\" fill-opacity=\"${encodeURIComponent(opacity)}\"/></svg>')`;\n}\n\nfunction inlineConditionalBreakpointArrow(color: string, outline: string, opacity = '1'): string {\n  return `url('data:image/svg+xml,<svg width=\"11\" height=\"12\" viewBox=\"0 0 11 12\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\"><path d=\"M0.5 0.5H5.80139C6.29382 0.5 6.75489 0.741701 7.03503 1.14669L10.392 6L7.03503 10.8533C6.75489 11.2583 6.29382 11.5 5.80138 11.5H0.5V0.5Z\" fill=\"${\n      encodeURIComponent(color)}\" fill-opacity=\"${encodeURIComponent(opacity)}\" stroke=\"${\n      encodeURIComponent(\n          outline)}\"/><path d=\"M3.51074 7.75635H4.68408V9H3.51074V7.75635ZM4.68408 7.23779H3.51074V6.56104C3.51074 6.271 3.55615 6.02344 3.64697 5.81836C3.73779 5.61328 3.90039 5.39648 4.13477 5.16797L4.53027 4.77686C4.71484 4.59814 4.83936 4.4502 4.90381 4.33301C4.97119 4.21582 5.00488 4.09424 5.00488 3.96826C5.00488 3.77197 4.9375 3.62402 4.80273 3.52441C4.66797 3.4248 4.46582 3.375 4.19629 3.375C3.9502 3.375 3.69238 3.42773 3.42285 3.5332C3.15625 3.63574 2.88232 3.78955 2.60107 3.99463V2.81689C2.88818 2.65283 3.17822 2.52979 3.47119 2.44775C3.76709 2.36279 4.06299 2.32031 4.35889 2.32031C4.95068 2.32031 5.41504 2.45801 5.75195 2.7334C6.08887 3.00879 6.25732 3.38818 6.25732 3.87158C6.25732 4.09424 6.20752 4.30225 6.10791 4.49561C6.0083 4.68604 5.8208 4.91602 5.54541 5.18555L5.15869 5.56348C4.95947 5.75684 4.83203 5.91504 4.77637 6.03809C4.7207 6.16113 4.69287 6.31201 4.69287 6.49072C4.69287 6.51709 4.69141 6.54785 4.68848 6.58301C4.68848 6.61816 4.68701 6.65625 4.68408 6.69727V7.23779Z\" fill=\"white\"/></svg>')`;\n}\n\nfunction inlineLogpointArrow(color: string, outline: string, opacity = '1'): string {\n  return `url('data:image/svg+xml,<svg width=\"11\" height=\"12\" viewBox=\"0 0 11 12\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\"><path d=\"M0.5 0.5H5.80139C6.29382 0.5 6.7549 0.741701 7.03503 1.14669L10.392 6L7.03503 10.8533C6.7549 11.2583 6.29382 11.5 5.80139 11.5H0.5V0.5Z\" fill=\"${\n      encodeURIComponent(color)}\" stroke=\"${encodeURIComponent(outline)}\" fill-opacity=\"${\n      encodeURIComponent(\n          opacity)}\"/><circle cx=\"3\" cy=\"6\" r=\"1\" fill=\"white\"/><circle cx=\"7\" cy=\"6\" r=\"1\" fill=\"white\"/></svg>')`;\n}\n", "// Copyright 2021 The Chromium Authors. All rights reserved.\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\n/* eslint-disable rulesdir/no-imperative-dom-api */\n\n/*\n * Copyright (C) 2008 Apple Inc. All Rights Reserved.\n * Copyright (C) 2011 Google Inc. All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions\n * are met:\n * 1. Redistributions of source code must retain the above copyright\n *    notice, this list of conditions and the following disclaimer.\n * 2. Redistributions in binary form must reproduce the above copyright\n *    notice, this list of conditions and the following disclaimer in the\n *    documentation and/or other materials provided with the distribution.\n *\n * THIS SOFTWARE IS PROVIDED BY APPLE INC. ``AS IS'' AND ANY\n * EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE\n * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR\n * PURPOSE ARE DISCLAIMED.  IN NO EVENT SHALL APPLE INC. OR\n * CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,\n * EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,\n * PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR\n * PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY\n * OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE\n * OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */\n\nimport '../../ui/legacy/legacy.js';\n\nimport * as Common from '../../core/common/common.js';\nimport * as Host from '../../core/host/host.js';\nimport * as i18n from '../../core/i18n/i18n.js';\nimport * as Platform from '../../core/platform/platform.js';\nimport * as Root from '../../core/root/root.js';\nimport * as SDK from '../../core/sdk/sdk.js';\nimport * as Protocol from '../../generated/protocol.js';\nimport * as Bindings from '../../models/bindings/bindings.js';\nimport * as Breakpoints from '../../models/breakpoints/breakpoints.js';\nimport * as Extensions from '../../models/extensions/extensions.js';\nimport * as Workspace from '../../models/workspace/workspace.js';\nimport * as ObjectUI from '../../ui/legacy/components/object_ui/object_ui.js';\nimport type * as SourceFrame from '../../ui/legacy/components/source_frame/source_frame.js';\nimport * as UI from '../../ui/legacy/legacy.js';\nimport * as VisualLogging from '../../ui/visual_logging/visual_logging.js';\nimport * as Snippets from '../snippets/snippets.js';\n\nimport {CallStackSidebarPane} from './CallStackSidebarPane.js';\nimport {DebuggerPausedMessage} from './DebuggerPausedMessage.js';\nimport {NavigatorView} from './NavigatorView.js';\nimport sourcesPanelStyles from './sourcesPanel.css.js';\nimport {Events, SourcesView} from './SourcesView.js';\nimport {ThreadsSidebarPane} from './ThreadsSidebarPane.js';\nimport {UISourceCodeFrame} from './UISourceCodeFrame.js';\n\nconst UIStrings = {\n  /**\n   * @description Text that appears when user drag and drop something (for example, a file) in Sources Panel of the Sources panel\n   */\n  dropWorkspaceFolderHere: 'Drop workspace folder here',\n  /**\n   * @description Text to show more options\n   */\n  moreOptions: 'More options',\n  /**\n   * @description Tooltip for the the navigator toggle in the Sources panel. Command to open/show the\n   * sidebar containing the navigator tool.\n   */\n  showNavigator: 'Show navigator',\n  /**\n   * @description Tooltip for the the navigator toggle in the Sources panel. Command to close/hide\n   * the sidebar containing the navigator tool.\n   */\n  hideNavigator: 'Hide navigator',\n  /**\n   * @description Screen reader announcement when the navigator sidebar is shown in the Sources panel.\n   */\n  navigatorShown: 'Navigator sidebar shown',\n  /**\n   * @description Screen reader announcement when the navigator sidebar is hidden in the Sources panel.\n   */\n  navigatorHidden: 'Navigator sidebar hidden',\n  /**\n   * @description Screen reader announcement when the navigator sidebar is shown in the Sources panel.\n   */\n  debuggerShown: 'Debugger sidebar shown',\n  /**\n   * @description Screen reader announcement when the navigator sidebar is hidden in the Sources panel.\n   */\n  debuggerHidden: 'Debugger sidebar hidden',\n  /**\n   * @description Tooltip for the the debugger toggle in the Sources panel. Command to open/show the\n   * sidebar containing the debugger tool.\n   */\n  showDebugger: 'Show debugger',\n  /**\n   * @description Tooltip for the the debugger toggle in the Sources panel. Command to close/hide the\n   * sidebar containing the debugger tool.\n   */\n  hideDebugger: 'Hide debugger',\n  /**\n   * @description Text in Sources Panel of the Sources panel\n   */\n  groupByFolder: 'Group by folder',\n  /**\n   * @description Text in Sources Panel of the Sources panel\n   */\n  groupByAuthored: 'Group by Authored/Deployed',\n  /**\n   * @description Text in Sources Panel of the Sources panel\n   */\n  hideIgnoreListed: 'Hide ignore-listed sources',\n  /**\n   * @description Tooltip text that appears when hovering over the largeicon play button in the Sources Panel of the Sources panel\n   */\n  resumeWithAllPausesBlockedForMs: 'Resume with all pauses blocked for 500 ms',\n  /**\n   * @description Tooltip text that appears when hovering over the largeicon terminate execution button in the Sources Panel of the Sources panel\n   */\n  terminateCurrentJavascriptCall: 'Terminate current JavaScript call',\n  /**\n   * @description Text in Sources Panel of the Sources panel\n   */\n  pauseOnCaughtExceptions: 'Pause on caught exceptions',\n  /**\n   * @description A context menu item in the Sources Panel of the Sources panel\n   */\n  revealInSidebar: 'Reveal in navigator sidebar',\n  /**\n   * @description A context menu item in the Sources Panel of the Sources panel when debugging JS code.\n   * When clicked, the execution is resumed until it reaches the line specified by the right-click that\n   * opened the context menu.\n   */\n  continueToHere: 'Continue to here',\n  /**\n   * @description A context menu item in the Console that stores selection as a temporary global variable\n   */\n  storeAsGlobalVariable: 'Store as global variable',\n  /**\n   * @description A context menu item in the Console, Sources, and Network panel\n   * @example {string} PH1\n   */\n  copyS: 'Copy {PH1}',\n  /**\n   * @description A context menu item for strings in the Console, Sources, and Network panel.\n   * When clicked, the raw contents of the string is copied to the clipboard.\n   */\n  copyStringContents: 'Copy string contents',\n  /**\n   * @description A context menu item for strings in the Console, Sources, and Network panel.\n   * When clicked, the string is copied to the clipboard as a valid JavaScript literal.\n   */\n  copyStringAsJSLiteral: 'Copy string as JavaScript literal',\n  /**\n   * @description A context menu item for strings in the Console, Sources, and Network panel.\n   * When clicked, the string is copied to the clipboard as a valid JSON literal.\n   */\n  copyStringAsJSONLiteral: 'Copy string as JSON literal',\n  /**\n   * @description A context menu item in the Sources Panel of the Sources panel\n   */\n  showFunctionDefinition: 'Show function definition',\n  /**\n   * @description Text in Sources Panel of the Sources panel\n   */\n  openInSourcesPanel: 'Open in Sources panel',\n  /**\n   * @description Text of a context menu item to redirect to the AI assistance panel and to start a chat.\n   */\n  startAChat: 'Start a chat',\n  /**\n   * @description Text of a context menu item to redirect to the AI assistance panel and directly execute\n   * a prompt to assess the performance of a script.\n   */\n  assessPerformance: 'Assess performance',\n  /**\n   * @description Context menu item in Sources panel to explain a script via AI.\n   */\n  explainThisScript: 'Explain this script',\n  /**\n   * @description Context menu item in Sources panel to explain input handling in a script via AI.\n   */\n  explainInputHandling: 'Explain input handling',\n} as const;\nconst str_ = i18n.i18n.registerUIStrings('panels/sources/SourcesPanel.ts', UIStrings);\nconst i18nString = i18n.i18n.getLocalizedString.bind(undefined, str_);\nconst primitiveRemoteObjectTypes = new Set(['number', 'boolean', 'bigint', 'undefined']);\nlet sourcesPanelInstance: SourcesPanel;\n\nexport class SourcesPanel extends UI.Panel.Panel implements\n    UI.ContextMenu.Provider<Workspace.UISourceCode.UISourceCode|Workspace.UISourceCode.UILocation|\n                            SDK.RemoteObject.RemoteObject|SDK.NetworkRequest.NetworkRequest|UISourceCodeFrame>,\n    SDK.TargetManager.Observer, UI.View.ViewLocationResolver {\n  private readonly workspace: Workspace.Workspace.WorkspaceImpl;\n  private readonly togglePauseAction: UI.ActionRegistration.Action;\n  private readonly stepOverAction: UI.ActionRegistration.Action;\n  private readonly stepIntoAction: UI.ActionRegistration.Action;\n  private readonly stepOutAction: UI.ActionRegistration.Action;\n  private readonly stepAction: UI.ActionRegistration.Action;\n  private readonly toggleBreakpointsActiveAction: UI.ActionRegistration.Action;\n  private readonly debugToolbar: UI.Toolbar.Toolbar;\n  private readonly debugToolbarDrawer: HTMLDivElement;\n  private readonly debuggerPausedMessage: DebuggerPausedMessage;\n  private overlayLoggables?: {debuggerPausedMessage: object, resumeButton: object, stepOverButton: object};\n  private splitWidget: UI.SplitWidget.SplitWidget;\n  editorView: UI.SplitWidget.SplitWidget;\n  private navigatorTabbedLocation: UI.View.TabbedViewLocation;\n  sourcesViewInternal: SourcesView;\n  private readonly toggleNavigatorSidebarButton: UI.Toolbar.ToolbarButton;\n  private readonly toggleDebuggerSidebarButton: UI.Toolbar.ToolbarButton;\n  private threadsSidebarPane: UI.View.View|null;\n  private readonly watchSidebarPane: UI.View.View;\n  private readonly callstackPane: CallStackSidebarPane;\n  private liveLocationPool: Bindings.LiveLocation.LiveLocationPool;\n  private lastModificationTime: number;\n  private pausedInternal?: boolean;\n  private switchToPausedTargetTimeout?: number;\n  private executionLineLocation?: Bindings.DebuggerWorkspaceBinding.Location|null;\n  private sidebarPaneStack?: UI.View.ViewLocation;\n  private tabbedLocationHeader?: Element|null;\n  private extensionSidebarPanesContainer?: UI.View.ViewLocation;\n  sidebarPaneView?: UI.Widget.VBox|UI.SplitWidget.SplitWidget;\n\n  #lastPausedTarget: WeakRef<SDK.Target.Target>|null = null;\n\n  constructor() {\n    super('sources');\n    this.registerRequiredCSS(sourcesPanelStyles);\n\n    new UI.DropTarget.DropTarget(\n        this.element, [UI.DropTarget.Type.Folder], i18nString(UIStrings.dropWorkspaceFolderHere),\n        this.handleDrop.bind(this));\n\n    this.workspace = Workspace.Workspace.WorkspaceImpl.instance();\n    this.togglePauseAction = UI.ActionRegistry.ActionRegistry.instance().getAction('debugger.toggle-pause');\n    this.stepOverAction = UI.ActionRegistry.ActionRegistry.instance().getAction('debugger.step-over');\n    this.stepIntoAction = UI.ActionRegistry.ActionRegistry.instance().getAction('debugger.step-into');\n    this.stepOutAction = UI.ActionRegistry.ActionRegistry.instance().getAction('debugger.step-out');\n    this.stepAction = UI.ActionRegistry.ActionRegistry.instance().getAction('debugger.step');\n    this.toggleBreakpointsActiveAction =\n        UI.ActionRegistry.ActionRegistry.instance().getAction('debugger.toggle-breakpoints-active');\n\n    this.debugToolbar = this.createDebugToolbar();\n    this.debugToolbarDrawer = this.createDebugToolbarDrawer();\n    this.debuggerPausedMessage = new DebuggerPausedMessage();\n\n    const initialDebugSidebarWidth = 225;\n    this.splitWidget =\n        new UI.SplitWidget.SplitWidget(true, true, 'sources-panel-split-view-state', initialDebugSidebarWidth);\n    this.splitWidget.enableShowModeSaving();\n    this.splitWidget.show(this.element);\n\n    // Create scripts navigator\n    const initialNavigatorWidth = 225;\n    this.editorView =\n        new UI.SplitWidget.SplitWidget(true, false, 'sources-panel-navigator-split-view-state', initialNavigatorWidth);\n    this.editorView.enableShowModeSaving();\n    this.splitWidget.setMainWidget(this.editorView);\n\n    // Create navigator tabbed pane with toolbar.\n    this.navigatorTabbedLocation = UI.ViewManager.ViewManager.instance().createTabbedLocation(\n        this.revealNavigatorSidebar.bind(this), 'navigator-view', true, true);\n    const tabbedPane = this.navigatorTabbedLocation.tabbedPane();\n    tabbedPane.setMinimumSize(100, 25);\n    tabbedPane.element.classList.add('navigator-tabbed-pane');\n    tabbedPane.headerElement().setAttribute(\n        'jslog',\n        `${VisualLogging.toolbar('navigator').track({keydown: 'ArrowUp|ArrowLeft|ArrowDown|ArrowRight|Enter|Space'})}`);\n    const navigatorMenuButton = new UI.ContextMenu.MenuButton();\n    navigatorMenuButton.populateMenuCall = this.populateNavigatorMenu.bind(this);\n    navigatorMenuButton.jslogContext = 'more-options';\n    navigatorMenuButton.iconName = 'dots-vertical';\n    navigatorMenuButton.title = i18nString(UIStrings.moreOptions);\n    tabbedPane.rightToolbar().appendToolbarItem(new UI.Toolbar.ToolbarItem(navigatorMenuButton));\n\n    if (UI.ViewManager.ViewManager.instance().hasViewsForLocation('run-view-sidebar')) {\n      const navigatorSplitWidget =\n          new UI.SplitWidget.SplitWidget(false, true, 'source-panel-navigator-sidebar-split-view-state');\n      navigatorSplitWidget.setMainWidget(tabbedPane);\n      const runViewTabbedPane = UI.ViewManager.ViewManager.instance()\n                                    .createTabbedLocation(this.revealNavigatorSidebar.bind(this), 'run-view-sidebar')\n                                    .tabbedPane();\n      navigatorSplitWidget.setSidebarWidget(runViewTabbedPane);\n      navigatorSplitWidget.installResizer(runViewTabbedPane.headerElement());\n      this.editorView.setSidebarWidget(navigatorSplitWidget);\n    } else {\n      this.editorView.setSidebarWidget(tabbedPane);\n    }\n\n    this.sourcesViewInternal = new SourcesView();\n    this.sourcesViewInternal.addEventListener(Events.EDITOR_SELECTED, this.editorSelected.bind(this));\n\n    this.toggleNavigatorSidebarButton = this.editorView.createShowHideSidebarButton(\n        i18nString(UIStrings.showNavigator), i18nString(UIStrings.hideNavigator), i18nString(UIStrings.navigatorShown),\n        i18nString(UIStrings.navigatorHidden), 'navigator');\n    this.toggleDebuggerSidebarButton = this.splitWidget.createShowHideSidebarButton(\n        i18nString(UIStrings.showDebugger), i18nString(UIStrings.hideDebugger), i18nString(UIStrings.debuggerShown),\n        i18nString(UIStrings.debuggerHidden), 'debugger');\n    this.editorView.setMainWidget(this.sourcesViewInternal);\n\n    this.threadsSidebarPane = null;\n    this.watchSidebarPane = UI.ViewManager.ViewManager.instance().view('sources.watch');\n    this.callstackPane = CallStackSidebarPane.instance();\n\n    Common.Settings.Settings.instance()\n        .moduleSetting('sidebar-position')\n        .addChangeListener(this.updateSidebarPosition.bind(this));\n    this.updateSidebarPosition();\n\n    void this.updateDebuggerButtonsAndStatus();\n\n    this.liveLocationPool = new Bindings.LiveLocation.LiveLocationPool();\n\n    this.setTarget(UI.Context.Context.instance().flavor(SDK.Target.Target));\n    Common.Settings.Settings.instance()\n        .moduleSetting('breakpoints-active')\n        .addChangeListener(this.breakpointsActiveStateChanged, this);\n    UI.Context.Context.instance().addFlavorChangeListener(SDK.Target.Target, this.onCurrentTargetChanged, this);\n    UI.Context.Context.instance().addFlavorChangeListener(SDK.DebuggerModel.CallFrame, this.callFrameChanged, this);\n    SDK.TargetManager.TargetManager.instance().addModelListener(\n        SDK.DebuggerModel.DebuggerModel, SDK.DebuggerModel.Events.DebuggerWasEnabled, this.debuggerWasEnabled, this);\n    SDK.TargetManager.TargetManager.instance().addModelListener(\n        SDK.DebuggerModel.DebuggerModel, SDK.DebuggerModel.Events.DebuggerPaused, this.debuggerPaused, this);\n    SDK.TargetManager.TargetManager.instance().addModelListener(\n        SDK.DebuggerModel.DebuggerModel, SDK.DebuggerModel.Events.DebugInfoAttached, this.debugInfoAttached, this);\n    SDK.TargetManager.TargetManager.instance().addModelListener(\n        SDK.DebuggerModel.DebuggerModel, SDK.DebuggerModel.Events.DebuggerResumed,\n        event => this.debuggerResumed(event.data));\n    SDK.TargetManager.TargetManager.instance().addModelListener(\n        SDK.DebuggerModel.DebuggerModel, SDK.DebuggerModel.Events.GlobalObjectCleared,\n        event => this.debuggerResumed(event.data));\n    Extensions.ExtensionServer.ExtensionServer.instance().addEventListener(\n        Extensions.ExtensionServer.Events.SidebarPaneAdded, this.extensionSidebarPaneAdded, this);\n    SDK.TargetManager.TargetManager.instance().observeTargets(this);\n    this.lastModificationTime = -Infinity;\n  }\n\n  static instance(opts: {\n    forceNew: boolean|null,\n  }|undefined = {forceNew: null}): SourcesPanel {\n    const {forceNew} = opts;\n    if (!sourcesPanelInstance || forceNew) {\n      sourcesPanelInstance = new SourcesPanel();\n    }\n\n    return sourcesPanelInstance;\n  }\n\n  static updateResizerAndSidebarButtons(panel: SourcesPanel): void {\n    panel.sourcesViewInternal.leftToolbar().removeToolbarItems();\n    panel.sourcesViewInternal.rightToolbar().removeToolbarItems();\n    panel.sourcesViewInternal.bottomToolbar().removeToolbarItems();\n    const isInWrapper = UI.Context.Context.instance().flavor(QuickSourceView) &&\n        !UI.InspectorView.InspectorView.instance().isDrawerMinimized();\n    if (panel.splitWidget.isVertical() || isInWrapper) {\n      panel.splitWidget.uninstallResizer(panel.sourcesViewInternal.scriptViewToolbar());\n    } else {\n      panel.splitWidget.installResizer(panel.sourcesViewInternal.scriptViewToolbar());\n    }\n    if (!isInWrapper) {\n      panel.sourcesViewInternal.leftToolbar().appendToolbarItem(panel.toggleNavigatorSidebarButton);\n      if (panel.splitWidget.isVertical()) {\n        panel.sourcesViewInternal.rightToolbar().appendToolbarItem(panel.toggleDebuggerSidebarButton);\n      } else {\n        panel.sourcesViewInternal.bottomToolbar().appendToolbarItem(panel.toggleDebuggerSidebarButton);\n      }\n    }\n  }\n\n  targetAdded(_target: SDK.Target.Target): void {\n    this.showThreadsIfNeeded();\n  }\n\n  targetRemoved(_target: SDK.Target.Target): void {\n  }\n\n  private showThreadsIfNeeded(): void {\n    if (ThreadsSidebarPane.shouldBeShown() && !this.threadsSidebarPane) {\n      this.threadsSidebarPane = UI.ViewManager.ViewManager.instance().view('sources.threads');\n      if (this.sidebarPaneStack && this.threadsSidebarPane) {\n        this.sidebarPaneStack.appendView(\n            this.threadsSidebarPane, this.splitWidget.isVertical() ? this.watchSidebarPane : this.callstackPane);\n      }\n    }\n  }\n\n  private setTarget(target: SDK.Target.Target|null): void {\n    if (!target) {\n      return;\n    }\n    const debuggerModel = target.model(SDK.DebuggerModel.DebuggerModel);\n    if (!debuggerModel) {\n      return;\n    }\n\n    if (debuggerModel.isPaused()) {\n      this.showDebuggerPausedDetails(\n          (debuggerModel.debuggerPausedDetails() as SDK.DebuggerModel.DebuggerPausedDetails));\n    } else {\n      this.pausedInternal = false;\n      this.clearInterface();\n      this.toggleDebuggerSidebarButton.setEnabled(true);\n    }\n  }\n\n  private onCurrentTargetChanged({data: target}: Common.EventTarget.EventTargetEvent<SDK.Target.Target|null>): void {\n    this.setTarget(target);\n  }\n  paused(): boolean {\n    return this.pausedInternal || false;\n  }\n\n  override wasShown(): void {\n    UI.Context.Context.instance().setFlavor(SourcesPanel, this);\n    super.wasShown();\n    if (UI.Context.Context.instance().flavor(QuickSourceView)) {\n      UI.InspectorView.InspectorView.instance().setDrawerMinimized(true);\n      SourcesPanel.updateResizerAndSidebarButtons(this);\n    }\n    this.editorView.setMainWidget(this.sourcesViewInternal);\n  }\n\n  override willHide(): void {\n    super.willHide();\n    UI.Context.Context.instance().setFlavor(SourcesPanel, null);\n    const wrapperView = UI.Context.Context.instance().flavor(QuickSourceView);\n    if (wrapperView) {\n      wrapperView.showViewInWrapper();\n      UI.InspectorView.InspectorView.instance().setDrawerMinimized(false);\n      SourcesPanel.updateResizerAndSidebarButtons(this);\n    }\n  }\n\n  resolveLocation(locationName: string): UI.View.ViewLocation|null {\n    if (locationName === 'sources.sidebar-top' || locationName === 'sources.sidebar-bottom' ||\n        locationName === 'sources.sidebar-tabs') {\n      return this.sidebarPaneStack || null;\n    }\n    return this.navigatorTabbedLocation;\n  }\n\n  ensureSourcesViewVisible(): boolean {\n    if (UI.Context.Context.instance().flavor(QuickSourceView)) {\n      return true;\n    }\n    if (!UI.InspectorView.InspectorView.instance().canSelectPanel('sources')) {\n      return false;\n    }\n    void UI.ViewManager.ViewManager.instance().showView('sources');\n    return true;\n  }\n\n  override onResize(): void {\n    if (Common.Settings.Settings.instance().moduleSetting('sidebar-position').get() === 'auto') {\n      this.element.window().requestAnimationFrame(this.updateSidebarPosition.bind(this));\n    }  // Do not force layout.\n  }\n\n  override searchableView(): UI.SearchableView.SearchableView {\n    return this.sourcesViewInternal.searchableView();\n  }\n\n  toggleNavigatorSidebar(): void {\n    this.editorView.toggleSidebar();\n  }\n\n  toggleDebuggerSidebar(): void {\n    this.splitWidget.toggleSidebar();\n  }\n\n  private debuggerPaused(event: Common.EventTarget.EventTargetEvent<SDK.DebuggerModel.DebuggerModel>): void {\n    const debuggerModel = event.data;\n    const details = debuggerModel.debuggerPausedDetails();\n    if (!this.pausedInternal &&\n        Common.Settings.Settings.instance().moduleSetting('auto-focus-on-debugger-paused-enabled').get()) {\n      void this.setAsCurrentPanel();\n    }\n\n    if (UI.Context.Context.instance().flavor(SDK.Target.Target) === debuggerModel.target()) {\n      this.showDebuggerPausedDetails((details as SDK.DebuggerModel.DebuggerPausedDetails));\n    } else if (!this.pausedInternal) {\n      UI.Context.Context.instance().setFlavor(SDK.Target.Target, debuggerModel.target());\n    }\n  }\n\n  private debugInfoAttached(event: Common.EventTarget.EventTargetEvent<SDK.Script.Script>): void {\n    const {debuggerModel} = event.data;\n    if (!debuggerModel.isPaused()) {\n      return;\n    }\n\n    const details = debuggerModel.debuggerPausedDetails();\n    if (details && UI.Context.Context.instance().flavor(SDK.Target.Target) === debuggerModel.target()) {\n      this.showDebuggerPausedDetails(details);\n    }\n  }\n\n  private showDebuggerPausedDetails(details: SDK.DebuggerModel.DebuggerPausedDetails): void {\n    this.pausedInternal = true;\n    void this.updateDebuggerButtonsAndStatus();\n    UI.Context.Context.instance().setFlavor(SDK.DebuggerModel.DebuggerPausedDetails, details);\n    this.toggleDebuggerSidebarButton.setEnabled(false);\n    this.revealDebuggerSidebar();\n    const pausedTarget = details.debuggerModel.target();\n    if (this.threadsSidebarPane && this.#lastPausedTarget?.deref() !== pausedTarget &&\n        pausedTarget !== SDK.TargetManager.TargetManager.instance().primaryPageTarget()) {\n      // If we pause in something other than the main frame (e.g. worker), we should expand the\n      // \"Threads\" list to make it more clear which target is paused. We do this only if the target of\n      // the previous pause is different from the new pause to prevent annoying the user by re-opening\n      // the \"Threads\" list while stepping or hitting the same breakpoint multiple points.\n      void this.sidebarPaneStack?.showView(this.threadsSidebarPane);\n    }\n\n    window.focus();\n    Host.InspectorFrontendHost.InspectorFrontendHostInstance.bringToFront();\n    const withOverlay = UI.Context.Context.instance().flavor(SDK.Target.Target)?.model(SDK.OverlayModel.OverlayModel) &&\n        !Common.Settings.Settings.instance().moduleSetting('disable-paused-state-overlay').get();\n    if (withOverlay && !this.overlayLoggables) {\n      this.overlayLoggables = {debuggerPausedMessage: {}, resumeButton: {}, stepOverButton: {}};\n      VisualLogging.registerLoggable(\n          this.overlayLoggables.debuggerPausedMessage, `${VisualLogging.dialog('debugger-paused')}`, null,\n          new DOMRect(0, 0, 200, 20));\n      VisualLogging.registerLoggable(\n          this.overlayLoggables.resumeButton, `${VisualLogging.action('debugger.toggle-pause')}`,\n          this.overlayLoggables.debuggerPausedMessage, new DOMRect(0, 0, 20, 20));\n      VisualLogging.registerLoggable(\n          this.overlayLoggables.stepOverButton, `${VisualLogging.action('debugger.step-over')}`,\n          this.overlayLoggables.debuggerPausedMessage, new DOMRect(0, 0, 20, 20));\n    }\n    this.#lastPausedTarget = new WeakRef(details.debuggerModel.target());\n  }\n\n  private maybeLogOverlayAction(): void {\n    if (!this.overlayLoggables) {\n      return;\n    }\n    const byOverlayButton = !document.hasFocus();\n    // In the overlay we show two buttons: resume and step over. Both trigger\n    // the Debugger.resumed event. The latter however will trigger\n    // Debugger.paused shortly after, while the former won't. Here we guess\n    // which one was clicked by checking if we are paused again after 0.5s.\n    window.setTimeout(() => {\n      if (!this.overlayLoggables) {\n        return;\n      }\n      if (byOverlayButton) {\n        const details = UI.Context.Context.instance().flavor(SDK.DebuggerModel.DebuggerPausedDetails);\n        VisualLogging.logClick(\n            this.pausedInternal && details?.reason === Protocol.Debugger.PausedEventReason.Step ?\n                this.overlayLoggables.stepOverButton :\n                this.overlayLoggables.resumeButton,\n            new MouseEvent('click'));\n      }\n      if (!this.pausedInternal) {\n        VisualLogging.logResize(this.overlayLoggables.debuggerPausedMessage, new DOMRect(0, 0, 0, 0));\n        this.overlayLoggables = undefined;\n      }\n    }, 500);\n  }\n\n  private debuggerResumed(debuggerModel: SDK.DebuggerModel.DebuggerModel): void {\n    this.maybeLogOverlayAction();\n    const target = debuggerModel.target();\n    if (UI.Context.Context.instance().flavor(SDK.Target.Target) !== target) {\n      return;\n    }\n    this.pausedInternal = false;\n    this.clearInterface();\n    this.toggleDebuggerSidebarButton.setEnabled(true);\n    this.switchToPausedTargetTimeout = window.setTimeout(this.switchToPausedTarget.bind(this, debuggerModel), 500);\n  }\n\n  private debuggerWasEnabled(event: Common.EventTarget.EventTargetEvent<SDK.DebuggerModel.DebuggerModel>): void {\n    const debuggerModel = event.data;\n    if (UI.Context.Context.instance().flavor(SDK.Target.Target) !== debuggerModel.target()) {\n      return;\n    }\n\n    void this.updateDebuggerButtonsAndStatus();\n  }\n\n  get visibleView(): UI.Widget.Widget|null {\n    return this.sourcesViewInternal.visibleView();\n  }\n\n  showUISourceCode(\n      uiSourceCode: Workspace.UISourceCode.UISourceCode, location?: SourceFrame.SourceFrame.RevealPosition,\n      omitFocus?: boolean): void {\n    if (omitFocus) {\n      if (!this.isShowing() && !UI.Context.Context.instance().flavor(QuickSourceView)) {\n        return;\n      }\n    } else {\n      this.showEditor();\n    }\n    this.sourcesViewInternal.showSourceLocation(uiSourceCode, location, omitFocus);\n  }\n\n  private showEditor(): void {\n    if (UI.Context.Context.instance().flavor(QuickSourceView)) {\n      return;\n    }\n    void this.setAsCurrentPanel();\n  }\n\n  showUILocation(uiLocation: Workspace.UISourceCode.UILocation, omitFocus?: boolean): void {\n    const {uiSourceCode, lineNumber, columnNumber} = uiLocation;\n    this.showUISourceCode(uiSourceCode, {lineNumber, columnNumber}, omitFocus);\n  }\n\n  async revealInNavigator(uiSourceCode: Workspace.UISourceCode.UISourceCode, skipReveal?: boolean): Promise<void> {\n    const viewManager = UI.ViewManager.ViewManager.instance();\n    for (const view of viewManager.viewsForLocation(UI.ViewManager.ViewLocationValues.NAVIGATOR_VIEW)) {\n      const navigatorView = await view.widget();\n      if (navigatorView instanceof NavigatorView && navigatorView.acceptProject(uiSourceCode.project())) {\n        navigatorView.revealUISourceCode(uiSourceCode, true);\n        this.navigatorTabbedLocation.tabbedPane().selectTab(view.viewId(), true);\n        if (!skipReveal) {\n          this.editorView.showBoth(true);\n          navigatorView.focus();\n        }\n        break;\n      }\n    }\n  }\n\n  private addExperimentMenuItem(\n      menuSection: UI.ContextMenu.Section, experiment: string, menuItem: Common.UIString.LocalizedString): void {\n    // menu handler\n    function toggleExperiment(): void {\n      const checked = Root.Runtime.experiments.isEnabled(experiment);\n      Root.Runtime.experiments.setEnabled(experiment, !checked);\n      Host.userMetrics.experimentChanged(experiment, checked);\n      // Need to signal to the NavigatorView that grouping has changed. Unfortunately,\n      // it can't listen to an experiment, and this class doesn't directly interact\n      // with it, so we will convince it a different grouping setting changed. When we switch\n      // from using an experiment to a setting, it will listen to that setting and we\n      // won't need to do this.\n      const groupByFolderSetting = Common.Settings.Settings.instance().moduleSetting('navigator-group-by-folder');\n      groupByFolderSetting.set(groupByFolderSetting.get());\n    }\n\n    menuSection.appendCheckboxItem(menuItem, toggleExperiment, {\n      checked: Root.Runtime.experiments.isEnabled(experiment),\n      experimental: true,\n      jslogContext: Platform.StringUtilities.toKebabCase(experiment),\n    });\n  }\n\n  private populateNavigatorMenu(contextMenu: UI.ContextMenu.ContextMenu): void {\n    const groupByFolderSetting = Common.Settings.Settings.instance().moduleSetting('navigator-group-by-folder');\n    contextMenu.appendItemsAtLocation('navigatorMenu');\n    contextMenu.viewSection().appendCheckboxItem(\n        i18nString(UIStrings.groupByFolder), () => groupByFolderSetting.set(!groupByFolderSetting.get()),\n        {checked: groupByFolderSetting.get(), jslogContext: groupByFolderSetting.name});\n\n    this.addExperimentMenuItem(\n        contextMenu.viewSection(), Root.Runtime.ExperimentName.AUTHORED_DEPLOYED_GROUPING,\n        i18nString(UIStrings.groupByAuthored));\n    this.addExperimentMenuItem(\n        contextMenu.viewSection(), Root.Runtime.ExperimentName.JUST_MY_CODE, i18nString(UIStrings.hideIgnoreListed));\n  }\n\n  updateLastModificationTime(): void {\n    this.lastModificationTime = window.performance.now();\n  }\n\n  private async executionLineChanged(liveLocation: Bindings.LiveLocation.LiveLocation): Promise<void> {\n    const uiLocation = await liveLocation.uiLocation();\n    if (liveLocation.isDisposed()) {\n      return;\n    }\n    if (!uiLocation) {\n      return;\n    }\n    if (window.performance.now() - this.lastModificationTime < lastModificationTimeout) {\n      return;\n    }\n    this.sourcesViewInternal.showSourceLocation(uiLocation.uiSourceCode, uiLocation, undefined, true);\n  }\n\n  private async callFrameChanged(): Promise<void> {\n    const callFrame = UI.Context.Context.instance().flavor(SDK.DebuggerModel.CallFrame);\n    if (!callFrame) {\n      return;\n    }\n    if (this.executionLineLocation) {\n      this.executionLineLocation.dispose();\n    }\n    this.executionLineLocation =\n        await Bindings.DebuggerWorkspaceBinding.DebuggerWorkspaceBinding.instance().createCallFrameLiveLocation(\n            callFrame.location(), this.executionLineChanged.bind(this), this.liveLocationPool);\n  }\n\n  private async updateDebuggerButtonsAndStatus(): Promise<void> {\n    const currentTarget = UI.Context.Context.instance().flavor(SDK.Target.Target);\n    const currentDebuggerModel = currentTarget ? currentTarget.model(SDK.DebuggerModel.DebuggerModel) : null;\n    if (!currentDebuggerModel) {\n      this.togglePauseAction.setEnabled(false);\n      this.stepOverAction.setEnabled(false);\n      this.stepIntoAction.setEnabled(false);\n      this.stepOutAction.setEnabled(false);\n      this.stepAction.setEnabled(false);\n    } else if (this.pausedInternal) {\n      this.togglePauseAction.setToggled(true);\n      this.togglePauseAction.setEnabled(true);\n      this.stepOverAction.setEnabled(true);\n      this.stepIntoAction.setEnabled(true);\n      this.stepOutAction.setEnabled(true);\n      this.stepAction.setEnabled(true);\n    } else {\n      this.togglePauseAction.setToggled(false);\n      this.togglePauseAction.setEnabled(!currentDebuggerModel.isPausing());\n      this.stepOverAction.setEnabled(false);\n      this.stepIntoAction.setEnabled(false);\n      this.stepOutAction.setEnabled(false);\n      this.stepAction.setEnabled(false);\n    }\n\n    const details = currentDebuggerModel ? currentDebuggerModel.debuggerPausedDetails() : null;\n    await this.debuggerPausedMessage.render(\n        details, Bindings.DebuggerWorkspaceBinding.DebuggerWorkspaceBinding.instance(),\n        Breakpoints.BreakpointManager.BreakpointManager.instance());\n    if (details) {\n      this.updateDebuggerButtonsAndStatusForTest();\n    }\n  }\n\n  private updateDebuggerButtonsAndStatusForTest(): void {\n  }\n\n  private clearInterface(): void {\n    void this.updateDebuggerButtonsAndStatus();\n    UI.Context.Context.instance().setFlavor(SDK.DebuggerModel.DebuggerPausedDetails, null);\n\n    if (this.switchToPausedTargetTimeout) {\n      clearTimeout(this.switchToPausedTargetTimeout);\n    }\n    this.liveLocationPool.disposeAll();\n  }\n\n  private switchToPausedTarget(debuggerModel: SDK.DebuggerModel.DebuggerModel): void {\n    delete this.switchToPausedTargetTimeout;\n    if (this.pausedInternal || debuggerModel.isPaused()) {\n      return;\n    }\n\n    for (const debuggerModel of SDK.TargetManager.TargetManager.instance().models(SDK.DebuggerModel.DebuggerModel)) {\n      if (debuggerModel.isPaused()) {\n        UI.Context.Context.instance().setFlavor(SDK.Target.Target, debuggerModel.target());\n        break;\n      }\n    }\n  }\n\n  runSnippet(): void {\n    const uiSourceCode = this.sourcesViewInternal.currentUISourceCode();\n    if (uiSourceCode) {\n      void Snippets.ScriptSnippetFileSystem.evaluateScriptSnippet(uiSourceCode);\n    }\n  }\n\n  private editorSelected(event: Common.EventTarget.EventTargetEvent<Workspace.UISourceCode.UISourceCode>): void {\n    const uiSourceCode = event.data;\n    UI.Context.Context.instance().setFlavor(Workspace.UISourceCode.UISourceCode, uiSourceCode);\n    if (this.editorView.mainWidget() &&\n        Common.Settings.Settings.instance().moduleSetting('auto-reveal-in-navigator').get()) {\n      void this.revealInNavigator(uiSourceCode, true);\n    }\n  }\n\n  togglePause(): boolean {\n    const target = UI.Context.Context.instance().flavor(SDK.Target.Target);\n    if (!target) {\n      return true;\n    }\n    const debuggerModel = target.model(SDK.DebuggerModel.DebuggerModel);\n    if (!debuggerModel) {\n      return true;\n    }\n\n    if (this.pausedInternal) {\n      this.pausedInternal = false;\n      debuggerModel.resume();\n    } else {\n      // Make sure pauses didn't stick skipped.\n      debuggerModel.pause();\n    }\n\n    this.clearInterface();\n    return true;\n  }\n\n  private prepareToResume(): SDK.DebuggerModel.DebuggerModel|null {\n    if (!this.pausedInternal) {\n      return null;\n    }\n\n    this.pausedInternal = false;\n\n    this.clearInterface();\n    const target = UI.Context.Context.instance().flavor(SDK.Target.Target);\n    return target ? target.model(SDK.DebuggerModel.DebuggerModel) : null;\n  }\n\n  private longResume(): void {\n    const debuggerModel = this.prepareToResume();\n    if (debuggerModel) {\n      debuggerModel.skipAllPausesUntilReloadOrTimeout(500);\n      debuggerModel.resume();\n    }\n  }\n\n  private terminateExecution(): void {\n    const debuggerModel = this.prepareToResume();\n    if (debuggerModel) {\n      void debuggerModel.runtimeModel().terminateExecution();\n      debuggerModel.resume();\n    }\n  }\n\n  stepOver(): boolean {\n    const debuggerModel = this.prepareToResume();\n    if (debuggerModel) {\n      void debuggerModel.stepOver();\n    }\n    return true;\n  }\n\n  stepInto(): boolean {\n    const debuggerModel = this.prepareToResume();\n    if (debuggerModel) {\n      void debuggerModel.stepInto();\n    }\n    return true;\n  }\n\n  stepIntoAsync(): boolean {\n    const debuggerModel = this.prepareToResume();\n    if (debuggerModel) {\n      debuggerModel.scheduleStepIntoAsync();\n    }\n    return true;\n  }\n\n  stepOut(): boolean {\n    const debuggerModel = this.prepareToResume();\n    if (debuggerModel) {\n      void debuggerModel.stepOut();\n    }\n    return true;\n  }\n\n  private async continueToLocation(uiLocation: Workspace.UISourceCode.UILocation): Promise<void> {\n    const executionContext = UI.Context.Context.instance().flavor(SDK.RuntimeModel.ExecutionContext);\n    if (!executionContext) {\n      return;\n    }\n    // Always use 0 column.\n    const rawLocations =\n        await Bindings.DebuggerWorkspaceBinding.DebuggerWorkspaceBinding.instance().uiLocationToRawLocations(\n            uiLocation.uiSourceCode, uiLocation.lineNumber, 0);\n    const rawLocation = rawLocations.find(location => location.debuggerModel === executionContext.debuggerModel);\n    if (rawLocation && this.prepareToResume()) {\n      rawLocation.continueToLocation();\n    }\n  }\n\n  toggleBreakpointsActive(): void {\n    Common.Settings.Settings.instance()\n        .moduleSetting('breakpoints-active')\n        .set(!Common.Settings.Settings.instance().moduleSetting('breakpoints-active').get());\n  }\n\n  private breakpointsActiveStateChanged(): void {\n    const active = Common.Settings.Settings.instance().moduleSetting('breakpoints-active').get();\n    this.toggleBreakpointsActiveAction.setToggled(!active);\n    this.sourcesViewInternal.toggleBreakpointsActiveState(active);\n  }\n\n  private createDebugToolbar(): UI.Toolbar.Toolbar {\n    const debugToolbar = document.createElement('devtools-toolbar');\n    debugToolbar.classList.add('scripts-debug-toolbar');\n    debugToolbar.setAttribute(\n        'jslog',\n        `${VisualLogging.toolbar('debug').track({keydown: 'ArrowUp|ArrowLeft|ArrowDown|ArrowRight|Enter|Space'})}`);\n\n    const longResumeButton =\n        new UI.Toolbar.ToolbarButton(i18nString(UIStrings.resumeWithAllPausesBlockedForMs), 'play');\n    longResumeButton.addEventListener(UI.Toolbar.ToolbarButton.Events.CLICK, this.longResume, this);\n    const terminateExecutionButton =\n        new UI.Toolbar.ToolbarButton(i18nString(UIStrings.terminateCurrentJavascriptCall), 'stop');\n    terminateExecutionButton.addEventListener(UI.Toolbar.ToolbarButton.Events.CLICK, this.terminateExecution, this);\n    const pauseActionButton = UI.Toolbar.Toolbar.createLongPressActionButton(\n        this.togglePauseAction, [terminateExecutionButton, longResumeButton], []);\n    pauseActionButton.toggleOnClick(false);\n    debugToolbar.appendToolbarItem(pauseActionButton);\n\n    debugToolbar.appendToolbarItem(UI.Toolbar.Toolbar.createActionButton(this.stepOverAction));\n    debugToolbar.appendToolbarItem(UI.Toolbar.Toolbar.createActionButton(this.stepIntoAction));\n    debugToolbar.appendToolbarItem(UI.Toolbar.Toolbar.createActionButton(this.stepOutAction));\n    debugToolbar.appendToolbarItem(UI.Toolbar.Toolbar.createActionButton(this.stepAction));\n\n    debugToolbar.appendSeparator();\n    debugToolbar.appendToolbarItem(UI.Toolbar.Toolbar.createActionButton(this.toggleBreakpointsActiveAction));\n\n    return debugToolbar;\n  }\n\n  private createDebugToolbarDrawer(): HTMLDivElement {\n    const debugToolbarDrawer = document.createElement('div');\n    debugToolbarDrawer.classList.add('scripts-debug-toolbar-drawer');\n\n    const label = i18nString(UIStrings.pauseOnCaughtExceptions);\n    const setting = Common.Settings.Settings.instance().moduleSetting('pause-on-caught-exception');\n    debugToolbarDrawer.appendChild(UI.SettingsUI.createSettingCheckbox(label, setting));\n\n    return debugToolbarDrawer;\n  }\n\n  appendApplicableItems(\n      event: Event, contextMenu: UI.ContextMenu.ContextMenu,\n      target: Workspace.UISourceCode.UISourceCode|Workspace.UISourceCode.UILocation|SDK.RemoteObject.RemoteObject|\n      SDK.NetworkRequest.NetworkRequest|UISourceCodeFrame): void {\n    if (target instanceof Workspace.UISourceCode.UISourceCode) {\n      this.appendUISourceCodeItems(event, contextMenu, target);\n      return;\n    }\n    if (target instanceof UISourceCodeFrame) {\n      this.appendUISourceCodeFrameItems(contextMenu, target);\n      return;\n    }\n    if (target instanceof Workspace.UISourceCode.UILocation) {\n      this.appendUILocationItems(contextMenu, target);\n      return;\n    }\n    if (target instanceof SDK.RemoteObject.RemoteObject) {\n      this.appendRemoteObjectItems(contextMenu, target);\n      return;\n    }\n    this.appendNetworkRequestItems(contextMenu, target);\n  }\n\n  private appendUISourceCodeItems(\n      event: Event, contextMenu: UI.ContextMenu.ContextMenu, uiSourceCode: Workspace.UISourceCode.UISourceCode): void {\n    if (!event.target) {\n      return;\n    }\n\n    const eventTarget = (event.target as Node);\n    if (!uiSourceCode.project().isServiceProject() &&\n        !eventTarget.isSelfOrDescendant(this.navigatorTabbedLocation.widget().element) &&\n        !(Root.Runtime.experiments.isEnabled(Root.Runtime.ExperimentName.JUST_MY_CODE) &&\n          Workspace.IgnoreListManager.IgnoreListManager.instance().isUserOrSourceMapIgnoreListedUISourceCode(\n              uiSourceCode))) {\n      contextMenu.revealSection().appendItem(\n          i18nString(UIStrings.revealInSidebar), this.revealInNavigator.bind(this, uiSourceCode), {\n            jslogContext: 'sources.reveal-in-navigator-sidebar',\n          });\n    }\n\n    const openAiAssistanceId = 'drjones.sources-panel-context';\n    if (UI.ActionRegistry.ActionRegistry.instance().hasAction(openAiAssistanceId)) {\n      const editorElement = this.element.querySelector('devtools-text-editor');\n      if (!eventTarget.isSelfOrDescendant(editorElement) && uiSourceCode.contentType().isTextType()) {\n        UI.Context.Context.instance().setFlavor(Workspace.UISourceCode.UISourceCode, uiSourceCode);\n        if (Root.Runtime.hostConfig.devToolsAiSubmenuPrompts?.enabled) {\n          const action = UI.ActionRegistry.ActionRegistry.instance().getAction(openAiAssistanceId);\n          const submenu = contextMenu.footerSection().appendSubMenuItem(\n              action.title(), false, openAiAssistanceId,\n              Root.Runtime.hostConfig.devToolsAiAssistanceFileAgent?.featureName);\n          submenu.defaultSection().appendAction('drjones.sources-panel-context', i18nString(UIStrings.startAChat));\n          appendSubmenuPromptAction(\n              submenu, action, i18nString(UIStrings.assessPerformance), 'Is this script optimized for performance?',\n              openAiAssistanceId + '.performance');\n          appendSubmenuPromptAction(\n              submenu, action, i18nString(UIStrings.explainThisScript), 'What does this script do?',\n              openAiAssistanceId + '.script');\n          appendSubmenuPromptAction(\n              submenu, action, i18nString(UIStrings.explainInputHandling), 'Does the script handle user input safely',\n              openAiAssistanceId + '.input');\n        } else if (Root.Runtime.hostConfig.devToolsAiDebugWithAi?.enabled) {\n          contextMenu.footerSection().appendAction(\n              openAiAssistanceId, undefined, false, undefined,\n              Root.Runtime.hostConfig.devToolsAiAssistanceFileAgent?.featureName);\n        } else {\n          contextMenu.footerSection().appendAction(openAiAssistanceId);\n        }\n      }\n    }\n\n    // Ignore list only works for JavaScript debugging.\n    if (uiSourceCode.contentType().hasScripts() &&\n        Bindings.DebuggerWorkspaceBinding.DebuggerWorkspaceBinding.instance()\n            .scriptsForUISourceCode(uiSourceCode)\n            .every(script => script.isJavaScript())) {\n      this.callstackPane.appendIgnoreListURLContextMenuItems(contextMenu, uiSourceCode);\n    }\n\n    function appendSubmenuPromptAction(\n        submenu: UI.ContextMenu.SubMenu, action: UI.ActionRegistration.Action, label: Common.UIString.LocalizedString,\n        prompt: string, jslogContext: string): void {\n      submenu.defaultSection().appendItem(\n          label, () => action.execute({prompt}), {disabled: !action.enabled(), jslogContext});\n    }\n  }\n\n  private appendUISourceCodeFrameItems(contextMenu: UI.ContextMenu.ContextMenu, target: UISourceCodeFrame): void {\n    if (target.uiSourceCode().contentType().isFromSourceMap() || target.textEditor.state.selection.main.empty) {\n      return;\n    }\n    contextMenu.debugSection().appendAction('debugger.evaluate-selection');\n  }\n\n  appendUILocationItems(contextMenu: UI.ContextMenu.ContextMenu, uiLocation: Workspace.UISourceCode.UILocation): void {\n    const uiSourceCode = uiLocation.uiSourceCode;\n\n    if (!Bindings.DebuggerWorkspaceBinding.DebuggerWorkspaceBinding.instance()\n             .scriptsForUISourceCode(uiSourceCode)\n             .every(script => script.isJavaScript())) {\n      // Ignore List and 'Continue to here' currently only works for JavaScript debugging.\n      return;\n    }\n    const contentType = uiSourceCode.contentType();\n    if (contentType.hasScripts()) {\n      const target = UI.Context.Context.instance().flavor(SDK.Target.Target);\n      const debuggerModel = target ? target.model(SDK.DebuggerModel.DebuggerModel) : null;\n      if (debuggerModel?.isPaused()) {\n        contextMenu.debugSection().appendItem(\n            i18nString(UIStrings.continueToHere), this.continueToLocation.bind(this, uiLocation),\n            {jslogContext: 'continue-to-here'});\n      }\n\n      this.callstackPane.appendIgnoreListURLContextMenuItems(contextMenu, uiSourceCode);\n    }\n  }\n\n  private appendRemoteObjectItems(contextMenu: UI.ContextMenu.ContextMenu, remoteObject: SDK.RemoteObject.RemoteObject):\n      void {\n    const indent = Common.Settings.Settings.instance().moduleSetting('text-editor-indent').get();\n    const executionContext = UI.Context.Context.instance().flavor(SDK.RuntimeModel.ExecutionContext);\n\n    function getObjectTitle(): string|undefined {\n      if (remoteObject.type === 'wasm') {\n        return remoteObject.subtype;\n      }\n      if (remoteObject.subtype === 'node') {\n        return 'outerHTML';\n      }\n      return remoteObject.type;\n    }\n    const copyContextMenuTitle = getObjectTitle();\n\n    contextMenu.debugSection().appendItem(\n        i18nString(UIStrings.storeAsGlobalVariable),\n        () => executionContext?.target()\n                  .model(SDK.ConsoleModel.ConsoleModel)\n                  ?.saveToTempVariable(executionContext, remoteObject),\n        {jslogContext: 'store-as-global-variable'});\n\n    const ctxMenuClipboardSection = contextMenu.clipboardSection();\n    const inspectorFrontendHost = Host.InspectorFrontendHost.InspectorFrontendHostInstance;\n\n    if (remoteObject.type === 'string') {\n      ctxMenuClipboardSection.appendItem(i18nString(UIStrings.copyStringContents), () => {\n        inspectorFrontendHost.copyText(remoteObject.value);\n      }, {jslogContext: 'copy-string-contents'});\n      ctxMenuClipboardSection.appendItem(i18nString(UIStrings.copyStringAsJSLiteral), () => {\n        inspectorFrontendHost.copyText(Platform.StringUtilities.formatAsJSLiteral(remoteObject.value));\n      }, {jslogContext: 'copy-string-as-js-literal'});\n      ctxMenuClipboardSection.appendItem(i18nString(UIStrings.copyStringAsJSONLiteral), () => {\n        inspectorFrontendHost.copyText(JSON.stringify(remoteObject.value));\n      }, {jslogContext: 'copy-string-as-json-literal'});\n    }\n    // We are trying to copy a primitive value.\n    else if (primitiveRemoteObjectTypes.has(remoteObject.type)) {\n      ctxMenuClipboardSection.appendItem(i18nString(UIStrings.copyS, {PH1: String(copyContextMenuTitle)}), () => {\n        inspectorFrontendHost.copyText(remoteObject.description);\n      }, {jslogContext: 'copy-primitive'});\n    }\n    // We are trying to copy a remote object.\n    else if (remoteObject.type === 'object') {\n      const copyDecodedValueHandler = async(): Promise<void> => {\n        const result = await remoteObject.callFunctionJSON(toStringForClipboard, [{\n                                                             value: {\n                                                               subtype: remoteObject.subtype,\n                                                               indent,\n                                                             },\n                                                           }]);\n        inspectorFrontendHost.copyText(result);\n      };\n\n      ctxMenuClipboardSection.appendItem(\n          i18nString(UIStrings.copyS, {PH1: String(copyContextMenuTitle)}), copyDecodedValueHandler,\n          {jslogContext: 'copy-object'});\n    }\n\n    else if (remoteObject.type === 'function') {\n      contextMenu.debugSection().appendItem(\n          i18nString(UIStrings.showFunctionDefinition), this.showFunctionDefinition.bind(this, remoteObject),\n          {jslogContext: 'show-function-definition'});\n    }\n\n    function toStringForClipboard(this: Object, data: {subtype: string, indent: string}): string|undefined {\n      const subtype = data.subtype;\n      const indent = data.indent;\n\n      if (subtype === 'map') {\n        if (this instanceof Map) {\n          const elements = Array.from(this.entries());\n          const literal = elements.length === 0 ? '' : JSON.stringify(elements, null, indent);\n          return `new Map(${literal})`;\n        }\n        return undefined;\n      }\n      if (subtype === 'set') {\n        if (this instanceof Set) {\n          const values = Array.from(this.values());\n          const literal = values.length === 0 ? '' : JSON.stringify(values, null, indent);\n          return `new Set(${literal})`;\n        }\n        return undefined;\n      }\n      if (subtype === 'node') {\n        return this instanceof Element ? this.outerHTML : undefined;\n      }\n      if (subtype && typeof this === 'undefined') {\n        return String(subtype);\n      }\n      try {\n        return JSON.stringify(this, null, indent);\n      } catch {\n        return String(this);\n      }\n    }\n  }\n\n  private appendNetworkRequestItems(\n      contextMenu: UI.ContextMenu.ContextMenu, request: SDK.NetworkRequest.NetworkRequest): void {\n    const uiSourceCode = this.workspace.uiSourceCodeForURL(request.url());\n    if (!uiSourceCode) {\n      return;\n    }\n    const openText = i18nString(UIStrings.openInSourcesPanel);\n    const callback: () => void = this.showUILocation.bind(this, uiSourceCode.uiLocation(0, 0));\n    contextMenu.revealSection().appendItem(openText, callback, {jslogContext: 'reveal-in-sources'});\n  }\n\n  private showFunctionDefinition(remoteObject: SDK.RemoteObject.RemoteObject): void {\n    void SDK.RemoteObject.RemoteFunction.objectAsFunction(remoteObject)\n        .targetFunction()\n        .then(\n            targetFunction => targetFunction.debuggerModel()\n                                  .functionDetailsPromise(targetFunction)\n                                  .then(this.didGetFunctionDetails.bind(this)));\n  }\n\n  private async didGetFunctionDetails(response: {\n    location: SDK.DebuggerModel.Location|null,\n  }|null): Promise<void> {\n    if (!response?.location) {\n      return;\n    }\n\n    const uiLocation =\n        await Bindings.DebuggerWorkspaceBinding.DebuggerWorkspaceBinding.instance().rawLocationToUILocation(\n            response.location);\n    if (uiLocation) {\n      this.showUILocation(uiLocation);\n    }\n  }\n\n  private revealNavigatorSidebar(): void {\n    void this.setAsCurrentPanel();\n    this.editorView.showBoth(true);\n  }\n\n  private revealDebuggerSidebar(): void {\n    if (!Common.Settings.Settings.instance().moduleSetting('auto-focus-on-debugger-paused-enabled').get()) {\n      return;\n    }\n    void this.setAsCurrentPanel();\n    this.splitWidget.showBoth(true);\n  }\n\n  private updateSidebarPosition(): void {\n    let vertically;\n    const position = Common.Settings.Settings.instance().moduleSetting('sidebar-position').get();\n    if (position === 'right') {\n      vertically = false;\n    } else if (position === 'bottom') {\n      vertically = true;\n    } else {\n      vertically = UI.InspectorView.InspectorView.instance().element.offsetWidth < 680;\n    }\n\n    if (this.sidebarPaneView && vertically === !this.splitWidget.isVertical()) {\n      return;\n    }\n\n    if (this.sidebarPaneView?.shouldHideOnDetach()) {\n      return;\n    }  // We can't reparent extension iframes.\n\n    if (this.sidebarPaneView) {\n      this.sidebarPaneView.detach();\n    }\n\n    this.splitWidget.setVertical(!vertically);\n    this.splitWidget.element.classList.toggle('sources-split-view-vertical', vertically);\n\n    SourcesPanel.updateResizerAndSidebarButtons(this);\n\n    // Create vertical box with stack.\n    const vbox = new UI.Widget.VBox();\n    vbox.element.appendChild(this.debugToolbar);\n    vbox.element.appendChild(this.debugToolbarDrawer);\n\n    vbox.setMinimumAndPreferredSizes(minToolbarWidth, 25, minToolbarWidth, 100);\n    this.sidebarPaneStack = UI.ViewManager.ViewManager.instance().createStackLocation(\n        this.revealDebuggerSidebar.bind(this), undefined, 'debug');\n    this.sidebarPaneStack.widget().element.classList.add('y-overflow-only');\n    this.sidebarPaneStack.widget().show(vbox.element);\n    this.sidebarPaneStack.widget().element.appendChild(this.debuggerPausedMessage.element());\n    this.sidebarPaneStack.appendApplicableItems('sources.sidebar-top');\n\n    if (this.threadsSidebarPane) {\n      this.sidebarPaneStack.appendView(this.threadsSidebarPane);\n    }\n\n    const jsBreakpoints = UI.ViewManager.ViewManager.instance().view('sources.js-breakpoints');\n    const scopeChainView = UI.ViewManager.ViewManager.instance().view('sources.scope-chain');\n\n    if (this.tabbedLocationHeader) {\n      this.splitWidget.uninstallResizer(this.tabbedLocationHeader);\n      this.tabbedLocationHeader = null;\n    }\n\n    if (!vertically) {\n      // Populate the rest of the stack.\n      this.sidebarPaneStack.appendView(this.watchSidebarPane);\n      void this.sidebarPaneStack.showView(jsBreakpoints);\n      void this.sidebarPaneStack.showView(scopeChainView);\n      void this.sidebarPaneStack.showView(this.callstackPane);\n      this.extensionSidebarPanesContainer = this.sidebarPaneStack;\n      this.sidebarPaneView = vbox;\n      this.splitWidget.uninstallResizer(this.debugToolbar);\n    } else {\n      const splitWidget =\n          new UI.SplitWidget.SplitWidget(true, true, 'sources-panel-debugger-sidebar-split-view-state', 0.5);\n      splitWidget.setMainWidget(vbox);\n\n      // Populate the left stack.\n      void this.sidebarPaneStack.showView(jsBreakpoints);\n      void this.sidebarPaneStack.showView(this.callstackPane);\n\n      const tabbedLocation = UI.ViewManager.ViewManager.instance().createTabbedLocation(\n          this.revealDebuggerSidebar.bind(this), 'sources-panel-debugger-sidebar');\n      splitWidget.setSidebarWidget(tabbedLocation.tabbedPane());\n      this.tabbedLocationHeader = tabbedLocation.tabbedPane().headerElement();\n      this.splitWidget.installResizer(this.tabbedLocationHeader);\n      this.splitWidget.installResizer(this.debugToolbar);\n      tabbedLocation.appendView(scopeChainView);\n      tabbedLocation.appendView(this.watchSidebarPane);\n      tabbedLocation.appendApplicableItems('sources.sidebar-tabs');\n      this.extensionSidebarPanesContainer = tabbedLocation;\n      this.sidebarPaneView = splitWidget;\n    }\n\n    this.sidebarPaneStack.appendApplicableItems('sources.sidebar-bottom');\n    const extensionSidebarPanes = Extensions.ExtensionServer.ExtensionServer.instance().sidebarPanes();\n    for (let i = 0; i < extensionSidebarPanes.length; ++i) {\n      this.addExtensionSidebarPane(extensionSidebarPanes[i]);\n    }\n\n    this.splitWidget.setSidebarWidget(this.sidebarPaneView);\n  }\n\n  setAsCurrentPanel(): Promise<void> {\n    return UI.ViewManager.ViewManager.instance().showView('sources');\n  }\n\n  private extensionSidebarPaneAdded(\n      event: Common.EventTarget.EventTargetEvent<Extensions.ExtensionPanel.ExtensionSidebarPane>): void {\n    this.addExtensionSidebarPane(event.data);\n  }\n\n  private addExtensionSidebarPane(pane: Extensions.ExtensionPanel.ExtensionSidebarPane): void {\n    if (pane.panelName() === this.name) {\n      (this.extensionSidebarPanesContainer as UI.View.ViewLocation).appendView(pane);\n    }\n  }\n\n  sourcesView(): SourcesView {\n    return this.sourcesViewInternal;\n  }\n\n  private handleDrop(dataTransfer: DataTransfer): void {\n    const items = dataTransfer.items;\n    if (!items.length) {\n      return;\n    }\n    const entry = items[0].webkitGetAsEntry();\n    if (entry?.isDirectory) {\n      Host.InspectorFrontendHost.InspectorFrontendHostInstance.upgradeDraggedFileSystemPermissions(entry.filesystem);\n      Host.userMetrics.actionTaken(Host.UserMetrics.Action.WorkspaceDropFolder);\n      void UI.ViewManager.ViewManager.instance().showView('navigator-files');\n    }\n  }\n}\n\nexport const lastModificationTimeout = 200;\nexport const minToolbarWidth = 215;\n\nexport class UILocationRevealer implements Common.Revealer.Revealer<Workspace.UISourceCode.UILocation> {\n  async reveal(uiLocation: Workspace.UISourceCode.UILocation, omitFocus?: boolean): Promise<void> {\n    SourcesPanel.instance().showUILocation(uiLocation, omitFocus);\n  }\n}\n\nexport class UILocationRangeRevealer implements Common.Revealer.Revealer<Workspace.UISourceCode.UILocationRange> {\n  static #instance?: UILocationRangeRevealer;\n  static instance(opts: {forceNew: boolean} = {forceNew: false}): UILocationRangeRevealer {\n    if (!UILocationRangeRevealer.#instance || opts.forceNew) {\n      UILocationRangeRevealer.#instance = new UILocationRangeRevealer();\n    }\n    return UILocationRangeRevealer.#instance;\n  }\n\n  async reveal(uiLocationRange: Workspace.UISourceCode.UILocationRange, omitFocus?: boolean): Promise<void> {\n    const {uiSourceCode, range: {start: from, end: to}} = uiLocationRange;\n    SourcesPanel.instance().showUISourceCode(uiSourceCode, {from, to}, omitFocus);\n  }\n}\n\nexport class DebuggerLocationRevealer implements Common.Revealer.Revealer<SDK.DebuggerModel.Location> {\n  async reveal(rawLocation: SDK.DebuggerModel.Location, omitFocus?: boolean): Promise<void> {\n    const uiLocation =\n        await Bindings.DebuggerWorkspaceBinding.DebuggerWorkspaceBinding.instance().rawLocationToUILocation(\n            rawLocation);\n    if (uiLocation) {\n      SourcesPanel.instance().showUILocation(uiLocation, omitFocus);\n    }\n  }\n}\n\nexport class UISourceCodeRevealer implements Common.Revealer.Revealer<Workspace.UISourceCode.UISourceCode> {\n  async reveal(uiSourceCode: Workspace.UISourceCode.UISourceCode, omitFocus?: boolean): Promise<void> {\n    SourcesPanel.instance().showUISourceCode(uiSourceCode, undefined, omitFocus);\n  }\n}\n\nexport class DebuggerPausedDetailsRevealer implements\n    Common.Revealer.Revealer<SDK.DebuggerModel.DebuggerPausedDetails> {\n  async reveal(_object: SDK.DebuggerModel.DebuggerPausedDetails): Promise<void> {\n    if (Common.Settings.Settings.instance().moduleSetting('auto-focus-on-debugger-paused-enabled').get()) {\n      return await SourcesPanel.instance().setAsCurrentPanel();\n    }\n  }\n}\n\nexport class RevealingActionDelegate implements UI.ActionRegistration.ActionDelegate {\n  handleAction(context: UI.Context.Context, actionId: string): boolean {\n    const panel = SourcesPanel.instance();\n    if (!panel.ensureSourcesViewVisible()) {\n      return false;\n    }\n    switch (actionId) {\n      case 'debugger.toggle-pause': {\n        // This action can be triggered both on the DevTools front-end itself,\n        // or on the inspected target. If triggered on the DevTools front-end,\n        // it will take care of resuming.\n        //\n        // If triggered on the target, NOT in hosted mode:\n        //   * ..and the paused overlay is enabled:\n        //       => do not take any action here, as the paused overlay will resume\n        //   * ..and the paused overlay is disabled:\n        //       => take care of the resume here\n        // If triggered on the target in hosted mode:\n        //   * ..and the paused overlay is enabled:\n        //       => execution will not reach here, as shortcuts are not forwarded\n        //          and the paused overlay will resume\n        //   * ..and the paused overlay is disabled:\n        //       => overlay will not take care of resume, and neither will\n        //          DevTools as no shortcuts are forwarded from the target\n\n        // Do not trigger a resume action, if: the shortcut was forwarded and the\n        // paused overlay is enabled.\n        const actionHandledInPausedOverlay = context.flavor(UI.ShortcutRegistry.ForwardedShortcut) &&\n            !Common.Settings.Settings.instance().moduleSetting('disable-paused-state-overlay').get();\n        if (actionHandledInPausedOverlay) {\n          // Taken care of by inspector overlay: handled set to true to\n          // register user metric.\n          return true;\n        }\n        panel.togglePause();\n        return true;\n      }\n    }\n    return false;\n  }\n}\n\nexport class ActionDelegate implements UI.ActionRegistration.ActionDelegate {\n  handleAction(context: UI.Context.Context, actionId: string): boolean {\n    const panel = SourcesPanel.instance();\n    switch (actionId) {\n      case 'debugger.step-over': {\n        panel.stepOver();\n        return true;\n      }\n      case 'debugger.step-into': {\n        panel.stepIntoAsync();\n        return true;\n      }\n      case 'debugger.step': {\n        panel.stepInto();\n        return true;\n      }\n      case 'debugger.step-out': {\n        panel.stepOut();\n        return true;\n      }\n      case 'debugger.run-snippet': {\n        panel.runSnippet();\n        return true;\n      }\n      case 'debugger.toggle-breakpoints-active': {\n        panel.toggleBreakpointsActive();\n        return true;\n      }\n      case 'debugger.evaluate-selection': {\n        const frame = context.flavor(UISourceCodeFrame);\n        if (frame) {\n          const {state: editorState} = frame.textEditor;\n          let text = editorState.sliceDoc(editorState.selection.main.from, editorState.selection.main.to);\n          const executionContext = context.flavor(SDK.RuntimeModel.ExecutionContext);\n          const consoleModel = executionContext?.target().model(SDK.ConsoleModel.ConsoleModel);\n          if (executionContext && consoleModel) {\n            const message = consoleModel.addCommandMessage(executionContext, text);\n            text = ObjectUI.JavaScriptREPL.JavaScriptREPL.wrapObjectLiteral(text);\n            void consoleModel.evaluateCommandInConsole(executionContext, message, text, /* useCommandLineAPI */ true);\n          }\n        }\n        return true;\n      }\n      case 'sources.reveal-in-navigator-sidebar': {\n        const uiSourceCode = panel.sourcesView().currentUISourceCode();\n        if (uiSourceCode === null) {\n          return false;\n        }\n        void panel.revealInNavigator(uiSourceCode);\n        return true;\n      }\n      case 'sources.toggle-navigator-sidebar': {\n        panel.toggleNavigatorSidebar();\n        return true;\n      }\n      case 'sources.toggle-debugger-sidebar': {\n        panel.toggleDebuggerSidebar();\n        return true;\n      }\n      case 'sources.toggle-word-wrap': {\n        const setting = Common.Settings.Settings.instance().moduleSetting<boolean>('sources.word-wrap');\n        setting.set(!setting.get());\n        return true;\n      }\n    }\n    return false;\n  }\n}\n\nexport class QuickSourceView extends UI.Widget.VBox {\n  private readonly view: SourcesView;\n  constructor() {\n    super({jslog: `${VisualLogging.panel('sources.quick').track({resize: true})}`});\n    this.element.classList.add('sources-view-wrapper');\n    this.view = SourcesPanel.instance().sourcesView();\n  }\n\n  override wasShown(): void {\n    UI.Context.Context.instance().setFlavor(QuickSourceView, this);\n    super.wasShown();\n    if (!SourcesPanel.instance().isShowing()) {\n      this.showViewInWrapper();\n    } else {\n      UI.InspectorView.InspectorView.instance().setDrawerMinimized(true);\n    }\n    SourcesPanel.updateResizerAndSidebarButtons(SourcesPanel.instance());\n  }\n\n  override willHide(): void {\n    UI.InspectorView.InspectorView.instance().setDrawerMinimized(false);\n    queueMicrotask(() => {\n      SourcesPanel.updateResizerAndSidebarButtons(SourcesPanel.instance());\n    });\n    super.willHide();\n    UI.Context.Context.instance().setFlavor(QuickSourceView, null);\n  }\n\n  showViewInWrapper(): void {\n    this.view.show(this.element);\n  }\n}\n", "/*\n * Copyright (C) 2012 Google Inc. All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are\n * met:\n *\n *     * Redistributions of source code must retain the above copyright\n * notice, this list of conditions and the following disclaimer.\n *     * Redistributions in binary form must reproduce the above\n * copyright notice, this list of conditions and the following disclaimer\n * in the documentation and/or other materials provided with the\n * distribution.\n *     * Neither the name of Google Inc. nor the names of its\n * contributors may be used to endorse or promote products derived from\n * this software without specific prior written permission.\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS\n * \"AS IS\" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT\n * LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR\n * A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT\n * OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,\n * SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT\n * LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,\n * DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY\n * THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE\n * OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */\n\n/* eslint-disable rulesdir/no-imperative-dom-api */\n\nimport * as Common from '../../core/common/common.js';\nimport * as Host from '../../core/host/host.js';\nimport * as i18n from '../../core/i18n/i18n.js';\nimport * as Platform from '../../core/platform/platform.js';\nimport * as Root from '../../core/root/root.js';\nimport * as SDK from '../../core/sdk/sdk.js';\nimport * as Bindings from '../../models/bindings/bindings.js';\nimport * as Persistence from '../../models/persistence/persistence.js';\nimport * as TextUtils from '../../models/text_utils/text_utils.js';\nimport * as Workspace from '../../models/workspace/workspace.js';\nimport * as Buttons from '../../ui/components/buttons/buttons.js';\nimport * as IconButton from '../../ui/components/icon_button/icon_button.js';\nimport * as Spinners from '../../ui/components/spinners/spinners.js';\nimport * as UI from '../../ui/legacy/legacy.js';\nimport * as VisualLogging from '../../ui/visual_logging/visual_logging.js';\nimport * as Snippets from '../snippets/snippets.js';\nimport {PanelUtils} from '../utils/utils.js';\n\nimport navigatorTreeStyles from './navigatorTree.css.js';\nimport navigatorViewStyles from './navigatorView.css.js';\nimport {SearchSources} from './SearchSourcesView.js';\n\nconst UIStrings = {\n  /**\n   * @description Text in Navigator View of the Sources panel\n   */\n  searchInFolder: 'Search in folder',\n  /**\n   * @description Search label in Navigator View of the Sources panel\n   */\n  searchInAllFiles: 'Search in all files',\n  /**\n   * @description Text in Navigator View of the Sources panel\n   */\n  noDomain: '(no domain)',\n  /**\n   * @description Text in Navigator View of the Sources panel\n   */\n  authored: 'Authored',\n  /**\n   * @description Text in Navigator View of the Sources panel\n   */\n  authoredTooltip: 'Contains original sources',\n  /**\n   * @description Text in Navigator View of the Sources panel\n   */\n  deployed: 'Deployed',\n  /**\n   * @description Text in Navigator View of the Sources panel\n   */\n  deployedTooltip: 'Contains final sources the browser sees',\n  /**\n   * @description Text in Navigator View of the Sources panel\n   */\n  excludeThisFolder: 'Exclude this folder?',\n  /**\n   * @description Text in a dialog which appears when users click on 'Exclude from Workspace' menu item\n   */\n  folderWillNotBeShown: 'This folder and its contents will not be shown in workspace.',\n  /**\n   * @description Text in Navigator View of the Sources panel\n   */\n  deleteThisFile: 'Delete this file?',\n  /**\n   * @description A context menu item in the Navigator View of the Sources panel\n   */\n  rename: 'Rename…',\n  /**\n   * @description A context menu item in the Navigator View of the Sources panel\n   */\n  makeACopy: 'Make a copy…',\n  /**\n   * @description Text to delete something\n   */\n  delete: 'Delete',\n  /**\n   * @description A button text to confirm an action to remove a folder. This is not the same as delete. It removes the folder from UI but do not delete them.\n   */\n  remove: 'Remove',\n  /**\n   * @description Text in Navigator View of the Sources panel\n   */\n  deleteFolder: 'Delete this folder and its contents?',\n  /**\n   * @description Text in Navigator View of the Sources panel. A confirmation message on action to delete a folder or file.\n   */\n  actionCannotBeUndone: 'This action cannot be undone.',\n  /**\n   * @description A context menu item in the Navigator View of the Sources panel\n   */\n  openFolder: 'Open folder',\n  /**\n   * @description A context menu item in the Navigator View of the Sources panel\n   */\n  newFile: 'New file',\n  /**\n   * @description A context menu item in the Navigator View of the Sources panel to exclude a folder from workspace\n   */\n  excludeFolder: 'Exclude from workspace',\n  /**\n   * @description A context menu item in the Navigator View of the Sources panel\n   */\n  removeFolderFromWorkspace: 'Remove from workspace',\n  /**\n   * @description Text in Navigator View of the Sources panel\n   * @example {a-folder-name} PH1\n   */\n  areYouSureYouWantToRemoveThis: 'Remove ‘{PH1}’ from Workspace?',\n  /**\n   * @description Text in Navigator View of the Sources panel. Warning message when user remove a folder.\n   */\n  workspaceStopSyncing: 'This will stop syncing changes from DevTools to your sources.',\n  /**\n   * @description Name of an item from source map\n   * @example {compile.html} PH1\n   */\n  sFromSourceMap: '{PH1} (from source map)',\n  /**\n   * @description Name of an item that is on the ignore list\n   * @example {compile.html} PH1\n   */\n  sIgnoreListed: '{PH1} (ignore listed)',\n  /**\n   * @description Text for the button in the Workspace tab of the Sources panel,\n   *              which allows the user to connect automatic workspace folders.\n   */\n  connect: 'Connect',\n  /**\n   * @description A context menu item in the Workspace tab of the Sources panel, which\n   *              shows up for disconnected automatic workspace folders.\n   */\n  connectFolderToWorkspace: 'Connect to workspace',\n} as const;\n\nconst str_ = i18n.i18n.registerUIStrings('panels/sources/NavigatorView.ts', UIStrings);\nconst i18nString = i18n.i18n.getLocalizedString.bind(undefined, str_);\nexport const Types = {\n  Authored: 'authored',\n  AutomaticFileSystem: 'automatic-fs',\n  Deployed: 'deployed',\n  Domain: 'domain',\n  File: 'file',\n  FileSystem: 'fs',\n  FileSystemFolder: 'fs-folder',\n  Frame: 'frame',\n  NetworkFolder: 'nw-folder',\n  Root: 'root',\n  Worker: 'worker',\n};\n\nconst TYPE_ORDERS = new Map([\n  [Types.Root, 1],\n  [Types.Authored, 1],\n  [Types.Deployed, 5],\n  [Types.Domain, 10],\n  [Types.FileSystemFolder, 1],\n  [Types.NetworkFolder, 1],\n  [Types.File, 10],\n  [Types.Frame, 70],\n  [Types.Worker, 90],\n  [Types.AutomaticFileSystem, 99],\n  [Types.FileSystem, 100],\n]);\n\nexport class NavigatorView extends UI.Widget.VBox implements SDK.TargetManager.Observer {\n  private placeholder: UI.Widget.Widget|null;\n  scriptsTree: UI.TreeOutline.TreeOutlineInShadow;\n  private readonly uiSourceCodeNodes:\n      Platform.MapUtilities.Multimap<Workspace.UISourceCode.UISourceCode, NavigatorUISourceCodeTreeNode>;\n  private readonly subfolderNodes: Map<string, NavigatorFolderTreeNode>;\n  private readonly rootNode: NavigatorRootTreeNode;\n  private readonly frameNodes: Map<SDK.ResourceTreeModel.ResourceTreeFrame, NavigatorGroupTreeNode>;\n  private authoredNode?: NavigatorGroupTreeNode;\n  private deployedNode?: NavigatorGroupTreeNode;\n  private navigatorGroupByFolderSetting: Common.Settings.Setting<boolean>;\n  private navigatorGroupByAuthoredExperiment?: string;\n  private workspaceInternal!: Workspace.Workspace.WorkspaceImpl;\n  private groupByFrame?: boolean;\n  private groupByAuthored?: boolean;\n  private groupByDomain?: boolean;\n  private groupByFolder?: boolean;\n  constructor(jslogContext: string, enableAuthoredGrouping?: boolean) {\n    super({\n      jslog: `${VisualLogging.pane(jslogContext).track({resize: true})}`,\n      useShadowDom: true,\n    });\n    this.registerRequiredCSS(navigatorViewStyles);\n\n    this.placeholder = null;\n    this.scriptsTree = new UI.TreeOutline.TreeOutlineInShadow(UI.TreeOutline.TreeVariant.NAVIGATION_TREE);\n    this.scriptsTree.registerRequiredCSS(navigatorTreeStyles);\n\n    this.scriptsTree.hideOverflow();\n    this.scriptsTree.setComparator(NavigatorView.treeElementsCompare);\n    this.scriptsTree.setFocusable(false);\n    this.contentElement.appendChild(this.scriptsTree.element);\n    this.setDefaultFocusedElement(this.scriptsTree.element);\n\n    this.uiSourceCodeNodes = new Platform.MapUtilities.Multimap();\n    this.subfolderNodes = new Map();\n\n    this.rootNode = new NavigatorRootTreeNode(this);\n    this.rootNode.populate();\n\n    this.frameNodes = new Map();\n\n    this.contentElement.addEventListener('contextmenu', this.handleContextMenu.bind(this), false);\n    UI.ShortcutRegistry.ShortcutRegistry.instance().addShortcutListener(\n        this.contentElement, {'sources.rename': this.renameShortcut.bind(this)});\n\n    this.navigatorGroupByFolderSetting = Common.Settings.Settings.instance().moduleSetting('navigator-group-by-folder');\n    this.navigatorGroupByFolderSetting.addChangeListener(this.groupingChanged.bind(this));\n    if (enableAuthoredGrouping) {\n      this.navigatorGroupByAuthoredExperiment = Root.Runtime.ExperimentName.AUTHORED_DEPLOYED_GROUPING;\n    }\n\n    Workspace.IgnoreListManager.IgnoreListManager.instance().addChangeListener(this.ignoreListChanged.bind(this));\n\n    this.initGrouping();\n\n    Persistence.Persistence.PersistenceImpl.instance().addEventListener(\n        Persistence.Persistence.Events.BindingCreated, this.onBindingChanged, this);\n    Persistence.Persistence.PersistenceImpl.instance().addEventListener(\n        Persistence.Persistence.Events.BindingRemoved, this.onBindingChanged, this);\n    Persistence.NetworkPersistenceManager.NetworkPersistenceManager.instance().addEventListener(\n        Persistence.NetworkPersistenceManager.Events.REQUEST_FOR_HEADER_OVERRIDES_FILE_CHANGED,\n        this.#onRequestsForHeaderOverridesFileChanged, this);\n    SDK.TargetManager.TargetManager.instance().addEventListener(\n        SDK.TargetManager.Events.NAME_CHANGED, this.targetNameChanged, this);\n\n    SDK.TargetManager.TargetManager.instance().observeTargets(this);\n    this.resetWorkspace(Workspace.Workspace.WorkspaceImpl.instance());\n    this.workspaceInternal.uiSourceCodes().forEach(this.addUISourceCode.bind(this));\n    Bindings.NetworkProject.NetworkProjectManager.instance().addEventListener(\n        Bindings.NetworkProject.Events.FRAME_ATTRIBUTION_ADDED, this.frameAttributionAdded, this);\n    Bindings.NetworkProject.NetworkProjectManager.instance().addEventListener(\n        Bindings.NetworkProject.Events.FRAME_ATTRIBUTION_REMOVED, this.frameAttributionRemoved, this);\n  }\n\n  private static treeElementOrder(treeElement: UI.TreeOutline.TreeElement): number {\n    if (boostOrderForNode.has(treeElement)) {\n      return 0;\n    }\n\n    const actualElement = (treeElement as NavigatorSourceTreeElement);\n\n    let order = TYPE_ORDERS.get(actualElement.nodeType) || 0;\n    if (actualElement.uiSourceCode) {\n      const contentType = actualElement.uiSourceCode.contentType();\n      if (contentType.isDocument()) {\n        order += 3;\n      } else if (contentType.isScript()) {\n        order += 5;\n      } else if (contentType.isStyleSheet()) {\n        order += 10;\n      } else {\n        order += 15;\n      }\n    }\n\n    return order;\n  }\n\n  static appendSearchItem(contextMenu: UI.ContextMenu.ContextMenu, path: string): void {\n    const searchLabel = path ? i18nString(UIStrings.searchInFolder) : i18nString(UIStrings.searchInAllFiles);\n    const searchSources = new SearchSources(path && `file:${path}`);\n    contextMenu.viewSection().appendItem(\n        searchLabel, () => Common.Revealer.reveal(searchSources),\n        {jslogContext: path ? 'search-in-folder' : 'search-in-all-files'});\n  }\n\n  private static treeElementsCompare(\n      treeElement1: UI.TreeOutline.TreeElement, treeElement2: UI.TreeOutline.TreeElement): number {\n    const typeWeight1 = NavigatorView.treeElementOrder(treeElement1);\n    const typeWeight2 = NavigatorView.treeElementOrder(treeElement2);\n\n    if (typeWeight1 > typeWeight2) {\n      return 1;\n    }\n    if (typeWeight1 < typeWeight2) {\n      return -1;\n    }\n    return Platform.StringUtilities.naturalOrderComparator(treeElement1.titleAsText(), treeElement2.titleAsText());\n  }\n\n  setPlaceholder(placeholder: UI.Widget.Widget): void {\n    console.assert(!this.placeholder, 'A placeholder widget was already set');\n    this.placeholder = placeholder;\n    placeholder.show(this.contentElement, this.contentElement.firstChild);\n    updateVisibility.call(this);\n    this.scriptsTree.addEventListener(UI.TreeOutline.Events.ElementAttached, updateVisibility.bind(this));\n    this.scriptsTree.addEventListener(UI.TreeOutline.Events.ElementsDetached, updateVisibility.bind(this));\n\n    function updateVisibility(this: NavigatorView): void {\n      const showTree = this.scriptsTree.firstChild();\n      if (showTree) {\n        placeholder.hideWidget();\n      } else {\n        placeholder.showWidget();\n      }\n      this.scriptsTree.element.classList.toggle('hidden', !showTree);\n    }\n  }\n\n  private onBindingChanged(event: Common.EventTarget.EventTargetEvent<Persistence.Persistence.PersistenceBinding>):\n      void {\n    const binding = event.data;\n\n    let isFromSourceMap = false;\n    // Update UISourceCode titles.\n    const networkNodes = this.uiSourceCodeNodes.get(binding.network);\n    for (const networkNode of networkNodes) {\n      networkNode.updateTitle();\n      isFromSourceMap ||= networkNode.uiSourceCode().contentType().isFromSourceMap();\n    }\n    const fileSystemNodes = this.uiSourceCodeNodes.get(binding.fileSystem);\n    for (const fileSystemNode of fileSystemNodes) {\n      fileSystemNode.updateTitle();\n      isFromSourceMap ||= fileSystemNode.uiSourceCode().contentType().isFromSourceMap();\n    }\n\n    // Update folder titles.\n    const pathTokens =\n        Persistence.FileSystemWorkspaceBinding.FileSystemWorkspaceBinding.relativePath(binding.fileSystem);\n    let folderPath = Platform.DevToolsPath.EmptyEncodedPathString;\n    for (let i = 0; i < pathTokens.length - 1; ++i) {\n      folderPath = Common.ParsedURL.ParsedURL.concatenate(folderPath, pathTokens[i]);\n      const folderId = this.folderNodeId(\n          binding.fileSystem.project(), null, null, binding.fileSystem.origin(), isFromSourceMap, folderPath);\n      const folderNode = this.subfolderNodes.get(folderId);\n      if (folderNode) {\n        folderNode.updateTitle();\n      }\n      folderPath = Common.ParsedURL.ParsedURL.concatenate(folderPath, '/');\n    }\n\n    // Update fileSystem root title.\n    const fileSystemRoot = this.rootOrDeployedNode().child(binding.fileSystem.project().id());\n    if (fileSystemRoot) {\n      fileSystemRoot.updateTitle();\n    }\n  }\n\n  #onRequestsForHeaderOverridesFileChanged(\n      event: Common.EventTarget.EventTargetEvent<Workspace.UISourceCode.UISourceCode>): void {\n    const headersFileUiSourceCode = event.data;\n    const networkNodes = this.uiSourceCodeNodes.get(headersFileUiSourceCode);\n    for (const networkNode of networkNodes) {\n      networkNode.updateTitle();\n    }\n  }\n\n  override focus(): void {\n    this.scriptsTree.focus();\n  }\n\n  /**\n   * Central place to add elements to the tree to\n   * enable focus if the tree has elements\n   */\n  appendChild(parent: UI.TreeOutline.TreeElement, child: UI.TreeOutline.TreeElement): void {\n    this.scriptsTree.setFocusable(true);\n    parent.appendChild(child);\n  }\n\n  /**\n   * Central place to remove elements from the tree to\n   * disable focus if the tree is empty\n   */\n  removeChild(parent: UI.TreeOutline.TreeElement, child: UI.TreeOutline.TreeElement): void {\n    parent.removeChild(child);\n    if (this.scriptsTree.rootElement().childCount() === 0) {\n      this.scriptsTree.setFocusable(false);\n    }\n  }\n\n  private resetWorkspace(workspace: Workspace.Workspace.WorkspaceImpl): void {\n    // Clear old event listeners first.\n    if (this.workspaceInternal) {\n      this.workspaceInternal.removeEventListener(\n          Workspace.Workspace.Events.UISourceCodeAdded, this.uiSourceCodeAddedCallback, this);\n      this.workspaceInternal.removeEventListener(\n          Workspace.Workspace.Events.UISourceCodeRemoved, this.uiSourceCodeRemovedCallback, this);\n      this.workspaceInternal.removeEventListener(\n          Workspace.Workspace.Events.ProjectAdded, this.projectAddedCallback, this);\n      this.workspaceInternal.removeEventListener(\n          Workspace.Workspace.Events.ProjectRemoved, this.projectRemovedCallback, this);\n    }\n\n    this.workspaceInternal = workspace;\n    this.workspaceInternal.addEventListener(\n        Workspace.Workspace.Events.UISourceCodeAdded, this.uiSourceCodeAddedCallback, this);\n    this.workspaceInternal.addEventListener(\n        Workspace.Workspace.Events.UISourceCodeRemoved, this.uiSourceCodeRemovedCallback, this);\n    this.workspaceInternal.addEventListener(Workspace.Workspace.Events.ProjectAdded, this.projectAddedCallback, this);\n    this.workspaceInternal.addEventListener(\n        Workspace.Workspace.Events.ProjectRemoved, this.projectRemovedCallback, this);\n    this.workspaceInternal.projects().forEach(this.projectAdded.bind(this));\n    this.computeUniqueFileSystemProjectNames();\n  }\n\n  private projectAddedCallback(event: Common.EventTarget.EventTargetEvent<Workspace.Workspace.Project>): void {\n    const project = event.data;\n    this.projectAdded(project);\n    if (project.type() === Workspace.Workspace.projectTypes.FileSystem) {\n      this.computeUniqueFileSystemProjectNames();\n    }\n  }\n\n  private projectRemovedCallback(event: Common.EventTarget.EventTargetEvent<Workspace.Workspace.Project>): void {\n    const project = event.data;\n    this.removeProject(project);\n    if (project.type() === Workspace.Workspace.projectTypes.FileSystem) {\n      this.computeUniqueFileSystemProjectNames();\n    }\n  }\n\n  workspace(): Workspace.Workspace.WorkspaceImpl {\n    return this.workspaceInternal;\n  }\n\n  acceptProject(project: Workspace.Workspace.Project): boolean {\n    return !project.isServiceProject();\n  }\n\n  private frameAttributionAdded(\n      event: Common.EventTarget.EventTargetEvent<Bindings.NetworkProject.FrameAttributionEvent>): void {\n    const {uiSourceCode} = event.data;\n    if (!this.acceptsUISourceCode(uiSourceCode)) {\n      return;\n    }\n\n    const addedFrame = (event.data.frame as SDK.ResourceTreeModel.ResourceTreeFrame | null);\n    // This event does not happen for UISourceCodes without initial attribution.\n    this.addUISourceCodeNode(uiSourceCode, addedFrame);\n  }\n\n  private frameAttributionRemoved(\n      event: Common.EventTarget.EventTargetEvent<Bindings.NetworkProject.FrameAttributionEvent>): void {\n    const {uiSourceCode} = event.data;\n    if (!this.acceptsUISourceCode(uiSourceCode)) {\n      return;\n    }\n\n    const removedFrame = (event.data.frame as SDK.ResourceTreeModel.ResourceTreeFrame | null);\n    const node = Array.from(this.uiSourceCodeNodes.get(uiSourceCode)).find(node => node.frame() === removedFrame);\n    if (node) {\n      this.removeUISourceCodeNode(node);\n    }\n  }\n\n  private acceptsUISourceCode(uiSourceCode: Workspace.UISourceCode.UISourceCode): boolean {\n    return this.acceptProject(uiSourceCode.project());\n  }\n\n  private addUISourceCode(uiSourceCode: Workspace.UISourceCode.UISourceCode): void {\n    if (Root.Runtime.experiments.isEnabled(Root.Runtime.ExperimentName.JUST_MY_CODE) &&\n        Workspace.IgnoreListManager.IgnoreListManager.instance().isUserOrSourceMapIgnoreListedUISourceCode(\n            uiSourceCode)) {\n      return;\n    }\n\n    if (!this.acceptsUISourceCode(uiSourceCode)) {\n      return;\n    }\n\n    if (uiSourceCode.isFetchXHR()) {\n      return;\n    }\n\n    const frames = Bindings.NetworkProject.NetworkProject.framesForUISourceCode(uiSourceCode);\n    if (frames.length) {\n      for (const frame of frames) {\n        this.addUISourceCodeNode(uiSourceCode, frame);\n      }\n    } else {\n      this.addUISourceCodeNode(uiSourceCode, null);\n    }\n    this.uiSourceCodeAdded(uiSourceCode);\n  }\n\n  private addUISourceCodeNode(\n      uiSourceCode: Workspace.UISourceCode.UISourceCode, frame: SDK.ResourceTreeModel.ResourceTreeFrame|null): void {\n    const isFromSourceMap = uiSourceCode.contentType().isFromSourceMap();\n    let path;\n    if (uiSourceCode.project().type() === Workspace.Workspace.projectTypes.FileSystem) {\n      path = Persistence.FileSystemWorkspaceBinding.FileSystemWorkspaceBinding.relativePath(uiSourceCode).slice(0, -1);\n    } else {\n      path = Common.ParsedURL.ParsedURL.extractPath(uiSourceCode.url()).split('/').slice(1, -1) as\n          Platform.DevToolsPath.EncodedPathString[];\n    }\n\n    const project = uiSourceCode.project();\n    const target = Bindings.NetworkProject.NetworkProject.targetForUISourceCode(uiSourceCode);\n    const folderNode =\n        this.folderNode(uiSourceCode, project, target, frame, uiSourceCode.origin(), path, isFromSourceMap);\n    const uiSourceCodeNode = new NavigatorUISourceCodeTreeNode(this, uiSourceCode, frame);\n    const existingNode = folderNode.child(uiSourceCodeNode.id);\n    if (existingNode && existingNode instanceof NavigatorUISourceCodeTreeNode) {\n      this.uiSourceCodeNodes.set(uiSourceCode, existingNode);\n    } else {\n      folderNode.appendChild(uiSourceCodeNode);\n      this.uiSourceCodeNodes.set(uiSourceCode, uiSourceCodeNode);\n      uiSourceCodeNode.updateTitleBubbleUp();\n    }\n    this.selectDefaultTreeNode();\n  }\n\n  uiSourceCodeAdded(_uiSourceCode: Workspace.UISourceCode.UISourceCode): void {\n  }\n\n  private uiSourceCodeAddedCallback(event: Common.EventTarget.EventTargetEvent<Workspace.UISourceCode.UISourceCode>):\n      void {\n    const uiSourceCode = event.data;\n    this.addUISourceCode(uiSourceCode);\n  }\n\n  private uiSourceCodeRemovedCallback(event: Common.EventTarget.EventTargetEvent<Workspace.UISourceCode.UISourceCode>):\n      void {\n    this.removeUISourceCodes([event.data]);\n  }\n\n  tryAddProject(project: Workspace.Workspace.Project): void {\n    this.projectAdded(project);\n    for (const uiSourceCode of project.uiSourceCodes()) {\n      this.addUISourceCode(uiSourceCode);\n    }\n  }\n\n  private projectAdded(project: Workspace.Workspace.Project): void {\n    const rootOrDeployed = this.rootOrDeployedNode();\n    const FILE_SYSTEM_TYPES = [\n      Workspace.Workspace.projectTypes.ConnectableFileSystem,\n      Workspace.Workspace.projectTypes.FileSystem,\n    ];\n    if (!this.acceptProject(project) || !FILE_SYSTEM_TYPES.includes(project.type()) ||\n        Snippets.ScriptSnippetFileSystem.isSnippetsProject(project) || rootOrDeployed.child(project.id())) {\n      return;\n    }\n    const type =\n        (project instanceof Persistence.AutomaticFileSystemWorkspaceBinding.FileSystem ||\n         (project instanceof Persistence.FileSystemWorkspaceBinding.FileSystem && project.fileSystem().automatic)) ?\n        Types.AutomaticFileSystem :\n        Types.FileSystem;\n    rootOrDeployed.appendChild(new NavigatorGroupTreeNode(this, project, project.id(), type, project.displayName()));\n    this.selectDefaultTreeNode();\n  }\n\n  // TODO(einbinder) remove this code after crbug.com/964075 is fixed\n  private selectDefaultTreeNode(): void {\n    const children = this.rootNode.children();\n    if (children.length && !this.scriptsTree.selectedTreeElement) {\n      children[0].treeNode().select(true /* omitFocus */, false /* selectedByUser */);\n    }\n  }\n\n  private computeUniqueFileSystemProjectNames(): void {\n    const fileSystemProjects = this.workspaceInternal.projectsForType(Workspace.Workspace.projectTypes.FileSystem);\n    if (!fileSystemProjects.length) {\n      return;\n    }\n\n    const reversedIndex = Common.Trie.Trie.newArrayTrie<string[]>();\n    const reversedPaths = [];\n    for (const project of fileSystemProjects) {\n      const fileSystem = (project as Persistence.FileSystemWorkspaceBinding.FileSystem);\n      const reversedPathParts = fileSystem.fileSystemPath().split('/').reverse();\n      reversedPaths.push(reversedPathParts);\n      reversedIndex.add(reversedPathParts);\n    }\n\n    const rootOrDeployed = this.rootOrDeployedNode();\n\n    for (let i = 0; i < fileSystemProjects.length; ++i) {\n      const reversedPath = reversedPaths[i];\n      const project = fileSystemProjects[i];\n      reversedIndex.remove(reversedPath);\n      const commonPrefix = reversedIndex.longestPrefix(reversedPath, false /* fullWordOnly */);\n      reversedIndex.add(reversedPath);\n      const prefixPath = reversedPath.slice(0, commonPrefix.length + 1);\n      const path = Common.ParsedURL.ParsedURL.encodedPathToRawPathString(\n          prefixPath.reverse().join('/') as Platform.DevToolsPath.EncodedPathString);\n\n      const fileSystemNode = rootOrDeployed.child(project.id());\n      if (fileSystemNode) {\n        fileSystemNode.setTitle(path);\n      }\n    }\n  }\n\n  removeProject(project: Workspace.Workspace.Project): void {\n    this.removeUISourceCodes(project.uiSourceCodes());\n    if (project.type() !== Workspace.Workspace.projectTypes.ConnectableFileSystem &&\n        project.type() !== Workspace.Workspace.projectTypes.FileSystem) {\n      return;\n    }\n    const fileSystemNode = this.rootNode.child(project.id());\n    if (!fileSystemNode) {\n      return;\n    }\n    this.rootNode.removeChild(fileSystemNode);\n  }\n\n  private folderNodeId(\n      project: Workspace.Workspace.Project, target: SDK.Target.Target|null,\n      frame: SDK.ResourceTreeModel.ResourceTreeFrame|null, projectOrigin: string, isFromSourceMap: boolean,\n      path: Platform.DevToolsPath.EncodedPathString): string {\n    const projectId = project.type() === Workspace.Workspace.projectTypes.FileSystem ? project.id() : '';\n    let targetId = target && !(this.groupByAuthored && isFromSourceMap) ? target.id() : '';\n    let frameId = this.groupByFrame && frame ? frame.id : '';\n    if (this.groupByAuthored) {\n      if (isFromSourceMap) {\n        targetId = 'Authored';\n        frameId = '';\n      } else {\n        targetId = 'Deployed:' + targetId;\n      }\n    }\n    return targetId + ':' + projectId + ':' + frameId + ':' + projectOrigin + ':' + path;\n  }\n\n  private folderNode(\n      uiSourceCode: Workspace.UISourceCode.UISourceCode, project: Workspace.Workspace.Project,\n      target: SDK.Target.Target|null, frame: SDK.ResourceTreeModel.ResourceTreeFrame|null,\n      projectOrigin: Platform.DevToolsPath.UrlString, path: Platform.DevToolsPath.EncodedPathString[],\n      fromSourceMap: boolean): NavigatorTreeNode {\n    if (Snippets.ScriptSnippetFileSystem.isSnippetsUISourceCode(uiSourceCode)) {\n      return this.rootNode;\n    }\n\n    if (target && !this.groupByFolder && !fromSourceMap) {\n      return this.domainNode(uiSourceCode, project, target, frame, projectOrigin);\n    }\n\n    const folderPath = Common.ParsedURL.ParsedURL.join(path, '/');\n    const folderId = this.folderNodeId(project, target, frame, projectOrigin, fromSourceMap, folderPath);\n    let folderNode = this.subfolderNodes.get(folderId);\n    if (folderNode) {\n      return folderNode;\n    }\n\n    if (!path.length) {\n      if (target) {\n        return this.domainNode(uiSourceCode, project, target, frame, projectOrigin);\n      }\n      return this.rootOrDeployedNode().child(project.id()) as NavigatorTreeNode;\n    }\n\n    const parentNode =\n        this.folderNode(uiSourceCode, project, target, frame, projectOrigin, path.slice(0, -1), fromSourceMap);\n    let type: string = Types.NetworkFolder;\n    if (project.type() === Workspace.Workspace.projectTypes.FileSystem) {\n      type = Types.FileSystemFolder;\n    }\n    const name = Common.ParsedURL.ParsedURL.encodedPathToRawPathString(path[path.length - 1]);\n\n    folderNode = new NavigatorFolderTreeNode(this, project, folderId, type, folderPath, name, projectOrigin);\n    this.subfolderNodes.set(folderId, folderNode);\n    parentNode.appendChild(folderNode);\n    return folderNode;\n  }\n\n  private domainNode(\n      uiSourceCode: Workspace.UISourceCode.UISourceCode, project: Workspace.Workspace.Project,\n      target: SDK.Target.Target, frame: SDK.ResourceTreeModel.ResourceTreeFrame|null,\n      projectOrigin: string): NavigatorTreeNode {\n    const isAuthored = uiSourceCode.contentType().isFromSourceMap();\n    const frameNode = this.frameNode(project, target, frame, isAuthored);\n    if (!this.groupByDomain) {\n      return frameNode;\n    }\n    let domainNode = frameNode.child(projectOrigin);\n    if (domainNode) {\n      return domainNode;\n    }\n\n    domainNode = new NavigatorGroupTreeNode(\n        this, project, projectOrigin, Types.Domain, this.computeProjectDisplayName(target, projectOrigin));\n    if (frame && projectOrigin === Common.ParsedURL.ParsedURL.extractOrigin(frame.url)) {\n      boostOrderForNode.add(domainNode.treeNode());\n    }\n    frameNode.appendChild(domainNode);\n    if (isAuthored && this.groupByAuthored) {\n      domainNode.treeNode().expand();\n    }\n    return domainNode;\n  }\n\n  private frameNode(\n      project: Workspace.Workspace.Project, target: SDK.Target.Target,\n      frame: SDK.ResourceTreeModel.ResourceTreeFrame|null, isAuthored: boolean): NavigatorTreeNode {\n    if (!this.groupByFrame || !frame || (this.groupByAuthored && isAuthored)) {\n      return this.targetNode(project, target, isAuthored);\n    }\n\n    let frameNode = this.frameNodes.get(frame);\n    if (frameNode) {\n      return frameNode;\n    }\n\n    frameNode =\n        new NavigatorGroupTreeNode(this, project, target.id() + ':' + frame.id, Types.Frame, frame.displayName());\n    frameNode.setHoverCallback(hoverCallback);\n    this.frameNodes.set(frame, frameNode);\n\n    const parentFrame = frame.parentFrame();\n    this.frameNode(project, parentFrame ? parentFrame.resourceTreeModel().target() : target, parentFrame, isAuthored)\n        .appendChild(frameNode);\n    if (!parentFrame) {\n      boostOrderForNode.add(frameNode.treeNode());\n      frameNode.treeNode().expand();\n    }\n\n    function hoverCallback(hovered: boolean): void {\n      if (hovered) {\n        const overlayModel = target.model(SDK.OverlayModel.OverlayModel);\n        if (overlayModel && frame) {\n          overlayModel.highlightFrame(frame.id);\n        }\n      } else {\n        SDK.OverlayModel.OverlayModel.hideDOMNodeHighlight();\n      }\n    }\n    return frameNode;\n  }\n\n  private targetNode(project: Workspace.Workspace.Project, target: SDK.Target.Target, isAuthored: boolean):\n      NavigatorTreeNode {\n    if (this.groupByAuthored && isAuthored) {\n      if (!this.authoredNode) {\n        this.authoredNode = new NavigatorGroupTreeNode(\n            this, null, 'group:Authored', Types.Authored, i18nString(UIStrings.authored),\n            i18nString(UIStrings.authoredTooltip));\n        this.rootNode.appendChild(this.authoredNode);\n        this.authoredNode.treeNode().expand();\n      }\n      return this.authoredNode;\n    }\n\n    const rootOrDeployed = this.rootOrDeployedNode();\n    if (target === SDK.TargetManager.TargetManager.instance().scopeTarget()) {\n      return rootOrDeployed;\n    }\n\n    let targetNode = rootOrDeployed.child('target:' + target.id());\n    if (!targetNode) {\n      targetNode = new NavigatorGroupTreeNode(\n          this, project, 'target:' + target.id(), target.type() === SDK.Target.Type.FRAME ? Types.Frame : Types.Worker,\n          target.name());\n      rootOrDeployed.appendChild(targetNode);\n    }\n    return targetNode;\n  }\n\n  private rootOrDeployedNode(): NavigatorTreeNode {\n    if (this.groupByAuthored) {\n      if (!this.deployedNode) {\n        this.deployedNode = new NavigatorGroupTreeNode(\n            this, null, 'group:Deployed', Types.Deployed, i18nString(UIStrings.deployed),\n            i18nString(UIStrings.deployedTooltip));\n        this.rootNode.appendChild(this.deployedNode);\n      }\n      return this.deployedNode;\n    }\n    return this.rootNode;\n  }\n\n  private computeProjectDisplayName(target: SDK.Target.Target, projectOrigin: string): string {\n    const runtimeModel = target.model(SDK.RuntimeModel.RuntimeModel);\n    const executionContexts = runtimeModel ? runtimeModel.executionContexts() : [];\n\n    let matchingContextName: string|null = null;\n\n    for (const context of executionContexts) {\n      if (!context.origin || !projectOrigin.startsWith(context.origin)) {\n        continue;\n      }\n\n      // If the project origin matches the default context origin then we should break out and use the\n      // project origin for the display name.\n      if (context.isDefault) {\n        matchingContextName = null;\n        break;\n      }\n\n      if (!context.name) {\n        continue;\n      }\n\n      matchingContextName = context.name;\n    }\n\n    if (matchingContextName) {\n      return matchingContextName;\n    }\n\n    if (!projectOrigin) {\n      return i18nString(UIStrings.noDomain);\n    }\n\n    const parsedURL = new Common.ParsedURL.ParsedURL(projectOrigin);\n    const prettyURL = parsedURL.isValid ? parsedURL.host + (parsedURL.port ? (':' + parsedURL.port) : '') : '';\n\n    return (prettyURL || projectOrigin);\n  }\n\n  revealUISourceCode(uiSourceCode: Workspace.UISourceCode.UISourceCode, select?: boolean): NavigatorUISourceCodeTreeNode\n      |null {\n    const nodes = this.uiSourceCodeNodes.get(uiSourceCode);\n    if (nodes.size === 0) {\n      return null;\n    }\n    const node = nodes.values().next().value;\n    if (!node) {\n      return null;\n    }\n    if (this.scriptsTree.selectedTreeElement) {\n      // If the tree outline is being marked as \"being edited\" (i.e. we're renaming a file\n      // or chosing the name for a new snippet), we shall not proceed with revealing here,\n      // as that will steal focus from the input widget and thus cancel editing. The\n      // test/e2e/snippets/breakpoint_test.ts exercises this.\n      if (UI.UIUtils.isBeingEdited(this.scriptsTree.selectedTreeElement.treeOutline?.element)) {\n        return null;\n      }\n      this.scriptsTree.selectedTreeElement.deselect();\n    }\n    // TODO(dgozman): figure out revealing multiple.\n    node.reveal(select);\n    return node;\n  }\n\n  sourceSelected(uiSourceCode: Workspace.UISourceCode.UISourceCode, focusSource: boolean): void {\n    void Common.Revealer.reveal(uiSourceCode, !focusSource);\n  }\n\n  #isUISourceCodeOrAnyAncestorSelected(node: NavigatorUISourceCodeTreeNode): boolean {\n    const selectedTreeElement = (this.scriptsTree.selectedTreeElement as NavigatorSourceTreeElement | null);\n    const selectedNode = selectedTreeElement?.node;\n    let currentNode: NavigatorTreeNode|null = node;\n    while (currentNode) {\n      if (currentNode === selectedNode) {\n        return true;\n      }\n      currentNode = currentNode.parent;\n      if (!(node instanceof NavigatorGroupTreeNode || node instanceof NavigatorFolderTreeElement)) {\n        break;\n      }\n    }\n    return false;\n  }\n\n  private removeUISourceCodes(uiSourceCodes: Iterable<Workspace.UISourceCode.UISourceCode>): void {\n    const nodesWithSelectionOnPath: NavigatorUISourceCodeTreeNode[] = [];\n    // First we remove source codes without any selection on their path to root, and only then\n    // the ones with selection. This to avoid layout work associated with moving the selection\n    // around (crbug.com/1409025).\n    for (const uiSourceCode of uiSourceCodes) {\n      const nodes = this.uiSourceCodeNodes.get(uiSourceCode);\n      for (const node of nodes) {\n        if (this.#isUISourceCodeOrAnyAncestorSelected(node)) {\n          nodesWithSelectionOnPath.push(node);\n        } else {\n          this.removeUISourceCodeNode(node);\n        }\n      }\n    }\n    nodesWithSelectionOnPath.forEach(this.removeUISourceCodeNode.bind(this));\n  }\n\n  private removeUISourceCodeNode(node: NavigatorUISourceCodeTreeNode): void {\n    const uiSourceCode = node.uiSourceCode();\n    this.uiSourceCodeNodes.delete(uiSourceCode, node);\n    const project = uiSourceCode.project();\n    const target = Bindings.NetworkProject.NetworkProject.targetForUISourceCode(uiSourceCode);\n    let frame = node.frame();\n\n    let parentNode: (NavigatorTreeNode|null) = node.parent;\n    if (!parentNode) {\n      return;\n    }\n    parentNode.removeChild(node);\n    let currentNode: (NavigatorTreeNode|null) = parentNode;\n\n    while (currentNode) {\n      parentNode = currentNode.parent;\n      if (!parentNode) {\n        break;\n      }\n      if ((parentNode === this.rootNode || parentNode === this.deployedNode) &&\n          project.type() === Workspace.Workspace.projectTypes.FileSystem) {\n        break;\n      }\n      if (!(currentNode instanceof NavigatorGroupTreeNode || currentNode instanceof NavigatorFolderTreeNode)) {\n        break;\n      }\n      if (!currentNode.isEmpty()) {\n        currentNode.updateTitleBubbleUp();\n        break;\n      }\n      if (currentNode.type === Types.Frame) {\n        this.discardFrame(\n            frame as SDK.ResourceTreeModel.ResourceTreeFrame,\n            Boolean(this.groupByAuthored) && uiSourceCode.contentType().isFromSourceMap());\n        frame = (frame as SDK.ResourceTreeModel.ResourceTreeFrame).parentFrame();\n      } else {\n        const folderId = this.folderNodeId(\n            project, target, frame, uiSourceCode.origin(), uiSourceCode.contentType().isFromSourceMap(),\n            currentNode instanceof NavigatorFolderTreeNode && currentNode.folderPath ||\n                Platform.DevToolsPath.EmptyEncodedPathString);\n        this.subfolderNodes.delete(folderId);\n        parentNode.removeChild(currentNode);\n      }\n\n      if (currentNode === this.authoredNode) {\n        this.authoredNode = undefined;\n      } else if (currentNode === this.deployedNode) {\n        this.deployedNode = undefined;\n      }\n\n      currentNode = parentNode;\n    }\n  }\n\n  reset(tearDownOnly?: boolean): void {\n    for (const node of this.uiSourceCodeNodes.valuesArray()) {\n      node.dispose();\n    }\n\n    this.scriptsTree.removeChildren();\n    this.scriptsTree.setFocusable(false);\n    this.uiSourceCodeNodes.clear();\n    this.subfolderNodes.clear();\n    this.frameNodes.clear();\n    this.rootNode.reset();\n    this.authoredNode = undefined;\n    this.deployedNode = undefined;\n    if (!tearDownOnly) {\n      // Reset the workspace to repopulate filesystem folders.\n      this.resetWorkspace(Workspace.Workspace.WorkspaceImpl.instance());\n    }\n  }\n\n  handleContextMenu(_event: Event): void {\n  }\n\n  private async renameShortcut(): Promise<boolean> {\n    const selectedTreeElement = (this.scriptsTree.selectedTreeElement as NavigatorSourceTreeElement | null);\n    const node = selectedTreeElement?.node;\n    if (!node?.uiSourceCode()?.canRename()) {\n      return false;\n    }\n    this.rename(node, false);\n    return true;\n  }\n\n  private handleContextMenuCreate(\n      project: Workspace.Workspace.Project, path: Platform.DevToolsPath.EncodedPathString,\n      uiSourceCode?: Workspace.UISourceCode.UISourceCode): void {\n    if (uiSourceCode) {\n      const relativePath = Persistence.FileSystemWorkspaceBinding.FileSystemWorkspaceBinding.relativePath(uiSourceCode);\n      relativePath.pop();\n      path = Common.ParsedURL.ParsedURL.join(relativePath, '/');\n    }\n    void this.create(project, path, uiSourceCode);\n  }\n\n  private handleContextMenuRename(node: NavigatorUISourceCodeTreeNode): void {\n    this.rename(node, false);\n  }\n\n  private async handleContextMenuExclude(\n      project: Workspace.Workspace.Project, path: Platform.DevToolsPath.EncodedPathString): Promise<void> {\n    const shouldExclude = await UI.UIUtils.ConfirmDialog.show(\n        i18nString(UIStrings.folderWillNotBeShown), i18nString(UIStrings.excludeThisFolder), undefined,\n        {jslogContext: 'exclude-folder-confirmation'});\n    if (shouldExclude) {\n      UI.UIUtils.startBatchUpdate();\n      project.excludeFolder(\n          Persistence.FileSystemWorkspaceBinding.FileSystemWorkspaceBinding.completeURL(project, path));\n      UI.UIUtils.endBatchUpdate();\n    }\n  }\n\n  private async handleContextMenuDelete(uiSourceCode: Workspace.UISourceCode.UISourceCode): Promise<void> {\n    const shouldDelete = await UI.UIUtils.ConfirmDialog.show(\n        i18nString(UIStrings.actionCannotBeUndone), i18nString(UIStrings.deleteThisFile), undefined,\n        {jslogContext: 'delete-file-confirmation'});\n    if (shouldDelete) {\n      uiSourceCode.project().deleteFile(uiSourceCode);\n    }\n  }\n\n  handleFileContextMenu(event: Event, node: NavigatorUISourceCodeTreeNode): void {\n    const uiSourceCode = node.uiSourceCode();\n    const contextMenu = new UI.ContextMenu.ContextMenu(event);\n    contextMenu.appendApplicableItems(uiSourceCode);\n\n    const project = uiSourceCode.project();\n    if (project.type() === Workspace.Workspace.projectTypes.FileSystem) {\n      contextMenu.editSection().appendItem(\n          i18nString(UIStrings.rename), this.handleContextMenuRename.bind(this, node), {jslogContext: 'rename'});\n      contextMenu.editSection().appendItem(\n          i18nString(UIStrings.makeACopy),\n          this.handleContextMenuCreate.bind(this, project, Platform.DevToolsPath.EmptyEncodedPathString, uiSourceCode),\n          {jslogContext: 'make-a-copy'});\n      contextMenu.editSection().appendItem(\n          i18nString(UIStrings.delete), this.handleContextMenuDelete.bind(this, uiSourceCode),\n          {jslogContext: 'delete'});\n    }\n\n    void contextMenu.show();\n  }\n\n  private async handleDeleteFolder(node: NavigatorTreeNode): Promise<void> {\n    const shouldRemove = await UI.UIUtils.ConfirmDialog.show(\n        i18nString(UIStrings.actionCannotBeUndone), i18nString(UIStrings.deleteFolder), undefined,\n        {jslogContext: 'delete-folder-confirmation'});\n    if (shouldRemove) {\n      Host.userMetrics.actionTaken(Host.UserMetrics.Action.OverrideTabDeleteFolderContextMenu);\n      const topNode = this.findTopNonMergedNode(node);\n      await this.removeUISourceCodeFromProject(topNode);\n      await this.deleteDirectoryRecursively(topNode);\n    }\n  }\n\n  private async removeUISourceCodeFromProject(node: NavigatorTreeNode): Promise<void> {\n    node.children().slice(0).forEach(async child => {\n      await this.removeUISourceCodeFromProject(child);\n    });\n\n    if (node instanceof NavigatorUISourceCodeTreeNode) {\n      node.uiSourceCode().project().removeUISourceCode(node.uiSourceCode().url());\n    }\n  }\n\n  private async deleteDirectoryRecursively(node: NavigatorTreeNode): Promise<void> {\n    if (!(node instanceof NavigatorFolderTreeNode)) {\n      return;\n    }\n\n    await Persistence.NetworkPersistenceManager.NetworkPersistenceManager.instance()\n        .project()\n        ?.deleteDirectoryRecursively(node.folderPath);\n  }\n\n  private findTopNonMergedNode(node: NavigatorTreeNode): NavigatorTreeNode {\n    // multiple folder nodes can be merged into one if it only contains one file\n    // e.g. the folder of \"abc.com/assets/css/button.css\" can be \"abc.com/assets/css\"\n    // find the top non-merged node (abc.com) recursively\n\n    if (!node.isMerged) {\n      return node;\n    }\n\n    if (!(node.parent instanceof NavigatorFolderTreeNode)) {\n      return node;\n    }\n\n    return this.findTopNonMergedNode(node.parent);\n  }\n\n  handleFolderContextMenu(event: Event, node: NavigatorFolderTreeNode): void {\n    const path = node.folderPath || Platform.DevToolsPath.EmptyEncodedPathString;\n    const project = node.project || null;\n\n    const contextMenu = new UI.ContextMenu.ContextMenu(event);\n    if (project?.type() !== Workspace.Workspace.projectTypes.ConnectableFileSystem) {\n      NavigatorView.appendSearchItem(contextMenu, path);\n    }\n\n    if (!project) {\n      return;\n    }\n\n    if (project.type() === Workspace.Workspace.projectTypes.FileSystem) {\n      const folderPath = Common.ParsedURL.ParsedURL.urlToRawPathString(\n          Persistence.FileSystemWorkspaceBinding.FileSystemWorkspaceBinding.completeURL(project, path),\n          Host.Platform.isWin());\n      contextMenu.revealSection().appendItem(\n          i18nString(UIStrings.openFolder),\n          () => Host.InspectorFrontendHost.InspectorFrontendHostInstance.showItemInFolder(folderPath),\n          {jslogContext: 'open-folder'});\n      if (project.canCreateFile()) {\n        contextMenu.defaultSection().appendItem(i18nString(UIStrings.newFile), () => {\n          this.handleContextMenuCreate(project, path, undefined);\n        }, {jslogContext: 'new-file'});\n      }\n    } else if (node.origin && node.folderPath) {\n      const url = Common.ParsedURL.ParsedURL.concatenate(node.origin, '/', node.folderPath);\n      const options = {\n        isContentScript: node.recursiveProperties.exclusivelyContentScripts || false,\n        isKnownThirdParty: node.recursiveProperties.exclusivelyThirdParty || false,\n        isCurrentlyIgnoreListed: node.recursiveProperties.exclusivelyIgnored || false,\n      };\n      for (const {text, callback, jslogContext} of Workspace.IgnoreListManager.IgnoreListManager.instance()\n               .getIgnoreListFolderContextMenuItems(url, options)) {\n        contextMenu.defaultSection().appendItem(text, callback, {jslogContext});\n      }\n    }\n\n    if (project.canExcludeFolder(path)) {\n      contextMenu.defaultSection().appendItem(\n          i18nString(UIStrings.excludeFolder), this.handleContextMenuExclude.bind(this, project, path),\n          {jslogContext: 'exclude-folder'});\n    }\n\n    if (project.type() === Workspace.Workspace.projectTypes.ConnectableFileSystem) {\n      const automaticFileSystemManager = Persistence.AutomaticFileSystemManager.AutomaticFileSystemManager.instance();\n      const {automaticFileSystem} = automaticFileSystemManager;\n      if (automaticFileSystem?.state === 'disconnected') {\n        contextMenu.defaultSection().appendItem(i18nString(UIStrings.connectFolderToWorkspace), async () => {\n          await automaticFileSystemManager.connectAutomaticFileSystem(\n              /* addIfMissing= */ true);\n        }, {jslogContext: 'automatic-workspace-folders.connect'});\n      }\n    }\n\n    if (project.type() === Workspace.Workspace.projectTypes.FileSystem) {\n      if (Persistence.FileSystemWorkspaceBinding.FileSystemWorkspaceBinding.fileSystemType(project) !==\n          Persistence.PlatformFileSystem.PlatformFileSystemType.OVERRIDES) {\n        if (node instanceof NavigatorGroupTreeNode) {\n          contextMenu.defaultSection().appendItem(i18nString(UIStrings.removeFolderFromWorkspace), async () => {\n            const header =\n                i18nString(UIStrings.areYouSureYouWantToRemoveThis, {PH1: (node as NavigatorGroupTreeNode).title});\n            const shouldRemove =\n                await UI.UIUtils.ConfirmDialog.show(i18nString(UIStrings.workspaceStopSyncing), header, undefined, {\n                  okButtonLabel: i18nString(UIStrings.remove),\n                  jslogContext: 'remove-folder-from-workspace-confirmation',\n                });\n            if (shouldRemove) {\n              project.remove();\n            }\n          }, {jslogContext: 'remove-folder-from-workspace'});\n        }\n      } else if (!(node instanceof NavigatorGroupTreeNode)) {\n        contextMenu.defaultSection().appendItem(\n            i18nString(UIStrings.delete), this.handleDeleteFolder.bind(this, node), {jslogContext: 'delete'});\n      }\n    }\n\n    void contextMenu.show();\n  }\n\n  rename(node: NavigatorUISourceCodeTreeNode, creatingNewUISourceCode: boolean): void {\n    const uiSourceCode = node.uiSourceCode();\n    node.rename(callback.bind(this));\n\n    function callback(this: NavigatorView, committed: boolean): void {\n      if (!creatingNewUISourceCode) {\n        return;\n      }\n      if (!committed) {\n        uiSourceCode.remove();\n      } else if (node.treeElement?.listItemElement.hasFocus()) {\n        this.sourceSelected(uiSourceCode, true);\n      }\n    }\n  }\n\n  async create(\n      project: Workspace.Workspace.Project, path: Platform.DevToolsPath.EncodedPathString,\n      uiSourceCodeToCopy?: Workspace.UISourceCode.UISourceCode): Promise<void> {\n    let content = '';\n    if (uiSourceCodeToCopy) {\n      const contentDataOrError = await uiSourceCodeToCopy.requestContentData();\n      content = TextUtils.ContentData.ContentData.textOr(contentDataOrError, '');\n    }\n    const uiSourceCode = await project.createFile(path, null, content);\n    if (!uiSourceCode) {\n      return;\n    }\n    this.sourceSelected(uiSourceCode, false);\n    const node = this.revealUISourceCode(uiSourceCode, true);\n    if (node) {\n      this.rename(node, true);\n    }\n  }\n\n  private groupingChanged(): void {\n    this.reset(true);\n    this.initGrouping();\n    // Reset the workspace to repopulate filesystem folders.\n    this.resetWorkspace(Workspace.Workspace.WorkspaceImpl.instance());\n    this.workspaceInternal.uiSourceCodes().forEach(this.addUISourceCode.bind(this));\n  }\n\n  private ignoreListChanged(): void {\n    if (Root.Runtime.experiments.isEnabled(Root.Runtime.ExperimentName.JUST_MY_CODE)) {\n      this.groupingChanged();\n    } else {\n      this.rootNode.updateTitleRecursive();\n    }\n  }\n\n  private initGrouping(): void {\n    this.groupByFrame = true;\n    this.groupByDomain = this.navigatorGroupByFolderSetting.get();\n    this.groupByFolder = this.groupByDomain;\n    if (this.navigatorGroupByAuthoredExperiment) {\n      this.groupByAuthored = Root.Runtime.experiments.isEnabled(this.navigatorGroupByAuthoredExperiment);\n    } else {\n      this.groupByAuthored = false;\n    }\n  }\n\n  protected resetForTest(): void {\n    this.reset();\n    this.workspaceInternal.uiSourceCodes().forEach(this.addUISourceCode.bind(this));\n  }\n\n  private discardFrame(frame: SDK.ResourceTreeModel.ResourceTreeFrame, isAuthored: boolean): void {\n    if (isAuthored) {\n      return;\n    }\n    const node = this.frameNodes.get(frame);\n    if (!node) {\n      return;\n    }\n\n    if (node.parent) {\n      node.parent.removeChild(node);\n    }\n    this.frameNodes.delete(frame);\n    for (const child of frame.childFrames) {\n      this.discardFrame(child, isAuthored);\n    }\n  }\n\n  targetAdded(_target: SDK.Target.Target): void {\n  }\n\n  targetRemoved(target: SDK.Target.Target): void {\n    const rootOrDeployed = this.rootOrDeployedNode();\n    const targetNode = rootOrDeployed.child('target:' + target.id());\n    if (targetNode) {\n      rootOrDeployed.removeChild(targetNode);\n    }\n  }\n\n  private targetNameChanged(event: Common.EventTarget.EventTargetEvent<SDK.Target.Target>): void {\n    const target = event.data;\n    const targetNode = this.rootOrDeployedNode().child('target:' + target.id());\n    if (targetNode) {\n      targetNode.setTitle(target.name());\n    }\n  }\n}\n\nconst boostOrderForNode = new WeakSet<UI.TreeOutline.TreeElement>();\n\nexport class NavigatorFolderTreeElement extends UI.TreeOutline.TreeElement {\n  private readonly nodeType: string;\n  private readonly navigatorView: NavigatorView;\n  private hoverCallback: ((arg0: boolean) => void)|undefined;\n  node!: NavigatorTreeNode;\n  private hovered?: boolean;\n  private isIgnoreListed?: boolean;\n\n  constructor(\n      navigatorView: NavigatorView, type: string, title: string, hoverCallback?: ((arg0: boolean) => void),\n      expandable = true) {\n    super('', expandable, NavigatorFolderTreeElement.#contextForType(type));\n    this.listItemElement.classList.add('navigator-' + type + '-tree-item', 'navigator-folder-tree-item');\n    UI.ARIAUtils.setLabel(this.listItemElement, `${title}, ${type}`);\n    this.nodeType = type;\n    this.title = title;\n    this.tooltip = title;\n    this.navigatorView = navigatorView;\n    this.hoverCallback = hoverCallback;\n\n    let iconType = 'folder';\n\n    if (type === Types.Domain) {\n      iconType = 'cloud';\n    } else if (type === Types.Frame) {\n      iconType = 'frame';\n    } else if (type === Types.Worker) {\n      iconType = 'gears';\n    } else if (type === Types.Authored) {\n      iconType = 'code';\n    } else if (type === Types.Deployed) {\n      iconType = 'deployed';\n    } else if (type === Types.AutomaticFileSystem) {\n      iconType = 'folder-asterisk';\n    }\n\n    const icon = IconButton.Icon.create(iconType);\n    this.setLeadingIcons([icon]);\n  }\n\n  override async onpopulate(): Promise<void> {\n    this.node.populate();\n  }\n\n  override onattach(): void {\n    this.collapse();\n    this.node.onattach();\n    this.listItemElement.addEventListener('contextmenu', this.handleContextMenuEvent.bind(this), false);\n    this.listItemElement.addEventListener('mousemove', this.mouseMove.bind(this), false);\n    this.listItemElement.addEventListener('mouseleave', this.mouseLeave.bind(this), false);\n  }\n\n  setIgnoreListed(isIgnoreListed: boolean): void {\n    if (this.isIgnoreListed !== isIgnoreListed) {\n      this.isIgnoreListed = isIgnoreListed;\n      this.listItemElement.classList.toggle('is-ignore-listed', isIgnoreListed);\n      this.updateTooltip();\n    }\n  }\n\n  setFromSourceMap(isFromSourceMap: boolean): void {\n    this.listItemElement.classList.toggle('is-from-source-map', isFromSourceMap);\n  }\n\n  setNode(node: NavigatorTreeNode): void {\n    this.node = node;\n    this.updateTooltip();\n    UI.ARIAUtils.setLabel(this.listItemElement, `${this.title}, ${this.nodeType}`);\n  }\n\n  private updateTooltip(): void {\n    if (this.node.tooltip) {\n      this.tooltip = this.node.tooltip;\n    } else {\n      const paths = [];\n      let currentNode: NavigatorTreeNode|null = this.node;\n      while (currentNode && !currentNode.isRoot() && currentNode.type === this.node.type) {\n        paths.push(currentNode.title);\n        currentNode = currentNode.parent;\n      }\n      paths.reverse();\n      let tooltip = paths.join('/');\n      if (this.isIgnoreListed) {\n        tooltip = i18nString(UIStrings.sIgnoreListed, {PH1: tooltip});\n      }\n      this.tooltip = tooltip;\n    }\n  }\n\n  private handleContextMenuEvent(event: Event): void {\n    if (!this.node) {\n      return;\n    }\n    this.select();\n    this.navigatorView.handleFolderContextMenu(event, this.node as NavigatorFolderTreeNode);\n  }\n\n  private mouseMove(_event: Event): void {\n    if (this.hovered || !this.hoverCallback) {\n      return;\n    }\n    this.hovered = true;\n    this.hoverCallback(true);\n  }\n\n  private mouseLeave(_event: Event): void {\n    if (!this.hoverCallback) {\n      return;\n    }\n    this.hovered = false;\n    this.hoverCallback(false);\n  }\n\n  static #contextForType(type: string): string {\n    switch (type) {\n      case Types.Domain:\n        return 'domain';\n      case Types.Frame:\n        return 'frame';\n      case Types.Worker:\n        return 'worker';\n      case Types.Authored:\n        return 'authored';\n      case Types.Deployed:\n        return 'deployed';\n    }\n    return 'folder';\n  }\n}\n\nexport class NavigatorSourceTreeElement extends UI.TreeOutline.TreeElement {\n  readonly nodeType: string;\n  readonly node: NavigatorUISourceCodeTreeNode;\n  private readonly navigatorView: NavigatorView;\n  uiSourceCodeInternal: Workspace.UISourceCode.UISourceCode;\n  private aiButtonContainer?: HTMLElement;\n\n  constructor(\n      navigatorView: NavigatorView, uiSourceCode: Workspace.UISourceCode.UISourceCode, title: string,\n      node: NavigatorUISourceCodeTreeNode) {\n    super('', false, uiSourceCode.contentType().name());\n    this.nodeType = Types.File;\n    this.node = node;\n    this.title = title;\n    this.listItemElement.classList.add(\n        'navigator-' + uiSourceCode.contentType().name() + '-tree-item', 'navigator-file-tree-item');\n    this.tooltip = uiSourceCode.url();\n    UI.ARIAUtils.setLabel(this.listItemElement, `${uiSourceCode.name()}, ${this.nodeType}`);\n    Common.EventTarget.fireEvent('source-tree-file-added', uiSourceCode.fullDisplayName());\n    this.navigatorView = navigatorView;\n    this.uiSourceCodeInternal = uiSourceCode;\n    this.updateIcon();\n    (this.titleElement as HTMLElement).setAttribute('jslog', `${VisualLogging.value('title').track({change: true})}`);\n  }\n\n  updateIcon(): void {\n    const icon = PanelUtils.getIconForSourceFile(this.uiSourceCodeInternal);\n    this.setLeadingIcons([icon]);\n  }\n\n  updateAccessibleName(): void {\n    UI.ARIAUtils.setLabel(this.listItemElement, `${this.uiSourceCodeInternal.name()}, ${this.nodeType}`);\n  }\n\n  private createAiButton(): void {\n    if (!UI.ActionRegistry.ActionRegistry.instance().hasAction('drjones.sources-floating-button')) {\n      return;\n    }\n    if (!this.uiSourceCode.contentType().isTextType() ||\n        Snippets.ScriptSnippetFileSystem.isSnippetsUISourceCode(this.uiSourceCode)) {\n      return;\n    }\n    const action = UI.ActionRegistry.ActionRegistry.instance().getAction('drjones.sources-floating-button');\n    if (!this.aiButtonContainer) {\n      this.aiButtonContainer = this.listItemElement.createChild('span', 'ai-button-container');\n      const floatingButton = Buttons.FloatingButton.create('smart-assistant', action.title(), 'ask-ai');\n      floatingButton.addEventListener('click', ev => {\n        ev.stopPropagation();\n        this.navigatorView.sourceSelected(this.uiSourceCode, false);\n        void action.execute();\n      }, {capture: true});\n      floatingButton.addEventListener('mousedown', ev => {\n        ev.stopPropagation();\n      }, {capture: true});\n      this.aiButtonContainer.appendChild(floatingButton);\n    }\n  }\n\n  get uiSourceCode(): Workspace.UISourceCode.UISourceCode {\n    return this.uiSourceCodeInternal;\n  }\n\n  override onattach(): void {\n    this.listItemElement.draggable = true;\n    this.listItemElement.addEventListener('click', this.onclick.bind(this), false);\n    this.listItemElement.addEventListener('contextmenu', this.handleContextMenuEvent.bind(this), false);\n    this.listItemElement.addEventListener('dragstart', this.ondragstart.bind(this), false);\n    this.createAiButton();\n  }\n\n  private shouldRenameOnMouseDown(): boolean {\n    if (!this.uiSourceCodeInternal.canRename()) {\n      return false;\n    }\n    if (!this.treeOutline) {\n      return false;\n    }\n    const isSelected = this === this.treeOutline.selectedTreeElement;\n    return isSelected && this.treeOutline.element.hasFocus() && !UI.UIUtils.isBeingEdited(this.treeOutline.element);\n  }\n\n  override selectOnMouseDown(event: MouseEvent): void {\n    if (event.which !== 1 || !this.shouldRenameOnMouseDown()) {\n      super.selectOnMouseDown(event);\n      return;\n    }\n    window.setTimeout(rename.bind(this), 300);\n\n    function rename(this: NavigatorSourceTreeElement): void {\n      if (this.shouldRenameOnMouseDown()) {\n        this.navigatorView.rename(this.node, false);\n      }\n    }\n  }\n\n  private ondragstart(event: DragEvent): void {\n    if (!event.dataTransfer) {\n      return;\n    }\n    event.dataTransfer.setData('text/plain', this.uiSourceCodeInternal.url());\n    event.dataTransfer.effectAllowed = 'copy';\n  }\n\n  override onspace(): boolean {\n    this.navigatorView.sourceSelected(this.uiSourceCode, true);\n    return true;\n  }\n\n  private onclick(_event: Event): void {\n    this.navigatorView.sourceSelected(this.uiSourceCode, false);\n  }\n\n  override ondblclick(event: Event): boolean {\n    const middleClick = (event as MouseEvent).button === 1;\n    this.navigatorView.sourceSelected(this.uiSourceCode, !middleClick);\n    return false;\n  }\n\n  override onenter(): boolean {\n    this.navigatorView.sourceSelected(this.uiSourceCode, true);\n    return true;\n  }\n\n  override ondelete(): boolean {\n    return true;\n  }\n\n  private handleContextMenuEvent(event: Event): void {\n    this.select();\n    this.navigatorView.handleFileContextMenu(event, this.node);\n  }\n}\n\nexport interface NavigatorRecursiveTreeNodeProperties {\n  exclusivelySourceMapped: boolean|null;\n  exclusivelyIgnored: boolean|null;\n  exclusivelyThirdParty: boolean|null;\n  exclusivelyContentScripts: boolean|null;\n}\n\nexport class NavigatorTreeNode {\n  id: string;\n  protected navigatorView: NavigatorView;\n  type: string;\n  private populated: boolean;\n  isMerged: boolean;\n  parent!: NavigatorTreeNode|null;\n  title!: string;\n  tooltip?: string;\n  recursiveProperties: NavigatorRecursiveTreeNodeProperties;\n\n  #children: NavigatorTreeNode[] = [];\n  readonly #childById = new Map<string, NavigatorTreeNode>();\n\n  constructor(navigatorView: NavigatorView, id: string, type: string, tooltip?: string) {\n    this.id = id;\n    this.navigatorView = navigatorView;\n    this.type = type;\n    this.tooltip = tooltip;\n\n    this.populated = false;\n    this.isMerged = false;\n    this.recursiveProperties = {\n      exclusivelySourceMapped: null,\n      exclusivelyIgnored: null,\n      exclusivelyContentScripts: null,\n      exclusivelyThirdParty: null,\n    };\n  }\n\n  treeNode(): UI.TreeOutline.TreeElement {\n    throw new Error('Not implemented');\n  }\n\n  dispose(): void {\n  }\n\n  updateTitle(): void {\n  }\n\n  updateTitleRecursive(): void {\n    for (const child of this.children()) {\n      child.updateTitleRecursive();\n    }\n    this.updateTitle();\n  }\n\n  updateTitleBubbleUp(): void {\n    this.updateTitle();\n    if (this.parent) {\n      this.parent.updateTitleBubbleUp();\n    }\n  }\n\n  isRoot(): boolean {\n    return false;\n  }\n\n  hasChildren(): boolean {\n    return true;\n  }\n\n  onattach(): void {\n  }\n\n  setTitle(_title: string): void {\n    throw new Error('Not implemented');\n  }\n\n  populate(): void {\n    if (this.isPopulated()) {\n      return;\n    }\n    if (this.parent) {\n      this.parent.populate();\n    }\n    this.populated = true;\n    this.wasPopulated();\n  }\n\n  wasPopulated(): void {\n    const children = this.children();\n    for (let i = 0; i < children.length; ++i) {\n      this.navigatorView.appendChild(this.treeNode(), (children[i].treeNode()));\n    }\n  }\n\n  didAddChild(node: NavigatorTreeNode): void {\n    if (this.isPopulated()) {\n      this.navigatorView.appendChild(this.treeNode(), (node.treeNode()));\n    }\n  }\n\n  willRemoveChild(node: NavigatorTreeNode): void {\n    if (this.isPopulated()) {\n      this.navigatorView.removeChild(this.treeNode(), (node.treeNode()));\n    }\n  }\n\n  isPopulated(): boolean {\n    return this.populated;\n  }\n\n  isEmpty(): boolean {\n    return !this.#children.length;\n  }\n\n  children(): readonly NavigatorTreeNode[] {\n    return this.#children;\n  }\n\n  child(id: string): NavigatorTreeNode|null {\n    return this.#childById.get(id) ?? null;\n  }\n\n  appendChild(node: NavigatorTreeNode): void {\n    this.#children.push(node);\n    this.#childById.set(node.id, node);\n    node.parent = this;\n    this.didAddChild(node);\n  }\n\n  removeChild(node: NavigatorTreeNode): void {\n    this.willRemoveChild(node);\n    const idx = this.#children.findIndex(n => n.id === node.id);\n    if (idx >= 0) {\n      this.#children.splice(idx, 1);\n    }\n    this.#childById.delete(node.id);\n    node.parent = null;\n    node.dispose();\n  }\n\n  reset(): void {\n    this.#children = [];\n    this.#childById.clear();\n  }\n\n  updateId(newId: string): void {\n    if (this.parent) {\n      this.parent.#childById.delete(this.id);\n      this.parent.#childById.set(newId, this);\n    }\n    this.id = newId;\n  }\n}\n\nexport class NavigatorRootTreeNode extends NavigatorTreeNode {\n  constructor(navigatorView: NavigatorView) {\n    super(navigatorView, '', Types.Root);\n  }\n\n  override isRoot(): boolean {\n    return true;\n  }\n\n  override treeNode(): UI.TreeOutline.TreeElement {\n    return this.navigatorView.scriptsTree.rootElement();\n  }\n}\n\nexport class NavigatorUISourceCodeTreeNode extends NavigatorTreeNode {\n  uiSourceCodeInternal: Workspace.UISourceCode.UISourceCode;\n  treeElement: NavigatorSourceTreeElement|null;\n  private eventListeners: Common.EventTarget.EventDescriptor[];\n  private readonly frameInternal: SDK.ResourceTreeModel.ResourceTreeFrame|null;\n  constructor(\n      navigatorView: NavigatorView, uiSourceCode: Workspace.UISourceCode.UISourceCode,\n      frame: SDK.ResourceTreeModel.ResourceTreeFrame|null) {\n    super(navigatorView, 'UISourceCode:' + uiSourceCode.canonicalScriptId(), Types.File);\n    this.uiSourceCodeInternal = uiSourceCode;\n    this.treeElement = null;\n    this.eventListeners = [];\n    this.frameInternal = frame;\n    this.recursiveProperties.exclusivelySourceMapped = uiSourceCode.contentType().isFromSourceMap();\n    if (uiSourceCode.contentType().isScript()) {\n      // These properties affect ignore-listing menus and only matter when the UISourceCode is a script\n      this.recursiveProperties.exclusivelyThirdParty = uiSourceCode.isKnownThirdParty();\n      this.recursiveProperties.exclusivelyContentScripts =\n          uiSourceCode.project().type() === Workspace.Workspace.projectTypes.ContentScripts;\n    }\n  }\n\n  frame(): SDK.ResourceTreeModel.ResourceTreeFrame|null {\n    return this.frameInternal;\n  }\n\n  uiSourceCode(): Workspace.UISourceCode.UISourceCode {\n    return this.uiSourceCodeInternal;\n  }\n\n  override treeNode(): UI.TreeOutline.TreeElement {\n    if (this.treeElement) {\n      return this.treeElement;\n    }\n\n    this.treeElement = new NavigatorSourceTreeElement(this.navigatorView, this.uiSourceCodeInternal, '', this);\n    this.updateTitle();\n\n    const updateTitleBound = this.updateTitle.bind(this, undefined);\n    this.eventListeners = [\n      this.uiSourceCodeInternal.addEventListener(Workspace.UISourceCode.Events.TitleChanged, updateTitleBound),\n      this.uiSourceCodeInternal.addEventListener(Workspace.UISourceCode.Events.WorkingCopyChanged, updateTitleBound),\n      this.uiSourceCodeInternal.addEventListener(Workspace.UISourceCode.Events.WorkingCopyCommitted, updateTitleBound),\n    ];\n    return this.treeElement;\n  }\n\n  override updateTitle(ignoreIsDirty?: boolean): void {\n    const isIgnoreListed =\n        Workspace.IgnoreListManager.IgnoreListManager.instance().isUserOrSourceMapIgnoreListedUISourceCode(\n            this.uiSourceCodeInternal);\n    if (this.uiSourceCodeInternal.contentType().isScript() || isIgnoreListed) {\n      this.recursiveProperties.exclusivelyIgnored = isIgnoreListed;\n    }\n\n    if (!this.treeElement) {\n      return;\n    }\n\n    let titleText = this.uiSourceCodeInternal.displayName();\n    if (!ignoreIsDirty && this.uiSourceCodeInternal.isDirty()) {\n      titleText = '*' + titleText;\n    }\n\n    this.treeElement.title = titleText;\n    this.treeElement.updateIcon();\n\n    this.treeElement.listItemElement.classList.toggle('is-ignore-listed', isIgnoreListed);\n\n    let tooltip: string = this.uiSourceCodeInternal.url();\n    if (this.uiSourceCodeInternal.contentType().isFromSourceMap()) {\n      tooltip = i18nString(UIStrings.sFromSourceMap, {PH1: this.uiSourceCodeInternal.displayName()});\n    }\n    if (isIgnoreListed) {\n      tooltip = i18nString(UIStrings.sIgnoreListed, {PH1: tooltip});\n    }\n\n    this.treeElement.tooltip = tooltip;\n    this.treeElement.updateAccessibleName();\n\n    this.updateId('UISourceCode:' + this.uiSourceCodeInternal.canonicalScriptId());\n  }\n\n  override hasChildren(): boolean {\n    return false;\n  }\n\n  override dispose(): void {\n    Common.EventTarget.removeEventListeners(this.eventListeners);\n  }\n\n  reveal(select?: boolean): void {\n    if (this.parent) {\n      this.parent.populate();\n      this.parent.treeNode().expand();\n    }\n    if (this.treeElement) {\n      this.treeElement.reveal(true);\n      if (select) {\n        this.treeElement.select(true);\n      }\n    }\n  }\n\n  rename(callback?: ((committed: boolean) => void)): void {\n    if (!this.treeElement) {\n      return;\n    }\n\n    this.treeElement.listItemElement.focus();\n\n    if (!this.treeElement.treeOutline) {\n      return;\n    }\n\n    // Tree outline should be marked as edited as well as the tree element to prevent search from starting.\n    const treeOutlineElement = this.treeElement.treeOutline.element;\n    UI.UIUtils.markBeingEdited(treeOutlineElement, true);\n\n    const commitHandler = (_element: Element, newTitle: string, oldTitle: string|null): void => {\n      if (newTitle !== oldTitle) {\n        if (this.treeElement) {\n          this.treeElement.title = newTitle;\n        }\n        // necessary cast to RawPathString as alternative would be altering type of Config<T>\n        void this.uiSourceCodeInternal.rename(newTitle as Platform.DevToolsPath.RawPathString).then(renameCallback);\n        return;\n      }\n      afterEditing(true);\n    };\n\n    const renameCallback = (success: boolean): void => {\n      if (!success) {\n        UI.UIUtils.markBeingEdited(treeOutlineElement, false);\n        this.updateTitle();\n        this.rename(callback);\n        return;\n      }\n      if (this.treeElement) {\n        const {parent} = this.treeElement;\n        if (parent) {\n          parent.removeChild(this.treeElement);\n          parent.appendChild(this.treeElement);\n          this.treeElement.select();\n        }\n      }\n      afterEditing(true);\n    };\n\n    const afterEditing = (committed: boolean): void => {\n      UI.UIUtils.markBeingEdited(treeOutlineElement, false);\n      this.updateTitle();\n      if (callback) {\n        callback(committed);\n      }\n    };\n\n    this.updateTitle(true);\n    this.treeElement.startEditingTitle(\n        new UI.InplaceEditor.Config(commitHandler, () => afterEditing(false), undefined));\n  }\n}\n\nexport class NavigatorFolderTreeNode extends NavigatorTreeNode {\n  project: Workspace.Workspace.Project|null;\n  readonly folderPath: Platform.DevToolsPath.EncodedPathString;\n  readonly origin: Platform.DevToolsPath.UrlString;\n  override title: string;\n  treeElement!: NavigatorFolderTreeElement|null;\n  constructor(\n      navigatorView: NavigatorView, project: Workspace.Workspace.Project|null, id: string, type: string,\n      folderPath: Platform.DevToolsPath.EncodedPathString, title: string, origin: Platform.DevToolsPath.UrlString) {\n    super(navigatorView, id, type);\n    this.project = project;\n    this.folderPath = folderPath;\n    this.title = title;\n    this.origin = origin;\n  }\n\n  override treeNode(): UI.TreeOutline.TreeElement {\n    if (this.treeElement) {\n      return this.treeElement;\n    }\n    this.treeElement = this.createTreeElement(this.title, this);\n    this.updateTitle();\n    return this.treeElement;\n  }\n\n  override updateTitle(): void {\n    let propName: keyof NavigatorRecursiveTreeNodeProperties;\n    for (propName in this.recursiveProperties) {\n      let propValue: boolean|null = null;\n      for (const child of this.children()) {\n        if (child.recursiveProperties[propName] === false) {\n          propValue = false;\n          break;\n        } else if (child.recursiveProperties[propName]) {\n          propValue = true;\n        }\n      }\n      this.recursiveProperties[propName] = propValue;\n    }\n\n    if (!this.treeElement) {\n      return;\n    }\n\n    this.treeElement.setFromSourceMap(this.recursiveProperties.exclusivelySourceMapped || false);\n    this.treeElement.setIgnoreListed(this.recursiveProperties.exclusivelyIgnored || false);\n\n    if (!this.project || this.project.type() !== Workspace.Workspace.projectTypes.FileSystem) {\n      return;\n    }\n\n    const absoluteFileSystemPath = Common.ParsedURL.ParsedURL.concatenate(\n        Persistence.FileSystemWorkspaceBinding.FileSystemWorkspaceBinding.fileSystemPath(\n            this.project.id() as Platform.DevToolsPath.UrlString),\n        '/', this.folderPath);\n    const hasMappedFiles =\n        Persistence.Persistence.PersistenceImpl.instance().filePathHasBindings(absoluteFileSystemPath);\n    this.treeElement.listItemElement.classList.toggle('has-mapped-files', hasMappedFiles);\n  }\n\n  private createTreeElement(title: string, node: NavigatorTreeNode): NavigatorFolderTreeElement {\n    const treeElement = new NavigatorFolderTreeElement(this.navigatorView, this.type, title);\n    treeElement.setNode(node);\n    return treeElement;\n  }\n\n  override wasPopulated(): void {\n    if (!this.treeElement || this.treeElement.node !== this) {\n      return;\n    }\n    this.addChildrenRecursive();\n  }\n\n  private addChildrenRecursive(): void {\n    const children = this.children();\n    for (let i = 0; i < children.length; ++i) {\n      const child = children[i];\n      this.didAddChild(child);\n      if (child instanceof NavigatorFolderTreeNode) {\n        child.addChildrenRecursive();\n      }\n    }\n  }\n\n  private shouldMerge(node: NavigatorTreeNode): boolean {\n    return this.type !== Types.Domain && node instanceof NavigatorFolderTreeNode;\n  }\n\n  override didAddChild(node: NavigatorTreeNode): void {\n    if (!this.treeElement) {\n      return;\n    }\n\n    let children = this.children();\n\n    if (children.length === 1 && this.shouldMerge(node)) {\n      node.isMerged = true;\n      this.treeElement.title = this.treeElement.title + '/' + node.title;\n      (node as NavigatorFolderTreeNode).treeElement = this.treeElement;\n      node.updateTitle();\n      this.treeElement.setNode(node);\n      return;\n    }\n\n    let oldNode;\n    if (children.length === 2) {\n      oldNode = children[0] !== node ? children[0] : children[1];\n    }\n    if (oldNode?.isMerged) {\n      oldNode.isMerged = false;\n      const mergedToNodes = [];\n      mergedToNodes.push(this);\n      let treeNode: (NavigatorTreeNode|null)|NavigatorTreeNode|this = this;\n      while (treeNode && treeNode.isMerged) {\n        treeNode = treeNode.parent;\n        if (treeNode) {\n          mergedToNodes.push(treeNode);\n        }\n      }\n      mergedToNodes.reverse();\n      const titleText = mergedToNodes.map(node => node.title).join('/');\n\n      const nodes = [];\n      treeNode = oldNode;\n      do {\n        nodes.push(treeNode);\n        children = treeNode.children();\n        treeNode = children.length === 1 ? children[0] : null;\n      } while (treeNode?.isMerged);\n\n      if (!this.isPopulated()) {\n        this.treeElement.title = titleText;\n        this.treeElement.setNode(this);\n        for (let i = 0; i < nodes.length; ++i) {\n          (nodes[i] as NavigatorFolderTreeNode).treeElement = null;\n          nodes[i].isMerged = false;\n        }\n        this.updateTitle();\n        return;\n      }\n      const oldTreeElement = this.treeElement;\n      const treeElement = this.createTreeElement(titleText, this);\n      for (let i = 0; i < mergedToNodes.length; ++i) {\n        (mergedToNodes[i] as NavigatorFolderTreeNode).treeElement = treeElement;\n        mergedToNodes[i].updateTitle();\n      }\n      if (oldTreeElement.parent) {\n        this.navigatorView.appendChild(oldTreeElement.parent, treeElement);\n      }\n\n      oldTreeElement.setNode(nodes[nodes.length - 1]);\n      oldTreeElement.title = nodes.map(node => node.title).join('/');\n      if (oldTreeElement.parent) {\n        this.navigatorView.removeChild(oldTreeElement.parent, oldTreeElement);\n      }\n      this.navigatorView.appendChild(this.treeElement, oldTreeElement);\n      if (oldTreeElement.expanded) {\n        treeElement.expand();\n      }\n      this.updateTitle();\n    }\n    if (this.isPopulated()) {\n      this.navigatorView.appendChild(this.treeElement, node.treeNode());\n    }\n  }\n\n  override willRemoveChild(node: NavigatorTreeNode): void {\n    const actualNode = (node as NavigatorFolderTreeNode);\n    if (actualNode.isMerged || !this.isPopulated() || !this.treeElement || !actualNode.treeElement) {\n      return;\n    }\n    this.navigatorView.removeChild(this.treeElement, actualNode.treeElement);\n  }\n}\n\nexport class NavigatorGroupTreeNode extends NavigatorTreeNode {\n  private readonly project: Workspace.Workspace.Project|null;\n  override title: string;\n  private hoverCallback?: ((arg0: boolean) => void);\n  private treeElement?: NavigatorFolderTreeElement;\n  constructor(\n      navigatorView: NavigatorView, project: Workspace.Workspace.Project|null, id: string, type: string, title: string,\n      tooltip?: string) {\n    super(navigatorView, id, type, tooltip);\n    this.project = project;\n    this.title = title;\n    this.populate();\n  }\n\n  setHoverCallback(hoverCallback: (arg0: boolean) => void): void {\n    this.hoverCallback = hoverCallback;\n  }\n\n  override treeNode(): UI.TreeOutline.TreeElement {\n    if (this.treeElement) {\n      return this.treeElement;\n    }\n    const expandable = !(this.project instanceof Persistence.AutomaticFileSystemWorkspaceBinding.FileSystem);\n    this.treeElement =\n        new NavigatorFolderTreeElement(this.navigatorView, this.type, this.title, this.hoverCallback, expandable);\n    this.treeElement.setNode(this);\n    if (this.project instanceof Persistence.AutomaticFileSystemWorkspaceBinding.FileSystem) {\n      const {automaticFileSystem, automaticFileSystemManager} = this.project;\n      switch (automaticFileSystem?.state) {\n        case 'connecting': {\n          const spinner = new Spinners.Spinner.Spinner();\n          this.treeElement.listItemElement.append(spinner);\n          break;\n        }\n        case 'disconnected': {\n          const button = new Buttons.Button.Button();\n          button.data = {\n            variant: Buttons.Button.Variant.OUTLINED,\n            size: Buttons.Button.Size.MICRO,\n            title: i18nString(UIStrings.connectFolderToWorkspace),\n            jslogContext: 'automatic-workspace-folders.connect',\n          };\n          button.textContent = i18nString(UIStrings.connect);\n          button.addEventListener('click', async event => {\n            event.consume();\n            await automaticFileSystemManager.connectAutomaticFileSystem(\n                /* addIfMissing= */ true);\n          });\n          this.treeElement.listItemElement.append(button);\n          break;\n        }\n      }\n    }\n    return this.treeElement;\n  }\n\n  override onattach(): void {\n    this.updateTitle();\n  }\n\n  override updateTitle(): void {\n    if (!this.treeElement || !this.project || this.project.type() !== Workspace.Workspace.projectTypes.FileSystem) {\n      return;\n    }\n    const fileSystemPath = Persistence.FileSystemWorkspaceBinding.FileSystemWorkspaceBinding.fileSystemPath(\n        this.project.id() as Platform.DevToolsPath.UrlString);\n    const wasActive = this.treeElement.listItemElement.classList.contains('has-mapped-files');\n    const isActive = Persistence.Persistence.PersistenceImpl.instance().filePathHasBindings(fileSystemPath);\n    if (wasActive === isActive) {\n      return;\n    }\n    this.treeElement.listItemElement.classList.toggle('has-mapped-files', isActive);\n    if (this.treeElement.childrenListElement.hasFocus()) {\n      return;\n    }\n    if (isActive) {\n      this.treeElement.expand();\n    } else {\n      this.treeElement.collapse();\n    }\n  }\n\n  override setTitle(title: string): void {\n    this.title = title;\n    if (this.treeElement) {\n      this.treeElement.title = this.title;\n    }\n  }\n}\n", "// Copyright 2025 The Chromium Authors. All rights reserved.\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\n// IMPORTANT: this file is auto generated. Please do not edit this file.\n/* istanbul ignore file */\nexport default `/*\n * Copyright (C) 2006, 2007, 2008 Apple Inc.  All rights reserved.\n * Copyright (C) 2009 Anthony Ricaud <rik@webkit.org>\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions\n * are met:\n *\n * 1.  Redistributions of source code must retain the above copyright\n *     notice, this list of conditions and the following disclaimer.\n * 2.  Redistributions in binary form must reproduce the above copyright\n *     notice, this list of conditions and the following disclaimer in the\n *     documentation and/or other materials provided with the distribution.\n * 3.  Neither the name of Apple Computer, Inc. (\"Apple\") nor the names of\n *     its contributors may be used to endorse or promote products derived\n *     from this software without specific prior written permission.\n *\n * THIS SOFTWARE IS PROVIDED BY APPLE AND ITS CONTRIBUTORS \"AS IS\" AND ANY\n * EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL APPLE OR ITS CONTRIBUTORS BE LIABLE FOR ANY\n * DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF\n * THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */\n\n.is-ignore-listed {\n  .tree-element-title,\n  .leading-icons {\n    opacity: 40%;\n  }\n}\n\n.tree-outline li {\n  min-height: 20px;\n}\n\n.tree-outline li:hover:not(.selected) .selection {\n  display: block;\n  background-color: var(--sys-color-state-hover-on-subtle);\n}\n\n.navigator-fs-folder-tree-item devtools-icon {\n  color: var(--icon-folder-workspace);\n}\n\n.navigator-automatic-fs-tree-item devtools-icon,\n.navigator-fs-tree-item devtools-icon {\n  color: var(--icon-file-authored);\n}\n\n.navigator-nw-folder-tree-item devtools-icon {\n  color: var(--icon-folder-deployed);\n}\n\n.navigator-sm-script-tree-item devtools-icon,\n.navigator-script-tree-item devtools-icon,\n.navigator-snippet-tree-item devtools-icon {\n  color: var(--icon-file-script);\n}\n\n.navigator-file-tree-item .ai-button-container {\n  display: none;\n  position: absolute;\n  z-index: 999;\n  right: var(--sys-size-3);\n}\n\n.navigator-file-tree-item:hover .ai-button-container {\n  display: inline-flex;\n}\n\n.navigator-file-tree-item devtools-icon.dot::before {\n  width: 7px;\n  height: 7px;\n  top: 12px;\n  left: 11px;\n}\n\n.navigator-file-tree-item:hover:not(.force-white-icons) devtools-icon.dot::before {\n  outline-color: var(--icon-gap-hover);\n}\n\n.navigator-file-tree-item.selected:not(.force-white-icons) devtools-icon.dot::before {\n  outline-color: var(--icon-gap-inactive);\n}\n\n.navigator-file-tree-item.selected.force-white-icons devtools-icon.dot::before {\n  outline-color: var(--icon-gap-focus-selected);\n}\n\n.navigator-sm-stylesheet-tree-item devtools-icon,\n.navigator-stylesheet-tree-item devtools-icon {\n  color: var(--icon-file-styles);\n}\n\n.navigator-image-tree-item devtools-icon,\n.navigator-font-tree-item devtools-icon {\n  color: var(--icon-file-image);\n}\n\n.navigator-nw-folder-tree-item.is-from-source-map devtools-icon {\n  color: var(--icon-folder-authored);\n}\n\n.navigator-automatic-fs-tree-item {\n  & > devtools-button,\n  & > devtools-spinner {\n    margin-left: var(--sys-size-4);\n  }\n}\n\n.navigator-fs-tree-item:not(.has-mapped-files),\n.navigator-fs-tree-item:not(.has-mapped-files) + ol li {\n  & > :not(.selection) {\n    color: var(--sys-color-on-surface-subtle);\n    opacity: 40%;\n\n    & devtools-icon {\n      color: var(--sys-color-on-surface-subtle);\n    }\n  }\n}\n\n.tree-outline:not(:has(.navigator-deployed-tree-item)) .navigator-sm-folder-tree-item .tree-element-title,\n.tree-outline:not(:has(.navigator-deployed-tree-item)) .navigator-sm-script-tree-item .tree-element-title,\n.tree-outline:not(:has(.navigator-deployed-tree-item)) .navigator-sm-stylesheet-tree-item .tree-element-title {\n  font-style: italic;\n}\n\n@media (forced-colors: active) {\n  .tree-outline li .leading-icons devtools-icon {\n    color: ButtonText;\n  }\n\n  .tree-outline li:hover:not(.selected) .selection,\n  .tree-outline li:hover:not(:has(devtools-checkbox)) .selection {\n    forced-color-adjust: none;\n    background-color: Highlight;\n  }\n\n  .tree-outline:not(.hide-selection-when-blurred) li.parent:hover:not(.selected)::before {\n    background-color: HighlightText;\n  }\n\n  .tree-outline:not(.hide-selection-when-blurred) li:hover:not(.selected) devtools-icon,\n  .tree-outline li:not(.selected):hover .tree-element-title {\n    forced-color-adjust: none;\n    color: HighlightText;\n  }\n\n  .navigator-fs-tree-item:not(.has-mapped-files, .selected) > :not(.selection),\n  .navigator-fs-folder-tree-item:not(.has-mapped-files, .selected) > :not(.selection),\n  .is-ignore-listed {\n    filter: none;\n    opacity: 100%;\n  }\n}\n\n/*# sourceURL=${import.meta.resolve('./navigatorTree.css')} */`;", "// Copyright 2025 The Chromium Authors. All rights reserved.\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\n// IMPORTANT: this file is auto generated. Please do not edit this file.\n/* istanbul ignore file */\nexport default `/*\n * Copyright 2016 The Chromium Authors. All rights reserved.\n * Use of this source code is governed by a BSD-style license that can be\n * found in the LICENSE file.\n */\n\n.navigator-toolbar {\n  border-bottom: 1px solid var(--sys-color-divider);\n  padding-left: 8px;\n}\n\n/*# sourceURL=${import.meta.resolve('./navigatorView.css')} */`;", "// Copyright 2018 The Chromium Authors. All rights reserved.\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\n\nimport * as Common from '../../core/common/common.js';\nimport * as UI from '../../ui/legacy/legacy.js';\nimport * as Search from '../search/search.js';\n\nimport {SourcesSearchScope} from './SourcesSearchScope.js';\n\nexport class SearchSources {\n  readonly query: string;\n  constructor(query: string) {\n    this.query = query;\n  }\n}\n\nexport class SearchSourcesView extends Search.SearchView.SearchView {\n  constructor() {\n    super('sources', new Common.Throttler.Throttler(/* timeoutMs */ 200));\n  }\n\n  override createScope(): Search.SearchScope.SearchScope {\n    return new SourcesSearchScope();\n  }\n}\n\nexport class ActionDelegate implements UI.ActionRegistration.ActionDelegate {\n  handleAction(_context: UI.Context.Context, actionId: string): boolean {\n    switch (actionId) {\n      case 'sources.search': {\n        const selection = UI.InspectorView.InspectorView.instance().element.window().getSelection();\n        const query = selection ? selection.toString().replace(/\\r?\\n.*/, '') : '';\n        void Common.Revealer.reveal(new SearchSources(query));\n        return true;\n      }\n    }\n    return false;\n  }\n}\n\nexport class Revealer implements Common.Revealer.Revealer<SearchSources> {\n  async reveal({query}: SearchSources, omitFocus?: boolean|undefined): Promise<void> {\n    const viewManager = UI.ViewManager.ViewManager.instance();\n    await viewManager.showView('sources.search-sources-tab', true, omitFocus);\n    const searchSourcesView = viewManager.materializedWidget('sources.search-sources-tab');\n    if (searchSourcesView instanceof SearchSourcesView) {\n      searchSourcesView.toggle(query);\n    }\n  }\n}\n", "/*\n * Copyright (C) 2011 Google Inc. All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are\n * met:\n *\n *     * Redistributions of source code must retain the above copyright\n * notice, this list of conditions and the following disclaimer.\n *     * Redistributions in binary form must reproduce the above\n * copyright notice, this list of conditions and the following disclaimer\n * in the documentation and/or other materials provided with the\n * distribution.\n *     * Neither the name of Google Inc. nor the names of its\n * contributors may be used to endorse or promote products derived from\n * this software without specific prior written permission.\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS\n * \"AS IS\" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT\n * LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR\n * A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT\n * OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,\n * SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT\n * LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,\n * DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY\n * THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE\n * OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */\n\nimport * as Common from '../../core/common/common.js';\nimport * as Platform from '../../core/platform/platform.js';\nimport * as Bindings from '../../models/bindings/bindings.js';\nimport * as Persistence from '../../models/persistence/persistence.js';\nimport * as TextUtils from '../../models/text_utils/text_utils.js';\nimport * as Workspace from '../../models/workspace/workspace.js';\nimport type * as Search from '../search/search.js';\n\nexport class SourcesSearchScope implements Search.SearchScope.SearchScope {\n  private searchId: number;\n  private searchResultCandidates: Workspace.UISourceCode.UISourceCode[];\n  private searchResultCallback: ((arg0: Search.SearchScope.SearchResult) => void)|null;\n  private searchFinishedCallback: ((arg0: boolean) => void)|null;\n  private searchConfig: Workspace.SearchConfig.SearchConfig|null;\n  constructor() {\n    // FIXME: Add title once it is used by search controller.\n    this.searchId = 0;\n    this.searchResultCandidates = [];\n    this.searchResultCallback = null;\n    this.searchFinishedCallback = null;\n    this.searchConfig = null;\n  }\n\n  private static filesComparator(\n      uiSourceCode1: Workspace.UISourceCode.UISourceCode, uiSourceCode2: Workspace.UISourceCode.UISourceCode): number {\n    if (uiSourceCode1.isDirty() && !uiSourceCode2.isDirty()) {\n      return -1;\n    }\n    if (!uiSourceCode1.isDirty() && uiSourceCode2.isDirty()) {\n      return 1;\n    }\n    const isFileSystem1 = uiSourceCode1.project().type() === Workspace.Workspace.projectTypes.FileSystem &&\n        !Persistence.Persistence.PersistenceImpl.instance().binding(uiSourceCode1);\n    const isFileSystem2 = uiSourceCode2.project().type() === Workspace.Workspace.projectTypes.FileSystem &&\n        !Persistence.Persistence.PersistenceImpl.instance().binding(uiSourceCode2);\n    if (isFileSystem1 !== isFileSystem2) {\n      return isFileSystem1 ? 1 : -1;\n    }\n    const url1 = uiSourceCode1.url();\n    const url2 = uiSourceCode2.url();\n    if (url1 && !url2) {\n      return -1;\n    }\n    if (!url1 && url2) {\n      return 1;\n    }\n    return Platform.StringUtilities.naturalOrderComparator(\n        uiSourceCode1.fullDisplayName(), uiSourceCode2.fullDisplayName());\n  }\n\n  private static urlComparator(\n      uiSourceCode1: Workspace.UISourceCode.UISourceCode, uiSourceCode2: Workspace.UISourceCode.UISourceCode): number {\n    return Platform.StringUtilities.naturalOrderComparator(uiSourceCode1.url(), uiSourceCode2.url());\n  }\n\n  performIndexing(progress: Common.Progress.Progress): void {\n    this.stopSearch();\n\n    const projects = this.projects();\n    const compositeProgress = new Common.Progress.CompositeProgress(progress);\n    for (let i = 0; i < projects.length; ++i) {\n      const project = projects[i];\n      const projectProgress = compositeProgress.createSubProgress([...project.uiSourceCodes()].length);\n      project.indexContent(projectProgress);\n    }\n  }\n\n  private projects(): Workspace.Workspace.Project[] {\n    const searchInAnonymousAndContentScripts =\n        Common.Settings.Settings.instance().moduleSetting('search-in-anonymous-and-content-scripts').get();\n\n    return Workspace.Workspace.WorkspaceImpl.instance().projects().filter(project => {\n      if (project.type() === Workspace.Workspace.projectTypes.Service) {\n        return false;\n      }\n      if (!searchInAnonymousAndContentScripts && project.isServiceProject() &&\n          project.type() !== Workspace.Workspace.projectTypes.Formatter) {\n        return false;\n      }\n      if (!searchInAnonymousAndContentScripts && project.type() === Workspace.Workspace.projectTypes.ContentScripts) {\n        return false;\n      }\n      return true;\n    });\n  }\n\n  performSearch(\n      searchConfig: Workspace.SearchConfig.SearchConfig, progress: Common.Progress.Progress,\n      searchResultCallback: (arg0: Search.SearchScope.SearchResult) => void,\n      searchFinishedCallback: (arg0: boolean) => void): void {\n    this.stopSearch();\n    this.searchResultCandidates = [];\n    this.searchResultCallback = searchResultCallback;\n    this.searchFinishedCallback = searchFinishedCallback;\n    this.searchConfig = searchConfig;\n\n    const promises = [];\n    const compositeProgress = new Common.Progress.CompositeProgress(progress);\n    const searchContentProgress = compositeProgress.createSubProgress();\n    const findMatchingFilesProgress = new Common.Progress.CompositeProgress(compositeProgress.createSubProgress());\n    for (const project of this.projects()) {\n      const weight = [...project.uiSourceCodes()].length;\n      const findMatchingFilesInProjectProgress = findMatchingFilesProgress.createSubProgress(weight);\n      const filesMatchingFileQuery = this.projectFilesMatchingFileQuery(project, searchConfig);\n      const promise =\n          project\n              .findFilesMatchingSearchRequest(searchConfig, filesMatchingFileQuery, findMatchingFilesInProjectProgress)\n              .then(this.processMatchingFilesForProject.bind(\n                  this, this.searchId, project, searchConfig, filesMatchingFileQuery));\n      promises.push(promise);\n    }\n\n    void Promise.all(promises).then(this.processMatchingFiles.bind(\n        this, this.searchId, searchContentProgress, this.searchFinishedCallback.bind(this, true)));\n  }\n\n  private projectFilesMatchingFileQuery(\n      project: Workspace.Workspace.Project, searchConfig: Workspace.SearchConfig.SearchConfig,\n      dirtyOnly?: boolean): Workspace.UISourceCode.UISourceCode[] {\n    const result = [];\n    for (const uiSourceCode of project.uiSourceCodes()) {\n      if (!uiSourceCode.contentType().isTextType()) {\n        continue;\n      }\n      if (Workspace.IgnoreListManager.IgnoreListManager.instance().isUserOrSourceMapIgnoreListedUISourceCode(\n              uiSourceCode)) {\n        continue;\n      }\n      const binding = Persistence.Persistence.PersistenceImpl.instance().binding(uiSourceCode);\n      if (binding && binding.network === uiSourceCode) {\n        continue;\n      }\n      if (dirtyOnly && !uiSourceCode.isDirty()) {\n        continue;\n      }\n      if (searchConfig.filePathMatchesFileQuery(\n              uiSourceCode.fullDisplayName() as Platform.DevToolsPath.UrlString |\n              Platform.DevToolsPath.EncodedPathString)) {\n        result.push(uiSourceCode);\n      }\n    }\n    result.sort(SourcesSearchScope.urlComparator);\n    return result;\n  }\n\n  private processMatchingFilesForProject(\n      searchId: number, project: Workspace.Workspace.Project, searchConfig: Workspace.SearchConfig.SearchConfig,\n      filesMatchingFileQuery: Workspace.UISourceCode.UISourceCode[],\n      filesWithPreliminaryResult:\n          Map<Workspace.UISourceCode.UISourceCode, TextUtils.ContentProvider.SearchMatch[]|null>): void {\n    if (searchId !== this.searchId && this.searchFinishedCallback) {\n      this.searchFinishedCallback(false);\n      return;\n    }\n\n    let files = [...filesWithPreliminaryResult.keys()];\n    files.sort(SourcesSearchScope.urlComparator);\n    files = Platform.ArrayUtilities.intersectOrdered(files, filesMatchingFileQuery, SourcesSearchScope.urlComparator);\n    const dirtyFiles = this.projectFilesMatchingFileQuery(project, searchConfig, true);\n    files = Platform.ArrayUtilities.mergeOrdered(files, dirtyFiles, SourcesSearchScope.urlComparator);\n\n    const uiSourceCodes = [];\n    for (const uiSourceCode of files) {\n      const script = Bindings.DefaultScriptMapping.DefaultScriptMapping.scriptForUISourceCode(uiSourceCode);\n      if (script && !script.isAnonymousScript()) {\n        continue;\n      }\n      uiSourceCodes.push(uiSourceCode);\n    }\n    uiSourceCodes.sort(SourcesSearchScope.filesComparator);\n    this.searchResultCandidates = Platform.ArrayUtilities.mergeOrdered(\n        this.searchResultCandidates, uiSourceCodes, SourcesSearchScope.filesComparator);\n  }\n\n  private processMatchingFiles(searchId: number, progress: Common.Progress.Progress, callback: () => void): void {\n    if (searchId !== this.searchId && this.searchFinishedCallback) {\n      this.searchFinishedCallback(false);\n      return;\n    }\n\n    const files = this.searchResultCandidates;\n    if (!files.length) {\n      progress.done();\n      callback();\n      return;\n    }\n\n    progress.setTotalWork(files.length);\n\n    let fileIndex = 0;\n    const maxFileContentRequests = 20;\n    let callbacksLeft = 0;\n\n    for (let i = 0; i < maxFileContentRequests && i < files.length; ++i) {\n      scheduleSearchInNextFileOrFinish.call(this);\n    }\n\n    function searchInNextFile(this: SourcesSearchScope, uiSourceCode: Workspace.UISourceCode.UISourceCode): void {\n      if (uiSourceCode.isDirty()) {\n        contentLoaded.call(this, uiSourceCode, new TextUtils.Text.Text(uiSourceCode.workingCopy()));\n      } else {\n        void uiSourceCode.requestContentData().then(contentData => {\n          contentLoaded.call(\n              this, uiSourceCode, TextUtils.ContentData.ContentData.contentDataOrEmpty(contentData).textObj);\n        });\n      }\n    }\n\n    function scheduleSearchInNextFileOrFinish(this: SourcesSearchScope): void {\n      if (fileIndex >= files.length) {\n        if (!callbacksLeft) {\n          progress.done();\n          callback();\n          return;\n        }\n        return;\n      }\n\n      ++callbacksLeft;\n      const uiSourceCode = files[fileIndex++];\n      window.setTimeout(searchInNextFile.bind(this, uiSourceCode), 0);\n    }\n\n    function contentLoaded(\n        this: SourcesSearchScope, uiSourceCode: Workspace.UISourceCode.UISourceCode,\n        content: TextUtils.Text.Text): void {\n      progress.incrementWorked(1);\n      let matches: TextUtils.ContentProvider.SearchMatch[] = [];\n      const searchConfig = (this.searchConfig as Workspace.SearchConfig.SearchConfig);\n      const queries = searchConfig.queries();\n      if (content !== null) {\n        for (let i = 0; i < queries.length; ++i) {\n          const nextMatches = TextUtils.TextUtils.performSearchInContent(\n              content, queries[i], !searchConfig.ignoreCase(), searchConfig.isRegex());\n          matches = Platform.ArrayUtilities.mergeOrdered(\n              matches, nextMatches, TextUtils.ContentProvider.SearchMatch.comparator);\n        }\n        if (!searchConfig.queries().length) {\n          matches = [new TextUtils.ContentProvider.SearchMatch(0, content.lineAt(0), 0, 0)];\n        }\n      }\n      if (matches && this.searchResultCallback) {\n        const searchResult = new FileBasedSearchResult(uiSourceCode, matches);\n        this.searchResultCallback(searchResult);\n      }\n\n      --callbacksLeft;\n      scheduleSearchInNextFileOrFinish.call(this);\n    }\n  }\n\n  stopSearch(): void {\n    ++this.searchId;\n  }\n}\n\nexport class FileBasedSearchResult implements Search.SearchScope.SearchResult {\n  private readonly uiSourceCode: Workspace.UISourceCode.UISourceCode;\n  private readonly searchMatches: TextUtils.ContentProvider.SearchMatch[];\n  constructor(\n      uiSourceCode: Workspace.UISourceCode.UISourceCode, searchMatches: TextUtils.ContentProvider.SearchMatch[]) {\n    this.uiSourceCode = uiSourceCode;\n    this.searchMatches = searchMatches;\n  }\n\n  label(): string {\n    return this.uiSourceCode.displayName();\n  }\n\n  description(): string {\n    return this.uiSourceCode.fullDisplayName();\n  }\n\n  matchesCount(): number {\n    return this.searchMatches.length;\n  }\n\n  matchLineContent(index: number): string {\n    return this.searchMatches[index].lineContent;\n  }\n\n  matchRevealable(index: number): Object {\n    const {lineNumber, columnNumber, matchLength} = this.searchMatches[index];\n    const range = new TextUtils.TextRange.TextRange(lineNumber, columnNumber, lineNumber, columnNumber + matchLength);\n    return new Workspace.UISourceCode.UILocationRange(this.uiSourceCode, range);\n  }\n\n  matchLabel(index: number): string {\n    return String(this.searchMatches[index].lineNumber + 1);\n  }\n\n  matchColumn(index: number): number {\n    return this.searchMatches[index].columnNumber;\n  }\n\n  matchLength(index: number): number {\n    return this.searchMatches[index].matchLength;\n  }\n}\n", "// Copyright 2025 The Chromium Authors. All rights reserved.\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\n// IMPORTANT: this file is auto generated. Please do not edit this file.\n/* istanbul ignore file */\nexport default `/*\n * Copyright (C) 2006, 2007, 2008 Apple Inc.  All rights reserved.\n * Copyright (C) 2009 Anthony Ricaud <rik@webkit.org>\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions\n * are met:\n *\n * 1.  Redistributions of source code must retain the above copyright\n *     notice, this list of conditions and the following disclaimer.\n * 2.  Redistributions in binary form must reproduce the above copyright\n *     notice, this list of conditions and the following disclaimer in the\n *     documentation and/or other materials provided with the distribution.\n * 3.  Neither the name of Apple Computer, Inc. (\"Apple\") nor the names of\n *     its contributors may be used to endorse or promote products derived\n *     from this software without specific prior written permission.\n *\n * THIS SOFTWARE IS PROVIDED BY APPLE AND ITS CONTRIBUTORS \"AS IS\" AND ANY\n * EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL APPLE OR ITS CONTRIBUTORS BE LIABLE FOR ANY\n * DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF\n * THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */\n\n.paused-message {\n  align-self: center;\n  width: fit-content;\n}\n\n.scripts-debug-toolbar {\n  position: absolute;\n  top: 0;\n  width: 100%;\n  background-color: var(--app-color-toolbar-background);\n  border-bottom: 1px solid var(--sys-color-divider);\n  overflow: hidden;\n  z-index: 1;\n}\n\n.scripts-debug-toolbar-drawer {\n  flex: 0 0 52px;\n  transition: margin-top 0.1s ease-in-out;\n  margin-top: -26px;\n  padding-top: 25px;\n  background-color: var(--sys-color-cdt-base-container);\n  overflow: hidden;\n  white-space: nowrap;\n}\n\n.scripts-debug-toolbar-drawer.expanded {\n  margin-top: 0;\n}\n\n.scripts-debug-toolbar-drawer > devtools-checkbox {\n  display: none;\n  padding-left: 3px;\n  height: 28px;\n}\n\n.scripts-debug-toolbar-drawer.expanded > devtools-checkbox {\n  display: flex;\n}\n\n.y-overflow-only {\n  overflow: hidden auto;\n  background-color: var(--sys-color-cdt-base-container);\n}\n\n.cursor-auto {\n  cursor: auto;\n}\n\n.navigator-tabbed-pane {\n  background-color: var(--sys-color-cdt-base-container);\n}\n\n/*# sourceURL=${import.meta.resolve('./sourcesPanel.css')} */`;", "// Copyright 2014 The Chromium Authors. All rights reserved.\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\n/* eslint-disable rulesdir/no-imperative-dom-api */\n\nimport '../../ui/legacy/legacy.js';\n\nimport * as Common from '../../core/common/common.js';\nimport * as Host from '../../core/host/host.js';\nimport * as i18n from '../../core/i18n/i18n.js';\nimport * as Platform from '../../core/platform/platform.js';\nimport * as SDK from '../../core/sdk/sdk.js';\nimport * as Bindings from '../../models/bindings/bindings.js';\nimport * as Persistence from '../../models/persistence/persistence.js';\nimport * as Workspace from '../../models/workspace/workspace.js';\nimport * as IconButton from '../../ui/components/icon_button/icon_button.js';\nimport * as QuickOpen from '../../ui/legacy/components/quick_open/quick_open.js';\nimport * as SourceFrame from '../../ui/legacy/components/source_frame/source_frame.js';\nimport * as UI from '../../ui/legacy/legacy.js';\nimport * as VisualLogging from '../../ui/visual_logging/visual_logging.js';\n\nimport * as Components from './components/components.js';\nimport {EditingLocationHistoryManager} from './EditingLocationHistoryManager.js';\nimport sourcesViewStyles from './sourcesView.css.js';\nimport {\n  type EditorSelectedEvent,\n  Events as TabbedEditorContainerEvents,\n  TabbedEditorContainer,\n  type TabbedEditorContainerDelegate,\n} from './TabbedEditorContainer.js';\nimport {Events as UISourceCodeFrameEvents, UISourceCodeFrame} from './UISourceCodeFrame.js';\n\nconst UIStrings = {\n  /**\n   * @description Text to open a file\n   */\n  openFile: 'Open file',\n  /**\n   * @description Text to run commands\n   */\n  runCommand: 'Run command',\n  /**\n   * @description Text in Sources View of the Sources panel. This sentence follows by a list of actions.\n   */\n  workspaceDropInAFolderToSyncSources: 'To sync edits to the workspace, drop a folder with your sources here or',\n  /**\n   * @description Text in Sources View of the Sources panel.\n   */\n  selectFolder: 'Select folder',\n  /**\n   * @description Accessible label for Sources placeholder view actions list\n   */\n  sourceViewActions: 'Source View Actions',\n\n} as const;\nconst str_ = i18n.i18n.registerUIStrings('panels/sources/SourcesView.ts', UIStrings);\nconst i18nString = i18n.i18n.getLocalizedString.bind(undefined, str_);\n\nexport class SourcesView extends Common.ObjectWrapper.eventMixin<EventTypes, typeof UI.Widget.VBox>(UI.Widget.VBox)\n    implements TabbedEditorContainerDelegate, UI.SearchableView.Searchable, UI.SearchableView.Replaceable {\n  private readonly searchableViewInternal: UI.SearchableView.SearchableView;\n  private readonly sourceViewByUISourceCode: Map<Workspace.UISourceCode.UISourceCode, UI.Widget.Widget>;\n  editorContainer: TabbedEditorContainer;\n  private readonly historyManager: EditingLocationHistoryManager;\n  readonly #scriptViewToolbar: UI.Toolbar.Toolbar;\n  private readonly bottomToolbarInternal: UI.Toolbar.Toolbar;\n  private toolbarChangedListener: Common.EventTarget.EventDescriptor|null;\n  private readonly focusedPlaceholderElement?: HTMLElement;\n  private searchView?: UISourceCodeFrame;\n  private searchConfig?: UI.SearchableView.SearchConfig;\n\n  constructor() {\n    super({jslog: `${VisualLogging.pane('editor').track({keydown: 'Escape'})}`});\n    this.registerRequiredCSS(sourcesViewStyles);\n\n    this.element.id = 'sources-panel-sources-view';\n    this.setMinimumAndPreferredSizes(88, 52, 150, 100);\n\n    const workspace = Workspace.Workspace.WorkspaceImpl.instance();\n\n    this.searchableViewInternal = new UI.SearchableView.SearchableView(this, this, 'sources-view-search-config');\n    this.searchableViewInternal.setMinimalSearchQuerySize(0);\n    this.searchableViewInternal.show(this.element);\n\n    this.sourceViewByUISourceCode = new Map();\n\n    this.editorContainer = new TabbedEditorContainer(\n        this, Common.Settings.Settings.instance().createLocalSetting('previously-viewed-files', []),\n        this.placeholderElement(), this.focusedPlaceholderElement);\n    this.editorContainer.show(this.searchableViewInternal.element);\n    this.editorContainer.addEventListener(TabbedEditorContainerEvents.EDITOR_SELECTED, this.editorSelected, this);\n    this.editorContainer.addEventListener(TabbedEditorContainerEvents.EDITOR_CLOSED, this.editorClosed, this);\n\n    this.historyManager = new EditingLocationHistoryManager(this);\n\n    const toolbarContainerElementInternal = this.element.createChild('div', 'sources-toolbar');\n    toolbarContainerElementInternal.setAttribute('jslog', `${VisualLogging.toolbar('bottom')}`);\n    this.#scriptViewToolbar = toolbarContainerElementInternal.createChild('devtools-toolbar');\n    this.#scriptViewToolbar.style.flex = 'auto';\n    this.bottomToolbarInternal = toolbarContainerElementInternal.createChild('devtools-toolbar');\n\n    this.toolbarChangedListener = null;\n\n    UI.UIUtils.startBatchUpdate();\n    workspace.uiSourceCodes().forEach(this.addUISourceCode.bind(this));\n    UI.UIUtils.endBatchUpdate();\n\n    workspace.addEventListener(Workspace.Workspace.Events.UISourceCodeAdded, this.uiSourceCodeAdded, this);\n    workspace.addEventListener(Workspace.Workspace.Events.UISourceCodeRemoved, this.uiSourceCodeRemoved, this);\n    workspace.addEventListener(Workspace.Workspace.Events.ProjectRemoved, this.projectRemoved.bind(this), this);\n    SDK.TargetManager.TargetManager.instance().addScopeChangeListener(this.#onScopeChange.bind(this));\n\n    function handleBeforeUnload(event: Event): void {\n      if (event.returnValue) {\n        return;\n      }\n\n      const unsavedSourceCodes: Workspace.UISourceCode.UISourceCode[] = [];\n      const projects =\n          Workspace.Workspace.WorkspaceImpl.instance().projectsForType(Workspace.Workspace.projectTypes.FileSystem);\n      for (const project of projects) {\n        for (const uiSourceCode of project.uiSourceCodes()) {\n          if (uiSourceCode.isDirty()) {\n            unsavedSourceCodes.push(uiSourceCode);\n          }\n        }\n      }\n\n      if (!unsavedSourceCodes.length) {\n        return;\n      }\n\n      event.returnValue = true;\n      void UI.ViewManager.ViewManager.instance().showView('sources');\n      for (const sourceCode of unsavedSourceCodes) {\n        void Common.Revealer.reveal(sourceCode);\n      }\n    }\n\n    if (!window.opener) {\n      window.addEventListener('beforeunload', handleBeforeUnload, true);\n    }\n  }\n\n  private placeholderElement(): Element {\n    const placeholder = document.createElement('div');\n    placeholder.classList.add('sources-placeholder');\n\n    const workspaceElement = placeholder.createChild('div', 'tabbed-pane-placeholder-row');\n    workspaceElement.classList.add('workspace');\n\n    const icon = IconButton.Icon.create('sync', 'sync-icon');\n    workspaceElement.createChild('span', 'icon-container').appendChild(icon);\n    const text = workspaceElement.createChild('span');\n    text.textContent = UIStrings.workspaceDropInAFolderToSyncSources;\n    const browseButton = text.createChild('button');\n    browseButton.textContent = i18nString(UIStrings.selectFolder);\n    browseButton.addEventListener('click', this.addFileSystemClicked.bind(this));\n\n    const shortcuts = [\n      {actionId: 'quick-open.show', description: i18nString(UIStrings.openFile)},\n      {actionId: 'quick-open.show-command-menu', description: i18nString(UIStrings.runCommand)},\n    ];\n\n    const list = placeholder.createChild('div', 'shortcuts-list');\n    list.classList.add('tabbed-pane-placeholder-row');\n    UI.ARIAUtils.markAsList(list);\n    UI.ARIAUtils.setLabel(list, i18nString(UIStrings.sourceViewActions));\n\n    for (const shortcut of shortcuts) {\n      const shortcutKeys = UI.ShortcutRegistry.ShortcutRegistry.instance().shortcutsForAction(shortcut.actionId);\n      const listItemElement = list.createChild('div');\n      listItemElement.classList.add('shortcut-line');\n\n      UI.ARIAUtils.markAsListitem(listItemElement);\n\n      // Take the first shortcut for display.\n      if (shortcutKeys?.[0]) {\n        const button = listItemElement.createChild('button');\n        button.textContent = shortcut.description;\n        const action = UI.ActionRegistry.ActionRegistry.instance().getAction(shortcut.actionId);\n        button.addEventListener('click', () => action.execute());\n\n        const shortcutElement = listItemElement.createChild('span', 'shortcuts');\n        const separator = Host.Platform.isMac() ? '\\u2004' : ' + ';\n        const keys = shortcutKeys[0].descriptors.flatMap(descriptor => descriptor.name.split(separator));\n        keys.forEach(key => {\n          shortcutElement.createChild('span', 'keybinds-key').createChild('span').textContent = key;\n        });\n      }\n    }\n\n    return placeholder;\n  }\n\n  private async addFileSystemClicked(): Promise<void> {\n    const result = await Persistence.IsolatedFileSystemManager.IsolatedFileSystemManager.instance().addFileSystem();\n    if (!result) {\n      return;\n    }\n    Host.userMetrics.actionTaken(Host.UserMetrics.Action.WorkspaceSelectFolder);\n    void UI.ViewManager.ViewManager.instance().showView('navigator-files');\n  }\n\n  static defaultUISourceCodeScores(): Map<Workspace.UISourceCode.UISourceCode, number> {\n    const defaultScores = new Map<Workspace.UISourceCode.UISourceCode, number>();\n    const sourcesView = UI.Context.Context.instance().flavor(SourcesView);\n    if (sourcesView) {\n      const uiSourceCodes = sourcesView.editorContainer.historyUISourceCodes();\n      for (let i = 1; i < uiSourceCodes.length; ++i)  // Skip current element\n      {\n        defaultScores.set(uiSourceCodes[i], uiSourceCodes.length - i);\n      }\n    }\n    return defaultScores;\n  }\n\n  leftToolbar(): UI.Toolbar.Toolbar {\n    return this.editorContainer.leftToolbar();\n  }\n\n  rightToolbar(): UI.Toolbar.Toolbar {\n    return this.editorContainer.rightToolbar();\n  }\n\n  bottomToolbar(): UI.Toolbar.Toolbar {\n    return this.bottomToolbarInternal;\n  }\n\n  scriptViewToolbar(): UI.Toolbar.Toolbar {\n    return this.#scriptViewToolbar;\n  }\n\n  override wasShown(): void {\n    super.wasShown();\n    UI.Context.Context.instance().setFlavor(SourcesView, this);\n  }\n\n  override willHide(): void {\n    UI.Context.Context.instance().setFlavor(SourcesView, null);\n    super.willHide();\n  }\n\n  searchableView(): UI.SearchableView.SearchableView {\n    return this.searchableViewInternal;\n  }\n\n  visibleView(): UI.Widget.Widget|null {\n    return this.editorContainer.visibleView;\n  }\n\n  currentSourceFrame(): UISourceCodeFrame|null {\n    const view = this.visibleView();\n    if (!(view instanceof UISourceCodeFrame)) {\n      return null;\n    }\n    return (view);\n  }\n\n  currentUISourceCode(): Workspace.UISourceCode.UISourceCode|null {\n    return this.editorContainer.currentFile();\n  }\n\n  onCloseEditorTab(): boolean {\n    const uiSourceCode = this.editorContainer.currentFile();\n    if (!uiSourceCode) {\n      return false;\n    }\n    this.editorContainer.closeFile(uiSourceCode);\n    return true;\n  }\n\n  onJumpToPreviousLocation(): void {\n    this.historyManager.rollback();\n  }\n\n  onJumpToNextLocation(): void {\n    this.historyManager.rollover();\n  }\n\n  #onScopeChange(): void {\n    const workspace = Workspace.Workspace.WorkspaceImpl.instance();\n    for (const uiSourceCode of workspace.uiSourceCodes()) {\n      if (uiSourceCode.project().type() !== Workspace.Workspace.projectTypes.Network) {\n        continue;\n      }\n      const target = Bindings.NetworkProject.NetworkProject.targetForUISourceCode(uiSourceCode);\n      if (SDK.TargetManager.TargetManager.instance().isInScope(target)) {\n        this.addUISourceCode(uiSourceCode);\n      } else {\n        this.removeUISourceCodes([uiSourceCode]);\n      }\n    }\n  }\n\n  private uiSourceCodeAdded(event: Common.EventTarget.EventTargetEvent<Workspace.UISourceCode.UISourceCode>): void {\n    const uiSourceCode = event.data;\n    this.addUISourceCode(uiSourceCode);\n  }\n\n  private addUISourceCode(uiSourceCode: Workspace.UISourceCode.UISourceCode): void {\n    const project = uiSourceCode.project();\n    if (project.isServiceProject()) {\n      return;\n    }\n    switch (project.type()) {\n      case Workspace.Workspace.projectTypes.FileSystem: {\n        if (Persistence.FileSystemWorkspaceBinding.FileSystemWorkspaceBinding.fileSystemType(project) === 'overrides') {\n          return;\n        }\n        break;\n      }\n      case Workspace.Workspace.projectTypes.Network: {\n        const target = Bindings.NetworkProject.NetworkProject.targetForUISourceCode(uiSourceCode);\n        if (!SDK.TargetManager.TargetManager.instance().isInScope(target)) {\n          return;\n        }\n      }\n    }\n    this.editorContainer.addUISourceCode(uiSourceCode);\n  }\n\n  private uiSourceCodeRemoved(event: Common.EventTarget.EventTargetEvent<Workspace.UISourceCode.UISourceCode>): void {\n    const uiSourceCode = event.data;\n    this.removeUISourceCodes([uiSourceCode]);\n  }\n\n  private removeUISourceCodes(uiSourceCodes: Workspace.UISourceCode.UISourceCode[]): void {\n    this.editorContainer.removeUISourceCodes(uiSourceCodes);\n    for (let i = 0; i < uiSourceCodes.length; ++i) {\n      this.removeSourceFrame(uiSourceCodes[i]);\n      this.historyManager.removeHistoryForSourceCode(uiSourceCodes[i]);\n    }\n  }\n\n  private projectRemoved(event: Common.EventTarget.EventTargetEvent<Workspace.Workspace.Project>): void {\n    const project = event.data;\n    const uiSourceCodes = project.uiSourceCodes();\n    this.removeUISourceCodes([...uiSourceCodes]);\n  }\n\n  private updateScriptViewToolbarItems(): void {\n    const view = this.visibleView();\n    if (view instanceof UI.View.SimpleView) {\n      void view.toolbarItems().then(items => {\n        this.#scriptViewToolbar.removeToolbarItems();\n        for (const action of getRegisteredEditorActions()) {\n          this.#scriptViewToolbar.appendToolbarItem(action.getOrCreateButton(this));\n        }\n        items.map(item => this.#scriptViewToolbar.appendToolbarItem(item));\n      });\n    }\n  }\n\n  showSourceLocation(\n      uiSourceCode: Workspace.UISourceCode.UISourceCode, location?: SourceFrame.SourceFrame.RevealPosition,\n      omitFocus?: boolean, omitHighlight?: boolean): void {\n    const currentFrame = this.currentSourceFrame();\n    if (currentFrame) {\n      this.historyManager.updateCurrentState(\n          currentFrame.uiSourceCode(), currentFrame.textEditor.state.selection.main.head);\n    }\n    this.editorContainer.showFile(uiSourceCode);\n    const currentSourceFrame = this.currentSourceFrame();\n    if (currentSourceFrame && location) {\n      currentSourceFrame.revealPosition(location, !omitHighlight);\n    }\n    const visibleView = this.visibleView();\n    if (!omitFocus && visibleView) {\n      visibleView.focus();\n    }\n  }\n\n  private createSourceView(uiSourceCode: Workspace.UISourceCode.UISourceCode): UI.Widget.Widget {\n    let sourceView;\n    const contentType = uiSourceCode.contentType();\n\n    if (contentType === Common.ResourceType.resourceTypes.Image || uiSourceCode.mimeType().startsWith('image/')) {\n      sourceView = new SourceFrame.ImageView.ImageView(uiSourceCode.mimeType(), uiSourceCode);\n    } else if (contentType === Common.ResourceType.resourceTypes.Font || uiSourceCode.mimeType().includes('font')) {\n      sourceView = new SourceFrame.FontView.FontView(uiSourceCode.mimeType(), uiSourceCode);\n    } else if (uiSourceCode.name() === HEADER_OVERRIDES_FILENAME) {\n      sourceView = new Components.HeadersView.HeadersView(uiSourceCode);\n    } else {\n      sourceView = new UISourceCodeFrame(uiSourceCode);\n      this.historyManager.trackSourceFrameCursorJumps(sourceView);\n    }\n\n    uiSourceCode.addEventListener(Workspace.UISourceCode.Events.TitleChanged, this.#uiSourceCodeTitleChanged, this);\n\n    this.sourceViewByUISourceCode.set(uiSourceCode, sourceView);\n    return sourceView;\n  }\n\n  #sourceViewTypeForWidget(widget: UI.Widget.Widget): SourceViewType {\n    if (widget instanceof SourceFrame.ImageView.ImageView) {\n      return SourceViewType.IMAGE_VIEW;\n    }\n    if (widget instanceof SourceFrame.FontView.FontView) {\n      return SourceViewType.FONT_VIEW;\n    }\n    if (widget instanceof Components.HeadersView.HeadersView) {\n      return SourceViewType.HEADERS_VIEW;\n    }\n    return SourceViewType.SOURCE_VIEW;\n  }\n\n  #sourceViewTypeForUISourceCode(uiSourceCode: Workspace.UISourceCode.UISourceCode): SourceViewType {\n    if (uiSourceCode.name() === HEADER_OVERRIDES_FILENAME) {\n      return SourceViewType.HEADERS_VIEW;\n    }\n    const contentType = uiSourceCode.contentType();\n    switch (contentType) {\n      case Common.ResourceType.resourceTypes.Image:\n        return SourceViewType.IMAGE_VIEW;\n      case Common.ResourceType.resourceTypes.Font:\n        return SourceViewType.FONT_VIEW;\n      default:\n        return SourceViewType.SOURCE_VIEW;\n    }\n  }\n\n  #uiSourceCodeTitleChanged(event: Common.EventTarget.EventTargetEvent<Workspace.UISourceCode.UISourceCode>): void {\n    const uiSourceCode = event.data;\n    const widget = this.sourceViewByUISourceCode.get(uiSourceCode);\n    if (widget) {\n      if (this.#sourceViewTypeForWidget(widget) !== this.#sourceViewTypeForUISourceCode(uiSourceCode)) {\n        // Remove the existing editor tab and create a new one of the correct type.\n        this.removeUISourceCodes([uiSourceCode]);\n        this.showSourceLocation(uiSourceCode);\n      }\n    }\n  }\n\n  getSourceView(uiSourceCode: Workspace.UISourceCode.UISourceCode): UI.Widget.Widget|undefined {\n    return this.sourceViewByUISourceCode.get(uiSourceCode);\n  }\n\n  private getOrCreateSourceView(uiSourceCode: Workspace.UISourceCode.UISourceCode): UI.Widget.Widget {\n    return this.sourceViewByUISourceCode.get(uiSourceCode) || this.createSourceView(uiSourceCode);\n  }\n\n  recycleUISourceCodeFrame(sourceFrame: UISourceCodeFrame, uiSourceCode: Workspace.UISourceCode.UISourceCode): void {\n    sourceFrame.uiSourceCode().removeEventListener(\n        Workspace.UISourceCode.Events.TitleChanged, this.#uiSourceCodeTitleChanged, this);\n    this.sourceViewByUISourceCode.delete(sourceFrame.uiSourceCode());\n    sourceFrame.setUISourceCode(uiSourceCode);\n    this.sourceViewByUISourceCode.set(uiSourceCode, sourceFrame);\n    uiSourceCode.addEventListener(Workspace.UISourceCode.Events.TitleChanged, this.#uiSourceCodeTitleChanged, this);\n  }\n\n  viewForFile(uiSourceCode: Workspace.UISourceCode.UISourceCode): UI.Widget.Widget {\n    return this.getOrCreateSourceView(uiSourceCode);\n  }\n\n  private removeSourceFrame(uiSourceCode: Workspace.UISourceCode.UISourceCode): void {\n    const sourceView = this.sourceViewByUISourceCode.get(uiSourceCode);\n    this.sourceViewByUISourceCode.delete(uiSourceCode);\n    if (sourceView && sourceView instanceof UISourceCodeFrame) {\n      (sourceView).dispose();\n    }\n    uiSourceCode.removeEventListener(Workspace.UISourceCode.Events.TitleChanged, this.#uiSourceCodeTitleChanged, this);\n  }\n\n  private editorClosed(event: Common.EventTarget.EventTargetEvent<Workspace.UISourceCode.UISourceCode>): void {\n    const uiSourceCode = event.data;\n    this.historyManager.removeHistoryForSourceCode(uiSourceCode);\n\n    let wasSelected = false;\n    if (!this.editorContainer.currentFile()) {\n      wasSelected = true;\n    }\n\n    // SourcesNavigator does not need to update on EditorClosed.\n    this.removeToolbarChangedListener();\n    this.updateScriptViewToolbarItems();\n    this.searchableViewInternal.resetSearch();\n\n    const data = {\n      uiSourceCode,\n      wasSelected,\n    };\n    this.dispatchEventToListeners(Events.EDITOR_CLOSED, data);\n  }\n\n  private editorSelected(event: Common.EventTarget.EventTargetEvent<EditorSelectedEvent>): void {\n    const previousSourceFrame = event.data.previousView instanceof UISourceCodeFrame ? event.data.previousView : null;\n    if (previousSourceFrame) {\n      previousSourceFrame.setSearchableView(null);\n    }\n    const currentSourceFrame = event.data.currentView instanceof UISourceCodeFrame ? event.data.currentView : null;\n    if (currentSourceFrame) {\n      currentSourceFrame.setSearchableView(this.searchableViewInternal);\n    }\n\n    this.searchableViewInternal.setReplaceable(Boolean(currentSourceFrame?.canEditSource()));\n    this.searchableViewInternal.refreshSearch();\n    this.updateToolbarChangedListener();\n    this.updateScriptViewToolbarItems();\n\n    const currentFile = this.editorContainer.currentFile();\n    if (currentFile) {\n      this.dispatchEventToListeners(Events.EDITOR_SELECTED, currentFile);\n    }\n  }\n\n  private removeToolbarChangedListener(): void {\n    if (this.toolbarChangedListener) {\n      Common.EventTarget.removeEventListeners([this.toolbarChangedListener]);\n    }\n    this.toolbarChangedListener = null;\n  }\n\n  private updateToolbarChangedListener(): void {\n    this.removeToolbarChangedListener();\n    const sourceFrame = this.currentSourceFrame();\n    if (!sourceFrame) {\n      return;\n    }\n    this.toolbarChangedListener = sourceFrame.addEventListener(\n        UISourceCodeFrameEvents.TOOLBAR_ITEMS_CHANGED, this.updateScriptViewToolbarItems, this);\n  }\n\n  onSearchCanceled(): void {\n    if (this.searchView) {\n      this.searchView.onSearchCanceled();\n    }\n\n    delete this.searchView;\n    delete this.searchConfig;\n  }\n\n  performSearch(searchConfig: UI.SearchableView.SearchConfig, shouldJump: boolean, jumpBackwards?: boolean): void {\n    const sourceFrame = this.currentSourceFrame();\n    if (!sourceFrame) {\n      return;\n    }\n\n    this.searchView = sourceFrame;\n    this.searchConfig = searchConfig;\n\n    this.searchView.performSearch(this.searchConfig, shouldJump, jumpBackwards);\n  }\n\n  jumpToNextSearchResult(): void {\n    if (!this.searchView) {\n      return;\n    }\n\n    if (this.searchConfig && this.searchView !== this.currentSourceFrame()) {\n      this.performSearch(this.searchConfig, true);\n      return;\n    }\n\n    this.searchView.jumpToNextSearchResult();\n  }\n\n  jumpToPreviousSearchResult(): void {\n    if (!this.searchView) {\n      return;\n    }\n\n    if (this.searchConfig && this.searchView !== this.currentSourceFrame()) {\n      this.performSearch(this.searchConfig, true);\n      if (this.searchView) {\n        this.searchView.jumpToLastSearchResult();\n      }\n      return;\n    }\n\n    this.searchView.jumpToPreviousSearchResult();\n  }\n\n  supportsCaseSensitiveSearch(): boolean {\n    return true;\n  }\n\n  supportsRegexSearch(): boolean {\n    return true;\n  }\n\n  replaceSelectionWith(searchConfig: UI.SearchableView.SearchConfig, replacement: string): void {\n    const sourceFrame = this.currentSourceFrame();\n    if (!sourceFrame) {\n      console.assert(Boolean(sourceFrame));\n      return;\n    }\n    sourceFrame.replaceSelectionWith(searchConfig, replacement);\n  }\n\n  replaceAllWith(searchConfig: UI.SearchableView.SearchConfig, replacement: string): void {\n    const sourceFrame = this.currentSourceFrame();\n    if (!sourceFrame) {\n      console.assert(Boolean(sourceFrame));\n      return;\n    }\n    sourceFrame.replaceAllWith(searchConfig, replacement);\n  }\n\n  showOutlineQuickOpen(): void {\n    QuickOpen.QuickOpen.QuickOpenImpl.show('@');\n  }\n\n  showGoToLineQuickOpen(): void {\n    if (this.editorContainer.currentFile()) {\n      QuickOpen.QuickOpen.QuickOpenImpl.show(':');\n    }\n  }\n\n  save(): void {\n    this.saveSourceFrame(this.currentSourceFrame());\n  }\n\n  saveAll(): void {\n    const sourceFrames = this.editorContainer.fileViews();\n    sourceFrames.forEach(this.saveSourceFrame.bind(this));\n  }\n\n  private saveSourceFrame(sourceFrame: UI.Widget.Widget|null): void {\n    if (!(sourceFrame instanceof UISourceCodeFrame)) {\n      return;\n    }\n    const uiSourceCodeFrame = sourceFrame;\n    uiSourceCodeFrame.commitEditing();\n  }\n\n  toggleBreakpointsActiveState(active: boolean): void {\n    this.editorContainer.view.element.classList.toggle('breakpoints-deactivated', !active);\n  }\n}\n\nexport const enum Events {\n  EDITOR_CLOSED = 'EditorClosed',\n  EDITOR_SELECTED = 'EditorSelected',\n}\n\nexport interface EditorClosedEvent {\n  uiSourceCode: Workspace.UISourceCode.UISourceCode;\n  wasSelected: boolean;\n}\n\nexport interface EventTypes {\n  [Events.EDITOR_CLOSED]: EditorClosedEvent;\n  [Events.EDITOR_SELECTED]: Workspace.UISourceCode.UISourceCode;\n}\n\nexport interface EditorAction {\n  getOrCreateButton(sourcesView: SourcesView): UI.Toolbar.ToolbarButton;\n}\n\nconst registeredEditorActions: Array<() => EditorAction> = [];\n\nexport function registerEditorAction(editorAction: () => EditorAction): void {\n  registeredEditorActions.push(editorAction);\n}\n\nexport function getRegisteredEditorActions(): EditorAction[] {\n  return registeredEditorActions.map(editorAction => editorAction());\n}\n\nexport class SwitchFileActionDelegate implements UI.ActionRegistration.ActionDelegate {\n  private static nextFile(currentUISourceCode: Workspace.UISourceCode.UISourceCode): Workspace.UISourceCode.UISourceCode\n      |null {\n    function fileNamePrefix(name: string): string {\n      const lastDotIndex = name.lastIndexOf('.');\n      const namePrefix = name.substr(0, lastDotIndex !== -1 ? lastDotIndex : name.length);\n      return namePrefix.toLowerCase();\n    }\n\n    const candidates = [];\n    const url = currentUISourceCode.parentURL();\n    const name = currentUISourceCode.name();\n    const namePrefix = fileNamePrefix(name);\n    for (const uiSourceCode of currentUISourceCode.project().uiSourceCodes()) {\n      if (url !== uiSourceCode.parentURL()) {\n        continue;\n      }\n      if (fileNamePrefix(uiSourceCode.name()) === namePrefix) {\n        candidates.push(uiSourceCode.name());\n      }\n    }\n    candidates.sort(Platform.StringUtilities.naturalOrderComparator);\n    const index = Platform.NumberUtilities.mod(candidates.indexOf(name) + 1, candidates.length);\n    const fullURL = Common.ParsedURL.ParsedURL.concatenate(\n        (url ? Common.ParsedURL.ParsedURL.concatenate(url, '/') : '' as Platform.DevToolsPath.UrlString),\n        candidates[index]);\n    const nextUISourceCode = currentUISourceCode.project().uiSourceCodeForURL(fullURL);\n    return nextUISourceCode !== currentUISourceCode ? nextUISourceCode : null;\n  }\n\n  handleAction(context: UI.Context.Context, _actionId: string): boolean {\n    const sourcesView = context.flavor(SourcesView);\n    if (!sourcesView) {\n      return false;\n    }\n    const currentUISourceCode = sourcesView.currentUISourceCode();\n    if (!currentUISourceCode) {\n      return false;\n    }\n    const nextUISourceCode = SwitchFileActionDelegate.nextFile(currentUISourceCode);\n    if (!nextUISourceCode) {\n      return false;\n    }\n    sourcesView.showSourceLocation(nextUISourceCode);\n    return true;\n  }\n}\n\nexport class ActionDelegate implements UI.ActionRegistration.ActionDelegate {\n  handleAction(context: UI.Context.Context, actionId: string): boolean {\n    const sourcesView = context.flavor(SourcesView);\n    if (!sourcesView) {\n      return false;\n    }\n\n    switch (actionId) {\n      case 'sources.close-all':\n        sourcesView.editorContainer.closeAllFiles();\n        return true;\n      case 'sources.jump-to-previous-location':\n        sourcesView.onJumpToPreviousLocation();\n        return true;\n      case 'sources.jump-to-next-location':\n        sourcesView.onJumpToNextLocation();\n        return true;\n      case 'sources.next-editor-tab':\n        sourcesView.editorContainer.selectNextTab();\n        return true;\n      case 'sources.previous-editor-tab':\n        sourcesView.editorContainer.selectPrevTab();\n        return true;\n      case 'sources.close-editor-tab':\n        return sourcesView.onCloseEditorTab();\n      case 'sources.go-to-line':\n        sourcesView.showGoToLineQuickOpen();\n        return true;\n      case 'sources.go-to-member':\n        sourcesView.showOutlineQuickOpen();\n        return true;\n      case 'sources.save':\n        sourcesView.save();\n        return true;\n      case 'sources.save-all':\n        sourcesView.saveAll();\n        return true;\n    }\n\n    return false;\n  }\n}\n\nconst HEADER_OVERRIDES_FILENAME = '.headers';\n\nconst enum SourceViewType {\n  IMAGE_VIEW = 'ImageView',\n  FONT_VIEW = 'FontView',\n  HEADERS_VIEW = 'HeadersView',\n  SOURCE_VIEW = 'SourceView',\n}\n", "/*\n * Copyright (C) 2014 Google Inc. All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are\n * met:\n *\n *     * Redistributions of source code must retain the above copyright\n * notice, this list of conditions and the following disclaimer.\n *     * Redistributions in binary form must reproduce the above\n * copyright notice, this list of conditions and the following disclaimer\n * in the documentation and/or other materials provided with the\n * distribution.\n *     * Neither the name of Google Inc. nor the names of its\n * contributors may be used to endorse or promote products derived from\n * this software without specific prior written permission.\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS\n * \"AS IS\" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT\n * LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR\n * A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT\n * OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,\n * SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT\n * LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,\n * DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY\n * THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE\n * OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */\n\nimport type * as Platform from '../../core/platform/platform.js';\nimport * as Workspace from '../../models/workspace/workspace.js';\nimport type * as CodeMirror from '../../third_party/codemirror.next/codemirror.next.js';\nimport * as SourceFrame from '../../ui/legacy/components/source_frame/source_frame.js';\n\nimport type {SourcesView} from './SourcesView.js';\nimport type {UISourceCodeFrame} from './UISourceCodeFrame.js';\n\nexport const HistoryDepth = 20;\n\nexport class EditingLocationHistoryManager {\n  private readonly entries: EditingLocationHistoryEntry[] = [];\n  private current = -1;\n  private revealing = false;\n\n  constructor(private readonly sourcesView: SourcesView) {\n  }\n\n  trackSourceFrameCursorJumps(sourceFrame: UISourceCodeFrame): void {\n    sourceFrame.addEventListener(\n        SourceFrame.SourceFrame.Events.EDITOR_UPDATE, event => this.onEditorUpdate(event.data, sourceFrame));\n  }\n\n  private onEditorUpdate(update: CodeMirror.ViewUpdate, sourceFrame: UISourceCodeFrame): void {\n    if (update.docChanged) {\n      this.mapEntriesFor(sourceFrame.uiSourceCode(), update.changes);\n    }\n    const prevPos = update.startState.selection.main;\n    const newPos = update.state.selection.main;\n    const isJump = !this.revealing && prevPos.anchor !== newPos.anchor && update.transactions.some(tr => {\n      return Boolean(\n          tr.isUserEvent('select.pointer') || tr.isUserEvent('select.reveal') || tr.isUserEvent('select.search'));\n    });\n    if (isJump) {\n      this.updateCurrentState(sourceFrame.uiSourceCode(), prevPos.head);\n      if (this.entries.length > this.current + 1) {\n        this.entries.length = this.current + 1;\n      }\n      this.entries.push(new EditingLocationHistoryEntry(sourceFrame.uiSourceCode(), newPos.head));\n      this.current++;\n      if (this.entries.length > HistoryDepth) {\n        this.entries.shift();\n        this.current--;\n      }\n    }\n  }\n\n  updateCurrentState(uiSourceCode: Workspace.UISourceCode.UISourceCode, position: number): void {\n    if (!this.revealing) {\n      const top = this.current >= 0 ? this.entries[this.current] : null;\n      if (top?.matches(uiSourceCode)) {\n        top.position = position;\n      }\n    }\n  }\n\n  private mapEntriesFor(uiSourceCode: Workspace.UISourceCode.UISourceCode, change: CodeMirror.ChangeDesc): void {\n    for (const entry of this.entries) {\n      if (entry.matches(uiSourceCode)) {\n        entry.position = change.mapPos(entry.position);\n      }\n    }\n  }\n\n  private reveal(entry: EditingLocationHistoryEntry): void {\n    const uiSourceCode = Workspace.Workspace.WorkspaceImpl.instance().uiSourceCode(entry.projectId, entry.url);\n    if (uiSourceCode) {\n      this.revealing = true;\n      this.sourcesView.showSourceLocation(uiSourceCode, entry.position, false, true);\n      this.revealing = false;\n    }\n  }\n\n  rollback(): void {\n    if (this.current > 0) {\n      this.current--;\n      this.reveal(this.entries[this.current]);\n    }\n  }\n\n  rollover(): void {\n    if (this.current < this.entries.length - 1) {\n      this.current++;\n      this.reveal(this.entries[this.current]);\n    }\n  }\n\n  removeHistoryForSourceCode(uiSourceCode: Workspace.UISourceCode.UISourceCode): void {\n    for (let i = this.entries.length - 1; i >= 0; i--) {\n      if (this.entries[i].matches(uiSourceCode)) {\n        this.entries.splice(i, 1);\n        if (this.current >= i) {\n          this.current--;\n        }\n      }\n    }\n  }\n}\n\nclass EditingLocationHistoryEntry {\n  readonly projectId: string;\n  readonly url: Platform.DevToolsPath.UrlString;\n  position: number;\n\n  constructor(uiSourceCode: Workspace.UISourceCode.UISourceCode, position: number) {\n    this.projectId = uiSourceCode.project().id();\n    this.url = uiSourceCode.url();\n    this.position = position;\n  }\n\n  matches(uiSourceCode: Workspace.UISourceCode.UISourceCode): boolean {\n    return this.url === uiSourceCode.url() && this.projectId === uiSourceCode.project().id();\n  }\n}\n", "// Copyright 2025 The Chromium Authors. All rights reserved.\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\n// IMPORTANT: this file is auto generated. Please do not edit this file.\n/* istanbul ignore file */\nexport default `/*\n * Copyright (C) 2013 Google Inc. All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are\n * met:\n *\n *     * Redistributions of source code must retain the above copyright\n * notice, this list of conditions and the following disclaimer.\n *     * Redistributions in binary form must reproduce the above\n * copyright notice, this list of conditions and the following disclaimer\n * in the documentation and/or other materials provided with the\n * distribution.\n *     * Neither the name of Google Inc. nor the names of its\n * contributors may be used to endorse or promote products derived from\n * this software without specific prior written permission.\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS\n * \"AS IS\" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT\n * LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR\n * A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT\n * OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,\n * SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT\n * LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,\n * DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY\n * THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE\n * OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */\n\n#sources-panel-sources-view {\n  --override-highlight-animation-10pc-background-color: rgb(158 54 153);\n  --override-highlight-animation-10pc-foreground-color: rgb(255 255 255);\n\n  flex: auto;\n  position: relative;\n}\n\n#sources-panel-sources-view .sources-toolbar {\n  display: flex;\n  flex: 0 0 27px;\n  background-color: var(--sys-color-cdt-base-container);\n  border-top: 1px solid var(--sys-color-divider);\n  overflow: hidden;\n  z-index: 0;\n}\n\n.source-frame-debugger-script {\n  --override-debugger-background-tint: rgb(255 255 194 / 50%);\n\n  background-color: var(--override-debugger-background-tint);\n}\n\n.theme-with-dark-background .source-frame-debugger-script {\n  --override-debugger-background-tint: rgb(61 61 0 / 50%);\n}\n\n/*# sourceURL=${import.meta.resolve('./sourcesView.css')} */`;", "/*\n * Copyright (C) 2011 Google Inc. All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are\n * met:\n *\n *     * Redistributions of source code must retain the above copyright\n * notice, this list of conditions and the following disclaimer.\n *     * Redistributions in binary form must reproduce the above\n * copyright notice, this list of conditions and the following disclaimer\n * in the documentation and/or other materials provided with the\n * distribution.\n *     * Neither the name of Google Inc. nor the names of its\n * contributors may be used to endorse or promote products derived from\n * this software without specific prior written permission.\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS\n * \"AS IS\" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT\n * LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR\n * A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT\n * OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,\n * SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT\n * LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,\n * DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY\n * THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE\n * OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */\n/* eslint-disable rulesdir/no-imperative-dom-api */\n\nimport * as Common from '../../core/common/common.js';\nimport * as i18n from '../../core/i18n/i18n.js';\nimport * as Platform from '../../core/platform/platform.js';\nimport * as Extensions from '../../models/extensions/extensions.js';\nimport * as Persistence from '../../models/persistence/persistence.js';\nimport * as TextUtils from '../../models/text_utils/text_utils.js';\nimport * as Workspace from '../../models/workspace/workspace.js';\nimport type * as CodeMirror from '../../third_party/codemirror.next/codemirror.next.js';\nimport * as IconButton from '../../ui/components/icon_button/icon_button.js';\nimport * as Tooltips from '../../ui/components/tooltips/tooltips.js';\nimport * as SourceFrame from '../../ui/legacy/components/source_frame/source_frame.js';\nimport * as UI from '../../ui/legacy/legacy.js';\nimport * as VisualLogging from '../../ui/visual_logging/visual_logging.js';\nimport * as Snippets from '../snippets/snippets.js';\n\nimport {SourcesView} from './SourcesView.js';\nimport {UISourceCodeFrame} from './UISourceCodeFrame.js';\n\nconst UIStrings = {\n  /**\n   * @description Text in Tabbed Editor Container of the Sources panel\n   * @example {example.file} PH1\n   */\n  areYouSureYouWantToCloseUnsaved: 'Are you sure you want to close unsaved file: {PH1}?',\n  /**\n   * @description Error message for tooltip showing that a file in Sources could not be loaded\n   */\n  unableToLoadThisContent: 'Unable to load this content.',\n  /**\n   * @description Tooltip shown for the warning icon on an editor tab in the Sources panel\n   *              when the developer saved changes via Ctrl+S/Cmd+S, while there was an\n   *              automatic workspace detected, but not connected.\n   * @example {FolderName} PH1\n   */\n  changesWereNotSavedToFileSystemToSaveAddFolderToWorkspace:\n      'Changes weren\\'t saved to file system. To save, add {PH1} to your Workspace.',\n  /**\n   * @description Tooltip shown for the warning icon on an editor tab in the Sources panel\n   *              when the developer saved changes via Ctrl+S/Cmd+S, but didn't have a Workspace\n   *              set up, or the Workspace didn't have a match for this file, and therefore the\n   *              changes couldn't be persisted.\n   * @example {Workspace} PH1\n   */\n  changesWereNotSavedToFileSystemToSaveSetUpYourWorkspace:\n      'Changes weren\\'t saved to file system. To save, set up your {PH1}.',\n} as const;\nconst str_ = i18n.i18n.registerUIStrings('panels/sources/TabbedEditorContainer.ts', UIStrings);\nconst i18nString = i18n.i18n.getLocalizedString.bind(undefined, str_);\nexport interface TabbedEditorContainerDelegate {\n  viewForFile(uiSourceCode: Workspace.UISourceCode.UISourceCode): UI.Widget.Widget;\n\n  recycleUISourceCodeFrame(sourceFrame: UISourceCodeFrame, uiSourceCode: Workspace.UISourceCode.UISourceCode): void;\n}\n\nlet tabId = 0;\n\nexport class TabbedEditorContainer extends Common.ObjectWrapper.ObjectWrapper<EventTypes> {\n  private readonly delegate: TabbedEditorContainerDelegate;\n  private readonly tabbedPane: UI.TabbedPane.TabbedPane;\n  private tabIds: Map<Workspace.UISourceCode.UISourceCode, string>;\n  private readonly files: Map<string, Workspace.UISourceCode.UISourceCode>;\n  private readonly previouslyViewedFilesSetting: Common.Settings.Setting<SerializedHistoryItem[]>;\n  private readonly history: History;\n  private readonly uriToUISourceCode: Map<Platform.DevToolsPath.UrlString, Workspace.UISourceCode.UISourceCode>;\n  private readonly idToUISourceCode: Map<string, Workspace.UISourceCode.UISourceCode>;\n  private currentFileInternal!: Workspace.UISourceCode.UISourceCode|null;\n  private currentView!: UI.Widget.Widget|null;\n  private scrollTimer?: number;\n  private reentrantShow: boolean;\n  constructor(\n      delegate: TabbedEditorContainerDelegate, setting: Common.Settings.Setting<SerializedHistoryItem[]>,\n      placeholderElement: Element, focusedPlaceholderElement?: Element) {\n    super();\n    this.delegate = delegate;\n\n    this.tabbedPane = new UI.TabbedPane.TabbedPane();\n    this.tabbedPane.setPlaceholderElement(placeholderElement, focusedPlaceholderElement);\n    this.tabbedPane.setTabDelegate(new EditorContainerTabDelegate(this));\n\n    this.tabbedPane.setCloseableTabs(true);\n    this.tabbedPane.setAllowTabReorder(true, true);\n\n    this.tabbedPane.addEventListener(UI.TabbedPane.Events.TabClosed, this.tabClosed, this);\n    this.tabbedPane.addEventListener(UI.TabbedPane.Events.TabSelected, this.tabSelected, this);\n\n    this.tabbedPane.headerElement().setAttribute(\n        'jslog',\n        `${VisualLogging.toolbar('top').track({keydown: 'ArrowUp|ArrowLeft|ArrowDown|ArrowRight|Enter|Space'})}`);\n\n    Persistence.Persistence.PersistenceImpl.instance().addEventListener(\n        Persistence.Persistence.Events.BindingCreated, this.onBindingCreated, this);\n    Persistence.Persistence.PersistenceImpl.instance().addEventListener(\n        Persistence.Persistence.Events.BindingRemoved, this.onBindingRemoved, this);\n    Persistence.NetworkPersistenceManager.NetworkPersistenceManager.instance().addEventListener(\n        Persistence.NetworkPersistenceManager.Events.REQUEST_FOR_HEADER_OVERRIDES_FILE_CHANGED,\n        this.#onRequestsForHeaderOverridesFileChanged, this);\n\n    this.tabIds = new Map();\n    this.files = new Map();\n\n    this.previouslyViewedFilesSetting = setting;\n    this.history = History.fromObject(this.previouslyViewedFilesSetting.get());\n    this.uriToUISourceCode = new Map();\n    this.idToUISourceCode = new Map();\n    this.reentrantShow = false;\n  }\n\n  private onBindingCreated(event: Common.EventTarget.EventTargetEvent<Persistence.Persistence.PersistenceBinding>):\n      void {\n    const binding = event.data;\n    this.updateFileTitle(binding.fileSystem);\n\n    const networkTabId = this.tabIds.get(binding.network);\n    let fileSystemTabId = this.tabIds.get(binding.fileSystem);\n\n    const wasSelectedInNetwork = this.currentFileInternal === binding.network;\n    const networkKey = historyItemKey(binding.network);\n    const currentSelectionRange = this.history.selectionRange(networkKey);\n    const currentScrollLineNumber = this.history.scrollLineNumber(networkKey);\n    this.history.remove(networkKey);\n\n    if (!networkTabId) {\n      return;\n    }\n\n    if (!fileSystemTabId) {\n      const networkView = this.tabbedPane.tabView(networkTabId);\n      const tabIndex = this.tabbedPane.tabIndex(networkTabId);\n      if (networkView instanceof UISourceCodeFrame) {\n        this.delegate.recycleUISourceCodeFrame(networkView, binding.fileSystem);\n        fileSystemTabId = this.appendFileTab(binding.fileSystem, false, tabIndex, networkView);\n      } else {\n        fileSystemTabId = this.appendFileTab(binding.fileSystem, false, tabIndex);\n        const fileSystemTabView = (this.tabbedPane.tabView(fileSystemTabId) as UI.Widget.Widget);\n        this.restoreEditorProperties(fileSystemTabView, currentSelectionRange, currentScrollLineNumber);\n      }\n    }\n\n    this.closeTabs([networkTabId], true);\n    if (wasSelectedInNetwork) {\n      this.tabbedPane.selectTab(fileSystemTabId, false);\n    }\n\n    this.updateHistory();\n  }\n\n  #onRequestsForHeaderOverridesFileChanged(\n      event: Common.EventTarget.EventTargetEvent<Workspace.UISourceCode.UISourceCode>): void {\n    this.updateFileTitle(event.data);\n  }\n\n  private onBindingRemoved(event: Common.EventTarget.EventTargetEvent<Persistence.Persistence.PersistenceBinding>):\n      void {\n    const binding = event.data;\n    this.updateFileTitle(binding.fileSystem);\n  }\n\n  get view(): UI.Widget.Widget {\n    return this.tabbedPane;\n  }\n\n  get visibleView(): UI.Widget.Widget|null {\n    return this.tabbedPane.visibleView;\n  }\n\n  fileViews(): UI.Widget.Widget[] {\n    return this.tabbedPane.tabViews();\n  }\n\n  leftToolbar(): UI.Toolbar.Toolbar {\n    return this.tabbedPane.leftToolbar();\n  }\n\n  rightToolbar(): UI.Toolbar.Toolbar {\n    return this.tabbedPane.rightToolbar();\n  }\n\n  show(parentElement: Element): void {\n    this.tabbedPane.show(parentElement);\n  }\n\n  showFile(uiSourceCode: Workspace.UISourceCode.UISourceCode): void {\n    const binding = Persistence.Persistence.PersistenceImpl.instance().binding(uiSourceCode);\n    uiSourceCode = binding ? binding.fileSystem : uiSourceCode;\n\n    const frame = UI.Context.Context.instance().flavor(SourcesView);\n    // If the content has already been set and the current frame is showing\n    // the incoming uiSourceCode, then fire the event that the file has been loaded.\n    // Otherwise, this event will fire as soon as the content has been set.\n    if (frame?.currentSourceFrame()?.contentSet && this.currentFileInternal === uiSourceCode &&\n        frame?.currentUISourceCode() === uiSourceCode) {\n      Common.EventTarget.fireEvent('source-file-loaded', uiSourceCode.displayName(true));\n    } else {\n      this.innerShowFile(uiSourceCode, true);\n    }\n  }\n\n  closeFile(uiSourceCode: Workspace.UISourceCode.UISourceCode): void {\n    const tabId = this.tabIds.get(uiSourceCode);\n    if (!tabId) {\n      return;\n    }\n    this.closeTabs([tabId]);\n  }\n\n  closeAllFiles(): void {\n    this.closeTabs(this.tabbedPane.tabIds());\n  }\n\n  historyUISourceCodes(): Workspace.UISourceCode.UISourceCode[] {\n    const result = [];\n    for (const {url, resourceType} of this.history.keys()) {\n      const uiSourceCode = this.uriToUISourceCode.get(url);\n      if (uiSourceCode !== undefined && uiSourceCode.contentType() === resourceType) {\n        result.push(uiSourceCode);\n      }\n    }\n    return result;\n  }\n\n  selectNextTab(): void {\n    this.tabbedPane.selectNextTab();\n  }\n\n  selectPrevTab(): void {\n    this.tabbedPane.selectPrevTab();\n  }\n\n  private addViewListeners(): void {\n    if (!this.currentView || !(this.currentView instanceof SourceFrame.SourceFrame.SourceFrameImpl)) {\n      return;\n    }\n    this.currentView.addEventListener(SourceFrame.SourceFrame.Events.EDITOR_UPDATE, this.onEditorUpdate, this);\n    this.currentView.addEventListener(SourceFrame.SourceFrame.Events.EDITOR_SCROLL, this.onScrollChanged, this);\n  }\n\n  private removeViewListeners(): void {\n    if (!this.currentView || !(this.currentView instanceof SourceFrame.SourceFrame.SourceFrameImpl)) {\n      return;\n    }\n    this.currentView.removeEventListener(SourceFrame.SourceFrame.Events.EDITOR_UPDATE, this.onEditorUpdate, this);\n    this.currentView.removeEventListener(SourceFrame.SourceFrame.Events.EDITOR_SCROLL, this.onScrollChanged, this);\n  }\n\n  private onScrollChanged(): void {\n    if (this.currentView instanceof SourceFrame.SourceFrame.SourceFrameImpl) {\n      if (this.scrollTimer) {\n        clearTimeout(this.scrollTimer);\n      }\n      this.scrollTimer = window.setTimeout(() => this.previouslyViewedFilesSetting.set(this.history.toObject()), 100);\n      if (this.currentFileInternal) {\n        const {editor} = this.currentView.textEditor;\n        const topBlock = editor.lineBlockAtHeight(editor.scrollDOM.getBoundingClientRect().top - editor.documentTop);\n        const topLine = editor.state.doc.lineAt(topBlock.from).number - 1;\n        this.history.updateScrollLineNumber(historyItemKey(this.currentFileInternal), topLine);\n      }\n    }\n  }\n\n  private onEditorUpdate({data: update}: Common.EventTarget.EventTargetEvent<CodeMirror.ViewUpdate>): void {\n    if (update.docChanged || update.selectionSet) {\n      const {main} = update.state.selection;\n      const lineFrom = update.state.doc.lineAt(main.from), lineTo = update.state.doc.lineAt(main.to);\n      const range = new TextUtils.TextRange.TextRange(\n          lineFrom.number - 1, main.from - lineFrom.from, lineTo.number - 1, main.to - lineTo.from);\n      if (this.currentFileInternal) {\n        this.history.updateSelectionRange(historyItemKey(this.currentFileInternal), range);\n      }\n      this.previouslyViewedFilesSetting.set(this.history.toObject());\n\n      if (this.currentFileInternal) {\n        Extensions.ExtensionServer.ExtensionServer.instance().sourceSelectionChanged(\n            this.currentFileInternal.url(), range);\n      }\n    }\n  }\n\n  private innerShowFile(uiSourceCode: Workspace.UISourceCode.UISourceCode, userGesture?: boolean): void {\n    if (this.reentrantShow) {\n      return;\n    }\n    const canonicalSourceCode = this.canonicalUISourceCode(uiSourceCode);\n    const binding = Persistence.Persistence.PersistenceImpl.instance().binding(uiSourceCode);\n    uiSourceCode = binding ? binding.fileSystem : uiSourceCode;\n    if (this.currentFileInternal === uiSourceCode) {\n      return;\n    }\n\n    this.removeViewListeners();\n    this.currentFileInternal = uiSourceCode;\n\n    try {\n      // Selecting the tab may cause showFile to be called again, but with the canonical source code,\n      // which is not what we want, so we prevent reentrant calls.\n      this.reentrantShow = true;\n      const tabId = this.tabIds.get(canonicalSourceCode) || this.appendFileTab(canonicalSourceCode, userGesture);\n\n      this.tabbedPane.selectTab(tabId, userGesture);\n    } finally {\n      this.reentrantShow = false;\n    }\n\n    if (userGesture) {\n      this.editorSelectedByUserAction();\n    }\n\n    const previousView = this.currentView;\n    this.currentView = this.visibleView;\n    this.addViewListeners();\n\n    if (this.currentView instanceof UISourceCodeFrame && this.currentView.uiSourceCode() !== uiSourceCode) {\n      // We are showing a different UISourceCode in the same tab (because it has the same URL). This\n      // commonly happens when switching between workers or iframes containing the same code, and while the\n      // contents are usually identical they may not be and it is important to show users when they aren't.\n      this.delegate.recycleUISourceCodeFrame(this.currentView, uiSourceCode);\n      if (uiSourceCode.project().type() !== Workspace.Workspace.projectTypes.FileSystem) {\n        // Disable editing, because it may confuse users that only one of the copies of this code changes.\n        uiSourceCode.disableEdit();\n      }\n    }\n\n    const eventData = {\n      currentFile: this.currentFileInternal,\n      currentView: this.currentView,\n      previousView,\n      userGesture,\n    };\n    this.dispatchEventToListeners(Events.EDITOR_SELECTED, eventData);\n  }\n\n  private titleForFile(uiSourceCode: Workspace.UISourceCode.UISourceCode): string {\n    const maxDisplayNameLength = 30;\n    let title = Platform.StringUtilities.trimMiddle(uiSourceCode.displayName(true), maxDisplayNameLength);\n    if (uiSourceCode.isDirty()) {\n      title += '*';\n    }\n    return title;\n  }\n\n  private maybeCloseTab(id: string, nextTabId: string|null): boolean {\n    const uiSourceCode = this.files.get(id);\n    if (!uiSourceCode) {\n      return false;\n    }\n    const shouldPrompt = uiSourceCode.isDirty() && uiSourceCode.project().canSetFileContent();\n    // FIXME: this should be replaced with common Save/Discard/Cancel dialog.\n    if (!shouldPrompt || confirm(i18nString(UIStrings.areYouSureYouWantToCloseUnsaved, {PH1: uiSourceCode.name()}))) {\n      uiSourceCode.resetWorkingCopy();\n      if (nextTabId) {\n        this.tabbedPane.selectTab(nextTabId, true);\n      }\n      this.tabbedPane.closeTab(id, true);\n      return true;\n    }\n    return false;\n  }\n\n  closeTabs(ids: string[], forceCloseDirtyTabs?: boolean): void {\n    const dirtyTabs = [];\n    const cleanTabs = [];\n    for (let i = 0; i < ids.length; ++i) {\n      const id = ids[i];\n      const uiSourceCode = this.files.get(id);\n      if (uiSourceCode) {\n        if (!forceCloseDirtyTabs && uiSourceCode.isDirty()) {\n          dirtyTabs.push(id);\n        } else {\n          cleanTabs.push(id);\n        }\n      }\n    }\n    if (dirtyTabs.length) {\n      this.tabbedPane.selectTab(dirtyTabs[0], true);\n    }\n    this.tabbedPane.closeTabs(cleanTabs, true);\n    for (let i = 0; i < dirtyTabs.length; ++i) {\n      const nextTabId = i + 1 < dirtyTabs.length ? dirtyTabs[i + 1] : null;\n      if (!this.maybeCloseTab(dirtyTabs[i], nextTabId)) {\n        break;\n      }\n    }\n  }\n\n  onContextMenu(tabId: string, contextMenu: UI.ContextMenu.ContextMenu): void {\n    const uiSourceCode = this.files.get(tabId);\n    if (uiSourceCode) {\n      contextMenu.appendApplicableItems(uiSourceCode);\n    }\n  }\n\n  private canonicalUISourceCode(uiSourceCode: Workspace.UISourceCode.UISourceCode):\n      Workspace.UISourceCode.UISourceCode {\n    // Check if we have already a UISourceCode for this url\n    const existingSourceCode = this.idToUISourceCode.get(uiSourceCode.canonicalScriptId());\n    if (existingSourceCode) {\n      // Ignore incoming uiSourceCode, we already have this file.\n      return existingSourceCode;\n    }\n    this.idToUISourceCode.set(uiSourceCode.canonicalScriptId(), uiSourceCode);\n    this.uriToUISourceCode.set(uiSourceCode.url(), uiSourceCode);\n    return uiSourceCode;\n  }\n\n  addUISourceCode(uiSourceCode: Workspace.UISourceCode.UISourceCode): void {\n    const canonicalSourceCode = this.canonicalUISourceCode(uiSourceCode);\n    const duplicated = canonicalSourceCode !== uiSourceCode;\n    const binding = Persistence.Persistence.PersistenceImpl.instance().binding(canonicalSourceCode);\n    uiSourceCode = binding ? binding.fileSystem : canonicalSourceCode;\n\n    if (duplicated && uiSourceCode.project().type() !== Workspace.Workspace.projectTypes.FileSystem) {\n      uiSourceCode.disableEdit();\n    }\n\n    if (this.currentFileInternal?.canonicalScriptId() === uiSourceCode.canonicalScriptId()) {\n      return;\n    }\n\n    const index = this.history.index(historyItemKey(uiSourceCode));\n    if (index === -1) {\n      return;\n    }\n\n    if (!this.tabIds.has(uiSourceCode)) {\n      this.appendFileTab(uiSourceCode, false);\n    }\n\n    // Select tab if this file was the last to be shown.\n    if (!index) {\n      this.innerShowFile(uiSourceCode, false);\n      return;\n    }\n\n    if (!this.currentFileInternal) {\n      return;\n    }\n\n    const currentProjectIsSnippets = Snippets.ScriptSnippetFileSystem.isSnippetsUISourceCode(this.currentFileInternal);\n    const addedProjectIsSnippets = Snippets.ScriptSnippetFileSystem.isSnippetsUISourceCode(uiSourceCode);\n    if (this.history.index(historyItemKey(this.currentFileInternal)) && currentProjectIsSnippets &&\n        !addedProjectIsSnippets) {\n      this.innerShowFile(uiSourceCode, false);\n    }\n  }\n\n  removeUISourceCode(uiSourceCode: Workspace.UISourceCode.UISourceCode): void {\n    this.removeUISourceCodes([uiSourceCode]);\n  }\n\n  removeUISourceCodes(uiSourceCodes: Workspace.UISourceCode.UISourceCode[]): void {\n    const tabIds = [];\n    for (const uiSourceCode of uiSourceCodes) {\n      const tabId = this.tabIds.get(uiSourceCode);\n      if (tabId) {\n        tabIds.push(tabId);\n      }\n      if (this.uriToUISourceCode.get(uiSourceCode.url()) === uiSourceCode) {\n        this.uriToUISourceCode.delete(uiSourceCode.url());\n      }\n      if (this.idToUISourceCode.get(uiSourceCode.canonicalScriptId()) === uiSourceCode) {\n        this.idToUISourceCode.delete(uiSourceCode.canonicalScriptId());\n      }\n    }\n    this.tabbedPane.closeTabs(tabIds);\n  }\n\n  private editorClosedByUserAction(uiSourceCode: Workspace.UISourceCode.UISourceCode): void {\n    this.history.remove(historyItemKey(uiSourceCode));\n    this.updateHistory();\n  }\n\n  private editorSelectedByUserAction(): void {\n    this.updateHistory();\n  }\n\n  private updateHistory(): void {\n    const historyItemKeys = [];\n    for (const tabId of this.tabbedPane.lastOpenedTabIds(MAX_PREVIOUSLY_VIEWED_FILES_COUNT)) {\n      const uiSourceCode = this.files.get(tabId);\n      if (uiSourceCode !== undefined) {\n        historyItemKeys.push(historyItemKey(uiSourceCode));\n      }\n    }\n    this.history.update(historyItemKeys);\n    this.previouslyViewedFilesSetting.set(this.history.toObject());\n  }\n\n  private tooltipForFile(uiSourceCode: Workspace.UISourceCode.UISourceCode): string {\n    uiSourceCode = Persistence.Persistence.PersistenceImpl.instance().network(uiSourceCode) || uiSourceCode;\n    return uiSourceCode.url();\n  }\n\n  private appendFileTab(\n      uiSourceCode: Workspace.UISourceCode.UISourceCode, userGesture?: boolean, index?: number,\n      replaceView?: UI.Widget.Widget): string {\n    const view = replaceView || this.delegate.viewForFile(uiSourceCode);\n    const title = this.titleForFile(uiSourceCode);\n    const tooltip = this.tooltipForFile(uiSourceCode);\n\n    const tabId = this.generateTabId();\n    this.tabIds.set(uiSourceCode, tabId);\n    this.files.set(tabId, uiSourceCode);\n\n    if (!replaceView) {\n      const savedSelectionRange = this.history.selectionRange(historyItemKey(uiSourceCode));\n      const savedScrollLineNumber = this.history.scrollLineNumber(historyItemKey(uiSourceCode));\n      this.restoreEditorProperties(view, savedSelectionRange, savedScrollLineNumber);\n    }\n\n    this.tabbedPane.appendTab(tabId, title, view, tooltip, userGesture, undefined, undefined, index, 'editor');\n\n    this.updateFileTitle(uiSourceCode);\n    this.addUISourceCodeListeners(uiSourceCode);\n    if (uiSourceCode.loadError()) {\n      this.addLoadErrorIcon(tabId);\n    } else if (!uiSourceCode.contentLoaded()) {\n      void uiSourceCode.requestContentData().then(contentDataOrError => {\n        if (TextUtils.ContentData.ContentData.isError(contentDataOrError)) {\n          this.addLoadErrorIcon(tabId);\n        }\n      });\n    }\n    return tabId;\n  }\n\n  private addLoadErrorIcon(tabId: string): void {\n    const icon = new IconButton.Icon.Icon();\n    icon.data = {iconName: 'cross-circle-filled', color: 'var(--icon-error)', width: '14px', height: '14px'};\n    UI.Tooltip.Tooltip.install(icon, i18nString(UIStrings.unableToLoadThisContent));\n    if (this.tabbedPane.tabView(tabId)) {\n      this.tabbedPane.setTrailingTabIcon(tabId, icon);\n    }\n  }\n\n  private restoreEditorProperties(\n      editorView: UI.Widget.Widget, selection?: TextUtils.TextRange.TextRange, firstLineNumber?: number): void {\n    const sourceFrame = editorView instanceof SourceFrame.SourceFrame.SourceFrameImpl ? editorView : null;\n    if (!sourceFrame) {\n      return;\n    }\n    if (selection) {\n      sourceFrame.setSelection(selection);\n    }\n    if (typeof firstLineNumber === 'number') {\n      sourceFrame.scrollToLine(firstLineNumber);\n    }\n  }\n\n  private tabClosed(event: Common.EventTarget.EventTargetEvent<UI.TabbedPane.EventData>): void {\n    const {tabId, isUserGesture} = event.data;\n    const uiSourceCode = this.files.get(tabId);\n    if (this.currentFileInternal &&\n        this.currentFileInternal.canonicalScriptId() === uiSourceCode?.canonicalScriptId()) {\n      this.removeViewListeners();\n      this.currentView = null;\n      this.currentFileInternal = null;\n    }\n    if (uiSourceCode) {\n      this.tabIds.delete(uiSourceCode);\n    }\n    this.files.delete(tabId);\n\n    if (uiSourceCode) {\n      this.removeUISourceCodeListeners(uiSourceCode);\n\n      this.dispatchEventToListeners(Events.EDITOR_CLOSED, uiSourceCode);\n\n      if (isUserGesture) {\n        this.editorClosedByUserAction(uiSourceCode);\n      }\n    }\n  }\n\n  private tabSelected(event: Common.EventTarget.EventTargetEvent<UI.TabbedPane.EventData>): void {\n    const {tabId, isUserGesture} = event.data;\n\n    const uiSourceCode = this.files.get(tabId);\n    if (uiSourceCode) {\n      this.innerShowFile(uiSourceCode, isUserGesture);\n    }\n  }\n\n  private addUISourceCodeListeners(uiSourceCode: Workspace.UISourceCode.UISourceCode): void {\n    uiSourceCode.addEventListener(Workspace.UISourceCode.Events.TitleChanged, this.uiSourceCodeTitleChanged, this);\n    uiSourceCode.addEventListener(\n        Workspace.UISourceCode.Events.WorkingCopyChanged, this.uiSourceCodeWorkingCopyChanged, this);\n    uiSourceCode.addEventListener(\n        Workspace.UISourceCode.Events.WorkingCopyCommitted, this.uiSourceCodeWorkingCopyCommitted, this);\n  }\n\n  private removeUISourceCodeListeners(uiSourceCode: Workspace.UISourceCode.UISourceCode): void {\n    uiSourceCode.removeEventListener(Workspace.UISourceCode.Events.TitleChanged, this.uiSourceCodeTitleChanged, this);\n    uiSourceCode.removeEventListener(\n        Workspace.UISourceCode.Events.WorkingCopyChanged, this.uiSourceCodeWorkingCopyChanged, this);\n    uiSourceCode.removeEventListener(\n        Workspace.UISourceCode.Events.WorkingCopyCommitted, this.uiSourceCodeWorkingCopyCommitted, this);\n  }\n\n  private updateFileTitle(uiSourceCode: Workspace.UISourceCode.UISourceCode): void {\n    const tabId = this.tabIds.get(uiSourceCode);\n    if (tabId) {\n      const title = this.titleForFile(uiSourceCode);\n      const tooltip = this.tooltipForFile(uiSourceCode);\n      this.tabbedPane.changeTabTitle(tabId, title, tooltip);\n      if (uiSourceCode.loadError()) {\n        const icon = new IconButton.Icon.Icon();\n        icon.data = {iconName: 'cross-circle-filled', color: 'var(--icon-error)', width: '14px', height: '14px'};\n        UI.Tooltip.Tooltip.install(icon, i18nString(UIStrings.unableToLoadThisContent));\n        this.tabbedPane.setTrailingTabIcon(tabId, icon);\n      } else if (Persistence.Persistence.PersistenceImpl.instance().hasUnsavedCommittedChanges(uiSourceCode)) {\n        /* eslint-disable rulesdir/no-imperative-dom-api --\n         * This is a temporary solution using the <devtools-tooltip>\n         * and we will use a toast instead once available.\n         **/\n        const suffixElement = document.createElement('div');\n        const icon = new IconButton.Icon.Icon();\n        icon.data = {iconName: 'warning-filled', color: 'var(--icon-warning)', width: '14px', height: '14px'};\n        const id = `tab-tooltip-${nextTooltipId++}`;\n        icon.setAttribute('aria-describedby', id);\n        const tooltip = new Tooltips.Tooltip.Tooltip({id, anchor: icon, variant: 'rich'});\n        const automaticFileSystemManager = Persistence.AutomaticFileSystemManager.AutomaticFileSystemManager.instance();\n        const {automaticFileSystem} = automaticFileSystemManager;\n        if (automaticFileSystem?.state === 'disconnected') {\n          const link = document.createElement('a');\n          link.className = 'devtools-link';\n          link.textContent = Common.ParsedURL.ParsedURL.extractName(automaticFileSystem.root);\n          link.addEventListener('click', async event => {\n            event.consume();\n            await UI.ViewManager.ViewManager.instance().showView('navigator-files');\n            await automaticFileSystemManager.connectAutomaticFileSystem(/* addIfMissing= */ true);\n          });\n          tooltip.append(i18n.i18n.getFormatLocalizedString(\n              str_, UIStrings.changesWereNotSavedToFileSystemToSaveAddFolderToWorkspace, {PH1: link}));\n        } else {\n          const link = UI.XLink.XLink.create('https://developer.chrome.com/docs/devtools/workspaces/', 'Workspace');\n          tooltip.append(i18n.i18n.getFormatLocalizedString(\n              str_, UIStrings.changesWereNotSavedToFileSystemToSaveSetUpYourWorkspace, {PH1: link}));\n        }\n        suffixElement.append(icon, tooltip);\n        /* eslint-enable rulesdir/no-imperative-dom-api */\n        this.tabbedPane.setSuffixElement(tabId, suffixElement);\n      } else {\n        const icon = Persistence.PersistenceUtils.PersistenceUtils.iconForUISourceCode(uiSourceCode);\n        this.tabbedPane.setTrailingTabIcon(tabId, icon);\n      }\n    }\n  }\n\n  private uiSourceCodeTitleChanged(event: Common.EventTarget.EventTargetEvent<Workspace.UISourceCode.UISourceCode>):\n      void {\n    const uiSourceCode = event.data;\n    this.updateFileTitle(uiSourceCode);\n    this.updateHistory();\n\n    // Remove from map under old url if it has changed.\n    for (const [k, v] of this.uriToUISourceCode) {\n      if (v === uiSourceCode && k !== v.url()) {\n        this.uriToUISourceCode.delete(k);\n      }\n    }\n    // Remove from map under old id if it has changed.\n    for (const [k, v] of this.idToUISourceCode) {\n      if (v === uiSourceCode && k !== v.canonicalScriptId()) {\n        this.idToUISourceCode.delete(k);\n      }\n    }\n    // Ensure it is mapped under current url and id.\n    this.canonicalUISourceCode(uiSourceCode);\n  }\n\n  private uiSourceCodeWorkingCopyChanged(\n      event: Common.EventTarget.EventTargetEvent<Workspace.UISourceCode.UISourceCode>): void {\n    const uiSourceCode = event.data;\n    this.updateFileTitle(uiSourceCode);\n  }\n\n  private uiSourceCodeWorkingCopyCommitted(\n      event: Common.EventTarget.EventTargetEvent<Workspace.UISourceCode.WorkingCopyCommittedEvent>): void {\n    const uiSourceCode = event.data.uiSourceCode;\n    this.updateFileTitle(uiSourceCode);\n  }\n\n  private generateTabId(): Lowercase<string> {\n    return 'tab-' + (tabId++) as Lowercase<string>;\n  }\n\n  currentFile(): Workspace.UISourceCode.UISourceCode|null {\n    return this.currentFileInternal || null;\n  }\n}\n\nlet nextTooltipId = 1;\n\nexport const enum Events {\n  EDITOR_SELECTED = 'EditorSelected',\n  EDITOR_CLOSED = 'EditorClosed',\n}\n\nexport interface EditorSelectedEvent {\n  currentFile: Workspace.UISourceCode.UISourceCode;\n  currentView: UI.Widget.Widget|null;\n  previousView: UI.Widget.Widget|null;\n  userGesture: boolean|undefined;\n}\n\nexport interface EventTypes {\n  [Events.EDITOR_SELECTED]: EditorSelectedEvent;\n  [Events.EDITOR_CLOSED]: Workspace.UISourceCode.UISourceCode;\n}\n\nconst MAX_PREVIOUSLY_VIEWED_FILES_COUNT = 30;\nconst MAX_SERIALIZABLE_URL_LENGTH = 4096;\n\ninterface SerializedHistoryItem {\n  url: string;\n  resourceTypeName: string;\n  selectionRange?: TextUtils.TextRange.SerializedTextRange;\n  scrollLineNumber?: number;\n}\n\ninterface HistoryItemKey {\n  url: Platform.DevToolsPath.UrlString;\n  resourceType: Common.ResourceType.ResourceType;\n}\n\nfunction historyItemKey(uiSourceCode: Workspace.UISourceCode.UISourceCode): HistoryItemKey {\n  return {url: uiSourceCode.url(), resourceType: uiSourceCode.contentType()};\n}\n\nexport class HistoryItem implements HistoryItemKey {\n  url: Platform.DevToolsPath.UrlString;\n  resourceType: Common.ResourceType.ResourceType;\n  selectionRange: TextUtils.TextRange.TextRange|undefined;\n  scrollLineNumber: number|undefined;\n\n  constructor(\n      url: Platform.DevToolsPath.UrlString, resourceType: Common.ResourceType.ResourceType,\n      selectionRange?: TextUtils.TextRange.TextRange, scrollLineNumber?: number) {\n    this.url = url;\n    this.resourceType = resourceType;\n    this.selectionRange = selectionRange;\n    this.scrollLineNumber = scrollLineNumber;\n  }\n\n  static fromObject(serializedHistoryItem: SerializedHistoryItem): HistoryItem {\n    const resourceType = Common.ResourceType.ResourceType.fromName(serializedHistoryItem.resourceTypeName);\n    if (resourceType === null) {\n      throw new TypeError(`Invalid resource type name \"${serializedHistoryItem.resourceTypeName}\"`);\n    }\n    const selectionRange = serializedHistoryItem.selectionRange ?\n        TextUtils.TextRange.TextRange.fromObject(serializedHistoryItem.selectionRange) :\n        undefined;\n    return new HistoryItem(\n        serializedHistoryItem.url as Platform.DevToolsPath.UrlString,\n        resourceType,\n        selectionRange,\n        serializedHistoryItem.scrollLineNumber,\n    );\n  }\n\n  toObject(): SerializedHistoryItem|null {\n    if (this.url.length >= MAX_SERIALIZABLE_URL_LENGTH) {\n      return null;\n    }\n    return {\n      url: this.url,\n      resourceTypeName: this.resourceType.name(),\n      selectionRange: this.selectionRange,\n      scrollLineNumber: this.scrollLineNumber,\n    };\n  }\n}\n\nexport class History {\n  private items: HistoryItem[];\n\n  constructor(items: HistoryItem[]) {\n    this.items = items;\n  }\n\n  static fromObject(serializedHistoryItems: SerializedHistoryItem[]): History {\n    const items = [];\n    for (const serializedHistoryItem of serializedHistoryItems) {\n      try {\n        items.push(HistoryItem.fromObject(serializedHistoryItem));\n      } catch {\n      }\n    }\n    return new History(items);\n  }\n\n  index({url, resourceType}: HistoryItemKey): number {\n    return this.items.findIndex(item => item.url === url && item.resourceType === resourceType);\n  }\n\n  selectionRange(key: HistoryItemKey): TextUtils.TextRange.TextRange|undefined {\n    const index = this.index(key);\n    if (index === -1) {\n      return undefined;\n    }\n    return this.items[index].selectionRange;\n  }\n\n  updateSelectionRange(key: HistoryItemKey, selectionRange?: TextUtils.TextRange.TextRange): void {\n    if (!selectionRange) {\n      return;\n    }\n    const index = this.index(key);\n    if (index === -1) {\n      return;\n    }\n    this.items[index].selectionRange = selectionRange;\n  }\n\n  scrollLineNumber(key: HistoryItemKey): number|undefined {\n    const index = this.index(key);\n    if (index === -1) {\n      return;\n    }\n    return this.items[index].scrollLineNumber;\n  }\n\n  updateScrollLineNumber(key: HistoryItemKey, scrollLineNumber: number): void {\n    const index = this.index(key);\n    if (index === -1) {\n      return;\n    }\n    this.items[index].scrollLineNumber = scrollLineNumber;\n  }\n\n  update(keys: HistoryItemKey[]): void {\n    for (let i = keys.length - 1; i >= 0; --i) {\n      const index = this.index(keys[i]);\n      let item;\n      if (index !== -1) {\n        item = this.items[index];\n        this.items.splice(index, 1);\n      } else {\n        item = new HistoryItem(keys[i].url, keys[i].resourceType);\n      }\n      this.items.unshift(item);\n    }\n  }\n\n  remove(key: HistoryItemKey): void {\n    const index = this.index(key);\n    if (index === -1) {\n      return;\n    }\n    this.items.splice(index, 1);\n  }\n\n  toObject(): SerializedHistoryItem[] {\n    const serializedHistoryItems = [];\n    for (const item of this.items) {\n      const serializedItem = item.toObject();\n      if (serializedItem) {\n        serializedHistoryItems.push(serializedItem);\n      }\n      if (serializedHistoryItems.length === MAX_PREVIOUSLY_VIEWED_FILES_COUNT) {\n        break;\n      }\n    }\n    return serializedHistoryItems;\n  }\n\n  keys(): HistoryItemKey[] {\n    return this.items;\n  }\n}\n\nexport class EditorContainerTabDelegate implements UI.TabbedPane.TabbedPaneTabDelegate {\n  private readonly editorContainer: TabbedEditorContainer;\n\n  constructor(editorContainer: TabbedEditorContainer) {\n    this.editorContainer = editorContainer;\n  }\n\n  closeTabs(_tabbedPane: UI.TabbedPane.TabbedPane, ids: string[]): void {\n    this.editorContainer.closeTabs(ids);\n  }\n\n  onContextMenu(tabId: string, contextMenu: UI.ContextMenu.ContextMenu): void {\n    this.editorContainer.onContextMenu(tabId, contextMenu);\n  }\n}\n", "/*\n * Copyright (C) 2012 Google Inc. All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are\n * met:\n *\n *     * Redistributions of source code must retain the above copyright\n * notice, this list of conditions and the following disclaimer.\n *     * Redistributions in binary form must reproduce the above\n * copyright notice, this list of conditions and the following disclaimer\n * in the documentation and/or other materials provided with the\n * distribution.\n *     * Neither the name of Google Inc. nor the names of its\n * contributors may be used to endorse or promote products derived from\n * this software without specific prior written permission.\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS\n * \"AS IS\" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT\n * LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR\n * A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT\n * OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,\n * SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT\n * LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,\n * DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY\n * THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE\n * OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */\n\n/* eslint-disable rulesdir/no-imperative-dom-api */\n\nimport * as Common from '../../core/common/common.js';\nimport * as Host from '../../core/host/host.js';\nimport * as FormatterActions from '../../entrypoints/formatter_worker/FormatterActions.js';  // eslint-disable-line rulesdir/es-modules-import\nimport * as IssuesManager from '../../models/issues_manager/issues_manager.js';\nimport * as Persistence from '../../models/persistence/persistence.js';\nimport * as TextUtils from '../../models/text_utils/text_utils.js';\nimport * as Workspace from '../../models/workspace/workspace.js';\nimport * as CodeMirror from '../../third_party/codemirror.next/codemirror.next.js';\nimport * as IconButton from '../../ui/components/icon_button/icon_button.js';\nimport * as IssueCounter from '../../ui/components/issue_counter/issue_counter.js';\nimport * as TextEditor from '../../ui/components/text_editor/text_editor.js';\nimport * as SourceFrame from '../../ui/legacy/components/source_frame/source_frame.js';\nimport * as UI from '../../ui/legacy/legacy.js';\n\nimport {AiWarningInfobarPlugin} from './AiWarningInfobarPlugin.js';\nimport {CoveragePlugin} from './CoveragePlugin.js';\nimport {CSSPlugin} from './CSSPlugin.js';\nimport {DebuggerPlugin} from './DebuggerPlugin.js';\nimport type {Plugin} from './Plugin.js';\nimport {MemoryProfilePlugin, PerformanceProfilePlugin} from './ProfilePlugin.js';\nimport {ResourceOriginPlugin} from './ResourceOriginPlugin.js';\nimport {SnippetsPlugin} from './SnippetsPlugin.js';\nimport {SourcesPanel} from './SourcesPanel.js';\n\nexport class UISourceCodeFrame extends Common.ObjectWrapper\n                                           .eventMixin<EventTypes, typeof SourceFrame.SourceFrame.SourceFrameImpl>(\n                                               SourceFrame.SourceFrame.SourceFrameImpl) {\n  #uiSourceCode: Workspace.UISourceCode.UISourceCode;\n  #muteSourceCodeEvents = false;\n  #persistenceBinding: Persistence.Persistence.PersistenceBinding|null;\n  #uiSourceCodeEventListeners: Common.EventTarget.EventDescriptor[] = [];\n  #messageAndDecorationListeners: Common.EventTarget.EventDescriptor[] = [];\n  readonly #boundOnBindingChanged: () => void;\n  // The active plugins. These are created in setContent, and\n  // recreated when the binding changes\n  // Used in web tests\n  private plugins: Plugin[] = [];\n  readonly #errorPopoverHelper: UI.PopoverHelper.PopoverHelper;\n  #sourcesPanelOpenedMetricsRecorded = false;\n\n  constructor(uiSourceCode: Workspace.UISourceCode.UISourceCode) {\n    super(() => this.workingCopy());\n\n    this.#uiSourceCode = uiSourceCode;\n\n    this.#persistenceBinding = Persistence.Persistence.PersistenceImpl.instance().binding(uiSourceCode);\n\n    this.#boundOnBindingChanged = this.onBindingChanged.bind(this);\n\n    Common.Settings.Settings.instance()\n        .moduleSetting('persistence-network-overrides-enabled')\n        .addChangeListener(this.onNetworkPersistenceChanged, this);\n\n    this.#errorPopoverHelper = new UI.PopoverHelper.PopoverHelper(\n        this.textEditor.editor.contentDOM, this.getErrorPopoverContent.bind(this), 'sources.error');\n\n    this.#errorPopoverHelper.setTimeout(100, 100);\n    this.initializeUISourceCode();\n  }\n\n  private async workingCopy(): Promise<TextUtils.ContentData.ContentDataOrError> {\n    if (this.#uiSourceCode.isDirty()) {\n      return this.#uiSourceCode.workingCopyContentData();\n    }\n    return await this.#uiSourceCode.requestContentData();\n  }\n\n  protected override editorConfiguration(doc: string): CodeMirror.Extension {\n    return [\n      super.editorConfiguration(doc),\n      rowMessages(this.allMessages()),\n      TextEditor.Config.sourcesWordWrap.instance(),\n      // Inject editor extensions from plugins\n      pluginCompartment.of(this.plugins.map(plugin => plugin.editorExtension())),\n    ];\n  }\n\n  protected override onFocus(): void {\n    super.onFocus();\n    UI.Context.Context.instance().setFlavor(UISourceCodeFrame, this);\n  }\n\n  protected override onBlur(): void {\n    super.onBlur();\n    UI.Context.Context.instance().setFlavor(UISourceCodeFrame, null);\n  }\n\n  private installMessageAndDecorationListeners(): void {\n    if (this.#persistenceBinding) {\n      const networkSourceCode = this.#persistenceBinding.network;\n      const fileSystemSourceCode = this.#persistenceBinding.fileSystem;\n      this.#messageAndDecorationListeners = [\n        networkSourceCode.addEventListener(Workspace.UISourceCode.Events.MessageAdded, this.onMessageAdded, this),\n        networkSourceCode.addEventListener(Workspace.UISourceCode.Events.MessageRemoved, this.onMessageRemoved, this),\n        networkSourceCode.addEventListener(\n            Workspace.UISourceCode.Events.DecorationChanged, this.onDecorationChanged, this),\n\n        fileSystemSourceCode.addEventListener(Workspace.UISourceCode.Events.MessageAdded, this.onMessageAdded, this),\n        fileSystemSourceCode.addEventListener(\n            Workspace.UISourceCode.Events.MessageRemoved, this.onMessageRemoved, this),\n      ];\n    } else {\n      this.#messageAndDecorationListeners = [\n        this.#uiSourceCode.addEventListener(Workspace.UISourceCode.Events.MessageAdded, this.onMessageAdded, this),\n        this.#uiSourceCode.addEventListener(Workspace.UISourceCode.Events.MessageRemoved, this.onMessageRemoved, this),\n        this.#uiSourceCode.addEventListener(\n            Workspace.UISourceCode.Events.DecorationChanged, this.onDecorationChanged, this),\n      ];\n    }\n  }\n\n  uiSourceCode(): Workspace.UISourceCode.UISourceCode {\n    return this.#uiSourceCode;\n  }\n\n  setUISourceCode(uiSourceCode: Workspace.UISourceCode.UISourceCode): void {\n    const loaded = uiSourceCode.contentLoaded() ? Promise.resolve() : uiSourceCode.requestContentData();\n    const startUISourceCode = this.#uiSourceCode;\n    loaded.then(async () => {\n      if (this.#uiSourceCode !== startUISourceCode) {\n        return;\n      }\n      this.unloadUISourceCode();\n      this.#uiSourceCode = uiSourceCode;\n      if (uiSourceCode.workingCopy() !== this.textEditor.state.doc.toString()) {\n        await this.setContentDataOrError(Promise.resolve(uiSourceCode.workingCopyContentData()));\n      } else {\n        this.reloadPlugins();\n      }\n      this.initializeUISourceCode();\n    }, console.error);\n  }\n\n  private unloadUISourceCode(): void {\n    Common.EventTarget.removeEventListeners(this.#messageAndDecorationListeners);\n    Common.EventTarget.removeEventListeners(this.#uiSourceCodeEventListeners);\n    this.#uiSourceCode.removeWorkingCopyGetter();\n    Persistence.Persistence.PersistenceImpl.instance().unsubscribeFromBindingEvent(\n        this.#uiSourceCode, this.#boundOnBindingChanged);\n  }\n\n  private initializeUISourceCode(): void {\n    this.#uiSourceCodeEventListeners = [\n      this.#uiSourceCode.addEventListener(\n          Workspace.UISourceCode.Events.WorkingCopyChanged, this.onWorkingCopyChanged, this),\n      this.#uiSourceCode.addEventListener(\n          Workspace.UISourceCode.Events.WorkingCopyCommitted, this.onWorkingCopyCommitted, this),\n      this.#uiSourceCode.addEventListener(Workspace.UISourceCode.Events.TitleChanged, this.onTitleChanged, this),\n    ];\n\n    Persistence.Persistence.PersistenceImpl.instance().subscribeForBindingEvent(\n        this.#uiSourceCode, this.#boundOnBindingChanged);\n    this.installMessageAndDecorationListeners();\n    this.updateStyle();\n    const canPrettyPrint = FormatterActions.FORMATTABLE_MEDIA_TYPES.includes(this.contentType) &&\n        !this.#uiSourceCode.project().canSetFileContent() &&\n        Persistence.Persistence.PersistenceImpl.instance().binding(this.#uiSourceCode) === null;\n    const autoPrettyPrint = !this.#uiSourceCode.contentType().isFromSourceMap();\n    this.setCanPrettyPrint(canPrettyPrint, autoPrettyPrint);\n  }\n\n  override wasShown(): void {\n    super.wasShown();\n    this.setEditable(this.canEditSourceInternal());\n  }\n\n  override willHide(): void {\n    for (const plugin of this.plugins) {\n      plugin.willHide();\n    }\n    super.willHide();\n    UI.Context.Context.instance().setFlavor(UISourceCodeFrame, null);\n    this.#uiSourceCode.removeWorkingCopyGetter();\n  }\n\n  protected override getContentType(): string {\n    const binding = Persistence.Persistence.PersistenceImpl.instance().binding(this.#uiSourceCode);\n    const mimeType = binding ? binding.network.mimeType() : this.#uiSourceCode.mimeType();\n    return Common.ResourceType.ResourceType.simplifyContentType(mimeType);\n  }\n\n  canEditSourceInternal(): boolean {\n    if (this.hasLoadError()) {\n      return false;\n    }\n    if (this.#uiSourceCode.editDisabled()) {\n      return false;\n    }\n    if (this.#uiSourceCode.mimeType() === 'application/wasm') {\n      return false;\n    }\n    if (Persistence.Persistence.PersistenceImpl.instance().binding(this.#uiSourceCode)) {\n      return true;\n    }\n    if (this.#uiSourceCode.project().canSetFileContent()) {\n      return true;\n    }\n    if (this.#uiSourceCode.project().isServiceProject()) {\n      return false;\n    }\n    if (this.#uiSourceCode.contentType().isFromSourceMap()) {\n      // Original Scripts/StyleSheets from source maps can only be edited when mapped via workspace.\n      // That case is handled above by the `binding` check on `PersistenceImpl`.\n      return false;\n    }\n    if (this.#uiSourceCode.project().type() === Workspace.Workspace.projectTypes.Network &&\n        Persistence.NetworkPersistenceManager.NetworkPersistenceManager.instance().active()) {\n      return true;\n    }\n    // Because live edit fails on large whitespace changes, pretty printed scripts are not editable.\n    if (this.pretty && this.#uiSourceCode.contentType().hasScripts()) {\n      return false;\n    }\n    return this.#uiSourceCode.contentType() !== Common.ResourceType.resourceTypes.Document;\n  }\n\n  private onNetworkPersistenceChanged(): void {\n    this.setEditable(this.canEditSourceInternal());\n  }\n\n  commitEditing(): void {\n    if (!this.#uiSourceCode.isDirty()) {\n      return;\n    }\n\n    this.#muteSourceCodeEvents = true;\n    this.#uiSourceCode.commitWorkingCopy();\n    this.#muteSourceCodeEvents = false;\n  }\n\n  override async setContent(content: string): Promise<void> {\n    this.disposePlugins();\n    this.loadPlugins();\n    await super.setContent(content);\n    for (const plugin of this.plugins) {\n      plugin.editorInitialized(this.textEditor);\n    }\n    this.#recordSourcesPanelOpenedMetrics();\n    Common.EventTarget.fireEvent('source-file-loaded', this.#uiSourceCode.displayName(true));\n  }\n\n  private createMessage(origin: Workspace.UISourceCode.Message): RowMessage {\n    const {lineNumber, columnNumber} = this.uiLocationToEditorLocation(origin.lineNumber(), origin.columnNumber());\n    return new RowMessage(origin, lineNumber, columnNumber);\n  }\n\n  private allMessages(): RowMessage[] {\n    const origins = this.#persistenceBinding !== null ?\n        [...this.#persistenceBinding.network.messages(), ...this.#persistenceBinding.fileSystem.messages()] :\n        [...this.#uiSourceCode.messages()];\n    return origins.map(origin => this.createMessage(origin));\n  }\n\n  override onTextChanged(): void {\n    const wasPretty = this.pretty;\n    super.onTextChanged();\n    this.#errorPopoverHelper.hidePopover();\n    SourcesPanel.instance().updateLastModificationTime();\n    this.#muteSourceCodeEvents = true;\n    // TODO: Bring back `isClean()` check and\n    // resetting working copy after making sure that\n    // `isClean()` correctly reports true only when\n    // the original code and the working copy is the same.\n    this.#uiSourceCode.setWorkingCopyGetter(() => this.textEditor.state.sliceDoc());\n    this.#muteSourceCodeEvents = false;\n    if (wasPretty !== this.pretty) {\n      this.updateStyle();\n      this.reloadPlugins();\n    }\n  }\n\n  onWorkingCopyChanged(): void {\n    if (this.#muteSourceCodeEvents) {\n      return;\n    }\n    this.maybeSetContent(this.#uiSourceCode.workingCopyContentData());\n  }\n\n  private onWorkingCopyCommitted(): void {\n    if (!this.#muteSourceCodeEvents) {\n      this.maybeSetContent(this.uiSourceCode().workingCopyContentData());\n    }\n    this.contentCommitted();\n    this.updateStyle();\n  }\n\n  private reloadPlugins(): void {\n    this.disposePlugins();\n    this.loadPlugins();\n    const editor = this.textEditor;\n    editor.dispatch({effects: pluginCompartment.reconfigure(this.plugins.map(plugin => plugin.editorExtension()))});\n    for (const plugin of this.plugins) {\n      plugin.editorInitialized(editor);\n    }\n  }\n\n  private onTitleChanged(): void {\n    this.updateLanguageMode('').then(() => this.reloadPlugins(), console.error);\n  }\n\n  static sourceFramePlugins(): Array<typeof Plugin> {\n    // The order of these plugins matters for toolbar items and editor\n    // extension precedence\n    return [\n      CSSPlugin,\n      DebuggerPlugin,\n      SnippetsPlugin,\n      ResourceOriginPlugin,\n      CoveragePlugin,\n      MemoryProfilePlugin,\n      PerformanceProfilePlugin,\n      AiWarningInfobarPlugin,\n    ];\n  }\n\n  private loadPlugins(): void {\n    const binding = Persistence.Persistence.PersistenceImpl.instance().binding(this.#uiSourceCode);\n    const pluginUISourceCode = binding ? binding.network : this.#uiSourceCode;\n\n    for (const pluginType of UISourceCodeFrame.sourceFramePlugins()) {\n      if (pluginType.accepts(pluginUISourceCode)) {\n        this.plugins.push(new pluginType(pluginUISourceCode, this));\n      }\n    }\n\n    this.dispatchEventToListeners(Events.TOOLBAR_ITEMS_CHANGED);\n  }\n\n  private disposePlugins(): void {\n    for (const plugin of this.plugins) {\n      plugin.dispose();\n    }\n    this.plugins = [];\n  }\n\n  private onBindingChanged(): void {\n    const binding = Persistence.Persistence.PersistenceImpl.instance().binding(this.#uiSourceCode);\n    if (binding === this.#persistenceBinding) {\n      return;\n    }\n    this.unloadUISourceCode();\n    this.#persistenceBinding = binding;\n    this.initializeUISourceCode();\n    this.reloadMessages();\n    this.reloadPlugins();\n  }\n\n  private reloadMessages(): void {\n    const messages = this.allMessages();\n    const {editor} = this.textEditor;\n    editor.dispatch({effects: setRowMessages.of(RowMessages.create(messages))});\n  }\n\n  private updateStyle(): void {\n    this.setEditable(this.canEditSourceInternal());\n  }\n\n  private maybeSetContent(content: TextUtils.ContentData.ContentData): void {\n    if (this.textEditor.state.doc.toString() !== content.text) {\n      void this.setContentDataOrError(Promise.resolve(content));\n    }\n  }\n\n  protected override populateTextAreaContextMenu(\n      contextMenu: UI.ContextMenu.ContextMenu, lineNumber: number, columnNumber: number): void {\n    super.populateTextAreaContextMenu(contextMenu, lineNumber, columnNumber);\n    contextMenu.appendApplicableItems(this.#uiSourceCode);\n    const location = this.editorLocationToUILocation(lineNumber, columnNumber);\n    contextMenu.appendApplicableItems(\n        new Workspace.UISourceCode.UILocation(this.#uiSourceCode, location.lineNumber, location.columnNumber));\n    for (const plugin of this.plugins) {\n      plugin.populateTextAreaContextMenu(contextMenu, lineNumber, columnNumber);\n    }\n  }\n\n  protected override populateLineGutterContextMenu(contextMenu: UI.ContextMenu.ContextMenu, lineNumber: number): void {\n    super.populateLineGutterContextMenu(contextMenu, lineNumber);\n    for (const plugin of this.plugins) {\n      plugin.populateLineGutterContextMenu(contextMenu, lineNumber);\n    }\n  }\n\n  dispose(): void {\n    this.#errorPopoverHelper.dispose();\n    this.disposePlugins();\n    this.unloadUISourceCode();\n    this.textEditor.editor.destroy();\n    this.detach();\n    Common.Settings.Settings.instance()\n        .moduleSetting('persistence-network-overrides-enabled')\n        .removeChangeListener(this.onNetworkPersistenceChanged, this);\n  }\n\n  private onMessageAdded(event: Common.EventTarget.EventTargetEvent<Workspace.UISourceCode.Message>): void {\n    const {editor} = this.textEditor, shownMessages = editor.state.field(showRowMessages, false);\n    if (shownMessages) {\n      const message = this.createMessage(event.data);\n      editor.dispatch({effects: setRowMessages.of(shownMessages.messages.add(message))});\n    }\n  }\n\n  private onMessageRemoved(event: Common.EventTarget.EventTargetEvent<Workspace.UISourceCode.Message>): void {\n    const {editor} = this.textEditor, shownMessages = editor.state.field(showRowMessages, false);\n    if (shownMessages) {\n      const message = this.createMessage(event.data);\n      editor.dispatch({effects: setRowMessages.of(shownMessages.messages.remove(message))});\n    }\n  }\n\n  private onDecorationChanged(event: Common.EventTarget.EventTargetEvent<string>): void {\n    for (const plugin of this.plugins) {\n      plugin.decorationChanged(event.data as SourceFrame.SourceFrame.DecoratorType, this.textEditor);\n    }\n  }\n\n  override async toolbarItems(): Promise<UI.Toolbar.ToolbarItem[]> {\n    const leftToolbarItems = await super.toolbarItems();\n    const rightToolbarItems = [];\n    for (const plugin of this.plugins) {\n      leftToolbarItems.push(...plugin.leftToolbarItems());\n      rightToolbarItems.push(...plugin.rightToolbarItems());\n    }\n\n    if (!rightToolbarItems.length) {\n      return leftToolbarItems;\n    }\n\n    return [...leftToolbarItems, new UI.Toolbar.ToolbarSeparator(true), ...rightToolbarItems];\n  }\n\n  private getErrorPopoverContent(event: Event): UI.PopoverHelper.PopoverRequest|null {\n    const mouseEvent = event as MouseEvent;\n    const eventTarget = event.target as HTMLElement;\n    const anchorElement = eventTarget.enclosingNodeOrSelfWithClass('cm-messageIcon-error') ||\n        eventTarget.enclosingNodeOrSelfWithClass('cm-messageIcon-issue');\n    if (!anchorElement) {\n      return null;\n    }\n\n    const messageField = this.textEditor.state.field(showRowMessages, false);\n    if (!messageField || messageField.messages.rows.length === 0) {\n      return null;\n    }\n    const {editor} = this.textEditor;\n    const position = editor.posAtCoords(mouseEvent);\n    if (position === null) {\n      return null;\n    }\n    const line = editor.state.doc.lineAt(position);\n    if (position !== line.to) {\n      return null;\n    }\n    const row = messageField.messages.rows.find(row => row[0].lineNumber() === line.number - 1);\n    if (!row) {\n      return null;\n    }\n    const issues = anchorElement.classList.contains('cm-messageIcon-issue');\n    const messages = row.filter(msg => (msg.level() === Workspace.UISourceCode.Message.Level.ISSUE) === issues);\n    if (!messages.length) {\n      return null;\n    }\n    const anchor =\n        anchorElement ? anchorElement.boxInWindow() : new AnchorBox(mouseEvent.clientX, mouseEvent.clientY, 1, 1);\n\n    const counts = countDuplicates(messages);\n    const element = document.createElement('div');\n    element.classList.add('text-editor-messages-description-container');\n    for (let i = 0; i < messages.length; i++) {\n      if (counts[i]) {\n        element.appendChild(renderMessage(messages[i], counts[i]));\n      }\n    }\n    return {\n      box: anchor,\n      hide(): void{},\n      show: async (popover: UI.GlassPane.GlassPane) => {\n        popover.contentElement.append(element);\n        return true;\n      },\n    };\n  }\n\n  /**\n   * Only records metrics once per UISourceCodeFrame instance and must only be\n   * called once the content of the UISourceCode is available.\n   */\n  #recordSourcesPanelOpenedMetrics(): void {\n    if (this.#sourcesPanelOpenedMetricsRecorded) {\n      return;\n    }\n    this.#sourcesPanelOpenedMetricsRecorded = true;\n\n    const mimeType = Common.ResourceType.ResourceType.mimeFromURL(this.#uiSourceCode.url());\n    const mediaType = Common.ResourceType.ResourceType.mediaTypeForMetrics(\n        mimeType ?? '', this.#uiSourceCode.contentType().isFromSourceMap(),\n        TextUtils.TextUtils.isMinified(this.#uiSourceCode.content()), this.#uiSourceCode.url().startsWith('snippet://'),\n        this.#uiSourceCode.url().startsWith('debugger://'));\n    Host.userMetrics.sourcesPanelFileOpened(mediaType);\n  }\n}\n\nfunction getIconDataForLevel(level: Workspace.UISourceCode.Message.Level): IconButton.Icon.IconData {\n  if (level === Workspace.UISourceCode.Message.Level.ERROR) {\n    return {color: 'var(--icon-error)', width: '16px', height: '14px', iconName: 'cross-circle-filled'};\n  }\n  if (level === Workspace.UISourceCode.Message.Level.WARNING) {\n    return {color: 'var(--icon-warning)', width: '18px', height: '14px', iconName: 'warning-filled'};\n  }\n  if (level === Workspace.UISourceCode.Message.Level.ISSUE) {\n    return {color: 'var(--icon-warning)', width: '17px', height: '14px', iconName: 'issue-exclamation-filled'};\n  }\n  return {color: 'var(--icon-error)', width: '16px', height: '14px', iconName: 'cross-circle-filled'};\n}\n\nfunction getBubbleTypePerLevel(level: Workspace.UISourceCode.Message.Level): string {\n  switch (level) {\n    case Workspace.UISourceCode.Message.Level.ERROR:\n      return 'error';\n    case Workspace.UISourceCode.Message.Level.WARNING:\n      return 'warning';\n    case Workspace.UISourceCode.Message.Level.ISSUE:\n      return 'warning';\n  }\n}\n\nfunction messageLevelComparator(a: RowMessage, b: RowMessage): number {\n  const messageLevelPriority = {\n    [Workspace.UISourceCode.Message.Level.ISSUE]: 2,\n    [Workspace.UISourceCode.Message.Level.WARNING]: 3,\n    [Workspace.UISourceCode.Message.Level.ERROR]: 4,\n  };\n  return messageLevelPriority[a.level()] - messageLevelPriority[b.level()];\n}\n\nfunction getIconDataForMessage(message: RowMessage): IconButton.Icon.IconData {\n  if (message.origin instanceof IssuesManager.SourceFrameIssuesManager.IssueMessage) {\n    return {\n      ...IssueCounter.IssueCounter.getIssueKindIconData(message.origin.getIssueKind()),\n      width: '12px',\n      height: '12px',\n    };\n  }\n  return getIconDataForLevel(message.level());\n}\n\nexport const enum Events {\n  TOOLBAR_ITEMS_CHANGED = 'ToolbarItemsChanged',\n}\n\nexport interface EventTypes {\n  [Events.TOOLBAR_ITEMS_CHANGED]: void;\n}\n\nconst pluginCompartment = new CodeMirror.Compartment();\n\n// Row message management and display logic. The frame manages a\n// collection of messages, organized by line (row), as a wavy\n// underline starting at the start of the first message, up to the end\n// of the line, with icons indicating the message severity and content\n// at the end of the line.\n\nclass RowMessage {\n  readonly origin: Workspace.UISourceCode.Message;\n  readonly #lineNumber: number;\n  readonly #columnNumber: number;\n\n  constructor(origin: Workspace.UISourceCode.Message, lineNumber: number, columnNumber: number) {\n    this.origin = origin;\n    this.#lineNumber = lineNumber;\n    this.#columnNumber = columnNumber;\n  }\n\n  level(): Workspace.UISourceCode.Message.Level {\n    return this.origin.level();\n  }\n\n  text(): string {\n    return this.origin.text();\n  }\n\n  clickHandler(): (() => void)|undefined {\n    return this.origin.clickHandler();\n  }\n\n  lineNumber(): number {\n    return this.#lineNumber;\n  }\n\n  columnNumber(): number {\n    return this.#columnNumber;\n  }\n\n  isEqual(that: RowMessage): boolean {\n    return this.origin.isEqual(that.origin);\n  }\n}\n\nfunction addMessage(rows: RowMessage[][], message: RowMessage): RowMessage[][] {\n  const lineNumber = message.lineNumber();\n  let i = 0;\n  for (; i < rows.length; i++) {\n    const diff = rows[i][0].lineNumber() - lineNumber;\n    if (diff === 0) {\n      rows[i] = rows[i].concat(message);\n      return rows;\n    }\n    if (diff > 0) {\n      break;\n    }\n  }\n  rows.splice(i, 0, [message]);\n  return rows;\n}\n\nfunction removeMessage(rows: RowMessage[][], message: RowMessage): void {\n  for (let i = 0; i < rows.length; i++) {\n    if (rows[i][0].lineNumber() === message.lineNumber()) {\n      const remaining = rows[i].filter(m => !m.isEqual(message));\n      if (remaining.length) {\n        rows[i] = remaining;\n      } else {\n        rows.splice(i, 1);\n      }\n      break;\n    }\n  }\n}\n\nclass RowMessages {\n  constructor(readonly rows: RowMessage[][]) {\n  }\n\n  static create(messages: RowMessage[]): RowMessages {\n    const rows: RowMessage[][] = [];\n    for (const message of messages) {\n      addMessage(rows, message);\n    }\n    return new RowMessages(rows);\n  }\n\n  remove(message: RowMessage): RowMessages {\n    const rows = this.rows.slice();\n    removeMessage(rows, message);\n    return new RowMessages(rows);\n  }\n\n  add(message: RowMessage): RowMessages {\n    return new RowMessages(addMessage(this.rows.slice(), message));\n  }\n}\n\nconst setRowMessages = CodeMirror.StateEffect.define<RowMessages>();\n\nconst underlineMark = CodeMirror.Decoration.mark({class: 'cm-waveUnderline'});\n\n// The widget shown at the end of a message annotation.\nclass MessageWidget extends CodeMirror.WidgetType {\n  constructor(readonly messages: RowMessage[]) {\n    super();\n  }\n\n  override eq(other: MessageWidget): boolean {\n    return other.messages === this.messages;\n  }\n\n  toDOM(): HTMLElement {\n    const wrap = document.createElement('span');\n    wrap.classList.add('cm-messageIcon');\n    const nonIssues = this.messages.filter(msg => msg.level() !== Workspace.UISourceCode.Message.Level.ISSUE);\n    if (nonIssues.length) {\n      const maxIssue = nonIssues.sort(messageLevelComparator)[nonIssues.length - 1];\n      const errorIcon = wrap.appendChild(new IconButton.Icon.Icon());\n      errorIcon.data = getIconDataForLevel(maxIssue.level());\n      errorIcon.classList.add('cm-messageIcon-error');\n    }\n    const issue = this.messages.find(m => m.level() === Workspace.UISourceCode.Message.Level.ISSUE);\n    if (issue) {\n      const issueIcon = wrap.appendChild(new IconButton.Icon.Icon());\n      issueIcon.data = getIconDataForMessage(issue);\n      issueIcon.classList.add('cm-messageIcon-issue');\n      issueIcon.addEventListener('click', () => (issue.clickHandler() || Math.min)());\n    }\n    return wrap;\n  }\n}\n\nclass RowMessageDecorations {\n  constructor(readonly messages: RowMessages, readonly decorations: CodeMirror.DecorationSet) {\n  }\n\n  static create(messages: RowMessages, doc: CodeMirror.Text): RowMessageDecorations {\n    const builder = new CodeMirror.RangeSetBuilder<CodeMirror.Decoration>();\n    for (const row of messages.rows) {\n      const line = doc.line(Math.min(doc.lines, row[0].lineNumber() + 1));\n      const minCol = row.reduce((col, msg) => Math.min(col, msg.columnNumber() || 0), line.length);\n      if (minCol < line.length) {\n        builder.add(line.from + minCol, line.to, underlineMark);\n      }\n      builder.add(line.to, line.to, CodeMirror.Decoration.widget({side: 1, widget: new MessageWidget(row)}));\n    }\n    return new RowMessageDecorations(messages, builder.finish());\n  }\n\n  apply(tr: CodeMirror.Transaction): RowMessageDecorations {\n    let result: RowMessageDecorations = this;\n    if (tr.docChanged) {\n      result = new RowMessageDecorations(this.messages, this.decorations.map(tr.changes));\n    }\n    for (const effect of tr.effects) {\n      if (effect.is(setRowMessages)) {\n        result = RowMessageDecorations.create(effect.value, tr.state.doc);\n      }\n    }\n    return result;\n  }\n}\n\nconst showRowMessages = CodeMirror.StateField.define<RowMessageDecorations>({\n  create(state): RowMessageDecorations {\n    return RowMessageDecorations.create(new RowMessages([]), state.doc);\n  },\n  update(value, tr): RowMessageDecorations {\n    return value.apply(tr);\n  },\n  provide: field => CodeMirror.Prec.lowest(CodeMirror.EditorView.decorations.from(field, value => value.decorations)),\n});\n\nfunction countDuplicates(messages: RowMessage[]): number[] {\n  const counts = [];\n  for (let i = 0; i < messages.length; i++) {\n    counts[i] = 0;\n    for (let j = 0; j <= i; j++) {\n      if (messages[j].isEqual(messages[i])) {\n        counts[j]++;\n        break;\n      }\n    }\n  }\n  return counts;\n}\n\nfunction renderMessage(message: RowMessage, count: number): HTMLElement {\n  const element = document.createElement('div');\n  element.classList.add('text-editor-row-message');\n  element.style.display = 'flex';\n  element.style.alignItems = 'center';\n  element.style.gap = '4px';\n\n  if (count === 1) {\n    const icon = element.appendChild(new IconButton.Icon.Icon());\n    icon.data = getIconDataForMessage(message);\n    icon.classList.add('text-editor-row-message-icon');\n    icon.addEventListener('click', () => (message.clickHandler() || Math.min)());\n  } else {\n    const repeatCountElement = element.createChild('dt-small-bubble', 'text-editor-row-message-repeat-count');\n    repeatCountElement.textContent = String(count);\n    repeatCountElement.style.flexShrink = '0';\n    repeatCountElement.type = getBubbleTypePerLevel(message.level());\n  }\n  const linesContainer = element.createChild('div');\n  for (const line of message.text().split('\\n')) {\n    linesContainer.createChild('div').textContent = line;\n  }\n\n  return element;\n}\n\nconst rowMessageTheme = CodeMirror.EditorView.baseTheme({\n  '.cm-line::selection': {\n    backgroundColor: 'transparent',\n    color: 'currentColor',\n  },\n  '.cm-tooltip-message': {\n    padding: '4px',\n  },\n\n  '.cm-waveUnderline': {\n    backgroundImage: 'var(--image-file-errorWave)',\n    backgroundRepeat: 'repeat-x',\n    backgroundPosition: 'bottom',\n    paddingBottom: '1px',\n  },\n\n  '.cm-messageIcon': {\n    cursor: 'pointer',\n    '& > *': {\n      verticalAlign: 'text-bottom',\n      marginLeft: '2px',\n    },\n  },\n\n  '.cm-messageIcon-issue, .cm-messageIcon-error': {\n    marginTop: '-1px',\n    marginBottom: '-1px',\n  },\n});\n\nfunction rowMessages(initialMessages: RowMessage[]): CodeMirror.Extension {\n  return [\n    showRowMessages.init(state => RowMessageDecorations.create(RowMessages.create(initialMessages), state.doc)),\n    rowMessageTheme,\n  ];\n}\n", "// Copyright 2020 The Chromium Authors. All rights reserved.\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\n\nexport const enum FormatterActions {\n  FORMAT = 'format',\n  PARSE_CSS = 'parseCSS',\n  JAVASCRIPT_SUBSTITUTE = 'javaScriptSubstitute',\n  JAVASCRIPT_SCOPE_TREE = 'javaScriptScopeTree',\n}\n\nexport const enum FormattableMediaTypes {\n  APPLICATION_JAVASCRIPT = 'application/javascript',\n  APPLICATION_JSON = 'application/json',\n  APPLICATION_MANIFEST_JSON = 'application/manifest+json',\n  TEXT_CSS = 'text/css',\n  TEXT_HTML = 'text/html',\n  TEXT_JAVASCRIPT = 'text/javascript',\n}\n\nexport const FORMATTABLE_MEDIA_TYPES: string[] = [\n  FormattableMediaTypes.APPLICATION_JAVASCRIPT,\n  FormattableMediaTypes.APPLICATION_JSON,\n  FormattableMediaTypes.APPLICATION_MANIFEST_JSON,\n  FormattableMediaTypes.TEXT_CSS,\n  FormattableMediaTypes.TEXT_HTML,\n  FormattableMediaTypes.TEXT_JAVASCRIPT,\n];\n\nexport interface FormatMapping {\n  original: number[];\n  formatted: number[];\n}\n\nexport interface FormatResult {\n  content: string;\n  mapping: FormatMapping;\n}\n\nexport const enum DefinitionKind {\n  NONE = 0,\n  LET = 1,\n  VAR = 2,\n  FIXED = 3,\n}\n\nexport interface ScopeTreeNode {\n  variables: Array<{name: string, kind: DefinitionKind, offsets: number[]}>;\n  start: number;\n  end: number;\n  children: ScopeTreeNode[];\n}\n", "// Copyright 2021 The Chromium Authors. All rights reserved.\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\n/* eslint-disable rulesdir/no-imperative-dom-api */\n\nimport * as i18n from '../../core/i18n/i18n.js';\nimport * as Platform from '../../core/platform/platform.js';\nimport type * as Workspace from '../../models/workspace/workspace.js';\nimport * as CodeMirror from '../../third_party/codemirror.next/codemirror.next.js';\nimport type * as TextEditor from '../../ui/components/text_editor/text_editor.js';\nimport * as SourceFrame from '../../ui/legacy/components/source_frame/source_frame.js';\n\nimport {Plugin} from './Plugin.js';\n\n// Defines plugins that show profiling information in the editor\n// gutter when available.\n\nconst UIStrings = {\n  /**\n   * @description The milisecond unit\n   */\n  ms: 'ms',\n  /**\n   * @description Unit for data size in DevTools\n   */\n  mb: 'MB',\n  /**\n   * @description A unit\n   */\n  kb: 'kB',\n} as const;\nconst str_ = i18n.i18n.registerUIStrings('panels/sources/ProfilePlugin.ts', UIStrings);\nconst i18nString = i18n.i18n.getLocalizedString.bind(undefined, str_);\n\nclass MemoryMarker extends CodeMirror.GutterMarker {\n  constructor(readonly value: number) {\n    super();\n  }\n\n  override eq(other: MemoryMarker): boolean {\n    return this.value === other.value;\n  }\n\n  override toDOM(): HTMLElement {\n    const element = document.createElement('div');\n    element.className = 'cm-profileMarker';\n    let value = this.value;\n    const intensity = Platform.NumberUtilities.clamp(Math.log10(1 + 2e-3 * value) / 5, 0.02, 1);\n    element.style.backgroundColor = `hsla(217, 100%, 70%, ${intensity.toFixed(3)})`;\n    value /= 1e3;\n    let units;\n    let fractionDigits;\n    if (value >= 1e3) {\n      units = i18nString(UIStrings.mb);\n      value /= 1e3;\n      fractionDigits = value >= 20 ? 0 : 1;\n    } else {\n      units = i18nString(UIStrings.kb);\n      fractionDigits = 0;\n    }\n    element.textContent = value.toFixed(fractionDigits);\n    const unitElement = element.appendChild(document.createElement('span'));\n    unitElement.className = 'cm-units';\n    unitElement.textContent = units;\n    return element;\n  }\n}\n\nclass PerformanceMarker extends CodeMirror.GutterMarker {\n  constructor(readonly value: number) {\n    super();\n  }\n\n  override eq(other: MemoryMarker): boolean {\n    return this.value === other.value;\n  }\n\n  override toDOM(): HTMLElement {\n    const element = document.createElement('div');\n    element.className = 'cm-profileMarker';\n    const intensity = Platform.NumberUtilities.clamp(Math.log10(1 + 10 * this.value) / 5, 0.02, 1);\n    element.textContent = this.value.toFixed(1);\n    element.style.backgroundColor = `hsla(44, 100%, 50%, ${intensity.toFixed(3)})`;\n    const span = document.createElement('span');\n    span.className = 'cm-units';\n    span.textContent = i18nString(UIStrings.ms);\n    element.appendChild(span);\n    return element;\n  }\n}\n\nfunction markersFromProfileData(\n    map: Map<number, number>, state: CodeMirror.EditorState,\n    type: SourceFrame.SourceFrame.DecoratorType): CodeMirror.RangeSet<CodeMirror.GutterMarker> {\n  const markerType = type === SourceFrame.SourceFrame.DecoratorType.PERFORMANCE ? PerformanceMarker : MemoryMarker;\n  const markers: Array<CodeMirror.Range<CodeMirror.GutterMarker>> = [];\n  for (const [line, value] of map) {\n    if (line <= state.doc.lines) {\n      const {from} = state.doc.line(line);\n      markers.push(new markerType(value).range(from));\n    }\n  }\n  return CodeMirror.RangeSet.of(markers, true);\n}\n\nconst makeLineLevelProfilePlugin = (type: SourceFrame.SourceFrame.DecoratorType): typeof Plugin =>\n    class extends Plugin {\n  updateEffect = CodeMirror.StateEffect.define<Map<number, number>>();\n  field: CodeMirror.StateField<CodeMirror.RangeSet<CodeMirror.GutterMarker>>;\n  gutter: CodeMirror.Extension;\n  compartment: CodeMirror.Compartment = new CodeMirror.Compartment();\n\n  constructor(uiSourceCode: Workspace.UISourceCode.UISourceCode) {\n    super(uiSourceCode);\n\n    this.field = CodeMirror.StateField.define<CodeMirror.RangeSet<CodeMirror.GutterMarker>>({\n      create(): CodeMirror.RangeSet<CodeMirror.GutterMarker> {\n        return CodeMirror.RangeSet.empty;\n      },\n      update: (markers, tr) => {\n        return tr.effects.reduce((markers, effect) => {\n          return effect.is(this.updateEffect) ? markersFromProfileData(effect.value, tr.state, type) : markers;\n        }, markers.map(tr.changes));\n      },\n    });\n\n    this.gutter = CodeMirror.gutter({\n      markers: view => view.state.field(this.field),\n      class: `cm-${type}Gutter`,\n    });\n  }\n\n  static override accepts(uiSourceCode: Workspace.UISourceCode.UISourceCode): boolean {\n    return uiSourceCode.contentType().hasScripts();\n  }\n\n  private getLineMap(): Map<number, number>|undefined {\n    return this.uiSourceCode.getDecorationData(type);\n  }\n\n  override editorExtension(): CodeMirror.Extension {\n    const map = this.getLineMap();\n    return this.compartment.of(\n        !map ? [] : [this.field.init(state => markersFromProfileData(map, state, type)), this.gutter, theme]);\n  }\n\n  override decorationChanged(type: SourceFrame.SourceFrame.DecoratorType, editor: TextEditor.TextEditor.TextEditor): void {\n    const installed = Boolean(editor.state.field(this.field, false));\n    const map = this.getLineMap();\n    if (!map) {\n      if (installed) {\n        editor.dispatch({effects: this.compartment.reconfigure([])});\n      }\n    } else if (!installed) {\n      editor.dispatch({\n        effects: this.compartment.reconfigure(\n            [this.field.init(state => markersFromProfileData(map, state, type)), this.gutter, theme]),\n      });\n    } else {\n      editor.dispatch({effects: this.updateEffect.of(map)});\n    }\n  }\n};\n\nconst theme = CodeMirror.EditorView.baseTheme({\n  '.cm-line::selection': {\n    backgroundColor: 'transparent',\n    color: 'currentColor',\n  },\n  '.cm-performanceGutter': {\n    width: '60px',\n    backgroundColor: 'var(--sys-color-cdt-base-container)',\n    marginLeft: '3px',\n  },\n  '.cm-memoryGutter': {\n    width: '48px',\n    backgroundColor: 'var(--sys-color-cdt-base-container)',\n    marginLeft: '3px',\n  },\n  '.cm-profileMarker': {\n    textAlign: 'right',\n    paddingRight: '3px',\n  },\n  '.cm-profileMarker .cm-units': {\n    color: 'var(--sys-color-token-subtle)',\n    fontSize: '75%',\n    marginLeft: '3px',\n  },\n});\n\nexport const MemoryProfilePlugin = makeLineLevelProfilePlugin(SourceFrame.SourceFrame.DecoratorType.MEMORY);\n\nexport const PerformanceProfilePlugin = makeLineLevelProfilePlugin(SourceFrame.SourceFrame.DecoratorType.PERFORMANCE);\n", "// Copyright 2018 The Chromium Authors. All rights reserved.\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\n/* eslint-disable rulesdir/no-imperative-dom-api */\n\nimport * as i18n from '../../core/i18n/i18n.js';\nimport * as Bindings from '../../models/bindings/bindings.js';\nimport type * as Workspace from '../../models/workspace/workspace.js';\nimport * as Components from '../../ui/legacy/components/utils/utils.js';\nimport * as UI from '../../ui/legacy/legacy.js';\n\nimport {Plugin} from './Plugin.js';\n\nconst UIStrings = {\n  /**\n   * @description Text in the bottom toolbar of the Sources panel that lists the source mapped origin scripts.\n   * @example {bundle.min.js} PH1\n   */\n  fromS: '(From {PH1})',\n  /**\n   * @description Tooltip text for links in the bottom toolbar of the Sources panel that point to source mapped scripts.\n   * @example {bundle.min.js} PH1\n   */\n  sourceMappedFromS: '(Source mapped from {PH1})',\n} as const;\nconst str_ = i18n.i18n.registerUIStrings('panels/sources/ResourceOriginPlugin.ts', UIStrings);\nconst i18nString = i18n.i18n.getLocalizedString.bind(undefined, str_);\n\nexport class ResourceOriginPlugin extends Plugin {\n  static override accepts(uiSourceCode: Workspace.UISourceCode.UISourceCode): boolean {\n    const contentType = uiSourceCode.contentType();\n    return contentType.hasScripts() || contentType.isFromSourceMap();\n  }\n\n  override rightToolbarItems(): UI.Toolbar.ToolbarItem[] {\n    const debuggerWorkspaceBinding = Bindings.DebuggerWorkspaceBinding.DebuggerWorkspaceBinding.instance();\n\n    // Handle source mapped scripts and stylesheets.\n    if (this.uiSourceCode.contentType().isFromSourceMap()) {\n      const links = [];\n      for (const script of debuggerWorkspaceBinding.scriptsForUISourceCode(this.uiSourceCode)) {\n        const uiSourceCode = debuggerWorkspaceBinding.uiSourceCodeForScript(script);\n        if (!uiSourceCode) {\n          continue;\n        }\n        const url = uiSourceCode.url();\n        const text = Bindings.ResourceUtils.displayNameForURL(url);\n        const title = i18nString(UIStrings.sourceMappedFromS, {PH1: text});\n        links.push(Components.Linkifier.Linkifier.linkifyRevealable(\n            uiSourceCode, text, url, title, undefined, 'original-script-location'));\n      }\n      for (const originURL of Bindings.SASSSourceMapping.SASSSourceMapping.uiSourceOrigin(this.uiSourceCode)) {\n        links.push(Components.Linkifier.Linkifier.linkifyURL(originURL));\n      }\n      if (links.length === 0) {\n        return [];\n      }\n      const element = document.createElement('span');\n      links.forEach((link, index) => {\n        if (index > 0) {\n          element.append(', ');\n        }\n        element.append(link);\n      });\n      return [new UI.Toolbar.ToolbarItem(i18n.i18n.getFormatLocalizedString(str_, UIStrings.fromS, {PH1: element}))];\n    }\n\n    // Handle anonymous scripts with an originStackTrace.\n    for (const script of debuggerWorkspaceBinding.scriptsForUISourceCode(this.uiSourceCode)) {\n      if (script.originStackTrace?.callFrames.length) {\n        const link = linkifier.linkifyStackTraceTopFrame(script.debuggerModel.target(), script.originStackTrace);\n        return [new UI.Toolbar.ToolbarItem(i18n.i18n.getFormatLocalizedString(str_, UIStrings.fromS, {PH1: link}))];\n      }\n    }\n\n    return [];\n  }\n}\n\nexport const linkifier = new Components.Linkifier.Linkifier();\n", "// Copyright 2017 The Chromium Authors. All rights reserved.\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\n\nimport * as Host from '../../core/host/host.js';\nimport * as i18n from '../../core/i18n/i18n.js';\nimport type * as Workspace from '../../models/workspace/workspace.js';\nimport type * as CodeMirror from '../../third_party/codemirror.next/codemirror.next.js';\nimport * as TextEditor from '../../ui/components/text_editor/text_editor.js';\nimport * as UI from '../../ui/legacy/legacy.js';\nimport * as Snippets from '../snippets/snippets.js';\n\nimport {Plugin} from './Plugin.js';\n\nconst UIStrings = {\n  /**\n   * @description Text in Snippets Plugin of the Sources panel\n   */\n  enter: '⌘+Enter',\n  /**\n   * @description Text in Snippets Plugin of the Sources panel\n   */\n  ctrlenter: 'Ctrl+Enter',\n} as const;\nconst str_ = i18n.i18n.registerUIStrings('panels/sources/SnippetsPlugin.ts', UIStrings);\nconst i18nString = i18n.i18n.getLocalizedString.bind(undefined, str_);\n\nexport class SnippetsPlugin extends Plugin {\n  static override accepts(uiSourceCode: Workspace.UISourceCode.UISourceCode): boolean {\n    return Snippets.ScriptSnippetFileSystem.isSnippetsUISourceCode(uiSourceCode);\n  }\n\n  override rightToolbarItems(): UI.Toolbar.ToolbarItem[] {\n    const runSnippet = UI.Toolbar.Toolbar.createActionButton('debugger.run-snippet');\n    runSnippet.setText(Host.Platform.isMac() ? i18nString(UIStrings.enter) : i18nString(UIStrings.ctrlenter));\n    runSnippet.setReducedFocusRing();\n\n    return [runSnippet];\n  }\n\n  override editorExtension(): CodeMirror.Extension {\n    return TextEditor.JavaScript.completion();\n  }\n}\n", "// Copyright 2014 The Chromium Authors. All rights reserved.\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\n/* eslint-disable rulesdir/no-imperative-dom-api */\n\nimport type * as Common from '../../core/common/common.js';\nimport * as i18n from '../../core/i18n/i18n.js';\nimport * as SDK from '../../core/sdk/sdk.js';\nimport * as IconButton from '../../ui/components/icon_button/icon_button.js';\nimport * as UI from '../../ui/legacy/legacy.js';\nimport * as VisualLogging from '../../ui/visual_logging/visual_logging.js';\n\nimport threadsSidebarPaneStyles from './threadsSidebarPane.css.js';\n\nconst UIStrings = {\n  /**\n   * @description Text in Threads Sidebar Pane of the Sources panel\n   */\n  paused: 'paused',\n} as const;\nconst str_ = i18n.i18n.registerUIStrings('panels/sources/ThreadsSidebarPane.ts', UIStrings);\nconst i18nString = i18n.i18n.getLocalizedString.bind(undefined, str_);\n\nexport class ThreadsSidebarPane extends UI.Widget.VBox implements\n    SDK.TargetManager.SDKModelObserver<SDK.DebuggerModel.DebuggerModel>,\n    UI.ListControl.ListDelegate<SDK.DebuggerModel.DebuggerModel> {\n  private readonly items: UI.ListModel.ListModel<SDK.DebuggerModel.DebuggerModel>;\n  private readonly list: UI.ListControl.ListControl<SDK.DebuggerModel.DebuggerModel>;\n  private selectedModel: SDK.DebuggerModel.DebuggerModel|null;\n\n  constructor() {\n    super({\n      jslog: `${VisualLogging.section('sources.threads')}`,\n      useShadowDom: true,\n    });\n    this.registerRequiredCSS(threadsSidebarPaneStyles);\n\n    this.items = new UI.ListModel.ListModel();\n    this.list = new UI.ListControl.ListControl(this.items, this, UI.ListControl.ListMode.NonViewport);\n    const currentTarget = UI.Context.Context.instance().flavor(SDK.Target.Target);\n    this.selectedModel = currentTarget !== null ? currentTarget.model(SDK.DebuggerModel.DebuggerModel) : null;\n    this.contentElement.appendChild(this.list.element);\n\n    UI.Context.Context.instance().addFlavorChangeListener(SDK.Target.Target, this.targetFlavorChanged, this);\n    SDK.TargetManager.TargetManager.instance().observeModels(SDK.DebuggerModel.DebuggerModel, this);\n  }\n\n  static shouldBeShown(): boolean {\n    return SDK.TargetManager.TargetManager.instance().models(SDK.DebuggerModel.DebuggerModel).length >= 2;\n  }\n\n  createElementForItem(debuggerModel: SDK.DebuggerModel.DebuggerModel): Element {\n    const element = document.createElement('div');\n    element.classList.add('thread-item');\n    const title = element.createChild('div', 'thread-item-title');\n    const pausedState = element.createChild('div', 'thread-item-paused-state');\n    const icon = new IconButton.Icon.Icon();\n    icon.data = {\n      iconName: 'large-arrow-right-filled',\n      color: 'var(--icon-arrow-main-thread)',\n      width: '14px',\n      height: '14px',\n    };\n    icon.classList.add('selected-thread-icon');\n    element.appendChild(icon);\n    element.tabIndex = -1;\n    self.onInvokeElement(element, event => {\n      UI.Context.Context.instance().setFlavor(SDK.Target.Target, debuggerModel.target());\n      event.consume(true);\n    });\n    const isSelected = UI.Context.Context.instance().flavor(SDK.Target.Target) === debuggerModel.target();\n    element.classList.toggle('selected', isSelected);\n    UI.ARIAUtils.setSelected(element, isSelected);\n\n    function updateTitle(): void {\n      const executionContext = debuggerModel.runtimeModel().defaultExecutionContext();\n      title.textContent = executionContext?.label() ? executionContext.label() : debuggerModel.target().name();\n    }\n\n    function updatePausedState(): void {\n      pausedState.textContent = debuggerModel.isPaused() ? i18nString(UIStrings.paused) : '';\n    }\n\n    function targetNameChanged(event: Common.EventTarget.EventTargetEvent<SDK.Target.Target>): void {\n      const target = event.data;\n      if (target === debuggerModel.target()) {\n        updateTitle();\n      }\n    }\n\n    debuggerModel.addEventListener(SDK.DebuggerModel.Events.DebuggerPaused, updatePausedState);\n    debuggerModel.addEventListener(SDK.DebuggerModel.Events.DebuggerResumed, updatePausedState);\n    debuggerModel.runtimeModel().addEventListener(SDK.RuntimeModel.Events.ExecutionContextChanged, updateTitle);\n    SDK.TargetManager.TargetManager.instance().addEventListener(\n        SDK.TargetManager.Events.NAME_CHANGED, targetNameChanged);\n\n    updatePausedState();\n    updateTitle();\n    return element;\n  }\n\n  heightForItem(_debuggerModel: SDK.DebuggerModel.DebuggerModel): number {\n    console.assert(false);  // Should not be called.\n    return 0;\n  }\n\n  isItemSelectable(_debuggerModel: SDK.DebuggerModel.DebuggerModel): boolean {\n    return true;\n  }\n\n  selectedItemChanged(\n      _from: SDK.DebuggerModel.DebuggerModel|null, _to: SDK.DebuggerModel.DebuggerModel|null, fromElement: Element|null,\n      toElement: Element|null): void {\n    const fromEle = (fromElement as HTMLElement | null);\n    if (fromEle) {\n      fromEle.tabIndex = -1;\n    }\n    const toEle = (toElement as HTMLElement | null);\n    if (toEle) {\n      this.setDefaultFocusedElement(toEle);\n      toEle.tabIndex = 0;\n      if (this.hasFocus()) {\n        toEle.focus();\n      }\n    }\n  }\n\n  updateSelectedItemARIA(_fromElement: Element|null, _toElement: Element|null): boolean {\n    return false;\n  }\n\n  modelAdded(debuggerModel: SDK.DebuggerModel.DebuggerModel): void {\n    this.items.insert(this.items.length, debuggerModel);\n    const currentTarget = UI.Context.Context.instance().flavor(SDK.Target.Target);\n    if (currentTarget === debuggerModel.target()) {\n      this.list.selectItem(debuggerModel);\n    }\n  }\n\n  modelRemoved(debuggerModel: SDK.DebuggerModel.DebuggerModel): void {\n    this.items.remove(this.items.indexOf(debuggerModel));\n  }\n\n  private targetFlavorChanged({data: target}: Common.EventTarget.EventTargetEvent<SDK.Target.Target>): void {\n    const hadFocus = this.hasFocus();\n    const debuggerModel = target.model(SDK.DebuggerModel.DebuggerModel);\n    this.list.selectItem(debuggerModel);\n    if (debuggerModel) {\n      this.list.refreshItem(debuggerModel);\n    }\n    if (this.selectedModel !== null) {\n      this.list.refreshItem(this.selectedModel);\n    }\n    this.selectedModel = debuggerModel;\n    if (hadFocus) {\n      this.focus();\n    }\n  }\n}\n", "// Copyright 2025 The Chromium Authors. All rights reserved.\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\n// IMPORTANT: this file is auto generated. Please do not edit this file.\n/* istanbul ignore file */\nexport default `/*\n * Copyright 2017 The Chromium Authors. All rights reserved.\n * Use of this source code is governed by a BSD-style license that can be\n * found in the LICENSE file.\n */\n\n.thread-item {\n  padding: 3px 8px 3px 20px;\n  position: relative;\n  min-height: 18px;\n  line-height: 15px;\n  display: flex;\n  flex-wrap: wrap;\n}\n\n.thread-item + .thread-item {\n  border-top: 1px solid var(--sys-color-divider);\n}\n\n.thread-item:hover {\n  background-color: var(--sys-color-state-hover-on-subtle);\n}\n\n.thread-item:focus-visible {\n  background-color: var(--sys-color-tonal-container);\n}\n\n.thread-item-title,\n.thread-item-paused-state {\n  text-overflow: ellipsis;\n  overflow: hidden;\n  white-space: nowrap;\n}\n\n.thread-item-paused-state {\n  color: var(--sys-color-state-disabled);\n  margin-left: auto;\n  padding: 0 10px;\n}\n\n.selected-thread-icon {\n  display: none;\n  position: absolute;\n  top: 3px;\n  left: 4px;\n}\n\n.thread-item.selected .selected-thread-icon {\n  display: block;\n}\n\n@media (forced-colors: active) {\n  .thread-item:hover,\n  .thread-item:focus-visible {\n    forced-color-adjust: none;\n    background-color: Highlight;\n  }\n\n  .thread-item:hover > div,\n  .thread-item:focus-visible > div {\n    color: HighlightText;\n  }\n}\n\n/*# sourceURL=${import.meta.resolve('./threadsSidebarPane.css')} */`;", "/*\n * Copyright (C) 2013 Google Inc. All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are\n * met:\n *\n *     * Redistributions of source code must retain the above copyright\n * notice, this list of conditions and the following disclaimer.\n *     * Redistributions in binary form must reproduce the above\n * copyright notice, this list of conditions and the following disclaimer\n * in the documentation and/or other materials provided with the\n * distribution.\n *     * Neither the name of Google Inc. nor the names of its\n * contributors may be used to endorse or promote products derived from\n * this software without specific prior written permission.\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS\n * \"AS IS\" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT\n * LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR\n * A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT\n * OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,\n * SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT\n * LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,\n * DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY\n * THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE\n * OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */\n\nexport class FilePathScoreFunction {\n  private query: string;\n  private readonly queryUpperCase: string;\n  private score: Int32Array;\n  private sequence: Int32Array;\n  private dataUpperCase: string;\n  private fileNameIndex: number;\n\n  constructor(query: string) {\n    this.query = query;\n    this.queryUpperCase = query.toUpperCase();\n    this.score = new Int32Array(20 * 100);\n    this.sequence = new Int32Array(20 * 100);\n    this.dataUpperCase = '';\n    this.fileNameIndex = 0;\n  }\n\n  /**\n   * Calculates the score of a given data string against the query string.\n   *\n   * The score is calculated by comparing the characters of the query string to\n   * the characters of the data string. Characters that match are given a score\n   * of 10, while characters that don't match are given a score of 0. The score\n   * of a match is also influenced by the context of the match. For example,\n   * matching the beginning of the file name is worth more than matching a\n   * character in the middle of the file name.\n   *\n   * The score of a match is also influenced by the number of consecutive\n   * matches. The more consecutive matches there are, the higher the score.\n   *\n   * @param data The data string to score.\n   * @param matchIndexes An optional array to store the indexes of matching\n   * characters. If provided, it will be filled with the indexes of the matching\n   * characters in the data string.\n   * @returns The score of the data string.\n   */\n  calculateScore(data: string, matchIndexes: number[]|null): number {\n    if (!data || !this.query) {\n      return 0;\n    }\n    const queryLength = this.query.length;\n    const dataLength = data.length;\n    if (!this.score || this.score.length < queryLength * dataLength) {\n      this.score = new Int32Array(queryLength * dataLength * 2);\n      this.sequence = new Int32Array(queryLength * dataLength * 2);\n    }\n    const score = this.score;\n    const sequence = (this.sequence);\n    this.dataUpperCase = data.toUpperCase();\n    this.fileNameIndex = data.lastIndexOf('/');\n    for (let i = 0; i < queryLength; ++i) {\n      for (let j = 0; j < dataLength; ++j) {\n        const scoreIndex = i * dataLength + j;\n        const skipCharScore = j === 0 ? 0 : score[scoreIndex - 1];\n        const prevCharScore = i === 0 || j === 0 ? 0 : score[(i - 1) * dataLength + j - 1];\n        const consecutiveMatch = i === 0 || j === 0 ? 0 : sequence[(i - 1) * dataLength + j - 1];\n        const pickCharScore = this.match(this.query, data, i, j, consecutiveMatch);\n        if (pickCharScore && prevCharScore + pickCharScore >= skipCharScore) {\n          sequence[scoreIndex] = consecutiveMatch + 1;\n          score[scoreIndex] = (prevCharScore + pickCharScore);\n        } else {\n          sequence[scoreIndex] = 0;\n          score[scoreIndex] = skipCharScore;\n        }\n      }\n    }\n    if (matchIndexes) {\n      this.restoreMatchIndexes(sequence, queryLength, dataLength, matchIndexes);\n    }\n    const maxDataLength = 256;\n    return score[queryLength * dataLength - 1] * maxDataLength + (maxDataLength - data.length);\n  }\n\n  private testWordStart(data: string, j: number): boolean {\n    if (j === 0) {\n      return true;\n    }\n\n    const prevChar = data.charAt(j - 1);\n    return prevChar === '_' || prevChar === '-' || prevChar === '/' || prevChar === '.' || prevChar === ' ' ||\n        (data[j - 1] !== this.dataUpperCase[j - 1] && data[j] === this.dataUpperCase[j]);\n  }\n\n  private restoreMatchIndexes(sequence: Int32Array, queryLength: number, dataLength: number, out: number[]): void {\n    let i = queryLength - 1, j = dataLength - 1;\n    while (i >= 0 && j >= 0) {\n      switch (sequence[i * dataLength + j]) {\n        case 0:\n          --j;\n          break;\n        default:\n          out.push(j);\n          --i;\n          --j;\n          break;\n      }\n    }\n    out.reverse();\n  }\n\n  private singleCharScore(query: string, data: string, i: number, j: number): number {\n    const isWordStart = this.testWordStart(data, j);\n    const isFileName = j > this.fileNameIndex;\n    const isPathTokenStart = j === 0 || data[j - 1] === '/';\n    const isCapsMatch = query[i] === data[j] && query[i] === this.queryUpperCase[i];\n    let score = 10;\n    if (isPathTokenStart) {\n      score += 4;\n    }\n    if (isWordStart) {\n      score += 2;\n    }\n    if (isCapsMatch) {\n      score += 6;\n    }\n    if (isFileName) {\n      score += 4;\n    }\n    // promote the case of making the whole match in the filename\n    if (j === this.fileNameIndex + 1 && i === 0) {\n      score += 5;\n    }\n    if (isFileName && isWordStart) {\n      score += 3;\n    }\n    return score;\n  }\n\n  private sequenceCharScore(data: string, j: number, sequenceLength: number): number {\n    const isFileName = j > this.fileNameIndex;\n    const isPathTokenStart = j === 0 || data[j - 1] === '/';\n    let score = 10;\n    if (isFileName) {\n      score += 4;\n    }\n    if (isPathTokenStart) {\n      score += 5;\n    }\n    score += sequenceLength * 4;\n    return score;\n  }\n\n  private match(query: string, data: string, i: number, j: number, consecutiveMatch: number): number {\n    if (this.queryUpperCase[i] !== this.dataUpperCase[j]) {\n      return 0;\n    }\n\n    if (!consecutiveMatch) {\n      return this.singleCharScore(query, data, i, j);\n    }\n    return this.sequenceCharScore(data, j - consecutiveMatch, consecutiveMatch);\n  }\n}\n", "// Copyright 2012 The Chromium Authors. All rights reserved.\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\n\nimport type * as Common from '../../core/common/common.js';\nimport * as i18n from '../../core/i18n/i18n.js';\nimport * as Root from '../../core/root/root.js';\nimport * as Persistence from '../../models/persistence/persistence.js';\nimport * as Workspace from '../../models/workspace/workspace.js';\nimport * as QuickOpen from '../../ui/legacy/components/quick_open/quick_open.js';\nimport * as UI from '../../ui/legacy/legacy.js';\n\nimport {FilePathScoreFunction} from './FilePathScoreFunction.js';\n\nconst UIStrings = {\n  /**\n   * @description Text in Filtered UISource Code List Provider of the Sources panel\n   */\n  noFilesFound: 'No files found',\n  /**\n   * @description Name of an item that is on the ignore list\n   * @example {compile.html} PH1\n   */\n  sIgnoreListed: '{PH1} (ignore listed)',\n} as const;\nconst str_ = i18n.i18n.registerUIStrings('panels/sources/FilteredUISourceCodeListProvider.ts', UIStrings);\nconst i18nString = i18n.i18n.getLocalizedString.bind(undefined, str_);\nexport class FilteredUISourceCodeListProvider extends QuickOpen.FilteredListWidget.Provider {\n  private queryLineNumberAndColumnNumber: string;\n  private defaultScores: Map<Workspace.UISourceCode.UISourceCode, number>|null;\n  private scorer: FilePathScoreFunction;\n  private uiSourceCodes: Workspace.UISourceCode.UISourceCode[];\n  private readonly uiSourceCodeIds: Set<string>;\n  private query!: string;\n  constructor(jslogContext: string) {\n    super(jslogContext);\n\n    this.queryLineNumberAndColumnNumber = '';\n    this.defaultScores = null;\n    this.scorer = new FilePathScoreFunction('');\n\n    this.uiSourceCodes = [];\n    this.uiSourceCodeIds = new Set();\n  }\n\n  private projectRemoved(event: Common.EventTarget.EventTargetEvent<Workspace.Workspace.Project>): void {\n    const project = event.data;\n    this.populate(project);\n    this.refresh();\n  }\n\n  private populate(skipProject?: Workspace.Workspace.Project): void {\n    this.uiSourceCodes = [];\n    this.uiSourceCodeIds.clear();\n    for (const project of Workspace.Workspace.WorkspaceImpl.instance().projects()) {\n      if (project !== skipProject && this.filterProject(project)) {\n        for (const uiSourceCode of project.uiSourceCodes()) {\n          if (this.filterUISourceCode(uiSourceCode)) {\n            this.uiSourceCodes.push(uiSourceCode);\n            this.uiSourceCodeIds.add(uiSourceCode.canonicalScriptId());\n          }\n        }\n      }\n    }\n  }\n\n  private filterUISourceCode(uiSourceCode: Workspace.UISourceCode.UISourceCode): boolean {\n    if (this.uiSourceCodeIds.has(uiSourceCode.canonicalScriptId())) {\n      return false;\n    }\n    if (Root.Runtime.experiments.isEnabled(Root.Runtime.ExperimentName.JUST_MY_CODE) &&\n        Workspace.IgnoreListManager.IgnoreListManager.instance().isUserOrSourceMapIgnoreListedUISourceCode(\n            uiSourceCode)) {\n      return false;\n    }\n\n    if (uiSourceCode.isFetchXHR()) {\n      return false;\n    }\n\n    const binding = Persistence.Persistence.PersistenceImpl.instance().binding(uiSourceCode);\n    return !binding || binding.fileSystem === uiSourceCode;\n  }\n\n  uiSourceCodeSelected(\n      _uiSourceCode: Workspace.UISourceCode.UISourceCode|null, _lineNumber?: number, _columnNumber?: number): void {\n    // Overridden by subclasses\n  }\n\n  filterProject(_project: Workspace.Workspace.Project): boolean {\n    return true;\n    // Overridden by subclasses\n  }\n\n  override itemCount(): number {\n    return this.uiSourceCodes.length;\n  }\n\n  itemContentTypeAt(itemIndex: number): Common.ResourceType.ResourceType {\n    return this.uiSourceCodes[itemIndex].contentType();\n  }\n\n  override itemKeyAt(itemIndex: number): string {\n    return this.uiSourceCodes[itemIndex].url();\n  }\n\n  setDefaultScores(defaultScores: Map<Workspace.UISourceCode.UISourceCode, number>|null): void {\n    this.defaultScores = defaultScores;\n  }\n\n  override itemScoreAt(itemIndex: number, query: string): number {\n    const uiSourceCode = this.uiSourceCodes[itemIndex];\n    const score = this.defaultScores ? (this.defaultScores.get(uiSourceCode) || 0) : 0;\n    if (!query || query.length < 2) {\n      return score;\n    }\n\n    if (this.query !== query) {\n      this.query = query;\n      this.scorer = new FilePathScoreFunction(query);\n    }\n\n    let multiplier = 10;\n    if (uiSourceCode.project().type() === Workspace.Workspace.projectTypes.FileSystem &&\n        !Persistence.Persistence.PersistenceImpl.instance().binding(uiSourceCode)) {\n      multiplier = 5;\n    }\n\n    let contentTypeBonus = 0;\n    if (uiSourceCode.contentType().isFromSourceMap() && !uiSourceCode.isKnownThirdParty()) {\n      contentTypeBonus = 100;\n    }\n    if (uiSourceCode.contentType().isScript()) {\n      // Bonus points for being a script if it is not ignore-listed. Note\n      // that ignore listing logic does not apply to non-scripts.\n      if (!Workspace.IgnoreListManager.IgnoreListManager.instance().isUserOrSourceMapIgnoreListedUISourceCode(\n              uiSourceCode)) {\n        contentTypeBonus += 50;\n      }\n    }\n\n    const fullDisplayName = uiSourceCode.fullDisplayName();\n    return score + multiplier * (contentTypeBonus + this.scorer.calculateScore(fullDisplayName, null));\n  }\n\n  override renderItem(itemIndex: number, query: string, titleElement: Element, subtitleElement: Element): void {\n    titleElement.parentElement?.parentElement?.classList.toggle('search-mode', Boolean(query));\n    query = this.rewriteQuery(query);\n    const uiSourceCode = this.uiSourceCodes[itemIndex];\n    const fullDisplayName = uiSourceCode.fullDisplayName();\n    const indexes: number[] = [];\n    new FilePathScoreFunction(query).calculateScore(fullDisplayName, indexes);\n    const fileNameIndex = fullDisplayName.lastIndexOf('/');\n    const isIgnoreListed =\n        Workspace.IgnoreListManager.IgnoreListManager.instance().isUserOrSourceMapIgnoreListedUISourceCode(\n            uiSourceCode);\n    let tooltipText = fullDisplayName;\n\n    if (isIgnoreListed) {\n      titleElement.parentElement?.classList.add('is-ignore-listed');\n      tooltipText = i18nString(UIStrings.sIgnoreListed, {PH1: tooltipText});\n    }\n\n    titleElement.textContent = uiSourceCode.displayName() + (this.queryLineNumberAndColumnNumber || '');\n    this.renderSubtitleElement(subtitleElement, fullDisplayName.substring(0, fileNameIndex + 1));\n    UI.Tooltip.Tooltip.install((subtitleElement as HTMLElement), tooltipText);\n\n    const ranges = [];\n    for (let i = 0; i < indexes.length; ++i) {\n      ranges.push({offset: indexes[i], length: 1});\n    }\n\n    if (indexes[0] > fileNameIndex) {\n      for (let i = 0; i < ranges.length; ++i) {\n        ranges[i].offset -= fileNameIndex + 1;\n      }\n      UI.UIUtils.highlightRangesWithStyleClass(titleElement, ranges, 'highlight');\n    } else {\n      UI.UIUtils.highlightRangesWithStyleClass(subtitleElement, ranges, 'highlight');\n    }\n  }\n\n  private renderSubtitleElement(element: Element, text: string): void {\n    element.removeChildren();\n    let splitPosition = text.lastIndexOf('/');\n    const maxTextLength = 43;\n    if (text.length > maxTextLength) {\n      splitPosition = text.length - maxTextLength;\n    }\n    const first = element.createChild('div', 'first-part');\n    first.textContent = text.substring(0, splitPosition);\n    const second = element.createChild('div', 'second-part');\n    second.textContent = text.substring(splitPosition);\n    UI.Tooltip.Tooltip.install((element as HTMLElement), text);\n  }\n\n  override selectItem(itemIndex: number|null, promptValue: string): void {\n    const parsedExpression = promptValue.trim().match(/^([^:]*)(:\\d+)?(:\\d+)?$/);\n    if (!parsedExpression) {\n      return;\n    }\n\n    let lineNumber;\n    let columnNumber;\n    if (parsedExpression[2]) {\n      lineNumber = parseInt(parsedExpression[2].substr(1), 10) - 1;\n    }\n    if (parsedExpression[3]) {\n      columnNumber = parseInt(parsedExpression[3].substr(1), 10) - 1;\n    }\n    const uiSourceCode = itemIndex !== null ? this.uiSourceCodes[itemIndex] : null;\n    this.uiSourceCodeSelected(uiSourceCode, lineNumber, columnNumber);\n  }\n\n  override rewriteQuery(query: string): string {\n    query = query ? query.trim() : '';\n    if (!query || query === ':') {\n      return '';\n    }\n    const lineNumberMatch = query.match(/^([^:]+)((?::[^:]*){0,2})$/);\n    this.queryLineNumberAndColumnNumber = lineNumberMatch ? lineNumberMatch[2] : '';\n    return lineNumberMatch ? lineNumberMatch[1] : query;\n  }\n\n  private uiSourceCodeAdded(event: Common.EventTarget.EventTargetEvent<Workspace.UISourceCode.UISourceCode>): void {\n    const uiSourceCode = event.data;\n    if (!this.filterUISourceCode(uiSourceCode) || !this.filterProject(uiSourceCode.project())) {\n      return;\n    }\n    this.uiSourceCodes.push(uiSourceCode);\n    this.uiSourceCodeIds.add(uiSourceCode.canonicalScriptId());\n    this.refresh();\n  }\n\n  override notFoundText(): string {\n    return i18nString(UIStrings.noFilesFound);\n  }\n\n  override attach(): void {\n    Workspace.Workspace.WorkspaceImpl.instance().addEventListener(\n        Workspace.Workspace.Events.UISourceCodeAdded, this.uiSourceCodeAdded, this);\n    Workspace.Workspace.WorkspaceImpl.instance().addEventListener(\n        Workspace.Workspace.Events.ProjectRemoved, this.projectRemoved, this);\n    this.populate();\n  }\n\n  override detach(): void {\n    Workspace.Workspace.WorkspaceImpl.instance().removeEventListener(\n        Workspace.Workspace.Events.UISourceCodeAdded, this.uiSourceCodeAdded, this);\n    Workspace.Workspace.WorkspaceImpl.instance().removeEventListener(\n        Workspace.Workspace.Events.ProjectRemoved, this.projectRemoved, this);\n    this.queryLineNumberAndColumnNumber = '';\n    this.defaultScores = null;\n  }\n}\n", "// Copyright 2016 The Chromium Authors. All rights reserved.\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\n\nimport * as i18n from '../../core/i18n/i18n.js';\nimport * as IconButton from '../../ui/components/icon_button/icon_button.js';\nimport * as QuickOpen from '../../ui/legacy/components/quick_open/quick_open.js';\nimport * as UI from '../../ui/legacy/legacy.js';\n\nimport {SourcesView} from './SourcesView.js';\nimport type {UISourceCodeFrame} from './UISourceCodeFrame.js';\n\nconst UIStrings = {\n  /**\n   * @description Text in Go To Line Quick Open of the Sources panel\n   */\n  noFileSelected: 'No file selected',\n  /**\n   * @description Text to show no results have been found\n   */\n  noResultsFound: 'No results found',\n  /**\n   * @description Text in Go To Line Quick Open of the Sources panel\n   */\n  typeANumberToGoToThatLine: 'Type a number to go to that line',\n  /**\n   * @description Text in Go To Line Quick Open of the Sources panel\n   * @example {000} PH1\n   * @example {bbb} PH2\n   */\n  currentPositionXsTypeAnOffset: 'Type an offset between 0x{PH1} and 0x{PH2} to navigate to',\n  /**\n   * @description Text in the GoToLine dialog of the Sources pane that describes the current line number, file line number range, and use of the GoToLine dialog\n   * @example {100} PH1\n   */\n  currentLineSTypeALineNumber: 'Type a line number between 1 and {PH1} to navigate to',\n  /**\n   * @description Text in Go To Line Quick Open of the Sources panel\n   * @example {abc} PH1\n   */\n  goToOffsetXs: 'Go to offset 0x{PH1}',\n  /**\n   * @description Text in Go To Line Quick Open of the Sources panel\n   * @example {2} PH1\n   * @example {2} PH2\n   */\n  goToLineSAndColumnS: 'Go to line {PH1} and column {PH2}',\n  /**\n   * @description Text in Go To Line Quick Open of the Sources panel\n   * @example {2} PH1\n   */\n  goToLineS: 'Go to line {PH1}',\n} as const;\nconst str_ = i18n.i18n.registerUIStrings('panels/sources/GoToLineQuickOpen.ts', UIStrings);\nconst i18nString = i18n.i18n.getLocalizedString.bind(undefined, str_);\n\nexport class GoToLineQuickOpen extends QuickOpen.FilteredListWidget.Provider {\n  #goToLineStrings: string[] = [];\n\n  constructor() {\n    super('source-line');\n  }\n\n  override selectItem(_itemIndex: number|null, promptValue: string): void {\n    const sourceFrame = this.currentSourceFrame();\n    if (!sourceFrame) {\n      return;\n    }\n    const position = this.parsePosition(promptValue);\n    if (!position) {\n      return;\n    }\n    sourceFrame.revealPosition({lineNumber: position.line - 1, columnNumber: position.column - 1});\n  }\n\n  override itemCount(): number {\n    return this.#goToLineStrings.length;\n  }\n\n  override renderItem(itemIndex: number, _query: string, titleElement: Element, _subtitleElement: Element): void {\n    const icon = IconButton.Icon.create('colon');\n    titleElement.parentElement?.parentElement?.insertBefore(icon, titleElement.parentElement);\n    UI.UIUtils.createTextChild(titleElement, this.#goToLineStrings[itemIndex]);\n  }\n\n  override rewriteQuery(_query: string): string {\n    // For Go to Line Quick Open, we don't need to filter any item, set query to empty string, so the filter regex matching will be skipped\n    return '';\n  }\n\n  override queryChanged(query: string): void {\n    this.#goToLineStrings = [];\n    const position = this.parsePosition(query);\n    const sourceFrame = this.currentSourceFrame();\n    if (!position) {\n      if (!sourceFrame) {\n        this.#goToLineStrings.push(i18nString(UIStrings.typeANumberToGoToThatLine));\n        return;\n      }\n      const editorState = sourceFrame.textEditor.state;\n      const disassembly = sourceFrame.wasmDisassembly;\n      if (disassembly) {\n        const lastBytecodeOffset = disassembly.lineNumberToBytecodeOffset(disassembly.lineNumbers - 1);\n        const bytecodeOffsetDigits = lastBytecodeOffset.toString(16).length;\n        this.#goToLineStrings.push(i18nString(UIStrings.currentPositionXsTypeAnOffset, {\n          PH1: '0'.padStart(bytecodeOffsetDigits, '0'),\n          PH2: lastBytecodeOffset.toString(16),\n        }));\n        return;\n      }\n      const linesCount = sourceFrame.editorLocationToUILocation(editorState.doc.lines - 1).lineNumber + 1;\n      this.#goToLineStrings.push(i18nString(UIStrings.currentLineSTypeALineNumber, {PH1: linesCount}));\n      return;\n    }\n\n    if (sourceFrame?.wasmDisassembly) {\n      this.#goToLineStrings.push(i18nString(UIStrings.goToOffsetXs, {PH1: (position.column - 1).toString(16)}));\n      return;\n    }\n    if (position.column && position.column > 1) {\n      this.#goToLineStrings.push(i18nString(UIStrings.goToLineSAndColumnS, {PH1: position.line, PH2: position.column}));\n      return;\n    }\n    if (sourceFrame && position.line > sourceFrame.textEditor.state.doc.lines) {\n      return;\n    }\n    this.#goToLineStrings.push(i18nString(UIStrings.goToLineS, {PH1: position.line}));\n  }\n\n  override notFoundText(_query: string): string {\n    if (!this.currentSourceFrame()) {\n      return i18nString(UIStrings.noFileSelected);\n    }\n    return i18nString(UIStrings.noResultsFound);\n  }\n\n  private parsePosition(query: string): {\n    line: number,\n    column: number,\n  }|null {\n    const sourceFrame = this.currentSourceFrame();\n    if (sourceFrame?.wasmDisassembly) {\n      const parts = query.match(/0x([0-9a-fA-F]+)/);\n      if (!parts?.[0] || parts[0].length !== query.length) {\n        return null;\n      }\n\n      const column = parseInt(parts[0], 16) + 1;\n      return {line: 0, column};\n    }\n\n    const parts = query.match(/([0-9]+)(\\:[0-9]*)?/);\n    if (!parts?.[0] || parts[0].length !== query.length) {\n      return null;\n    }\n    const line = parseInt(parts[1], 10);\n    let column = 0;\n    if (parts[2]) {\n      column = parseInt(parts[2].substring(1), 10);\n    }\n    return {line: Math.max(line | 0, 1), column: Math.max(column | 0, 1)};\n  }\n\n  private currentSourceFrame(): UISourceCodeFrame|null {\n    const sourcesView = UI.Context.Context.instance().flavor(SourcesView);\n    if (!sourcesView) {\n      return null;\n    }\n    return sourcesView.currentSourceFrame();\n  }\n}\n", "// Copyright 2014 The Chromium Authors. All rights reserved.\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\n/* eslint-disable rulesdir/no-imperative-dom-api */\n\nimport * as Common from '../../core/common/common.js';\nimport * as i18n from '../../core/i18n/i18n.js';\nimport * as Formatter from '../../models/formatter/formatter.js';\nimport * as Persistence from '../../models/persistence/persistence.js';\nimport * as TextUtils from '../../models/text_utils/text_utils.js';\nimport * as Workspace from '../../models/workspace/workspace.js';\nimport * as UI from '../../ui/legacy/legacy.js';\n\nimport {\n  type EditorAction,\n  type EditorClosedEvent,\n  Events,\n  registerEditorAction,\n  type SourcesView,\n} from './SourcesView.js';\nimport type {UISourceCodeFrame} from './UISourceCodeFrame.js';\n\nconst UIStrings = {\n  /**\n   * @description Title of the format button in the Sources panel\n   * @example {file name} PH1\n   */\n  formatS: 'Format {PH1}',\n  /**\n   * @description Tooltip text that appears when hovering over the largeicon pretty print button in the Inplace Formatter Editor Action of the Sources panel\n   */\n  format: 'Format',\n} as const;\nconst str_ = i18n.i18n.registerUIStrings('panels/sources/InplaceFormatterEditorAction.ts', UIStrings);\nconst i18nString = i18n.i18n.getLocalizedString.bind(undefined, str_);\n\nlet inplaceFormatterEditorActionInstance: InplaceFormatterEditorAction;\n\nexport class InplaceFormatterEditorAction implements EditorAction {\n  private button!: UI.Toolbar.ToolbarButton;\n  private sourcesView!: SourcesView;\n  private uiSourceCodeTitleChangedEvent: Common.EventTarget.EventDescriptor|null = null;\n  static instance(opts: {\n    forceNew: boolean|null,\n  } = {forceNew: null}): InplaceFormatterEditorAction {\n    const {forceNew} = opts;\n    if (!inplaceFormatterEditorActionInstance || forceNew) {\n      inplaceFormatterEditorActionInstance = new InplaceFormatterEditorAction();\n    }\n\n    return inplaceFormatterEditorActionInstance;\n  }\n\n  private editorSelected(event: Common.EventTarget.EventTargetEvent<Workspace.UISourceCode.UISourceCode>): void {\n    const uiSourceCode = event.data;\n    this.updateButton(uiSourceCode);\n  }\n\n  private editorClosed(event: Common.EventTarget.EventTargetEvent<EditorClosedEvent>): void {\n    const {wasSelected} = event.data;\n    if (wasSelected) {\n      this.updateButton(null);\n    }\n  }\n\n  private updateButton(uiSourceCode: Workspace.UISourceCode.UISourceCode|null): void {\n    if (this.uiSourceCodeTitleChangedEvent) {\n      Common.EventTarget.removeEventListeners([this.uiSourceCodeTitleChangedEvent]);\n    }\n    this.uiSourceCodeTitleChangedEvent = uiSourceCode ?\n        uiSourceCode.addEventListener(\n            Workspace.UISourceCode.Events.TitleChanged, event => this.updateButton(event.data), this) :\n        null;\n    const isFormattable = this.isFormattable(uiSourceCode);\n    this.button.element.classList.toggle('hidden', !isFormattable);\n    if (uiSourceCode && isFormattable) {\n      this.button.setTitle(i18nString(UIStrings.formatS, {PH1: uiSourceCode.name()}));\n    }\n  }\n\n  getOrCreateButton(sourcesView: SourcesView): UI.Toolbar.ToolbarButton {\n    if (this.button) {\n      return this.button;\n    }\n\n    this.sourcesView = sourcesView;\n    this.sourcesView.addEventListener(Events.EDITOR_SELECTED, this.editorSelected.bind(this));\n    this.sourcesView.addEventListener(Events.EDITOR_CLOSED, this.editorClosed.bind(this));\n\n    this.button = new UI.Toolbar.ToolbarButton(i18nString(UIStrings.format), 'brackets');\n    this.button.addEventListener(UI.Toolbar.ToolbarButton.Events.CLICK, this.formatSourceInPlace, this);\n    this.updateButton(sourcesView.currentUISourceCode());\n\n    return this.button;\n  }\n\n  private isFormattable(uiSourceCode: Workspace.UISourceCode.UISourceCode|null): boolean {\n    if (!uiSourceCode) {\n      return false;\n    }\n    if (uiSourceCode.project().canSetFileContent()) {\n      return true;\n    }\n    if (Persistence.Persistence.PersistenceImpl.instance().binding(uiSourceCode) !== null) {\n      return true;\n    }\n    return false;\n  }\n\n  private formatSourceInPlace(): void {\n    const sourceFrame = this.sourcesView.currentSourceFrame();\n    if (!sourceFrame) {\n      return;\n    }\n    const uiSourceCode = sourceFrame.uiSourceCode();\n    if (!this.isFormattable(uiSourceCode)) {\n      return;\n    }\n\n    if (uiSourceCode.isDirty()) {\n      void this.contentLoaded(uiSourceCode, sourceFrame, uiSourceCode.workingCopy());\n    } else {\n      void uiSourceCode.requestContentData()\n          .then(contentDataOrError => TextUtils.ContentData.ContentData.textOr(contentDataOrError, ''))\n          .then(content => {\n            void this.contentLoaded(uiSourceCode, sourceFrame, content);\n          });\n    }\n  }\n\n  private async contentLoaded(\n      uiSourceCode: Workspace.UISourceCode.UISourceCode, sourceFrame: UISourceCodeFrame,\n      content: string): Promise<void> {\n    const {formattedContent, formattedMapping} =\n        await Formatter.ScriptFormatter.format(uiSourceCode.contentType(), sourceFrame.contentType, content);\n    if (uiSourceCode.workingCopy() === formattedContent) {\n      return;\n    }\n    const selection = sourceFrame.textEditor.toLineColumn(sourceFrame.textEditor.state.selection.main.head);\n    const [lineNumber, columnNumber] =\n        formattedMapping.originalToFormatted(selection.lineNumber, selection.columnNumber);\n    uiSourceCode.setWorkingCopy(formattedContent);\n    this.sourcesView.showSourceLocation(uiSourceCode, {lineNumber, columnNumber});\n  }\n}\n\nregisterEditorAction(InplaceFormatterEditorAction.instance);\n", "// Copyright 2012 The Chromium Authors. All rights reserved.\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\n/* eslint-disable rulesdir/no-imperative-dom-api */\n\nimport * as Common from '../../core/common/common.js';\nimport * as Host from '../../core/host/host.js';\nimport type * as Workspace from '../../models/workspace/workspace.js';\nimport {PanelUtils} from '../../panels/utils/utils.js';\nimport * as IconButton from '../../ui/components/icon_button/icon_button.js';\n\nimport {FilteredUISourceCodeListProvider} from './FilteredUISourceCodeListProvider.js';\nimport {SourcesView} from './SourcesView.js';\n\nexport class OpenFileQuickOpen extends FilteredUISourceCodeListProvider {\n  constructor() {\n    super('source-file');\n  }\n\n  override attach(): void {\n    this.setDefaultScores(SourcesView.defaultUISourceCodeScores());\n    super.attach();\n  }\n\n  override uiSourceCodeSelected(\n      uiSourceCode: Workspace.UISourceCode.UISourceCode|null, lineNumber?: number, columnNumber?: number): void {\n    Host.userMetrics.actionTaken(Host.UserMetrics.Action.SelectFileFromFilePicker);\n\n    if (!uiSourceCode) {\n      return;\n    }\n    if (typeof lineNumber === 'number') {\n      void Common.Revealer.reveal(uiSourceCode.uiLocation(lineNumber, columnNumber));\n    } else {\n      void Common.Revealer.reveal(uiSourceCode);\n    }\n  }\n\n  override filterProject(project: Workspace.Workspace.Project): boolean {\n    return !project.isServiceProject();\n  }\n\n  override renderItem(itemIndex: number, query: string, titleElement: Element, subtitleElement: Element): void {\n    super.renderItem(itemIndex, query, titleElement, subtitleElement);\n\n    const iconElement = new IconButton.Icon.Icon();\n    const iconData = PanelUtils.iconDataForResourceType(this.itemContentTypeAt(itemIndex));\n    iconElement.data = {\n      ...iconData,\n      width: '18px',\n      height: '18px',\n    };\n    titleElement.parentElement?.parentElement?.insertBefore(iconElement, titleElement.parentElement);\n  }\n\n  override renderAsTwoRows(): boolean {\n    return true;\n  }\n}\n", "// Copyright 2017 The Chromium Authors. All rights reserved.\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\n\nimport * as i18n from '../../core/i18n/i18n.js';\nimport * as CodeMirror from '../../third_party/codemirror.next/codemirror.next.js';\nimport * as IconButton from '../../ui/components/icon_button/icon_button.js';\nimport * as QuickOpen from '../../ui/legacy/components/quick_open/quick_open.js';\nimport * as UI from '../../ui/legacy/legacy.js';\n\nimport {SourcesView} from './SourcesView.js';\nimport type {UISourceCodeFrame} from './UISourceCodeFrame.js';\n\nconst UIStrings = {\n  /**\n   * @description Text in Go To Line Quick Open of the Sources panel\n   */\n  noFileSelected: 'No file selected.',\n  /**\n   * @description Text in Outline Quick Open of the Sources panel\n   */\n  openAJavascriptOrCssFileToSee: 'Open a JavaScript or CSS file to see symbols',\n  /**\n   * @description Text to show no results have been found\n   */\n  noResultsFound: 'No results found',\n} as const;\nconst str_ = i18n.i18n.registerUIStrings('panels/sources/OutlineQuickOpen.ts', UIStrings);\nconst i18nString = i18n.i18n.getLocalizedString.bind(undefined, str_);\n\nexport interface OutlineItem {\n  title: string;\n  lineNumber: number;\n  columnNumber: number;\n  subtitle?: string;\n}\n\nexport function outline(state: CodeMirror.EditorState): OutlineItem[] {\n  function toLineColumn(offset: number): {lineNumber: number, columnNumber: number} {\n    offset = Math.max(0, Math.min(offset, state.doc.length));\n    const line = state.doc.lineAt(offset);\n    return {lineNumber: line.number - 1, columnNumber: offset - line.from};\n  }\n\n  function subtitleFromParamList(): string {\n    while (cursor.name !== 'ParamList') {\n      cursor.nextSibling();\n    }\n    let parameters = '';\n    if (cursor.name === 'ParamList' && cursor.firstChild()) {\n      do {\n        switch (cursor.name as string) {\n          case 'ArrayPattern':\n            parameters += '[‥]';\n            break;\n          case 'ObjectPattern':\n            parameters += '{‥}';\n            break;\n          case 'VariableDefinition':\n            parameters += state.sliceDoc(cursor.from, cursor.to);\n            break;\n          case 'Spread':\n            parameters += '...';\n            break;\n          case ',':\n            parameters += ', ';\n            break;\n        }\n      } while (cursor.nextSibling());\n    }\n    return `(${parameters})`;\n  }\n\n  const tree = CodeMirror.syntaxTree(state);\n  const items: OutlineItem[] = [];\n  const cursor = tree.cursor();\n  do {\n    switch (cursor.name) {\n      // css.grammar\n      case 'RuleSet': {\n        for (cursor.firstChild();; cursor.nextSibling()) {\n          const title = state.sliceDoc(cursor.from, cursor.to);\n          const {lineNumber, columnNumber} = toLineColumn(cursor.from);\n          items.push({title, lineNumber, columnNumber});\n          cursor.nextSibling();\n          if (cursor.name as string !== ',') {\n            break;\n          }\n        }\n        break;\n      }\n      // javascript.grammar\n      case 'FunctionDeclaration':\n      case 'MethodDeclaration': {\n        let prefix = '';\n        cursor.firstChild();\n        do {\n          switch (cursor.name as string) {\n            case 'abstract':\n            case 'async':\n            case 'get':\n            case 'set':\n            case 'static':\n              prefix = `${prefix}${cursor.name} `;\n              break;\n            case 'Star':\n              prefix += '*';\n              break;\n            case 'PropertyDefinition':\n            case 'PrivatePropertyDefinition':\n            case 'VariableDefinition': {\n              const title = prefix + state.sliceDoc(cursor.from, cursor.to);\n              const {lineNumber, columnNumber} = toLineColumn(cursor.from);\n              const subtitle = subtitleFromParamList();\n              items.push({title, subtitle, lineNumber, columnNumber});\n              break;\n            }\n          }\n        } while (cursor.nextSibling());\n        break;\n      }\n      case 'Property': {\n        let prefix = '';\n        cursor.firstChild();\n        do {\n          if (cursor.name as string === 'async' || cursor.name as string === 'get' || cursor.name as string === 'set') {\n            prefix = `${prefix}${cursor.name} `;\n          } else if (cursor.name as string === 'Star') {\n            prefix += '*';\n          } else if (cursor.name as string === 'PropertyDefinition') {\n            let title = state.sliceDoc(cursor.from, cursor.to);\n            const {lineNumber, columnNumber} = toLineColumn(cursor.from);\n            while (cursor.nextSibling()) {\n              if (cursor.name as string === 'ClassExpression') {\n                title = `class ${title}`;\n                items.push({title, lineNumber, columnNumber});\n                break;\n              }\n              if (cursor.name as string === 'ArrowFunction' || cursor.name as string === 'FunctionExpression') {\n                cursor.firstChild();\n              }\n              if (cursor.name as string === 'async') {\n                prefix = `async ${prefix}`;\n              } else if (cursor.name as string === 'Star') {\n                prefix += '*';\n              } else if (cursor.name as string === 'ParamList') {\n                title = prefix + title;\n                const subtitle = subtitleFromParamList();\n                items.push({title, subtitle, lineNumber, columnNumber});\n                break;\n              }\n            }\n            break;\n          } else {\n            // We don't support any other Property syntax.\n            break;\n          }\n        } while (cursor.nextSibling());\n        break;\n      }\n      case 'PropertyName':\n      case 'VariableDefinition': {\n        if (cursor.matchContext(['ClassDeclaration'])) {\n          const title = 'class ' + state.sliceDoc(cursor.from, cursor.to);\n          const {lineNumber, columnNumber} = toLineColumn(cursor.from);\n          items.push({title, lineNumber, columnNumber});\n        } else if (\n            cursor.matchContext([\n              'AssignmentExpression',\n              'MemberExpression',\n            ]) ||\n            cursor.matchContext([\n              'VariableDeclaration',\n            ])) {\n          let title = state.sliceDoc(cursor.from, cursor.to);\n          const {lineNumber, columnNumber} = toLineColumn(cursor.from);\n          while (cursor.name as string !== 'Equals') {\n            if (!cursor.next()) {\n              return items;\n            }\n          }\n          if (!cursor.nextSibling()) {\n            break;\n          }\n          if (cursor.name as string === 'ArrowFunction' || cursor.name as string === 'FunctionExpression') {\n            cursor.firstChild();\n            let prefix = '';\n            while (cursor.name as string !== 'ParamList') {\n              if (cursor.name as string === 'async') {\n                prefix = `async ${prefix}`;\n              } else if (cursor.name as string === 'Star') {\n                prefix += '*';\n              }\n              if (!cursor.nextSibling()) {\n                break;\n              }\n            }\n            title = prefix + title;\n            const subtitle = subtitleFromParamList();\n            items.push({title, subtitle, lineNumber, columnNumber});\n          } else if (cursor.name as string === 'ClassExpression') {\n            title = `class ${title}`;\n            items.push({title, lineNumber, columnNumber});\n          }\n        }\n        break;\n      }\n      // wast.grammar\n      case 'App': {\n        if (cursor.firstChild() && cursor.nextSibling() && state.sliceDoc(cursor.from, cursor.to) === 'module') {\n          if (cursor.nextSibling() && cursor.name as string === 'Identifier') {\n            const title = state.sliceDoc(cursor.from, cursor.to);\n            const {lineNumber, columnNumber} = toLineColumn(cursor.from);\n            items.push({title, lineNumber, columnNumber});\n          }\n          do {\n            if (cursor.name as string === 'App' && cursor.firstChild()) {\n              if (cursor.nextSibling() && state.sliceDoc(cursor.from, cursor.to) === 'func' && cursor.nextSibling() &&\n                  cursor.name as string === 'Identifier') {\n                const title = state.sliceDoc(cursor.from, cursor.to);\n                const {lineNumber, columnNumber} = toLineColumn(cursor.from);\n                const params = [];\n                while (cursor.nextSibling()) {\n                  if (cursor.name as string === 'App' && cursor.firstChild()) {\n                    if (cursor.nextSibling() && state.sliceDoc(cursor.from, cursor.to) === 'param') {\n                      if (cursor.nextSibling() && cursor.name as string === 'Identifier') {\n                        params.push(state.sliceDoc(cursor.from, cursor.to));\n                      } else {\n                        params.push(`$${params.length}`);\n                      }\n                    }\n                    cursor.parent();\n                  }\n                }\n                const subtitle = `(${params.join(', ')})`;\n                items.push({title, subtitle, lineNumber, columnNumber});\n              }\n              cursor.parent();\n            }\n          } while (cursor.nextSibling());\n        }\n        break;\n      }\n      // cpp.grammar\n      case 'FieldIdentifier':\n      case 'Identifier': {\n        if (cursor.matchContext(['FunctionDeclarator'])) {\n          const title = state.sliceDoc(cursor.from, cursor.to);\n          const {lineNumber, columnNumber} = toLineColumn(cursor.from);\n          items.push({title, lineNumber, columnNumber});\n        }\n        break;\n      }\n      case 'TypeIdentifier': {\n        if (cursor.matchContext(['ClassSpecifier'])) {\n          const title = `class ${state.sliceDoc(cursor.from, cursor.to)}`;\n          const {lineNumber, columnNumber} = toLineColumn(cursor.from);\n          items.push({title, lineNumber, columnNumber});\n        } else if (cursor.matchContext(['StructSpecifier'])) {\n          const title = `struct ${state.sliceDoc(cursor.from, cursor.to)}`;\n          const {lineNumber, columnNumber} = toLineColumn(cursor.from);\n          items.push({title, lineNumber, columnNumber});\n        }\n        break;\n      }\n      default:\n        break;\n    }\n  } while (cursor.next());\n  return items;\n}\n\nexport class OutlineQuickOpen extends QuickOpen.FilteredListWidget.Provider {\n  private items: OutlineItem[] = [];\n  private active = false;\n\n  constructor() {\n    super('source-symbol');\n  }\n\n  override attach(): void {\n    const sourceFrame = this.currentSourceFrame();\n    if (sourceFrame) {\n      this.active = true;\n      this.items = outline(sourceFrame.textEditor.state).map(({title, subtitle, lineNumber, columnNumber}) => {\n        ({lineNumber, columnNumber} = sourceFrame.editorLocationToUILocation(lineNumber, columnNumber));\n        return {title, subtitle, lineNumber, columnNumber};\n      });\n    } else {\n      this.active = false;\n      this.items = [];\n    }\n  }\n\n  override detach(): void {\n    this.active = false;\n    this.items = [];\n  }\n\n  override itemCount(): number {\n    return this.items.length;\n  }\n\n  override itemKeyAt(itemIndex: number): string {\n    const item = this.items[itemIndex];\n    return item.title + (item.subtitle ? item.subtitle : '');\n  }\n\n  override itemScoreAt(itemIndex: number, query: string): number {\n    const item = this.items[itemIndex];\n    const methodName = query.split('(')[0];\n    if (methodName.toLowerCase() === item.title.toLowerCase()) {\n      return 1 / (1 + item.lineNumber);\n    }\n    return -item.lineNumber - 1;\n  }\n\n  override renderItem(itemIndex: number, query: string, titleElement: Element, _subtitleElement: Element): void {\n    const item = this.items[itemIndex];\n    const icon = IconButton.Icon.create('deployed');\n    titleElement.parentElement?.parentElement?.insertBefore(icon, titleElement.parentElement);\n    titleElement.textContent = item.title + (item.subtitle ? item.subtitle : '');\n    QuickOpen.FilteredListWidget.FilteredListWidget.highlightRanges(titleElement, query);\n\n    const sourceFrame = this.currentSourceFrame();\n    if (!sourceFrame) {\n      return;\n    }\n\n    const tagElement = titleElement.parentElement?.parentElement?.createChild('span', 'tag');\n    if (!tagElement) {\n      return;\n    }\n\n    const disassembly = sourceFrame.wasmDisassembly;\n    if (disassembly) {\n      const lastBytecodeOffset = disassembly.lineNumberToBytecodeOffset(disassembly.lineNumbers - 1);\n      const bytecodeOffsetDigits = lastBytecodeOffset.toString(16).length;\n      tagElement.textContent = `:0x${item.columnNumber.toString(16).padStart(bytecodeOffsetDigits, '0')}`;\n    } else {\n      tagElement.textContent = `:${item.lineNumber + 1}`;\n    }\n  }\n\n  override selectItem(itemIndex: number|null, _promptValue: string): void {\n    if (itemIndex === null) {\n      return;\n    }\n    const sourceFrame = this.currentSourceFrame();\n    if (!sourceFrame) {\n      return;\n    }\n    const item = this.items[itemIndex];\n    sourceFrame.revealPosition({lineNumber: item.lineNumber, columnNumber: item.columnNumber}, true);\n  }\n\n  private currentSourceFrame(): UISourceCodeFrame|null {\n    const sourcesView = UI.Context.Context.instance().flavor(SourcesView);\n    return sourcesView?.currentSourceFrame() ?? null;\n  }\n\n  override notFoundText(): string {\n    if (!this.currentSourceFrame()) {\n      return i18nString(UIStrings.noFileSelected);\n    }\n    if (!this.active) {\n      return i18nString(UIStrings.openAJavascriptOrCssFileToSee);\n    }\n    return i18nString(UIStrings.noResultsFound);\n  }\n}\n", "// Copyright 2021 The Chromium Authors. All rights reserved.\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\n/* eslint-disable rulesdir/no-imperative-dom-api */\n\n/*\n * Copyright (C) 2008 Apple Inc. All Rights Reserved.\n * Copyright (C) 2011 Google Inc. All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions\n * are met:\n * 1. Redistributions of source code must retain the above copyright\n *    notice, this list of conditions and the following disclaimer.\n * 2. Redistributions in binary form must reproduce the above copyright\n *    notice, this list of conditions and the following disclaimer in the\n *    documentation and/or other materials provided with the distribution.\n *\n * THIS SOFTWARE IS PROVIDED BY APPLE INC. ``AS IS'' AND ANY\n * EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE\n * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR\n * PURPOSE ARE DISCLAIMED.  IN NO EVENT SHALL APPLE INC. OR\n * CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,\n * EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,\n * PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR\n * PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY\n * OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE\n * OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */\n\nimport type * as Common from '../../core/common/common.js';\nimport * as i18n from '../../core/i18n/i18n.js';\nimport * as SDK from '../../core/sdk/sdk.js';\nimport * as Protocol from '../../generated/protocol.js';\nimport * as SourceMapScopes from '../../models/source_map_scopes/source_map_scopes.js';\nimport * as ObjectUI from '../../ui/legacy/components/object_ui/object_ui.js';\nimport * as Components from '../../ui/legacy/components/utils/utils.js';\nimport * as UI from '../../ui/legacy/legacy.js';\nimport * as VisualLogging from '../../ui/visual_logging/visual_logging.js';\n\nimport scopeChainSidebarPaneStyles from './scopeChainSidebarPane.css.js';\n\nconst UIStrings = {\n  /**\n   * @description Loading indicator in Scope Sidebar Pane of the Sources panel\n   */\n  loading: 'Loading…',\n  /**\n   * @description Not paused message element text content in Call Stack Sidebar Pane of the Sources panel\n   */\n  notPaused: 'Not paused',\n  /**\n   * @description Empty placeholder in Scope Chain Sidebar Pane of the Sources panel\n   */\n  noVariables: 'No variables',\n  /**\n   * @description Text in the Sources panel Scope pane describing a closure scope.\n   * @example {func} PH1\n   */\n  closureS: 'Closure ({PH1})',\n  /**\n   * @description Text that refers to closure as a programming term\n   */\n  closure: 'Closure',\n} as const;\nconst str_ = i18n.i18n.registerUIStrings('panels/sources/ScopeChainSidebarPane.ts', UIStrings);\nconst i18nString = i18n.i18n.getLocalizedString.bind(undefined, str_);\nlet scopeChainSidebarPaneInstance: ScopeChainSidebarPane;\n\nexport class ScopeChainSidebarPane extends UI.Widget.VBox implements UI.ContextFlavorListener.ContextFlavorListener {\n  private readonly treeOutline: ObjectUI.ObjectPropertiesSection.ObjectPropertiesSectionsTreeOutline;\n  private readonly expandController: ObjectUI.ObjectPropertiesSection.ObjectPropertiesSectionsTreeExpandController;\n  private readonly linkifier: Components.Linkifier.Linkifier;\n  private infoElement: HTMLDivElement;\n  #scopeChainModel: SourceMapScopes.ScopeChainModel.ScopeChainModel|null = null;\n\n  private constructor() {\n    super({\n      jslog: `${VisualLogging.section('sources.scope-chain')}`,\n      useShadowDom: true,\n    });\n    this.registerRequiredCSS(scopeChainSidebarPaneStyles);\n\n    this.treeOutline = new ObjectUI.ObjectPropertiesSection.ObjectPropertiesSectionsTreeOutline();\n    this.treeOutline.registerRequiredCSS(scopeChainSidebarPaneStyles);\n    this.treeOutline.hideOverflow();\n\n    this.treeOutline.setShowSelectionOnKeyboardFocus(/* show */ true);\n    this.expandController =\n        new ObjectUI.ObjectPropertiesSection.ObjectPropertiesSectionsTreeExpandController(this.treeOutline);\n    this.linkifier = new Components.Linkifier.Linkifier();\n    this.infoElement = document.createElement('div');\n    this.infoElement.className = 'gray-info-message';\n    this.infoElement.tabIndex = -1;\n    this.flavorChanged(UI.Context.Context.instance().flavor(SDK.DebuggerModel.CallFrame));\n  }\n\n  static instance(): ScopeChainSidebarPane {\n    if (!scopeChainSidebarPaneInstance) {\n      scopeChainSidebarPaneInstance = new ScopeChainSidebarPane();\n    }\n    return scopeChainSidebarPaneInstance;\n  }\n\n  flavorChanged(callFrame: SDK.DebuggerModel.CallFrame|null): void {\n    this.#scopeChainModel?.dispose();\n    this.#scopeChainModel = null;\n\n    this.linkifier.reset();\n    this.contentElement.removeChildren();\n    this.contentElement.appendChild(this.infoElement);\n\n    if (callFrame) {\n      // Resolving the scope may take a while to complete, so indicate to the user that something\n      // is happening (see https://crbug.com/1162416).\n      this.infoElement.textContent = i18nString(UIStrings.loading);\n\n      this.#scopeChainModel = new SourceMapScopes.ScopeChainModel.ScopeChainModel(callFrame);\n      this.#scopeChainModel.addEventListener(\n          SourceMapScopes.ScopeChainModel.Events.SCOPE_CHAIN_UPDATED, event => this.buildScopeTreeOutline(event.data),\n          this);\n    } else {\n      this.infoElement.textContent = i18nString(UIStrings.notPaused);\n    }\n  }\n\n  override focus(): void {\n    if (this.hasFocus()) {\n      return;\n    }\n\n    if (UI.Context.Context.instance().flavor(SDK.DebuggerModel.DebuggerPausedDetails)) {\n      this.treeOutline.forceSelect();\n    }\n  }\n\n  private buildScopeTreeOutline(eventScopeChain: SourceMapScopes.ScopeChainModel.ScopeChain): void {\n    const {scopeChain} = eventScopeChain;\n\n    this.treeOutline.removeChildren();\n\n    this.contentElement.removeChildren();\n    this.contentElement.appendChild(this.treeOutline.element);\n    let foundLocalScope = false;\n    for (const [i, scope] of scopeChain.entries()) {\n      if (scope.type() === Protocol.Debugger.ScopeType.Local) {\n        foundLocalScope = true;\n      }\n\n      const section = this.createScopeSectionTreeElement(scope);\n      if (scope.type() === Protocol.Debugger.ScopeType.Global) {\n        section.collapse();\n      } else if (!foundLocalScope || scope.type() === Protocol.Debugger.ScopeType.Local) {\n        section.expand();\n      }\n\n      this.treeOutline.appendChild(section);\n      if (i === 0) {\n        section.select(/* omitFocus */ true);\n      }\n    }\n    this.sidebarPaneUpdatedForTest();\n  }\n\n  private createScopeSectionTreeElement(scope: SDK.DebuggerModel.ScopeChainEntry):\n      ObjectUI.ObjectPropertiesSection.RootElement {\n    let emptyPlaceholder: Common.UIString.LocalizedString|null = null;\n    if (scope.type() === Protocol.Debugger.ScopeType.Local || scope.type() === Protocol.Debugger.ScopeType.Closure) {\n      emptyPlaceholder = i18nString(UIStrings.noVariables);\n    }\n\n    let title = scope.typeName();\n    if (scope.type() === Protocol.Debugger.ScopeType.Closure) {\n      const scopeName = scope.name();\n      if (scopeName) {\n        title = i18nString(UIStrings.closureS, {PH1: UI.UIUtils.beautifyFunctionName(scopeName)});\n      } else {\n        title = i18nString(UIStrings.closure);\n      }\n    }\n    let subtitle: string|null = scope.description();\n    if (!title || title === subtitle) {\n      subtitle = null;\n    }\n    const icon = scope.icon();\n\n    const titleElement = document.createElement('div');\n    titleElement.classList.add('scope-chain-sidebar-pane-section-header');\n    titleElement.classList.add('tree-element-title');\n    if (icon) {\n      const iconElement = document.createElement('img');\n      iconElement.classList.add('scope-chain-sidebar-pane-section-icon');\n      iconElement.src = icon;\n      titleElement.appendChild(iconElement);\n    }\n    titleElement.createChild('div', 'scope-chain-sidebar-pane-section-subtitle').textContent = subtitle;\n    titleElement.createChild('div', 'scope-chain-sidebar-pane-section-title').textContent = title;\n\n    const section = new ObjectUI.ObjectPropertiesSection.RootElement(\n        scope.object(), this.linkifier, emptyPlaceholder, ObjectUI.ObjectPropertiesSection.ObjectPropertiesMode.ALL,\n        scope.extraProperties());\n    section.title = titleElement;\n    section.listItemElement.classList.add('scope-chain-sidebar-pane-section');\n    section.listItemElement.setAttribute('aria-label', title);\n    this.expandController.watchSection(title + (subtitle ? ':' + subtitle : ''), section);\n\n    return section;\n  }\n\n  private sidebarPaneUpdatedForTest(): void {\n  }\n}\n", "// Copyright 2025 The Chromium Authors. All rights reserved.\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\n// IMPORTANT: this file is auto generated. Please do not edit this file.\n/* istanbul ignore file */\nexport default `/*\n * Copyright 2017 The Chromium Authors. All rights reserved.\n * Use of this source code is governed by a BSD-style license that can be\n * found in the LICENSE file.\n */\n\n.scope-chain-sidebar-pane-section-header {\n  flex: auto;\n}\n\n.scope-chain-sidebar-pane-section-icon {\n  float: left;\n  margin-right: 5px;\n}\n\n.scope-chain-sidebar-pane-section-subtitle {\n  float: right;\n  margin-left: 5px;\n  max-width: 55%;\n  text-overflow: ellipsis;\n  overflow: hidden;\n}\n\n.scope-chain-sidebar-pane-section-title {\n  font-weight: normal;\n  word-wrap: break-word;\n  white-space: normal;\n}\n\n.scope-chain-sidebar-pane-section {\n  padding: 2px 4px;\n  flex: none;\n}\n\n/*# sourceURL=${import.meta.resolve('./scopeChainSidebarPane.css')} */`;", "/*\n * Copyright (C) 2011 Google Inc. All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are\n * met:\n *\n *     * Redistributions of source code must retain the above copyright\n * notice, this list of conditions and the following disclaimer.\n *     * Redistributions in binary form must reproduce the above\n * copyright notice, this list of conditions and the following disclaimer\n * in the documentation and/or other materials provided with the\n * distribution.\n *     * Neither the name of Google Inc. nor the names of its\n * contributors may be used to endorse or promote products derived from\n * this software without specific prior written permission.\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS\n * \"AS IS\" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT\n * LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR\n * A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT\n * OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,\n * SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT\n * LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,\n * DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY\n * THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE\n * OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */\n\n/* eslint-disable rulesdir/no-imperative-dom-api */\n\nimport '../../ui/legacy/legacy.js';\n\nimport * as Common from '../../core/common/common.js';\nimport * as Host from '../../core/host/host.js';\nimport * as i18n from '../../core/i18n/i18n.js';\nimport * as Platform from '../../core/platform/platform.js';\nimport * as SDK from '../../core/sdk/sdk.js';\nimport * as Bindings from '../../models/bindings/bindings.js';\nimport * as Persistence from '../../models/persistence/persistence.js';\nimport * as TextUtils from '../../models/text_utils/text_utils.js';\nimport * as Workspace from '../../models/workspace/workspace.js';\nimport * as UI from '../../ui/legacy/legacy.js';\nimport * as Snippets from '../snippets/snippets.js';\n\nimport {type NavigatorUISourceCodeTreeNode, NavigatorView} from './NavigatorView.js';\nimport sourcesNavigatorStyles from './sourcesNavigator.css.js';\n\nconst UIStrings = {\n  /**\n   * @description Text to show if no workspaces are set up. https://goo.gle/devtools-workspace\n   */\n  noWorkspace: 'No workspaces set up',\n  /**\n   * @description Text to explain the Workspace feature in the Sources panel. https://goo.gle/devtools-workspace\n   */\n  explainWorkspace: 'Set up workspaces to sync edits directly to the sources you develop.',\n  /**\n   * @description Text to show if no local overrides are set up. https://goo.gle/devtools-overrides\n   */\n  noLocalOverrides: 'No local overrides set up',\n  /**\n   * @description Text to explain the Local Overrides feature. https://goo.gle/devtools-overrides\n   */\n  explainLocalOverrides: 'Override network requests and web content locally to mock remote resources.',\n  /**\n   * @description Tooltip text that appears when hovering over the largeicon clear button in the Sources Navigator of the Sources panel\n   */\n  clearConfiguration: 'Clear configuration',\n  /**\n   * @description Text in Sources Navigator of the Sources panel\n   */\n  selectFolderForOverrides: 'Select folder for overrides',\n  /**\n   * @description Text to show if no content scripts can be found in the Sources panel. https://developer.chrome.com/extensions/content_scripts\n   */\n  noContentScripts: 'No content scripts detected',\n  /**\n   * @description Text to explain the content scripts pane in the Sources panel\n   */\n  explainContentScripts: 'View content scripts served by extensions.',\n  /**\n   * @description Text to show if no snippets were created and saved in the Sources panel https://goo.gle/devtools-snippets\n   */\n  noSnippets: 'No snippets saved',\n  /**\n   * @description Text to explain the Snippets feature in the Sources panel https://goo.gle/devtools-snippets\n   */\n  explainSnippets: 'Save the JavaScript code you run often in a snippet to run it again anytime.',\n  /**\n   * @description Text in Sources Navigator of the Sources panel\n   */\n  newSnippet: 'New snippet',\n  /**\n   * @description Title of an action in the sources tool to create snippet\n   */\n  createNewSnippet: 'Create new snippet',\n  /**\n   * @description A context menu item in the Sources Navigator of the Sources panel\n   */\n  run: 'Run',\n  /**\n   * @description A context menu item in the Navigator View of the Sources panel\n   */\n  rename: 'Rename…',\n  /**\n   * @description Label for an item to remove something\n   */\n  remove: 'Remove',\n  /**\n   * @description Text to save content as a specific file type\n   */\n  saveAs: 'Save as…',\n  /**\n   * @description An error message logged to the Console panel when the user uses\n   *              the \"Save as…\" context menu in the Sources panel and the operation\n   *              fails.\n   */\n  saveAsFailed: 'Failed to save file to disk.',\n  /**\n   * @description Message shown in the Workspace tab of the Sources panel to nudge\n   *              developers into utilizing the Automatic Workspace Folders feature\n   *              in Chrome DevTools by setting up a `com.chrome.devtools.json`\n   *              file / endpoint in their project. This nudge is only shown when\n   *              the feature is enabled and there's no automatic workspace folder\n   *              detected.\n   * @example {com.chrome.devtools.json} PH1\n   */\n  automaticWorkspaceNudge: 'Use {PH1} to automatically connect your project folder',\n} as const;\nconst str_ = i18n.i18n.registerUIStrings('panels/sources/SourcesNavigator.ts', UIStrings);\nconst i18nString = i18n.i18n.getLocalizedString.bind(undefined, str_);\nlet networkNavigatorViewInstance: NetworkNavigatorView;\n\nexport class NetworkNavigatorView extends NavigatorView {\n  private constructor() {\n    super('navigator-network', true);\n    this.registerRequiredCSS(sourcesNavigatorStyles);\n    SDK.TargetManager.TargetManager.instance().addEventListener(\n        SDK.TargetManager.Events.INSPECTED_URL_CHANGED, this.inspectedURLChanged, this);\n\n    // Record the sources tool load time after the file navigator has loaded.\n    Host.userMetrics.panelLoaded('sources', 'DevTools.Launch.Sources');\n    SDK.TargetManager.TargetManager.instance().addScopeChangeListener(this.onScopeChange.bind(this));\n  }\n\n  static instance(opts: {\n    forceNew: boolean|null,\n  } = {forceNew: null}): NetworkNavigatorView {\n    const {forceNew} = opts;\n    if (!networkNavigatorViewInstance || forceNew) {\n      networkNavigatorViewInstance = new NetworkNavigatorView();\n    }\n\n    return networkNavigatorViewInstance;\n  }\n\n  override acceptProject(project: Workspace.Workspace.Project): boolean {\n    return project.type() === Workspace.Workspace.projectTypes.Network &&\n        SDK.TargetManager.TargetManager.instance().isInScope(\n            Bindings.NetworkProject.NetworkProject.getTargetForProject(project));\n  }\n\n  onScopeChange(): void {\n    for (const project of Workspace.Workspace.WorkspaceImpl.instance().projects()) {\n      if (!this.acceptProject(project)) {\n        this.removeProject(project);\n      } else {\n        this.tryAddProject(project);\n      }\n    }\n  }\n\n  private inspectedURLChanged(event: Common.EventTarget.EventTargetEvent<SDK.Target.Target>): void {\n    const mainTarget = SDK.TargetManager.TargetManager.instance().scopeTarget();\n    if (event.data !== mainTarget) {\n      return;\n    }\n    const inspectedURL = mainTarget && mainTarget.inspectedURL();\n    if (!inspectedURL) {\n      return;\n    }\n    for (const uiSourceCode of this.workspace().uiSourceCodes()) {\n      if (this.acceptProject(uiSourceCode.project()) && uiSourceCode.url() === inspectedURL) {\n        this.revealUISourceCode(uiSourceCode, true);\n      }\n    }\n  }\n\n  override uiSourceCodeAdded(uiSourceCode: Workspace.UISourceCode.UISourceCode): void {\n    const mainTarget = SDK.TargetManager.TargetManager.instance().scopeTarget();\n    const inspectedURL = mainTarget && mainTarget.inspectedURL();\n    if (!inspectedURL) {\n      return;\n    }\n    if (uiSourceCode.url() === inspectedURL) {\n      this.revealUISourceCode(uiSourceCode, true);\n    }\n  }\n}\n\nexport class FilesNavigatorView extends NavigatorView {\n  #automaticFileSystemManager = Persistence.AutomaticFileSystemManager.AutomaticFileSystemManager.instance();\n  #eventListeners: Common.EventTarget.EventDescriptor[] = [];\n  #automaticFileSystemNudge: HTMLSpanElement;\n\n  constructor() {\n    super('navigator-files');\n    this.registerRequiredCSS(sourcesNavigatorStyles);\n    const placeholder =\n        new UI.EmptyWidget.EmptyWidget(i18nString(UIStrings.noWorkspace), i18nString(UIStrings.explainWorkspace));\n    this.setPlaceholder(placeholder);\n    placeholder.link = 'https://developer.chrome.com/docs/devtools/workspaces/' as Platform.DevToolsPath.UrlString;\n\n    const link =\n        UI.XLink.XLink.create('https://goo.gle/devtools-automatic-workspace-folders', 'com.chrome.devtools.json');\n    this.#automaticFileSystemNudge =\n        i18n.i18n.getFormatLocalizedString(str_, UIStrings.automaticWorkspaceNudge, {PH1: link});\n    this.#automaticFileSystemNudge.classList.add('automatic-file-system-nudge');\n    this.contentElement.insertBefore(this.#automaticFileSystemNudge, this.contentElement.firstChild);\n\n    const toolbar = document.createElement('devtools-toolbar');\n    toolbar.classList.add('navigator-toolbar');\n    void toolbar.appendItemsAtLocation('files-navigator-toolbar').then(() => {\n      if (!toolbar.empty()) {\n        this.contentElement.insertBefore(toolbar, this.contentElement.firstChild);\n      }\n    });\n  }\n\n  override wasShown(): void {\n    super.wasShown();\n    this.#eventListeners = [\n      this.#automaticFileSystemManager.addEventListener(\n          Persistence.AutomaticFileSystemManager.Events.AUTOMATIC_FILE_SYSTEM_CHANGED, this.#automaticFileSystemChanged,\n          this),\n      this.#automaticFileSystemManager.addEventListener(\n          Persistence.AutomaticFileSystemManager.Events.AVAILABILITY_CHANGED, this.#availabilityChanged, this),\n    ];\n    this.#automaticFileSystemChanged({data: this.#automaticFileSystemManager.automaticFileSystem});\n  }\n\n  override willHide(): void {\n    Common.EventTarget.removeEventListeners(this.#eventListeners);\n    this.#automaticFileSystemChanged({data: null});\n    super.willHide();\n  }\n\n  override sourceSelected(uiSourceCode: Workspace.UISourceCode.UISourceCode, focusSource: boolean): void {\n    Host.userMetrics.actionTaken(Host.UserMetrics.Action.WorkspaceSourceSelected);\n    super.sourceSelected(uiSourceCode, focusSource);\n  }\n\n  override acceptProject(project: Workspace.Workspace.Project): boolean {\n    if (project.type() === Workspace.Workspace.projectTypes.ConnectableFileSystem) {\n      return true;\n    }\n    return project.type() === Workspace.Workspace.projectTypes.FileSystem &&\n        Persistence.FileSystemWorkspaceBinding.FileSystemWorkspaceBinding.fileSystemType(project) !== 'overrides' &&\n        !Snippets.ScriptSnippetFileSystem.isSnippetsProject(project);\n  }\n\n  override handleContextMenu(event: Event): void {\n    const contextMenu = new UI.ContextMenu.ContextMenu(event);\n    contextMenu.defaultSection().appendAction('sources.add-folder-to-workspace', undefined, true);\n    void contextMenu.show();\n  }\n\n  #automaticFileSystemChanged(\n      _event: Common.EventTarget.EventTargetEvent<Persistence.AutomaticFileSystemManager.AutomaticFileSystem|null>):\n      void {\n    this.#availabilityChanged({data: this.#automaticFileSystemManager.availability});\n  }\n\n  #availabilityChanged(\n      event:\n          Common.EventTarget.EventTargetEvent<Persistence.AutomaticFileSystemManager.AutomaticFileSystemAvailability>):\n      void {\n    const availability = event.data;\n    const {automaticFileSystem} = this.#automaticFileSystemManager;\n    this.#automaticFileSystemNudge.hidden = automaticFileSystem !== null || availability !== 'available';\n  }\n}\n\nlet overridesNavigatorViewInstance: OverridesNavigatorView;\n\nexport class OverridesNavigatorView extends NavigatorView {\n  private readonly toolbar: UI.Toolbar.Toolbar;\n  private constructor() {\n    super('navigator-overrides');\n    const placeholder = new UI.EmptyWidget.EmptyWidget(\n        i18nString(UIStrings.noLocalOverrides), i18nString(UIStrings.explainLocalOverrides));\n    this.setPlaceholder(placeholder);\n    placeholder.link = 'https://developer.chrome.com/docs/devtools/overrides/' as Platform.DevToolsPath.UrlString;\n\n    this.toolbar = document.createElement('devtools-toolbar');\n    this.toolbar.classList.add('navigator-toolbar');\n\n    this.contentElement.insertBefore(this.toolbar, this.contentElement.firstChild);\n\n    Persistence.NetworkPersistenceManager.NetworkPersistenceManager.instance().addEventListener(\n        Persistence.NetworkPersistenceManager.Events.PROJECT_CHANGED, this.updateProjectAndUI, this);\n    this.workspace().addEventListener(Workspace.Workspace.Events.ProjectAdded, this.onProjectAddOrRemoved, this);\n    this.workspace().addEventListener(Workspace.Workspace.Events.ProjectRemoved, this.onProjectAddOrRemoved, this);\n    this.updateProjectAndUI();\n  }\n\n  static instance(opts: {\n    forceNew: boolean|null,\n  } = {forceNew: null}): OverridesNavigatorView {\n    const {forceNew} = opts;\n    if (!overridesNavigatorViewInstance || forceNew) {\n      overridesNavigatorViewInstance = new OverridesNavigatorView();\n    }\n\n    return overridesNavigatorViewInstance;\n  }\n\n  private onProjectAddOrRemoved(event: Common.EventTarget.EventTargetEvent<Workspace.Workspace.Project>): void {\n    const project = event.data;\n    if (project && project.type() === Workspace.Workspace.projectTypes.FileSystem &&\n        Persistence.FileSystemWorkspaceBinding.FileSystemWorkspaceBinding.fileSystemType(project) !== 'overrides') {\n      return;\n    }\n    this.updateUI();\n  }\n\n  private updateProjectAndUI(): void {\n    this.reset();\n    const project = Persistence.NetworkPersistenceManager.NetworkPersistenceManager.instance().project();\n    if (project) {\n      this.tryAddProject(project);\n    }\n    this.updateUI();\n  }\n\n  private updateUI(): void {\n    this.toolbar.removeToolbarItems();\n    const project = Persistence.NetworkPersistenceManager.NetworkPersistenceManager.instance().project();\n    if (project) {\n      const enableCheckbox = new UI.Toolbar.ToolbarSettingCheckbox(\n          Common.Settings.Settings.instance().moduleSetting('persistence-network-overrides-enabled'));\n      this.toolbar.appendToolbarItem(enableCheckbox);\n\n      this.toolbar.appendToolbarItem(new UI.Toolbar.ToolbarSeparator(true));\n      const clearButton = new UI.Toolbar.ToolbarButton(i18nString(UIStrings.clearConfiguration), 'clear');\n      clearButton.addEventListener(UI.Toolbar.ToolbarButton.Events.CLICK, () => {\n        Common.Settings.Settings.instance().moduleSetting('persistence-network-overrides-enabled').set(false);\n        project.remove();\n      });\n      this.toolbar.appendToolbarItem(clearButton);\n      return;\n    }\n    const title = i18nString(UIStrings.selectFolderForOverrides);\n    const setupButton = new UI.Toolbar.ToolbarButton(title, 'plus', title);\n    setupButton.addEventListener(UI.Toolbar.ToolbarButton.Events.CLICK, _event => {\n      void this.setupNewWorkspace();\n    }, this);\n    this.toolbar.appendToolbarItem(setupButton);\n  }\n\n  async setupNewWorkspace(): Promise<void> {\n    const fileSystem =\n        await Persistence.IsolatedFileSystemManager.IsolatedFileSystemManager.instance().addFileSystem('overrides');\n    if (!fileSystem) {\n      return;\n    }\n    Common.Settings.Settings.instance().moduleSetting('persistence-network-overrides-enabled').set(true);\n  }\n\n  override sourceSelected(uiSourceCode: Workspace.UISourceCode.UISourceCode, focusSource: boolean): void {\n    Host.userMetrics.actionTaken(Host.UserMetrics.Action.OverridesSourceSelected);\n    super.sourceSelected(uiSourceCode, focusSource);\n  }\n\n  override acceptProject(project: Workspace.Workspace.Project): boolean {\n    return project === Persistence.NetworkPersistenceManager.NetworkPersistenceManager.instance().project();\n  }\n}\n\nexport class ContentScriptsNavigatorView extends NavigatorView {\n  constructor() {\n    super('navigator-content-scripts');\n    const placeholder = new UI.EmptyWidget.EmptyWidget(\n        i18nString(UIStrings.noContentScripts), i18nString(UIStrings.explainContentScripts));\n    this.setPlaceholder(placeholder);\n    placeholder.link = 'https://developer.chrome.com/extensions/content_scripts' as Platform.DevToolsPath.UrlString;\n  }\n\n  override acceptProject(project: Workspace.Workspace.Project): boolean {\n    return project.type() === Workspace.Workspace.projectTypes.ContentScripts;\n  }\n}\n\nexport class SnippetsNavigatorView extends NavigatorView {\n  constructor() {\n    super('navigator-snippets');\n    const placeholder =\n        new UI.EmptyWidget.EmptyWidget(i18nString(UIStrings.noSnippets), i18nString(UIStrings.explainSnippets));\n    this.setPlaceholder(placeholder);\n    placeholder.link =\n        'https://developer.chrome.com/docs/devtools/javascript/snippets/' as Platform.DevToolsPath.UrlString;\n\n    const toolbar = document.createElement('devtools-toolbar');\n    toolbar.classList.add('navigator-toolbar');\n    const newButton = new UI.Toolbar.ToolbarButton(\n        i18nString(UIStrings.newSnippet), 'plus', i18nString(UIStrings.newSnippet), 'sources.new-snippet');\n    newButton.addEventListener(UI.Toolbar.ToolbarButton.Events.CLICK, _event => {\n      void this.create(\n          Snippets.ScriptSnippetFileSystem.findSnippetsProject(), '' as Platform.DevToolsPath.EncodedPathString);\n    });\n    toolbar.appendToolbarItem(newButton);\n    this.contentElement.insertBefore(toolbar, this.contentElement.firstChild);\n  }\n\n  override acceptProject(project: Workspace.Workspace.Project): boolean {\n    return Snippets.ScriptSnippetFileSystem.isSnippetsProject(project);\n  }\n\n  override handleContextMenu(event: Event): void {\n    const contextMenu = new UI.ContextMenu.ContextMenu(event);\n    contextMenu.headerSection().appendItem(\n        i18nString(UIStrings.createNewSnippet),\n        () => this.create(\n            Snippets.ScriptSnippetFileSystem.findSnippetsProject(), '' as Platform.DevToolsPath.EncodedPathString),\n        {jslogContext: 'create-new-snippet'});\n    void contextMenu.show();\n  }\n\n  override handleFileContextMenu(event: Event, node: NavigatorUISourceCodeTreeNode): void {\n    const uiSourceCode = node.uiSourceCode();\n    const contextMenu = new UI.ContextMenu.ContextMenu(event);\n    contextMenu.headerSection().appendItem(\n        i18nString(UIStrings.run), () => Snippets.ScriptSnippetFileSystem.evaluateScriptSnippet(uiSourceCode),\n        {jslogContext: 'run'});\n    contextMenu.editSection().appendItem(\n        i18nString(UIStrings.rename), () => this.rename(node, false), {jslogContext: 'rename'});\n    contextMenu.editSection().appendItem(\n        i18nString(UIStrings.remove), () => uiSourceCode.project().deleteFile(uiSourceCode), {jslogContext: 'remove'});\n    contextMenu.saveSection().appendItem(\n        i18nString(UIStrings.saveAs), this.handleSaveAs.bind(this, uiSourceCode), {jslogContext: 'save-as'});\n    void contextMenu.show();\n  }\n\n  private async handleSaveAs(uiSourceCode: Workspace.UISourceCode.UISourceCode): Promise<void> {\n    uiSourceCode.commitWorkingCopy();\n    const contentData = await uiSourceCode.requestContentData();\n    if (TextUtils.ContentData.ContentData.isError(contentData)) {\n      console.error(`Failed to retrieve content for ${uiSourceCode.url()}: ${contentData}`);\n      Common.Console.Console.instance().error(i18nString(UIStrings.saveAsFailed), /* show=*/ false);\n      return;\n    }\n    await Workspace.FileManager.FileManager.instance().save(\n        this.addJSExtension(uiSourceCode.url()), contentData, /* forceSaveAs=*/ true);\n    Workspace.FileManager.FileManager.instance().close(uiSourceCode.url());\n  }\n\n  private addJSExtension(url: Platform.DevToolsPath.UrlString): Platform.DevToolsPath.UrlString {\n    return Common.ParsedURL.ParsedURL.concatenate(url, '.js');\n  }\n}\n\nexport class ActionDelegate implements UI.ActionRegistration.ActionDelegate {\n  handleAction(_context: UI.Context.Context, actionId: string): boolean {\n    switch (actionId) {\n      case 'sources.create-snippet':\n        void Snippets.ScriptSnippetFileSystem.findSnippetsProject()\n            .createFile(Platform.DevToolsPath.EmptyEncodedPathString, null, '')\n            .then(uiSourceCode => Common.Revealer.reveal(uiSourceCode));\n        return true;\n      case 'sources.add-folder-to-workspace':\n        void Persistence.IsolatedFileSystemManager.IsolatedFileSystemManager.instance().addFileSystem();\n        return true;\n    }\n    return false;\n  }\n}\n", "// Copyright 2025 The Chromium Authors. All rights reserved.\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\n// IMPORTANT: this file is auto generated. Please do not edit this file.\n/* istanbul ignore file */\nexport default `/*\n * Copyright 2022 The Chromium Authors. All rights reserved.\n * Use of this source code is governed by a BSD-style license that can be\n * found in the LICENSE file.\n */\n\n.border-container {\n  border-bottom: 1px solid var(--sys-color-divider);\n  flex-shrink: 0;\n}\n\n.automatic-workspace-infobar {\n  border-top: var(--sys-size-1) solid var(--sys-color-divider);\n}\n\n.automatic-file-system-nudge {\n  flex-shrink: 0;\n  font-style: italic;\n  border-bottom: var(--sys-size-1) solid var(--sys-color-divider);\n  padding: var(--sys-size-3);\n  text-align: center;\n  color: var(--sys-color-on-surface-subtle);\n}\n\n/*# sourceURL=${import.meta.resolve('./sourcesNavigator.css')} */`;", "// Copyright 2021 The Chromium Authors. All rights reserved.\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\n/* eslint-disable rulesdir/no-imperative-dom-api */\n\n/*\n * Copyright (C) IBM Corp. 2009  All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are\n * met:\n *\n *     * Redistributions of source code must retain the above copyright\n * notice, this list of conditions and the following disclaimer.\n *     * Redistributions in binary form must reproduce the above\n * copyright notice, this list of conditions and the following disclaimer\n * in the documentation and/or other materials provided with the\n * distribution.\n *     * Neither the name of IBM Corp. nor the names of its\n * contributors may be used to endorse or promote products derived from\n * this software without specific prior written permission.\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS\n * \"AS IS\" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT\n * LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR\n * A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT\n * OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,\n * SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT\n * LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,\n * DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY\n * THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE\n * OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */\n\nimport * as Common from '../../core/common/common.js';\nimport * as Host from '../../core/host/host.js';\nimport * as i18n from '../../core/i18n/i18n.js';\nimport * as Platform from '../../core/platform/platform.js';\nimport * as SDK from '../../core/sdk/sdk.js';\nimport type * as Protocol from '../../generated/protocol.js';\nimport * as Formatter from '../../models/formatter/formatter.js';\nimport * as SourceMapScopes from '../../models/source_map_scopes/source_map_scopes.js';\nimport * as Buttons from '../../ui/components/buttons/buttons.js';\nimport * as ObjectUI from '../../ui/legacy/components/object_ui/object_ui.js';\n// eslint-disable-next-line rulesdir/es-modules-import\nimport objectValueStyles from '../../ui/legacy/components/object_ui/objectValue.css.js';\nimport * as Components from '../../ui/legacy/components/utils/utils.js';\nimport * as UI from '../../ui/legacy/legacy.js';\nimport * as VisualLogging from '../../ui/visual_logging/visual_logging.js';\n\nimport {UISourceCodeFrame} from './UISourceCodeFrame.js';\nimport watchExpressionsSidebarPaneStyles from './watchExpressionsSidebarPane.css.js';\n\nconst UIStrings = {\n  /**\n   * @description A context menu item in the Watch Expressions Sidebar Pane of the Sources panel\n   */\n  addWatchExpression: 'Add watch expression',\n  /**\n   * @description Tooltip/screen reader label of a button in the Sources panel that refreshes all watch expressions.\n   */\n  refreshWatchExpressions: 'Refresh watch expressions',\n  /**\n   * @description Empty element text content in Watch Expressions Sidebar Pane of the Sources panel\n   */\n  noWatchExpressions: 'No watch expressions',\n  /**\n   * @description A context menu item in the Watch Expressions Sidebar Pane of the Sources panel\n   */\n  deleteAllWatchExpressions: 'Delete all watch expressions',\n  /**\n   * @description A context menu item in the Watch Expressions Sidebar Pane of the Sources panel\n   */\n  addPropertyPathToWatch: 'Add property path to watch',\n  /**\n   * @description A context menu item in the Watch Expressions Sidebar Pane of the Sources panel\n   */\n  deleteWatchExpression: 'Delete watch expression',\n  /**\n   * @description Value element text content in Watch Expressions Sidebar Pane of the Sources panel\n   */\n  notAvailable: '<not available>',\n  /**\n   * @description A context menu item in the Watch Expressions Sidebar Pane of the Sources panel and Network pane request.\n   */\n  copyValue: 'Copy value',\n  /**\n   * @description announcement for when watch expression is deleted\n   */\n  watchExpressionDeleted: 'Watch expression deleted',\n} as const;\nconst str_ = i18n.i18n.registerUIStrings('panels/sources/WatchExpressionsSidebarPane.ts', UIStrings);\nconst i18nString = i18n.i18n.getLocalizedString.bind(undefined, str_);\nlet watchExpressionsSidebarPaneInstance: WatchExpressionsSidebarPane;\n\nexport class WatchExpressionsSidebarPane extends UI.ThrottledWidget.ThrottledWidget implements\n    UI.ActionRegistration.ActionDelegate, UI.Toolbar.ItemsProvider,\n    UI.ContextMenu.Provider<ObjectUI.ObjectPropertiesSection.ObjectPropertyTreeElement|UISourceCodeFrame> {\n  private watchExpressions: WatchExpression[];\n  private emptyElement!: HTMLElement;\n  private readonly watchExpressionsSetting: Common.Settings.Setting<string[]>;\n  private readonly addButton: UI.Toolbar.ToolbarButton;\n  private readonly refreshButton: UI.Toolbar.ToolbarButton;\n  private readonly treeOutline: ObjectUI.ObjectPropertiesSection.ObjectPropertiesSectionsTreeOutline;\n  private readonly expandController: ObjectUI.ObjectPropertiesSection.ObjectPropertiesSectionsTreeExpandController;\n  private readonly linkifier: Components.Linkifier.Linkifier;\n  private constructor() {\n    super(true);\n    this.registerRequiredCSS(watchExpressionsSidebarPaneStyles, objectValueStyles);\n\n    // TODO(szuend): Replace with a Set once the web test\n    // panels/sources/debugger-ui/watch-expressions-preserve-expansion.js is either converted\n    // to an e2e test or no longer accesses this variable directly.\n    this.watchExpressions = [];\n    this.watchExpressionsSetting =\n        Common.Settings.Settings.instance().createLocalSetting<string[]>('watch-expressions', []);\n\n    this.addButton = new UI.Toolbar.ToolbarButton(\n        i18nString(UIStrings.addWatchExpression), 'plus', undefined, 'add-watch-expression');\n    this.addButton.setSize(Buttons.Button.Size.SMALL);\n    this.addButton.addEventListener(UI.Toolbar.ToolbarButton.Events.CLICK, _event => {\n      void this.addButtonClicked();\n    });\n    this.refreshButton = new UI.Toolbar.ToolbarButton(\n        i18nString(UIStrings.refreshWatchExpressions), 'refresh', undefined, 'refresh-watch-expressions');\n    this.refreshButton.setSize(Buttons.Button.Size.SMALL);\n    this.refreshButton.addEventListener(UI.Toolbar.ToolbarButton.Events.CLICK, this.update, this);\n\n    this.contentElement.classList.add('watch-expressions');\n    this.contentElement.setAttribute('jslog', `${VisualLogging.section('sources.watch')}`);\n    this.contentElement.addEventListener('contextmenu', this.contextMenu.bind(this), false);\n    this.treeOutline = new ObjectUI.ObjectPropertiesSection.ObjectPropertiesSectionsTreeOutline();\n    this.treeOutline.registerRequiredCSS(watchExpressionsSidebarPaneStyles);\n    this.treeOutline.hideOverflow();\n\n    this.treeOutline.setShowSelectionOnKeyboardFocus(/* show */ true);\n    this.expandController =\n        new ObjectUI.ObjectPropertiesSection.ObjectPropertiesSectionsTreeExpandController(this.treeOutline);\n\n    UI.Context.Context.instance().addFlavorChangeListener(SDK.RuntimeModel.ExecutionContext, this.update, this);\n    UI.Context.Context.instance().addFlavorChangeListener(SDK.DebuggerModel.CallFrame, this.update, this);\n    this.linkifier = new Components.Linkifier.Linkifier();\n    this.update();\n  }\n\n  static instance(): WatchExpressionsSidebarPane {\n    if (!watchExpressionsSidebarPaneInstance) {\n      watchExpressionsSidebarPaneInstance = new WatchExpressionsSidebarPane();\n    }\n    return watchExpressionsSidebarPaneInstance;\n  }\n\n  toolbarItems(): UI.Toolbar.ToolbarItem[] {\n    return [this.addButton, this.refreshButton];\n  }\n\n  override focus(): void {\n    if (this.hasFocus()) {\n      return;\n    }\n    if (this.watchExpressions.length > 0) {\n      this.treeOutline.forceSelect();\n    }\n  }\n\n  private saveExpressions(): void {\n    const toSave = [];\n    for (let i = 0; i < this.watchExpressions.length; i++) {\n      const expression = this.watchExpressions[i].expression();\n      if (expression) {\n        toSave.push(expression);\n      }\n    }\n\n    this.watchExpressionsSetting.set(toSave);\n  }\n\n  private async addButtonClicked(): Promise<void> {\n    await UI.ViewManager.ViewManager.instance().showView('sources.watch');\n    this.emptyElement.classList.add('hidden');\n    this.createWatchExpression(null).startEditing();\n  }\n\n  override async doUpdate(): Promise<void> {\n    this.linkifier.reset();\n    this.contentElement.removeChildren();\n    this.treeOutline.removeChildren();\n    this.watchExpressions = [];\n    this.emptyElement = this.contentElement.createChild('div', 'gray-info-message');\n    this.emptyElement.textContent = i18nString(UIStrings.noWatchExpressions);\n    this.emptyElement.tabIndex = -1;\n    const watchExpressionStrings = this.watchExpressionsSetting.get();\n    if (watchExpressionStrings.length) {\n      this.emptyElement.classList.add('hidden');\n    }\n    for (let i = 0; i < watchExpressionStrings.length; ++i) {\n      const expression = watchExpressionStrings[i];\n      if (!expression) {\n        continue;\n      }\n\n      this.createWatchExpression(expression);\n    }\n  }\n\n  private createWatchExpression(expression: string|null): WatchExpression {\n    this.contentElement.appendChild(this.treeOutline.element);\n    const watchExpression = new WatchExpression(expression, this.expandController, this.linkifier);\n    UI.ARIAUtils.setLabel(this.contentElement, i18nString(UIStrings.addWatchExpression));\n    watchExpression.addEventListener(Events.EXPRESSION_UPDATED, this.watchExpressionUpdated, this);\n    this.treeOutline.appendChild(watchExpression.treeElement());\n    this.watchExpressions.push(watchExpression);\n    return watchExpression;\n  }\n\n  private watchExpressionUpdated({data: watchExpression}: Common.EventTarget.EventTargetEvent<WatchExpression>): void {\n    if (!watchExpression.expression()) {\n      Platform.ArrayUtilities.removeElement(this.watchExpressions, watchExpression);\n      this.treeOutline.removeChild(watchExpression.treeElement());\n      this.emptyElement.classList.toggle('hidden', Boolean(this.watchExpressions.length));\n      if (this.watchExpressions.length === 0) {\n        this.treeOutline.element.remove();\n      }\n    }\n\n    this.saveExpressions();\n  }\n\n  private contextMenu(event: MouseEvent): void {\n    const contextMenu = new UI.ContextMenu.ContextMenu(event);\n    this.populateContextMenu(contextMenu, event);\n    void contextMenu.show();\n  }\n\n  private populateContextMenu(contextMenu: UI.ContextMenu.ContextMenu, event: MouseEvent): void {\n    let isEditing = false;\n    for (const watchExpression of this.watchExpressions) {\n      isEditing = isEditing || watchExpression.isEditing();\n    }\n\n    if (!isEditing) {\n      contextMenu.debugSection().appendItem(\n          i18nString(UIStrings.addWatchExpression), this.addButtonClicked.bind(this),\n          {jslogContext: 'add-watch-expression'});\n    }\n\n    if (this.watchExpressions.length > 1) {\n      contextMenu.debugSection().appendItem(\n          i18nString(UIStrings.deleteAllWatchExpressions), this.deleteAllButtonClicked.bind(this),\n          {jslogContext: 'delete-all-watch-expressions'});\n    }\n\n    const treeElement = this.treeOutline.treeElementFromEvent(event);\n    if (!treeElement) {\n      return;\n    }\n    const currentWatchExpression =\n        this.watchExpressions.find(watchExpression => treeElement.hasAncestorOrSelf(watchExpression.treeElement()));\n    if (currentWatchExpression) {\n      currentWatchExpression.populateContextMenu(contextMenu, event);\n    }\n  }\n\n  private deleteAllButtonClicked(): void {\n    this.watchExpressions = [];\n    this.saveExpressions();\n    this.update();\n  }\n\n  private async focusAndAddExpressionToWatch(expression: string): Promise<void> {\n    await UI.ViewManager.ViewManager.instance().showView('sources.watch');\n    this.createWatchExpression(expression);\n    this.saveExpressions();\n    this.update();\n  }\n\n  handleAction(_context: UI.Context.Context, _actionId: string): boolean {\n    const frame = UI.Context.Context.instance().flavor(UISourceCodeFrame);\n    if (!frame) {\n      return false;\n    }\n    const {state} = frame.textEditor;\n    const text = state.sliceDoc(state.selection.main.from, state.selection.main.to);\n    void this.focusAndAddExpressionToWatch(text);\n    return true;\n  }\n\n  appendApplicableItems(\n      _event: Event, contextMenu: UI.ContextMenu.ContextMenu,\n      target: ObjectUI.ObjectPropertiesSection.ObjectPropertyTreeElement|UISourceCodeFrame): void {\n    if (target instanceof ObjectUI.ObjectPropertiesSection.ObjectPropertyTreeElement) {\n      if (!target.property.synthetic) {\n        contextMenu.debugSection().appendItem(\n            i18nString(UIStrings.addPropertyPathToWatch), () => this.focusAndAddExpressionToWatch(target.path()),\n            {jslogContext: 'add-property-path-to-watch'});\n      }\n      return;\n    }\n\n    if (target.textEditor.state.selection.main.empty) {\n      return;\n    }\n\n    contextMenu.debugSection().appendAction('sources.add-to-watch');\n  }\n}\n\nexport class WatchExpression extends Common.ObjectWrapper.ObjectWrapper<EventTypes> {\n  private treeElementInternal!: UI.TreeOutline.TreeElement;\n  private nameElement!: Element;\n  private valueElement!: Element;\n  private expressionInternal: string|null;\n  private readonly expandController: ObjectUI.ObjectPropertiesSection.ObjectPropertiesSectionsTreeExpandController;\n  private element: HTMLDivElement;\n  private editing: boolean;\n  private linkifier: Components.Linkifier.Linkifier;\n  private textPrompt?: ObjectUI.ObjectPropertiesSection.ObjectPropertyPrompt;\n  private result?: SDK.RemoteObject.RemoteObject|null;\n  private preventClickTimeout?: number;\n  constructor(\n      expression: string|null,\n      expandController: ObjectUI.ObjectPropertiesSection.ObjectPropertiesSectionsTreeExpandController,\n      linkifier: Components.Linkifier.Linkifier) {\n    super();\n\n    this.expressionInternal = expression;\n    this.expandController = expandController;\n    this.element = document.createElement('div');\n    this.element.classList.add('watch-expression');\n    this.element.classList.add('monospace');\n    this.editing = false;\n    this.linkifier = linkifier;\n\n    this.createWatchExpression();\n    this.update();\n  }\n\n  treeElement(): UI.TreeOutline.TreeElement {\n    return this.treeElementInternal;\n  }\n\n  expression(): string|null {\n    return this.expressionInternal;\n  }\n\n  async #evaluateExpression(executionContext: SDK.RuntimeModel.ExecutionContext, expression: string):\n      Promise<SDK.RuntimeModel.EvaluationResult> {\n    const callFrame = executionContext.debuggerModel.selectedCallFrame();\n    if (callFrame?.script.isJavaScript()) {\n      const nameMap = await SourceMapScopes.NamesResolver.allVariablesInCallFrame(callFrame);\n      try {\n        expression =\n            await Formatter.FormatterWorkerPool.formatterWorkerPool().javaScriptSubstitute(expression, nameMap);\n      } catch {\n      }\n    }\n\n    return await executionContext.evaluate(\n        {\n          expression,\n          objectGroup: WatchExpression.watchObjectGroupId,\n          includeCommandLineAPI: false,\n          silent: true,\n          returnByValue: false,\n          generatePreview: false,\n        },\n        /* userGesture */ false,\n        /* awaitPromise */ false);\n  }\n\n  update(): void {\n    const currentExecutionContext = UI.Context.Context.instance().flavor(SDK.RuntimeModel.ExecutionContext);\n    if (currentExecutionContext && this.expressionInternal) {\n      void this.#evaluateExpression(currentExecutionContext, this.expressionInternal).then(result => {\n        if ('object' in result) {\n          this.createWatchExpression(result.object, result.exceptionDetails);\n        } else {\n          this.createWatchExpression();\n        }\n      });\n    } else {\n      this.createWatchExpression();\n    }\n  }\n\n  startEditing(): void {\n    this.editing = true;\n    this.treeElementInternal.setDisableSelectFocus(true);\n    this.element.removeChildren();\n    const newDiv = this.element.createChild('div');\n    newDiv.textContent = this.nameElement.textContent;\n    this.textPrompt = new ObjectUI.ObjectPropertiesSection.ObjectPropertyPrompt();\n    this.textPrompt.renderAsBlock();\n    const proxyElement = (this.textPrompt.attachAndStartEditing(newDiv, this.finishEditing.bind(this)) as HTMLElement);\n    this.treeElementInternal.listItemElement.classList.add('watch-expression-editing');\n    this.treeElementInternal.collapse();\n    proxyElement.classList.add('watch-expression-text-prompt-proxy');\n    proxyElement.addEventListener('keydown', this.promptKeyDown.bind(this), false);\n    const selection = this.element.getComponentSelection();\n    if (selection) {\n      selection.selectAllChildren(newDiv);\n    }\n  }\n\n  isEditing(): boolean {\n    return Boolean(this.editing);\n  }\n\n  private finishEditing(event: Event, canceled?: boolean): void {\n    if (event) {\n      event.consume(canceled);\n    }\n\n    this.editing = false;\n    this.treeElementInternal.setDisableSelectFocus(false);\n    this.treeElementInternal.listItemElement.classList.remove('watch-expression-editing');\n    if (this.textPrompt) {\n      this.textPrompt.detach();\n      const newExpression = canceled ? this.expressionInternal : this.textPrompt.text();\n      this.textPrompt = undefined;\n      this.element.removeChildren();\n      this.updateExpression(newExpression);\n    }\n  }\n\n  private dblClickOnWatchExpression(event: Event): void {\n    event.consume();\n    if (!this.isEditing()) {\n      this.startEditing();\n    }\n  }\n\n  private updateExpression(newExpression: string|null): void {\n    if (this.expressionInternal) {\n      this.expandController.stopWatchSectionsWithId(this.expressionInternal);\n    }\n    this.expressionInternal = newExpression;\n    this.update();\n    this.dispatchEventToListeners(Events.EXPRESSION_UPDATED, this);\n  }\n\n  private deleteWatchExpression(event: Event): void {\n    event.consume(true);\n    UI.ARIAUtils.LiveAnnouncer.alert(i18nString(UIStrings.watchExpressionDeleted));\n    this.updateExpression(null);\n  }\n\n  private createWatchExpression(\n      result?: SDK.RemoteObject.RemoteObject, exceptionDetails?: Protocol.Runtime.ExceptionDetails): void {\n    this.result = result || null;\n\n    this.element.removeChildren();\n    const oldTreeElement = this.treeElementInternal;\n    this.createWatchExpressionTreeElement(result, exceptionDetails);\n    if (oldTreeElement?.parent) {\n      const root = oldTreeElement.parent;\n      const index = root.indexOfChild(oldTreeElement);\n      root.removeChild(oldTreeElement);\n      root.insertChild(this.treeElementInternal, index);\n    }\n    this.treeElementInternal.select();\n  }\n\n  private createWatchExpressionHeader(\n      expressionValue?: SDK.RemoteObject.RemoteObject, exceptionDetails?: Protocol.Runtime.ExceptionDetails): Element {\n    const headerElement = this.element.createChild('div', 'watch-expression-header');\n    const deleteButton = new Buttons.Button.Button();\n    deleteButton.data = {\n      variant: Buttons.Button.Variant.ICON,\n      iconName: 'bin',\n      size: Buttons.Button.Size.SMALL,\n      jslogContext: 'delete-watch-expression',\n    };\n    deleteButton.className = 'watch-expression-delete-button';\n    UI.Tooltip.Tooltip.install(deleteButton, i18nString(UIStrings.deleteWatchExpression));\n    deleteButton.addEventListener('click', this.deleteWatchExpression.bind(this), false);\n    deleteButton.addEventListener('keydown', event => {\n      if (event.key === 'Enter') {\n        this.deleteWatchExpression(event);\n      }\n    });\n\n    const titleElement = headerElement.createChild('div', 'watch-expression-title tree-element-title');\n    titleElement.appendChild(deleteButton);\n    this.nameElement =\n        ObjectUI.ObjectPropertiesSection.ObjectPropertiesSection.createNameElement(this.expressionInternal);\n    UI.Tooltip.Tooltip.install(this.nameElement as HTMLElement, this.expressionInternal);\n    if (Boolean(exceptionDetails) || !expressionValue) {\n      this.valueElement = document.createElement('span');\n      this.valueElement.classList.add('watch-expression-error');\n      this.valueElement.classList.add('value');\n      titleElement.classList.add('dimmed');\n      this.valueElement.textContent = i18nString(UIStrings.notAvailable);\n      if (exceptionDetails?.exception?.description !== undefined) {\n        UI.Tooltip.Tooltip.install(this.valueElement as HTMLElement, exceptionDetails.exception.description);\n      }\n    } else {\n      const propertyValue =\n          ObjectUI.ObjectPropertiesSection.ObjectPropertiesSection.createPropertyValueWithCustomSupport(\n              expressionValue, Boolean(exceptionDetails), false /* showPreview */, this.linkifier);\n      this.valueElement = propertyValue.element;\n    }\n    const separatorElement = document.createElement('span');\n    separatorElement.classList.add('watch-expressions-separator');\n    separatorElement.textContent = ': ';\n    titleElement.append(this.nameElement, separatorElement, this.valueElement);\n\n    return headerElement;\n  }\n\n  private createWatchExpressionTreeElement(\n      expressionValue?: SDK.RemoteObject.RemoteObject, exceptionDetails?: Protocol.Runtime.ExceptionDetails): void {\n    const headerElement = this.createWatchExpressionHeader(expressionValue, exceptionDetails);\n\n    if (!exceptionDetails && expressionValue && expressionValue.hasChildren && !expressionValue.customPreview()) {\n      headerElement.classList.add('watch-expression-object-header');\n      this.treeElementInternal = new ObjectUI.ObjectPropertiesSection.RootElement(expressionValue, this.linkifier);\n      this.expandController.watchSection(\n          (this.expressionInternal as string),\n          (this.treeElementInternal as ObjectUI.ObjectPropertiesSection.RootElement));\n      this.treeElementInternal.toggleOnClick = false;\n      this.treeElementInternal.listItemElement.addEventListener('click', this.onSectionClick.bind(this), false);\n      this.treeElementInternal.listItemElement.addEventListener('dblclick', this.dblClickOnWatchExpression.bind(this));\n    } else {\n      headerElement.addEventListener('dblclick', this.dblClickOnWatchExpression.bind(this));\n      this.treeElementInternal = new UI.TreeOutline.TreeElement();\n    }\n    this.treeElementInternal.title = this.element;\n    this.treeElementInternal.listItemElement.classList.add('watch-expression-tree-item');\n    this.treeElementInternal.listItemElement.addEventListener('keydown', event => {\n      if (event.key === 'Enter' && !this.isEditing()) {\n        this.startEditing();\n        event.consume(true);\n      } else if (event.key === 'Delete' && !this.isEditing()) {\n        this.deleteWatchExpression(event);\n      }\n    });\n  }\n\n  private onSectionClick(event: Event): void {\n    event.consume(true);\n    const mouseEvent = (event as MouseEvent);\n    if (mouseEvent.detail === 1) {\n      this.preventClickTimeout = window.setTimeout(handleClick.bind(this), 333);\n    } else if (this.preventClickTimeout !== undefined) {\n      window.clearTimeout(this.preventClickTimeout);\n      this.preventClickTimeout = undefined;\n    }\n\n    function handleClick(this: WatchExpression): void {\n      if (!this.treeElementInternal) {\n        return;\n      }\n\n      if (this.treeElementInternal.expanded) {\n        this.treeElementInternal.collapse();\n      } else if (!this.editing) {\n        this.treeElementInternal.expand();\n      }\n    }\n  }\n\n  private promptKeyDown(event: KeyboardEvent): void {\n    const isEscapeKey = Platform.KeyboardUtilities.isEscKey(event);\n    if (event.key === 'Enter' || isEscapeKey) {\n      this.finishEditing(event, isEscapeKey);\n    }\n  }\n\n  populateContextMenu(contextMenu: UI.ContextMenu.ContextMenu, event: Event): void {\n    if (!this.isEditing()) {\n      contextMenu.editSection().appendItem(\n          i18nString(UIStrings.deleteWatchExpression), this.updateExpression.bind(this, null),\n          {jslogContext: 'delete-watch-expression'});\n    }\n\n    if (!this.isEditing() && this.result && (this.result.type === 'number' || this.result.type === 'string')) {\n      contextMenu.clipboardSection().appendItem(\n          i18nString(UIStrings.copyValue), this.copyValueButtonClicked.bind(this),\n          {jslogContext: 'copy-watch-expression-value'});\n    }\n\n    const target = UI.UIUtils.deepElementFromEvent(event);\n    if (target && this.valueElement.isSelfOrAncestor(target) && this.result) {\n      contextMenu.appendApplicableItems(this.result);\n    }\n  }\n\n  private copyValueButtonClicked(): void {\n    Host.InspectorFrontendHost.InspectorFrontendHostInstance.copyText(this.valueElement.textContent);\n  }\n\n  private static readonly watchObjectGroupId = 'watch-group';\n}\n\nconst enum Events {\n  EXPRESSION_UPDATED = 'ExpressionUpdated',\n}\n\ninterface EventTypes {\n  [Events.EXPRESSION_UPDATED]: WatchExpression;\n}\n", "// Copyright 2025 The Chromium Authors. All rights reserved.\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\n// IMPORTANT: this file is auto generated. Please do not edit this file.\n/* istanbul ignore file */\nexport default `/*\n * Copyright 2015 The Chromium Authors. All rights reserved.\n * Use of this source code is governed by a BSD-style license that can be\n * found in the LICENSE file.\n */\n\n.value.object-value-node:hover {\n  background-color: var(--sys-color-state-hover-on-subtle);\n}\n\n.object-value-function-prefix,\n.object-value-boolean {\n  color: var(--sys-color-token-attribute-value);\n}\n\n.object-value-function {\n  font-style: italic;\n}\n\n.object-value-function.linkified:hover {\n  --override-linkified-hover-background: rgb(0 0 0 / 10%);\n\n  background-color: var(--override-linkified-hover-background);\n  cursor: pointer;\n}\n\n.theme-with-dark-background .object-value-function.linkified:hover,\n:host-context(.theme-with-dark-background) .object-value-function.linkified:hover {\n  --override-linkified-hover-background: rgb(230 230 230 / 10%);\n}\n\n.object-value-number {\n  color: var(--sys-color-token-attribute-value);\n}\n\n.object-value-bigint {\n  color: var(--sys-color-token-comment);\n}\n\n.object-value-string,\n.object-value-regexp,\n.object-value-symbol {\n  white-space: pre;\n  unicode-bidi: -webkit-isolate;\n  color: var(--sys-color-token-property-special);\n}\n\n.object-value-node {\n  position: relative;\n  vertical-align: baseline;\n  color: var(--sys-color-token-variable);\n  white-space: nowrap;\n}\n\n.object-value-null,\n.object-value-undefined {\n  color: var(--sys-color-state-disabled);\n}\n\n.object-value-unavailable {\n  color: var(--sys-color-token-tag);\n}\n\n.object-value-calculate-value-button:hover {\n  text-decoration: underline;\n}\n\n.object-properties-section-custom-section {\n  display: inline-flex;\n  flex-direction: column;\n}\n\n.theme-with-dark-background .object-value-number,\n:host-context(.theme-with-dark-background) .object-value-number,\n.theme-with-dark-background .object-value-boolean,\n:host-context(.theme-with-dark-background) .object-value-boolean {\n  --override-primitive-dark-mode-color: hsl(252deg 100% 75%);\n\n  color: var(--override-primitive-dark-mode-color);\n}\n\n.object-properties-section .object-description {\n  color: var(--sys-color-token-subtle);\n}\n\n.value .object-properties-preview {\n  white-space: nowrap;\n}\n\n.name {\n  color: var(--sys-color-token-tag);\n  flex-shrink: 0;\n}\n\n.object-properties-preview .name {\n  color: var(--sys-color-token-subtle);\n}\n\n@media (forced-colors: active) {\n  .object-value-calculate-value-button:hover {\n    forced-color-adjust: none;\n    color: Highlight;\n  }\n}\n\n/*# sourceURL=${import.meta.resolve('./objectValue.css')} */`;", "// Copyright 2025 The Chromium Authors. All rights reserved.\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\n// IMPORTANT: this file is auto generated. Please do not edit this file.\n/* istanbul ignore file */\nexport default `/*\n * Copyright 2017 The Chromium Authors. All rights reserved.\n * Use of this source code is governed by a BSD-style license that can be\n * found in the LICENSE file.\n */\n\n.watch-expression-delete-button {\n  position: absolute;\n  opacity: 0%;\n  right: 0;\n  background-color: var(--watch-expression-delete-button-background-color); /* stylelint-disable-line plugin/use_theme_colors */\n  border-radius: var(--sys-shape-corner-full);\n\n  .watch-expression-title:hover & {\n    opacity: 100%;\n  }\n\n  .watch-expression-title:focus-within & {\n    opacity: 100%;\n  }\n}\n\n@container watch-expression (max-width: 31px) {\n  .watch-expression-delete-button {\n    visibility: hidden;\n  }\n}\n\n:host-context(.theme-with-dark-background) .watch-expression-delete-button {\n  /* This is a workaround due to a sprite with hardcoded color.\n     It should no longer be necessary after we update icons. */\n  filter: brightness(1.5);\n}\n\n.watch-expressions {\n  min-height: 26px;\n}\n\n.watch-expression-title {\n  white-space: nowrap;\n  line-height: 20px;\n  display: flex;\n}\n\n.watch-expression-title:hover,\n.watch-expression-title:focus-within {\n  padding-right: 26px;\n}\n\n.watch-expression-object-header .watch-expression-title {\n  margin-left: 1px;\n}\n\n.watch-expression {\n  position: relative;\n  flex: auto;\n  min-height: 20px;\n}\n\n.watch-expression .name {\n  color: var(--sys-color-purple);\n  white-space: nowrap;\n  text-overflow: ellipsis;\n  overflow: hidden;\n  flex-shrink: 1000000;\n  min-width: 2em;\n}\n\n.watch-expression-error {\n  color: var(--sys-color-error);\n}\n\n.watch-expressions-separator {\n  flex-shrink: 0;\n  flex-grow: 0;\n}\n\n.watch-expression .value {\n  white-space: nowrap;\n  display: inline;\n  overflow: hidden;\n  padding-left: 4px;\n  text-overflow: ellipsis;\n  flex-shrink: 1;\n}\n\n.watch-expression .text-prompt {\n  text-overflow: clip;\n  overflow: hidden;\n  white-space: nowrap;\n  padding-left: 4px;\n  min-height: 18px;\n  line-height: 18px;\n  user-select: text;\n}\n\n.watch-expression-text-prompt-proxy {\n  margin: 2px 12px 2px -4px;\n  padding-bottom: 3px;\n}\n\n.watch-expression-header {\n  flex: auto;\n  margin-left: -16px;\n  padding-left: 15px;\n}\n\nli.watch-expression-tree-item {\n  container-type: inline-size;\n  container-name: watch-expression;\n  padding-left: 4px;\n\n  --watch-expression-delete-button-background-color: var(--sys-color-cdt-base);\n}\n\n.theme-with-dark-background li.watch-expression-tree-item {\n  --watch-expression-delete-button-background-color: var(--sys-color-cdt-base-container);\n}\n\nli.watch-expression-tree-item.selected {\n  background: var(--sys-color-neutral-container);\n\n  --watch-expression-delete-button-background-color: var(--sys-color-neutral-container);\n}\n\nli.watch-expression-tree-item.selected:focus,\nli.watch-expression-tree-item.selected:focus-within:focus-visible,\n.watch-expression-header:focus-visible {\n  background: var(--sys-color-tonal-container);\n\n  --watch-expression-delete-button-background-color: var(--sys-color-tonal-container);\n}\n\nli.watch-expression-editing::before {\n  background-color: transparent;\n}\n\n@media (forced-colors: active) {\n  .watch-expression-title:hover .watch-expression-delete-button,\n  .watch-expressions .dimmed {\n    opacity: 100%;\n  }\n\n  li.watch-expression-tree-item * {\n    forced-color-adjust: none;\n    color: ButtonText;\n  }\n\n  li.watch-expression-tree-item:hover {\n    forced-color-adjust: none;\n    background-color: Highlight;\n  }\n\n  li.watch-expression-tree-item:hover * {\n    color: HighlightText;\n  }\n\n  li.watch-expression-tree-item:hover .watch-expression-delete-button {\n    background-color: HighlightText;\n  }\n}\n\n/*# sourceURL=${import.meta.resolve('./watchExpressionsSidebarPane.css')} */`;"],
  "mappings": ";;;;;;;AAAA;;;;;AAIA,YAAY,UAAU;AAEtB,YAAY,aAAa;AACzB,YAAY,QAAQ;AACpB,SAAQ,YAAY,MAAM,cAAa;AACvC,YAAY,mBAAmB;;;ACJ/B,IAAO,qBAAQ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBAqBC,YAAY,QAAQ,cAAc,CAAC;;;ADbnD,IAAM,YAAY;;;;EAIhB,cAAc;;;;EAId,cAAc;;;;EAId,KAAK;;AAEP,IAAM,OAAY,UAAK,kBAAkB,2CAA2C,SAAS;AAC7F,IAAM,aAAkB,UAAK,mBAAmB,KAAK,QAAW,IAAI;AACpE,IAAM,EAAC,IAAG,IAAI;AAcP,IAAM,eAAqB,CAAC,OAAO,QAAQ,WAAU;AAE1D,SAAO;aACO,UAAO,aAAa,kBAAY,CAAC;aACpC,MAAM,KAAK;;gBAEM,wBAAU,KAAK,EAAE,MAAM,EAAC,SAAS,SAAS,QAAQ,KAAI,CAAC,CAAC;mBACnE,MAAM,SAAS,IAAI,IAAI,OAAI;AAAG,WAAO,QAAQ;EAAuB,CAAC,CAAC;8BAC3D,MAAM,KAAK,kBAAkB,KAAK;mBAC7C,UAA+B,IAAI,WAAW,UAAU,GAAG,CAAC,sBAC3E,MAAM;AAEV;AAEM,IAAO,wBAAP,MAAO,+BAAiC,UAAO,KAAI;EAC/C;EACS;EACA;EACjB,YACI,OAA0C,cAC1C,UAA2D,OAAO,cAAY;AAChF,UAAM,EAAC,cAAc,KAAI,CAAC;AAE1B,UAAM,YAAY;MAChB;MACA,WAAW,KAAK,UAAU,KAAK,IAAI;MACnC,OAAO,KAAK,MAAM,KAAK,IAAI;;AAE7B,UAAM,OAAO;AACb,UAAM,aAAa;MACjB,IAAI,MAAM,OAAuB;AAC/B,aAAK,QAAQ;MACf;;AAEF,SAAK,WAAW,YAAY,KAAK,cAAc;AAE/C,SAAK,SAAS,IAAO,UAAO,OAAO,YAAY;AAC/C,SAAK,OAAO;MAAe;;IAAA;AAC3B,SAAK,OAAO,yBAAyB,KAAK,KAAK;AAE/C,SAAK,WAAW;EAClB;EAEA,OAAO,4BAA4B,UAAyD;AAC1F,WAAO,IAAI,uBAAsB,WAAW,UAAU,YAAY,GAAG,sBAAsB,QAAQ;EACrG;EAEA,OAAO,+BAA+B,UAAyD;AAE7F,WAAO,IAAI,uBAAsB,WAAW,UAAU,YAAY,GAAG,sBAAsB,QAAQ;EACrG;EAES,OAAI;AACX,UAAM,KAAK,KAAK,OAAO,cAAc;AACrC,SAAK,OAAO,KAAI;EAClB;EAEQ,KAAKA,QAAsC;AACjD,SAAK,OAAO,KAAI;AAChB,SAAK,SAASA,MAAK;EACrB;EAEQ,QAAK;AACX,SAAK,KAAK,KAAK,MAAM,KAAwC;EAC/D;EAEQ,UAAU,OAAoB;AACpC,QAAI,MAAM,QAAQ,SAAS;AACzB,YAAM,QAAQ,IAAI;AAClB,WAAK,MAAK;IACZ;EACF;;;;AElHF;;;;AAIA,YAAYC,WAAU;AACtB,YAAY,eAAe;AAE3B,YAAY,iBAAiB;AAC7B,YAAYC,SAAQ;;;ACRpB;;;;AAUM,IAAO,SAAP,MAAa;EAEM;EADvB,YACuB,cACnB,cAAkD;AAD/B,SAAA,eAAA;EAEvB;EAEA,OAAO,QAAQ,eAAkD;AAC/D,WAAO;EACT;EAEA,WAAQ;EACR;EAEA,oBAAiB;AACf,WAAO,CAAA;EACT;;;;;;EAOA,mBAAgB;AACd,WAAO,CAAA;EACT;EAEA,8BAA8B,cAA0C,aAAmB;EAC3F;EAEA,4BAA4B,cAA0C,aAAqB,eAAqB;EAEhH;EAEA,kBAAkB,OAA8C,SAAyC;EACzG;EAEA,kBAAe;AACb,WAAO,CAAA;EACT;EAEA,kBAAkB,SAAyC;EAC3D;EAEA,UAAO;EACP;;;;AD1CF,IAAMC,aAAY;;;;EAIhB,kBAAkB;;AAEpB,IAAMC,QAAY,WAAK,kBAAkB,4CAA4CD,UAAS;AAC9F,IAAME,cAAkB,WAAK,mBAAmB,KAAK,QAAWD,KAAI;AAE9D,IAAO,yBAAP,cAAsC,OAAM;EAChD,UAAsD;EACtD,oBAA6C;EAE7C,YAAY,cAAiD;AAC3D,UAAM,YAAY;AAClB,SAAK,aAAa,iBACJ,uBAAa,OAAO,sBAAsB,KAAK,yBAAyB,IAAI;EAC5F;EAES,UAAO;AACd,SAAK,mBAAmB,QAAO;AAC/B,SAAK,oBAAoB;AACzB,SAAK,aAAa,oBACJ,uBAAa,OAAO,sBAAsB,KAAK,yBAAyB,IAAI;AAC1F,UAAM,QAAO;EACf;EAEA,OAAgB,QAAQ,cAAiD;AACvE,WAAO,aAAa,YAAW,EAAG,WAAU,KAAM,aAAa,YAAW,EAAG,eAAc;EAC7F;EAES,kBAAkB,QAAwC;AACjE,SAAK,UAAU;AACf,QAAI,KAAK,aAAa,kBAAiB,GAAI;AACzC,WAAK,sBAAqB;IAC5B;EACF;EAEA,0BAAuB;AACrB,QAAI,CAAC,KAAK,aAAa,kBAAiB,GAAI;AAC1C,WAAK,mBAAmB,QAAO;AAC/B,WAAK,oBAAoB;IAC3B;EACF;EAEA,wBAAqB;AACnB,UAAM,UAAU,IAAO,YAAQ,QAAO,WACTC,YAAWF,WAAU,gBAAgB,GAAG,QAAW,QAC5E,6BAA6B;AACjC,SAAK,oBAAoB;AACzB,YAAQ,iBAAiB,MAAM,KAAK,cAAc,KAAK,iBAAiB,CAAC;AACzE,SAAK,cAAc,KAAK,iBAAiB;EAC3C;EAEA,cAAc,KAAuB;AACnC,QAAI,KAAK,SAAS;AAChB,WAAK,QAAQ,SAAS,EAAC,SAAqB,wBAAY,WAAW,GAAG,GAAG,EAAC,CAAC;IAC7E;EACF;EAEA,cAAc,KAA4B;AACxC,QAAI,KAAK,WAAW,KAAK;AACvB,WAAK,QAAQ,SAAS,EAAC,SAAqB,wBAAY,cAAc,GAAG,GAAG,EAAC,CAAC;IAChF;EACF;;;;AE5EF;;;;AAKA,OAAO;AAEP,YAAY,YAAY;AACxB,YAAYG,WAAU;AACtB,YAAY,SAAS;AAErB,YAAY,gBAAgB;AAC5B,YAAY,gBAAgB;AAC5B,YAAY,gBAAgB;AAC5B,YAAYC,SAAQ;AACpB,YAAYC,oBAAmB;;;ACV/B,IAAO,mCAAQ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBAkEC,YAAY,QAAQ,4BAA4B,CAAC;;;ADpDjE,IAAM,EAAC,UAAS,IAAe;AAE/B,IAAMC,aAAY;;;;EAIhB,gBAAgB;;;;EAIhB,YAAY;;;;EAIZ,aAAa;;;;EAIb,uBAAuB;;;;EAIvB,UAAU;;;;EAIV,kCAAkC;;;;EAIlC,iCAAiC;;;;EAIjC,4BAA4B;;;;;;;EAO5B,kBAAkB;;;;EAIlB,gCAAgC;;AAElC,IAAMC,QAAY,WAAK,kBAAkB,0CAA0CD,UAAS;AAC5F,IAAME,cAAkB,WAAK,mBAAmB,KAAK,QAAWD,KAAI;AAQ9D,IAAO,uBAAP,cAAuC,WAAO,OAAM;EACvC;EACT;EACA;EACS;EACT;EAER;EACA;EAEA,YACI,kBAA0B,cAAsB,YAChD,UAAsD;AACxD,UAAM;MACJ,OAAO,GAAiB,sBAAO,iBAAiB,CAAC;MACjD,cAAc;KACf;AACD,SAAK,oBAAoB,gCAA0B;AAEnD,UAAM,eAAe;MACR,sBAAW;MACX,kBAAO,kBAAkB,gBAAgB,EAAE;MAC3C,kBAAO,cAAc,SAAQ;MAC7B,kBAAO,eAAe,SAAQ;MAC9B,sBAAW;MACX,kBAAO;MACP,kBAAO;MACP,sBAAW,mBAAmB,KAAK,GAAG;QAC/C,cAAc,CAAC,YAA0C,KAAK,eAAe,mBAAmB,OAAO;OACxG;MACU,0BAAc;MACd,sBAAW,cAAa;;AAGrC,SAAK,WAAW;AAChB,SAAK,WAAW;AAChB,SAAK,QAAQ,WAAW;AAExB,SAAK,QAAQ,UAAU,IAAI,gCAAgC;AAC3D,UAAM,SAAS,KAAK,eAAe,YAAY,OAAO,eAAe;AACrE,UAAME,WAAU,OAAO,YAAY,oBAAoB,iCAAiC;AACxF,IAAAA,SAAQ,WAAW,QAAQ,mBAAmB,CAAC,GAAG;AAElD,SAAK,eAAe,IAAO,YAAQ,gBAC/B,KAAK,cAAc,KAAK,IAAI,GAAGD,YAAWF,WAAU,cAAc,GAAG,QAAW,MAAM;AAC1F,SAAK,aAAa;MACdE,YAAWF,WAAU,UAAU;MAAC;;IAAA;AACpC,UAAM,oBAAoB,KAAK,aAAa;MACxCE,YAAWF,WAAU,qBAAqB;MAAC;;IAAA;AAC/C,UAAM,iBACF,KAAK,aAAa;MAAaE,YAAWF,WAAU,QAAQ;MAAC;;IAAA;AACjE,SAAK,aAAa,OAAO,aAAa,iBAAiB,iBAAiB;AACxE,IAAAG,SAAQ,kBAAkB,KAAK,YAAY;AAE3C,UAAM,UAAU,gBAAgB;AAChC,UAAM,mBAAmB,CAAC,SAAwC;AAChE,WAAgB,sBAAW,qBAAqB,KAAK,MAAM,IAAI,SAAQ,CAAE,EAAE,KAAK,cAAW;AACzF,YAAI,UAAU;AACZ,eAAK,cAAc,MAAM,KAAK,OAAO,MAAM,IAAI,SAAQ,CAAE;QAC3D,OAAO;AACL,UAAW,kCAAuB,IAAI;QACxC;MACF,CAAC;AACD,aAAO;IACT;AACA,UAAMC,UAAS;MACb,EAAC,KAAK,WAAW,KAAK,MAAM,KAAK,eAAe;QAAW;;MAAA,EAAoB;MAC/E,EAAC,KAAK,aAAa,KAAK,MAAM,KAAK,eAAe;QAAW;;MAAA,EAAmB;MAChF,EAAC,KAAK,UAAU,KAAK,MAAM,KAAK,eAAe,YAAW,IAAqB,IAAI,EAAC;MACpF,EAAC,KAAK,UAAU,KAAK,MAAM,KAAK,eAAe,YAAW,GAAoB,IAAI,EAAC;MACnF;QACE,KAAK;QACL,KAAK;;MAEP;QACE,KAAK;QACL,KAAK;;MAEP;QACE,KAAK;QACL,KAAgB;;MAElB;QACE,KAAK;QACL,KAAK,MAAK;AACR,eAAK,cAAc,OAAO,EAAE;AAC5B,iBAAO;QACT;;;AAIJ,SAAK,yBAAyB,IAAe,uBAAW;AAExD,UAAM,gBAAgB,KAAK,eAAe,YAAY,SAAS,cAAc,KAAK,CAAC;AACnF,kBAAc,UAAU,IAAI,kBAAkB;AAC9C,kBAAc,aAAa,SAAS,GAAiB,yBAAS,EAAG,MAAM,EAAC,QAAQ,KAAI,CAAC,CAAC,EAAE;AAExF,SAAK,SAAS,IAAe,sBAAW,WAAsB,uBAAY,OAAO;MAC/E,KAAK;MACL,WAAW,EAAC,QAAQ,GAAG,MAAM,QAAQ,OAAM;MAC3C,YAAY;QACV,KAAK,uBAAuB,GAAG,KAAK,eAAc,CAAE;QACzC,kBAAO,GAAGA,OAAM;QAC3B;;KAEH,CAAC;AACF,kBAAc,YAAY,KAAK,MAAM;AAErC,UAAM,YAAuB,gBAAK,OAAO,OAAO;AAChD,cAAU,QAAQF,YAAWF,WAAU,WAAW;AAClD,cAAU,aAAa,SAAS,GAAiB,qBAAK,EAAG,MAAM,EAAC,OAAO,KAAI,CAAC,CAAC,EAAE;AAC/E,cAAU,UAAU,MAAM,KAAK,cAAc,MAAM,KAAK,OAAO,MAAM,IAAI,SAAQ,CAAE;AACnF,WAAO,YAAY,SAAS;AAE5B,SAAK,WAAW,IAAe,+BAAoB,oBACxC,gBAAS,SAAS,SAAQ,EAAG,mBAAmB,gCAAgC,CAAA,CAAE,CAAC;AAC9F,SAAK,iBAAiB,IAAe,6BAAkB,kBAAkB,KAAK,QAAQ,KAAK,QAAQ;AAEnG,UAAM,cAAc,KAAK,eAAe,YAAY,SAAS,cAAc,KAAK,CAAC;AACjF,gBAAY,UAAU,IAAI,cAAc;AACxC,UAAMK,QAAU,aAAS;mDACoC,oBAAK,YAAY,CAAC,KAC9DH,YAAWF,WAAU,0BAA0B,CAAC;AACjE,UAAM,WAAsB,gBAAK,OAAO,mBAAmB,WAAW;AACtE,IAAAK,MAAK,QAAQ,QAAQ;AACrB,gBAAY,YAAYA,KAAI;AAE5B,SAAK,cAAa;EACpB;EAEA,gBAAa;AACX,SAAK,cAAc,MAAM,KAAK,OAAO,MAAM,IAAI,SAAQ,CAAE;EAC3D;EAEA,cAAW;AACT,SAAK,OAAO,OAAO,MAAK;EAC1B;EAEQ,gBAAa;AACnB,QAAI,KAAK,mBAAc,sBAA0D;AAC/E,WAAK,cAAc,MAAM,EAAE;AAC3B;IACF;AACA,SAAK,YAAW;AAChB,SAAK,OAAO,SAAS,EAAC,SAAS,KAAK,uBAAuB,YAAY,KAAK,eAAc,CAAE,EAAC,CAAC;AAC9F,SAAK,cAAa;EACpB;EAEA,IAAY,iBAAc;AACxB,UAAM,SAAS,KAAK,aAAa,eAAc;AAC/C,WAAO,SAAS,OAAO,QAAQ;EACjC;EAEQ,iBAAc;AACpB,UAAM,OAAO,KAAK;AAClB,QAAI,SAAI,0BAA8D;AACpE,aAAkB,uBAAYH,YAAWF,WAAU,gCAAgC,CAAC;IACtF;AACA,QAAI,SAAI,YAAgD;AACtD,aAAkB,uBAAYE,YAAWF,WAAU,gBAAgB,CAAC;IACtE;AACA,WAAO,CAAA;EACT;EAEQ,gBAAa;AACnB,UAAM,OAAO,KAAK;AAClB,QAAI,SAAI,0BAA8D;AACpE,MAAG,YAAQ,QAAQ,QAAS,KAAK,aAAa,SAAUE,YAAWF,WAAU,+BAA+B,CAAC;IAC/G,WAAW,SAAI,YAAgD;AAC7D,MAAG,YAAQ,QAAQ,QAAS,KAAK,aAAa,SAAUE,YAAWF,WAAU,8BAA8B,CAAC;IAC9G;EACF;EAEA,cAAc,WAAoB,WAAiB;AACjD,QAAI,KAAK,UAAU;AACjB;IACF;AACA,SAAK,WAAW;AAChB,SAAK,OAAO,OAAM;AAClB,SAAK,SAAS,gBAAgB,SAAS;AACvC,UAAM,aAAa,KAAK,mBAAc;AACtC,SAAK,SAAS,EAAC,WAAW,WAA2E,WAAU,CAAC;EAClH;EAEA,IAAI,gBAAa;AACf,WAAO,KAAK;EACd;;;;AErQF;;;;sBAAAM;;AAIA,OAAO;AAEP,YAAYC,aAAY;AACxB,YAAY,UAAU;AACtB,YAAYC,WAAU;AACtB,YAAYC,eAAc;AAC1B,SAAQ,4BAAAC,iCAA+B;AACvC,YAAYC,UAAS;AACrB,YAAY,cAAc;AAC1B,YAAY,iBAAiB;AAC7B,YAAY,eAAe;AAC3B,YAAYC,gBAAe;AAC3B,YAAY,WAAW;AACvB,YAAY,uBAAuB;AACnC,YAAYC,SAAQ;AACpB,YAAY,SAAS;AACrB,YAAYC,oBAAmB;;;ACf/B,IAAO,8BAAQ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBAoRC,YAAY,QAAQ,uBAAuB,CAAC;;;ACzR5D;;;;;AAIA,YAAYC,aAAY;AACxB,YAAY,cAAc;AAC1B,SAAQ,gCAA+B;AAEvC,IAAM,2BAA2B;AAEjC,IAAM,gBAAgB,CAAC,YAAiC;AACtD,SAAO,QAAQ,aAAa,MAAM,MAAM;AAC1C;AAEA,IAAM,8BAA8B,CAAC,YAAiC;AACpE,SAAO,QAAQ,aAAa,MAAM,MAAM;AAC1C;AAEA,IAAM,iCAAiC,CAAC,YAAiC;AACvE,SAAO,QAAQ,aAAa,kBAAkB,MAAM,QAAQ,QAAQ,aAAa,iBAAiB,MAAM;AAC1G;AAEA,IAAM,uBAAuB,CAAC,YAAiC;AAC7D,SAAO,CAAC,4BAA4B,OAAO;AAC7C;AAEA,IAAM,kBAAkB,CAAC,mBAA+C;AACtE,SAAO,eAAe,aAAa,MAAM,MAAM;AACjD;AAEA,IAAM,gCAAgC,CAAC,mBAAwD;AAC7F,SAAO,eAAe,cAA2B,yBAAyB;AAC5E;AAEA,IAAM,+BAA+B,CAAC,mBAAwD;AAC5F,SAAO,eAAe,cAA8B,wBAAwB;AAC9E;AAEA,IAAM,2BAA2B,CAAC,mBAAwD;AACxF,QAAM,qBAAqB,sBAAsB,cAAc;AAC/D,MAAI,sBAAsB,8BAA8B,oBAAoB;AAC1E,WAAO,oBAAoB,cAA2B,SAAS;EACjE;AACA,SAAO;AACT;AAEA,IAAM,wBAAwB,CAAC,mBAAwD;AACrF,SAAO,eAAe,cAA2B,wBAAwB;AAC3E;AAEA,IAAM,wBAAwB,CAAC,mBAA+D;AAC5F,QAAM,qBAAqB,eAAe;AAC1C,MAAI,sBAAsB,8BAA8B,oBAAoB;AAC1E,WAAO;EACT;AACA,SAAO;AACT;AAEA,IAAM,4BAA4B,CAAC,mBAA+D;AAChG,QAAM,yBAAyB,eAAe;AAC9C,MAAI,0BAA0B,kCAAkC,oBAAoB;AAClF,WAAO;EACT;AACA,SAAO;AACT;AAEA,SAAS,iCAAiC,QAAqB,KAAwC;AAGrG,UAAQ,OAAO,+BAA+B,MAAM,CAAC;AACrD,MAAI,WAA6B;AACjC,UAAQ,KAAK;IACX,KAAA,WAA6C;AAC3C,YAAM,yBAAyB,OAAO;AACtC,UAAI,kCAAkC,aAAa;AACjD,mBAAW;AACX,gBAAQ,OAAO,+BAA+B,QAAQ,CAAC;MACzD;AACA;IACF;IACA,KAAA,aAA+C;AAC7C,YAAM,qBAAqB,OAAO;AAClC,UAAI,8BAA8B,aAAa;AAC7C,YAAI,cAAc,kBAAkB,GAAG;AACrC,gBAAM,iBAAiB,mBAAmB,cAAkC,oBAAoB;AAChG,cAAI,gBAAgB;AAClB,uBAAW,sBAAsB,cAAc;UACjD;QACF,OAAO;AACL,qBAAW;AACX,kBAAQ,OAAO,+BAA+B,QAAQ,CAAC;QACzD;MACF;AACA;IACF;IACA;AACE;EACJ;AAEA,SAAO;AACT;AAEA,eAAsB,kCAClB,QAAqB,KACrB,+BACoB;AACtB,MAAI,+BAA+B,MAAM,GAAG;AAC1C,WAAO,iCAAiC,QAAQ,GAAG;EACrD;AAGA,QAAM,iBAAiB,OAAO;AAC9B,MAAI,CAAC,kBAAkB,EAAE,0BAA0B,qBAAqB;AACtE,UAAM,IAAI,MAAM,yEAAyE;EAC3F;AAEA,MAAI,WAA6B;AACjC,UAAQ,KAAK;IACX,KAAA,aAA+C;AAC7C,UAAI,qBAAqB,MAAM,GAAG;AAEhC,YAAI,gBAAgB,cAAc,GAAG;AACnC,gBAAM,8BAA8B,gBAAgB,KAAK;QAC3D;MACF,OAAO;AAEL,eAAO,sBAAsB,cAAc;MAC7C;AACA;IACF;IACA,KAAA,cAAgD;AAC9C,UAAI,qBAAqB,MAAM,GAAG;AAGhC,YAAI,gBAAgB,cAAc,GAAG;AACnC,iBAAO,8BAA8B,cAAc;QACrD;AACA,cAAM,8BAA8B,gBAAgB,IAAI;MAC1D;AACA;IACF;IACA,KAAA,aAA+C;AAC7C,UAAI,qBAAqB,MAAM,GAAG;AAChC,YAAI,gBAAgB,cAAc,GAAG;AAGnC,qBAAW,8BAA8B,cAAc;QACzD,OAAO;AAGL,qBAAW,yBAAyB,cAAc;QACpD;MACF,OAAO;AAIL,cAAM,cAAc,OAAO;AAC3B,YAAI,eAAe,uBAAuB,gBAAgB;AACxD,qBAAW;QACb,OAAO;AACL,qBAAW,yBAAyB,cAAc;QACpD;MACF;AACA;IACF;IACA,KAAA,WAA6C;AAI3C,UAAI,qBAAqB,MAAM,GAAG;AAChC,cAAM,yBAAyB,0BAA0B,cAAc;AACvE,YAAI,wBAAwB;AAC1B,cAAI,gBAAgB,sBAAsB,GAAG;AAC3C,uBAAW,6BAA6B,sBAAsB;UAChE,OAAO;AACL,uBAAW,sBAAsB,sBAAsB;UACzD;QACF,OAAO;AACL,gBAAM,oBAAoB,eAAe,eAAe;AACxD,cAAI,6BAA6B,aAAa;AAC5C,uBAAW;UACb;QACF;MACF,OAAO;AAIL,cAAM,kBAAkB,OAAO;AAC/B,YAAI,2BAA2B,aAAa;AAC1C,qBAAW;QACb;MACF;AACA;IACF;EACF;AACA,SAAO;AACT;AAOA,SAAS,+BAA+B,WAAqB;AAC3D,QAAM,WAAW,UAAU,CAAC;AAC5B,MAAI,sBAAsB;AAC1B,WAAS,eAAe,GAAG,eAAe,SAAS,UAAU,wBAAwB,IAAI,EAAE,cAAc;AACvG,UAAM,UAAU,SAAS,YAAY;AACrC,aAAS,WAAW,GAAG,WAAW,UAAU,QAAQ,EAAE,UAAU;AAC9D,YAAM,MAAM,UAAU,QAAQ;AAC9B,UAAI,IAAI,UAAU,gBAAgB,IAAI,YAAY,MAAM,SAAS;AAC/D,8BAAsB;AACtB;MACF;IACF;EACF;AAEA,SAAO,wBAAwB,KAAK,SAAS,SAAS;AACxD;AAEA,SAAS,wBAAwB,KAAe,SAAqB,YAAkB;AACrF,QAAM,sBAAsB,CAAA;AAC5B,MAAI,+BAA+B,QAAQ,OAAO,WAAS,UAAU,GAAG;AAExE,WAAS,eAAe,YAAY,eAAe,IAAI,QAAQ,EAAE,cAAc;AAC7E,UAAM,UAAU,IAAI,YAAY;AAChC,wBAAoB,KAAK,OAAO;AAChC,mCACI,6BAA6B,OAAO,CAAAC,SAAOA,KAAI,SAAS,gBAAgBA,KAAI,YAAY,MAAM,OAAO;AACzG,QAAI,6BAA6B,WAAW,GAAG;AAC7C;IACF;EACF;AACA,SAAO;AACT;AAWA,SAAS,+BACL,MAAyC,qBAAiE;AAC5G,QAAM,oBAAoB,KAAK,IAAI,SAAM;AAEvC,UAAM,QAAe,kBAAU,UAAU,WAAW,GAAG,GAAG,qBAAqB,MAAM,CAAC;AACtF,6BAAyB,KAAK;AAC9B,WAAO,MAAM,MAAM,GAAG,EAAE,QAAO;EACjC,CAAC;AAED,QAAM,aAAa,+BAA+B,iBAAiB;AAEnE,WAAS,IAAI,GAAG,IAAI,kBAAkB,QAAQ,EAAE,GAAG;AACjD,UAAM,WAAW,kBAAkB,CAAC;AACpC,UAAM,iBAAiB,wBAAwB,UAAU,mBAAmB,UAAU;AACtF,UAAM,WAAW,eAAe,QAAO,EAAG,KAAK,GAAG;AAGlD,QAAI,eAAe,GAAG;AACpB,0BAAoB,IAAI,KAAK,CAAC,GAAG,WAAW,GAAG;IACjD,OAAO;AACL,0BAAoB,IAAI,KAAK,CAAC,GAAG,WAAW,UAAU;IACxD;EACF;AACA,UAAQ,OAAO,IAAI,IAAI,oBAAoB,OAAM,CAAE,EAAE,SAAS,KAAK,QAAQ,mCAAmC;AAChH;AAEM,SAAU,0BAA0B,YAAuB;AAC/D,QAAM,YAAY,oBAAI,IAAG;AACzB,QAAM,2BAA2B,oBAAI,IAAG;AAExC,aAAW,EAAC,MAAM,IAAG,KAAK,YAAY;AACpC,QAAI,CAAC,UAAU,IAAI,IAAI,GAAG;AACxB,gBAAU,IAAI,MAAM,CAAA,CAAE;IACxB;AACA,cAAU,IAAI,IAAI,GAAG,KAAK,GAAG;EAC/B;AAEA,aAAW,qBAAqB,UAAU,OAAM,GAAI;AAClD,QAAI,kBAAkB,SAAS,GAAG;AAChC,qCAA+B,mBAAmB,wBAAwB;IAC5E;EACF;AACA,SAAO;AACT;;;AFvQA,IAAM,EAAC,MAAAC,OAAM,QAAAC,SAAQ,YAAY,EAAC,WAAW,QAAQ,UAAU,KAAI,EAAC,IAAI;AAExE,IAAMC,aAAY;;;;EAIhB,2BAA2B;;;;EAI3B,yBAAyB;;;;EAIzB,SAAS;;;;EAIT,WAAW;;;;EAIX,eAAe;;;;;EAKf,eAAe;;;;EAIf,4BAA4B;;;;EAI5B,6BAA6B;;;;EAI7B,4BAA4B;;;;EAI5B,eAAe;;;;EAIf,cAAc;;;;EAId,uBAAuB;;;;EAIvB,sBAAsB;;;;EAItB,kBAAkB;;;;EAIlB,sBAAsB;;;;EAItB,wBAAwB;;;;EAIxB,gBAAgB;;;;;EAKhB,eAAe;;;;;EAKf,cAAc;;AAEhB,IAAMC,QAAY,WAAK,kBAAkB,qCAAqCD,UAAS;AACvF,IAAME,cAAkB,WAAK,mBAAmB,KAAK,QAAWD,KAAI;AACpE,IAAM,qBAAqB;AAiC3B,IAAI,0BAAgD;AACpD,IAAI;AAEE,IAAO,+BAAP,MAAO,8BAA4B;EAC9B;EACA,+BACL,oBAAI,QAAO;EACN;EACA;EACA;EAEA;EACA;;;EAIT;EACA,mBAAmB;EACnB,iBAAiB;EAEjB,YACI,mBAAoE,UAAkC;AACxG,SAAK,0BAAiC,iBAAS,SAAS,SAAQ,EAAG,cAAc,mBAAmB,CAAA,CAAE;AACtG,SAAK,kBAAkB,IAAI,IAAI,KAAK,wBAAwB,IAAG,CAAE;AACjE,SAAK,qBAAqB;AAC1B,SAAK,mBAAmB,iBACR,8BAAkB,OAAO,iBAAiB,KAAK,oBAAoB,IAAI;AACvF,SAAK,mBAAmB,iBACR,8BAAkB,OAAO,mBAAmB,KAAK,sBAAsB,IAAI;AAC3F,SAAK,4BAA4B,SAAS,cAAc,oBAAoB;AAC5E,SAAK,0BAA0B,kBAAkB,KAAK,QAAQ,IAAI;AAClE,SAAK,mCAAmC,SAAS,cAAc,6BAA6B;AAC5F,SAAK,iCAAiC,kBAAkB,KAAK,QAAQ,IAAI;AACzE,SAAK,iCAAiC,SAAS,cAAc,2BAA2B;AACxF,SAAK,+BAA+B,kBAAkB,KAAK,QAAQ,IAAI;EACzE;EAEA,OAAO,SAAS,EAAC,UAAU,mBAAmB,SAAQ,IAIlD;IACF,UAAU;IACV,mBAA+B,8BAAkB,kBAAkB,SAAQ;IAC3E,UAAiB,iBAAS,SAAS,SAAQ;KAC5C;AACC,QAAI,CAAC,qCAAqC,UAAU;AAClD,0CAAoC,IAAI,8BAA6B,mBAAmB,QAAQ;IAClG;AACA,WAAO;EACT;EAEA,OAAO,iBAAc;AACnB,wCAAoC;EACtC;EAEA,cAAc,SAAoB;AAChC,SAAK,KAAK,OAAM;EAClB;EAEA,uBAAuB,YAA2D,QAAe;AAC/F,QAAI,KAAK,gCAAgC,KAAK,iCAAiC,YAAY;AACzF,UAAI,QAAQ;AACV,QAAK,iBAAY,YAAiB,iBAAY,OAAO,oCAAoC;MAC3F;AACA,WAAK,+BAA+B;IACtC;EACF;EAEA,uBAAuB,gBAAgC,SAAgB;AACrE,UAAM,YAAY,KAAK,+BAA+B,cAAc;AACpE,cAAU,QAAQ,CAACE,WAA2D;AAC5E,YAAM,aAAaA,OAAM;AACzB,iBAAW,WAAW,OAAO;IAC/B,CAAC;EACH;EAEA,MAAM,iBAAiB,gBAAgC,mBAA0B;AAC/E,UAAM,YAAY,KAAK,+BAA+B,cAAc;AACpE,QAAI;AACJ,eAAW,qBAAqB,WAAW;AACzC,UAAI,CAAC,YAAY,kBAAkB,WAAW,UAAU,SAAS,UAAU,IAAI,GAAG;AAChF,mBAAW;MACb;IACF;AACA,QAAI,UAAU;AACZ,UAAI,mBAAmB;AACrB,aAAK,+BAA+B,SAAS;MAC/C;AACA,YAAa,iBAAS,OAAO,QAAQ;IACvC;EACF;EAEA,mBAAmB,iBAAiC;AAClD,UAAM,YAAY,gBAAgB,QAAQ,oBAAkB,KAAK,+BAA+B,cAAc,CAAC;AAC/G,cAAU,QAAQ,cAAY,UAAU,WAAW;MAAO;;IAAyB,CAAC;EACtF;EAEA,qBAAqB,KAAsC,UAAiB;AAC1E,QAAI,UAAU;AACZ,WAAK,gBAAgB,OAAO,GAAG;IACjC,OAAO;AACL,WAAK,gBAAgB,IAAI,GAAG;IAC9B;AAEA,SAAK,cAAa;EACpB;EAEA,MAAM,aAAa,gBAA8B;AAC/C,UAAM,cAAc,KAAK,+BAA+B,cAAc,EAAE,IAAI,cAAY,SAAS,UAAU;AAC3G,QAAI;AACJ,eAAW,uBAAuB,aAAa;AAC7C,UAAI,CAAC,cAAc,oBAAoB,UAAU,UAAU,IAAI,GAAG;AAChE,qBAAa;MACf;IACF;AACA,QAAI,YAAY;AACd,YAAa,iBAAS,OAAO,UAAU;IACzC;EACF;EAEA,6BAA6BA,QAAc;AACzC,SAAK,iCAAiC,IAAIA,MAAK;EACjD;EAEA,2BAA2BA,QAAc;AACvC,SAAK,+BAA+B,IAAIA,MAAK;EAC/C;EAEA,MAAM,SAAM;AACV,SAAK,mBAAmB;AACxB,QAAI,KAAK,gBAAgB;AACvB;IACF;AACA,SAAK,iBAAiB;AACtB,WAAO,KAAK,kBAAkB;AAC5B,WAAK,mBAAmB;AACxB,YAAM,OAAO,MAAM,KAAK,6BAA4B;AACpD,sBAAgB,SAAQ,EAAG,OAAO;IACpC;AACA,SAAK,iBAAiB;EACxB;EAEA,MAAM,+BAA4B;AAChC,UAAM,oBAAoB,KAAK,0BAA0B,IAAG;AAC5D,UAAM,4BAA4B,KAAK,iCAAiC,IAAG;AAC3E,UAAM,0BAA0B,KAAK,+BAA+B,IAAG;AAEvE,UAAM,sBAAsB,KAAK,wBAAuB;AACxD,QAAI,CAAC,oBAAoB,QAAQ;AAC/B,aAAO;QACL;QACA;QACA;QACA,QAAQ,CAAA;;IAEZ;AAEA,UAAM,uBAAuB,KAAK,8BAA8B,mBAAmB;AACnF,UAAM,sBAAsB,KAAK,wBAAwB,mBAAmB;AAE5E,UAAM,CAAC,SAAS,kBAAkB,IAAI,MAAM,QAAQ,IAAI;MACtD,KAAK,YAAY,oBAAoB;MACrC,KAAK,kBAAiB;KACvB;AAED,UAAM,kBAAkB,oBAAI,IAAG;AAE/B,aAAS,MAAM,GAAG,MAAM,qBAAqB,QAAQ,OAAO;AAC1D,YAAM,YAAY,qBAAqB,GAAG;AAC1C,YAAM,cAAc,UAAU,CAAC;AAC/B,YAAM,YAAY,YAAY,WAAW,aAAa,IAAG;AACzD,YAAM,WAAW,YAAY,WAAW,aAAa,kBAAiB;AACtE,YAAM,aAAa,YAAY;AAE/B,YAAM,QAAQ,uBAAuB,QACjC,UAAU,KAAK,cAAY,SAAS,WAAW,GAAE,MAAO,mBAAmB,GAAE,CAAE;AAEnF,YAAM,uBAAuB,oBAAoB,IAAI,WAAW,OAAM,CAAE,EAAE;AAC1E,YAAM,aAAa,uBAAuB;AAC1C,YAAM,eAAe,WAAW,kBAAkB,UAAU;AAE5D,YAAM,cAAc,QAAQ,GAAG;AAC/B,YAAM,cAAc,uBAAiC,0BAAgB,kBACjE,YAAY,MAAM,YAAY,2BAA2B,WAAW,gBAAgB,CAAC,CAAC,KAAK,KAC3F,YAAY,QAAQ,OAAO,WAAW,UAAU;AAEpD,UAAI,SAAS,KAAK,gBAAgB,IAAI,SAAS,GAAG;AAChD,aAAK,gBAAgB,OAAO,SAAS;AACrC,aAAK,cAAa;MACpB;AACA,YAAM,WAAW,CAAC,KAAK,gBAAgB,IAAI,SAAS;AAEpD,YAAM,SAA2B,KAAK,oBAAoB,SAAS;AACnE,YAAM,EAAC,MAAM,UAAS,IAAI,KAAK,6BAA6B,SAAS;AACrE,YAAM,OAAO;QACX,IAAI,YAAY,WAAW,oBAAmB;QAC9C,UAAU;QACV;QACA;QACA;QACA;QACA;;AAEF,WAAK,6BAA6B,IAAI,MAAM,SAAS;AAErD,UAAI,QAAQ,gBAAgB,IAAI,QAAQ;AACxC,UAAI,OAAO;AACT,cAAM,gBAAgB,KAAK,IAAI;AAC/B,cAAM,aAAa;MACrB,OAAO;AACL,cAAM,WAAW,KAAK,mBAAmB,+BAA+B,WAAW,YAAY;AAC/F,gBAAQ;UACN,KAAK;UACL,MAAM,WAAW,aAAa,YAAW;UACzC;UACA;UACA,iBAAiB,CAAC,IAAI;;AAExB,wBAAgB,IAAI,UAAU,KAAK;MACrC;IACF;AACA,WAAO;MACL;MACA;MACA;MACA,QAAQ,MAAM,KAAK,gBAAgB,OAAM,CAAE;;EAE/C;EAEA,mBAAmB,OAA4F;AAE7G,UAAM,aAAa,MAAM,KAAK;AAC9B,QAAI,WAAW,WAAM,iBACjB,KAAK,gBAAgB,IAAI,WAAW,IAAG,CAAE,GAAG;AAE9C,WAAK,gBAAgB,OAAO,WAAW,IAAG,CAAE;AAC5C,WAAK,cAAa;IACpB;AACA,WAAO,KAAK,OAAM;EACpB;EAEA,qBAAqB,OAA4F;AAE/G,UAAM,aAAa,MAAM,KAAK;AAC9B,QAAI,KAAK,gBAAgB,IAAI,WAAW,IAAG,CAAE,GAAG;AAC9C,YAAM,YAAwB,8BAAkB,kBAAkB,SAAQ,EAAG,uBAAsB;AACnG,YAAM,kCACF,UAAU,KAAK,cAAY,SAAS,WAAW,IAAG,MAAO,WAAW,IAAG,CAAE;AAC7E,UAAI,CAAC,iCAAiC;AAEpC,aAAK,gBAAgB,OAAO,WAAW,IAAG,CAAE;AAC5C,aAAK,cAAa;MACpB;IACF;AACA,WAAO,KAAK,OAAM;EACpB;EAEA,gBAAa;AACX,SAAK,wBAAwB,IAAI,MAAM,KAAK,KAAK,gBAAgB,OAAM,CAAE,CAAC;EAC5E;EAEA,6BAA6B,WAA6D;AAExF,UAAM,0BAA0B,UAAU,KAAK,cAAY,QAAQ,SAAS,WAAW,UAAS,CAAE,CAAC;AACnG,UAAM,aAAa,yBAAyB;AAC5C,QAAI,CAAC,cAAc,CAAC,WAAW,UAAS,GAAI;AAC1C,aAAO;QAAC,MAAI;;MAAqD;IACnE;AAEA,UAAM,YAAY,WAAW,UAAS;AACtC,QAAI,WAAW,WAAU,GAAI;AAC3B,aAAO,EAAC,MAAI,YAA6C,WAAW,UAAS;IAC/E;AAEA,WAAO,EAAC,MAAI,0BAA2D,WAAW,UAAS;EAC7F;EAEA,+BAA+B,gBAA8B;AAC3D,UAAM,YAAY,KAAK,6BAA6B,IAAI,cAAc;AACtE,IAAAC,0BAAyB,SAAS;AAClC,WAAO;EACT;EAEA,MAAM,oBAAiB;AACrB,UAAM,UAAa,YAAQ,QAAQ,SAAQ,EAAG,OAAW,mBAAc,qBAAqB;AAC5F,QAAI,SAAS,WAAW,QAAQ;AAC9B,aAAO,MAAe,kCAAyB,yBAAyB,SAAQ,EAAG,wBAC/E,QAAQ,WAAW,CAAC,EAAE,SAAQ,CAAE;IACtC;AACA,WAAO;EACT;EAEA,0BAAuB;AACrB,UAAM,YAAY,KAAK,mBAAmB,uBAAsB,EAAG,OAC/D,wBACI,mBAAmB,WAAW,aAAa,QAAO,EAAG,KAAI,MAAiB,qBAAU,aAAa,QAAQ;AAEjH,cAAU,KAAK,CAAC,OAAO,UAAU,MAAM,WAAW,UAAU,MAAM,UAAU,CAAC;AAE7E,UAAM,SAAS,CAAA;AACf,QAAI,iBAAgE;AACpE,QAAI,eAAuD;AAC3D,eAAW,YAAY,WAAW;AAChC,UAAI,SAAS,eAAe,kBAAmB,gBAAgB,SAAS,WAAW,UAAU,YAAY,GAAI;AAC3G,eAAO,KAAK,QAAQ;AACpB,yBAAiB,SAAS;AAC1B,uBAAe,SAAS;MAC1B;IACF;AACA,WAAO;EACT;EAEA,8BAA8B,qBAAuE;AAEnG,UAAM,MAAM,IAAa,uBAAa,SAAQ;AAC9C,eAAW,sBAAsB,qBAAqB;AACpD,YAAM,aAAa,mBAAmB;AACtC,UAAI,IAAI,WAAW,GAAE,GAAI,kBAAkB;IAC7C;AACA,UAAM,MAA4D,CAAA;AAClE,eAAW,MAAM,IAAI,UAAS,GAAI;AAChC,YAAM,YAAY,MAAM,KAAK,IAAI,IAAI,EAAE,CAAC;AACxC,UAAI,UAAU,QAAQ;AACpB,YAAI,KAAK,SAAS;MACpB;IACF;AACA,WAAO;EACT;EAEA,wBAAwB,qBAAuE;AAE7F,UAAM,SAAS,IAAa,uBAAa,SAAQ;AAEjD,eAAW,sBAAsB,qBAAqB;AACpD,YAAM,aAAa,mBAAmB;AACtC,aAAO,IAAI,WAAW,OAAM,GAAI,WAAW,GAAE,CAAE;IACjD;AAEA,WAAO;EACT;EAEA,oBAAoB,WAA6D;AAC/E,UAAM,aAAa,UAAU,KAAK,cAAY,SAAS,WAAW,QAAO,CAAE;AAC3E,UAAM,cAAc,UAAU,KAAK,cAAY,CAAC,SAAS,WAAW,QAAO,CAAE;AAC7E,QAAI;AACJ,QAAI,YAAY;AACd,eAAS,cAAa,kBAAiC;IACzD,OAAO;AACL,eAAM;IACR;AACA,WAAO;EACT;EAEA,YAAY,WAA+D;AAEzE,WAAO,QAAQ,IAAI,UAAU,IAAI,OAAO,CAAC,EAAC,YAAY,EAAC,aAAY,EAAC,CAAC,MAAK;AACxE,YAAM,cAAc,MAAM,aAAa,mBAAmB,EAAC,gBAAgB,KAAI,CAAC;AAChF,aAAiB,sBAAY,YAAY,mBAAmB,WAAW;IACzE,CAAC,CAAC;EACJ;;AAsCK,IAAMC,gBAAqB,CAAC,OAAO,SAAS,WAAU;AAE3D,EAAAN,QAAOD;aACO,WAAO,aAAmB,oBAAc,CAAC;aACzC,WAAO,aAAa,2BAAqB,CAAC;iBAC3B,uBAAQ,wBAAwB,CAAC;;;mBAG7C,MAAM,YAAY;qBAChB,MAAM,cAAc;;yBAEhB,MAAM,yBAAyB;;;sEAGc,MAAM,yBAAyB,YAAY,MAAM,uCAAuC,UAAwB,sBAAO,gBAAgB,EAAE,MAAM,EAAE,QAAQ,KAAI,CAAE,CAAC;kBACpNI,YAAWF,WAAU,yBAAyB,CAAC;;;;;qBAK5C,MAAM,YAAY;uBAChB,MAAM,cAAc;;2BAEhB,MAAM,uBAAuB;;;sGAG8C,MAAM,uBAAuB,YAAY,MAAM,sCAAsC,KAAK,MAAI,CAAC,UAAwB,sBAAO,2BAA2B,EAAE,MAAM,EAAE,QAAQ,KAAI,CAAE,CAAC;oBACpQE,YAAWF,WAAU,uBAAuB,CAAC;;;;UAIvD,OACA,MAAM,kBACN,WAAS,MAAM,KACf,CAAC,OAAO,eAAeF;6BACJ,SAAS,EAAC,QAAQ,MAAM,kBAAiB,CAAC,CAAC;sCAClC,eAAe,CAAC;qCACjB,eAAe,MAAM,iBAAiB,SAAS,CAAC;;gCAErD,MAAM,IAAI;sCACJ,MAAM,GAAG;0BACrB,KAAK,MAAM,QAAQ,CAAC;4BAClB,MAAM,mBAAmB,KAAK,QAAW,KAAK,CAAC;sCACrC,MAAM,wBAAwB,KAAK,QAAW,KAAK,CAAC;;iCAEzD,MAAM,cAAc;+BACtB,MAAM,YAAY;;;;;;qCAMZ,MAAM,gBAAgB;IAAK,UAAQ,KAAK,WAAM;;EAA6B,CAAC;oCAC7E,MAAM,qBAAqB,KAAK,QAAW,KAAK,CAAC;;kCAErC,sBAAO,kBAAkB,EAAE,MAAM,EAAC,QAAQ,KAAI,CAAE,CAAC;;4DAErC,MAAM,GAAG;sBAC/C,MAAM,IAAI;;wBAER,MAAM,yBAAyB,IAAI,MAAM,GAAG,CAAC;;;;;;mCAMlC,MAAM,uCAAuC,KAAK,QAAW,MAAM,eAAe,CAAC;kCACpFI,YAAWF,WAAU,0BAA0B,CAAC;uCAC3CE,YAAWF,WAAU,0BAA0B,CAAC;kCACvC,sBAAO,mBAAmB,EAAE,MAAM,EAAC,OAAO,KAAI,CAAC,CAAC;;;;;cAKlF,OACA,MAAM,iBACN,UAAQ,KAAK,IACb,CAAC,MAAM,cAAcF;6BACN,SAAS;IACd,mBAAmB;IACnB,KAAK,KAAK;IACV,0BAA0B,KAAK,SAAI;IACnC,UAAU,KAAK,SAAI;GACpB,CAAC;6CACqB,cAAc,CAAC;4CAChB,cAAc,MAAM,gBAAgB,SAAS,CAAC;iCACzD,UAAU,MAAM,YAAY,IAAI,KAAK,EAAE,GAAG,eAAe,CAAC;;;mCAGxD,MAAM,uBAAuB,KAAK,QAAW,MAAM,MAAM,QAAQ,CAAC;6BACxE,MAAM,gBAAgB;+BACpB,MAAM,cAAc;;;;uCAIZ,KAAK,QAAQ;;2CAET,KAAK,WAAM,eAAmC;qCACpD,KAAK,WAAM,SAA6B;oCACzC,MAAM,oBAAoB,KAAK,QAAW,IAAI,CAAC;;kCAEnC,sBAAO,YAAY,EAAE,MAAM,EAAC,QAAQ,KAAI,CAAC,CAAC;;sDAEpC,MAAM,wBAAwB,KAAK,QAAW,IAAI,CAAC;kCACvE,UAAU,MAAM,YAAY,IAAI,KAAK,EAAE,GAAG,kBAAkB,CAAC;kCAC/C,sBAAO,4BAA4B,EAAE,MAAM,EAAC,OAAO,KAAI,CAAC,CAAC,IAAI,MAAM,YAAY,IAAI,KAAK,EAAE,GAAG,WAAW;;sBAElI,MAAM,WAAWA;gEACyB,MAAM,qBAAqB,KAAK,QAAW,IAAI,CAAC;0CACtE,KAAK,SAAI,aAAiDI,YAAWF,WAAU,YAAY,IAAIE,YAAWF,WAAU,aAAa,CAAC;0CACpH,sBAAO,iBAAiB,EAAE,MAAM,EAAC,OAAO,KAAI,CAAC,CAAC;;uCAE3D,WAAO;;qCAEb,MAAM,uBAAuB,KAAK,QAAW,IAAI,CAAC;oCACnDE,YAAWF,WAAU,gBAAgB,CAAC;yCACjCE,YAAWF,WAAU,gBAAgB,CAAC;oCAC7B,sBAAO,mBAAmB,EAAE,MAAM,EAAC,OAAO,KAAI,CAAC,CAAC;;;6CAGrD,KAAK,QAAQ;;uBAEnC,CAAC;uBACD,CAAC;;aAEX,MAAM;AAEnB;AAEM,IAAO,kBAAP,MAAO,yBAA2B,WAAO,KAAI;EACxC;EACA;EAET,OAAO,SAAS,EAAC,SAAQ,IAAyB,EAAC,UAAU,MAAK,GAAC;AACjE,QAAI,CAAC,2BAA2B,UAAU;AACxC,gCAA0B,IAAI,iBAAgB,MAAS;IACzD;AACA,WAAO;EACT;EAEA,YAAY,SAAgC,OAAaK,eAAY;AAEnE,UAAM,SAAS,EAAC,cAAc,KAAI,CAAC;AACnC,SAAK,QAAQ;AACb,SAAK,cAAc,6BAA6B,SAAQ;AACxD,SAAK,KAAK,YAAY,OAAM;EAC9B;EAEA,6BAA6B;EAC7B,2BAA2B;EAE3B,qBAAqB;EACrB,oBAAuC,CAAA;EACvC,4BAA4B,oBAAI,IAAG;EACnC,yBAAyB,oBAAI,IAAG;EAEhC,IAAI,KAAK,MAAyB;AAChC,SAAK,6BAA6B,KAAK;AACvC,SAAK,2BAA2B,KAAK;AACrC,SAAK,qBAAqB,KAAK;AAC/B,SAAK,oBAAoB,KAAK;AAC9B,SAAK,yBAAyB,oBAAI,IAAG;AAErC,UAAM,aAA0B,CAAA;AAChC,eAAW,SAAS,KAAK,QAAQ;AAC/B,iBAAW,KAAK,EAAC,MAAM,MAAM,MAAM,KAAK,MAAM,IAAG,CAAC;AAElD,iBAAW,QAAQ,MAAM,iBAAiB;AACxC,aAAK,uBAAuB,IAAI,KAAK,IAAI;UACvC,iBAAiB,KAAK,8BAA8B,IAAI;UACxD,aAAsB,0BAAgB,qBAAqB,KAAK,aAAa,kBAAkB;UAC/F,oBAAoB,KAAK,uBAAuB,KAAK,MAAM,KAAK,SAAS;SAC1E;MACH;IACF;AACA,SAAK,4BAA4B,0BAA0B,UAAU;AAErE,SAAK,cAAa;EACpB;EAES,WAAQ;AACf,SAAK,cAAa;EACpB;EAES,gBAAa;AACpB,UAAM,QAA8B;MAClC,cAAc,KAAK,cAAc,KAAK,IAAI;MAC1C,gBAAgB,KAAK,gBAAgB,KAAK,IAAI;MAC9C,2BAA2B,KAAK;MAChC,yCAAyC,KAAK,yCAAyC,KAAK,IAAI;MAChG,yBAAyB,KAAK;MAC9B,uCAAuC,KAAK,uCAAuC,KAAK,IAAI;MAC5F,kBAAkB,KAAK;MACvB,mBAAmB,KAAK;MACxB,yBAAyB,KAAK,yBAAyB,KAAK,IAAI;MAChE,oBAAoB,KAAK,oBAAoB,KAAK,IAAI;MACtD,mBAAmB,KAAK,mBAAmB,KAAK,IAAI;MACpD,sBAAsB,KAAK,sBAAsB,KAAK,IAAI;MAC1D,0BAA0B,KAAK;MAC/B,wCAAwC,KAAK,wCAAwC,KAAK,IAAI;MAC9F,aAAa,KAAK;MAClB,wBAAwB,KAAK,wBAAwB,KAAK,IAAI;MAC9D,kBAAkB,KAAK,kBAAkB,KAAK,IAAI;MAClD,yBAAyB,KAAK,yBAAyB,KAAK,IAAI;MAChE,qBAAqB,KAAK,mBAAmB,KAAK,IAAI;MACtD,sBAAsB,KAAK,sBAAsB,KAAK,IAAI;MAC1D,wBAAwB,KAAK,wBAAwB,KAAK,IAAI;;AAEhE,SAAK,MAAM,OAAO,CAAA,GAAI,KAAK,cAAc;AAIzC,QAAI,KAAK,eAAe,cAAc,gBAAgB,MAAM,MAAM;AAChE,YAAM,UAAU,KAAK,eAAe,cAA2B,oBAAoB;AACnF,eAAS,aAAa,YAAY,GAAG;IACvC;EACF;EAEA,MAAM,cAAc,OAAY;AAC9B,UAAM,gBAAgB,MAAM;AAC5B,UAAM,KAAK,aAAa,aAAa;AACrC,UAAM,QAAO;EACf;EAEA,yBAAyB,OAAwB,OAAY;AAC3D,SAAK,8BAA8B,OAAO,KAAK;AAC/C,UAAM,QAAO;EACf;EAEA,oBAAoB,OAAwB,OAAY;AACtD,UAAM,cAAc,MAAM;AAC1B,UAAM,WAAW,YAAY;AAC7B,SAAK,KAAK,YAAY,qBAAqB,MAAM,KAAK,MAAM,QAAQ;EACtE;EAEA,MAAM,mBAAmB,OAAY;AACnC,UAAM,WAAW,MAAM;AACvB,UAAM,KAAK,aAAa,QAAQ;AAIhC,IAAK,iBAAY,YAAiB,iBAAY,OAAO,mCAAmC;AACxF,UAAM,QAAO;EACf;EAEA,sBAAsB,OAAwB,OAAY;AACxD,IAAK,iBAAY,YAAiB,iBAAY,OAAO,gCAAgC;AACrF,UAAM,UAAU,MAAM;AACtB,UAAM,gBAAgB,QAAQ,UAAS,YAA2B;AAClE,UAAM,gBAAgB,MAAM,gBAAgB,OAAO,UAAQ,KAAK,WAAW,aAAa;AACxF,kBAAc,QAAQ,UAAO;AAC3B,WAAK,YAAY,uBAAuB,MAAM,QAAQ,OAAO;IAC/D,CAAC;AACD,UAAM,QAAO;EACf;EAEA,wCAAwC,OAAyB,OAAY;AAC3E,IAAK,iBAAY,YAAiB,iBAAY,OAAO,wCAAwC;AAC7F,SAAK,KAAK,YAAY,mBAAmB,KAAK;AAC9C,UAAM,QAAO;EACf;EAEA,wBAAwB,MAAsB,UAAmB,OAAY;AAC3E,SAAK,8BAA8B,OAAO,MAAM,QAAQ;AACxD,UAAM,QAAO;EACf;EAEA,MAAM,kBAAkB,OAAY;AAClC,UAAM,SAAS,MAAM;AACrB,UAAM,KAAK,aAAa,MAAM;AAC9B,UAAM,QAAO;EACf;EAEA,yBAAyB,MAAsB,OAAY;AACzD,SAAK,KAAK,YAAY,aAAa,IAAI;AACvC,UAAM,QAAO;EACf;EAEA,sBAAsB,MAAsB,OAAY;AACtD,SAAK,KAAK,YAAY;MAAiB;MAAM;;IAA4B;AACzE,UAAM,QAAO;EACf;EAEA,wBAAwB,MAAsB,OAAY;AACxD,IAAK,iBAAY,YAAiB,iBAAY,OAAO,iCAAiC;AACtF,SAAK,KAAK,YAAY,mBAAmB,CAAC,IAAI,CAAC;AAC/C,UAAM,QAAO;EACf;EAEA,MAAM,gBAAgB,OAAoB;AACxC,QAAI,CAAC,MAAM,UAAU,EAAE,MAAM,kBAAkB,cAAc;AAC3D;IACF;AAEA,QAAI,MAAM,QAAQ,UAAU,MAAM,QAAQ,OAAO;AAC/C,YAAM,QAAQ,IAAI;AAClB,aAAO,MAAM,KAAK,oBAAoB,MAAM,GAAG;IACjD;AACA,QAAa,4BAAkB,cAAc,MAAM,GAAG,GAAG;AACvD,YAAM,QAAQ,IAAI;AAClB,aAAO,MAAM,KAAK,gBAAgB,MAAM,KAAK,MAAM,MAAM;IAC3D;AACA,QAAa,4BAAkB,kBAAkB,KAAK,GAAG;AACvD,YAAM,gBAAgB,MAAM;AAC5B,YAAM,KAAK,aAAa,aAAa;AACrC,YAAM,QAAQ,cAAc,cAAgC,OAAO;AACnE,UAAI,OAAO;AACT,cAAM,MAAK;MACb;AACA,YAAM,QAAO;IACf;AACA;EACF;EAEA,MAAM,aAAa,SAAyB;AAC1C,QAAI,CAAC,SAAS;AACZ;IACF;AACA,SAAuB,wBAAM,6CAA6C,MAAK;AAC7E,YAAM,eAAe,KAAK,eAAe,cAAc,gBAAgB;AACvE,oBAAc,aAAa,YAAY,IAAI;AAC3C,cAAQ,aAAa,YAAY,GAAG;AACpC,cAAQ,MAAK;IACf,CAAC;EACH;EAEA,MAAM,gBAAgB,KAA0C,QAAmB;AACjF,UAAM,wBAAwB,CAAC,gBAAoC,aAAoC;AACrG,UAAI,UAAU;AACZ,eAAyB,wBAAM,0BAA0B,MAAK;AAC5D,yBAAe,aAAa,QAAQ,EAAE;QACxC,CAAC;MACH;AACA,aAAyB,wBAAM,0BAA0B,MAAK;AAC5D,uBAAe,gBAAgB,MAAM;MACvC,CAAC;IACH;AACA,UAAM,WAAW,MAAM,kCAAkC,QAAQ,KAAK,qBAAqB;AAC3F,WAAO,MAAM,KAAK,aAAa,QAAQ;EACzC;EAEA,MAAM,oBAAoB,KAAiB;AACzC,QAAI,QAAQ,QAAQ;AAClB,YAAM,wBAAwB,KAAK,eAAe,cAA2B,oBAAoB;AACjG,aAAO,MAAM,KAAK,aAAa,qBAAqB;IACtD;AACA,QAAI,QAAQ,OAAO;AACjB,YAAM,YAAY,KAAK,kBAAkB;AACzC,UAAI,cAAc,GAAG;AACnB,cAAM,4BAA4B,KAAK,eAAe,cAA2B,mBAAmB;AACpG,eAAO,MAAM,KAAK,aAAa,yBAAyB;MAC1D;AACA,YAAM,iBAAiB,YAAY;AACnC,YAAM,YAAY,KAAK,kBAAkB,cAAc;AAEvD,UAAI,UAAU,UAAU;AACtB,cAAM,qBACF,KAAK,eAAe,cAA2B,4CAA4C;AAC/F,eAAO,MAAM,KAAK,aAAa,kBAAkB;MACnD;AACA,YAAM,0BAA0B,KAAK,eAAe,cAA2B,6BAA6B;AAC5G,aAAO,MAAM,KAAK,aAAa,uBAAuB;IACxD;EACF;EAEA,8BAA8B,OAAc,iBAAgC;AAC1E,UAAM,EAAC,gBAAe,IAAI;AAC1B,UAAM,OAAO,IAAO,gBAAY,YAAY,KAAK;AAEjD,SAAK,eAAc,EAAG,WAAWH,YAAWF,WAAU,0BAA0B,GAAG,MAAK;AACtF,MAAK,iBAAY,YAAiB,iBAAY,OAAO,uCAAuC;AAC5F,WAAK,KAAK,YAAY,mBAAmB,eAAe;IAC1D,GAAG,EAAC,cAAc,0BAAyB,CAAC;AAC5C,UAAM,cAAc,KAAK,kBAAkB,OAAO,WAAS,UAAU,eAAe;AACpF,SAAK,eAAc,EAAG,WAAWE,YAAWF,WAAU,sBAAsB,GAAG,MAAK;AAClF,YAAMM,mBAAkB,YAAY,IAAI,CAAC,EAAC,iBAAAA,iBAAe,MAAMA,gBAAe,EAAE,KAAI;AACpF,WAAK,KAAK,YAAY,mBAAmBA,gBAAe;IAC1D,GAAG,EAAC,UAAU,YAAY,WAAW,GAAG,cAAc,2BAA0B,CAAC;AACjF,SAAK,eAAc,EAAG,WAAWJ,YAAWF,WAAU,oBAAoB,GAAG,MAAK;AAChF,YAAMM,mBAAkB,KAAK,kBAAkB,IAAI,CAAC,EAAC,iBAAAA,iBAAe,MAAMA,gBAAe,EAAE,KAAI;AAC/F,WAAK,KAAK,YAAY,mBAAmBA,gBAAe;IAC1D,GAAG,EAAC,cAAc,yBAAwB,CAAC;AAE3C,UAAM,kBACF,gBAAgB;MAAO,oBAAkB,eAAe,WAAM;;IAA6B;AAC/F,SAAK,aAAY,EAAG,WAAWJ,YAAWF,WAAU,0BAA0B,GAAG,MAAK;AACpF,MAAK,iBAAY,YAAiB,iBAAY,OAAO,+CAA+C;AACpG,iBAAW,kBAAkB,iBAAiB;AAC5C,aAAK,YAAY,uBAAuB,gBAAgB,IAAI;MAC9D;IACF,GAAG,EAAC,UAAU,gBAAgB,WAAW,GAAG,cAAc,0BAAyB,CAAC;AACpF,UAAM,mBACF,gBAAgB;MAAO,oBAAkB,eAAe,WAAM;;IAA8B;AAChG,SAAK,aAAY,EAAG,WAAWE,YAAWF,WAAU,2BAA2B,GAAG,MAAK;AACrF,MAAK,iBAAY,YAAiB,iBAAY,OAAO,+CAA+C;AACpG,iBAAW,kBAAkB,kBAAkB;AAC7C,aAAK,YAAY,uBAAuB,gBAAgB,KAAK;MAC/D;IACF,GAAG,EAAC,UAAU,iBAAiB,WAAW,GAAG,cAAc,2BAA0B,CAAC;AAEtF,SAAK,KAAK,KAAI;EAChB;EAEA,8BAA8B,OAAc,gBAAgC,UAAiB;AAC3F,UAAM,QAAQ,KAAK,kBAAkB,IAAI,CAAC,EAAC,gBAAe,MAAM,eAAe,EAAE,KAAI;AACrF,UAAM,aAAa,MAAM,OAAO,UAAQ,SAAS,cAAc;AAE/D,UAAM,OAAO,IAAO,gBAAY,YAAY,KAAK;AACjD,UAAM,qBAAqB,eAAe,SAAI,aAC1CE,YAAWF,WAAU,YAAY,IACjCE,YAAWF,WAAU,aAAa;AACtC,SAAK,cAAa,EAAG,WAAWE,YAAWF,WAAU,cAAc,GAAG,MAAK;AACzE,WAAK,KAAK,YAAY,aAAa,cAAc;IACnD,GAAG,EAAC,cAAc,qBAAoB,CAAC;AAEvC,SAAK,YAAW,EAAG,WAAW,oBAAoB,MAAK;AACrD,WAAK,KAAK,YAAY;QAAiB;QAAgB;;MAA6B;IACtF,GAAG,EAAC,UAAU,CAAC,UAAU,cAAc,kBAAiB,CAAC;AAEzD,SAAK,eAAc,EAAG,WAClBE,YAAWF,WAAU,oBAAoB,GACzC,MAAM,QAAQ,KAAK,OAAO,UAAQ,KAAK,YAAY,uBAAuB,MAAM,IAAI,CAAC,GAAG;MACtF,UAAU,MAAM;QAAM,UAAQ,KAAK,WAAM;;MAA6B;MACtE,cAAc;KACf;AACL,SAAK,eAAc,EAAG,WAClBE,YAAWF,WAAU,qBAAqB,GAC1C,MAAM,QAAQ,KAAK,OAAO,UAAQ,KAAK,YAAY,uBAAuB,MAAM,KAAK,CAAC,GAAG;MACvF,UAAU,MAAM;QAAM,UAAQ,KAAK,WAAM;;MAA8B;MACvE,cAAc;KACf;AAEL,SAAK,cAAa,EAAG,WAAWE,YAAWF,WAAU,gBAAgB,GAAG,MAAK;AAC3E,MAAK,iBAAY,YAAiB,iBAAY,OAAO,gCAAgC;AACrF,WAAK,KAAK,YAAY,mBAAmB,CAAC,cAAc,CAAC;IAC3D,GAAG,EAAC,cAAc,oBAAmB,CAAC;AACtC,SAAK,cAAa,EAAG,WAAWE,YAAWF,WAAU,sBAAsB,GAAG,MAAK;AACjF,WAAK,KAAK,YAAY,mBAAmB,UAAU;IACrD,GAAG,EAAC,UAAU,WAAW,WAAW,GAAG,cAAc,2BAA0B,CAAC;AAChF,SAAK,cAAa,EAAG,WAAWE,YAAWF,WAAU,oBAAoB,GAAG,MAAK;AAC/E,YAAM,kBAAkB,KAAK,kBAAkB,IAAI,CAAC,EAAC,iBAAAM,iBAAe,MAAMA,gBAAe,EAAE,KAAI;AAC/F,WAAK,KAAK,YAAY,mBAAmB,eAAe;IAC1D,GAAG,EAAC,cAAc,yBAAwB,CAAC;AAE3C,SAAK,KAAK,KAAI;EAChB;EAEA,uBAAuB,MAAwC,WAAkB;AAC/E,YAAQ,MAAM;MACZ,KAAA;AACE,eAAO;MACT,KAAA;AACE,QAAAF,0BAAyB,SAAS;AAClC,eAAOF,YAAWF,WAAU,eAAe,EAAC,KAAK,UAAS,CAAC;MAC7D,KAAA;AACE,QAAAI,0BAAyB,SAAS;AAClC,eAAOF,YAAWF,WAAU,cAAc,EAAC,KAAK,UAAS,CAAC;IAC9D;EACF;EAEA,8BAA8B,gBAA8B;AAC1D,QAAI;AACJ,YAAQ,eAAe,QAAQ;MAC7B,KAAA;AACE,8BAAsBE,YAAWF,WAAU,OAAO;AAClD;MACF,KAAA;AACE,8BAAsBE,YAAWF,WAAU,SAAS;AACpD;MACF,KAAA;AACE,8BAAsBE,YAAWF,WAAU,aAAa;AACxD;IACJ;AACA,QAAI,CAAC,eAAe,OAAO;AACzB,aAAO;IACT;AACA,WAAOE,YAAWF,WAAU,eAAe,EAAC,KAAK,oBAAmB,CAAC;EACvE;EAEA,mBAAmB,MAAsB,OAAY;AACnD,UAAM,UAAU,MAAM;AACtB,SAAK,YAAY,uBAAuB,MAAM,QAAQ,OAAO;EAC/D;EAEA,uCAAuC,GAAQ;AAC7C,UAAM,EAAC,QAAO,IAAI,EAAE;AACpB,SAAK,YAAY,2BAA2B,OAAO;EACrD;EAEA,yCAAyC,GAAQ;AAC/C,UAAM,EAAC,QAAO,IAAI,EAAE;AACpB,SAAK,YAAY,6BAA6B,OAAO;EACvD;;;;AGzgCF;;;;;;;;AA8BA,YAAYO,aAAY;AACxB,YAAYC,WAAU;AACtB,YAAYC,WAAU;AACtB,YAAYC,eAAc;AAC1B,YAAYC,UAAS;AAErB,YAAYC,eAAc;AAC1B,YAAY,iBAAiB;AAC7B,YAAY,qBAAqB;AACjC,YAAYC,gBAAe;AAC3B,YAAYC,iBAAgB;AAC5B,YAAYC,SAAQ;AACpB,YAAYC,oBAAmB;;;ACrC/B,IAAO,mCAAQ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBAwIC,YAAY,QAAQ,4BAA4B,CAAC;;;AD/FjE,IAAMC,aAAY;;;;EAIhB,WAAW;;;;EAIX,WAAW;;;;EAIX,cAAc;;;;EAId,wBAAwB;;;;EAIxB,UAAU;;;;EAIV,gBAAgB;;;;EAIhB,mBAAmB;;;;;EAKnB,mBAAmB;;;;;;EAMnB,cAAc;;AAEhB,IAAMC,QAAY,WAAK,kBAAkB,0CAA0CD,UAAS;AAC5F,IAAME,cAAkB,WAAK,mBAAmB,KAAK,QAAWD,KAAI;AAEpE,IAAI;AAEE,IAAO,uBAAP,MAAO,8BAAgC,SAAK,WAAU;EAEzC;EACA;EACA;EACA;EACA;EACT;EACS;EACT;EACS;EACA;EACT;EACS;EACA;EACT;EACA,oBAA0D;EAElE,cAAA;AACE,UAAM;MACJ,OAAO,GAAiB,uBAAQ,mBAAmB,CAAC;MACpD,OAAOC,YAAWF,WAAU,SAAS;MACrC,QAAQ;MACR,cAAc;KACf;AACD,SAAK,oBAAoB,gCAA0B;AAEnD,KAAC,EAAC,SAAS,KAAK,0BAA0B,UAAU,KAAK,0BAAyB,IAC7E,KAAK,0CAAyC;AACnD,SAAK,eAAe,YAAY,KAAK,wBAAwB;AAE7D,SAAK,0BAA0B,KAAK,eAAe,YAAY,OAAO,mBAAmB;AACzF,SAAK,wBAAwB,cAAcE,YAAWF,WAAU,SAAS;AACzE,SAAK,wBAAwB,WAAW;AAExC,SAAK,2BAA2B,KAAK,eAAe,YAAY,OAAO,6BAA6B;AACpG,UAAM,OAAO,IAAe,iBAAK,KAAI;AACrC,SAAK,OAAO;MACV,UAAU;MACV,OAAO;MACP,OAAO;MACP,QAAQ;;AAEV,SAAK,UAAU,IAAI,yBAAyB;AAC5C,SAAK,yBAAyB,YAAY,IAAI;AAC9C,SAAK,yBAAyB,YAAY,SAAS,eAAeE,YAAWF,WAAU,iBAAiB,CAAC,CAAC;AAC1G,SAAK,yBAAyB,WAAW;AAEzC,SAAK,QAAQ,IAAO,cAAU,UAAS;AACvC,SAAK,OAAO,IAAO,gBAAY,YAAY,KAAK,OAAO,MAAS,gBAAY,SAAS,WAAW;AAChG,SAAK,eAAe,YAAY,KAAK,KAAK,OAAO;AACjD,SAAK,KAAK,QAAQ,iBAAiB,eAAe,KAAK,cAAc,KAAK,IAAI,GAAG,KAAK;AACtF,SAAK,gBAAgB,KAAK,KAAK,SAAS,WAAQ;AAC9C,YAAM,OAAO,KAAK,KAAK,YAAa,MAAM,MAAsB;AAChE,UAAI,MAAM;AACR,aAAK,aAAa,IAAI;AACtB,cAAM,QAAQ,IAAI;MACpB;IACF,CAAC;AAED,SAAK,yBAAyB,KAAK,6BAA4B;AAC/D,SAAK,uBAAuB,UAAU,IAAI,QAAQ;AAClD,SAAK,eAAe,YAAY,KAAK,sBAAsB;AAE3D,SAAK,mBAAmB;AACxB,SAAK,eAAe,IAAa,uBAAa,iBAAgB;AAE9D,SAAK,kBAAkB,IAAW,kBAAU,UAAU,GAAG;AACzD,SAAK,0BAA0B;AAC/B,SAAK,OAAM;AAEX,SAAK,sBAAsB,IAAW,kBAAU,UAAU,GAAG;AAC7D,SAAK,0BAA0B,oBAAI,IAAG;AAEtC,IAAI,mBAAc,cAAc,SAAQ,EAAG,iBACnC,mBAAc,eAAmB,mBAAc,OAAO,mBAAmB,KAAK,mBAAmB,IAAI;EAC/G;EAEA,OAAO,SAAS,OAEZ,EAAC,UAAU,KAAI,GAAC;AAClB,UAAM,EAAC,SAAQ,IAAI;AACnB,QAAI,CAAC,gCAAgC,UAAU;AAC7C,qCAA+B,IAAI,sBAAoB;IACzD;AAEA,WAAO;EACT;EAEA,cAAc,SAAoB;AAChC,SAAK,mBAAmB;AACxB,SAAK,0BAA0B,UAAU;AACzC,SAAK,0BAA0B;AAC/B,SAAK,OAAM;EACb;EAEQ,oBAAiB;AACvB,SAAK,OAAM;EACb;EAEQ,yBAAyB,eAAmD;AAElF,QAAI,KAAK,sBAAsB,eAAe;AAC5C;IACF;AAEA,QAAI,KAAK,mBAAmB;AAC1B,WAAK,kBAAkB,iBAAgB,EAAG,oBAClC,sBAAiB,OAAO,mBAAmB,KAAK,mBAAmB,IAAI;IACjF;AAEA,SAAK,oBAAoB;AACzB,QAAI,KAAK,mBAAmB;AAC1B,WAAK,kBAAkB,iBAAgB,EAAG,iBAClC,sBAAiB,OAAO,mBAAmB,KAAK,mBAAmB,IAAI;IACjF;EACF;EAEA,SAAM;AACJ,SAAK,KAAK,gBAAgB,SAAS,MAAM,KAAK,SAAQ,CAAE;EAC1D;EAEA,MAAM,WAAQ;AACZ,SAAK,aAAa,WAAU;AAE5B,SAAK,yBAAyB,UAAU,IAAI,QAAQ;AAEpD,UAAM,UAAa,YAAQ,QAAQ,SAAQ,EAAG,OAAW,mBAAc,qBAAqB;AAC5F,SAAK,yBAAyB,SAAS,iBAAiB,IAAI;AAC5D,QAAI,CAAC,SAAS;AACZ,WAAK,wBAAwB,UAAU,OAAO,QAAQ;AACtD,WAAK,yBAAyB,UAAU,IAAI,QAAQ;AACpD,WAAK,uBAAuB,UAAU,IAAI,QAAQ;AAClD,WAAK,MAAM,WAAW,CAAA,CAAE;AACxB,MAAG,YAAQ,QAAQ,SAAQ,EAAG,UAAc,mBAAc,WAAW,IAAI;AACzE;IACF;AAEA,SAAK,wBAAwB,UAAU,IAAI,QAAQ;AAEnD,UAAM,eAAe,CAAA;AACrB,UAAM,iBAAiB,oBAAI,IAAG;AAC9B,eAAW,SAAS,QAAQ,YAAY;AACtC,YAAM,cAAc,KAAK,2BAA2B,OAAO,KAAK,cAAc,KAAK,YAAY,KAAK,IAAI,CAAC;AACzG,mBAAa,KAAK,WAAW;AAC7B,UAAI,MAAM,yBAAyB;AACjC,uBAAe,IAAI,MAAM,wBAAwB,OAAO;MAC1D;IACF;AACA,UAAM,QAAQ,MAAM,QAAQ,IAAI,YAAY;AAC5C,QAAI,eAAe,MAAM;AACvB,WAAK,yBAAyB,UAAU,OAAO,QAAQ;AACvD,MAAG,YAAQ,QAAQ,QAAQ,KAAK,0BAA0B,MAAM,KAAK,cAAc,EAAE,KAAK,IAAI,CAAC;IACjG;AAEA,QAAI,qBAAiF,QAAQ;AAC7F,QAAI,EAAC,wBAAuB,IAAI;AAChC,QAAI,kBAAoD;AACxD,eAAW,mBAAmB,QAAQ,cAAc,oBAAoB,OAAO,GAAG;AAChF,YAAM,QAAW,YAAQ,qBAAqB,gBAAgB,aAAa,kBAAkB;AAC7F,YAAM,KAAK,GAAG,MAAM,KAAK,yBACrB,OAAO,QAAQ,eAAe,gBAAgB,YAAY,KAAK,cAAc,KAAK,YAAY,KAAK,IAAI,CAAC,CAAC;AAC7G,2BAAqB,gBAAgB;AAErC,UAAI,EAAE,2BAA2B,GAAG;AAClC;MACF;IACF;AAEA,SAAK,uBAAuB,UAAU,OAAO,UAAU,CAAC,eAAe;AACvE,SAAK,MAAM,WAAW,KAAK;AAC3B,eAAW,QAAQ,KAAK,OAAO;AAC7B,WAAK,YAAY,IAAI;IACvB;AACA,QAAI,KAAK,4BAA4B,gCAAgC;AACnE,WAAK,KAAK;QAAe;QAAoB;;MAAkB;AAC/D,YAAM,eAAe,KAAK,KAAK,aAAY;AAC3C,UAAI,cAAc;AAChB,aAAK,aAAa,YAAY;MAChC;IACF;AACA,SAAK,eAAc;EACrB;EAEQ,iBAAc;EACtB;EAEQ,YAAY,MAAU;AAC5B,SAAK,wBAAwB,IAAI,IAAI;AACrC,SAAK,KAAK,oBAAoB,SAAS,YAAW;AAChD,YAAM,QAAQ,MAAM,KAAK,KAAK,uBAAuB;AACrD,WAAK,wBAAwB,MAAK;AAElC,WAAK,mBAAmB;AACxB,UAAI,CAAC,KAAK,oBAAoB,KAAK,MAAM,MAAM,CAAAG,UAAQA,MAAK,cAAc,GAAG;AAC3E,aAAK,mBAAmB;AACxB,iBAAS,IAAI,GAAG,IAAI,KAAK,MAAM,QAAQ,EAAE,GAAG;AAC1C,eAAK,KAAK,mBAAmB,CAAC;QAChC;AACA,aAAK,yBAAyB,UAAU,OAAO,UAAU,IAAI;MAC/D,OAAO;AACL,aAAK,mBAAmB,KAAK,0BAA0B;AACvD,cAAM,WAAW,IAAI,IAAU,KAAK;AACpC,YAAI,kBAAkB;AACtB,iBAAS,IAAI,GAAG,IAAI,KAAK,MAAM,QAAQ,EAAE,GAAG;AAC1C,gBAAMA,QAAO,KAAK,MAAM,GAAG,CAAC;AAC5B,cAAI,SAAS,IAAIA,KAAI,GAAG;AACtB,iBAAK,KAAK,mBAAmB,CAAC;UAChC;AACA,4BAAkB,mBAAmBA,MAAK;QAC5C;AACA,aAAK,yBAAyB,UAAU,OAAO,UAAU,CAAC,eAAe;MAC3E;AACA,aAAO,KAAK;IACd,CAAC;EACH;EAEA,qBAAqB,MAAU;AAC7B,UAAM,UAAU,SAAS,cAAc,KAAK;AAC5C,YAAQ,UAAU,IAAI,iBAAiB;AACvC,UAAM,QAAQ,QAAQ,YAAY,OAAO,uBAAuB;AAChE,UAAM,eAAe,MAAM,YAAY,OAAO,uBAAuB;AACrE,iBAAa,cAAc,KAAK;AAChC,QAAI,KAAK,eAAe;AACtB,cAAQ,UAAU,IAAI,cAAc;IACtC,OAAO;AACL,MAAG,YAAQ,QAAQ,QAAQ,cAAc,KAAK,KAAK;AACnD,YAAM,cAAc,QAAQ,YAAY,OAAO,qBAAqB;AACpE,kBAAY,cAAuB,0BAAgB,WAAW,KAAK,UAAU,EAAE;AAC/E,MAAG,YAAQ,QAAQ,QAAQ,aAAa,KAAK,QAAQ;AACrD,cAAQ,UAAU,OAAO,4BAA4B,KAAK,cAAc;AACxE,UAAI,KAAK,gBAAgB;AACvB,QAAG,cAAU,eAAe,SAASD,YAAWF,WAAU,YAAY,CAAC;MACzE;AACA,UAAI,CAAC,KAAK,OAAO;AACf,QAAG,cAAU,YAAY,SAAS,IAAI;MACxC;IACF;AACA,UAAM,YAAY,KAAK;AACvB,UAAM,aAAa,cAAiB,YAAQ,QAAQ,SAAQ,EAAG,OAAW,mBAAc,SAAS;AAEjG,YAAQ,UAAU,OAAO,YAAY,UAAU;AAC/C,IAAG,cAAU,YAAY,SAAS,UAAU;AAC5C,YAAQ,UAAU,OAAO,UAAU,CAAC,KAAK,oBAAoB,KAAK,cAAc;AAChF,UAAM,OAAO,IAAe,iBAAK,KAAI;AACrC,SAAK,OAAO;MACV,UAAU;MACV,OAAO;MACP,OAAO;MACP,QAAQ;;AAEV,SAAK,UAAU,IAAI,0BAA0B;AAC7C,YAAQ,YAAY,IAAI;AACxB,YAAQ,WAAW,SAAS,KAAK,KAAK,aAAY,IAAK,IAAI;AAE3D,QAAI,WAAW,yBAAyB;AACtC,YAAMI,QAAO,IAAe,iBAAK,KAAI;AACrC,MAAAA,MAAK,OAAO;QACV,UAAU;QACV,OAAO;QACP,OAAO;QACP,QAAQ;;AAEV,MAAAA,MAAK,UAAU,IAAI,yBAAyB;AAC5C,YAAM,WAAW,UAAU,wBAAwB,UAAU,IACzD,OAAKF,YAAWF,WAAU,mBAAmB,EAAC,KAAY,kBAAU,UAAU,YAAY,EAAE,WAAW,EAAC,CAAC,CAAC;AAC9G,MAAG,YAAQ,QAAQ,QAAQI,OAAM,CAAC,UAAU,wBAAwB,SAAS,GAAG,QAAQ,EAAE,KAAK,IAAI,CAAC;AACpG,cAAQ,YAAYA,KAAI;IAC1B;AACA,WAAO;EACT;EAEA,cAAc,OAAW;AACvB,YAAQ,OAAO,KAAK;AACpB,WAAO;EACT;EAEA,iBAAiB,OAAW;AAC1B,WAAO;EACT;EAEA,oBAAoB,OAAkB,KAAgB,aAA+B,WAA2B;AAE9G,QAAI,aAAa;AACf,kBAAY,WAAW;IACzB;AACA,QAAI,WAAW;AACb,WAAK,yBAAyB,SAAS;AACvC,gBAAU,WAAW;AACrB,UAAI,KAAK,SAAQ,GAAI;AACnB,kBAAU,MAAK;MACjB;IACF;EACF;EAEA,uBAAuB,cAA4B,YAAwB;AACzE,WAAO;EACT;EAEQ,4CAAyC;AAC/C,UAAM,UAAU,SAAS,cAAc,KAAK;AAC5C,YAAQ,UAAU,IAAI,uBAAuB;AAC7C,UAAM,QAAQ,QAAQ,YAAY,OAAO;AACzC,UAAM,UAAU,IAAI,6BAA6B;AACjD,UAAM,WAAW,MAAM,YAAY,OAAO;AAC1C,aAAS,WAAW;AACpB,aAAS,OAAO;AAChB,aAAS,UAAU,IAAI,wBAAwB;AAC/C,UAAM,OAAOF,YAAWF,WAAU,sBAAsB,CAAC;AACzD,UAAM,UAAU,MAAW;AACzB,WAAK,mBAAmB,SAAS;AACjC,iBAAW,QAAQ,KAAK,OAAO;AAC7B,aAAK,YAAY,IAAI;MACvB;IACF;AACA,aAAS,iBAAiB,SAAS,OAAO;AAC1C,WAAO,EAAC,SAAS,SAAQ;EAC3B;EAEQ,+BAA4B;AAClC,UAAM,UAAU,SAAS,cAAc,KAAK;AAC5C,YAAQ,UAAU,IAAI,mBAAmB;AACzC,YAAQ,YAAY,MAAM;AAC1B,UAAM,cAAc,QAAQ,YAAY,QAAQ,MAAM;AACtD,gBAAY,cAAcE,YAAWF,WAAU,QAAQ;AACvD,gBAAY,iBAAiB,SAAS,MAAK;AACzC,WAAK,2BAA2B;AAChC,WAAK,OAAM;IACb,GAAG,KAAK;AACR,WAAO;EACT;EAEQ,cAAc,OAAY;AAChC,UAAM,OAAO,KAAK,KAAK,YAAa,MAAM,MAAsB;AAChE,QAAI,CAAC,MAAM;AACT;IACF;AACA,UAAM,cAAc,IAAO,gBAAY,YAAY,KAAK;AACxD,UAAM,oBAAoB,KAAK;AAC/B,QAAI,mBAAmB;AACrB,kBAAY,eAAc,EAAG,WAAWE,YAAWF,WAAU,YAAY,GAAG,MAAK;AAC/E,QAAK,kBAAY,YAAiB,kBAAY,OAAO,mBAAmB;AACxE,aAAK,kBAAkB,QAAO;MAChC,GAAG,EAAC,UAAU,CAAC,kBAAkB,gBAAgB,cAAc,gBAAe,CAAC;IACjF;AACA,gBAAY,eAAc,EAAG,WACzBE,YAAWF,WAAU,cAAc,GAAG,KAAK,eAAe,KAAK,IAAI,GAAG,EAAC,cAAc,mBAAkB,CAAC;AAC5G,QAAI,KAAK,YAAY;AACnB,WAAK,oCAAoC,aAAa,KAAK,WAAW,YAAY;IACpF;AACA,SAAK,YAAY,KAAI;EACvB;EAEQ,aAAa,MAAU;AAC7B,UAAM,aAAa,KAAK;AACxB,QAAI,KAAK,oBAAoB,CAAC,YAAY;AACxC;IACF;AACA,SAAK,KAAK,WAAW,IAAI;AACzB,UAAM,oBAAoB,KAAK;AAC/B,UAAM,UAAU,KAAK,oBAAmB;AACxC,QAAI,qBAAqB,YAAY,MAAM;AACzC,wBAAkB,cAAc,qBAAqB,iBAAiB;AACtE,MAAG,YAAQ,QAAQ,SAAQ,EAAG,UAAc,mBAAc,WAAW,iBAAiB;AACtF,UAAI,SAAS;AACX,aAAK,YAAY,OAAO;MAC1B;AACA,WAAK,YAAY,IAAI;IACvB,OAAO;AACL,WAAY,iBAAS,OAAO,UAAU;IACxC;EACF;EAEA,sBAAmB;AACjB,UAAM,YAAe,YAAQ,QAAQ,SAAQ,EAAG,OAAW,mBAAc,SAAS;AAClF,QAAI,WAAW;AACb,aAAO,KAAK,MAAM,KAAK,mBAAiB,cAAc,UAAU,SAAS,KAAK;IAChF;AACA,WAAO;EACT;EAEA,oCACI,aAAyC,cAAiD;AAC5F,UAAM,UAAsB,wBAAY,gBAAgB,SAAQ,EAAG,QAAQ,YAAY;AACvF,QAAI,SAAS;AACX,qBAAe,QAAQ;IACzB;AAEA,UAAM,cAAc,YAAY,QAAQ,YAAY;AACpD,QAAI,YAAY,MAAM,SAAS,GAAG;AAEhC;IACF;AAEA,eAAW,EAAC,MAAM,UAAU,aAAY,KAAe,6BAAkB,kBAAkB,SAAQ,EACzF,iCAAiC,YAAY,GAAG;AACxD,kBAAY,WAAW,MAAM,UAAU,EAAC,aAAY,CAAC;IACvD;EACF;EAEA,6BAA0B;AACxB,UAAM,UAAU,KAAK,oBAAmB;AACxC,UAAM,aAAa,UAAU,KAAK,MAAM,QAAQ,OAAO,IAAI,IAAI;AAC/D,aAAS,IAAI,YAAY,IAAI,KAAK,MAAM,QAAQ,KAAK;AACnD,YAAM,UAAU,KAAK,MAAM,GAAG,CAAC;AAC/B,UAAI,QAAQ,OAAO;AACjB,aAAK,aAAa,OAAO;AACzB;MACF;IACF;EACF;EAEA,iCAA8B;AAC5B,UAAM,UAAU,KAAK,oBAAmB;AACxC,UAAM,aAAa,UAAU,KAAK,MAAM,QAAQ,OAAO,IAAI,IAAI,KAAK,MAAM,SAAS;AACnF,aAAS,IAAI,YAAY,KAAK,GAAG,KAAK;AACpC,YAAM,UAAU,KAAK,MAAM,GAAG,CAAC;AAC/B,UAAI,QAAQ,OAAO;AACjB,aAAK,aAAa,OAAO;AACzB;MACF;IACF;EACF;EAEQ,iBAAc;AACpB,UAAM,OAAO,CAAA;AACb,eAAW,QAAQ,KAAK,OAAO;AAC7B,UAAI,WAAW,KAAK;AACpB,UAAI,KAAK,YAAY;AACnB,oBAAY,OAAO,KAAK,WAAW;UAAS;;QAAmB,IAAI;MACrE;AACA,WAAK,KAAK,QAAQ;IACpB;AACA,IAAK,4BAAsB,8BAA8B,SAAS,KAAK,KAAK,IAAI,CAAC;EACnF;;AAGK,IAAM,gBAAgB,OAAO,SAAS;AACtC,IAAM,iCAAiC;AAExC,IAAO,iBAAP,MAAqB;EACzB,aAAa,UAA8B,UAAgB;AACzD,YAAQ,UAAU;MAChB,KAAK;AACH,6BAAqB,SAAQ,EAAG,2BAA0B;AAC1D,eAAO;MACT,KAAK;AACH,6BAAqB,SAAQ,EAAG,+BAA8B;AAC9D,eAAO;IACX;AACA,WAAO;EACT;;AAGI,IAAO,OAAP,MAAO,MAAI;EACf;EACA;EACA;EACA;EACA;EACA;;EAES;EAET,aAAa,2BACT,OAAoC,cACpC,gBAAoC;AACtC,UAAM,OAAO,MAAM;AACnB,UAAM,OAAO,IAAI,MAAQ,YAAQ,qBAAqB,IAAI,GAAG,gBAAgB,KAAK;AAClF,UAAe,mCAAyB,yBAAyB,SAAQ,EAAG,4BACxE,MAAM,SAAQ,GAAI,KAAK,OAAO,KAAK,IAAI,GAAG,YAAY;AAC1D,SAAqB,8BAAc,iCAAiC,KAAK,EAAE,KAAK,kBAAe;AAC7F,UAAI,gBAAgB,iBAAiB,MAAM;AAIzC,aAAK,QAAQ;AACb,aAAK,eAAe,IAAI;MAC1B;IACF,CAAC;AACD,WAAO;EACT;EAEA,aAAa,yBACT,OAAe,eAAgD,QAC/D,cAAsD,gBAAoC;AAC5F,UAAM,uBAAuB,oBAAI,QAAO;AACxC,UAAM,kBAAkB,IAAI,MAAK,OAAO,cAAc;AACtD,yBAAqB,IAAI,iBAAiB,oBAAI,IAAG,CAAE;AACnD,oBAAgB,gBAAgB;AAEhC,UAAM,kBAAkB,CAAA;AACxB,UAAM,uBAAuB,CAAA;AAC7B,eAAW,SAAS,QAAQ;AAC1B,YAAM,OAAO,IAAI,MAAQ,YAAQ,qBAAqB,MAAM,YAAY,GAAG,MAAM;AACjF,YAAM,cACF,cAAc,4BAA4B,MAAM,UAAU,MAAM,YAAY,MAAM,YAAY;AAClG,2BAAqB,KACR,mCAAyB,yBAAyB,SAAQ,EAAG,4BAClE,aAAa,KAAK,OAAO,KAAK,IAAI,GAAG,YAAY,CAAC;AAC1D,WAAqB,8BAAc,gCAAgC,OAAO,cAAc,OAAM,CAAE,EAC3F,KAAK,kBAAe;AACnB,YAAI,gBAAgB,iBAAiB,MAAM,cAAc;AACvD,eAAK,QAAQ;AACb,eAAK,eAAe,IAAI;QAC1B;MACF,CAAC;AACL,sBAAgB,KAAK,IAAI;IAC3B;AAEA,UAAM,QAAQ,IAAI,oBAAoB;AACtC,mBAAe,eAAe;AAE9B,WAAO,CAAC,iBAAiB,GAAG,eAAe;AAE3C,aAAS,OAAO,MAAU;AACxB,qBAAe,IAAI;AACnB,UAAI,eAAe;AACnB,YAAM,QAAQ,qBAAqB,IAAI,eAAe;AACtD,UAAI,OAAO;AACT,YAAI,KAAK,gBAAgB;AACvB,gBAAM,OAAO,IAAI;AACjB,yBAAe,MAAM,SAAS;QAChC,OAAO;AACL,yBAAe,MAAM,SAAS;AAC9B,gBAAM,IAAI,IAAI;QAChB;AACA,wBAAgB,iBAAiB,MAAM,SAAS;MAClD;AACA,UAAI,cAAc;AAChB,uBAAe,eAAe;MAChC;IACF;EACF;EAEA,YAAY,OAAe,gBAAsC,OAAmC;AAClG,SAAK,iBAAiB;AACtB,SAAK,QAAQ;AACb,SAAK,WAAW;AAChB,SAAK,aAAa;AAClB,SAAK,gBAAgB;AACrB,SAAK,iBAAiB;AACtB,SAAK,QAAQ;EACf;EAEQ,MAAM,OAAO,cAAgD;AACnE,UAAM,aAAa,MAAM,aAAa,WAAU;AAChD,SAAK,iBAAiB,QAAQ,YAAY,eAAc,CAAE;AAC1D,SAAK,WAAW,aAAa,WAAW,SAAQ,IAAK;AACrD,SAAK,aAAa;AAClB,SAAK,eAAe,IAAI;EAC1B;;;;AEnoBF;;;;AAWA,YAAYK,YAAU;AAEtB,YAAYC,UAAS;AAGrB,IAAMC,aAAY;;;;;EAKhB,iCAAiC;;;;;EAMjC,mCAAmC;;;;;EAMnC,iCAAiC;;;;;EAMjC,mCAAmC;;;;;EAKnC,2BAA2B;;;;EAI3B,sBAAsB;;;;EAItB,gCAAgC;;;;EAIhC,uBAAuB;;;;EAIvB,sBAAsB;;;;EAItB,qBAAqB;;;;EAIrB,iBAAiB;;;;EAIjB,mBAAmB;;;;EAInB,cAAc;;;;EAId,qBAAqB;;;;EAIrB,oBAAoB;;;;EAIpB,mBAAmB;;;;EAInB,oBAAoB;;;;EAIpB,qBAAqB;;;;;;;EAOrB,gBAAgB;;;;EAIhB,kBAAkB;;AAEpB,IAAMC,QAAY,YAAK,kBAAkB,+CAA+CD,UAAS;AACjG,IAAM,iBAAsB,YAAK,iCAAiC,KAAK,QAAWC,KAAI;AAEhF,SAAU,2BAA2B,MAAY;AACrD,QAAM,eAAe,gBAAgB,IAAI,IAAI,KAAU,YAAK,iBAAiB,IAAI;AACjF,SAAO,aAAY;AACrB;AAEA,IAAM,kCACgG;EAChG;IAAA;;EAAA,GACI,eAAeD,WAAU,+BAA+B;EAC5D;IAAA;;EAAA,GACI,eAAeA,WAAU,iCAAiC;EAC9D;IAAA;;EAAA,GACI,eAAeA,WAAU,+BAA+B;EAC5D;IAAA;;EAAA,GACI,eAAeA,WAAU,iCAAiC;EAC9D;IAAA;;EAAA,GAAmE,YAAK,iBAAiB,YAAY;EACrG;IAAA;;EAAA,GAAqE,YAAK,iBAAiB,cAAc;EACzG;IAAA;;EAAA,GACI,eAAeA,WAAU,2BAA2B,EAAC,KAAK,aAAY,CAAC;EAC3E;IAAA;;EAAA,GAAoE,YAAK,iBAAiB,aAAa;EACvG;IAAA;;EAAA,GAAsE,YAAK,iBAAiB,eAAe;EAC3G;IAAA;;EAAA,GACI,eAAeA,WAAU,2BAA2B,EAAC,KAAK,cAAa,CAAC;EAC5E;IAAA;;EAAA,GACI,eAAeA,WAAU,oBAAoB;EACjD;IAAA;;EAAA,GACI,eAAeA,WAAU,8BAA8B;EAC3D;IAAA;;EAAA,GACI,eAAeA,WAAU,oBAAoB;EACjD;IAAA;;EAAA,GACI,eAAeA,WAAU,qBAAqB;EAClD;IAAA;;EAAA,GACI,eAAeA,WAAU,oBAAoB;EACjD;IAAA;;EAAA,GACI,eAAeA,WAAU,mBAAmB;EAChD;IAAA;;EAAA,GAAoE,eAAeA,WAAU,eAAe;EAC5G;IAAA;;EAAA,GAAsE,eAAeA,WAAU,iBAAiB;EAChH;IAAA;;EAAA,GAAyE,eAAeA,WAAU,YAAY;EAC9G;IAAA;;EAAA,GACI,eAAeA,WAAU,mBAAmB;EAChD;IAAA;;EAAA,GACS,YAAK,iBAAiB,oBAAoB;EACnD;IAAA;;EAAA,GACS,YAAK,iBAAiB,eAAe;EAC9C;IAAA;;EAAA,GACS,YAAK,iBAAiB,mBAAmB;EAClD;IAAA;;EAAA,GAAwE,YAAK,iBAAiB,cAAc;EAC5G;IAAA;;EAAA,GAAsE,YAAK,iBAAiB,gBAAgB;EAC5G;IAAA;;EAAA,GACI,eAAeA,WAAU,kBAAkB;EAC/C;IAAA;;EAAA,GACI,eAAeA,WAAU,iBAAiB;EAC9C;IAAA;;EAAA,GACI,eAAeA,WAAU,kBAAkB;EAC/C;IAAA;;EAAA,GACI,eAAeA,WAAU,mBAAmB;;AAGtD,IAAM,gCACuF;EACvF;IAAA;;EAAA,GAAoE,eAAeA,WAAU,gBAAgB;EAC7G;IAAA;;EAAA,GAAkE,eAAeA,WAAU,cAAc;;AAG/G,IAAM,kBAAkB,IAAI,IAAqD;EAC/E,GAAG,OAAO,QAAQ,+BAA+B;EACjD,GAAG,OAAO,QAAQ,6BAA6B;CAChD;;;ACnLD;;;;AAKA,YAAYE,YAAU;AAEtB,YAAYC,UAAS;AACrB,YAAYC,gBAAe;AAE3B,YAAYC,iBAAgB;AAE5B,YAAYC,kBAAiB;AAC7B,YAAYC,SAAQ;AACpB,YAAY,cAAc;AAM1B,IAAMC,aAAY;;;;EAIhB,0BAA0B;;;;EAI1B,aAAa;;;;;EAKb,WAAW;;;;EAIX,YAAY;;AAEd,IAAMC,QAAY,YAAK,kBAAkB,oCAAoCD,UAAS;AACtF,IAAME,cAAkB,YAAK,mBAAmB,KAAK,QAAWD,KAAI;AAE9D,IAAO,iBAAP,cAA8B,OAAM;EAChC;EACA;EACA;EACA;EAEC;EAET,YAAY,cAAmD,aAAgD;AAC7G,UAAM,YAAY;AAClB,SAAK,qBAAqB,KAAK;AAC/B,SAAK,eAAe;AACpB,SAAK,gBAAgB,IAAO,YAAQ,cAChCC,YAAWF,WAAU,wBAAwB,GAAG,QAAW,QAAW,wBAAwB;AAClG,SAAK,cAAc,aAAY;AAC/B,SAAK,cAAc,iBAAgB,SAAwC,MAAK;AAC9E,WAAQ,gBAAY,YAAY,SAAQ,EAAG,SAAS,UAAU;IAChE,CAAC;AAED,UAAM,aAAiB,mBAAc,cAAc,SAAQ,EAAG,kBAAiB;AAC/E,QAAI,YAAY;AACd,WAAK,QAAQ,WAAW,MAAe,uBAAc,aAAa;AAClE,UAAI,KAAK,OAAO;AACd,aAAK,MAAM,iBAA0B,uBAAc,OAAO,eAAe,KAAK,aAAa,IAAI;AAE/F,aAAK,WAAW,KAAK,MAAM,kBAAkB,KAAK,mBAAmB,IAAG,CAAE;AAC1E,YAAI,KAAK,UAAU;AACjB,eAAK,SAAS,iBACD,uBAAc,gBAAgB,OAAO,cAAc,KAAK,4BAA4B,IAAI;QACvG;MACF;IACF;AAEA,SAAK,YAAW;EAClB;EAES,UAAO;AACd,QAAI,KAAK,UAAU;AACjB,WAAK,SAAS,oBACD,uBAAc,gBAAgB,OAAO,cAAc,KAAK,4BAA4B,IAAI;IACvG;AACA,QAAI,KAAK,OAAO;AACd,WAAK,MAAM,oBAA6B,uBAAc,OAAO,eAAe,KAAK,aAAa,IAAI;IACpG;EACF;EAEA,OAAgB,QAAQ,cAAiD;AACvE,WAAO,aAAa,YAAW,EAAG,+BAA8B;EAClE;EAEQ,cAAW;AACjB,SAAK,WAAW;AAChB,SAAK,YAAW;EAClB;EAEQ,6BAA0B;AAChC,SAAK,YAAW;EAClB;EAEQ,cAAW;AACjB,QAAI,KAAK,UAAU;AACjB,WAAK,cAAc,SAASE,YAAWF,WAAU,WAAW,CAAC;AAC7D,YAAM,YAAY,IAAI,KAAK,aAAkB,sBAAe,eAAe,SAAQ,EAAG,QAAQ;QAC5F,OAAO;QACP,uBAAuB;OACxB;AACD,WAAK,cAAc,QACfE,YAAWF,WAAU,WAAW,EAAC,KAAK,UAAU,OAAO,KAAK,SAAS,eAAc,CAAE,EAAC,CAAC,CAAC;IAC9F,OAAO;AACL,WAAK,cAAc,SAASE,YAAWF,WAAU,wBAAwB,CAAC;AAC1E,WAAK,cAAc,QAAQE,YAAWF,WAAU,UAAU,CAAC;IAC7D;EACF;EAES,oBAAiB;AACxB,WAAO,CAAC,KAAK,aAAa;EAC5B;EAES,kBAAe;AACtB,WAAO,oBAAoB,GAAG,CAAA,CAAE;EAClC;EAEQ,qBAAkB;AACxB,WAAO,KAAK,aAAa;MAAiB;;IAAA;EAC5C;EAES,kBAAkB,QAAwC;AACjE,QAAI,KAAK,mBAAkB,GAAI;AAC7B,WAAK,gBAAgB,MAAM;IAC7B;EACF;EAES,kBAAkB,MAA6C,QAAwC;AAE9G,QAAI,SAAI,YAAqD;AAC3D,WAAK,gBAAgB,MAAM;IAC7B;EACF;EAEQ,gBAAgB,QAAwC;AAC9D,UAAM,UAAU,KAAK,mBAAkB;AACvC,UAAM,UAAU,QAAQ,YAAY,KAAK,cAAc,KAAK,aAAa,MAAM,CAAC,IAAI,QAAQ,QAAQ,CAAA,CAAE,GACjG,KAAK,iBAAc;AAClB,YAAM,UAAU,QAAQ,OAAO,MAAM,MAAM,eAAe,KAAK,CAAC;AAChE,UAAI,CAAC,YAAY,QAAQ;AACvB,YAAI,SAAS;AACX,iBAAO,SAAS,EAAC,SAAS,oBAAoB,YAAY,CAAA,CAAE,EAAC,CAAC;QAChE;MACF,WAAW,CAAC,SAAS;AACnB,eAAO,SAAS;UACd,SAAS,oBAAoB,YAAY;YACvC,cAAc,KAAK,WAAS,wBAAwB,aAAa,KAAK,CAAC;YACvE,eAAe,KAAK,aAAa,IAAG,CAAE;YACtC;WACD;SACF;MACH,OAAO;AACL,eAAO,SAAS,EAAC,SAAS,iBAAiB,GAAG,WAAW,EAAC,CAAC;MAC7D;IACF,CAAC;EACP;;;;EAKA,aAAa,QAAwC;AACnD,UAAM,SAA0C,CAAA;AAChD,aAAS,IAAI,GAAG,KAAK,OAAO,MAAM,IAAI,OAAO,EAAE,GAAG;AAChD,YAAM,OAAO,OAAO,MAAM,IAAI,KAAK,CAAC;AAEpC,YAAM,EAAC,YAAY,WAAW,cAAc,YAAW,IAAI,KAAK,aAAa,2BAA2B,IAAI,GAAG,CAAC;AAChH,YAAM,EAAC,YAAY,SAAS,cAAc,UAAS,IAC/C,KAAK,aAAa,2BAA2B,IAAI,GAAG,KAAK,MAAM;AACnE,aAAO,KAAK,IAAc,qBAAU,UAAU,WAAW,aAAa,SAAS,SAAS,CAAC;IAC3F;AACA,WAAO;EACT;;AAGF,IAAM,gBAAgB,IAAK,cAAyB,yBAAY;EACrD,eAAe;EACxB;AAEF,IAAM,mBAAmB,IAAK,cAAyB,yBAAY;EACxD,eAAe;EACxB;AAEF,SAAS,wBAAwB,aAAuC,OAA6B;AAEnG,QAAM,UAAU,IAAe,4BAAe;AAC9C,WAAS,OAAO,GAAG,OAAO,YAAY,QAAQ,QAAQ;AACpD,UAAM,QAAQ,YAAY,IAAI;AAC9B,QAAI,UAAU,UAAa,OAAO,MAAM,IAAI,OAAO;AACjD,YAAM,YAAY,MAAM,IAAI,KAAK,OAAO,CAAC,EAAE;AAC3C,cAAQ,IAAI,WAAW,WAAW,QAAQ,gBAAgB,gBAAgB;IAC5E;EACF;AACA,SAAO,QAAQ,OAAM;AACvB;AAEA,IAAM,mBAA8B,wBAAY,OAAM;AAEtD,IAAM,gBAA2B,uBAAW,OAAqD;EAC/F,SAAM;AACJ,WAAkB,qBAAS;EAC7B;EACA,OAAO,SAAS,IAAE;AAChB,WAAO,GAAG,QAAQ,OAAO,CAACG,UAAS,WAAU;AAC3C,aAAO,OAAO,GAAG,gBAAgB,IAAI,wBAAwB,OAAO,OAAO,GAAG,KAAK,IAAIA;IACzF,GAAG,QAAQ,IAAI,GAAG,OAAO,CAAC;EAC5B;CACD;AAED,SAAS,eAAe,KAAoC;AAC1D,SAAkB,mBAAO;IACvB,SAAS,UAAQ,KAAK,MAAM,MAAM,aAAa;IAE/C,kBAAkB;MAChB,QAAK;AACH,aAAQ,gBAAY,YAAY,SAAQ,EACnC,SAAS,UAAU,EACnB,KAAK,MAAK;AACT,gBAAM,OAAU,gBAAY,YAAY,SAAQ,EAAG,KAAK,UAAU;AAClE,iBAAO,MAAM,OAAM;QACrB,CAAC,EACA,KAAK,YAAS;AACb,gBAAM,uBAAuB,IAAI,MAAM,iBAAiB;AACxD,gBAAM,4BAA6B,uBAAuB,CAAC,KAAM;AAChE,iBAA8C,wBAAwB,yBAAyB;QAClG,CAAC;AACL,eAAO;MACT;;IAGF,OAAO;GACR;AACH;AAEA,IAAM,sBAAsB,IAAe,wBAAW;AAEtD,IAAM,QAAmB,uBAAW,UAAU;EAC5C,uBAAuB;IACrB,iBAAiB;IACjB,OAAO;;EAET,sBAAsB;IACpB,OAAO;IACP,YAAY;;EAEd,sBAAsB;IACpB,iBAAiB;;EAEnB,oBAAoB;IAClB,iBAAiB;;CAEpB;;;ACjQD;;;;;AAKA,YAAYC,aAAY;AACxB,YAAYC,YAAU;AAEtB,SAAQ,4BAAAC,iCAA+B;AACvC,YAAYC,UAAS;AAErB,YAAYC,eAAc;AAC1B,YAAYC,gBAAe;AAC3B,YAAYC,iBAAgB;AAC5B,YAAYC,iBAAgB;AAC5B,YAAY,iBAAiB;AAC7B,YAAY,kBAAkB;AAE9B,YAAYC,SAAQ;AACpB,YAAYC,oBAAmB;AAQ/B,IAAMC,aAAY;;;;EAIhB,iBAAiB;;;;EAIjB,uBAAuB;;;;EAIvB,cAAc;;AAEhB,IAAMC,QAAY,YAAK,kBAAkB,+BAA+BD,UAAS;AACjF,IAAME,cAAkB,YAAK,mBAAmB,KAAK,QAAWD,KAAI;AAEpE,IAAM,kBAAkB,oBAAI,IAAI,CAAC,gBAAgB,iBAAiB,iBAAiB,WAAW,WAAW,CAAC;AAE1G,SAAS,eAAe,MAA6B,KAAW;AAC9D,MAAI,gBAAgB,IAAI,KAAK,IAAI,GAAG;AAClC,WAAO;EACT;AACA,WAAS,MAAkC,MAAM,KAAK,MAAM,IAAI,QAAQ;AACtE,QAAI,IAAI,SAAS,gBAAgB,IAAI,SAAS,YAAY,IAAI,SAAS,kBAAkB;AACvF;IACF,WAAW,IAAI,SAAS,eAAe;AACrC,YAAM,OAAO,IAAI,SAAS,cAAc,GAAG,QAAQ,IAAI,SAAS,GAAG;AACnE,aAAO,QAAQ,SAAS,MAAM,MAAM,MAAM,OAAO;IACnD;EACF;AACA,SAAO;AACT;AAEA,SAAS,qBACL,KAAsC,UAA+B;AACvE,QAAM,oBAAoB,SAAS,uBAAuB,GAAG;AAC7D,MAAI,kBAAkB,WAAW,GAAG;AAClC,UAAM,IAAI,MAAM,2CAA4C;EAC9D;AAEA,SAAO,kBAAkB,CAAC;AAC5B;AAEA,eAAe,sBACX,IAAkC,cAClC,UAAyC;AAC3C,QAAM,OAAkB,uBAAW,GAAG,KAAK,EAAE,aAAa,GAAG,KAAK,EAAE;AACpE,MAAI,KAAK,SAAS,aAAa;AAE7B,IAAAE,0BAAyB,QAAQ;AAEjC,UAAM,oBAAoB,qBAAqB,aAAa,IAAG,GAAI,QAAQ;AAC3E,UAAM,qBAAqB,MAAM,SAAS,cAAc,iBAAiB;AAEzE,WAAO;MACL,MAAM,KAAK;MACX,SAAS,mBAAmB,IAAI,CAAAC,YAAU,EAAC,MAAM,YAAY,OAAOA,OAAK,EAAE;;EAE/E;AACA,QAAM,WAAW,eAAe,MAAM,GAAG,GAAG;AAC5C,MAAI,UAAU;AACZ,UAAM,iBACE,iBAAY,YAAW,EAAG,kBAAkB,GAAG,MAAM,SAAS,SAAS,MAAM,SAAS,EAAE,CAAC;AACjG,WAAO;MACL,MAAM,KAAK,SAAS,cAAc,KAAK,OAAO,GAAG;MACjD,SAAS,eAAe,IAAI,CAAAA,YAAU,EAAC,MAAM,YAAY,OAAOA,OAAK,EAAE;MACvE,UAAU;;EAEd;AACA,SAAO;AACT;AAEA,SAAS,oBACL,OACA,MACA,IACA,SACA,SAA4E;AAE9E,MAAI,OAAO,MAAM,IAAI,OAAO,IAAI;AAChC,WAAS,SAASC,OAAcC,KAAU;AACxC,QAAID,SAAQ,KAAK,IAAI;AACnB,aAAO,MAAM,IAAI,OAAOA,KAAI;IAC9B;AACA,WAAO,KAAK,KAAK,MAAMA,QAAO,KAAK,MAAMC,MAAK,KAAK,IAAI;EACzD;AAEA,QAAM,OAAkB,6BAAiB,OAAO,IAAI,GAAG;AACvD,MAAI,CAAC,MAAM;AACT;EACF;AACA,OAAK,QAAQ;IACX;IACA;IACA,OAAO,UAAO;AACZ,UAAI;AACJ,UAAI,KAAK,SAAS,eAAe,KAAK,SAAS,gBAAgB;AAC7D,kBAAU,SAAS,KAAK,MAAM,KAAK,EAAE;MACvC,WACI,KAAK,SAAS,YACd,qEAAqE,KAAK,SAAS,KAAK,MAAM,KAAK,EAAE,CAAC,GAAG;AAC3G,kBAAU,MAAM,SAAS,KAAK,MAAO,KAAK,KAAK,OAAiC,EAAE;MACpF;AACA,UAAI,SAAS;AACX,cAAM,cAAqB,cAAM,MAAM,OAAO;AAC9C,YAAI,aAAa;AACf,kBAAQ,KAAK,MAAM,aAAa,OAAO;QACzC,OAAO;AACL,gBAAM,cAAiB,aAAS,YAAY,MAAM,OAAO;AACzD,cAAI,aAAa;AACf,oBAAQ,KAAK,MAAM,aAAa,OAAO;UACzC;QACF;MACF;IACF;GACD;AACH;AAEA,IAAM,oBAAN,cAA2C,uBAAU;EACnD;EACA;EACS;EAET,YAAY,OAA2B,MAAc,MAAY;AAC/D,UAAK;AACL,SAAK,SAAS;AACd,SAAK,QAAQ;AACb,SAAK,QAAQ;EACf;EAES,GAAG,OAAwB;AAClC,WAAO,KAAK,OAAO,MAAM,MAAM,MAAM,KAAK,KAAK,UAAU,MAAM,SAAS,KAAK,UAAU,MAAM;EAC/F;EAEA,MAAM,MAA2B;AAC/B,UAAM,SAAS,IAAiB,yBAAY,YAAYJ,YAAWF,WAAU,eAAe,CAAC;AAC7F,WAAO,YAAY,KAAK,MAAM;AAC9B,UAAMI,SAAQ,OAAO,YAAY,MAAM;AACvC,IAAAA,OAAM,cAAc,KAAK;AACzB,IAAAA,OAAM,aAAa,UAAU,MAAM;AACnC,WAAO,iBAA8B,yBAAY,kBAAkB,WAAW,WAAQ;AACpF,YAAM,SAAS,MAAM,KAAK,MAAM,gBAAe,KAAM,MAAM,KAAK,MAAM,SAAQ;AAC9E,WAAK,SAAS,EAAC,SAAS,EAAC,MAAM,KAAK,OAAO,IAAI,KAAK,QAAQ,KAAK,MAAM,QAAQ,OAAM,EAAC,CAAC;AACvF,WAAK,QAAQ;AACb,WAAK,SAAS,OAAO,SAAQ;IAC/B,CAAC;AACD,WAAO,iBAA8B,yBAAY,wBAAwB,WAAW,WAAQ;AAC1F,YAAM,SAAS,MAAM,KAAK,MAAM,gBAAe,KAAM,MAAM,KAAK,MAAM,SAAQ;AAC9E,WAAK,SAAS,EAAC,SAAS,EAAC,MAAM,KAAK,OAAO,IAAI,KAAK,QAAQ,KAAK,MAAM,QAAQ,OAAM,EAAC,CAAC;AACvF,WAAK,QAAQ;AACb,WAAK,SAAS,OAAO,SAAQ;IAC/B,CAAC;AACD,WAAO,iBAA8B,yBAAY,WAAW,WAAW,WAAQ;AAC7E,YAAM,QAAQ,IAAI;AAClB,WAAK,SAAS;QACZ,SAAS,WAAW,GAAG;UACrB,MAAI;UACJ,KAAK,KAAK,SAAS,MAAM;UACzB,MAAM,KAAK;UACX;UACA,OAAO,KAAK;SACb;OACF;IACH,CAAC;AACD,WAAO;EACT;EAES,cAAW;AAClB,WAAO;EACT;;AAGF,IAAM,oBAAN,cAA2C,uBAAU;EAC9B;EAAyC;EAA9D,YAAqB,OAAyC,MAAY;AACxE,UAAK;AADc,SAAA,QAAA;AAAyC,SAAA,OAAA;EAE9D;EAES,GAAG,OAAwB;AAClC,WAAO,KAAK,MAAM,UAAS,MAAO,MAAM,MAAM,UAAS,KAAM,KAAK,SAAS,MAAM;EACnF;EAEA,MAAM,MAA2B;AAC/B,UAAM,YAAY,SAAS,cAAc,MAAM;AAC/C,UAAM,aAAa,UAAU,YAAY,MAAM;AAC/C,UAAM,OAAkB,iBAAK,OAAO,uBAAuB,oBAAoB;AAC/E,SAAK,aAAa,SAAS,GAAiB,+BAAgB,QAAQ,CAAC,EAAE;AACvE,eAAW,OAAO,KAAK,IAAI;AAC3B,IAAG,YAAQ,QAAQ,QAAQ,MAAMF,YAAWF,WAAU,qBAAqB,CAAC;AAC5E,SAAK,iBAAiB,SAAS,CAAC,UAAqB;AACnD,YAAM,QAAQ,IAAI;AAClB,WAAK,SAAS;QACZ,SAAS,WAAW,GAAG;UACrB,MAAI;UACJ,KAAK,KAAK,SAAS,IAAI;UACvB,MAAM,KAAK;UACX,QAAQ;UACR,OAAO,KAAK;SACb;OACF;IACH,GAAG,KAAK;AACR,WAAO;EACT;EAES,cAAW;AAClB,WAAO;EACT;;AAsBF,SAAS,iBAAiB,QAAqB;AAC7C,SAAO;IACL,KAAK,OAAO;IACZ,OAAO;IACP,OAAO,MAAI;AACT,UAAI,OAAO,OAAO;AAClB,UAAI,QAAwB;AAC5B,UAAI,OAAO,SAAI,GAAwB;AACrC,cAAM,WAAW,IAAgB,qBAAS,SAAQ;AAClD,sBAAc,aAAU;AACtB,mBAAS,iBAAgB,gBAA4C,OAAO;QAC9E;AACA,iBAAS,iBAAgB,eAA2C,MAAM,KAAK,eAAc,CAAE;AAC/F,iBAAS,SAAS,OAAO,KAAK;AAC9B,iBAAS;MACX,OAAO;AACL,cAAM,WAAW,IAAiB,0BAAa,aAAa,OAAO,KAAK;AACxE,iBAAS;AACT,sBAAc,aAAU;AACtB,mBAAS,iBAAgB,iBAAkD,OAAO;QACpF;MACF;AACA,YAAM,MAAM,SAAS,cAAc,KAAK;AACxC,UAAI,YAAY;AAChB,aAAO,WAAU;AACjB,aAAO,KAAK,GAAG;AACf,aAAO,WAAU;AACjB,aAAO,QAAQ,iBAAiB,WAAW,WAAQ;AACjD,YAAI,MAAM,QAAQ,UAAU;AAC1B,gBAAM,QAAO;AACb,eAAK,SAAS;YACZ,SAAS,WAAW,GAAG,IAAI;YAC3B,SAAS,SAAS,OAAO,OAAO,SACA,EAAC,MAAM,OAAO,KAAK,IAAI,OAAO,MAAM,KAAK,QAAQ,QAAQ,OAAO,KAAI;WACrG;AACD,iBAAO,WAAU;AACjB,eAAK,MAAK;QACZ;MACF,CAAC;AACD,aAAO,QAAQ,iBAAiB,YAAY,WAAQ;AAClD,YAAI,MAAM,iBAAiB,CAAC,OAAO,QAAQ,SAAS,MAAM,aAAqB,GAAG;AAChF,eAAK,SAAS,EAAC,SAAS,WAAW,GAAG,IAAI,EAAC,CAAC;AAC5C,iBAAO,WAAU;QACnB;MACF,GAAG,KAAK;AACR,aAAO,QAAQ,iBAAiB,aAAa,WAAS,MAAM,QAAO,CAAE;AACrE,aAAO;QACL;QACA,QAAQ;QACR,QAAQ,EAAC,GAAG,IAAI,GAAG,EAAC;QACpB,OAAO,MAAK;AACV,iBAAO,MAAK;AACZ,iBAAO,SAAQ;AACf,sBAAY,CAAC,UAAyB;AACpC,iBAAK,SAAS;cACZ,SAAS,EAAC,MAAM,OAAO,KAAK,IAAI,OAAO,MAAM,KAAK,QAAQ,QAAQ,MAAM,KAAI;cAC5E,aAAa,aAAa,GAAG,IAAI;aAClC;AACD,mBAAO,MAAM;UACf,CAAC;QACH;;IAEJ;;AAEJ;AAEA,IAAM,aAAwB,wBAAY,OAAM;AAEhD,IAAM,eAA0B,uBAAW,OAAM;AAEjD,IAAM,kBAA6B,uBAAW,OAA2B;EACvE,SAAM;AACJ,WAAO;EACT;EAEA,OAAOI,QAA2B,IAA0B;AAEtD,SAAK,GAAG,cAAc,GAAG,cAAc,CAAC,GAAG,WAAW,YAAY,GAAG;AACnE,MAAAA,SAAQ;IACV;AACA,eAAW,UAAU,GAAG,SAAS;AAC/B,UAAI,OAAO,GAAG,UAAU,GAAG;AACzB,QAAAA,SAAQ,OAAO;MACjB;IACF;AACA,WAAOA;EACT;EAEJ,SAAS,WAAoB,wBAAY,KAAK,OAAO,YAAU,UAAU,iBAAiB,MAAM,CAAC;CAClG;AAED,SAAS,kBAAkB,OAA+B,MAAc,IAAU;AAChF,QAAM,UAAU,IAAe,4BAAe;AAC9C,sBACI,OAAO,MAAM,IACb,CAAC,KAAK,aAAa,cAAa;AAC9B,YAAQ,IACJ,KAAK,KAAgB,uBAAW,OAAO,EAAC,QAAQ,IAAI,kBAAkB,aAAa,WAAW,GAAG,EAAC,CAAC,CAAC;EAC1G,GACA,CAAC,KAAK,OAAO,SAAQ;AACnB,YAAQ,IAAI,KAAK,KAAgB,uBAAW,OAAO,EAAC,QAAQ,IAAI,kBAAkB,OAAO,IAAI,EAAC,CAAC,CAAC;EAClG,CAAC;AACL,SAAO,QAAQ,OAAM;AACvB;AAEA,IAAM,kBAA6B,uBAAW,UAAU,MAAA;EACtD;EAEA,YAAY,MAA2B;AACrC,SAAK,cAAc,kBAAkB,KAAK,OAAO,KAAK,SAAS,MAAM,KAAK,SAAS,EAAE;EACvF;EAEA,OAAO,QAA6B;AAClC,QAAI,OAAO,mBAAmB,OAAO,YAAY;AAC/C,WAAK,cAAc,kBAAkB,OAAO,OAAO,OAAO,KAAK,SAAS,MAAM,OAAO,KAAK,SAAS,EAAE;IACvG;EACF;GACC;EACD,aAAa,OAAK,EAAE;CACrB;AAED,SAAS,cAAW;AAClB,SAAO,CAAC,iBAAiB,iBAAiBG,MAAK;AACjD;AAEA,SAAS,YAAY,MAA2B;AAC9C,MAAI,KAAK,SAAS,QAAQ;AACxB,WAAO,KAAK;EACd;AACA,MAAI,KAAK,SAAS,iBAAiB;AACjC,UAAM,YAAY,KAAK;AACvB,WAAO,EAAC,MAAM,KAAK,MAAM,IAAI,aAAa,UAAU,SAAS,SAAS,UAAU,OAAO,KAAK,GAAE;EAChG;AACA,SAAO;AACT;AAEA,SAAS,WAAW,MAA6B,IAAU;AACzD,QAAM,EAAC,KAAI,IAAI,KAAK,MAAM,UAAU;AACpC,QAAM,UAAqB,uBAAW,KAAK,KAAK,EAAE,aAAa,MAAM,EAAE;AACvE,QAAM,cAAc,YAAY,OAAO,KAAK,YAAY,QAAQ,QAAQ,MAAM,CAAC,CAAC;AAChF,MAAI,CAAC,aAAa;AAChB,WAAO;EACT;AAEA,QAAM,gBAAgB,OAAO,KAAK,MAAM,SAAS,YAAY,MAAM,YAAY,EAAE,CAAC;AAClF,MAAI,MAAM,aAAa,GAAG;AACxB,WAAO;EACT;AAEA,OAAK,SAAS;IACZ,SAAS,EAAC,MAAM,YAAY,MAAM,IAAI,YAAY,IAAI,QAAQ,OAAO,gBAAgB,EAAE,EAAC;IACxF,gBAAgB;IAChB,WAAW;GACZ;AACD,SAAO;AACT;AAEM,SAAU,cAAW;AAGzB,MAAI,cAAqC;AACzC,QAAM,WAAc,qBAAiB,iBAAiB,SAAQ,EAAG,oBAAoB;IACnF,yBAAyB,MAAM,QAAQ,QAAQ,WAAW,aAAa,CAAC,CAAC;IACzE,gCAAgC,MAAM,QAAQ,QAAQ,WAAW,aAAa,EAAE,CAAC;IACjF,yBAAyB,MAAM,QAAQ,QAAQ,WAAW,aAAa,EAAE,CAAC;IAC1E,gCAAgC,MAAM,QAAQ,QAAQ,WAAW,aAAa,GAAG,CAAC;GACnF;AAED,SAAkB,uBAAW,iBAAiB;IAC5C,SAAS,CAAC,OAAO,SAAQ;AACvB,YAAM,WAAW;AACjB,oBAAc;AACd,eAAS,KAAK;AACd,oBAAc;AACd,aAAO,MAAM;IACf;GACD;AACH;AAEM,IAAO,YAAP,cAAyB,OAAM;EACnC;EAEA,YAAY,cAAmD,cAAkD;AAC/G,UAAM,cAAc,YAAY;AAChC,IAAI,mBAAc,cAAc,SAAQ,EAAG,cAAkB,cAAS,UAAU,IAAI;EACtF;EAEA,OAAgB,QAAQ,cAAiD;AACvE,WAAO,aAAa,YAAW,EAAG,eAAc;EAClD;EAEA,WAAW,UAA+B;AACxC,QAAI,SAAS,OAAM,MAAW,mBAAc,cAAc,SAAQ,EAAG,kBAAiB,GAAI;AACxF;IACF;AACA,SAAK,YAAY;EACnB;EACA,aAAa,UAA+B;AAC1C,QAAI,KAAK,cAAc,UAAU;AAC/B,WAAK,YAAY;IACnB;EACF;EAES,kBAAe;AACtB,WAAO,CAAC,YAAW,GAAI,KAAK,eAAc,GAAI,YAAW,CAAE;EAC7D;EAEA,iBAAc;AACZ,UAAM,EAAC,oBAAmB,IAAe;AAKzC,UAAM,eAAe,KAAK;AAC1B,UAAM,WAAW,KAAK;AAEtB,WAAkB,2BAAe;MAC/B,UACI,CAAC,OAAM,OAC0C;AAC1C,eAAO,OAAQ,MAAM,sBAAsB,IAAI,cAAc,QAAQ,KAAM,oBAAoB,EAAE;MACnG,CAAC;KACX;EACH;EAES,4BAA4B,aAAuC;AAC1E,aAAS,gBAAgBC,WAAiC,WAA0C;AAClG,YAAMC,UAAS,sBAAsB,4BAA4B,kBAAe;AAC9E,QAAS,8BAAoB,oBAAoB,SAAQ,EAAG,YAAY,IAAID,SAAQ,GAAG,aACnF,WAAW,YAAY;MAC7B,CAAC;AACD,MAAAC,QAAO,KAAI;IACb;AAEA,UAAM,WAAW,KAAK;AACtB,UAAM,MAAM,KAAK,aAAa,IAAG;AACjC,QAAI,KAAK,aAAa,QAAO,EAAG,KAAI,MAAiB,qBAAU,aAAa,WAAW,YACnF,CAAW,6BAAkB,kBAAkB,SAAQ,EAAG,sBAAsB,GAAG,GAAG;AACxF,YAAM,uBAAuBP,YAAWF,WAAU,YAAY;AAC9D,kBAAY,aAAY,EAAG,WACvB,sBAAsB,MAAM,gBAAgB,UAAU,GAAG,GAAG,EAAC,cAAc,iBAAgB,CAAC;IAClG;EACF;;AAGF,IAAMO,SAAmB,uBAAW,UAAU;EAC5C,qCAAqC;IACnC,cAAc;IACd,oBAAoB;IACpB,iBAAiB;;CAEpB;;;AC1fD;;;;;AAKA,YAAYG,aAAY;AACxB,YAAYC,YAAU;AAEtB,YAAYC,UAAS;AAIrB,YAAYC,iBAAgB;AAC5B,YAAYC,SAAQ;AACpB,YAAYC,oBAAmB;;;ACT/B,IAAO,oCAAQ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBA4CC,YAAY,QAAQ,6BAA6B,CAAC;;;AD9BlE,IAAMC,aAAY;;;;;EAKhB,WAAW;;;;;EAKX,aAAa;;;;;EAKb,kBAAkB;;;;;EAKlB,oBAAoB;;;;EAIpB,uBAAuB;;;;EAIvB,oBAAoB;;;;EAIpB,mBAAmB;;;;;;;EAOnB,0BAA0B;;;;EAI1B,mBAAmB;;;;EAInB,0BAA0B;;;;EAI1B,kCAAkC;;;;EAIlC,sBAAsB;;;;EAItB,0BAA0B;;;;EAI1B,4BAA4B;;;;EAI5B,oBAAoB;;;;EAIpB,gBAAgB;;;;EAIhB,sBAAsB;;;;EAItB,wBAAwB;;;;EAIxB,aAAa;;;;;EAKb,kBAAkB;;;;;EAKlB,2BAA2B;;AAE7B,IAAMC,QAAY,YAAK,kBAAkB,2CAA2CD,UAAS;AAC7F,IAAME,cAAkB,YAAK,mBAAmB,KAAK,QAAWD,KAAI;AACpE,IAAME,kBAAsB,YAAK,iCAAiC,KAAK,QAAWF,KAAI;AAEhF,IAAO,wBAAP,MAAO,uBAAqB;EACf;EACT;EACR,cAAA;AACE,SAAK,kBAAkB,SAAS,cAAc,KAAK;AACnD,SAAK,gBAAgB,UAAU,IAAI,gBAAgB;AACnD,SAAK,gBAAgB,UAAU,IAAI,WAAW;AAC9C,SAAK,gBAAgB,aAAa,SAAS,GAAiB,sBAAO,iBAAiB,CAAC,EAAE;AACvF,UAAM,OACC,YAAQ,+BAA+B,KAAK,iBAAiB,EAAC,SAAS,kCAA2B,CAAC;AAC1G,SAAK,iBAAiB,KAAK,YAAY,KAAK;AAC5C,IAAG,cAAU,uBAAuB,KAAK,iBAAiB,KAAK;EACjE;EAEA,UAAO;AACL,WAAO,KAAK;EACd;EAEQ,OAAO,wBAAwB,aAAmB;AACxD,UAAM,iBAAiB,YAAY,KAAK,WAAW;AACnD,WAAO,iBAAiB,YAAY,UAAU,GAAG,eAAe,QAAQ,CAAC,IACjD,YAAY,UAAU,GAAG,YAAY,YAAY,IAAI,CAAC;EAChF;EAEQ,aAAa,8BAA8B,SAAgD;AAEjG,UAAM,iBAAiB,SAAS,cAAc,MAAM;AACpD,UAAM,mBAAmB,QAAQ,cAAc,OAAM,EAAG,MAAU,sBAAiB,gBAAgB;AACnG,QAAI,CAAC,QAAQ,WAAW,CAAC,kBAAkB;AACzC,aAAO;IACT;AACA,UAAM,OAAO,iBAAiB,yBAA0B,QAAQ,OAK9D;AACF,QAAI,CAAC,MAAM;AACT,aAAO;IACT;AAEA,UAAM,cAAc,eAAe,YAAY,OAAO,aAAa;AACnE,UAAM,WAAW,IAAe,iBAAK,KAAI;AACzC,aAAS,OAAO;MACd,UAAU;MACV,OAAO;MACP,OAAO;MACP,QAAQ;;AAEV,gBAAY,YAAY,QAAQ;AAChC,UAAM,iBAAiB,oBAAoB,IAAI,KAAK,IAAI;AACxD,gBAAY,YAAY,SAAS,eAC7BC,YAAWF,WAAU,WAAW,EAAC,KAAK,iBAAiB,eAAc,IAAK,OAAO,IAAI,EAAC,CAAC,CAAC,CAAC;AAE7F,UAAM,aAAa,eAAe,YAAY,OAAO,sBAAsB;AAC3E,UAAM,gBAAgB,MAAa,kBAAU,UAAU,QAAQ,KAAK,IAAI;AACxE,eAAW,YAAY,aAAa;AAEpC,QAAI,KAAK,YAAY;AACnB,YAAM,iBAAiB,MAAa,kBAAU,UAAU,QAAQ,KAAK,UAAU;AAC/E,UAAI;AACJ,UAAI,KAAK,WAAW;AAClB,YAAI,KAAK,eAAe,KAAK,MAAM;AACjC,2BAAsB,YAAK,yBAAyBC,OAAMD,WAAU,aAAa,EAAC,KAAK,eAAc,CAAC;QACxG,OAAO;AACL,2BAAsB,YAAK,yBAAyBC,OAAMD,WAAU,kBAAkB,EAAC,KAAK,eAAc,CAAC;QAC7G;MACF,OAAO;AACL,yBAAsB,YAAK,yBAAyBC,OAAMD,WAAU,oBAAoB,EAAC,KAAK,eAAc,CAAC;MAC/G;AACA,iBAAW,YAAY,SAAS,cAAc,IAAI,CAAC;AACnD,iBAAW,YAAY,cAAc;IACvC;AACA,WAAO;EACT;EAEA,OAAO,oBAAoB,gBAAoE;AAC7F,QAAI,CAAC,gBAAgB;AACnB,aAAO;IACT;AACA,UAAM,EAAC,WAAW,gBAAgB,eAAe,WAAU,IAAI;AAE/D,QAAI,cAAc,qCAAqC,gBAAgB;AAErE,YAAM,YAAY,eAAe,QAAQ,wBAAwB,IAAI;AACrE,aAAOE,YAAWF,WAAU,kBAAkB,EAAC,KAAK,UAAS,CAAC;IAChE;AACA,QAAI,cAAc,wCAAwC,eAAe;AACvE,aAAOE,YAAWF,WAAU,2BAA2B,EAAC,KAAK,cAAa,CAAC;IAC7E;AAEA,QAAI,aACI,2BAAsB,wBAAwB,SAAQ,EAAG,+BAA+B,cAAc;AAC9G,QAAI,YAAY;AAEd,aAAO,2BAA2B,WAAW,IAAI;IACnD;AAEA,iBAAiB,sBAAiB,mBAAmB,SAAQ,EAAG,+BAA+B,cAAc;AAC7G,QAAI,cAAc,YAAY;AAE5B,aAAO,aAAa,MAAM,WAAW;IACvC;AACA,WAAO,YAAY,QAAQ;EAC7B;EAEA,MAAM,OACF,SACA,0BACA,mBAAwE;AAC1E,SAAK,eAAe,eAAc;AAClC,SAAK,eAAe,SAAS,CAAC;AAC9B,QAAI,CAAC,SAAS;AACZ;IACF;AAEA,UAAM,SAAS,KAAK,eAAe,YAAY,OAAO,eAAe;AAErE,UAAM,YAAY,QAAQ,WAAM,eAC5B,QAAQ,WAAM,sBACd,QAAQ,WAAM,YACd,QAAQ,WAAM;AAClB,QAAI;AACJ,QAAI,QAAQ,WAAM,OAA8C;AAC9D,uBAAiB,MAAM,uBAAsB,8BAA8B,OAAO;IACpF,WAAW,QAAQ,WAAM,iBAAwD;AAC/E,YAAM,iBAAiB,uBAAsB,oBACzC,QAAQ,OAA8D;AAC1E,uBAAiB,aAAaE,YAAWF,WAAU,qBAAqB,GAAG,cAAc;IAC3F,WAAW,QAAQ,WAAM,OAA8C;AACrE,YAAM,UAAW,QAAQ;AACzB,uBAAiB,aAAaE,YAAWF,WAAU,kBAAkB,GAAG,QAAQ,OAAO,EAAE;IAC3F,WAAW,QAAQ,WAAM,aAAoD;AAC3E,YAAM,UAAW,QAAQ;AACzB,YAAM,cAAc,QAAQ,eAAe,QAAQ,SAAS;AAC5D,YAAM,0BAA0B,uBAAsB,wBAAwB,WAAW;AACzF,uBAAiB,aAAaE,YAAWF,WAAU,iBAAiB,GAAG,yBAAyB,WAAW;IAC7G,WAAW,QAAQ,WAAM,oBAA2D;AAClF,YAAM,UAAW,QAAQ;AACzB,YAAM,cAAc,QAAQ,eAAe,QAAQ,SAAS;AAC5D,YAAM,0BAA0B,uBAAsB,wBAAwB,WAAW;AACzF,uBACI,aAAaE,YAAWF,WAAU,wBAAwB,GAAG,yBAAyB,WAAW;IACvG,WAAW,QAAQ,WAAM,UAAiD;AACxE,uBAAiB,aAAaE,YAAWF,WAAU,iBAAiB,CAAC;IACvE,WAAW,QAAQ,WAAM,gBAAuD;AAC9E,uBAAiB,aAAaE,YAAWF,WAAU,wBAAwB,CAAC;IAC9E,WAAW,QAAQ,WAAM,OAA8C;AACrE,uBAAiB,aAAaE,YAAWF,WAAU,gCAAgC,CAAC;IACtF,WACI,QAAQ,WAAM,kBAAyD,QAAQ,UAAU,eAAe,GAAG;AAC7G,YAAM,OAAQ,QAAQ,QAAQ,eAAe;AAC7C,UAAI,SAAI,8BAAqE;AAC3E,yBACI,aAAaE,YAAWF,WAAU,oBAAoB,GAAGE,YAAWF,WAAU,wBAAwB,CAAC;MAC7G,WAAW,SAAI,gCAAuE;AACpF,yBACI,aAAaE,YAAWF,WAAU,oBAAoB,GAAGE,YAAWF,WAAU,0BAA0B,CAAC;MAC/G;IACF,WAAW,QAAQ,WAAW,QAAQ;AACpC,YAAM,aAAa,MAAM,yBAAyB,wBAAwB,QAAQ,WAAW,CAAC,EAAE,SAAQ,CAAE;AAC1G,YAAM,aAAa,aAAa,kBAAkB,eAAe,UAAU,IAAI;AAC/E,YAAM,cAAc,aAAaE,YAAWF,WAAU,kBAAkB,IAAIE,YAAWF,WAAU,cAAc;AAC/G,uBAAiB,aAAa,WAAW;IAC3C,OAAO;AACL,cAAQ,KACJ,qDAAqD;IAC3D;AAEA,WAAO,UAAU,OAAO,gBAAgB,SAAS;AACjD,QAAI,gBAAgB;AAClB,aAAO,YAAY,cAAc;IACnC;AAEA,aAAS,aAAa,UAAkB,SAAkB,OAAc;AACtE,YAAMI,kBAAiB,SAAS,cAAc,MAAM;AACpD,YAAM,cAAcA,gBAAe,YAAY,OAAO,aAAa;AACnE,YAAM,WAAW,IAAe,iBAAK,KAAI;AACzC,eAAS,OAAO;QACd,UAAU,YAAY,wBAAwB;QAC9C,OAAO,YAAY,sBAAsB;QACzC,OAAO;QACP,QAAQ;;AAEV,kBAAY,YAAY,QAAQ;AAChC,kBAAY,YAAY,SAAS,eAAe,QAAQ,CAAC;AACzD,UAAI,SAAS;AACX,cAAM,aAAaA,gBAAe,YAAY,OAAO,sBAAsB;AAC3E,mBAAW,cAAc;AACzB,QAAG,YAAQ,QAAQ,QAAQ,YAAY,SAAS,OAAO;MACzD;AACA,aAAOA;IACT;EACF;;AAGK,IAAM,sBAAsB,oBAAI,IAAI;EACzC,CAAA,oBAAyDD,gBAAeH,WAAU,oBAAoB,CAAC;EACvG,CAAA,sBAA2DG,gBAAeH,WAAU,sBAAsB,CAAC;EAC3G,CAAA,gBAAqDG,gBAAeH,WAAU,WAAW,CAAC;CAC3F;;;AE9TD;;;;;;;;;AAgCA,YAAYK,cAAY;AACxB,YAAYC,WAAU;AACtB,YAAYC,YAAU;AACtB,YAAYC,gBAAc;AAC1B,YAAYC,WAAS;AAErB,YAAYC,eAAc;AAC1B,YAAYC,kBAAiB;AAC7B,YAAY,eAAe;AAC3B,YAAYC,sBAAqB;AACjC,YAAYC,gBAAe;AAC3B,YAAYC,iBAAe;AAC3B,YAAYC,iBAAgB;AAC5B,YAAYC,cAAa;AACzB,YAAYC,iBAAgB;AAC5B,YAAYC,eAAc;AAC1B,YAAYC,eAAc;AAC1B,YAAYC,mBAAiB;AAC7B,YAAYC,UAAQ;AACpB,YAAYC,qBAAmB;;;ACnD/B;;wBAAAC;EAAA;;;;;;;;;;;AA+BA,OAAO;AAEP,YAAYC,cAAY;AACxB,YAAYC,WAAU;AACtB,YAAYC,YAAU;AACtB,YAAYC,gBAAc;AAC1B,YAAYC,WAAU;AACtB,YAAYC,WAAS;AAErB,YAAYC,eAAc;AAC1B,YAAYC,kBAAiB;AAC7B,YAAYC,iBAAgB;AAC5B,YAAYC,iBAAe;AAC3B,YAAY,cAAc;AAE1B,YAAYC,UAAQ;AACpB,YAAYC,qBAAmB;AAC/B,YAAYC,eAAc;;;AChD1B;;;;;;;;;;;;AAgCA,YAAYC,aAAY;AACxB,YAAYC,WAAU;AACtB,YAAYC,YAAU;AACtB,YAAYC,eAAc;AAC1B,YAAY,UAAU;AACtB,YAAYC,UAAS;AACrB,YAAYC,eAAc;AAC1B,YAAYC,kBAAiB;AAC7B,YAAYC,gBAAe;AAC3B,YAAYC,gBAAe;AAC3B,YAAYC,cAAa;AACzB,YAAYC,iBAAgB;AAC5B,YAAY,cAAc;AAC1B,YAAYC,UAAQ;AACpB,YAAYC,oBAAmB;AAC/B,YAAY,cAAc;AAC1B,SAAQ,kBAAiB;;;AC3CzB,IAAO,4BAAQ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBAkKC,YAAY,QAAQ,qBAAqB,CAAC;;;AClK1D,IAAO,4BAAQ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBAWC,YAAY,QAAQ,qBAAqB,CAAC;;;AChB1D;;wBAAAC;EAAA,gBAAAC;EAAA;;;AAIA,YAAYC,aAAY;AACxB,YAAYC,SAAQ;AACpB,YAAY,YAAY;;;ACNxB;;;;;AA8BA,YAAYC,aAAY;AACxB,YAAYC,eAAc;AAC1B,YAAYC,eAAc;AAC1B,YAAYC,kBAAiB;AAC7B,YAAYC,gBAAe;AAC3B,YAAYC,gBAAe;AAGrB,IAAO,qBAAP,MAAO,oBAAkB;EACrB;EACA;EACA;EACA;EACA;EACR,cAAA;AAEE,SAAK,WAAW;AAChB,SAAK,yBAAyB,CAAA;AAC9B,SAAK,uBAAuB;AAC5B,SAAK,yBAAyB;AAC9B,SAAK,eAAe;EACtB;EAEQ,OAAO,gBACX,eAAoD,eAAkD;AACxG,QAAI,cAAc,QAAO,KAAM,CAAC,cAAc,QAAO,GAAI;AACvD,aAAO;IACT;AACA,QAAI,CAAC,cAAc,QAAO,KAAM,cAAc,QAAO,GAAI;AACvD,aAAO;IACT;AACA,UAAM,gBAAgB,cAAc,QAAO,EAAG,KAAI,MAAiB,qBAAU,aAAa,cACtF,CAAa,yBAAY,gBAAgB,SAAQ,EAAG,QAAQ,aAAa;AAC7E,UAAM,gBAAgB,cAAc,QAAO,EAAG,KAAI,MAAiB,qBAAU,aAAa,cACtF,CAAa,yBAAY,gBAAgB,SAAQ,EAAG,QAAQ,aAAa;AAC7E,QAAI,kBAAkB,eAAe;AACnC,aAAO,gBAAgB,IAAI;IAC7B;AACA,UAAM,OAAO,cAAc,IAAG;AAC9B,UAAM,OAAO,cAAc,IAAG;AAC9B,QAAI,QAAQ,CAAC,MAAM;AACjB,aAAO;IACT;AACA,QAAI,CAAC,QAAQ,MAAM;AACjB,aAAO;IACT;AACA,WAAgB,0BAAgB,uBAC5B,cAAc,gBAAe,GAAI,cAAc,gBAAe,CAAE;EACtE;EAEQ,OAAO,cACX,eAAoD,eAAkD;AACxG,WAAgB,0BAAgB,uBAAuB,cAAc,IAAG,GAAI,cAAc,IAAG,CAAE;EACjG;EAEA,gBAAgB,UAAkC;AAChD,SAAK,WAAU;AAEf,UAAM,WAAW,KAAK,SAAQ;AAC9B,UAAM,oBAAoB,IAAW,iBAAS,kBAAkB,QAAQ;AACxE,aAAS,IAAI,GAAG,IAAI,SAAS,QAAQ,EAAE,GAAG;AACxC,YAAM,UAAU,SAAS,CAAC;AAC1B,YAAM,kBAAkB,kBAAkB,kBAAkB,CAAC,GAAG,QAAQ,cAAa,CAAE,EAAE,MAAM;AAC/F,cAAQ,aAAa,eAAe;IACtC;EACF;EAEQ,WAAQ;AACd,UAAM,qCACK,iBAAS,SAAS,SAAQ,EAAG,cAAc,yCAAyC,EAAE,IAAG;AAEpG,WAAiB,qBAAU,cAAc,SAAQ,EAAG,SAAQ,EAAG,OAAO,aAAU;AAC9E,UAAI,QAAQ,KAAI,MAAiB,qBAAU,aAAa,SAAS;AAC/D,eAAO;MACT;AACA,UAAI,CAAC,sCAAsC,QAAQ,iBAAgB,KAC/D,QAAQ,KAAI,MAAiB,qBAAU,aAAa,WAAW;AACjE,eAAO;MACT;AACA,UAAI,CAAC,sCAAsC,QAAQ,KAAI,MAAiB,qBAAU,aAAa,gBAAgB;AAC7G,eAAO;MACT;AACA,aAAO;IACT,CAAC;EACH;EAEA,cACI,cAAmD,UACnD,sBACA,wBAA+C;AACjD,SAAK,WAAU;AACf,SAAK,yBAAyB,CAAA;AAC9B,SAAK,uBAAuB;AAC5B,SAAK,yBAAyB;AAC9B,SAAK,eAAe;AAEpB,UAAM,WAAW,CAAA;AACjB,UAAM,oBAAoB,IAAW,iBAAS,kBAAkB,QAAQ;AACxE,UAAM,wBAAwB,kBAAkB,kBAAiB;AACjE,UAAM,4BAA4B,IAAW,iBAAS,kBAAkB,kBAAkB,kBAAiB,CAAE;AAC7G,eAAW,WAAW,KAAK,SAAQ,GAAI;AACrC,YAAM,SAAS,CAAC,GAAG,QAAQ,cAAa,CAAE,EAAE;AAC5C,YAAM,qCAAqC,0BAA0B,kBAAkB,MAAM;AAC7F,YAAM,yBAAyB,KAAK,8BAA8B,SAAS,YAAY;AACvF,YAAM,UACF,QACK,+BAA+B,cAAc,wBAAwB,kCAAkC,EACvG,KAAK,KAAK,+BAA+B,KACtC,MAAM,KAAK,UAAU,SAAS,cAAc,sBAAsB,CAAC;AAC/E,eAAS,KAAK,OAAO;IACvB;AAEA,SAAK,QAAQ,IAAI,QAAQ,EAAE,KAAK,KAAK,qBAAqB,KACtD,MAAM,KAAK,UAAU,uBAAuB,KAAK,uBAAuB,KAAK,MAAM,IAAI,CAAC,CAAC;EAC/F;EAEQ,8BACJ,SAAsC,cACtC,WAAmB;AACrB,UAAM,SAAS,CAAA;AACf,eAAW,gBAAgB,QAAQ,cAAa,GAAI;AAClD,UAAI,CAAC,aAAa,YAAW,EAAG,WAAU,GAAI;AAC5C;MACF;AACA,UAAc,6BAAkB,kBAAkB,SAAQ,EAAG,0CACrD,YAAY,GAAG;AACrB;MACF;AACA,YAAM,UAAsB,yBAAY,gBAAgB,SAAQ,EAAG,QAAQ,YAAY;AACvF,UAAI,WAAW,QAAQ,YAAY,cAAc;AAC/C;MACF;AACA,UAAI,aAAa,CAAC,aAAa,QAAO,GAAI;AACxC;MACF;AACA,UAAI,aAAa,yBACT,aAAa,gBAAe,CACW,GAAG;AAChD,eAAO,KAAK,YAAY;MAC1B;IACF;AACA,WAAO,KAAK,oBAAmB,aAAa;AAC5C,WAAO;EACT;EAEQ,+BACJ,UAAkB,SAAsC,cACxD,wBACA,4BAC0F;AAC5F,QAAI,aAAa,KAAK,YAAY,KAAK,wBAAwB;AAC7D,WAAK,uBAAuB,KAAK;AACjC;IACF;AAEA,QAAI,QAAQ,CAAC,GAAG,2BAA2B,KAAI,CAAE;AACjD,UAAM,KAAK,oBAAmB,aAAa;AAC3C,YAAiB,yBAAe,iBAAiB,OAAO,wBAAwB,oBAAmB,aAAa;AAChH,UAAM,aAAa,KAAK,8BAA8B,SAAS,cAAc,IAAI;AACjF,YAAiB,yBAAe,aAAa,OAAO,YAAY,oBAAmB,aAAa;AAEhG,UAAM,gBAAgB,CAAA;AACtB,eAAW,gBAAgB,OAAO;AAChC,YAAM,SAAkB,+BAAqB,qBAAqB,sBAAsB,YAAY;AACpG,UAAI,UAAU,CAAC,OAAO,kBAAiB,GAAI;AACzC;MACF;AACA,oBAAc,KAAK,YAAY;IACjC;AACA,kBAAc,KAAK,oBAAmB,eAAe;AACrD,SAAK,yBAAkC,yBAAe,aAClD,KAAK,wBAAwB,eAAe,oBAAmB,eAAe;EACpF;EAEQ,qBAAqB,UAAkB,UAAoC,UAAoB;AACrG,QAAI,aAAa,KAAK,YAAY,KAAK,wBAAwB;AAC7D,WAAK,uBAAuB,KAAK;AACjC;IACF;AAEA,UAAM,QAAQ,KAAK;AACnB,QAAI,CAAC,MAAM,QAAQ;AACjB,eAAS,KAAI;AACb,eAAQ;AACR;IACF;AAEA,aAAS,aAAa,MAAM,MAAM;AAElC,QAAI,YAAY;AAChB,UAAM,yBAAyB;AAC/B,QAAI,gBAAgB;AAEpB,aAAS,IAAI,GAAG,IAAI,0BAA0B,IAAI,MAAM,QAAQ,EAAE,GAAG;AACnE,uCAAiC,KAAK,IAAI;IAC5C;AAEA,aAAS,iBAA2C,cAAiD;AACnG,UAAI,aAAa,QAAO,GAAI;AAC1B,sBAAc,KAAK,MAAM,cAAc,IAAc,gBAAK,KAAK,aAAa,YAAW,CAAE,CAAC;MAC5F,OAAO;AACL,aAAK,aAAa,mBAAkB,EAAG,KAAK,iBAAc;AACxD,wBAAc,KACV,MAAM,cAAwB,uBAAY,YAAY,mBAAmB,WAAW,EAAE,OAAO;QACnG,CAAC;MACH;IACF;AAEA,aAAS,mCAAgC;AACvC,UAAI,aAAa,MAAM,QAAQ;AAC7B,YAAI,CAAC,eAAe;AAClB,mBAAS,KAAI;AACb,mBAAQ;AACR;QACF;AACA;MACF;AAEA,QAAE;AACF,YAAM,eAAe,MAAM,WAAW;AACtC,aAAO,WAAW,iBAAiB,KAAK,MAAM,YAAY,GAAG,CAAC;IAChE;AAEA,aAAS,cACqB,cAC1B,SAA4B;AAC9B,eAAS,gBAAgB,CAAC;AAC1B,UAAI,UAAmD,CAAA;AACvD,YAAM,eAAgB,KAAK;AAC3B,YAAM,UAAU,aAAa,QAAO;AACpC,UAAI,YAAY,MAAM;AACpB,iBAAS,IAAI,GAAG,IAAI,QAAQ,QAAQ,EAAE,GAAG;AACvC,gBAAM,cAAwB,qBAAU,uBACpC,SAAS,QAAQ,CAAC,GAAG,CAAC,aAAa,WAAU,GAAI,aAAa,QAAO,CAAE;AAC3E,oBAAmB,yBAAe,aAC9B,SAAS,aAAuB,2BAAgB,YAAY,UAAU;QAC5E;AACA,YAAI,CAAC,aAAa,QAAO,EAAG,QAAQ;AAClC,oBAAU,CAAC,IAAc,2BAAgB,YAAY,GAAG,QAAQ,OAAO,CAAC,GAAG,GAAG,CAAC,CAAC;QAClF;MACF;AACA,UAAI,WAAW,KAAK,sBAAsB;AACxC,cAAM,eAAe,IAAI,sBAAsB,cAAc,OAAO;AACpE,aAAK,qBAAqB,YAAY;MACxC;AAEA,QAAE;AACF,uCAAiC,KAAK,IAAI;IAC5C;EACF;EAEA,aAAU;AACR,MAAE,KAAK;EACT;;AAGI,IAAO,wBAAP,MAA4B;EACf;EACA;EACjB,YACI,cAAmD,eAAsD;AAC3G,SAAK,eAAe;AACpB,SAAK,gBAAgB;EACvB;EAEA,QAAK;AACH,WAAO,KAAK,aAAa,YAAW;EACtC;EAEA,cAAW;AACT,WAAO,KAAK,aAAa,gBAAe;EAC1C;EAEA,eAAY;AACV,WAAO,KAAK,cAAc;EAC5B;EAEA,iBAAiB,OAAa;AAC5B,WAAO,KAAK,cAAc,KAAK,EAAE;EACnC;EAEA,gBAAgB,OAAa;AAC3B,UAAM,EAAC,YAAY,cAAc,YAAW,IAAI,KAAK,cAAc,KAAK;AACxE,UAAM,QAAQ,IAAc,qBAAU,UAAU,YAAY,cAAc,YAAY,eAAe,WAAW;AAChH,WAAO,IAAc,wBAAa,gBAAgB,KAAK,cAAc,KAAK;EAC5E;EAEA,WAAW,OAAa;AACtB,WAAO,OAAO,KAAK,cAAc,KAAK,EAAE,aAAa,CAAC;EACxD;EAEA,YAAY,OAAa;AACvB,WAAO,KAAK,cAAc,KAAK,EAAE;EACnC;EAEA,YAAY,OAAa;AACvB,WAAO,KAAK,cAAc,KAAK,EAAE;EACnC;;;;AD7TI,IAAO,gBAAP,MAAoB;EACf;EACT,YAAY,OAAa;AACvB,SAAK,QAAQ;EACf;;AAGI,IAAO,oBAAP,cAAwC,kBAAW,WAAU;EACjE,cAAA;AACE,UAAM,WAAW,IAAW,kBAAU;;MAA0B;IAAG,CAAC;EACtE;EAES,cAAW;AAClB,WAAO,IAAI,mBAAkB;EAC/B;;AAGI,IAAOC,kBAAP,MAAqB;EACzB,aAAa,UAA8B,UAAgB;AACzD,YAAQ,UAAU;MAChB,KAAK,kBAAkB;AACrB,cAAM,YAAe,kBAAc,cAAc,SAAQ,EAAG,QAAQ,OAAM,EAAG,aAAY;AACzF,cAAM,QAAQ,YAAY,UAAU,SAAQ,EAAG,QAAQ,WAAW,EAAE,IAAI;AACxE,aAAY,iBAAS,OAAO,IAAI,cAAc,KAAK,CAAC;AACpD,eAAO;MACT;IACF;AACA,WAAO;EACT;;AAGI,IAAOC,YAAP,MAAe;EACnB,MAAM,OAAO,EAAC,MAAK,GAAkB,WAA6B;AAChE,UAAM,cAAiB,gBAAY,YAAY,SAAQ;AACvD,UAAM,YAAY,SAAS,8BAA8B,MAAM,SAAS;AACxE,UAAM,oBAAoB,YAAY,mBAAmB,4BAA4B;AACrF,QAAI,6BAA6B,mBAAmB;AAClD,wBAAkB,OAAO,KAAK;IAChC;EACF;;;;AHKF,IAAMC,cAAY;;;;EAIhB,gBAAgB;;;;EAIhB,kBAAkB;;;;EAIlB,UAAU;;;;EAIV,UAAU;;;;EAIV,iBAAiB;;;;EAIjB,UAAU;;;;EAIV,iBAAiB;;;;EAIjB,mBAAmB;;;;EAInB,sBAAsB;;;;EAItB,gBAAgB;;;;EAIhB,QAAQ;;;;EAIR,WAAW;;;;EAIX,QAAQ;;;;EAIR,QAAQ;;;;EAIR,cAAc;;;;EAId,sBAAsB;;;;EAItB,YAAY;;;;EAIZ,SAAS;;;;EAIT,eAAe;;;;EAIf,2BAA2B;;;;;EAK3B,+BAA+B;;;;EAI/B,sBAAsB;;;;;EAKtB,gBAAgB;;;;;EAKhB,eAAe;;;;;EAKf,SAAS;;;;;EAKT,0BAA0B;;AAG5B,IAAMC,SAAY,YAAK,kBAAkB,mCAAmCD,WAAS;AACrF,IAAME,cAAkB,YAAK,mBAAmB,KAAK,QAAWD,MAAI;AAC7D,IAAM,QAAQ;EACnB,UAAU;EACV,qBAAqB;EACrB,UAAU;EACV,QAAQ;EACR,MAAM;EACN,YAAY;EACZ,kBAAkB;EAClB,OAAO;EACP,eAAe;EACf,MAAM;EACN,QAAQ;;AAGV,IAAM,cAAc,oBAAI,IAAI;EAC1B,CAAC,MAAM,MAAM,CAAC;EACd,CAAC,MAAM,UAAU,CAAC;EAClB,CAAC,MAAM,UAAU,CAAC;EAClB,CAAC,MAAM,QAAQ,EAAE;EACjB,CAAC,MAAM,kBAAkB,CAAC;EAC1B,CAAC,MAAM,eAAe,CAAC;EACvB,CAAC,MAAM,MAAM,EAAE;EACf,CAAC,MAAM,OAAO,EAAE;EAChB,CAAC,MAAM,QAAQ,EAAE;EACjB,CAAC,MAAM,qBAAqB,EAAE;EAC9B,CAAC,MAAM,YAAY,GAAG;CACvB;AAEK,IAAO,gBAAP,MAAO,uBAAyB,YAAO,KAAI;EACvC;EACR;EACiB;EAEA;EACA;EACA;EACT;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACR,YAAY,cAAsB,wBAAgC;AAChE,UAAM;MACJ,OAAO,GAAiB,oBAAK,YAAY,EAAE,MAAM,EAAC,QAAQ,KAAI,CAAC,CAAC;MAChE,cAAc;KACf;AACD,SAAK,oBAAoB,yBAAmB;AAE5C,SAAK,cAAc;AACnB,SAAK,cAAc,IAAO,iBAAY;MAAmB;;IAAA;AACzD,SAAK,YAAY,oBAAoB,yBAAmB;AAExD,SAAK,YAAY,aAAY;AAC7B,SAAK,YAAY,cAAc,eAAc,mBAAmB;AAChE,SAAK,YAAY,aAAa,KAAK;AACnC,SAAK,eAAe,YAAY,KAAK,YAAY,OAAO;AACxD,SAAK,yBAAyB,KAAK,YAAY,OAAO;AAEtD,SAAK,oBAAoB,IAAa,uBAAa,SAAQ;AAC3D,SAAK,iBAAiB,oBAAI,IAAG;AAE7B,SAAK,WAAW,IAAI,sBAAsB,IAAI;AAC9C,SAAK,SAAS,SAAQ;AAEtB,SAAK,aAAa,oBAAI,IAAG;AAEzB,SAAK,eAAe,iBAAiB,eAAe,KAAK,kBAAkB,KAAK,IAAI,GAAG,KAAK;AAC5F,IAAG,sBAAiB,iBAAiB,SAAQ,EAAG,oBAC5C,KAAK,gBAAgB,EAAC,kBAAkB,KAAK,eAAe,KAAK,IAAI,EAAC,CAAC;AAE3E,SAAK,gCAAuC,iBAAS,SAAS,SAAQ,EAAG,cAAc,2BAA2B;AAClH,SAAK,8BAA8B,kBAAkB,KAAK,gBAAgB,KAAK,IAAI,CAAC;AACpF,QAAI,wBAAwB;AAC1B,WAAK,qCAAkC;IACzC;AAEA,IAAU,6BAAkB,kBAAkB,SAAQ,EAAG,kBAAkB,KAAK,kBAAkB,KAAK,IAAI,CAAC;AAE5G,SAAK,aAAY;AAEjB,IAAY,yBAAY,gBAAgB,SAAQ,EAAG,iBACnC,yBAAY,OAAO,gBAAgB,KAAK,kBAAkB,IAAI;AAC9E,IAAY,yBAAY,gBAAgB,SAAQ,EAAG,iBACnC,yBAAY,OAAO,gBAAgB,KAAK,kBAAkB,IAAI;AAC9E,IAAY,uCAA0B,0BAA0B,SAAQ,EAAG,iBAAgB,yCAEvF,KAAK,0CAA0C,IAAI;AACvD,IAAI,mBAAc,cAAc,SAAQ,EAAG,iBAAgB,eAChB,KAAK,mBAAmB,IAAI;AAEvE,IAAI,mBAAc,cAAc,SAAQ,EAAG,eAAe,IAAI;AAC9D,SAAK,eAAyB,qBAAU,cAAc,SAAQ,CAAE;AAChE,SAAK,kBAAkB,cAAa,EAAG,QAAQ,KAAK,gBAAgB,KAAK,IAAI,CAAC;AAC9E,IAAS,yBAAe,sBAAsB,SAAQ,EAAG,iBAAgB,yBACb,KAAK,uBAAuB,IAAI;AAC5F,IAAS,yBAAe,sBAAsB,SAAQ,EAAG,iBAAgB,2BACX,KAAK,yBAAyB,IAAI;EAClG;EAEQ,OAAO,iBAAiB,aAAuC;AACrE,QAAI,kBAAkB,IAAI,WAAW,GAAG;AACtC,aAAO;IACT;AAEA,UAAM,gBAAiB;AAEvB,QAAI,QAAQ,YAAY,IAAI,cAAc,QAAQ,KAAK;AACvD,QAAI,cAAc,cAAc;AAC9B,YAAM,cAAc,cAAc,aAAa,YAAW;AAC1D,UAAI,YAAY,WAAU,GAAI;AAC5B,iBAAS;MACX,WAAW,YAAY,SAAQ,GAAI;AACjC,iBAAS;MACX,WAAW,YAAY,aAAY,GAAI;AACrC,iBAAS;MACX,OAAO;AACL,iBAAS;MACX;IACF;AAEA,WAAO;EACT;EAEA,OAAO,iBAAiB,aAAyC,MAAY;AAC3E,UAAM,cAAc,OAAOC,YAAWF,YAAU,cAAc,IAAIE,YAAWF,YAAU,gBAAgB;AACvG,UAAM,gBAAgB,IAAI,cAAc,QAAQ,QAAQ,IAAI,EAAE;AAC9D,gBAAY,YAAW,EAAG,WACtB,aAAa,MAAa,iBAAS,OAAO,aAAa,GACvD,EAAC,cAAc,OAAO,qBAAqB,sBAAqB,CAAC;EACvE;EAEQ,OAAO,oBACX,cAA0C,cAAwC;AACpF,UAAM,cAAc,eAAc,iBAAiB,YAAY;AAC/D,UAAM,cAAc,eAAc,iBAAiB,YAAY;AAE/D,QAAI,cAAc,aAAa;AAC7B,aAAO;IACT;AACA,QAAI,cAAc,aAAa;AAC7B,aAAO;IACT;AACA,WAAgB,0BAAgB,uBAAuB,aAAa,YAAW,GAAI,aAAa,YAAW,CAAE;EAC/G;EAEA,eAAeG,cAA6B;AAC1C,YAAQ,OAAO,CAAC,KAAK,aAAa,sCAAsC;AACxE,SAAK,cAAcA;AACnB,IAAAA,aAAY,KAAK,KAAK,gBAAgB,KAAK,eAAe,UAAU;AACpE,qBAAiB,KAAK,IAAI;AAC1B,SAAK,YAAY,iBAAoB,iBAAY,OAAO,iBAAiB,iBAAiB,KAAK,IAAI,CAAC;AACpG,SAAK,YAAY,iBAAoB,iBAAY,OAAO,kBAAkB,iBAAiB,KAAK,IAAI,CAAC;AAErG,aAAS,mBAAgB;AACvB,YAAM,WAAW,KAAK,YAAY,WAAU;AAC5C,UAAI,UAAU;AACZ,QAAAA,aAAY,WAAU;MACxB,OAAO;AACL,QAAAA,aAAY,WAAU;MACxB;AACA,WAAK,YAAY,QAAQ,UAAU,OAAO,UAAU,CAAC,QAAQ;IAC/D;EACF;EAEQ,iBAAiB,OAAsF;AAE7G,UAAM,UAAU,MAAM;AAEtB,QAAI,kBAAkB;AAEtB,UAAM,eAAe,KAAK,kBAAkB,IAAI,QAAQ,OAAO;AAC/D,eAAW,eAAe,cAAc;AACtC,kBAAY,YAAW;AACvB,0BAAoB,YAAY,aAAY,EAAG,YAAW,EAAG,gBAAe;IAC9E;AACA,UAAM,kBAAkB,KAAK,kBAAkB,IAAI,QAAQ,UAAU;AACrE,eAAW,kBAAkB,iBAAiB;AAC5C,qBAAe,YAAW;AAC1B,0BAAoB,eAAe,aAAY,EAAG,YAAW,EAAG,gBAAe;IACjF;AAGA,UAAM,aACU,wCAA2B,2BAA2B,aAAa,QAAQ,UAAU;AACrG,QAAI,aAAsB,uBAAa;AACvC,aAAS,IAAI,GAAG,IAAI,WAAW,SAAS,GAAG,EAAE,GAAG;AAC9C,mBAAoB,kBAAU,UAAU,YAAY,YAAY,WAAW,CAAC,CAAC;AAC7E,YAAM,WAAW,KAAK,aAClB,QAAQ,WAAW,QAAO,GAAI,MAAM,MAAM,QAAQ,WAAW,OAAM,GAAI,iBAAiB,UAAU;AACtG,YAAM,aAAa,KAAK,eAAe,IAAI,QAAQ;AACnD,UAAI,YAAY;AACd,mBAAW,YAAW;MACxB;AACA,mBAAoB,kBAAU,UAAU,YAAY,YAAY,GAAG;IACrE;AAGA,UAAM,iBAAiB,KAAK,mBAAkB,EAAG,MAAM,QAAQ,WAAW,QAAO,EAAG,GAAE,CAAE;AACxF,QAAI,gBAAgB;AAClB,qBAAe,YAAW;IAC5B;EACF;EAEA,yCACI,OAA+E;AACjF,UAAM,0BAA0B,MAAM;AACtC,UAAM,eAAe,KAAK,kBAAkB,IAAI,uBAAuB;AACvE,eAAW,eAAe,cAAc;AACtC,kBAAY,YAAW;IACzB;EACF;EAES,QAAK;AACZ,SAAK,YAAY,MAAK;EACxB;;;;;EAMA,YAAY,QAAoC,OAAiC;AAC/E,SAAK,YAAY,aAAa,IAAI;AAClC,WAAO,YAAY,KAAK;EAC1B;;;;;EAMA,YAAY,QAAoC,OAAiC;AAC/E,WAAO,YAAY,KAAK;AACxB,QAAI,KAAK,YAAY,YAAW,EAAG,WAAU,MAAO,GAAG;AACrD,WAAK,YAAY,aAAa,KAAK;IACrC;EACF;EAEQ,eAAe,WAA4C;AAEjE,QAAI,KAAK,mBAAmB;AAC1B,WAAK,kBAAkB,oBACT,qBAAU,OAAO,mBAAmB,KAAK,2BAA2B,IAAI;AACtF,WAAK,kBAAkB,oBACT,qBAAU,OAAO,qBAAqB,KAAK,6BAA6B,IAAI;AAC1F,WAAK,kBAAkB,oBACT,qBAAU,OAAO,cAAc,KAAK,sBAAsB,IAAI;AAC5E,WAAK,kBAAkB,oBACT,qBAAU,OAAO,gBAAgB,KAAK,wBAAwB,IAAI;IAClF;AAEA,SAAK,oBAAoB;AACzB,SAAK,kBAAkB,iBACT,qBAAU,OAAO,mBAAmB,KAAK,2BAA2B,IAAI;AACtF,SAAK,kBAAkB,iBACT,qBAAU,OAAO,qBAAqB,KAAK,6BAA6B,IAAI;AAC1F,SAAK,kBAAkB,iBAA2B,qBAAU,OAAO,cAAc,KAAK,sBAAsB,IAAI;AAChH,SAAK,kBAAkB,iBACT,qBAAU,OAAO,gBAAgB,KAAK,wBAAwB,IAAI;AAChF,SAAK,kBAAkB,SAAQ,EAAG,QAAQ,KAAK,aAAa,KAAK,IAAI,CAAC;AACtE,SAAK,oCAAmC;EAC1C;EAEQ,qBAAqB,OAAuE;AAClG,UAAM,UAAU,MAAM;AACtB,SAAK,aAAa,OAAO;AACzB,QAAI,QAAQ,KAAI,MAAiB,qBAAU,aAAa,YAAY;AAClE,WAAK,oCAAmC;IAC1C;EACF;EAEQ,uBAAuB,OAAuE;AACpG,UAAM,UAAU,MAAM;AACtB,SAAK,cAAc,OAAO;AAC1B,QAAI,QAAQ,KAAI,MAAiB,qBAAU,aAAa,YAAY;AAClE,WAAK,oCAAmC;IAC1C;EACF;EAEA,YAAS;AACP,WAAO,KAAK;EACd;EAEA,cAAc,SAAoC;AAChD,WAAO,CAAC,QAAQ,iBAAgB;EAClC;EAEQ,sBACJ,OAAyF;AAC3F,UAAM,EAAC,aAAY,IAAI,MAAM;AAC7B,QAAI,CAAC,KAAK,oBAAoB,YAAY,GAAG;AAC3C;IACF;AAEA,UAAM,aAAc,MAAM,KAAK;AAE/B,SAAK,oBAAoB,cAAc,UAAU;EACnD;EAEQ,wBACJ,OAAyF;AAC3F,UAAM,EAAC,aAAY,IAAI,MAAM;AAC7B,QAAI,CAAC,KAAK,oBAAoB,YAAY,GAAG;AAC3C;IACF;AAEA,UAAM,eAAgB,MAAM,KAAK;AACjC,UAAM,OAAO,MAAM,KAAK,KAAK,kBAAkB,IAAI,YAAY,CAAC,EAAE,KAAK,CAAAC,UAAQA,MAAK,MAAK,MAAO,YAAY;AAC5G,QAAI,MAAM;AACR,WAAK,uBAAuB,IAAI;IAClC;EACF;EAEQ,oBAAoB,cAAiD;AAC3E,WAAO,KAAK,cAAc,aAAa,QAAO,CAAE;EAClD;EAEQ,gBAAgB,cAAiD;AACvE,QAAS,aAAQ,YAAY;MAAS;;IAAA,KACxB,6BAAkB,kBAAkB,SAAQ,EAAG,0CACrD,YAAY,GAAG;AACrB;IACF;AAEA,QAAI,CAAC,KAAK,oBAAoB,YAAY,GAAG;AAC3C;IACF;AAEA,QAAI,aAAa,WAAU,GAAI;AAC7B;IACF;AAEA,UAAM,SAAkB,yBAAe,eAAe,sBAAsB,YAAY;AACxF,QAAI,OAAO,QAAQ;AACjB,iBAAW,SAAS,QAAQ;AAC1B,aAAK,oBAAoB,cAAc,KAAK;MAC9C;IACF,OAAO;AACL,WAAK,oBAAoB,cAAc,IAAI;IAC7C;AACA,SAAK,kBAAkB,YAAY;EACrC;EAEQ,oBACJ,cAAmD,OAAmD;AACxG,UAAM,kBAAkB,aAAa,YAAW,EAAG,gBAAe;AAClE,QAAI;AACJ,QAAI,aAAa,QAAO,EAAG,KAAI,MAAiB,qBAAU,aAAa,YAAY;AACjF,aAAmB,wCAA2B,2BAA2B,aAAa,YAAY,EAAE,MAAM,GAAG,EAAE;IACjH,OAAO;AACL,aAAc,kBAAU,UAAU,YAAY,aAAa,IAAG,CAAE,EAAE,MAAM,GAAG,EAAE,MAAM,GAAG,EAAE;IAE1F;AAEA,UAAM,UAAU,aAAa,QAAO;AACpC,UAAM,SAAkB,yBAAe,eAAe,sBAAsB,YAAY;AACxF,UAAM,aACF,KAAK,WAAW,cAAc,SAAS,QAAQ,OAAO,aAAa,OAAM,GAAI,MAAM,eAAe;AACtG,UAAM,mBAAmB,IAAI,8BAA8B,MAAM,cAAc,KAAK;AACpF,UAAM,eAAe,WAAW,MAAM,iBAAiB,EAAE;AACzD,QAAI,gBAAgB,wBAAwB,+BAA+B;AACzE,WAAK,kBAAkB,IAAI,cAAc,YAAY;IACvD,OAAO;AACL,iBAAW,YAAY,gBAAgB;AACvC,WAAK,kBAAkB,IAAI,cAAc,gBAAgB;AACzD,uBAAiB,oBAAmB;IACtC;AACA,SAAK,sBAAqB;EAC5B;EAEA,kBAAkB,eAAkD;EACpE;EAEQ,0BAA0B,OAA+E;AAE/G,UAAM,eAAe,MAAM;AAC3B,SAAK,gBAAgB,YAAY;EACnC;EAEQ,4BAA4B,OAA+E;AAEjH,SAAK,oBAAoB,CAAC,MAAM,IAAI,CAAC;EACvC;EAEA,cAAc,SAAoC;AAChD,SAAK,aAAa,OAAO;AACzB,eAAW,gBAAgB,QAAQ,cAAa,GAAI;AAClD,WAAK,gBAAgB,YAAY;IACnC;EACF;EAEQ,aAAa,SAAoC;AACvD,UAAM,iBAAiB,KAAK,mBAAkB;AAC9C,UAAM,oBAAoB;MACd,qBAAU,aAAa;MACvB,qBAAU,aAAa;;AAEnC,QAAI,CAAC,KAAK,cAAc,OAAO,KAAK,CAAC,kBAAkB,SAAS,QAAQ,KAAI,CAAE,KACjE,iCAAwB,kBAAkB,OAAO,KAAK,eAAe,MAAM,QAAQ,GAAE,CAAE,GAAG;AACrG;IACF;AACA,UAAM,OACD,mBAA+B,iDAAoC,cAClE,mBAA+B,wCAA2B,cAAc,QAAQ,WAAU,EAAG,YAC/F,MAAM,sBACN,MAAM;AACV,mBAAe,YAAY,IAAI,uBAAuB,MAAM,SAAS,QAAQ,GAAE,GAAI,MAAM,QAAQ,YAAW,CAAE,CAAC;AAC/G,SAAK,sBAAqB;EAC5B;;EAGQ,wBAAqB;AAC3B,UAAM,WAAW,KAAK,SAAS,SAAQ;AACvC,QAAI,SAAS,UAAU,CAAC,KAAK,YAAY,qBAAqB;AAC5D,eAAS,CAAC,EAAE,SAAQ,EAAG;QAAO;QAAsB;;MAA0B;IAChF;EACF;EAEQ,sCAAmC;AACzC,UAAM,qBAAqB,KAAK,kBAAkB,gBAA0B,qBAAU,aAAa,UAAU;AAC7G,QAAI,CAAC,mBAAmB,QAAQ;AAC9B;IACF;AAEA,UAAM,gBAAuB,aAAK,KAAK,aAAY;AACnD,UAAM,gBAAgB,CAAA;AACtB,eAAW,WAAW,oBAAoB;AACxC,YAAM,aAAc;AACpB,YAAM,oBAAoB,WAAW,eAAc,EAAG,MAAM,GAAG,EAAE,QAAO;AACxE,oBAAc,KAAK,iBAAiB;AACpC,oBAAc,IAAI,iBAAiB;IACrC;AAEA,UAAM,iBAAiB,KAAK,mBAAkB;AAE9C,aAAS,IAAI,GAAG,IAAI,mBAAmB,QAAQ,EAAE,GAAG;AAClD,YAAM,eAAe,cAAc,CAAC;AACpC,YAAM,UAAU,mBAAmB,CAAC;AACpC,oBAAc,OAAO,YAAY;AACjC,YAAM,eAAe,cAAc;QAAc;QAAc;;MAAwB;AACvF,oBAAc,IAAI,YAAY;AAC9B,YAAM,aAAa,aAAa,MAAM,GAAG,aAAa,SAAS,CAAC;AAChE,YAAM,OAAc,kBAAU,UAAU,2BACpC,WAAW,QAAO,EAAG,KAAK,GAAG,CAA4C;AAE7E,YAAM,iBAAiB,eAAe,MAAM,QAAQ,GAAE,CAAE;AACxD,UAAI,gBAAgB;AAClB,uBAAe,SAAS,IAAI;MAC9B;IACF;EACF;EAEA,cAAc,SAAoC;AAChD,SAAK,oBAAoB,QAAQ,cAAa,CAAE;AAChD,QAAI,QAAQ,KAAI,MAAiB,qBAAU,aAAa,yBACpD,QAAQ,KAAI,MAAiB,qBAAU,aAAa,YAAY;AAClE;IACF;AACA,UAAM,iBAAiB,KAAK,SAAS,MAAM,QAAQ,GAAE,CAAE;AACvD,QAAI,CAAC,gBAAgB;AACnB;IACF;AACA,SAAK,SAAS,YAAY,cAAc;EAC1C;EAEQ,aACJ,SAAsC,QACtC,OAAqD,eAAuB,iBAC5E,MAA6C;AAC/C,UAAM,YAAY,QAAQ,KAAI,MAAiB,qBAAU,aAAa,aAAa,QAAQ,GAAE,IAAK;AAClG,QAAI,WAAW,UAAU,EAAE,KAAK,mBAAmB,mBAAmB,OAAO,GAAE,IAAK;AACpF,QAAI,UAAU,KAAK,gBAAgB,QAAQ,MAAM,KAAK;AACtD,QAAI,KAAK,iBAAiB;AACxB,UAAI,iBAAiB;AACnB,mBAAW;AACX,kBAAU;MACZ,OAAO;AACL,mBAAW,cAAc;MAC3B;IACF;AACA,WAAO,WAAW,MAAM,YAAY,MAAM,UAAU,MAAM,gBAAgB,MAAM;EAClF;EAEQ,WACJ,cAAmD,SACnD,QAAgC,OAChC,eAAgD,MAChD,eAAsB;AACxB,QAAa,iCAAwB,uBAAuB,YAAY,GAAG;AACzE,aAAO,KAAK;IACd;AAEA,QAAI,UAAU,CAAC,KAAK,iBAAiB,CAAC,eAAe;AACnD,aAAO,KAAK,WAAW,cAAc,SAAS,QAAQ,OAAO,aAAa;IAC5E;AAEA,UAAM,aAAoB,kBAAU,UAAU,KAAK,MAAM,GAAG;AAC5D,UAAM,WAAW,KAAK,aAAa,SAAS,QAAQ,OAAO,eAAe,eAAe,UAAU;AACnG,QAAI,aAAa,KAAK,eAAe,IAAI,QAAQ;AACjD,QAAI,YAAY;AACd,aAAO;IACT;AAEA,QAAI,CAAC,KAAK,QAAQ;AAChB,UAAI,QAAQ;AACV,eAAO,KAAK,WAAW,cAAc,SAAS,QAAQ,OAAO,aAAa;MAC5E;AACA,aAAO,KAAK,mBAAkB,EAAG,MAAM,QAAQ,GAAE,CAAE;IACrD;AAEA,UAAM,aACF,KAAK,WAAW,cAAc,SAAS,QAAQ,OAAO,eAAe,KAAK,MAAM,GAAG,EAAE,GAAG,aAAa;AACzG,QAAI,OAAe,MAAM;AACzB,QAAI,QAAQ,KAAI,MAAiB,qBAAU,aAAa,YAAY;AAClE,aAAO,MAAM;IACf;AACA,UAAM,OAAc,kBAAU,UAAU,2BAA2B,KAAK,KAAK,SAAS,CAAC,CAAC;AAExF,iBAAa,IAAI,wBAAwB,MAAM,SAAS,UAAU,MAAM,YAAY,MAAM,aAAa;AACvG,SAAK,eAAe,IAAI,UAAU,UAAU;AAC5C,eAAW,YAAY,UAAU;AACjC,WAAO;EACT;EAEQ,WACJ,cAAmD,SACnD,QAA2B,OAC3B,eAAqB;AACvB,UAAM,aAAa,aAAa,YAAW,EAAG,gBAAe;AAC7D,UAAM,YAAY,KAAK,UAAU,SAAS,QAAQ,OAAO,UAAU;AACnE,QAAI,CAAC,KAAK,eAAe;AACvB,aAAO;IACT;AACA,QAAI,aAAa,UAAU,MAAM,aAAa;AAC9C,QAAI,YAAY;AACd,aAAO;IACT;AAEA,iBAAa,IAAI,uBACb,MAAM,SAAS,eAAe,MAAM,QAAQ,KAAK,0BAA0B,QAAQ,aAAa,CAAC;AACrG,QAAI,SAAS,kBAAyB,kBAAU,UAAU,cAAc,MAAM,GAAG,GAAG;AAClF,wBAAkB,IAAI,WAAW,SAAQ,CAAE;IAC7C;AACA,cAAU,YAAY,UAAU;AAChC,QAAI,cAAc,KAAK,iBAAiB;AACtC,iBAAW,SAAQ,EAAG,OAAM;IAC9B;AACA,WAAO;EACT;EAEQ,UACJ,SAAsC,QACtC,OAAqD,YAAmB;AAC1E,QAAI,CAAC,KAAK,gBAAgB,CAAC,SAAU,KAAK,mBAAmB,YAAa;AACxE,aAAO,KAAK,WAAW,SAAS,QAAQ,UAAU;IACpD;AAEA,QAAI,YAAY,KAAK,WAAW,IAAI,KAAK;AACzC,QAAI,WAAW;AACb,aAAO;IACT;AAEA,gBACI,IAAI,uBAAuB,MAAM,SAAS,OAAO,GAAE,IAAK,MAAM,MAAM,IAAI,MAAM,OAAO,MAAM,YAAW,CAAE;AAC5G,cAAU,iBAAiB,aAAa;AACxC,SAAK,WAAW,IAAI,OAAO,SAAS;AAEpC,UAAM,cAAc,MAAM,YAAW;AACrC,SAAK,UAAU,SAAS,cAAc,YAAY,kBAAiB,EAAG,OAAM,IAAK,QAAQ,aAAa,UAAU,EAC3G,YAAY,SAAS;AAC1B,QAAI,CAAC,aAAa;AAChB,wBAAkB,IAAI,UAAU,SAAQ,CAAE;AAC1C,gBAAU,SAAQ,EAAG,OAAM;IAC7B;AAEA,aAAS,cAAc,SAAgB;AACrC,UAAI,SAAS;AACX,cAAM,eAAe,OAAO,MAAU,kBAAa,YAAY;AAC/D,YAAI,gBAAgB,OAAO;AACzB,uBAAa,eAAe,MAAM,EAAE;QACtC;MACF,OAAO;AACL,QAAI,kBAAa,aAAa,qBAAoB;MACpD;IACF;AACA,WAAO;EACT;EAEQ,WAAW,SAAsC,QAA2B,YAAmB;AAErG,QAAI,KAAK,mBAAmB,YAAY;AACtC,UAAI,CAAC,KAAK,cAAc;AACtB,aAAK,eAAe,IAAI,uBACpB,MAAM,MAAM,kBAAkB,MAAM,UAAUF,YAAWF,YAAU,QAAQ,GAC3EE,YAAWF,YAAU,eAAe,CAAC;AACzC,aAAK,SAAS,YAAY,KAAK,YAAY;AAC3C,aAAK,aAAa,SAAQ,EAAG,OAAM;MACrC;AACA,aAAO,KAAK;IACd;AAEA,UAAM,iBAAiB,KAAK,mBAAkB;AAC9C,QAAI,WAAe,mBAAc,cAAc,SAAQ,EAAG,YAAW,GAAI;AACvE,aAAO;IACT;AAEA,QAAI,aAAa,eAAe,MAAM,YAAY,OAAO,GAAE,CAAE;AAC7D,QAAI,CAAC,YAAY;AACf,mBAAa,IAAI,uBACb,MAAM,SAAS,YAAY,OAAO,GAAE,GAAI,OAAO,KAAI,MAAW,YAAO,KAAK,QAAQ,MAAM,QAAQ,MAAM,QACtG,OAAO,KAAI,CAAE;AACjB,qBAAe,YAAY,UAAU;IACvC;AACA,WAAO;EACT;EAEQ,qBAAkB;AACxB,QAAI,KAAK,iBAAiB;AACxB,UAAI,CAAC,KAAK,cAAc;AACtB,aAAK,eAAe,IAAI,uBACpB,MAAM,MAAM,kBAAkB,MAAM,UAAUE,YAAWF,YAAU,QAAQ,GAC3EE,YAAWF,YAAU,eAAe,CAAC;AACzC,aAAK,SAAS,YAAY,KAAK,YAAY;MAC7C;AACA,aAAO,KAAK;IACd;AACA,WAAO,KAAK;EACd;EAEQ,0BAA0B,QAA2B,eAAqB;AAChF,UAAM,eAAe,OAAO,MAAU,kBAAa,YAAY;AAC/D,UAAM,oBAAoB,eAAe,aAAa,kBAAiB,IAAK,CAAA;AAE5E,QAAI,sBAAmC;AAEvC,eAAW,WAAW,mBAAmB;AACvC,UAAI,CAAC,QAAQ,UAAU,CAAC,cAAc,WAAW,QAAQ,MAAM,GAAG;AAChE;MACF;AAIA,UAAI,QAAQ,WAAW;AACrB,8BAAsB;AACtB;MACF;AAEA,UAAI,CAAC,QAAQ,MAAM;AACjB;MACF;AAEA,4BAAsB,QAAQ;IAChC;AAEA,QAAI,qBAAqB;AACvB,aAAO;IACT;AAEA,QAAI,CAAC,eAAe;AAClB,aAAOE,YAAWF,YAAU,QAAQ;IACtC;AAEA,UAAM,YAAY,IAAW,kBAAU,UAAU,aAAa;AAC9D,UAAM,YAAY,UAAU,UAAU,UAAU,QAAQ,UAAU,OAAQ,MAAM,UAAU,OAAQ,MAAM;AAExG,WAAQ,aAAa;EACvB;EAEA,mBAAmB,cAAmD,QAAgB;AAEpF,UAAM,QAAQ,KAAK,kBAAkB,IAAI,YAAY;AACrD,QAAI,MAAM,SAAS,GAAG;AACpB,aAAO;IACT;AACA,UAAM,OAAO,MAAM,OAAM,EAAG,KAAI,EAAG;AACnC,QAAI,CAAC,MAAM;AACT,aAAO;IACT;AACA,QAAI,KAAK,YAAY,qBAAqB;AAKxC,UAAO,aAAQ,cAAc,KAAK,YAAY,oBAAoB,aAAa,OAAO,GAAG;AACvF,eAAO;MACT;AACA,WAAK,YAAY,oBAAoB,SAAQ;IAC/C;AAEA,SAAK,OAAO,MAAM;AAClB,WAAO;EACT;EAEA,eAAe,cAAmD,aAAoB;AACpF,SAAY,iBAAS,OAAO,cAAc,CAAC,WAAW;EACxD;EAEA,qCAAqC,MAAmC;AACtE,UAAM,sBAAuB,KAAK,YAAY;AAC9C,UAAM,eAAe,qBAAqB;AAC1C,QAAI,cAAsC;AAC1C,WAAO,aAAa;AAClB,UAAI,gBAAgB,cAAc;AAChC,eAAO;MACT;AACA,oBAAc,YAAY;AAC1B,UAAI,EAAE,gBAAgB,0BAA0B,gBAAgB,6BAA6B;AAC3F;MACF;IACF;AACA,WAAO;EACT;EAEQ,oBAAoB,eAA4D;AACtF,UAAM,2BAA4D,CAAA;AAIlE,eAAW,gBAAgB,eAAe;AACxC,YAAM,QAAQ,KAAK,kBAAkB,IAAI,YAAY;AACrD,iBAAW,QAAQ,OAAO;AACxB,YAAI,KAAK,qCAAqC,IAAI,GAAG;AACnD,mCAAyB,KAAK,IAAI;QACpC,OAAO;AACL,eAAK,uBAAuB,IAAI;QAClC;MACF;IACF;AACA,6BAAyB,QAAQ,KAAK,uBAAuB,KAAK,IAAI,CAAC;EACzE;EAEQ,uBAAuB,MAAmC;AAChE,UAAM,eAAe,KAAK,aAAY;AACtC,SAAK,kBAAkB,OAAO,cAAc,IAAI;AAChD,UAAM,UAAU,aAAa,QAAO;AACpC,UAAM,SAAkB,yBAAe,eAAe,sBAAsB,YAAY;AACxF,QAAI,QAAQ,KAAK,MAAK;AAEtB,QAAI,aAAuC,KAAK;AAChD,QAAI,CAAC,YAAY;AACf;IACF;AACA,eAAW,YAAY,IAAI;AAC3B,QAAI,cAAwC;AAE5C,WAAO,aAAa;AAClB,mBAAa,YAAY;AACzB,UAAI,CAAC,YAAY;AACf;MACF;AACA,WAAK,eAAe,KAAK,YAAY,eAAe,KAAK,iBACrD,QAAQ,KAAI,MAAiB,qBAAU,aAAa,YAAY;AAClE;MACF;AACA,UAAI,EAAE,uBAAuB,0BAA0B,uBAAuB,0BAA0B;AACtG;MACF;AACA,UAAI,CAAC,YAAY,QAAO,GAAI;AAC1B,oBAAY,oBAAmB;AAC/B;MACF;AACA,UAAI,YAAY,SAAS,MAAM,OAAO;AACpC,aAAK,aACD,OACA,QAAQ,KAAK,eAAe,KAAK,aAAa,YAAW,EAAG,gBAAe,CAAE;AACjF,gBAAS,MAAkD,YAAW;MACxE,OAAO;AACL,cAAM,WAAW,KAAK,aAClB,SAAS,QAAQ,OAAO,aAAa,OAAM,GAAI,aAAa,YAAW,EAAG,gBAAe,GACzF,uBAAuB,2BAA2B,YAAY,cACjD,uBAAa,sBAAsB;AACpD,aAAK,eAAe,OAAO,QAAQ;AACnC,mBAAW,YAAY,WAAW;MACpC;AAEA,UAAI,gBAAgB,KAAK,cAAc;AACrC,aAAK,eAAe;MACtB,WAAW,gBAAgB,KAAK,cAAc;AAC5C,aAAK,eAAe;MACtB;AAEA,oBAAc;IAChB;EACF;EAEA,MAAM,cAAsB;AAC1B,eAAW,QAAQ,KAAK,kBAAkB,YAAW,GAAI;AACvD,WAAK,QAAO;IACd;AAEA,SAAK,YAAY,eAAc;AAC/B,SAAK,YAAY,aAAa,KAAK;AACnC,SAAK,kBAAkB,MAAK;AAC5B,SAAK,eAAe,MAAK;AACzB,SAAK,WAAW,MAAK;AACrB,SAAK,SAAS,MAAK;AACnB,SAAK,eAAe;AACpB,SAAK,eAAe;AACpB,QAAI,CAAC,cAAc;AAEjB,WAAK,eAAyB,qBAAU,cAAc,SAAQ,CAAE;IAClE;EACF;EAEA,kBAAkB,QAAa;EAC/B;EAEQ,MAAM,iBAAc;AAC1B,UAAM,sBAAuB,KAAK,YAAY;AAC9C,UAAM,OAAO,qBAAqB;AAClC,QAAI,CAAC,MAAM,aAAY,GAAI,UAAS,GAAI;AACtC,aAAO;IACT;AACA,SAAK,OAAO,MAAM,KAAK;AACvB,WAAO;EACT;EAEQ,wBACJ,SAAsC,MACtC,cAAkD;AACpD,QAAI,cAAc;AAChB,YAAM,eAA2B,wCAA2B,2BAA2B,aAAa,YAAY;AAChH,mBAAa,IAAG;AAChB,aAAc,kBAAU,UAAU,KAAK,cAAc,GAAG;IAC1D;AACA,SAAK,KAAK,OAAO,SAAS,MAAM,YAAY;EAC9C;EAEQ,wBAAwB,MAAmC;AACjE,SAAK,OAAO,MAAM,KAAK;EACzB;EAEQ,MAAM,yBACV,SAAsC,MAA6C;AACrF,UAAM,gBAAgB,MAAS,aAAQ,cAAc,KACjDE,YAAWF,YAAU,oBAAoB,GAAGE,YAAWF,YAAU,iBAAiB,GAAG,QACrF,EAAC,cAAc,8BAA6B,CAAC;AACjD,QAAI,eAAe;AACjB,MAAG,aAAQ,iBAAgB;AAC3B,cAAQ,cACQ,wCAA2B,2BAA2B,YAAY,SAAS,IAAI,CAAC;AAChG,MAAG,aAAQ,eAAc;IAC3B;EACF;EAEQ,MAAM,wBAAwB,cAAiD;AACrF,UAAM,eAAe,MAAS,aAAQ,cAAc,KAChDE,YAAWF,YAAU,oBAAoB,GAAGE,YAAWF,YAAU,cAAc,GAAG,QAClF,EAAC,cAAc,2BAA0B,CAAC;AAC9C,QAAI,cAAc;AAChB,mBAAa,QAAO,EAAG,WAAW,YAAY;IAChD;EACF;EAEA,sBAAsB,OAAc,MAAmC;AACrE,UAAM,eAAe,KAAK,aAAY;AACtC,UAAM,cAAc,IAAO,iBAAY,YAAY,KAAK;AACxD,gBAAY,sBAAsB,YAAY;AAE9C,UAAM,UAAU,aAAa,QAAO;AACpC,QAAI,QAAQ,KAAI,MAAiB,qBAAU,aAAa,YAAY;AAClE,kBAAY,YAAW,EAAG,WACtBE,YAAWF,YAAU,MAAM,GAAG,KAAK,wBAAwB,KAAK,MAAM,IAAI,GAAG,EAAC,cAAc,SAAQ,CAAC;AACzG,kBAAY,YAAW,EAAG,WACtBE,YAAWF,YAAU,SAAS,GAC9B,KAAK,wBAAwB,KAAK,MAAM,SAAkB,uBAAa,wBAAwB,YAAY,GAC3G,EAAC,cAAc,cAAa,CAAC;AACjC,kBAAY,YAAW,EAAG,WACtBE,YAAWF,YAAU,MAAM,GAAG,KAAK,wBAAwB,KAAK,MAAM,YAAY,GAClF,EAAC,cAAc,SAAQ,CAAC;IAC9B;AAEA,SAAK,YAAY,KAAI;EACvB;EAEQ,MAAM,mBAAmB,MAAuB;AACtD,UAAM,eAAe,MAAS,aAAQ,cAAc,KAChDE,YAAWF,YAAU,oBAAoB,GAAGE,YAAWF,YAAU,YAAY,GAAG,QAChF,EAAC,cAAc,6BAA4B,CAAC;AAChD,QAAI,cAAc;AAChB,MAAK,kBAAY,YAAiB,kBAAY,OAAO,kCAAkC;AACvF,YAAM,UAAU,KAAK,qBAAqB,IAAI;AAC9C,YAAM,KAAK,8BAA8B,OAAO;AAChD,YAAM,KAAK,2BAA2B,OAAO;IAC/C;EACF;EAEQ,MAAM,8BAA8B,MAAuB;AACjE,SAAK,SAAQ,EAAG,MAAM,CAAC,EAAE,QAAQ,OAAM,UAAQ;AAC7C,YAAM,KAAK,8BAA8B,KAAK;IAChD,CAAC;AAED,QAAI,gBAAgB,+BAA+B;AACjD,WAAK,aAAY,EAAG,QAAO,EAAG,mBAAmB,KAAK,aAAY,EAAG,IAAG,CAAE;IAC5E;EACF;EAEQ,MAAM,2BAA2B,MAAuB;AAC9D,QAAI,EAAE,gBAAgB,0BAA0B;AAC9C;IACF;AAEA,UAAkB,uCAA0B,0BAA0B,SAAQ,EACzE,QAAO,GACN,2BAA2B,KAAK,UAAU;EAClD;EAEQ,qBAAqB,MAAuB;AAKlD,QAAI,CAAC,KAAK,UAAU;AAClB,aAAO;IACT;AAEA,QAAI,EAAE,KAAK,kBAAkB,0BAA0B;AACrD,aAAO;IACT;AAEA,WAAO,KAAK,qBAAqB,KAAK,MAAM;EAC9C;EAEA,wBAAwB,OAAc,MAA6B;AACjE,UAAM,OAAO,KAAK,cAAuB,uBAAa;AACtD,UAAM,UAAU,KAAK,WAAW;AAEhC,UAAM,cAAc,IAAO,iBAAY,YAAY,KAAK;AACxD,QAAI,SAAS,KAAI,MAAiB,qBAAU,aAAa,uBAAuB;AAC9E,qBAAc,iBAAiB,aAAa,IAAI;IAClD;AAEA,QAAI,CAAC,SAAS;AACZ;IACF;AAEA,QAAI,QAAQ,KAAI,MAAiB,qBAAU,aAAa,YAAY;AAClE,YAAM,aAAoB,kBAAU,UAAU,mBAC9B,wCAA2B,2BAA2B,YAAY,SAAS,IAAI,GACtF,eAAS,MAAK,CAAE;AACzB,kBAAY,cAAa,EAAG,WACxBE,YAAWF,YAAU,UAAU,GAC/B,MAAW,4BAAsB,8BAA8B,iBAAiB,UAAU,GAC1F,EAAC,cAAc,cAAa,CAAC;AACjC,UAAI,QAAQ,cAAa,GAAI;AAC3B,oBAAY,eAAc,EAAG,WAAWE,YAAWF,YAAU,OAAO,GAAG,MAAK;AAC1E,eAAK,wBAAwB,SAAS,MAAM,MAAS;QACvD,GAAG,EAAC,cAAc,WAAU,CAAC;MAC/B;IACF,WAAW,KAAK,UAAU,KAAK,YAAY;AACzC,YAAM,MAAa,kBAAU,UAAU,YAAY,KAAK,QAAQ,KAAK,KAAK,UAAU;AACpF,YAAM,UAAU;QACd,iBAAiB,KAAK,oBAAoB,6BAA6B;QACvE,mBAAmB,KAAK,oBAAoB,yBAAyB;QACrE,yBAAyB,KAAK,oBAAoB,sBAAsB;;AAE1E,iBAAW,EAAC,MAAM,UAAU,aAAY,KAAe,6BAAkB,kBAAkB,SAAQ,EACzF,oCAAoC,KAAK,OAAO,GAAG;AAC3D,oBAAY,eAAc,EAAG,WAAW,MAAM,UAAU,EAAC,aAAY,CAAC;MACxE;IACF;AAEA,QAAI,QAAQ,iBAAiB,IAAI,GAAG;AAClC,kBAAY,eAAc,EAAG,WACzBE,YAAWF,YAAU,aAAa,GAAG,KAAK,yBAAyB,KAAK,MAAM,SAAS,IAAI,GAC3F,EAAC,cAAc,iBAAgB,CAAC;IACtC;AAEA,QAAI,QAAQ,KAAI,MAAiB,qBAAU,aAAa,uBAAuB;AAC7E,YAAM,6BAAyC,wCAA2B,2BAA2B,SAAQ;AAC7G,YAAM,EAAC,oBAAmB,IAAI;AAC9B,UAAI,qBAAqB,UAAU,gBAAgB;AACjD,oBAAY,eAAc,EAAG,WAAWE,YAAWF,YAAU,wBAAwB,GAAG,YAAW;AACjG,gBAAM,2BAA2B;;YACT;UAAI;QAC9B,GAAG,EAAC,cAAc,sCAAqC,CAAC;MAC1D;IACF;AAEA,QAAI,QAAQ,KAAI,MAAiB,qBAAU,aAAa,YAAY;AAClE,UAAgB,wCAA2B,2BAA2B,eAAe,OAAO,MAC5E,gCAAmB,uBAAuB,WAAW;AACnE,YAAI,gBAAgB,wBAAwB;AAC1C,sBAAY,eAAc,EAAG,WAAWE,YAAWF,YAAU,yBAAyB,GAAG,YAAW;AAClG,kBAAM,SACFE,YAAWF,YAAU,+BAA+B,EAAC,KAAM,KAAgC,MAAK,CAAC;AACrG,kBAAM,eACF,MAAS,aAAQ,cAAc,KAAKE,YAAWF,YAAU,oBAAoB,GAAG,QAAQ,QAAW;cACjG,eAAeE,YAAWF,YAAU,MAAM;cAC1C,cAAc;aACf;AACL,gBAAI,cAAc;AAChB,sBAAQ,OAAM;YAChB;UACF,GAAG,EAAC,cAAc,+BAA8B,CAAC;QACnD;MACF,WAAW,EAAE,gBAAgB,yBAAyB;AACpD,oBAAY,eAAc,EAAG,WACzBE,YAAWF,YAAU,MAAM,GAAG,KAAK,mBAAmB,KAAK,MAAM,IAAI,GAAG,EAAC,cAAc,SAAQ,CAAC;MACtG;IACF;AAEA,SAAK,YAAY,KAAI;EACvB;EAEA,OAAO,MAAqC,yBAAgC;AAC1E,UAAM,eAAe,KAAK,aAAY;AACtC,SAAK,OAAO,SAAS,KAAK,IAAI,CAAC;AAE/B,aAAS,SAA8B,WAAkB;AACvD,UAAI,CAAC,yBAAyB;AAC5B;MACF;AACA,UAAI,CAAC,WAAW;AACd,qBAAa,OAAM;MACrB,WAAW,KAAK,aAAa,gBAAgB,SAAQ,GAAI;AACvD,aAAK,eAAe,cAAc,IAAI;MACxC;IACF;EACF;EAEA,MAAM,OACF,SAAsC,MACtC,oBAAwD;AAC1D,QAAI,UAAU;AACd,QAAI,oBAAoB;AACtB,YAAM,qBAAqB,MAAM,mBAAmB,mBAAkB;AACtE,gBAAoB,uBAAY,YAAY,OAAO,oBAAoB,EAAE;IAC3E;AACA,UAAM,eAAe,MAAM,QAAQ,WAAW,MAAM,MAAM,OAAO;AACjE,QAAI,CAAC,cAAc;AACjB;IACF;AACA,SAAK,eAAe,cAAc,KAAK;AACvC,UAAM,OAAO,KAAK,mBAAmB,cAAc,IAAI;AACvD,QAAI,MAAM;AACR,WAAK,OAAO,MAAM,IAAI;IACxB;EACF;EAEQ,kBAAe;AACrB,SAAK,MAAM,IAAI;AACf,SAAK,aAAY;AAEjB,SAAK,eAAyB,qBAAU,cAAc,SAAQ,CAAE;AAChE,SAAK,kBAAkB,cAAa,EAAG,QAAQ,KAAK,gBAAgB,KAAK,IAAI,CAAC;EAChF;EAEQ,oBAAiB;AACvB,QAAS,aAAQ,YAAY;MAAS;;IAAA,GAA4C;AAChF,WAAK,gBAAe;IACtB,OAAO;AACL,WAAK,SAAS,qBAAoB;IACpC;EACF;EAEQ,eAAY;AAClB,SAAK,eAAe;AACpB,SAAK,gBAAgB,KAAK,8BAA8B,IAAG;AAC3D,SAAK,gBAAgB,KAAK;AAC1B,QAAI,KAAK,oCAAoC;AAC3C,WAAK,kBAAuB,aAAQ,YAAY,UAAU,KAAK,kCAAkC;IACnG,OAAO;AACL,WAAK,kBAAkB;IACzB;EACF;EAEU,eAAY;AACpB,SAAK,MAAK;AACV,SAAK,kBAAkB,cAAa,EAAG,QAAQ,KAAK,gBAAgB,KAAK,IAAI,CAAC;EAChF;EAEQ,aAAa,OAAgD,YAAmB;AACtF,QAAI,YAAY;AACd;IACF;AACA,UAAM,OAAO,KAAK,WAAW,IAAI,KAAK;AACtC,QAAI,CAAC,MAAM;AACT;IACF;AAEA,QAAI,KAAK,QAAQ;AACf,WAAK,OAAO,YAAY,IAAI;IAC9B;AACA,SAAK,WAAW,OAAO,KAAK;AAC5B,eAAW,SAAS,MAAM,aAAa;AACrC,WAAK,aAAa,OAAO,UAAU;IACrC;EACF;EAEA,YAAY,SAA0B;EACtC;EAEA,cAAc,QAAyB;AACrC,UAAM,iBAAiB,KAAK,mBAAkB;AAC9C,UAAM,aAAa,eAAe,MAAM,YAAY,OAAO,GAAE,CAAE;AAC/D,QAAI,YAAY;AACd,qBAAe,YAAY,UAAU;IACvC;EACF;EAEQ,kBAAkB,OAA6D;AACrF,UAAM,SAAS,MAAM;AACrB,UAAM,aAAa,KAAK,mBAAkB,EAAG,MAAM,YAAY,OAAO,GAAE,CAAE;AAC1E,QAAI,YAAY;AACd,iBAAW,SAAS,OAAO,KAAI,CAAE;IACnC;EACF;;AAGF,IAAM,oBAAoB,oBAAI,QAAO;AAE/B,IAAO,6BAAP,MAAO,oCAAsC,iBAAY,YAAW;EACvD;EACA;EACT;EACR;EACQ;EACA;EAER,YACI,eAA8B,MAAc,OAAe,eAC3D,aAAa,MAAI;AACnB,UAAM,IAAI,YAAY,4BAA2B,gBAAgB,IAAI,CAAC;AACtE,SAAK,gBAAgB,UAAU,IAAI,eAAe,OAAO,cAAc,4BAA4B;AACnG,IAAG,eAAU,SAAS,KAAK,iBAAiB,GAAG,KAAK,KAAK,IAAI,EAAE;AAC/D,SAAK,WAAW;AAChB,SAAK,QAAQ;AACb,SAAK,UAAU;AACf,SAAK,gBAAgB;AACrB,SAAK,gBAAgB;AAErB,QAAI,WAAW;AAEf,QAAI,SAAS,MAAM,QAAQ;AACzB,iBAAW;IACb,WAAW,SAAS,MAAM,OAAO;AAC/B,iBAAW;IACb,WAAW,SAAS,MAAM,QAAQ;AAChC,iBAAW;IACb,WAAW,SAAS,MAAM,UAAU;AAClC,iBAAW;IACb,WAAW,SAAS,MAAM,UAAU;AAClC,iBAAW;IACb,WAAW,SAAS,MAAM,qBAAqB;AAC7C,iBAAW;IACb;AAEA,UAAM,OAAkB,iBAAK,OAAO,QAAQ;AAC5C,SAAK,gBAAgB,CAAC,IAAI,CAAC;EAC7B;EAES,MAAM,aAAU;AACvB,SAAK,KAAK,SAAQ;EACpB;EAES,WAAQ;AACf,SAAK,SAAQ;AACb,SAAK,KAAK,SAAQ;AAClB,SAAK,gBAAgB,iBAAiB,eAAe,KAAK,uBAAuB,KAAK,IAAI,GAAG,KAAK;AAClG,SAAK,gBAAgB,iBAAiB,aAAa,KAAK,UAAU,KAAK,IAAI,GAAG,KAAK;AACnF,SAAK,gBAAgB,iBAAiB,cAAc,KAAK,WAAW,KAAK,IAAI,GAAG,KAAK;EACvF;EAEA,gBAAgB,gBAAuB;AACrC,QAAI,KAAK,mBAAmB,gBAAgB;AAC1C,WAAK,iBAAiB;AACtB,WAAK,gBAAgB,UAAU,OAAO,oBAAoB,cAAc;AACxE,WAAK,cAAa;IACpB;EACF;EAEA,iBAAiB,iBAAwB;AACvC,SAAK,gBAAgB,UAAU,OAAO,sBAAsB,eAAe;EAC7E;EAEA,QAAQ,MAAuB;AAC7B,SAAK,OAAO;AACZ,SAAK,cAAa;AAClB,IAAG,eAAU,SAAS,KAAK,iBAAiB,GAAG,KAAK,KAAK,KAAK,KAAK,QAAQ,EAAE;EAC/E;EAEQ,gBAAa;AACnB,QAAI,KAAK,KAAK,SAAS;AACrB,WAAK,UAAU,KAAK,KAAK;IAC3B,OAAO;AACL,YAAM,QAAQ,CAAA;AACd,UAAI,cAAsC,KAAK;AAC/C,aAAO,eAAe,CAAC,YAAY,OAAM,KAAM,YAAY,SAAS,KAAK,KAAK,MAAM;AAClF,cAAM,KAAK,YAAY,KAAK;AAC5B,sBAAc,YAAY;MAC5B;AACA,YAAM,QAAO;AACb,UAAI,UAAU,MAAM,KAAK,GAAG;AAC5B,UAAI,KAAK,gBAAgB;AACvB,kBAAUE,YAAWF,YAAU,eAAe,EAAC,KAAK,QAAO,CAAC;MAC9D;AACA,WAAK,UAAU;IACjB;EACF;EAEQ,uBAAuB,OAAY;AACzC,QAAI,CAAC,KAAK,MAAM;AACd;IACF;AACA,SAAK,OAAM;AACX,SAAK,cAAc,wBAAwB,OAAO,KAAK,IAA+B;EACxF;EAEQ,UAAU,QAAa;AAC7B,QAAI,KAAK,WAAW,CAAC,KAAK,eAAe;AACvC;IACF;AACA,SAAK,UAAU;AACf,SAAK,cAAc,IAAI;EACzB;EAEQ,WAAW,QAAa;AAC9B,QAAI,CAAC,KAAK,eAAe;AACvB;IACF;AACA,SAAK,UAAU;AACf,SAAK,cAAc,KAAK;EAC1B;EAEA,OAAO,gBAAgB,MAAY;AACjC,YAAQ,MAAM;MACZ,KAAK,MAAM;AACT,eAAO;MACT,KAAK,MAAM;AACT,eAAO;MACT,KAAK,MAAM;AACT,eAAO;MACT,KAAK,MAAM;AACT,eAAO;MACT,KAAK,MAAM;AACT,eAAO;IACX;AACA,WAAO;EACT;;AAGI,IAAO,6BAAP,cAA6C,iBAAY,YAAW;EAC/D;EACA;EACQ;EACjB;EACQ;EAER,YACI,eAA8B,cAAmD,OACjF,MAAmC;AACrC,UAAM,IAAI,OAAO,aAAa,YAAW,EAAG,KAAI,CAAE;AAClD,SAAK,WAAW,MAAM;AACtB,SAAK,OAAO;AACZ,SAAK,QAAQ;AACb,SAAK,gBAAgB,UAAU,IAC3B,eAAe,aAAa,YAAW,EAAG,KAAI,IAAK,cAAc,0BAA0B;AAC/F,SAAK,UAAU,aAAa,IAAG;AAC/B,IAAG,eAAU,SAAS,KAAK,iBAAiB,GAAG,aAAa,KAAI,CAAE,KAAK,KAAK,QAAQ,EAAE;AACtF,IAAO,oBAAY,UAAU,0BAA0B,aAAa,gBAAe,CAAE;AACrF,SAAK,gBAAgB;AACrB,SAAK,uBAAuB;AAC5B,SAAK,WAAU;AACd,SAAK,aAA6B,aAAa,SAAS,GAAiB,qBAAM,OAAO,EAAE,MAAM,EAAC,QAAQ,KAAI,CAAC,CAAC,EAAE;EAClH;EAEA,aAAU;AACR,UAAM,OAAO,WAAW,qBAAqB,KAAK,oBAAoB;AACtE,SAAK,gBAAgB,CAAC,IAAI,CAAC;EAC7B;EAEA,uBAAoB;AAClB,IAAG,eAAU,SAAS,KAAK,iBAAiB,GAAG,KAAK,qBAAqB,KAAI,CAAE,KAAK,KAAK,QAAQ,EAAE;EACrG;EAEQ,iBAAc;AACpB,QAAI,CAAI,oBAAe,eAAe,SAAQ,EAAG,UAAU,iCAAiC,GAAG;AAC7F;IACF;AACA,QAAI,CAAC,KAAK,aAAa,YAAW,EAAG,WAAU,KAClC,iCAAwB,uBAAuB,KAAK,YAAY,GAAG;AAC9E;IACF;AACA,UAAMK,UAAY,oBAAe,eAAe,SAAQ,EAAG,UAAU,iCAAiC;AACtG,QAAI,CAAC,KAAK,mBAAmB;AAC3B,WAAK,oBAAoB,KAAK,gBAAgB,YAAY,QAAQ,qBAAqB;AACvF,YAAM,iBAAyB,wBAAe,OAAO,mBAAmBA,QAAO,MAAK,GAAI,QAAQ;AAChG,qBAAe,iBAAiB,SAAS,QAAK;AAC5C,WAAG,gBAAe;AAClB,aAAK,cAAc,eAAe,KAAK,cAAc,KAAK;AAC1D,aAAKA,QAAO,QAAO;MACrB,GAAG,EAAC,SAAS,KAAI,CAAC;AAClB,qBAAe,iBAAiB,aAAa,QAAK;AAChD,WAAG,gBAAe;MACpB,GAAG,EAAC,SAAS,KAAI,CAAC;AAClB,WAAK,kBAAkB,YAAY,cAAc;IACnD;EACF;EAEA,IAAI,eAAY;AACd,WAAO,KAAK;EACd;EAES,WAAQ;AACf,SAAK,gBAAgB,YAAY;AACjC,SAAK,gBAAgB,iBAAiB,SAAS,KAAK,QAAQ,KAAK,IAAI,GAAG,KAAK;AAC7E,SAAK,gBAAgB,iBAAiB,eAAe,KAAK,uBAAuB,KAAK,IAAI,GAAG,KAAK;AAClG,SAAK,gBAAgB,iBAAiB,aAAa,KAAK,YAAY,KAAK,IAAI,GAAG,KAAK;AACrF,SAAK,eAAc;EACrB;EAEQ,0BAAuB;AAC7B,QAAI,CAAC,KAAK,qBAAqB,UAAS,GAAI;AAC1C,aAAO;IACT;AACA,QAAI,CAAC,KAAK,aAAa;AACrB,aAAO;IACT;AACA,UAAM,aAAa,SAAS,KAAK,YAAY;AAC7C,WAAO,cAAc,KAAK,YAAY,QAAQ,SAAQ,KAAM,CAAI,aAAQ,cAAc,KAAK,YAAY,OAAO;EAChH;EAES,kBAAkB,OAAiB;AAC1C,QAAI,MAAM,UAAU,KAAK,CAAC,KAAK,wBAAuB,GAAI;AACxD,YAAM,kBAAkB,KAAK;AAC7B;IACF;AACA,WAAO,WAAW,OAAO,KAAK,IAAI,GAAG,GAAG;AAExC,aAAS,SAAM;AACb,UAAI,KAAK,wBAAuB,GAAI;AAClC,aAAK,cAAc,OAAO,KAAK,MAAM,KAAK;MAC5C;IACF;EACF;EAEQ,YAAY,OAAgB;AAClC,QAAI,CAAC,MAAM,cAAc;AACvB;IACF;AACA,UAAM,aAAa,QAAQ,cAAc,KAAK,qBAAqB,IAAG,CAAE;AACxE,UAAM,aAAa,gBAAgB;EACrC;EAES,UAAO;AACd,SAAK,cAAc,eAAe,KAAK,cAAc,IAAI;AACzD,WAAO;EACT;EAEQ,QAAQ,QAAa;AAC3B,SAAK,cAAc,eAAe,KAAK,cAAc,KAAK;EAC5D;EAES,WAAW,OAAY;AAC9B,UAAM,cAAe,MAAqB,WAAW;AACrD,SAAK,cAAc,eAAe,KAAK,cAAc,CAAC,WAAW;AACjE,WAAO;EACT;EAES,UAAO;AACd,SAAK,cAAc,eAAe,KAAK,cAAc,IAAI;AACzD,WAAO;EACT;EAES,WAAQ;AACf,WAAO;EACT;EAEQ,uBAAuB,OAAY;AACzC,SAAK,OAAM;AACX,SAAK,cAAc,sBAAsB,OAAO,KAAK,IAAI;EAC3D;;AAUI,IAAO,oBAAP,MAAwB;EAC5B;EACU;EACV;EACQ;EACR;EACA;EACA;EACA;EACA;EAEA,YAAiC,CAAA;EACxB,aAAa,oBAAI,IAAG;EAE7B,YAAY,eAA8B,IAAY,MAAc,SAAgB;AAClF,SAAK,KAAK;AACV,SAAK,gBAAgB;AACrB,SAAK,OAAO;AACZ,SAAK,UAAU;AAEf,SAAK,YAAY;AACjB,SAAK,WAAW;AAChB,SAAK,sBAAsB;MACzB,yBAAyB;MACzB,oBAAoB;MACpB,2BAA2B;MAC3B,uBAAuB;;EAE3B;EAEA,WAAQ;AACN,UAAM,IAAI,MAAM,iBAAiB;EACnC;EAEA,UAAO;EACP;EAEA,cAAW;EACX;EAEA,uBAAoB;AAClB,eAAW,SAAS,KAAK,SAAQ,GAAI;AACnC,YAAM,qBAAoB;IAC5B;AACA,SAAK,YAAW;EAClB;EAEA,sBAAmB;AACjB,SAAK,YAAW;AAChB,QAAI,KAAK,QAAQ;AACf,WAAK,OAAO,oBAAmB;IACjC;EACF;EAEA,SAAM;AACJ,WAAO;EACT;EAEA,cAAW;AACT,WAAO;EACT;EAEA,WAAQ;EACR;EAEA,SAAS,QAAc;AACrB,UAAM,IAAI,MAAM,iBAAiB;EACnC;EAEA,WAAQ;AACN,QAAI,KAAK,YAAW,GAAI;AACtB;IACF;AACA,QAAI,KAAK,QAAQ;AACf,WAAK,OAAO,SAAQ;IACtB;AACA,SAAK,YAAY;AACjB,SAAK,aAAY;EACnB;EAEA,eAAY;AACV,UAAM,WAAW,KAAK,SAAQ;AAC9B,aAAS,IAAI,GAAG,IAAI,SAAS,QAAQ,EAAE,GAAG;AACxC,WAAK,cAAc,YAAY,KAAK,SAAQ,GAAK,SAAS,CAAC,EAAE,SAAQ,CAAG;IAC1E;EACF;EAEA,YAAY,MAAuB;AACjC,QAAI,KAAK,YAAW,GAAI;AACtB,WAAK,cAAc,YAAY,KAAK,SAAQ,GAAK,KAAK,SAAQ,CAAG;IACnE;EACF;EAEA,gBAAgB,MAAuB;AACrC,QAAI,KAAK,YAAW,GAAI;AACtB,WAAK,cAAc,YAAY,KAAK,SAAQ,GAAK,KAAK,SAAQ,CAAG;IACnE;EACF;EAEA,cAAW;AACT,WAAO,KAAK;EACd;EAEA,UAAO;AACL,WAAO,CAAC,KAAK,UAAU;EACzB;EAEA,WAAQ;AACN,WAAO,KAAK;EACd;EAEA,MAAM,IAAU;AACd,WAAO,KAAK,WAAW,IAAI,EAAE,KAAK;EACpC;EAEA,YAAY,MAAuB;AACjC,SAAK,UAAU,KAAK,IAAI;AACxB,SAAK,WAAW,IAAI,KAAK,IAAI,IAAI;AACjC,SAAK,SAAS;AACd,SAAK,YAAY,IAAI;EACvB;EAEA,YAAY,MAAuB;AACjC,SAAK,gBAAgB,IAAI;AACzB,UAAM,MAAM,KAAK,UAAU,UAAU,OAAK,EAAE,OAAO,KAAK,EAAE;AAC1D,QAAI,OAAO,GAAG;AACZ,WAAK,UAAU,OAAO,KAAK,CAAC;IAC9B;AACA,SAAK,WAAW,OAAO,KAAK,EAAE;AAC9B,SAAK,SAAS;AACd,SAAK,QAAO;EACd;EAEA,QAAK;AACH,SAAK,YAAY,CAAA;AACjB,SAAK,WAAW,MAAK;EACvB;EAEA,SAAS,OAAa;AACpB,QAAI,KAAK,QAAQ;AACf,WAAK,OAAO,WAAW,OAAO,KAAK,EAAE;AACrC,WAAK,OAAO,WAAW,IAAI,OAAO,IAAI;IACxC;AACA,SAAK,KAAK;EACZ;;AAGI,IAAO,wBAAP,cAAqC,kBAAiB;EAC1D,YAAY,eAA4B;AACtC,UAAM,eAAe,IAAI,MAAM,IAAI;EACrC;EAES,SAAM;AACb,WAAO;EACT;EAES,WAAQ;AACf,WAAO,KAAK,cAAc,YAAY,YAAW;EACnD;;AAGI,IAAO,gCAAP,cAA6C,kBAAiB;EAClE;EACA;EACQ;EACS;EACjB,YACI,eAA8B,cAC9B,OAAmD;AACrD,UAAM,eAAe,kBAAkB,aAAa,kBAAiB,GAAI,MAAM,IAAI;AACnF,SAAK,uBAAuB;AAC5B,SAAK,cAAc;AACnB,SAAK,iBAAiB,CAAA;AACtB,SAAK,gBAAgB;AACrB,SAAK,oBAAoB,0BAA0B,aAAa,YAAW,EAAG,gBAAe;AAC7F,QAAI,aAAa,YAAW,EAAG,SAAQ,GAAI;AAEzC,WAAK,oBAAoB,wBAAwB,aAAa,kBAAiB;AAC/E,WAAK,oBAAoB,4BACrB,aAAa,QAAO,EAAG,KAAI,MAAiB,qBAAU,aAAa;IACzE;EACF;EAEA,QAAK;AACH,WAAO,KAAK;EACd;EAEA,eAAY;AACV,WAAO,KAAK;EACd;EAES,WAAQ;AACf,QAAI,KAAK,aAAa;AACpB,aAAO,KAAK;IACd;AAEA,SAAK,cAAc,IAAI,2BAA2B,KAAK,eAAe,KAAK,sBAAsB,IAAI,IAAI;AACzG,SAAK,YAAW;AAEhB,UAAM,mBAAmB,KAAK,YAAY,KAAK,MAAM,MAAS;AAC9D,SAAK,iBAAiB;MACpB,KAAK,qBAAqB,iBAA2B,wBAAa,OAAO,cAAc,gBAAgB;MACvG,KAAK,qBAAqB,iBAA2B,wBAAa,OAAO,oBAAoB,gBAAgB;MAC7G,KAAK,qBAAqB,iBAA2B,wBAAa,OAAO,sBAAsB,gBAAgB;;AAEjH,WAAO,KAAK;EACd;EAES,YAAY,eAAuB;AAC1C,UAAM,iBACQ,6BAAkB,kBAAkB,SAAQ,EAAG,0CACrD,KAAK,oBAAoB;AACjC,QAAI,KAAK,qBAAqB,YAAW,EAAG,SAAQ,KAAM,gBAAgB;AACxE,WAAK,oBAAoB,qBAAqB;IAChD;AAEA,QAAI,CAAC,KAAK,aAAa;AACrB;IACF;AAEA,QAAI,YAAY,KAAK,qBAAqB,YAAW;AACrD,QAAI,CAAC,iBAAiB,KAAK,qBAAqB,QAAO,GAAI;AACzD,kBAAY,MAAM;IACpB;AAEA,SAAK,YAAY,QAAQ;AACzB,SAAK,YAAY,WAAU;AAE3B,SAAK,YAAY,gBAAgB,UAAU,OAAO,oBAAoB,cAAc;AAEpF,QAAI,UAAkB,KAAK,qBAAqB,IAAG;AACnD,QAAI,KAAK,qBAAqB,YAAW,EAAG,gBAAe,GAAI;AAC7D,gBAAUH,YAAWF,YAAU,gBAAgB,EAAC,KAAK,KAAK,qBAAqB,YAAW,EAAE,CAAC;IAC/F;AACA,QAAI,gBAAgB;AAClB,gBAAUE,YAAWF,YAAU,eAAe,EAAC,KAAK,QAAO,CAAC;IAC9D;AAEA,SAAK,YAAY,UAAU;AAC3B,SAAK,YAAY,qBAAoB;AAErC,SAAK,SAAS,kBAAkB,KAAK,qBAAqB,kBAAiB,CAAE;EAC/E;EAES,cAAW;AAClB,WAAO;EACT;EAES,UAAO;AACd,IAAO,oBAAY,qBAAqB,KAAK,cAAc;EAC7D;EAEA,OAAO,QAAgB;AACrB,QAAI,KAAK,QAAQ;AACf,WAAK,OAAO,SAAQ;AACpB,WAAK,OAAO,SAAQ,EAAG,OAAM;IAC/B;AACA,QAAI,KAAK,aAAa;AACpB,WAAK,YAAY,OAAO,IAAI;AAC5B,UAAI,QAAQ;AACV,aAAK,YAAY,OAAO,IAAI;MAC9B;IACF;EACF;EAEA,OAAO,UAAyC;AAC9C,QAAI,CAAC,KAAK,aAAa;AACrB;IACF;AAEA,SAAK,YAAY,gBAAgB,MAAK;AAEtC,QAAI,CAAC,KAAK,YAAY,aAAa;AACjC;IACF;AAGA,UAAM,qBAAqB,KAAK,YAAY,YAAY;AACxD,IAAG,aAAQ,gBAAgB,oBAAoB,IAAI;AAEnD,UAAM,gBAAgB,CAAC,UAAmB,UAAkB,aAA+B;AACzF,UAAI,aAAa,UAAU;AACzB,YAAI,KAAK,aAAa;AACpB,eAAK,YAAY,QAAQ;QAC3B;AAEA,aAAK,KAAK,qBAAqB,OAAO,QAA+C,EAAE,KAAK,cAAc;AAC1G;MACF;AACA,mBAAa,IAAI;IACnB;AAEA,UAAM,iBAAiB,CAAC,YAA0B;AAChD,UAAI,CAAC,SAAS;AACZ,QAAG,aAAQ,gBAAgB,oBAAoB,KAAK;AACpD,aAAK,YAAW;AAChB,aAAK,OAAO,QAAQ;AACpB;MACF;AACA,UAAI,KAAK,aAAa;AACpB,cAAM,EAAC,OAAM,IAAI,KAAK;AACtB,YAAI,QAAQ;AACV,iBAAO,YAAY,KAAK,WAAW;AACnC,iBAAO,YAAY,KAAK,WAAW;AACnC,eAAK,YAAY,OAAM;QACzB;MACF;AACA,mBAAa,IAAI;IACnB;AAEA,UAAM,eAAe,CAAC,cAA4B;AAChD,MAAG,aAAQ,gBAAgB,oBAAoB,KAAK;AACpD,WAAK,YAAW;AAChB,UAAI,UAAU;AACZ,iBAAS,SAAS;MACpB;IACF;AAEA,SAAK,YAAY,IAAI;AACrB,SAAK,YAAY,kBACb,IAAO,mBAAc,OAAO,eAAe,MAAM,aAAa,KAAK,GAAG,MAAS,CAAC;EACtF;;AAGI,IAAO,0BAAP,MAAO,iCAAgC,kBAAiB;EAC5D;EACS;EACA;EACA;EACT;EACA,YACI,eAA8B,SAA2C,IAAY,MACrF,YAAqD,OAAe,QAAuC;AAC7G,UAAM,eAAe,IAAI,IAAI;AAC7B,SAAK,UAAU;AACf,SAAK,aAAa;AAClB,SAAK,QAAQ;AACb,SAAK,SAAS;EAChB;EAES,WAAQ;AACf,QAAI,KAAK,aAAa;AACpB,aAAO,KAAK;IACd;AACA,SAAK,cAAc,KAAK,kBAAkB,KAAK,OAAO,IAAI;AAC1D,SAAK,YAAW;AAChB,WAAO,KAAK;EACd;EAES,cAAW;AAClB,QAAI;AACJ,SAAK,YAAY,KAAK,qBAAqB;AACzC,UAAI,YAA0B;AAC9B,iBAAW,SAAS,KAAK,SAAQ,GAAI;AACnC,YAAI,MAAM,oBAAoB,QAAQ,MAAM,OAAO;AACjD,sBAAY;AACZ;QACF,WAAW,MAAM,oBAAoB,QAAQ,GAAG;AAC9C,sBAAY;QACd;MACF;AACA,WAAK,oBAAoB,QAAQ,IAAI;IACvC;AAEA,QAAI,CAAC,KAAK,aAAa;AACrB;IACF;AAEA,SAAK,YAAY,iBAAiB,KAAK,oBAAoB,2BAA2B,KAAK;AAC3F,SAAK,YAAY,gBAAgB,KAAK,oBAAoB,sBAAsB,KAAK;AAErF,QAAI,CAAC,KAAK,WAAW,KAAK,QAAQ,KAAI,MAAiB,qBAAU,aAAa,YAAY;AACxF;IACF;AAEA,UAAM,yBAAgC,kBAAU,UAAU,YAC1C,wCAA2B,2BAA2B,eAC9D,KAAK,QAAQ,GAAE,CAAqC,GACxD,KAAK,KAAK,UAAU;AACxB,UAAM,iBACU,yBAAY,gBAAgB,SAAQ,EAAG,oBAAoB,sBAAsB;AACjG,SAAK,YAAY,gBAAgB,UAAU,OAAO,oBAAoB,cAAc;EACtF;EAEQ,kBAAkB,OAAe,MAAuB;AAC9D,UAAM,cAAc,IAAI,2BAA2B,KAAK,eAAe,KAAK,MAAM,KAAK;AACvF,gBAAY,QAAQ,IAAI;AACxB,WAAO;EACT;EAES,eAAY;AACnB,QAAI,CAAC,KAAK,eAAe,KAAK,YAAY,SAAS,MAAM;AACvD;IACF;AACA,SAAK,qBAAoB;EAC3B;EAEQ,uBAAoB;AAC1B,UAAM,WAAW,KAAK,SAAQ;AAC9B,aAAS,IAAI,GAAG,IAAI,SAAS,QAAQ,EAAE,GAAG;AACxC,YAAM,QAAQ,SAAS,CAAC;AACxB,WAAK,YAAY,KAAK;AACtB,UAAI,iBAAiB,0BAAyB;AAC5C,cAAM,qBAAoB;MAC5B;IACF;EACF;EAEQ,YAAY,MAAuB;AACzC,WAAO,KAAK,SAAS,MAAM,UAAU,gBAAgB;EACvD;EAES,YAAY,MAAuB;AAC1C,QAAI,CAAC,KAAK,aAAa;AACrB;IACF;AAEA,QAAI,WAAW,KAAK,SAAQ;AAE5B,QAAI,SAAS,WAAW,KAAK,KAAK,YAAY,IAAI,GAAG;AACnD,WAAK,WAAW;AAChB,WAAK,YAAY,QAAQ,KAAK,YAAY,QAAQ,MAAM,KAAK;AAC5D,WAAiC,cAAc,KAAK;AACrD,WAAK,YAAW;AAChB,WAAK,YAAY,QAAQ,IAAI;AAC7B;IACF;AAEA,QAAI;AACJ,QAAI,SAAS,WAAW,GAAG;AACzB,gBAAU,SAAS,CAAC,MAAM,OAAO,SAAS,CAAC,IAAI,SAAS,CAAC;IAC3D;AACA,QAAI,SAAS,UAAU;AACrB,cAAQ,WAAW;AACnB,YAAM,gBAAgB,CAAA;AACtB,oBAAc,KAAK,IAAI;AACvB,UAAI,WAA4D;AAChE,aAAO,YAAY,SAAS,UAAU;AACpC,mBAAW,SAAS;AACpB,YAAI,UAAU;AACZ,wBAAc,KAAK,QAAQ;QAC7B;MACF;AACA,oBAAc,QAAO;AACrB,YAAM,YAAY,cAAc,IAAI,CAAAI,UAAQA,MAAK,KAAK,EAAE,KAAK,GAAG;AAEhE,YAAM,QAAQ,CAAA;AACd,iBAAW;AACX,SAAG;AACD,cAAM,KAAK,QAAQ;AACnB,mBAAW,SAAS,SAAQ;AAC5B,mBAAW,SAAS,WAAW,IAAI,SAAS,CAAC,IAAI;MACnD,SAAS,UAAU;AAEnB,UAAI,CAAC,KAAK,YAAW,GAAI;AACvB,aAAK,YAAY,QAAQ;AACzB,aAAK,YAAY,QAAQ,IAAI;AAC7B,iBAAS,IAAI,GAAG,IAAI,MAAM,QAAQ,EAAE,GAAG;AACpC,gBAAM,CAAC,EAA8B,cAAc;AACpD,gBAAM,CAAC,EAAE,WAAW;QACtB;AACA,aAAK,YAAW;AAChB;MACF;AACA,YAAM,iBAAiB,KAAK;AAC5B,YAAM,cAAc,KAAK,kBAAkB,WAAW,IAAI;AAC1D,eAAS,IAAI,GAAG,IAAI,cAAc,QAAQ,EAAE,GAAG;AAC5C,sBAAc,CAAC,EAA8B,cAAc;AAC5D,sBAAc,CAAC,EAAE,YAAW;MAC9B;AACA,UAAI,eAAe,QAAQ;AACzB,aAAK,cAAc,YAAY,eAAe,QAAQ,WAAW;MACnE;AAEA,qBAAe,QAAQ,MAAM,MAAM,SAAS,CAAC,CAAC;AAC9C,qBAAe,QAAQ,MAAM,IAAI,CAAAA,UAAQA,MAAK,KAAK,EAAE,KAAK,GAAG;AAC7D,UAAI,eAAe,QAAQ;AACzB,aAAK,cAAc,YAAY,eAAe,QAAQ,cAAc;MACtE;AACA,WAAK,cAAc,YAAY,KAAK,aAAa,cAAc;AAC/D,UAAI,eAAe,UAAU;AAC3B,oBAAY,OAAM;MACpB;AACA,WAAK,YAAW;IAClB;AACA,QAAI,KAAK,YAAW,GAAI;AACtB,WAAK,cAAc,YAAY,KAAK,aAAa,KAAK,SAAQ,CAAE;IAClE;EACF;EAES,gBAAgB,MAAuB;AAC9C,UAAM,aAAc;AACpB,QAAI,WAAW,YAAY,CAAC,KAAK,YAAW,KAAM,CAAC,KAAK,eAAe,CAAC,WAAW,aAAa;AAC9F;IACF;AACA,SAAK,cAAc,YAAY,KAAK,aAAa,WAAW,WAAW;EACzE;;AAGI,IAAO,yBAAP,cAAsC,kBAAiB;EAC1C;EACR;EACD;EACA;EACR,YACI,eAA8B,SAA2C,IAAY,MAAc,OACnG,SAAgB;AAClB,UAAM,eAAe,IAAI,MAAM,OAAO;AACtC,SAAK,UAAU;AACf,SAAK,QAAQ;AACb,SAAK,SAAQ;EACf;EAEA,iBAAiB,eAAsC;AACrD,SAAK,gBAAgB;EACvB;EAES,WAAQ;AACf,QAAI,KAAK,aAAa;AACpB,aAAO,KAAK;IACd;AACA,UAAM,aAAa,EAAE,KAAK,mBAA+B,iDAAoC;AAC7F,SAAK,cACD,IAAI,2BAA2B,KAAK,eAAe,KAAK,MAAM,KAAK,OAAO,KAAK,eAAe,UAAU;AAC5G,SAAK,YAAY,QAAQ,IAAI;AAC7B,QAAI,KAAK,mBAA+B,iDAAoC,YAAY;AACtF,YAAM,EAAC,qBAAqB,2BAA0B,IAAI,KAAK;AAC/D,cAAQ,qBAAqB,OAAO;QAClC,KAAK,cAAc;AACjB,gBAAM,UAAU,IAAa,iBAAQ,QAAO;AAC5C,eAAK,YAAY,gBAAgB,OAAO,OAAO;AAC/C;QACF;QACA,KAAK,gBAAgB;AACnB,gBAAM,SAAS,IAAY,gBAAO,OAAM;AACxC,iBAAO,OAAO;YACZ,SAAO;YACP,MAAI;YACJ,OAAOF,YAAWF,YAAU,wBAAwB;YACpD,cAAc;;AAEhB,iBAAO,cAAcE,YAAWF,YAAU,OAAO;AACjD,iBAAO,iBAAiB,SAAS,OAAM,UAAQ;AAC7C,kBAAM,QAAO;AACb,kBAAM,2BAA2B;;cACT;YAAI;UAC9B,CAAC;AACD,eAAK,YAAY,gBAAgB,OAAO,MAAM;AAC9C;QACF;MACF;IACF;AACA,WAAO,KAAK;EACd;EAES,WAAQ;AACf,SAAK,YAAW;EAClB;EAES,cAAW;AAClB,QAAI,CAAC,KAAK,eAAe,CAAC,KAAK,WAAW,KAAK,QAAQ,KAAI,MAAiB,qBAAU,aAAa,YAAY;AAC7G;IACF;AACA,UAAM,iBAA6B,wCAA2B,2BAA2B,eACrF,KAAK,QAAQ,GAAE,CAAqC;AACxD,UAAM,YAAY,KAAK,YAAY,gBAAgB,UAAU,SAAS,kBAAkB;AACxF,UAAM,WAAuB,yBAAY,gBAAgB,SAAQ,EAAG,oBAAoB,cAAc;AACtG,QAAI,cAAc,UAAU;AAC1B;IACF;AACA,SAAK,YAAY,gBAAgB,UAAU,OAAO,oBAAoB,QAAQ;AAC9E,QAAI,KAAK,YAAY,oBAAoB,SAAQ,GAAI;AACnD;IACF;AACA,QAAI,UAAU;AACZ,WAAK,YAAY,OAAM;IACzB,OAAO;AACL,WAAK,YAAY,SAAQ;IAC3B;EACF;EAES,SAAS,OAAa;AAC7B,SAAK,QAAQ;AACb,QAAI,KAAK,aAAa;AACpB,WAAK,YAAY,QAAQ,KAAK;IAChC;EACF;;;;AKrlEF,IAAO,2BAAQ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBAiFC,YAAY,QAAQ,oBAAoB,CAAC;;;ACtFzD;;wBAAAM;EAAA;;;;;AAKA,OAAO;AAEP,YAAYC,cAAY;AACxB,YAAYC,WAAU;AACtB,YAAYC,YAAU;AACtB,YAAYC,gBAAc;AAC1B,YAAYC,UAAS;AACrB,YAAYC,eAAc;AAC1B,YAAYC,mBAAiB;AAC7B,YAAYC,iBAAe;AAC3B,YAAYC,iBAAgB;AAC5B,YAAY,eAAe;AAC3B,YAAYC,mBAAiB;AAC7B,YAAYC,UAAQ;AACpB,YAAYC,oBAAmB;AAE/B,YAAYC,iBAAgB;;;ACrB5B;;;;;AA+BA,YAAYC,iBAAe;AAE3B,YAAYC,kBAAiB;AAKtB,IAAM,eAAe;AAEtB,IAAO,gCAAP,MAAoC;EAKX;EAJZ,UAAyC,CAAA;EAClD,UAAU;EACV,YAAY;EAEpB,YAA6B,aAAwB;AAAxB,SAAA,cAAA;EAC7B;EAEA,4BAA4B,aAA8B;AACxD,gBAAY,iBAAgB,gBACsB,WAAS,KAAK,eAAe,MAAM,MAAM,WAAW,CAAC;EACzG;EAEQ,eAAe,QAA+B,aAA8B;AAClF,QAAI,OAAO,YAAY;AACrB,WAAK,cAAc,YAAY,aAAY,GAAI,OAAO,OAAO;IAC/D;AACA,UAAM,UAAU,OAAO,WAAW,UAAU;AAC5C,UAAM,SAAS,OAAO,MAAM,UAAU;AACtC,UAAM,SAAS,CAAC,KAAK,aAAa,QAAQ,WAAW,OAAO,UAAU,OAAO,aAAa,KAAK,QAAK;AAClG,aAAO,QACH,GAAG,YAAY,gBAAgB,KAAK,GAAG,YAAY,eAAe,KAAK,GAAG,YAAY,eAAe,CAAC;IAC5G,CAAC;AACD,QAAI,QAAQ;AACV,WAAK,mBAAmB,YAAY,aAAY,GAAI,QAAQ,IAAI;AAChE,UAAI,KAAK,QAAQ,SAAS,KAAK,UAAU,GAAG;AAC1C,aAAK,QAAQ,SAAS,KAAK,UAAU;MACvC;AACA,WAAK,QAAQ,KAAK,IAAI,4BAA4B,YAAY,aAAY,GAAI,OAAO,IAAI,CAAC;AAC1F,WAAK;AACL,UAAI,KAAK,QAAQ,SAAS,cAAc;AACtC,aAAK,QAAQ,MAAK;AAClB,aAAK;MACP;IACF;EACF;EAEA,mBAAmB,cAAmD,UAAgB;AACpF,QAAI,CAAC,KAAK,WAAW;AACnB,YAAM,MAAM,KAAK,WAAW,IAAI,KAAK,QAAQ,KAAK,OAAO,IAAI;AAC7D,UAAI,KAAK,QAAQ,YAAY,GAAG;AAC9B,YAAI,WAAW;MACjB;IACF;EACF;EAEQ,cAAc,cAAmD,QAA6B;AACpG,eAAW,SAAS,KAAK,SAAS;AAChC,UAAI,MAAM,QAAQ,YAAY,GAAG;AAC/B,cAAM,WAAW,OAAO,OAAO,MAAM,QAAQ;MAC/C;IACF;EACF;EAEQ,OAAO,OAAkC;AAC/C,UAAM,eAAyB,sBAAU,cAAc,SAAQ,EAAG,aAAa,MAAM,WAAW,MAAM,GAAG;AACzG,QAAI,cAAc;AAChB,WAAK,YAAY;AACjB,WAAK,YAAY,mBAAmB,cAAc,MAAM,UAAU,OAAO,IAAI;AAC7E,WAAK,YAAY;IACnB;EACF;EAEA,WAAQ;AACN,QAAI,KAAK,UAAU,GAAG;AACpB,WAAK;AACL,WAAK,OAAO,KAAK,QAAQ,KAAK,OAAO,CAAC;IACxC;EACF;EAEA,WAAQ;AACN,QAAI,KAAK,UAAU,KAAK,QAAQ,SAAS,GAAG;AAC1C,WAAK;AACL,WAAK,OAAO,KAAK,QAAQ,KAAK,OAAO,CAAC;IACxC;EACF;EAEA,2BAA2B,cAAiD;AAC1E,aAAS,IAAI,KAAK,QAAQ,SAAS,GAAG,KAAK,GAAG,KAAK;AACjD,UAAI,KAAK,QAAQ,CAAC,EAAE,QAAQ,YAAY,GAAG;AACzC,aAAK,QAAQ,OAAO,GAAG,CAAC;AACxB,YAAI,KAAK,WAAW,GAAG;AACrB,eAAK;QACP;MACF;IACF;EACF;;AAGF,IAAM,8BAAN,MAAiC;EACtB;EACA;EACT;EAEA,YAAY,cAAmD,UAAgB;AAC7E,SAAK,YAAY,aAAa,QAAO,EAAG,GAAE;AAC1C,SAAK,MAAM,aAAa,IAAG;AAC3B,SAAK,WAAW;EAClB;EAEA,QAAQ,cAAiD;AACvD,WAAO,KAAK,QAAQ,aAAa,IAAG,KAAM,KAAK,cAAc,aAAa,QAAO,EAAG,GAAE;EACxF;;;;ACzIF,IAAO,0BAAQ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBAyDC,YAAY,QAAQ,mBAAmB,CAAC;;;AC9DxD;;;;;;;AA+BA,YAAYC,cAAY;AACxB,YAAYC,YAAU;AACtB,YAAYC,eAAc;AAC1B,YAAY,gBAAgB;AAC5B,YAAYC,kBAAiB;AAC7B,YAAYC,gBAAe;AAC3B,YAAYC,iBAAe;AAE3B,YAAYC,iBAAgB;AAC5B,YAAY,cAAc;AAC1B,YAAYC,kBAAiB;AAC7B,YAAYC,UAAQ;AACpB,YAAYC,oBAAmB;AAC/B,YAAYC,eAAc;;;AC5C1B;;;;AAgCA,YAAYC,cAAY;AACxB,YAAYC,WAAU;;;ACbf,IAAM,0BAAoC;;;;;;;;;;ADejD,YAAY,mBAAmB;AAC/B,YAAYC,kBAAiB;AAC7B,YAAYC,gBAAe;AAC3B,YAAYC,iBAAe;AAC3B,YAAYC,iBAAgB;AAC5B,YAAYC,iBAAgB;AAC5B,YAAY,kBAAkB;AAC9B,YAAYC,iBAAgB;AAC5B,YAAYC,kBAAiB;AAC7B,YAAYC,UAAQ;;;AEvCpB,YAAYC,YAAU;AACtB,YAAYC,eAAc;AAE1B,YAAYC,iBAAgB;AAE5B,YAAYC,kBAAiB;AAO7B,IAAMC,cAAY;;;;EAIhB,IAAI;;;;EAIJ,IAAI;;;;EAIJ,IAAI;;AAEN,IAAMC,SAAY,YAAK,kBAAkB,mCAAmCD,WAAS;AACrF,IAAME,eAAkB,YAAK,mBAAmB,KAAK,QAAWD,MAAI;AAEpE,IAAM,eAAN,cAAsC,yBAAY;EAC3B;EAArB,YAAqBE,QAAa;AAChC,UAAK;AADc,SAAA,QAAAA;EAErB;EAES,GAAG,OAAmB;AAC7B,WAAO,KAAK,UAAU,MAAM;EAC9B;EAES,QAAK;AACZ,UAAM,UAAU,SAAS,cAAc,KAAK;AAC5C,YAAQ,YAAY;AACpB,QAAIA,SAAQ,KAAK;AACjB,UAAM,YAAqB,0BAAgB,MAAM,KAAK,MAAM,IAAI,OAAOA,MAAK,IAAI,GAAG,MAAM,CAAC;AAC1F,YAAQ,MAAM,kBAAkB,wBAAwB,UAAU,QAAQ,CAAC,CAAC;AAC5E,IAAAA,UAAS;AACT,QAAI;AACJ,QAAI;AACJ,QAAIA,UAAS,KAAK;AAChB,cAAQD,aAAWF,YAAU,EAAE;AAC/B,MAAAG,UAAS;AACT,uBAAiBA,UAAS,KAAK,IAAI;IACrC,OAAO;AACL,cAAQD,aAAWF,YAAU,EAAE;AAC/B,uBAAiB;IACnB;AACA,YAAQ,cAAcG,OAAM,QAAQ,cAAc;AAClD,UAAM,cAAc,QAAQ,YAAY,SAAS,cAAc,MAAM,CAAC;AACtE,gBAAY,YAAY;AACxB,gBAAY,cAAc;AAC1B,WAAO;EACT;;AAGF,IAAM,oBAAN,cAA2C,yBAAY;EAChC;EAArB,YAAqBA,QAAa;AAChC,UAAK;AADc,SAAA,QAAAA;EAErB;EAES,GAAG,OAAmB;AAC7B,WAAO,KAAK,UAAU,MAAM;EAC9B;EAES,QAAK;AACZ,UAAM,UAAU,SAAS,cAAc,KAAK;AAC5C,YAAQ,YAAY;AACpB,UAAM,YAAqB,0BAAgB,MAAM,KAAK,MAAM,IAAI,KAAK,KAAK,KAAK,IAAI,GAAG,MAAM,CAAC;AAC7F,YAAQ,cAAc,KAAK,MAAM,QAAQ,CAAC;AAC1C,YAAQ,MAAM,kBAAkB,uBAAuB,UAAU,QAAQ,CAAC,CAAC;AAC3E,UAAM,OAAO,SAAS,cAAc,MAAM;AAC1C,SAAK,YAAY;AACjB,SAAK,cAAcD,aAAWF,YAAU,EAAE;AAC1C,YAAQ,YAAY,IAAI;AACxB,WAAO;EACT;;AAGF,SAAS,uBACL,KAA0B,OAC1B,MAA2C;AAC7C,QAAM,aAAa,SAAI,gBAAyD,oBAAoB;AACpG,QAAM,UAA4D,CAAA;AAClE,aAAW,CAAC,MAAMG,MAAK,KAAK,KAAK;AAC/B,QAAI,QAAQ,MAAM,IAAI,OAAO;AAC3B,YAAM,EAAC,KAAI,IAAI,MAAM,IAAI,KAAK,IAAI;AAClC,cAAQ,KAAK,IAAI,WAAWA,MAAK,EAAE,MAAM,IAAI,CAAC;IAChD;EACF;AACA,SAAkB,qBAAS,GAAG,SAAS,IAAI;AAC7C;AAEA,IAAM,6BAA6B,CAAC,SAChC,cAAc,OAAM;EACtB,eAA0B,wBAAY,OAAM;EAC5C;EACA;EACA,cAAsC,IAAe,wBAAW;EAEhE,YAAY,cAAiD;AAC3D,UAAM,YAAY;AAElB,SAAK,QAAmB,uBAAW,OAAqD;MACtF,SAAM;AACJ,eAAkB,qBAAS;MAC7B;MACA,QAAQ,CAAC,SAAS,OAAM;AACtB,eAAO,GAAG,QAAQ,OAAO,CAACC,UAAS,WAAU;AAC3C,iBAAO,OAAO,GAAG,KAAK,YAAY,IAAI,uBAAuB,OAAO,OAAO,GAAG,OAAO,IAAI,IAAIA;QAC/F,GAAG,QAAQ,IAAI,GAAG,OAAO,CAAC;MAC5B;KACD;AAED,SAAK,SAAoB,mBAAO;MAC9B,SAAS,UAAQ,KAAK,MAAM,MAAM,KAAK,KAAK;MAC5C,OAAO,MAAM,IAAI;KAClB;EACH;EAEA,OAAgB,QAAQ,cAAiD;AACvE,WAAO,aAAa,YAAW,EAAG,WAAU;EAC9C;EAEQ,aAAU;AAChB,WAAO,KAAK,aAAa,kBAAkB,IAAI;EACjD;EAES,kBAAe;AACtB,UAAM,MAAM,KAAK,WAAU;AAC3B,WAAO,KAAK,YAAY,GACpB,CAAC,MAAM,CAAA,IAAK,CAAC,KAAK,MAAM,KAAK,WAAS,uBAAuB,KAAK,OAAO,IAAI,CAAC,GAAG,KAAK,QAAQC,MAAK,CAAC;EAC1G;EAES,kBAAkBC,OAA6C,QAAwC;AAC9G,UAAM,YAAY,QAAQ,OAAO,MAAM,MAAM,KAAK,OAAO,KAAK,CAAC;AAC/D,UAAM,MAAM,KAAK,WAAU;AAC3B,QAAI,CAAC,KAAK;AACR,UAAI,WAAW;AACb,eAAO,SAAS,EAAC,SAAS,KAAK,YAAY,YAAY,CAAA,CAAE,EAAC,CAAC;MAC7D;IACF,WAAW,CAAC,WAAW;AACrB,aAAO,SAAS;QACd,SAAS,KAAK,YAAY,YACtB,CAAC,KAAK,MAAM,KAAK,WAAS,uBAAuB,KAAK,OAAOA,KAAI,CAAC,GAAG,KAAK,QAAQD,MAAK,CAAC;OAC7F;IACH,OAAO;AACL,aAAO,SAAS,EAAC,SAAS,KAAK,aAAa,GAAG,GAAG,EAAC,CAAC;IACtD;EACF;;AAGF,IAAMA,SAAmB,uBAAW,UAAU;EAC5C,uBAAuB;IACrB,iBAAiB;IACjB,OAAO;;EAET,yBAAyB;IACvB,OAAO;IACP,iBAAiB;IACjB,YAAY;;EAEd,oBAAoB;IAClB,OAAO;IACP,iBAAiB;IACjB,YAAY;;EAEd,qBAAqB;IACnB,WAAW;IACX,cAAc;;EAEhB,+BAA+B;IAC7B,OAAO;IACP,UAAU;IACV,YAAY;;CAEf;AAEM,IAAM,sBAAsB;EAA0B;;AAAA;AAEtD,IAAM,2BAA2B;EAA0B;;AAAA;;;AChMlE;;;;;AAKA,YAAYE,YAAU;AACtB,YAAYC,eAAc;AAE1B,YAAY,gBAAgB;AAC5B,YAAYC,UAAQ;AAIpB,IAAMC,cAAY;;;;;EAKhB,OAAO;;;;;EAKP,mBAAmB;;AAErB,IAAMC,SAAY,YAAK,kBAAkB,0CAA0CD,WAAS;AAC5F,IAAME,eAAkB,YAAK,mBAAmB,KAAK,QAAWD,MAAI;AAE9D,IAAO,uBAAP,cAAoC,OAAM;EAC9C,OAAgB,QAAQ,cAAiD;AACvE,UAAM,cAAc,aAAa,YAAW;AAC5C,WAAO,YAAY,WAAU,KAAM,YAAY,gBAAe;EAChE;EAES,oBAAiB;AACxB,UAAM,2BAAoC,mCAAyB,yBAAyB,SAAQ;AAGpG,QAAI,KAAK,aAAa,YAAW,EAAG,gBAAe,GAAI;AACrD,YAAM,QAAQ,CAAA;AACd,iBAAW,UAAU,yBAAyB,uBAAuB,KAAK,YAAY,GAAG;AACvF,cAAM,eAAe,yBAAyB,sBAAsB,MAAM;AAC1E,YAAI,CAAC,cAAc;AACjB;QACF;AACA,cAAM,MAAM,aAAa,IAAG;AAC5B,cAAM,OAAgB,wBAAc,kBAAkB,GAAG;AACzD,cAAM,QAAQC,aAAWF,YAAU,mBAAmB,EAAC,KAAK,KAAI,CAAC;AACjE,cAAM,KAAgB,qBAAU,UAAU,kBACtC,cAAc,MAAM,KAAK,OAAO,QAAW,0BAA0B,CAAC;MAC5E;AACA,iBAAW,aAAsB,4BAAkB,kBAAkB,eAAe,KAAK,YAAY,GAAG;AACtG,cAAM,KAAgB,qBAAU,UAAU,WAAW,SAAS,CAAC;MACjE;AACA,UAAI,MAAM,WAAW,GAAG;AACtB,eAAO,CAAA;MACT;AACA,YAAM,UAAU,SAAS,cAAc,MAAM;AAC7C,YAAM,QAAQ,CAACG,OAAM,UAAS;AAC5B,YAAI,QAAQ,GAAG;AACb,kBAAQ,OAAO,IAAI;QACrB;AACA,gBAAQ,OAAOA,KAAI;MACrB,CAAC;AACD,aAAO,CAAC,IAAO,aAAQ,YAAiB,YAAK,yBAAyBF,QAAMD,YAAU,OAAO,EAAC,KAAK,QAAO,CAAC,CAAC,CAAC;IAC/G;AAGA,eAAW,UAAU,yBAAyB,uBAAuB,KAAK,YAAY,GAAG;AACvF,UAAI,OAAO,kBAAkB,WAAW,QAAQ;AAC9C,cAAMG,QAAO,UAAU,0BAA0B,OAAO,cAAc,OAAM,GAAI,OAAO,gBAAgB;AACvG,eAAO,CAAC,IAAO,aAAQ,YAAiB,YAAK,yBAAyBF,QAAMD,YAAU,OAAO,EAAC,KAAKG,MAAI,CAAC,CAAC,CAAC;MAC5G;IACF;AAEA,WAAO,CAAA;EACT;;AAGK,IAAM,YAAY,IAAe,qBAAU,UAAS;;;AC/E3D;;;;AAIA,YAAYC,WAAU;AACtB,YAAYC,YAAU;AAGtB,YAAYC,iBAAgB;AAC5B,YAAYC,UAAQ;AACpB,YAAYC,eAAc;AAI1B,IAAMC,cAAY;;;;EAIhB,OAAO;;;;EAIP,WAAW;;AAEb,IAAMC,SAAY,YAAK,kBAAkB,oCAAoCD,WAAS;AACtF,IAAME,eAAkB,YAAK,mBAAmB,KAAK,QAAWD,MAAI;AAE9D,IAAO,iBAAP,cAA8B,OAAM;EACxC,OAAgB,QAAQ,cAAiD;AACvE,WAAgB,kCAAwB,uBAAuB,YAAY;EAC7E;EAES,oBAAiB;AACxB,UAAM,aAAgB,aAAQ,QAAQ,mBAAmB,sBAAsB;AAC/E,eAAW,QAAa,eAAS,MAAK,IAAKC,aAAWF,YAAU,KAAK,IAAIE,aAAWF,YAAU,SAAS,CAAC;AACxG,eAAW,oBAAmB;AAE9B,WAAO,CAAC,UAAU;EACpB;EAES,kBAAe;AACtB,WAAkB,uBAAW,WAAU;EACzC;;;;AJcI,IAAO,oBAAP,MAAO,2BAAiC,uBACF,WACe,yBAAY,eAAe,EAAC;EACrF;EACA,wBAAwB;EACxB;EACA,8BAAoE,CAAA;EACpE,iCAAuE,CAAA;EAC9D;;;;EAID,UAAoB,CAAA;EACnB;EACT,qCAAqC;EAErC,YAAY,cAAiD;AAC3D,UAAM,MAAM,KAAK,YAAW,CAAE;AAE9B,SAAK,gBAAgB;AAErB,SAAK,sBAAkC,yBAAY,gBAAgB,SAAQ,EAAG,QAAQ,YAAY;AAElG,SAAK,yBAAyB,KAAK,iBAAiB,KAAK,IAAI;AAE7D,IAAO,kBAAS,SAAS,SAAQ,EAC5B,cAAc,uCAAuC,EACrD,kBAAkB,KAAK,6BAA6B,IAAI;AAE7D,SAAK,sBAAsB,IAAO,mBAAc,cAC5C,KAAK,WAAW,OAAO,YAAY,KAAK,uBAAuB,KAAK,IAAI,GAAG,eAAe;AAE9F,SAAK,oBAAoB,WAAW,KAAK,GAAG;AAC5C,SAAK,uBAAsB;EAC7B;EAEQ,MAAM,cAAW;AACvB,QAAI,KAAK,cAAc,QAAO,GAAI;AAChC,aAAO,KAAK,cAAc,uBAAsB;IAClD;AACA,WAAO,MAAM,KAAK,cAAc,mBAAkB;EACpD;EAEmB,oBAAoB,KAAW;AAChD,WAAO;MACL,MAAM,oBAAoB,GAAG;MAC7B,YAAY,KAAK,YAAW,CAAE;MACnB,mBAAO,gBAAgB,SAAQ;;MAE1C,kBAAkB,GAAG,KAAK,QAAQ,IAAI,YAAU,OAAO,gBAAe,CAAE,CAAC;;EAE7E;EAEmB,UAAO;AACxB,UAAM,QAAO;AACb,IAAG,aAAQ,QAAQ,SAAQ,EAAG,UAAU,oBAAmB,IAAI;EACjE;EAEmB,SAAM;AACvB,UAAM,OAAM;AACZ,IAAG,aAAQ,QAAQ,SAAQ,EAAG,UAAU,oBAAmB,IAAI;EACjE;EAEQ,uCAAoC;AAC1C,QAAI,KAAK,qBAAqB;AAC5B,YAAM,oBAAoB,KAAK,oBAAoB;AACnD,YAAM,uBAAuB,KAAK,oBAAoB;AACtD,WAAK,iCAAiC;QACpC,kBAAkB,iBAA2B,yBAAa,OAAO,cAAc,KAAK,gBAAgB,IAAI;QACxG,kBAAkB,iBAA2B,yBAAa,OAAO,gBAAgB,KAAK,kBAAkB,IAAI;QAC5G,kBAAkB,iBACJ,yBAAa,OAAO,mBAAmB,KAAK,qBAAqB,IAAI;QAEnF,qBAAqB,iBAA2B,yBAAa,OAAO,cAAc,KAAK,gBAAgB,IAAI;QAC3G,qBAAqB,iBACP,yBAAa,OAAO,gBAAgB,KAAK,kBAAkB,IAAI;;IAEjF,OAAO;AACL,WAAK,iCAAiC;QACpC,KAAK,cAAc,iBAA2B,yBAAa,OAAO,cAAc,KAAK,gBAAgB,IAAI;QACzG,KAAK,cAAc,iBAA2B,yBAAa,OAAO,gBAAgB,KAAK,kBAAkB,IAAI;QAC7G,KAAK,cAAc,iBACL,yBAAa,OAAO,mBAAmB,KAAK,qBAAqB,IAAI;;IAEvF;EACF;EAEA,eAAY;AACV,WAAO,KAAK;EACd;EAEA,gBAAgB,cAAiD;AAC/D,UAAM,SAAS,aAAa,cAAa,IAAK,QAAQ,QAAO,IAAK,aAAa,mBAAkB;AACjG,UAAM,oBAAoB,KAAK;AAC/B,WAAO,KAAK,YAAW;AACrB,UAAI,KAAK,kBAAkB,mBAAmB;AAC5C;MACF;AACA,WAAK,mBAAkB;AACvB,WAAK,gBAAgB;AACrB,UAAI,aAAa,YAAW,MAAO,KAAK,WAAW,MAAM,IAAI,SAAQ,GAAI;AACvE,cAAM,KAAK,sBAAsB,QAAQ,QAAQ,aAAa,uBAAsB,CAAE,CAAC;MACzF,OAAO;AACL,aAAK,cAAa;MACpB;AACA,WAAK,uBAAsB;IAC7B,GAAG,QAAQ,KAAK;EAClB;EAEQ,qBAAkB;AACxB,IAAO,qBAAY,qBAAqB,KAAK,8BAA8B;AAC3E,IAAO,qBAAY,qBAAqB,KAAK,2BAA2B;AACxE,SAAK,cAAc,wBAAuB;AAC1C,IAAY,yBAAY,gBAAgB,SAAQ,EAAG,4BAC/C,KAAK,eAAe,KAAK,sBAAsB;EACrD;EAEQ,yBAAsB;AAC5B,SAAK,8BAA8B;MACjC,KAAK,cAAc,iBACL,yBAAa,OAAO,oBAAoB,KAAK,sBAAsB,IAAI;MACrF,KAAK,cAAc,iBACL,yBAAa,OAAO,sBAAsB,KAAK,wBAAwB,IAAI;MACzF,KAAK,cAAc,iBAA2B,yBAAa,OAAO,cAAc,KAAK,gBAAgB,IAAI;;AAG3G,IAAY,yBAAY,gBAAgB,SAAQ,EAAG,yBAC/C,KAAK,eAAe,KAAK,sBAAsB;AACnD,SAAK,qCAAoC;AACzC,SAAK,YAAW;AAChB,UAAM,iBAAkC,wBAAwB,SAAS,KAAK,WAAW,KACrF,CAAC,KAAK,cAAc,QAAO,EAAG,kBAAiB,KACnC,yBAAY,gBAAgB,SAAQ,EAAG,QAAQ,KAAK,aAAa,MAAM;AACvF,UAAM,kBAAkB,CAAC,KAAK,cAAc,YAAW,EAAG,gBAAe;AACzE,SAAK,kBAAkB,gBAAgB,eAAe;EACxD;EAES,WAAQ;AACf,UAAM,SAAQ;AACd,SAAK,YAAY,KAAK,sBAAqB,CAAE;EAC/C;EAES,WAAQ;AACf,eAAW,UAAU,KAAK,SAAS;AACjC,aAAO,SAAQ;IACjB;AACA,UAAM,SAAQ;AACd,IAAG,aAAQ,QAAQ,SAAQ,EAAG,UAAU,oBAAmB,IAAI;AAC/D,SAAK,cAAc,wBAAuB;EAC5C;EAEmB,iBAAc;AAC/B,UAAM,UAAsB,yBAAY,gBAAgB,SAAQ,EAAG,QAAQ,KAAK,aAAa;AAC7F,UAAM,WAAW,UAAU,QAAQ,QAAQ,SAAQ,IAAK,KAAK,cAAc,SAAQ;AACnF,WAAc,sBAAa,aAAa,oBAAoB,QAAQ;EACtE;EAEA,wBAAqB;AACnB,QAAI,KAAK,aAAY,GAAI;AACvB,aAAO;IACT;AACA,QAAI,KAAK,cAAc,aAAY,GAAI;AACrC,aAAO;IACT;AACA,QAAI,KAAK,cAAc,SAAQ,MAAO,oBAAoB;AACxD,aAAO;IACT;AACA,QAAgB,yBAAY,gBAAgB,SAAQ,EAAG,QAAQ,KAAK,aAAa,GAAG;AAClF,aAAO;IACT;AACA,QAAI,KAAK,cAAc,QAAO,EAAG,kBAAiB,GAAI;AACpD,aAAO;IACT;AACA,QAAI,KAAK,cAAc,QAAO,EAAG,iBAAgB,GAAI;AACnD,aAAO;IACT;AACA,QAAI,KAAK,cAAc,YAAW,EAAG,gBAAe,GAAI;AAGtD,aAAO;IACT;AACA,QAAI,KAAK,cAAc,QAAO,EAAG,KAAI,MAAiB,sBAAU,aAAa,WAC7D,uCAA0B,0BAA0B,SAAQ,EAAG,OAAM,GAAI;AACvF,aAAO;IACT;AAEA,QAAI,KAAK,UAAU,KAAK,cAAc,YAAW,EAAG,WAAU,GAAI;AAChE,aAAO;IACT;AACA,WAAO,KAAK,cAAc,YAAW,MAAc,sBAAa,cAAc;EAChF;EAEQ,8BAA2B;AACjC,SAAK,YAAY,KAAK,sBAAqB,CAAE;EAC/C;EAEA,gBAAa;AACX,QAAI,CAAC,KAAK,cAAc,QAAO,GAAI;AACjC;IACF;AAEA,SAAK,wBAAwB;AAC7B,SAAK,cAAc,kBAAiB;AACpC,SAAK,wBAAwB;EAC/B;EAES,MAAM,WAAW,SAAe;AACvC,SAAK,eAAc;AACnB,SAAK,YAAW;AAChB,UAAM,MAAM,WAAW,OAAO;AAC9B,eAAW,UAAU,KAAK,SAAS;AACjC,aAAO,kBAAkB,KAAK,UAAU;IAC1C;AACA,SAAK,iCAAgC;AACrC,IAAO,qBAAY,UAAU,sBAAsB,KAAK,cAAc,YAAY,IAAI,CAAC;EACzF;EAEQ,cAAc,QAAsC;AAC1D,UAAM,EAAC,YAAY,aAAY,IAAI,KAAK,2BAA2B,OAAO,WAAU,GAAI,OAAO,aAAY,CAAE;AAC7G,WAAO,IAAI,WAAW,QAAQ,YAAY,YAAY;EACxD;EAEQ,cAAW;AACjB,UAAM,UAAU,KAAK,wBAAwB,OACzC,CAAC,GAAG,KAAK,oBAAoB,QAAQ,SAAQ,GAAI,GAAG,KAAK,oBAAoB,WAAW,SAAQ,CAAE,IAClG,CAAC,GAAG,KAAK,cAAc,SAAQ,CAAE;AACrC,WAAO,QAAQ,IAAI,YAAU,KAAK,cAAc,MAAM,CAAC;EACzD;EAES,gBAAa;AACpB,UAAM,YAAY,KAAK;AACvB,UAAM,cAAa;AACnB,SAAK,oBAAoB,YAAW;AACpC,iBAAa,SAAQ,EAAG,2BAA0B;AAClD,SAAK,wBAAwB;AAK7B,SAAK,cAAc,qBAAqB,MAAM,KAAK,WAAW,MAAM,SAAQ,CAAE;AAC9E,SAAK,wBAAwB;AAC7B,QAAI,cAAc,KAAK,QAAQ;AAC7B,WAAK,YAAW;AAChB,WAAK,cAAa;IACpB;EACF;EAEA,uBAAoB;AAClB,QAAI,KAAK,uBAAuB;AAC9B;IACF;AACA,SAAK,gBAAgB,KAAK,cAAc,uBAAsB,CAAE;EAClE;EAEQ,yBAAsB;AAC5B,QAAI,CAAC,KAAK,uBAAuB;AAC/B,WAAK,gBAAgB,KAAK,aAAY,EAAG,uBAAsB,CAAE;IACnE;AACA,SAAK,iBAAgB;AACrB,SAAK,YAAW;EAClB;EAEQ,gBAAa;AACnB,SAAK,eAAc;AACnB,SAAK,YAAW;AAChB,UAAM,SAAS,KAAK;AACpB,WAAO,SAAS,EAAC,SAAS,kBAAkB,YAAY,KAAK,QAAQ,IAAI,YAAU,OAAO,gBAAe,CAAE,CAAC,EAAC,CAAC;AAC9G,eAAW,UAAU,KAAK,SAAS;AACjC,aAAO,kBAAkB,MAAM;IACjC;EACF;EAEQ,iBAAc;AACpB,SAAK,mBAAmB,EAAE,EAAE,KAAK,MAAM,KAAK,cAAa,GAAI,QAAQ,KAAK;EAC5E;EAEA,OAAO,qBAAkB;AAGvB,WAAO;MACL;MACA;MACA;MACA;MACA;MACA;MACA;MACA;;EAEJ;EAEQ,cAAW;AACjB,UAAM,UAAsB,yBAAY,gBAAgB,SAAQ,EAAG,QAAQ,KAAK,aAAa;AAC7F,UAAM,qBAAqB,UAAU,QAAQ,UAAU,KAAK;AAE5D,eAAW,cAAc,mBAAkB,mBAAkB,GAAI;AAC/D,UAAI,WAAW,QAAQ,kBAAkB,GAAG;AAC1C,aAAK,QAAQ,KAAK,IAAI,WAAW,oBAAoB,IAAI,CAAC;MAC5D;IACF;AAEA,SAAK;MAAwB;;IAAA;EAC/B;EAEQ,iBAAc;AACpB,eAAW,UAAU,KAAK,SAAS;AACjC,aAAO,QAAO;IAChB;AACA,SAAK,UAAU,CAAA;EACjB;EAEQ,mBAAgB;AACtB,UAAM,UAAsB,yBAAY,gBAAgB,SAAQ,EAAG,QAAQ,KAAK,aAAa;AAC7F,QAAI,YAAY,KAAK,qBAAqB;AACxC;IACF;AACA,SAAK,mBAAkB;AACvB,SAAK,sBAAsB;AAC3B,SAAK,uBAAsB;AAC3B,SAAK,eAAc;AACnB,SAAK,cAAa;EACpB;EAEQ,iBAAc;AACpB,UAAM,WAAW,KAAK,YAAW;AACjC,UAAM,EAAC,OAAM,IAAI,KAAK;AACtB,WAAO,SAAS,EAAC,SAAS,eAAe,GAAG,YAAY,OAAO,QAAQ,CAAC,EAAC,CAAC;EAC5E;EAEQ,cAAW;AACjB,SAAK,YAAY,KAAK,sBAAqB,CAAE;EAC/C;EAEQ,gBAAgB,SAA0C;AAChE,QAAI,KAAK,WAAW,MAAM,IAAI,SAAQ,MAAO,QAAQ,MAAM;AACzD,WAAK,KAAK,sBAAsB,QAAQ,QAAQ,OAAO,CAAC;IAC1D;EACF;EAEmB,4BACf,aAAyC,YAAoB,cAAoB;AACnF,UAAM,4BAA4B,aAAa,YAAY,YAAY;AACvE,gBAAY,sBAAsB,KAAK,aAAa;AACpD,UAAM,WAAW,KAAK,2BAA2B,YAAY,YAAY;AACzE,gBAAY,sBACR,IAAc,yBAAa,WAAW,KAAK,eAAe,SAAS,YAAY,SAAS,YAAY,CAAC;AACzG,eAAW,UAAU,KAAK,SAAS;AACjC,aAAO,4BAA4B,aAAa,YAAY,YAAY;IAC1E;EACF;EAEmB,8BAA8B,aAAyC,YAAkB;AAC1G,UAAM,8BAA8B,aAAa,UAAU;AAC3D,eAAW,UAAU,KAAK,SAAS;AACjC,aAAO,8BAA8B,aAAa,UAAU;IAC9D;EACF;EAEA,UAAO;AACL,SAAK,oBAAoB,QAAO;AAChC,SAAK,eAAc;AACnB,SAAK,mBAAkB;AACvB,SAAK,WAAW,OAAO,QAAO;AAC9B,SAAK,OAAM;AACX,IAAO,kBAAS,SAAS,SAAQ,EAC5B,cAAc,uCAAuC,EACrD,qBAAqB,KAAK,6BAA6B,IAAI;EAClE;EAEQ,eAAe,OAA0E;AAC/F,UAAM,EAAC,OAAM,IAAI,KAAK,YAAY,gBAAgB,OAAO,MAAM,MAAM,iBAAiB,KAAK;AAC3F,QAAI,eAAe;AACjB,YAAM,UAAU,KAAK,cAAc,MAAM,IAAI;AAC7C,aAAO,SAAS,EAAC,SAAS,eAAe,GAAG,cAAc,SAAS,IAAI,OAAO,CAAC,EAAC,CAAC;IACnF;EACF;EAEQ,iBAAiB,OAA0E;AACjG,UAAM,EAAC,OAAM,IAAI,KAAK,YAAY,gBAAgB,OAAO,MAAM,MAAM,iBAAiB,KAAK;AAC3F,QAAI,eAAe;AACjB,YAAM,UAAU,KAAK,cAAc,MAAM,IAAI;AAC7C,aAAO,SAAS,EAAC,SAAS,eAAe,GAAG,cAAc,SAAS,OAAO,OAAO,CAAC,EAAC,CAAC;IACtF;EACF;EAEQ,oBAAoB,OAAkD;AAC5E,eAAW,UAAU,KAAK,SAAS;AACjC,aAAO,kBAAkB,MAAM,MAA+C,KAAK,UAAU;IAC/F;EACF;EAES,MAAM,eAAY;AACzB,UAAM,mBAAmB,MAAM,MAAM,aAAY;AACjD,UAAM,oBAAoB,CAAA;AAC1B,eAAW,UAAU,KAAK,SAAS;AACjC,uBAAiB,KAAK,GAAG,OAAO,iBAAgB,CAAE;AAClD,wBAAkB,KAAK,GAAG,OAAO,kBAAiB,CAAE;IACtD;AAEA,QAAI,CAAC,kBAAkB,QAAQ;AAC7B,aAAO;IACT;AAEA,WAAO,CAAC,GAAG,kBAAkB,IAAO,aAAQ,iBAAiB,IAAI,GAAG,GAAG,iBAAiB;EAC1F;EAEQ,uBAAuB,OAAY;AACzC,UAAM,aAAa;AACnB,UAAM,cAAc,MAAM;AAC1B,UAAM,gBAAgB,YAAY,6BAA6B,sBAAsB,KACjF,YAAY,6BAA6B,sBAAsB;AACnE,QAAI,CAAC,eAAe;AAClB,aAAO;IACT;AAEA,UAAM,eAAe,KAAK,WAAW,MAAM,MAAM,iBAAiB,KAAK;AACvE,QAAI,CAAC,gBAAgB,aAAa,SAAS,KAAK,WAAW,GAAG;AAC5D,aAAO;IACT;AACA,UAAM,EAAC,OAAM,IAAI,KAAK;AACtB,UAAM,WAAW,OAAO,YAAY,UAAU;AAC9C,QAAI,aAAa,MAAM;AACrB,aAAO;IACT;AACA,UAAM,OAAO,OAAO,MAAM,IAAI,OAAO,QAAQ;AAC7C,QAAI,aAAa,KAAK,IAAI;AACxB,aAAO;IACT;AACA,UAAM,MAAM,aAAa,SAAS,KAAK,KAAK,CAAAG,SAAOA,KAAI,CAAC,EAAE,WAAU,MAAO,KAAK,SAAS,CAAC;AAC1F,QAAI,CAAC,KAAK;AACR,aAAO;IACT;AACA,UAAM,SAAS,cAAc,UAAU,SAAS,sBAAsB;AACtE,UAAM,WAAW,IAAI,OAAO,SAAQ,IAAI,MAAK,MAAE,YAAqD,MAAM;AAC1G,QAAI,CAAC,SAAS,QAAQ;AACpB,aAAO;IACT;AACA,UAAM,SACF,gBAAgB,cAAc,YAAW,IAAK,IAAI,UAAU,WAAW,SAAS,WAAW,SAAS,GAAG,CAAC;AAE5G,UAAM,SAAS,gBAAgB,QAAQ;AACvC,UAAM,UAAU,SAAS,cAAc,KAAK;AAC5C,YAAQ,UAAU,IAAI,4CAA4C;AAClE,aAAS,IAAI,GAAG,IAAI,SAAS,QAAQ,KAAK;AACxC,UAAI,OAAO,CAAC,GAAG;AACb,gBAAQ,YAAY,cAAc,SAAS,CAAC,GAAG,OAAO,CAAC,CAAC,CAAC;MAC3D;IACF;AACA,WAAO;MACL,KAAK;MACL,OAAI;MAAS;MACb,MAAM,OAAO,YAAmC;AAC9C,gBAAQ,eAAe,OAAO,OAAO;AACrC,eAAO;MACT;;EAEJ;;;;;EAMA,mCAAgC;AAC9B,QAAI,KAAK,oCAAoC;AAC3C;IACF;AACA,SAAK,qCAAqC;AAE1C,UAAM,WAAkB,sBAAa,aAAa,YAAY,KAAK,cAAc,IAAG,CAAE;AACtF,UAAM,YAAmB,sBAAa,aAAa,oBAC/C,YAAY,IAAI,KAAK,cAAc,YAAW,EAAG,gBAAe,GACtD,qBAAU,WAAW,KAAK,cAAc,QAAO,CAAE,GAAG,KAAK,cAAc,IAAG,EAAG,WAAW,YAAY,GAC9G,KAAK,cAAc,IAAG,EAAG,WAAW,aAAa,CAAC;AACtD,IAAK,kBAAY,uBAAuB,SAAS;EACnD;;AAGF,SAAS,oBAAoB,OAA2C;AACtE,MAAI,UAAK,SAAiD;AACxD,WAAO,EAAC,OAAO,qBAAqB,OAAO,QAAQ,QAAQ,QAAQ,UAAU,sBAAqB;EACpG;AACA,MAAI,UAAK,WAAmD;AAC1D,WAAO,EAAC,OAAO,uBAAuB,OAAO,QAAQ,QAAQ,QAAQ,UAAU,iBAAgB;EACjG;AACA,MAAI,UAAK,SAAiD;AACxD,WAAO,EAAC,OAAO,uBAAuB,OAAO,QAAQ,QAAQ,QAAQ,UAAU,2BAA0B;EAC3G;AACA,SAAO,EAAC,OAAO,qBAAqB,OAAO,QAAQ,QAAQ,QAAQ,UAAU,sBAAqB;AACpG;AAEA,SAAS,sBAAsB,OAA2C;AACxE,UAAQ,OAAO;IACb,KAAA;AACE,aAAO;IACT,KAAA;AACE,aAAO;IACT,KAAA;AACE,aAAO;EACX;AACF;AAEA,SAAS,uBAAuB,GAAe,GAAa;AAC1D,QAAM,uBAAuB;IAC3B;MAAA;;IAAA,GAA8C;IAC9C;MAAA;;IAAA,GAAgD;IAChD;MAAA;;IAAA,GAA8C;;AAEhD,SAAO,qBAAqB,EAAE,MAAK,CAAE,IAAI,qBAAqB,EAAE,MAAK,CAAE;AACzE;AAEA,SAAS,sBAAsB,SAAmB;AAChD,MAAI,QAAQ,kBAAgC,uCAAyB,cAAc;AACjF,WAAO;MACL,GAAgB,0BAAa,qBAAqB,QAAQ,OAAO,aAAY,CAAE;MAC/E,OAAO;MACP,QAAQ;;EAEZ;AACA,SAAO,oBAAoB,QAAQ,MAAK,CAAE;AAC5C;AAUA,IAAM,oBAAoB,IAAe,wBAAW;AAQpD,IAAM,aAAN,MAAgB;EACL;EACA;EACA;EAET,YAAY,QAAwC,YAAoB,cAAoB;AAC1F,SAAK,SAAS;AACd,SAAK,cAAc;AACnB,SAAK,gBAAgB;EACvB;EAEA,QAAK;AACH,WAAO,KAAK,OAAO,MAAK;EAC1B;EAEA,OAAI;AACF,WAAO,KAAK,OAAO,KAAI;EACzB;EAEA,eAAY;AACV,WAAO,KAAK,OAAO,aAAY;EACjC;EAEA,aAAU;AACR,WAAO,KAAK;EACd;EAEA,eAAY;AACV,WAAO,KAAK;EACd;EAEA,QAAQ,MAAgB;AACtB,WAAO,KAAK,OAAO,QAAQ,KAAK,MAAM;EACxC;;AAGF,SAAS,WAAW,MAAsB,SAAmB;AAC3D,QAAM,aAAa,QAAQ,WAAU;AACrC,MAAI,IAAI;AACR,SAAO,IAAI,KAAK,QAAQ,KAAK;AAC3B,UAAM,OAAO,KAAK,CAAC,EAAE,CAAC,EAAE,WAAU,IAAK;AACvC,QAAI,SAAS,GAAG;AACd,WAAK,CAAC,IAAI,KAAK,CAAC,EAAE,OAAO,OAAO;AAChC,aAAO;IACT;AACA,QAAI,OAAO,GAAG;AACZ;IACF;EACF;AACA,OAAK,OAAO,GAAG,GAAG,CAAC,OAAO,CAAC;AAC3B,SAAO;AACT;AAEA,SAAS,cAAc,MAAsB,SAAmB;AAC9D,WAAS,IAAI,GAAG,IAAI,KAAK,QAAQ,KAAK;AACpC,QAAI,KAAK,CAAC,EAAE,CAAC,EAAE,WAAU,MAAO,QAAQ,WAAU,GAAI;AACpD,YAAM,YAAY,KAAK,CAAC,EAAE,OAAO,OAAK,CAAC,EAAE,QAAQ,OAAO,CAAC;AACzD,UAAI,UAAU,QAAQ;AACpB,aAAK,CAAC,IAAI;MACZ,OAAO;AACL,aAAK,OAAO,GAAG,CAAC;MAClB;AACA;IACF;EACF;AACF;AAEA,IAAM,cAAN,MAAM,aAAW;EACM;EAArB,YAAqB,MAAoB;AAApB,SAAA,OAAA;EACrB;EAEA,OAAO,OAAO,UAAsB;AAClC,UAAM,OAAuB,CAAA;AAC7B,eAAW,WAAW,UAAU;AAC9B,iBAAW,MAAM,OAAO;IAC1B;AACA,WAAO,IAAI,aAAY,IAAI;EAC7B;EAEA,OAAO,SAAmB;AACxB,UAAM,OAAO,KAAK,KAAK,MAAK;AAC5B,kBAAc,MAAM,OAAO;AAC3B,WAAO,IAAI,aAAY,IAAI;EAC7B;EAEA,IAAI,SAAmB;AACrB,WAAO,IAAI,aAAY,WAAW,KAAK,KAAK,MAAK,GAAI,OAAO,CAAC;EAC/D;;AAGF,IAAM,iBAA4B,wBAAY,OAAM;AAEpD,IAAM,gBAA2B,uBAAW,KAAK,EAAC,OAAO,mBAAkB,CAAC;AAG5E,IAAM,gBAAN,cAAuC,uBAAU;EAC1B;EAArB,YAAqB,UAAsB;AACzC,UAAK;AADc,SAAA,WAAA;EAErB;EAES,GAAG,OAAoB;AAC9B,WAAO,MAAM,aAAa,KAAK;EACjC;EAEA,QAAK;AACH,UAAM,OAAO,SAAS,cAAc,MAAM;AAC1C,SAAK,UAAU,IAAI,gBAAgB;AACnC,UAAM,YAAY,KAAK,SAAS;MAAO,SAAO,IAAI,MAAK,MAAE;;IAA+C;AACxG,QAAI,UAAU,QAAQ;AACpB,YAAM,WAAW,UAAU,KAAK,sBAAsB,EAAE,UAAU,SAAS,CAAC;AAC5E,YAAM,YAAY,KAAK,YAAY,IAAe,iBAAK,KAAI,CAAE;AAC7D,gBAAU,OAAO,oBAAoB,SAAS,MAAK,CAAE;AACrD,gBAAU,UAAU,IAAI,sBAAsB;IAChD;AACA,UAAM,QAAQ,KAAK,SAAS;MAAK,OAAK,EAAE,MAAK,MAAE;;IAA+C;AAC9F,QAAI,OAAO;AACT,YAAM,YAAY,KAAK,YAAY,IAAe,iBAAK,KAAI,CAAE;AAC7D,gBAAU,OAAO,sBAAsB,KAAK;AAC5C,gBAAU,UAAU,IAAI,sBAAsB;AAC9C,gBAAU,iBAAiB,SAAS,OAAO,MAAM,aAAY,KAAM,KAAK,KAAI,CAAE;IAChF;AACA,WAAO;EACT;;AAGF,IAAM,wBAAN,MAAM,uBAAqB;EACJ;EAAgC;EAArD,YAAqB,UAAgC,aAAqC;AAArE,SAAA,WAAA;AAAgC,SAAA,cAAA;EACrD;EAEA,OAAO,OAAO,UAAuB,KAAoB;AACvD,UAAM,UAAU,IAAe,4BAAe;AAC9C,eAAW,OAAO,SAAS,MAAM;AAC/B,YAAM,OAAO,IAAI,KAAK,KAAK,IAAI,IAAI,OAAO,IAAI,CAAC,EAAE,WAAU,IAAK,CAAC,CAAC;AAClE,YAAM,SAAS,IAAI,OAAO,CAAC,KAAK,QAAQ,KAAK,IAAI,KAAK,IAAI,aAAY,KAAM,CAAC,GAAG,KAAK,MAAM;AAC3F,UAAI,SAAS,KAAK,QAAQ;AACxB,gBAAQ,IAAI,KAAK,OAAO,QAAQ,KAAK,IAAI,aAAa;MACxD;AACA,cAAQ,IAAI,KAAK,IAAI,KAAK,IAAe,uBAAW,OAAO,EAAC,MAAM,GAAG,QAAQ,IAAI,cAAc,GAAG,EAAC,CAAC,CAAC;IACvG;AACA,WAAO,IAAI,uBAAsB,UAAU,QAAQ,OAAM,CAAE;EAC7D;EAEA,MAAM,IAA0B;AAC9B,QAAI,SAAgC;AACpC,QAAI,GAAG,YAAY;AACjB,eAAS,IAAI,uBAAsB,KAAK,UAAU,KAAK,YAAY,IAAI,GAAG,OAAO,CAAC;IACpF;AACA,eAAW,UAAU,GAAG,SAAS;AAC/B,UAAI,OAAO,GAAG,cAAc,GAAG;AAC7B,iBAAS,uBAAsB,OAAO,OAAO,OAAO,GAAG,MAAM,GAAG;MAClE;IACF;AACA,WAAO;EACT;;AAGF,IAAM,kBAA6B,uBAAW,OAA8B;EAC1E,OAAO,OAAK;AACV,WAAO,sBAAsB,OAAO,IAAI,YAAY,CAAA,CAAE,GAAG,MAAM,GAAG;EACpE;EACA,OAAOC,QAAO,IAAE;AACd,WAAOA,OAAM,MAAM,EAAE;EACvB;EACA,SAAS,WAAoB,iBAAK,OAAkB,uBAAW,YAAY,KAAK,OAAO,CAAAA,WAASA,OAAM,WAAW,CAAC;CACnH;AAED,SAAS,gBAAgB,UAAsB;AAC7C,QAAM,SAAS,CAAA;AACf,WAAS,IAAI,GAAG,IAAI,SAAS,QAAQ,KAAK;AACxC,WAAO,CAAC,IAAI;AACZ,aAAS,IAAI,GAAG,KAAK,GAAG,KAAK;AAC3B,UAAI,SAAS,CAAC,EAAE,QAAQ,SAAS,CAAC,CAAC,GAAG;AACpC,eAAO,CAAC;AACR;MACF;IACF;EACF;AACA,SAAO;AACT;AAEA,SAAS,cAAc,SAAqB,OAAa;AACvD,QAAM,UAAU,SAAS,cAAc,KAAK;AAC5C,UAAQ,UAAU,IAAI,yBAAyB;AAC/C,UAAQ,MAAM,UAAU;AACxB,UAAQ,MAAM,aAAa;AAC3B,UAAQ,MAAM,MAAM;AAEpB,MAAI,UAAU,GAAG;AACf,UAAM,OAAO,QAAQ,YAAY,IAAe,iBAAK,KAAI,CAAE;AAC3D,SAAK,OAAO,sBAAsB,OAAO;AACzC,SAAK,UAAU,IAAI,8BAA8B;AACjD,SAAK,iBAAiB,SAAS,OAAO,QAAQ,aAAY,KAAM,KAAK,KAAI,CAAE;EAC7E,OAAO;AACL,UAAM,qBAAqB,QAAQ,YAAY,mBAAmB,sCAAsC;AACxG,uBAAmB,cAAc,OAAO,KAAK;AAC7C,uBAAmB,MAAM,aAAa;AACtC,uBAAmB,OAAO,sBAAsB,QAAQ,MAAK,CAAE;EACjE;AACA,QAAM,iBAAiB,QAAQ,YAAY,KAAK;AAChD,aAAW,QAAQ,QAAQ,KAAI,EAAG,MAAM,IAAI,GAAG;AAC7C,mBAAe,YAAY,KAAK,EAAE,cAAc;EAClD;AAEA,SAAO;AACT;AAEA,IAAM,kBAA6B,uBAAW,UAAU;EACtD,uBAAuB;IACrB,iBAAiB;IACjB,OAAO;;EAET,uBAAuB;IACrB,SAAS;;EAGX,qBAAqB;IACnB,iBAAiB;IACjB,kBAAkB;IAClB,oBAAoB;IACpB,eAAe;;EAGjB,mBAAmB;IACjB,QAAQ;IACR,SAAS;MACP,eAAe;MACf,YAAY;;;EAIhB,gDAAgD;IAC9C,WAAW;IACX,cAAc;;CAEjB;AAED,SAAS,YAAY,iBAA6B;AAChD,SAAO;IACL,gBAAgB,KAAK,WAAS,sBAAsB,OAAO,YAAY,OAAO,eAAe,GAAG,MAAM,GAAG,CAAC;IAC1G;;AAEJ;;;ADjxBA,IAAMC,cAAY;;;;;EAKhB,iCAAiC;;;;EAIjC,yBAAyB;;;;;;;EAOzB,2DACI;;;;;;;;EAQJ,yDACI;;AAEN,IAAMC,SAAY,YAAK,kBAAkB,2CAA2CD,WAAS;AAC7F,IAAME,eAAkB,YAAK,mBAAmB,KAAK,QAAWD,MAAI;AAOpE,IAAI,QAAQ;AAEN,IAAO,wBAAP,cAA4C,uBAAc,cAAyB;EACtE;EACA;EACT;EACS;EACA;EACA;EACA;EACA;EACT;EACA;EACA;EACA;EACR,YACI,UAAyC,SACzC,oBAA6B,2BAAmC;AAClE,UAAK;AACL,SAAK,WAAW;AAEhB,SAAK,aAAa,IAAO,gBAAW,WAAU;AAC9C,SAAK,WAAW,sBAAsB,oBAAoB,yBAAyB;AACnF,SAAK,WAAW,eAAe,IAAI,2BAA2B,IAAI,CAAC;AAEnE,SAAK,WAAW,iBAAiB,IAAI;AACrC,SAAK,WAAW,mBAAmB,MAAM,IAAI;AAE7C,SAAK,WAAW,iBAAoB,gBAAW,OAAO,WAAW,KAAK,WAAW,IAAI;AACrF,SAAK,WAAW,iBAAoB,gBAAW,OAAO,aAAa,KAAK,aAAa,IAAI;AAEzF,SAAK,WAAW,cAAa,EAAG,aAC5B,SACA,GAAiB,uBAAQ,KAAK,EAAE,MAAM,EAAC,SAAS,qDAAoD,CAAC,CAAC,EAAE;AAE5G,IAAY,yBAAY,gBAAgB,SAAQ,EAAG,iBACnC,yBAAY,OAAO,gBAAgB,KAAK,kBAAkB,IAAI;AAC9E,IAAY,yBAAY,gBAAgB,SAAQ,EAAG,iBACnC,yBAAY,OAAO,gBAAgB,KAAK,kBAAkB,IAAI;AAC9E,IAAY,uCAA0B,0BAA0B,SAAQ,EAAG,iBAAgB,yCAEvF,KAAK,0CAA0C,IAAI;AAEvD,SAAK,SAAS,oBAAI,IAAG;AACrB,SAAK,QAAQ,oBAAI,IAAG;AAEpB,SAAK,+BAA+B;AACpC,SAAK,UAAU,QAAQ,WAAW,KAAK,6BAA6B,IAAG,CAAE;AACzE,SAAK,oBAAoB,oBAAI,IAAG;AAChC,SAAK,mBAAmB,oBAAI,IAAG;AAC/B,SAAK,gBAAgB;EACvB;EAEQ,iBAAiB,OAAsF;AAE7G,UAAM,UAAU,MAAM;AACtB,SAAK,gBAAgB,QAAQ,UAAU;AAEvC,UAAM,eAAe,KAAK,OAAO,IAAI,QAAQ,OAAO;AACpD,QAAI,kBAAkB,KAAK,OAAO,IAAI,QAAQ,UAAU;AAExD,UAAM,uBAAuB,KAAK,wBAAwB,QAAQ;AAClE,UAAM,aAAa,eAAe,QAAQ,OAAO;AACjD,UAAM,wBAAwB,KAAK,QAAQ,eAAe,UAAU;AACpE,UAAM,0BAA0B,KAAK,QAAQ,iBAAiB,UAAU;AACxE,SAAK,QAAQ,OAAO,UAAU;AAE9B,QAAI,CAAC,cAAc;AACjB;IACF;AAEA,QAAI,CAAC,iBAAiB;AACpB,YAAM,cAAc,KAAK,WAAW,QAAQ,YAAY;AACxD,YAAM,WAAW,KAAK,WAAW,SAAS,YAAY;AACtD,UAAI,uBAAuB,mBAAmB;AAC5C,aAAK,SAAS,yBAAyB,aAAa,QAAQ,UAAU;AACtE,0BAAkB,KAAK,cAAc,QAAQ,YAAY,OAAO,UAAU,WAAW;MACvF,OAAO;AACL,0BAAkB,KAAK,cAAc,QAAQ,YAAY,OAAO,QAAQ;AACxE,cAAM,oBAAqB,KAAK,WAAW,QAAQ,eAAe;AAClE,aAAK,wBAAwB,mBAAmB,uBAAuB,uBAAuB;MAChG;IACF;AAEA,SAAK,UAAU,CAAC,YAAY,GAAG,IAAI;AACnC,QAAI,sBAAsB;AACxB,WAAK,WAAW,UAAU,iBAAiB,KAAK;IAClD;AAEA,SAAK,cAAa;EACpB;EAEA,yCACI,OAA+E;AACjF,SAAK,gBAAgB,MAAM,IAAI;EACjC;EAEQ,iBAAiB,OAAsF;AAE7G,UAAM,UAAU,MAAM;AACtB,SAAK,gBAAgB,QAAQ,UAAU;EACzC;EAEA,IAAI,OAAI;AACN,WAAO,KAAK;EACd;EAEA,IAAI,cAAW;AACb,WAAO,KAAK,WAAW;EACzB;EAEA,YAAS;AACP,WAAO,KAAK,WAAW,SAAQ;EACjC;EAEA,cAAW;AACT,WAAO,KAAK,WAAW,YAAW;EACpC;EAEA,eAAY;AACV,WAAO,KAAK,WAAW,aAAY;EACrC;EAEA,KAAK,eAAsB;AACzB,SAAK,WAAW,KAAK,aAAa;EACpC;EAEA,SAAS,cAAiD;AACxD,UAAM,UAAsB,yBAAY,gBAAgB,SAAQ,EAAG,QAAQ,YAAY;AACvF,mBAAe,UAAU,QAAQ,aAAa;AAE9C,UAAM,QAAW,aAAQ,QAAQ,SAAQ,EAAG,OAAO,WAAW;AAI9D,QAAI,OAAO,mBAAkB,GAAI,cAAc,KAAK,wBAAwB,gBACxE,OAAO,oBAAmB,MAAO,cAAc;AACjD,MAAO,qBAAY,UAAU,sBAAsB,aAAa,YAAY,IAAI,CAAC;IACnF,OAAO;AACL,WAAK,cAAc,cAAc,IAAI;IACvC;EACF;EAEA,UAAU,cAAiD;AACzD,UAAME,SAAQ,KAAK,OAAO,IAAI,YAAY;AAC1C,QAAI,CAACA,QAAO;AACV;IACF;AACA,SAAK,UAAU,CAACA,MAAK,CAAC;EACxB;EAEA,gBAAa;AACX,SAAK,UAAU,KAAK,WAAW,OAAM,CAAE;EACzC;EAEA,uBAAoB;AAClB,UAAM,SAAS,CAAA;AACf,eAAW,EAAC,KAAK,aAAY,KAAK,KAAK,QAAQ,KAAI,GAAI;AACrD,YAAM,eAAe,KAAK,kBAAkB,IAAI,GAAG;AACnD,UAAI,iBAAiB,UAAa,aAAa,YAAW,MAAO,cAAc;AAC7E,eAAO,KAAK,YAAY;MAC1B;IACF;AACA,WAAO;EACT;EAEA,gBAAa;AACX,SAAK,WAAW,cAAa;EAC/B;EAEA,gBAAa;AACX,SAAK,WAAW,cAAa;EAC/B;EAEQ,mBAAgB;AACtB,QAAI,CAAC,KAAK,eAAe,EAAE,KAAK,uBAAmC,yBAAY,kBAAkB;AAC/F;IACF;AACA,SAAK,YAAY,iBAAgB,gBAA+C,KAAK,gBAAgB,IAAI;AACzG,SAAK,YAAY,iBAAgB,gBAA+C,KAAK,iBAAiB,IAAI;EAC5G;EAEQ,sBAAmB;AACzB,QAAI,CAAC,KAAK,eAAe,EAAE,KAAK,uBAAmC,yBAAY,kBAAkB;AAC/F;IACF;AACA,SAAK,YAAY,oBAAmB,gBAA+C,KAAK,gBAAgB,IAAI;AAC5G,SAAK,YAAY,oBAAmB,gBAA+C,KAAK,iBAAiB,IAAI;EAC/G;EAEQ,kBAAe;AACrB,QAAI,KAAK,uBAAmC,yBAAY,iBAAiB;AACvE,UAAI,KAAK,aAAa;AACpB,qBAAa,KAAK,WAAW;MAC/B;AACA,WAAK,cAAc,OAAO,WAAW,MAAM,KAAK,6BAA6B,IAAI,KAAK,QAAQ,SAAQ,CAAE,GAAG,GAAG;AAC9G,UAAI,KAAK,qBAAqB;AAC5B,cAAM,EAAC,OAAM,IAAI,KAAK,YAAY;AAClC,cAAM,WAAW,OAAO,kBAAkB,OAAO,UAAU,sBAAqB,EAAG,MAAM,OAAO,WAAW;AAC3G,cAAM,UAAU,OAAO,MAAM,IAAI,OAAO,SAAS,IAAI,EAAE,SAAS;AAChE,aAAK,QAAQ,uBAAuB,eAAe,KAAK,mBAAmB,GAAG,OAAO;MACvF;IACF;EACF;EAEQ,eAAe,EAAC,MAAM,OAAM,GAA6D;AAC/F,QAAI,OAAO,cAAc,OAAO,cAAc;AAC5C,YAAM,EAAC,KAAI,IAAI,OAAO,MAAM;AAC5B,YAAM,WAAW,OAAO,MAAM,IAAI,OAAO,KAAK,IAAI,GAAG,SAAS,OAAO,MAAM,IAAI,OAAO,KAAK,EAAE;AAC7F,YAAM,QAAQ,IAAc,qBAAU,UAClC,SAAS,SAAS,GAAG,KAAK,OAAO,SAAS,MAAM,OAAO,SAAS,GAAG,KAAK,KAAK,OAAO,IAAI;AAC5F,UAAI,KAAK,qBAAqB;AAC5B,aAAK,QAAQ,qBAAqB,eAAe,KAAK,mBAAmB,GAAG,KAAK;MACnF;AACA,WAAK,6BAA6B,IAAI,KAAK,QAAQ,SAAQ,CAAE;AAE7D,UAAI,KAAK,qBAAqB;AAC5B,QAAW,2BAAgB,gBAAgB,SAAQ,EAAG,uBAClD,KAAK,oBAAoB,IAAG,GAAI,KAAK;MAC3C;IACF;EACF;EAEQ,cAAc,cAAmD,aAAqB;AAC5F,QAAI,KAAK,eAAe;AACtB;IACF;AACA,UAAM,sBAAsB,KAAK,sBAAsB,YAAY;AACnE,UAAM,UAAsB,yBAAY,gBAAgB,SAAQ,EAAG,QAAQ,YAAY;AACvF,mBAAe,UAAU,QAAQ,aAAa;AAC9C,QAAI,KAAK,wBAAwB,cAAc;AAC7C;IACF;AAEA,SAAK,oBAAmB;AACxB,SAAK,sBAAsB;AAE3B,QAAI;AAGF,WAAK,gBAAgB;AACrB,YAAMA,SAAQ,KAAK,OAAO,IAAI,mBAAmB,KAAK,KAAK,cAAc,qBAAqB,WAAW;AAEzG,WAAK,WAAW,UAAUA,QAAO,WAAW;IAC9C;AACE,WAAK,gBAAgB;IACvB;AAEA,QAAI,aAAa;AACf,WAAK,2BAA0B;IACjC;AAEA,UAAM,eAAe,KAAK;AAC1B,SAAK,cAAc,KAAK;AACxB,SAAK,iBAAgB;AAErB,QAAI,KAAK,uBAAuB,qBAAqB,KAAK,YAAY,aAAY,MAAO,cAAc;AAIrG,WAAK,SAAS,yBAAyB,KAAK,aAAa,YAAY;AACrE,UAAI,aAAa,QAAO,EAAG,KAAI,MAAiB,sBAAU,aAAa,YAAY;AAEjF,qBAAa,YAAW;MAC1B;IACF;AAEA,UAAM,YAAY;MAChB,aAAa,KAAK;MAClB,aAAa,KAAK;MAClB;MACA;;AAEF,SAAK,yBAAwB,kBAAyB,SAAS;EACjE;EAEQ,aAAa,cAAiD;AACpE,UAAM,uBAAuB;AAC7B,QAAI,QAAiB,0BAAgB,WAAW,aAAa,YAAY,IAAI,GAAG,oBAAoB;AACpG,QAAI,aAAa,QAAO,GAAI;AAC1B,eAAS;IACX;AACA,WAAO;EACT;EAEQ,cAAc,IAAY,WAAsB;AACtD,UAAM,eAAe,KAAK,MAAM,IAAI,EAAE;AACtC,QAAI,CAAC,cAAc;AACjB,aAAO;IACT;AACA,UAAM,eAAe,aAAa,QAAO,KAAM,aAAa,QAAO,EAAG,kBAAiB;AAEvF,QAAI,CAAC,gBAAgB,QAAQD,aAAWF,YAAU,iCAAiC,EAAC,KAAK,aAAa,KAAI,EAAE,CAAC,CAAC,GAAG;AAC/G,mBAAa,iBAAgB;AAC7B,UAAI,WAAW;AACb,aAAK,WAAW,UAAU,WAAW,IAAI;MAC3C;AACA,WAAK,WAAW,SAAS,IAAI,IAAI;AACjC,aAAO;IACT;AACA,WAAO;EACT;EAEA,UAAU,KAAe,qBAA6B;AACpD,UAAM,YAAY,CAAA;AAClB,UAAM,YAAY,CAAA;AAClB,aAAS,IAAI,GAAG,IAAI,IAAI,QAAQ,EAAE,GAAG;AACnC,YAAM,KAAK,IAAI,CAAC;AAChB,YAAM,eAAe,KAAK,MAAM,IAAI,EAAE;AACtC,UAAI,cAAc;AAChB,YAAI,CAAC,uBAAuB,aAAa,QAAO,GAAI;AAClD,oBAAU,KAAK,EAAE;QACnB,OAAO;AACL,oBAAU,KAAK,EAAE;QACnB;MACF;IACF;AACA,QAAI,UAAU,QAAQ;AACpB,WAAK,WAAW,UAAU,UAAU,CAAC,GAAG,IAAI;IAC9C;AACA,SAAK,WAAW,UAAU,WAAW,IAAI;AACzC,aAAS,IAAI,GAAG,IAAI,UAAU,QAAQ,EAAE,GAAG;AACzC,YAAM,YAAY,IAAI,IAAI,UAAU,SAAS,UAAU,IAAI,CAAC,IAAI;AAChE,UAAI,CAAC,KAAK,cAAc,UAAU,CAAC,GAAG,SAAS,GAAG;AAChD;MACF;IACF;EACF;EAEA,cAAcG,QAAe,aAAuC;AAClE,UAAM,eAAe,KAAK,MAAM,IAAIA,MAAK;AACzC,QAAI,cAAc;AAChB,kBAAY,sBAAsB,YAAY;IAChD;EACF;EAEQ,sBAAsB,cAAiD;AAG7E,UAAM,qBAAqB,KAAK,iBAAiB,IAAI,aAAa,kBAAiB,CAAE;AACrF,QAAI,oBAAoB;AAEtB,aAAO;IACT;AACA,SAAK,iBAAiB,IAAI,aAAa,kBAAiB,GAAI,YAAY;AACxE,SAAK,kBAAkB,IAAI,aAAa,IAAG,GAAI,YAAY;AAC3D,WAAO;EACT;EAEA,gBAAgB,cAAiD;AAC/D,UAAM,sBAAsB,KAAK,sBAAsB,YAAY;AACnE,UAAM,aAAa,wBAAwB;AAC3C,UAAM,UAAsB,yBAAY,gBAAgB,SAAQ,EAAG,QAAQ,mBAAmB;AAC9F,mBAAe,UAAU,QAAQ,aAAa;AAE9C,QAAI,cAAc,aAAa,QAAO,EAAG,KAAI,MAAiB,sBAAU,aAAa,YAAY;AAC/F,mBAAa,YAAW;IAC1B;AAEA,QAAI,KAAK,qBAAqB,kBAAiB,MAAO,aAAa,kBAAiB,GAAI;AACtF;IACF;AAEA,UAAM,QAAQ,KAAK,QAAQ,MAAM,eAAe,YAAY,CAAC;AAC7D,QAAI,UAAU,IAAI;AAChB;IACF;AAEA,QAAI,CAAC,KAAK,OAAO,IAAI,YAAY,GAAG;AAClC,WAAK,cAAc,cAAc,KAAK;IACxC;AAGA,QAAI,CAAC,OAAO;AACV,WAAK,cAAc,cAAc,KAAK;AACtC;IACF;AAEA,QAAI,CAAC,KAAK,qBAAqB;AAC7B;IACF;AAEA,UAAM,2BAAoC,kCAAwB,uBAAuB,KAAK,mBAAmB;AACjH,UAAM,yBAAkC,kCAAwB,uBAAuB,YAAY;AACnG,QAAI,KAAK,QAAQ,MAAM,eAAe,KAAK,mBAAmB,CAAC,KAAK,4BAChE,CAAC,wBAAwB;AAC3B,WAAK,cAAc,cAAc,KAAK;IACxC;EACF;EAEA,mBAAmB,cAAiD;AAClE,SAAK,oBAAoB,CAAC,YAAY,CAAC;EACzC;EAEA,oBAAoB,eAAoD;AACtE,UAAM,SAAS,CAAA;AACf,eAAW,gBAAgB,eAAe;AACxC,YAAMA,SAAQ,KAAK,OAAO,IAAI,YAAY;AAC1C,UAAIA,QAAO;AACT,eAAO,KAAKA,MAAK;MACnB;AACA,UAAI,KAAK,kBAAkB,IAAI,aAAa,IAAG,CAAE,MAAM,cAAc;AACnE,aAAK,kBAAkB,OAAO,aAAa,IAAG,CAAE;MAClD;AACA,UAAI,KAAK,iBAAiB,IAAI,aAAa,kBAAiB,CAAE,MAAM,cAAc;AAChF,aAAK,iBAAiB,OAAO,aAAa,kBAAiB,CAAE;MAC/D;IACF;AACA,SAAK,WAAW,UAAU,MAAM;EAClC;EAEQ,yBAAyB,cAAiD;AAChF,SAAK,QAAQ,OAAO,eAAe,YAAY,CAAC;AAChD,SAAK,cAAa;EACpB;EAEQ,6BAA0B;AAChC,SAAK,cAAa;EACpB;EAEQ,gBAAa;AACnB,UAAM,kBAAkB,CAAA;AACxB,eAAWA,UAAS,KAAK,WAAW,iBAAiB,iCAAiC,GAAG;AACvF,YAAM,eAAe,KAAK,MAAM,IAAIA,MAAK;AACzC,UAAI,iBAAiB,QAAW;AAC9B,wBAAgB,KAAK,eAAe,YAAY,CAAC;MACnD;IACF;AACA,SAAK,QAAQ,OAAO,eAAe;AACnC,SAAK,6BAA6B,IAAI,KAAK,QAAQ,SAAQ,CAAE;EAC/D;EAEQ,eAAe,cAAiD;AACtE,mBAA2B,yBAAY,gBAAgB,SAAQ,EAAG,QAAQ,YAAY,KAAK;AAC3F,WAAO,aAAa,IAAG;EACzB;EAEQ,cACJ,cAAmD,aAAuB,OAC1E,aAA8B;AAChC,UAAM,OAAO,eAAe,KAAK,SAAS,YAAY,YAAY;AAClE,UAAM,QAAQ,KAAK,aAAa,YAAY;AAC5C,UAAM,UAAU,KAAK,eAAe,YAAY;AAEhD,UAAMA,SAAQ,KAAK,cAAa;AAChC,SAAK,OAAO,IAAI,cAAcA,MAAK;AACnC,SAAK,MAAM,IAAIA,QAAO,YAAY;AAElC,QAAI,CAAC,aAAa;AAChB,YAAM,sBAAsB,KAAK,QAAQ,eAAe,eAAe,YAAY,CAAC;AACpF,YAAM,wBAAwB,KAAK,QAAQ,iBAAiB,eAAe,YAAY,CAAC;AACxF,WAAK,wBAAwB,MAAM,qBAAqB,qBAAqB;IAC/E;AAEA,SAAK,WAAW,UAAUA,QAAO,OAAO,MAAM,SAAS,aAAa,QAAW,QAAW,OAAO,QAAQ;AAEzG,SAAK,gBAAgB,YAAY;AACjC,SAAK,yBAAyB,YAAY;AAC1C,QAAI,aAAa,UAAS,GAAI;AAC5B,WAAK,iBAAiBA,MAAK;IAC7B,WAAW,CAAC,aAAa,cAAa,GAAI;AACxC,WAAK,aAAa,mBAAkB,EAAG,KAAK,wBAAqB;AAC/D,YAAc,uBAAY,YAAY,QAAQ,kBAAkB,GAAG;AACjE,eAAK,iBAAiBA,MAAK;QAC7B;MACF,CAAC;IACH;AACA,WAAOA;EACT;EAEQ,iBAAiBA,QAAa;AACpC,UAAM,OAAO,IAAe,iBAAK,KAAI;AACrC,SAAK,OAAO,EAAC,UAAU,uBAAuB,OAAO,qBAAqB,OAAO,QAAQ,QAAQ,OAAM;AACvG,IAAG,aAAQ,QAAQ,QAAQ,MAAMD,aAAWF,YAAU,uBAAuB,CAAC;AAC9E,QAAI,KAAK,WAAW,QAAQG,MAAK,GAAG;AAClC,WAAK,WAAW,mBAAmBA,QAAO,IAAI;IAChD;EACF;EAEQ,wBACJ,YAA8B,WAA2C,iBAAwB;AACnG,UAAM,cAAc,sBAAkC,yBAAY,kBAAkB,aAAa;AACjG,QAAI,CAAC,aAAa;AAChB;IACF;AACA,QAAI,WAAW;AACb,kBAAY,aAAa,SAAS;IACpC;AACA,QAAI,OAAO,oBAAoB,UAAU;AACvC,kBAAY,aAAa,eAAe;IAC1C;EACF;EAEQ,UAAU,OAAmE;AACnF,UAAM,EAAC,OAAAA,QAAO,cAAa,IAAI,MAAM;AACrC,UAAM,eAAe,KAAK,MAAM,IAAIA,MAAK;AACzC,QAAI,KAAK,uBACL,KAAK,oBAAoB,kBAAiB,MAAO,cAAc,kBAAiB,GAAI;AACtF,WAAK,oBAAmB;AACxB,WAAK,cAAc;AACnB,WAAK,sBAAsB;IAC7B;AACA,QAAI,cAAc;AAChB,WAAK,OAAO,OAAO,YAAY;IACjC;AACA,SAAK,MAAM,OAAOA,MAAK;AAEvB,QAAI,cAAc;AAChB,WAAK,4BAA4B,YAAY;AAE7C,WAAK,yBAAwB,gBAAuB,YAAY;AAEhE,UAAI,eAAe;AACjB,aAAK,yBAAyB,YAAY;MAC5C;IACF;EACF;EAEQ,YAAY,OAAmE;AACrF,UAAM,EAAC,OAAAA,QAAO,cAAa,IAAI,MAAM;AAErC,UAAM,eAAe,KAAK,MAAM,IAAIA,MAAK;AACzC,QAAI,cAAc;AAChB,WAAK,cAAc,cAAc,aAAa;IAChD;EACF;EAEQ,yBAAyB,cAAiD;AAChF,iBAAa,iBAA2B,yBAAa,OAAO,cAAc,KAAK,0BAA0B,IAAI;AAC7G,iBAAa,iBACC,yBAAa,OAAO,oBAAoB,KAAK,gCAAgC,IAAI;AAC/F,iBAAa,iBACC,yBAAa,OAAO,sBAAsB,KAAK,kCAAkC,IAAI;EACrG;EAEQ,4BAA4B,cAAiD;AACnF,iBAAa,oBAA8B,yBAAa,OAAO,cAAc,KAAK,0BAA0B,IAAI;AAChH,iBAAa,oBACC,yBAAa,OAAO,oBAAoB,KAAK,gCAAgC,IAAI;AAC/F,iBAAa,oBACC,yBAAa,OAAO,sBAAsB,KAAK,kCAAkC,IAAI;EACrG;EAEQ,gBAAgB,cAAiD;AACvE,UAAMA,SAAQ,KAAK,OAAO,IAAI,YAAY;AAC1C,QAAIA,QAAO;AACT,YAAM,QAAQ,KAAK,aAAa,YAAY;AAC5C,YAAM,UAAU,KAAK,eAAe,YAAY;AAChD,WAAK,WAAW,eAAeA,QAAO,OAAO,OAAO;AACpD,UAAI,aAAa,UAAS,GAAI;AAC5B,cAAM,OAAO,IAAe,iBAAK,KAAI;AACrC,aAAK,OAAO,EAAC,UAAU,uBAAuB,OAAO,qBAAqB,OAAO,QAAQ,QAAQ,OAAM;AACvG,QAAG,aAAQ,QAAQ,QAAQ,MAAMD,aAAWF,YAAU,uBAAuB,CAAC;AAC9E,aAAK,WAAW,mBAAmBG,QAAO,IAAI;MAChD,WAAuB,yBAAY,gBAAgB,SAAQ,EAAG,2BAA2B,YAAY,GAAG;AAKtG,cAAM,gBAAgB,SAAS,cAAc,KAAK;AAClD,cAAM,OAAO,IAAe,iBAAK,KAAI;AACrC,aAAK,OAAO,EAAC,UAAU,kBAAkB,OAAO,uBAAuB,OAAO,QAAQ,QAAQ,OAAM;AACpG,cAAM,KAAK,eAAe,eAAe;AACzC,aAAK,aAAa,oBAAoB,EAAE;AACxC,cAAMC,WAAU,IAAa,iBAAQ,QAAQ,EAAC,IAAI,QAAQ,MAAM,SAAS,OAAM,CAAC;AAChF,cAAM,6BAAyC,wCAA2B,2BAA2B,SAAQ;AAC7G,cAAM,EAAC,oBAAmB,IAAI;AAC9B,YAAI,qBAAqB,UAAU,gBAAgB;AACjD,gBAAMC,QAAO,SAAS,cAAc,GAAG;AACvC,UAAAA,MAAK,YAAY;AACjB,UAAAA,MAAK,cAAqB,mBAAU,UAAU,YAAY,oBAAoB,IAAI;AAClF,UAAAA,MAAK,iBAAiB,SAAS,OAAM,UAAQ;AAC3C,kBAAM,QAAO;AACb,kBAAS,iBAAY,YAAY,SAAQ,EAAG,SAAS,iBAAiB;AACtE,kBAAM,2BAA2B;;cAA+C;YAAI;UACtF,CAAC;AACD,UAAAD,SAAQ,OAAY,YAAK,yBACrBH,QAAMD,YAAU,2DAA2D,EAAC,KAAKK,MAAI,CAAC,CAAC;QAC7F,OAAO;AACL,gBAAMA,QAAU,WAAM,MAAM,OAAO,0DAA0D,WAAW;AACxG,UAAAD,SAAQ,OAAY,YAAK,yBACrBH,QAAMD,YAAU,yDAAyD,EAAC,KAAKK,MAAI,CAAC,CAAC;QAC3F;AACA,sBAAc,OAAO,MAAMD,QAAO;AAElC,aAAK,WAAW,iBAAiBD,QAAO,aAAa;MACvD,OAAO;AACL,cAAM,OAAmB,8BAAiB,iBAAiB,oBAAoB,YAAY;AAC3F,aAAK,WAAW,mBAAmBA,QAAO,IAAI;MAChD;IACF;EACF;EAEQ,yBAAyB,OAA+E;AAE9G,UAAM,eAAe,MAAM;AAC3B,SAAK,gBAAgB,YAAY;AACjC,SAAK,cAAa;AAGlB,eAAW,CAAC,GAAG,CAAC,KAAK,KAAK,mBAAmB;AAC3C,UAAI,MAAM,gBAAgB,MAAM,EAAE,IAAG,GAAI;AACvC,aAAK,kBAAkB,OAAO,CAAC;MACjC;IACF;AAEA,eAAW,CAAC,GAAG,CAAC,KAAK,KAAK,kBAAkB;AAC1C,UAAI,MAAM,gBAAgB,MAAM,EAAE,kBAAiB,GAAI;AACrD,aAAK,iBAAiB,OAAO,CAAC;MAChC;IACF;AAEA,SAAK,sBAAsB,YAAY;EACzC;EAEQ,+BACJ,OAA+E;AACjF,UAAM,eAAe,MAAM;AAC3B,SAAK,gBAAgB,YAAY;EACnC;EAEQ,iCACJ,OAA4F;AAC9F,UAAM,eAAe,MAAM,KAAK;AAChC,SAAK,gBAAgB,YAAY;EACnC;EAEQ,gBAAa;AACnB,WAAO,SAAU;EACnB;EAEA,cAAW;AACT,WAAO,KAAK,uBAAuB;EACrC;;AAGF,IAAI,gBAAgB;AAmBpB,IAAM,oCAAoC;AAC1C,IAAM,8BAA8B;AAcpC,SAAS,eAAe,cAAiD;AACvE,SAAO,EAAC,KAAK,aAAa,IAAG,GAAI,cAAc,aAAa,YAAW,EAAE;AAC3E;AAEM,IAAO,cAAP,MAAO,aAAW;EACtB;EACA;EACA;EACA;EAEA,YACI,KAAsC,cACtC,gBAAgD,kBAAyB;AAC3E,SAAK,MAAM;AACX,SAAK,eAAe;AACpB,SAAK,iBAAiB;AACtB,SAAK,mBAAmB;EAC1B;EAEA,OAAO,WAAW,uBAA4C;AAC5D,UAAM,eAAsB,sBAAa,aAAa,SAAS,sBAAsB,gBAAgB;AACrG,QAAI,iBAAiB,MAAM;AACzB,YAAM,IAAI,UAAU,+BAA+B,sBAAsB,gBAAgB,GAAG;IAC9F;AACA,UAAM,iBAAiB,sBAAsB,iBAC/B,qBAAU,UAAU,WAAW,sBAAsB,cAAc,IAC7E;AACJ,WAAO,IAAI,aACP,sBAAsB,KACtB,cACA,gBACA,sBAAsB,gBAAgB;EAE5C;EAEA,WAAQ;AACN,QAAI,KAAK,IAAI,UAAU,6BAA6B;AAClD,aAAO;IACT;AACA,WAAO;MACL,KAAK,KAAK;MACV,kBAAkB,KAAK,aAAa,KAAI;MACxC,gBAAgB,KAAK;MACrB,kBAAkB,KAAK;;EAE3B;;AAGI,IAAO,UAAP,MAAO,SAAO;EACV;EAER,YAAY,OAAoB;AAC9B,SAAK,QAAQ;EACf;EAEA,OAAO,WAAW,wBAA+C;AAC/D,UAAM,QAAQ,CAAA;AACd,eAAW,yBAAyB,wBAAwB;AAC1D,UAAI;AACF,cAAM,KAAK,YAAY,WAAW,qBAAqB,CAAC;MAC1D,QAAQ;MACR;IACF;AACA,WAAO,IAAI,SAAQ,KAAK;EAC1B;EAEA,MAAM,EAAC,KAAK,aAAY,GAAiB;AACvC,WAAO,KAAK,MAAM,UAAU,UAAQ,KAAK,QAAQ,OAAO,KAAK,iBAAiB,YAAY;EAC5F;EAEA,eAAe,KAAmB;AAChC,UAAM,QAAQ,KAAK,MAAM,GAAG;AAC5B,QAAI,UAAU,IAAI;AAChB,aAAO;IACT;AACA,WAAO,KAAK,MAAM,KAAK,EAAE;EAC3B;EAEA,qBAAqB,KAAqB,gBAA8C;AACtF,QAAI,CAAC,gBAAgB;AACnB;IACF;AACA,UAAM,QAAQ,KAAK,MAAM,GAAG;AAC5B,QAAI,UAAU,IAAI;AAChB;IACF;AACA,SAAK,MAAM,KAAK,EAAE,iBAAiB;EACrC;EAEA,iBAAiB,KAAmB;AAClC,UAAM,QAAQ,KAAK,MAAM,GAAG;AAC5B,QAAI,UAAU,IAAI;AAChB;IACF;AACA,WAAO,KAAK,MAAM,KAAK,EAAE;EAC3B;EAEA,uBAAuB,KAAqB,kBAAwB;AAClE,UAAM,QAAQ,KAAK,MAAM,GAAG;AAC5B,QAAI,UAAU,IAAI;AAChB;IACF;AACA,SAAK,MAAM,KAAK,EAAE,mBAAmB;EACvC;EAEA,OAAO,MAAsB;AAC3B,aAAS,IAAI,KAAK,SAAS,GAAG,KAAK,GAAG,EAAE,GAAG;AACzC,YAAM,QAAQ,KAAK,MAAM,KAAK,CAAC,CAAC;AAChC,UAAI;AACJ,UAAI,UAAU,IAAI;AAChB,eAAO,KAAK,MAAM,KAAK;AACvB,aAAK,MAAM,OAAO,OAAO,CAAC;MAC5B,OAAO;AACL,eAAO,IAAI,YAAY,KAAK,CAAC,EAAE,KAAK,KAAK,CAAC,EAAE,YAAY;MAC1D;AACA,WAAK,MAAM,QAAQ,IAAI;IACzB;EACF;EAEA,OAAO,KAAmB;AACxB,UAAM,QAAQ,KAAK,MAAM,GAAG;AAC5B,QAAI,UAAU,IAAI;AAChB;IACF;AACA,SAAK,MAAM,OAAO,OAAO,CAAC;EAC5B;EAEA,WAAQ;AACN,UAAM,yBAAyB,CAAA;AAC/B,eAAW,QAAQ,KAAK,OAAO;AAC7B,YAAM,iBAAiB,KAAK,SAAQ;AACpC,UAAI,gBAAgB;AAClB,+BAAuB,KAAK,cAAc;MAC5C;AACA,UAAI,uBAAuB,WAAW,mCAAmC;AACvE;MACF;IACF;AACA,WAAO;EACT;EAEA,OAAI;AACF,WAAO,KAAK;EACd;;AAGI,IAAO,6BAAP,MAAiC;EACpB;EAEjB,YAAY,iBAAsC;AAChD,SAAK,kBAAkB;EACzB;EAEA,UAAU,aAAuC,KAAa;AAC5D,SAAK,gBAAgB,UAAU,GAAG;EACpC;EAEA,cAAcA,QAAe,aAAuC;AAClE,SAAK,gBAAgB,cAAcA,QAAO,WAAW;EACvD;;;;AHl3BF,IAAMG,cAAY;;;;EAIhB,UAAU;;;;EAIV,YAAY;;;;EAIZ,qCAAqC;;;;EAIrC,cAAc;;;;EAId,mBAAmB;;AAGrB,IAAMC,SAAY,YAAK,kBAAkB,iCAAiCD,WAAS;AACnF,IAAME,eAAkB,YAAK,mBAAmB,KAAK,QAAWD,MAAI;AAE9D,IAAO,cAAP,MAAO,qBAA2B,uBAAc,WAAiD,YAAO,IAAI,EAAC;EAEhG;EACA;EACjB;EACiB;EACR;EACQ;EACT;EACS;EACT;EACA;EAER,cAAA;AACE,UAAM,EAAC,OAAO,GAAiB,oBAAK,QAAQ,EAAE,MAAM,EAAC,SAAS,SAAQ,CAAC,CAAC,GAAE,CAAC;AAC3E,SAAK,oBAAoB,uBAAiB;AAE1C,SAAK,QAAQ,KAAK;AAClB,SAAK,4BAA4B,IAAI,IAAI,KAAK,GAAG;AAEjD,UAAM,YAAsB,sBAAU,cAAc,SAAQ;AAE5D,SAAK,yBAAyB,IAAO,oBAAe,eAAe,MAAM,MAAM,4BAA4B;AAC3G,SAAK,uBAAuB,0BAA0B,CAAC;AACvD,SAAK,uBAAuB,KAAK,KAAK,OAAO;AAE7C,SAAK,2BAA2B,oBAAI,IAAG;AAEvC,SAAK,kBAAkB,IAAI,sBACvB,MAAa,kBAAS,SAAS,SAAQ,EAAG,mBAAmB,2BAA2B,CAAA,CAAE,GAC1F,KAAK,mBAAkB,GAAI,KAAK,yBAAyB;AAC7D,SAAK,gBAAgB,KAAK,KAAK,uBAAuB,OAAO;AAC7D,SAAK,gBAAgB,iBAAgB,kBAA8C,KAAK,gBAAgB,IAAI;AAC5G,SAAK,gBAAgB,iBAAgB,gBAA4C,KAAK,cAAc,IAAI;AAExG,SAAK,iBAAiB,IAAI,8BAA8B,IAAI;AAE5D,UAAM,kCAAkC,KAAK,QAAQ,YAAY,OAAO,iBAAiB;AACzF,oCAAgC,aAAa,SAAS,GAAiB,uBAAQ,QAAQ,CAAC,EAAE;AAC1F,SAAK,qBAAqB,gCAAgC,YAAY,kBAAkB;AACxF,SAAK,mBAAmB,MAAM,OAAO;AACrC,SAAK,wBAAwB,gCAAgC,YAAY,kBAAkB;AAE3F,SAAK,yBAAyB;AAE9B,IAAG,aAAQ,iBAAgB;AAC3B,cAAU,cAAa,EAAG,QAAQ,KAAK,gBAAgB,KAAK,IAAI,CAAC;AACjE,IAAG,aAAQ,eAAc;AAEzB,cAAU,iBAA2B,sBAAU,OAAO,mBAAmB,KAAK,mBAAmB,IAAI;AACrG,cAAU,iBAA2B,sBAAU,OAAO,qBAAqB,KAAK,qBAAqB,IAAI;AACzG,cAAU,iBAA2B,sBAAU,OAAO,gBAAgB,KAAK,eAAe,KAAK,IAAI,GAAG,IAAI;AAC1G,IAAI,mBAAc,cAAc,SAAQ,EAAG,uBAAuB,KAAK,eAAe,KAAK,IAAI,CAAC;AAEhG,aAAS,mBAAmB,OAAY;AACtC,UAAI,MAAM,aAAa;AACrB;MACF;AAEA,YAAM,qBAA4D,CAAA;AAClE,YAAM,WACQ,sBAAU,cAAc,SAAQ,EAAG,gBAA0B,sBAAU,aAAa,UAAU;AAC5G,iBAAW,WAAW,UAAU;AAC9B,mBAAW,gBAAgB,QAAQ,cAAa,GAAI;AAClD,cAAI,aAAa,QAAO,GAAI;AAC1B,+BAAmB,KAAK,YAAY;UACtC;QACF;MACF;AAEA,UAAI,CAAC,mBAAmB,QAAQ;AAC9B;MACF;AAEA,YAAM,cAAc;AACpB,WAAQ,iBAAY,YAAY,SAAQ,EAAG,SAAS,SAAS;AAC7D,iBAAW,cAAc,oBAAoB;AAC3C,aAAY,kBAAS,OAAO,UAAU;MACxC;IACF;AAEA,QAAI,CAAC,OAAO,QAAQ;AAClB,aAAO,iBAAiB,gBAAgB,oBAAoB,IAAI;IAClE;EACF;EAEQ,qBAAkB;AACxB,UAAME,eAAc,SAAS,cAAc,KAAK;AAChD,IAAAA,aAAY,UAAU,IAAI,qBAAqB;AAE/C,UAAM,mBAAmBA,aAAY,YAAY,OAAO,6BAA6B;AACrF,qBAAiB,UAAU,IAAI,WAAW;AAE1C,UAAM,OAAkB,iBAAK,OAAO,QAAQ,WAAW;AACvD,qBAAiB,YAAY,QAAQ,gBAAgB,EAAE,YAAY,IAAI;AACvE,UAAM,OAAO,iBAAiB,YAAY,MAAM;AAChD,SAAK,cAAcH,YAAU;AAC7B,UAAM,eAAe,KAAK,YAAY,QAAQ;AAC9C,iBAAa,cAAcE,aAAWF,YAAU,YAAY;AAC5D,iBAAa,iBAAiB,SAAS,KAAK,qBAAqB,KAAK,IAAI,CAAC;AAE3E,UAAM,YAAY;MAChB,EAAC,UAAU,mBAAmB,aAAaE,aAAWF,YAAU,QAAQ,EAAC;MACzE,EAAC,UAAU,gCAAgC,aAAaE,aAAWF,YAAU,UAAU,EAAC;;AAG1F,UAAM,OAAOG,aAAY,YAAY,OAAO,gBAAgB;AAC5D,SAAK,UAAU,IAAI,6BAA6B;AAChD,IAAG,eAAU,WAAW,IAAI;AAC5B,IAAG,eAAU,SAAS,MAAMD,aAAWF,YAAU,iBAAiB,CAAC;AAEnE,eAAW,YAAY,WAAW;AAChC,YAAM,eAAkB,sBAAiB,iBAAiB,SAAQ,EAAG,mBAAmB,SAAS,QAAQ;AACzG,YAAM,kBAAkB,KAAK,YAAY,KAAK;AAC9C,sBAAgB,UAAU,IAAI,eAAe;AAE7C,MAAG,eAAU,eAAe,eAAe;AAG3C,UAAI,eAAe,CAAC,GAAG;AACrB,cAAM,SAAS,gBAAgB,YAAY,QAAQ;AACnD,eAAO,cAAc,SAAS;AAC9B,cAAMI,UAAY,oBAAe,eAAe,SAAQ,EAAG,UAAU,SAAS,QAAQ;AACtF,eAAO,iBAAiB,SAAS,MAAMA,QAAO,QAAO,CAAE;AAEvD,cAAM,kBAAkB,gBAAgB,YAAY,QAAQ,WAAW;AACvE,cAAM,YAAiB,eAAS,MAAK,IAAK,WAAW;AACrD,cAAM,OAAO,aAAa,CAAC,EAAE,YAAY,QAAQ,gBAAc,WAAW,KAAK,MAAM,SAAS,CAAC;AAC/F,aAAK,QAAQ,SAAM;AACjB,0BAAgB,YAAY,QAAQ,cAAc,EAAE,YAAY,MAAM,EAAE,cAAc;QACxF,CAAC;MACH;IACF;AAEA,WAAOD;EACT;EAEQ,MAAM,uBAAoB;AAChC,UAAM,SAAS,MAAkB,wCAA0B,0BAA0B,SAAQ,EAAG,cAAa;AAC7G,QAAI,CAAC,QAAQ;AACX;IACF;AACA,IAAK,kBAAY,YAAiB,kBAAY,OAAO,qBAAqB;AAC1E,SAAQ,iBAAY,YAAY,SAAQ,EAAG,SAAS,iBAAiB;EACvE;EAEA,OAAO,4BAAyB;AAC9B,UAAM,gBAAgB,oBAAI,IAAG;AAC7B,UAAM,cAAiB,aAAQ,QAAQ,SAAQ,EAAG,OAAO,YAAW;AACpE,QAAI,aAAa;AACf,YAAM,gBAAgB,YAAY,gBAAgB,qBAAoB;AACtE,eAAS,IAAI,GAAG,IAAI,cAAc,QAAQ,EAAE,GAC5C;AACE,sBAAc,IAAI,cAAc,CAAC,GAAG,cAAc,SAAS,CAAC;MAC9D;IACF;AACA,WAAO;EACT;EAEA,cAAW;AACT,WAAO,KAAK,gBAAgB,YAAW;EACzC;EAEA,eAAY;AACV,WAAO,KAAK,gBAAgB,aAAY;EAC1C;EAEA,gBAAa;AACX,WAAO,KAAK;EACd;EAEA,oBAAiB;AACf,WAAO,KAAK;EACd;EAES,WAAQ;AACf,UAAM,SAAQ;AACd,IAAG,aAAQ,QAAQ,SAAQ,EAAG,UAAU,cAAa,IAAI;EAC3D;EAES,WAAQ;AACf,IAAG,aAAQ,QAAQ,SAAQ,EAAG,UAAU,cAAa,IAAI;AACzD,UAAM,SAAQ;EAChB;EAEA,iBAAc;AACZ,WAAO,KAAK;EACd;EAEA,cAAW;AACT,WAAO,KAAK,gBAAgB;EAC9B;EAEA,qBAAkB;AAChB,UAAM,OAAO,KAAK,YAAW;AAC7B,QAAI,EAAE,gBAAgB,oBAAoB;AACxC,aAAO;IACT;AACA,WAAQ;EACV;EAEA,sBAAmB;AACjB,WAAO,KAAK,gBAAgB,YAAW;EACzC;EAEA,mBAAgB;AACd,UAAM,eAAe,KAAK,gBAAgB,YAAW;AACrD,QAAI,CAAC,cAAc;AACjB,aAAO;IACT;AACA,SAAK,gBAAgB,UAAU,YAAY;AAC3C,WAAO;EACT;EAEA,2BAAwB;AACtB,SAAK,eAAe,SAAQ;EAC9B;EAEA,uBAAoB;AAClB,SAAK,eAAe,SAAQ;EAC9B;EAEA,iBAAc;AACZ,UAAM,YAAsB,sBAAU,cAAc,SAAQ;AAC5D,eAAW,gBAAgB,UAAU,cAAa,GAAI;AACpD,UAAI,aAAa,QAAO,EAAG,KAAI,MAAiB,sBAAU,aAAa,SAAS;AAC9E;MACF;AACA,YAAM,SAAkB,yBAAe,eAAe,sBAAsB,YAAY;AACxF,UAAQ,mBAAc,cAAc,SAAQ,EAAG,UAAU,MAAM,GAAG;AAChE,aAAK,gBAAgB,YAAY;MACnC,OAAO;AACL,aAAK,oBAAoB,CAAC,YAAY,CAAC;MACzC;IACF;EACF;EAEQ,kBAAkB,OAA+E;AACvG,UAAM,eAAe,MAAM;AAC3B,SAAK,gBAAgB,YAAY;EACnC;EAEQ,gBAAgB,cAAiD;AACvE,UAAM,UAAU,aAAa,QAAO;AACpC,QAAI,QAAQ,iBAAgB,GAAI;AAC9B;IACF;AACA,YAAQ,QAAQ,KAAI,GAAI;MACtB,KAAe,sBAAU,aAAa,YAAY;AAChD,YAAgB,yCAA2B,2BAA2B,eAAe,OAAO,MAAM,aAAa;AAC7G;QACF;AACA;MACF;MACA,KAAe,sBAAU,aAAa,SAAS;AAC7C,cAAM,SAAkB,yBAAe,eAAe,sBAAsB,YAAY;AACxF,YAAI,CAAK,mBAAc,cAAc,SAAQ,EAAG,UAAU,MAAM,GAAG;AACjE;QACF;MACF;IACF;AACA,SAAK,gBAAgB,gBAAgB,YAAY;EACnD;EAEQ,oBAAoB,OAA+E;AACzG,UAAM,eAAe,MAAM;AAC3B,SAAK,oBAAoB,CAAC,YAAY,CAAC;EACzC;EAEQ,oBAAoB,eAAoD;AAC9E,SAAK,gBAAgB,oBAAoB,aAAa;AACtD,aAAS,IAAI,GAAG,IAAI,cAAc,QAAQ,EAAE,GAAG;AAC7C,WAAK,kBAAkB,cAAc,CAAC,CAAC;AACvC,WAAK,eAAe,2BAA2B,cAAc,CAAC,CAAC;IACjE;EACF;EAEQ,eAAe,OAAuE;AAC5F,UAAM,UAAU,MAAM;AACtB,UAAM,gBAAgB,QAAQ,cAAa;AAC3C,SAAK,oBAAoB,CAAC,GAAG,aAAa,CAAC;EAC7C;EAEQ,+BAA4B;AAClC,UAAM,OAAO,KAAK,YAAW;AAC7B,QAAI,gBAAmB,UAAK,YAAY;AACtC,WAAK,KAAK,aAAY,EAAG,KAAK,WAAQ;AACpC,aAAK,mBAAmB,mBAAkB;AAC1C,mBAAWC,WAAU,2BAA0B,GAAI;AACjD,eAAK,mBAAmB,kBAAkBA,QAAO,kBAAkB,IAAI,CAAC;QAC1E;AACA,cAAM,IAAI,UAAQ,KAAK,mBAAmB,kBAAkB,IAAI,CAAC;MACnE,CAAC;IACH;EACF;EAEA,mBACI,cAAmD,UACnD,WAAqB,eAAuB;AAC9C,UAAM,eAAe,KAAK,mBAAkB;AAC5C,QAAI,cAAc;AAChB,WAAK,eAAe,mBAChB,aAAa,aAAY,GAAI,aAAa,WAAW,MAAM,UAAU,KAAK,IAAI;IACpF;AACA,SAAK,gBAAgB,SAAS,YAAY;AAC1C,UAAM,qBAAqB,KAAK,mBAAkB;AAClD,QAAI,sBAAsB,UAAU;AAClC,yBAAmB,eAAe,UAAU,CAAC,aAAa;IAC5D;AACA,UAAM,cAAc,KAAK,YAAW;AACpC,QAAI,CAAC,aAAa,aAAa;AAC7B,kBAAY,MAAK;IACnB;EACF;EAEQ,iBAAiB,cAAiD;AACxE,QAAI;AACJ,UAAM,cAAc,aAAa,YAAW;AAE5C,QAAI,gBAAuB,sBAAa,cAAc,SAAS,aAAa,SAAQ,EAAG,WAAW,QAAQ,GAAG;AAC3G,mBAAa,IAAgB,wBAAU,UAAU,aAAa,SAAQ,GAAI,YAAY;IACxF,WAAW,gBAAuB,sBAAa,cAAc,QAAQ,aAAa,SAAQ,EAAG,SAAS,MAAM,GAAG;AAC7G,mBAAa,IAAgB,uBAAS,SAAS,aAAa,SAAQ,GAAI,YAAY;IACtF,WAAW,aAAa,KAAI,MAAO,2BAA2B;AAC5D,mBAAa,IAAe,wBAAY,YAAY,YAAY;IAClE,OAAO;AACL,mBAAa,IAAI,kBAAkB,YAAY;AAC/C,WAAK,eAAe,4BAA4B,UAAU;IAC5D;AAEA,iBAAa,iBAA2B,yBAAa,OAAO,cAAc,KAAK,2BAA2B,IAAI;AAE9G,SAAK,yBAAyB,IAAI,cAAc,UAAU;AAC1D,WAAO;EACT;EAEA,yBAAyB,QAAwB;AAC/C,QAAI,kBAA8B,wBAAU,WAAW;AACrD,aAAA;IACF;AACA,QAAI,kBAA8B,uBAAS,UAAU;AACnD,aAAA;IACF;AACA,QAAI,kBAA6B,wBAAY,aAAa;AACxD,aAAA;IACF;AACA,WAAA;EACF;EAEA,+BAA+B,cAAiD;AAC9E,QAAI,aAAa,KAAI,MAAO,2BAA2B;AACrD,aAAA;IACF;AACA,UAAM,cAAc,aAAa,YAAW;AAC5C,YAAQ,aAAa;MACnB,KAAY,sBAAa,cAAc;AACrC,eAAA;MACF,KAAY,sBAAa,cAAc;AACrC,eAAA;MACF;AACE,eAAA;IACJ;EACF;EAEA,0BAA0B,OAA+E;AACvG,UAAM,eAAe,MAAM;AAC3B,UAAM,SAAS,KAAK,yBAAyB,IAAI,YAAY;AAC7D,QAAI,QAAQ;AACV,UAAI,KAAK,yBAAyB,MAAM,MAAM,KAAK,+BAA+B,YAAY,GAAG;AAE/F,aAAK,oBAAoB,CAAC,YAAY,CAAC;AACvC,aAAK,mBAAmB,YAAY;MACtC;IACF;EACF;EAEA,cAAc,cAAiD;AAC7D,WAAO,KAAK,yBAAyB,IAAI,YAAY;EACvD;EAEQ,sBAAsB,cAAiD;AAC7E,WAAO,KAAK,yBAAyB,IAAI,YAAY,KAAK,KAAK,iBAAiB,YAAY;EAC9F;EAEA,yBAAyB,aAAgC,cAAiD;AACxG,gBAAY,aAAY,EAAG,oBACb,yBAAa,OAAO,cAAc,KAAK,2BAA2B,IAAI;AACpF,SAAK,yBAAyB,OAAO,YAAY,aAAY,CAAE;AAC/D,gBAAY,gBAAgB,YAAY;AACxC,SAAK,yBAAyB,IAAI,cAAc,WAAW;AAC3D,iBAAa,iBAA2B,yBAAa,OAAO,cAAc,KAAK,2BAA2B,IAAI;EAChH;EAEA,YAAY,cAAiD;AAC3D,WAAO,KAAK,sBAAsB,YAAY;EAChD;EAEQ,kBAAkB,cAAiD;AACzE,UAAM,aAAa,KAAK,yBAAyB,IAAI,YAAY;AACjE,SAAK,yBAAyB,OAAO,YAAY;AACjD,QAAI,cAAc,sBAAsB,mBAAmB;AACzD,MAAC,WAAY,QAAO;IACtB;AACA,iBAAa,oBAA8B,yBAAa,OAAO,cAAc,KAAK,2BAA2B,IAAI;EACnH;EAEQ,aAAa,OAA+E;AAClG,UAAM,eAAe,MAAM;AAC3B,SAAK,eAAe,2BAA2B,YAAY;AAE3D,QAAI,cAAc;AAClB,QAAI,CAAC,KAAK,gBAAgB,YAAW,GAAI;AACvC,oBAAc;IAChB;AAGA,SAAK,6BAA4B;AACjC,SAAK,6BAA4B;AACjC,SAAK,uBAAuB,YAAW;AAEvC,UAAM,OAAO;MACX;MACA;;AAEF,SAAK,yBAAwB,gBAAuB,IAAI;EAC1D;EAEQ,eAAe,OAA+D;AACpF,UAAM,sBAAsB,MAAM,KAAK,wBAAwB,oBAAoB,MAAM,KAAK,eAAe;AAC7G,QAAI,qBAAqB;AACvB,0BAAoB,kBAAkB,IAAI;IAC5C;AACA,UAAM,qBAAqB,MAAM,KAAK,uBAAuB,oBAAoB,MAAM,KAAK,cAAc;AAC1G,QAAI,oBAAoB;AACtB,yBAAmB,kBAAkB,KAAK,sBAAsB;IAClE;AAEA,SAAK,uBAAuB,eAAe,QAAQ,oBAAoB,cAAa,CAAE,CAAC;AACvF,SAAK,uBAAuB,cAAa;AACzC,SAAK,6BAA4B;AACjC,SAAK,6BAA4B;AAEjC,UAAM,cAAc,KAAK,gBAAgB,YAAW;AACpD,QAAI,aAAa;AACf,WAAK,yBAAwB,kBAAyB,WAAW;IACnE;EACF;EAEQ,+BAA4B;AAClC,QAAI,KAAK,wBAAwB;AAC/B,MAAO,qBAAY,qBAAqB,CAAC,KAAK,sBAAsB,CAAC;IACvE;AACA,SAAK,yBAAyB;EAChC;EAEQ,+BAA4B;AAClC,SAAK,6BAA4B;AACjC,UAAM,cAAc,KAAK,mBAAkB;AAC3C,QAAI,CAAC,aAAa;AAChB;IACF;AACA,SAAK,yBAAyB,YAAY,iBAAgB,uBACP,KAAK,8BAA8B,IAAI;EAC5F;EAEA,mBAAgB;AACd,QAAI,KAAK,YAAY;AACnB,WAAK,WAAW,iBAAgB;IAClC;AAEA,WAAO,KAAK;AACZ,WAAO,KAAK;EACd;EAEA,cAAc,cAA8C,YAAqB,eAAuB;AACtG,UAAM,cAAc,KAAK,mBAAkB;AAC3C,QAAI,CAAC,aAAa;AAChB;IACF;AAEA,SAAK,aAAa;AAClB,SAAK,eAAe;AAEpB,SAAK,WAAW,cAAc,KAAK,cAAc,YAAY,aAAa;EAC5E;EAEA,yBAAsB;AACpB,QAAI,CAAC,KAAK,YAAY;AACpB;IACF;AAEA,QAAI,KAAK,gBAAgB,KAAK,eAAe,KAAK,mBAAkB,GAAI;AACtE,WAAK,cAAc,KAAK,cAAc,IAAI;AAC1C;IACF;AAEA,SAAK,WAAW,uBAAsB;EACxC;EAEA,6BAA0B;AACxB,QAAI,CAAC,KAAK,YAAY;AACpB;IACF;AAEA,QAAI,KAAK,gBAAgB,KAAK,eAAe,KAAK,mBAAkB,GAAI;AACtE,WAAK,cAAc,KAAK,cAAc,IAAI;AAC1C,UAAI,KAAK,YAAY;AACnB,aAAK,WAAW,uBAAsB;MACxC;AACA;IACF;AAEA,SAAK,WAAW,2BAA0B;EAC5C;EAEA,8BAA2B;AACzB,WAAO;EACT;EAEA,sBAAmB;AACjB,WAAO;EACT;EAEA,qBAAqB,cAA8C,aAAmB;AACpF,UAAM,cAAc,KAAK,mBAAkB;AAC3C,QAAI,CAAC,aAAa;AAChB,cAAQ,OAAO,QAAQ,WAAW,CAAC;AACnC;IACF;AACA,gBAAY,qBAAqB,cAAc,WAAW;EAC5D;EAEA,eAAe,cAA8C,aAAmB;AAC9E,UAAM,cAAc,KAAK,mBAAkB;AAC3C,QAAI,CAAC,aAAa;AAChB,cAAQ,OAAO,QAAQ,WAAW,CAAC;AACnC;IACF;AACA,gBAAY,eAAe,cAAc,WAAW;EACtD;EAEA,uBAAoB;AAClB,IAAU,oBAAU,cAAc,KAAK,GAAG;EAC5C;EAEA,wBAAqB;AACnB,QAAI,KAAK,gBAAgB,YAAW,GAAI;AACtC,MAAU,oBAAU,cAAc,KAAK,GAAG;IAC5C;EACF;EAEA,OAAI;AACF,SAAK,gBAAgB,KAAK,mBAAkB,CAAE;EAChD;EAEA,UAAO;AACL,UAAM,eAAe,KAAK,gBAAgB,UAAS;AACnD,iBAAa,QAAQ,KAAK,gBAAgB,KAAK,IAAI,CAAC;EACtD;EAEQ,gBAAgB,aAAkC;AACxD,QAAI,EAAE,uBAAuB,oBAAoB;AAC/C;IACF;AACA,UAAM,oBAAoB;AAC1B,sBAAkB,cAAa;EACjC;EAEA,6BAA6B,QAAe;AAC1C,SAAK,gBAAgB,KAAK,QAAQ,UAAU,OAAO,2BAA2B,CAAC,MAAM;EACvF;;AAsBF,IAAM,0BAAqD,CAAA;AAErD,SAAU,qBAAqB,cAAgC;AACnE,0BAAwB,KAAK,YAAY;AAC3C;AAEM,SAAU,6BAA0B;AACxC,SAAO,wBAAwB,IAAI,kBAAgB,aAAY,CAAE;AACnE;AAEM,IAAO,2BAAP,MAAO,0BAAwB;EAC3B,OAAO,SAAS,qBAAwD;AAE9E,aAAS,eAAeC,OAAY;AAClC,YAAM,eAAeA,MAAK,YAAY,GAAG;AACzC,YAAMC,cAAaD,MAAK,OAAO,GAAG,iBAAiB,KAAK,eAAeA,MAAK,MAAM;AAClF,aAAOC,YAAW,YAAW;IAC/B;AAEA,UAAM,aAAa,CAAA;AACnB,UAAM,MAAM,oBAAoB,UAAS;AACzC,UAAM,OAAO,oBAAoB,KAAI;AACrC,UAAM,aAAa,eAAe,IAAI;AACtC,eAAW,gBAAgB,oBAAoB,QAAO,EAAG,cAAa,GAAI;AACxE,UAAI,QAAQ,aAAa,UAAS,GAAI;AACpC;MACF;AACA,UAAI,eAAe,aAAa,KAAI,CAAE,MAAM,YAAY;AACtD,mBAAW,KAAK,aAAa,KAAI,CAAE;MACrC;IACF;AACA,eAAW,KAAc,2BAAgB,sBAAsB;AAC/D,UAAM,QAAiB,2BAAgB,IAAI,WAAW,QAAQ,IAAI,IAAI,GAAG,WAAW,MAAM;AAC1F,UAAM,UAAiB,mBAAU,UAAU,YACtC,MAAa,mBAAU,UAAU,YAAY,KAAK,GAAG,IAAI,IAC1D,WAAW,KAAK,CAAC;AACrB,UAAM,mBAAmB,oBAAoB,QAAO,EAAG,mBAAmB,OAAO;AACjF,WAAO,qBAAqB,sBAAsB,mBAAmB;EACvE;EAEA,aAAa,SAA6B,WAAiB;AACzD,UAAM,cAAc,QAAQ,OAAO,WAAW;AAC9C,QAAI,CAAC,aAAa;AAChB,aAAO;IACT;AACA,UAAM,sBAAsB,YAAY,oBAAmB;AAC3D,QAAI,CAAC,qBAAqB;AACxB,aAAO;IACT;AACA,UAAM,mBAAmB,0BAAyB,SAAS,mBAAmB;AAC9E,QAAI,CAAC,kBAAkB;AACrB,aAAO;IACT;AACA,gBAAY,mBAAmB,gBAAgB;AAC/C,WAAO;EACT;;AAGI,IAAOC,kBAAP,MAAqB;EACzB,aAAa,SAA6B,UAAgB;AACxD,UAAM,cAAc,QAAQ,OAAO,WAAW;AAC9C,QAAI,CAAC,aAAa;AAChB,aAAO;IACT;AAEA,YAAQ,UAAU;MAChB,KAAK;AACH,oBAAY,gBAAgB,cAAa;AACzC,eAAO;MACT,KAAK;AACH,oBAAY,yBAAwB;AACpC,eAAO;MACT,KAAK;AACH,oBAAY,qBAAoB;AAChC,eAAO;MACT,KAAK;AACH,oBAAY,gBAAgB,cAAa;AACzC,eAAO;MACT,KAAK;AACH,oBAAY,gBAAgB,cAAa;AACzC,eAAO;MACT,KAAK;AACH,eAAO,YAAY,iBAAgB;MACrC,KAAK;AACH,oBAAY,sBAAqB;AACjC,eAAO;MACT,KAAK;AACH,oBAAY,qBAAoB;AAChC,eAAO;MACT,KAAK;AACH,oBAAY,KAAI;AAChB,eAAO;MACT,KAAK;AACH,oBAAY,QAAO;AACnB,eAAO;IACX;AAEA,WAAO;EACT;;AAGF,IAAM,4BAA4B;;;AS/uBlC;;;;AAMA,YAAYC,YAAU;AACtB,YAAYC,WAAS;AACrB,YAAYC,iBAAgB;AAC5B,YAAYC,UAAQ;AACpB,YAAYC,qBAAmB;;;ACL/B,IAAO,iCAAQ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBAgEC,YAAY,QAAQ,0BAA0B,CAAC;;;ADvD/D,IAAMC,cAAY;;;;EAIhB,QAAQ;;AAEV,IAAMC,SAAY,YAAK,kBAAkB,wCAAwCD,WAAS;AAC1F,IAAME,eAAkB,YAAK,mBAAmB,KAAK,QAAWD,MAAI;AAE9D,IAAO,qBAAP,cAAqC,YAAO,KAAI;EAGnC;EACA;EACT;EAER,cAAA;AACE,UAAM;MACJ,OAAO,GAAiB,wBAAQ,iBAAiB,CAAC;MAClD,cAAc;KACf;AACD,SAAK,oBAAoB,8BAAwB;AAEjD,SAAK,QAAQ,IAAO,eAAU,UAAS;AACvC,SAAK,OAAO,IAAO,iBAAY,YAAY,KAAK,OAAO,MAAS,iBAAY,SAAS,WAAW;AAChG,UAAM,gBAAmB,aAAQ,QAAQ,SAAQ,EAAG,OAAW,aAAO,MAAM;AAC5E,SAAK,gBAAgB,kBAAkB,OAAO,cAAc,MAAU,oBAAc,aAAa,IAAI;AACrG,SAAK,eAAe,YAAY,KAAK,KAAK,OAAO;AAEjD,IAAG,aAAQ,QAAQ,SAAQ,EAAG,wBAA4B,aAAO,QAAQ,KAAK,qBAAqB,IAAI;AACvG,IAAI,oBAAc,cAAc,SAAQ,EAAG,cAAkB,oBAAc,eAAe,IAAI;EAChG;EAEA,OAAO,gBAAa;AAClB,WAAW,oBAAc,cAAc,SAAQ,EAAG,OAAW,oBAAc,aAAa,EAAE,UAAU;EACtG;EAEA,qBAAqB,eAA8C;AACjE,UAAM,UAAU,SAAS,cAAc,KAAK;AAC5C,YAAQ,UAAU,IAAI,aAAa;AACnC,UAAM,QAAQ,QAAQ,YAAY,OAAO,mBAAmB;AAC5D,UAAM,cAAc,QAAQ,YAAY,OAAO,0BAA0B;AACzE,UAAM,OAAO,IAAe,iBAAK,KAAI;AACrC,SAAK,OAAO;MACV,UAAU;MACV,OAAO;MACP,OAAO;MACP,QAAQ;;AAEV,SAAK,UAAU,IAAI,sBAAsB;AACzC,YAAQ,YAAY,IAAI;AACxB,YAAQ,WAAW;AACnB,SAAK,gBAAgB,SAAS,WAAQ;AACpC,MAAG,aAAQ,QAAQ,SAAQ,EAAG,UAAc,aAAO,QAAQ,cAAc,OAAM,CAAE;AACjF,YAAM,QAAQ,IAAI;IACpB,CAAC;AACD,UAAM,aAAgB,aAAQ,QAAQ,SAAQ,EAAG,OAAW,aAAO,MAAM,MAAM,cAAc,OAAM;AACnG,YAAQ,UAAU,OAAO,YAAY,UAAU;AAC/C,IAAG,eAAU,YAAY,SAAS,UAAU;AAE5C,aAAS,cAAW;AAClB,YAAM,mBAAmB,cAAc,aAAY,EAAG,wBAAuB;AAC7E,YAAM,cAAc,kBAAkB,MAAK,IAAK,iBAAiB,MAAK,IAAK,cAAc,OAAM,EAAG,KAAI;IACxG;AAEA,aAAS,oBAAiB;AACxB,kBAAY,cAAc,cAAc,SAAQ,IAAKC,aAAWF,YAAU,MAAM,IAAI;IACtF;AAEA,aAAS,kBAAkB,OAA6D;AACtF,YAAM,SAAS,MAAM;AACrB,UAAI,WAAW,cAAc,OAAM,GAAI;AACrC,oBAAW;MACb;IACF;AAEA,kBAAc,iBAAqB,oBAAc,OAAO,gBAAgB,iBAAiB;AACzF,kBAAc,iBAAqB,oBAAc,OAAO,iBAAiB,iBAAiB;AAC1F,kBAAc,aAAY,EAAG,iBAAqB,mBAAa,OAAO,yBAAyB,WAAW;AAC1G,IAAI,oBAAc,cAAc,SAAQ,EAAG,iBAAgB,eAChB,iBAAiB;AAE5D,sBAAiB;AACjB,gBAAW;AACX,WAAO;EACT;EAEA,cAAc,gBAA+C;AAC3D,YAAQ,OAAO,KAAK;AACpB,WAAO;EACT;EAEA,iBAAiB,gBAA+C;AAC9D,WAAO;EACT;EAEA,oBACI,OAA6C,KAA2C,aACxF,WAAuB;AACzB,UAAM,UAAW;AACjB,QAAI,SAAS;AACX,cAAQ,WAAW;IACrB;AACA,UAAM,QAAS;AACf,QAAI,OAAO;AACT,WAAK,yBAAyB,KAAK;AACnC,YAAM,WAAW;AACjB,UAAI,KAAK,SAAQ,GAAI;AACnB,cAAM,MAAK;MACb;IACF;EACF;EAEA,uBAAuB,cAA4B,YAAwB;AACzE,WAAO;EACT;EAEA,WAAW,eAA8C;AACvD,SAAK,MAAM,OAAO,KAAK,MAAM,QAAQ,aAAa;AAClD,UAAM,gBAAmB,aAAQ,QAAQ,SAAQ,EAAG,OAAW,aAAO,MAAM;AAC5E,QAAI,kBAAkB,cAAc,OAAM,GAAI;AAC5C,WAAK,KAAK,WAAW,aAAa;IACpC;EACF;EAEA,aAAa,eAA8C;AACzD,SAAK,MAAM,OAAO,KAAK,MAAM,QAAQ,aAAa,CAAC;EACrD;EAEQ,oBAAoB,EAAC,MAAM,OAAM,GAAyD;AAChG,UAAM,WAAW,KAAK,SAAQ;AAC9B,UAAM,gBAAgB,OAAO,MAAU,oBAAc,aAAa;AAClE,SAAK,KAAK,WAAW,aAAa;AAClC,QAAI,eAAe;AACjB,WAAK,KAAK,YAAY,aAAa;IACrC;AACA,QAAI,KAAK,kBAAkB,MAAM;AAC/B,WAAK,KAAK,YAAY,KAAK,aAAa;IAC1C;AACA,SAAK,gBAAgB;AACrB,QAAI,UAAU;AACZ,WAAK,MAAK;IACZ;EACF;;;;AhBnGF,IAAMG,cAAY;;;;EAIhB,yBAAyB;;;;EAIzB,aAAa;;;;;EAKb,eAAe;;;;;EAKf,eAAe;;;;EAIf,gBAAgB;;;;EAIhB,iBAAiB;;;;EAIjB,eAAe;;;;EAIf,gBAAgB;;;;;EAKhB,cAAc;;;;;EAKd,cAAc;;;;EAId,eAAe;;;;EAIf,iBAAiB;;;;EAIjB,kBAAkB;;;;EAIlB,iCAAiC;;;;EAIjC,gCAAgC;;;;EAIhC,yBAAyB;;;;EAIzB,iBAAiB;;;;;;EAMjB,gBAAgB;;;;EAIhB,uBAAuB;;;;;EAKvB,OAAO;;;;;EAKP,oBAAoB;;;;;EAKpB,uBAAuB;;;;;EAKvB,yBAAyB;;;;EAIzB,wBAAwB;;;;EAIxB,oBAAoB;;;;EAIpB,YAAY;;;;;EAKZ,mBAAmB;;;;EAInB,mBAAmB;;;;EAInB,sBAAsB;;AAExB,IAAMC,SAAY,YAAK,kBAAkB,kCAAkCD,WAAS;AACpF,IAAME,eAAkB,YAAK,mBAAmB,KAAK,QAAWD,MAAI;AACpE,IAAM,6BAA6B,oBAAI,IAAI,CAAC,UAAU,WAAW,UAAU,WAAW,CAAC;AACvF,IAAI;AAEE,IAAO,eAAP,MAAO,sBAAwB,WAAM,MAAK;EAI7B;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACT;EACA;EACR;EACQ;EACR;EACiB;EACA;EACT;EACS;EACA;EACT;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACR;EAEA,oBAAqD;EAErD,cAAA;AACE,UAAM,SAAS;AACf,SAAK,oBAAoB,wBAAkB;AAE3C,QAAO,gBAAW,WACd,KAAK,SAAS,CAAI,gBAAW,KAAK,MAAM,GAAGC,aAAWF,YAAU,uBAAuB,GACvF,KAAK,WAAW,KAAK,IAAI,CAAC;AAE9B,SAAK,YAAsB,sBAAU,cAAc,SAAQ;AAC3D,SAAK,oBAAuB,oBAAe,eAAe,SAAQ,EAAG,UAAU,uBAAuB;AACtG,SAAK,iBAAoB,oBAAe,eAAe,SAAQ,EAAG,UAAU,oBAAoB;AAChG,SAAK,iBAAoB,oBAAe,eAAe,SAAQ,EAAG,UAAU,oBAAoB;AAChG,SAAK,gBAAmB,oBAAe,eAAe,SAAQ,EAAG,UAAU,mBAAmB;AAC9F,SAAK,aAAgB,oBAAe,eAAe,SAAQ,EAAG,UAAU,eAAe;AACvF,SAAK,gCACE,oBAAe,eAAe,SAAQ,EAAG,UAAU,oCAAoC;AAE9F,SAAK,eAAe,KAAK,mBAAkB;AAC3C,SAAK,qBAAqB,KAAK,yBAAwB;AACvD,SAAK,wBAAwB,IAAI,sBAAqB;AAEtD,UAAM,2BAA2B;AACjC,SAAK,cACD,IAAO,iBAAY,YAAY,MAAM,MAAM,kCAAkC,wBAAwB;AACzG,SAAK,YAAY,qBAAoB;AACrC,SAAK,YAAY,KAAK,KAAK,OAAO;AAGlC,UAAM,wBAAwB;AAC9B,SAAK,aACD,IAAO,iBAAY,YAAY,MAAM,OAAO,4CAA4C,qBAAqB;AACjH,SAAK,WAAW,qBAAoB;AACpC,SAAK,YAAY,cAAc,KAAK,UAAU;AAG9C,SAAK,0BAA6B,iBAAY,YAAY,SAAQ,EAAG,qBACjE,KAAK,uBAAuB,KAAK,IAAI,GAAG,kBAAkB,MAAM,IAAI;AACxE,UAAM,aAAa,KAAK,wBAAwB,WAAU;AAC1D,eAAW,eAAe,KAAK,EAAE;AACjC,eAAW,QAAQ,UAAU,IAAI,uBAAuB;AACxD,eAAW,cAAa,EAAG,aACvB,SACA,GAAiB,wBAAQ,WAAW,EAAE,MAAM,EAAC,SAAS,qDAAoD,CAAC,CAAC,EAAE;AAClH,UAAM,sBAAsB,IAAO,iBAAY,WAAU;AACzD,wBAAoB,mBAAmB,KAAK,sBAAsB,KAAK,IAAI;AAC3E,wBAAoB,eAAe;AACnC,wBAAoB,WAAW;AAC/B,wBAAoB,QAAQE,aAAWF,YAAU,WAAW;AAC5D,eAAW,aAAY,EAAG,kBAAkB,IAAO,aAAQ,YAAY,mBAAmB,CAAC;AAE3F,QAAO,iBAAY,YAAY,SAAQ,EAAG,oBAAoB,kBAAkB,GAAG;AACjF,YAAM,uBACF,IAAO,iBAAY,YAAY,OAAO,MAAM,iDAAiD;AACjG,2BAAqB,cAAc,UAAU;AAC7C,YAAM,oBAAuB,iBAAY,YAAY,SAAQ,EAC9B,qBAAqB,KAAK,uBAAuB,KAAK,IAAI,GAAG,kBAAkB,EAC/E,WAAU;AACzC,2BAAqB,iBAAiB,iBAAiB;AACvD,2BAAqB,eAAe,kBAAkB,cAAa,CAAE;AACrE,WAAK,WAAW,iBAAiB,oBAAoB;IACvD,OAAO;AACL,WAAK,WAAW,iBAAiB,UAAU;IAC7C;AAEA,SAAK,sBAAsB,IAAI,YAAW;AAC1C,SAAK,oBAAoB,iBAAgB,kBAAyB,KAAK,eAAe,KAAK,IAAI,CAAC;AAEhG,SAAK,+BAA+B,KAAK,WAAW,4BAChDE,aAAWF,YAAU,aAAa,GAAGE,aAAWF,YAAU,aAAa,GAAGE,aAAWF,YAAU,cAAc,GAC7GE,aAAWF,YAAU,eAAe,GAAG,WAAW;AACtD,SAAK,8BAA8B,KAAK,YAAY,4BAChDE,aAAWF,YAAU,YAAY,GAAGE,aAAWF,YAAU,YAAY,GAAGE,aAAWF,YAAU,aAAa,GAC1GE,aAAWF,YAAU,cAAc,GAAG,UAAU;AACpD,SAAK,WAAW,cAAc,KAAK,mBAAmB;AAEtD,SAAK,qBAAqB;AAC1B,SAAK,mBAAsB,iBAAY,YAAY,SAAQ,EAAG,KAAK,eAAe;AAClF,SAAK,gBAAgB,qBAAqB,SAAQ;AAElD,IAAO,kBAAS,SAAS,SAAQ,EAC5B,cAAc,kBAAkB,EAChC,kBAAkB,KAAK,sBAAsB,KAAK,IAAI,CAAC;AAC5D,SAAK,sBAAqB;AAE1B,SAAK,KAAK,+BAA8B;AAExC,SAAK,mBAAmB,IAAa,uBAAa,iBAAgB;AAElE,SAAK,UAAa,aAAQ,QAAQ,SAAQ,EAAG,OAAW,aAAO,MAAM,CAAC;AACtE,IAAO,kBAAS,SAAS,SAAQ,EAC5B,cAAc,oBAAoB,EAClC,kBAAkB,KAAK,+BAA+B,IAAI;AAC/D,IAAG,aAAQ,QAAQ,SAAQ,EAAG,wBAA4B,aAAO,QAAQ,KAAK,wBAAwB,IAAI;AAC1G,IAAG,aAAQ,QAAQ,SAAQ,EAAG,wBAA4B,oBAAc,WAAW,KAAK,kBAAkB,IAAI;AAC9G,IAAI,oBAAc,cAAc,SAAQ,EAAG,iBACnC,oBAAc,eAAmB,oBAAc,OAAO,oBAAoB,KAAK,oBAAoB,IAAI;AAC/G,IAAI,oBAAc,cAAc,SAAQ,EAAG,iBACnC,oBAAc,eAAmB,oBAAc,OAAO,gBAAgB,KAAK,gBAAgB,IAAI;AACvG,IAAI,oBAAc,cAAc,SAAQ,EAAG,iBACnC,oBAAc,eAAmB,oBAAc,OAAO,mBAAmB,KAAK,mBAAmB,IAAI;AAC7G,IAAI,oBAAc,cAAc,SAAQ,EAAG,iBACnC,oBAAc,eAAmB,oBAAc,OAAO,iBAC1D,WAAS,KAAK,gBAAgB,MAAM,IAAI,CAAC;AAC7C,IAAI,oBAAc,cAAc,SAAQ,EAAG,iBACnC,oBAAc,eAAmB,oBAAc,OAAO,qBAC1D,WAAS,KAAK,gBAAgB,MAAM,IAAI,CAAC;AAC7C,IAAW,4BAAgB,gBAAgB,SAAQ,EAAG,iBAAgB,oBACd,KAAK,2BAA2B,IAAI;AAC5F,IAAI,oBAAc,cAAc,SAAQ,EAAG,eAAe,IAAI;AAC9D,SAAK,uBAAuB;EAC9B;EAEA,OAAO,SAAS,OAEF,EAAC,UAAU,KAAI,GAAC;AAC5B,UAAM,EAAC,SAAQ,IAAI;AACnB,QAAI,CAAC,wBAAwB,UAAU;AACrC,6BAAuB,IAAI,cAAY;IACzC;AAEA,WAAO;EACT;EAEA,OAAO,+BAA+BG,QAAmB;AACvD,IAAAA,OAAM,oBAAoB,YAAW,EAAG,mBAAkB;AAC1D,IAAAA,OAAM,oBAAoB,aAAY,EAAG,mBAAkB;AAC3D,IAAAA,OAAM,oBAAoB,cAAa,EAAG,mBAAkB;AAC5D,UAAM,cAAiB,aAAQ,QAAQ,SAAQ,EAAG,OAAO,eAAe,KACpE,CAAI,mBAAc,cAAc,SAAQ,EAAG,kBAAiB;AAChE,QAAIA,OAAM,YAAY,WAAU,KAAM,aAAa;AACjD,MAAAA,OAAM,YAAY,iBAAiBA,OAAM,oBAAoB,kBAAiB,CAAE;IAClF,OAAO;AACL,MAAAA,OAAM,YAAY,eAAeA,OAAM,oBAAoB,kBAAiB,CAAE;IAChF;AACA,QAAI,CAAC,aAAa;AAChB,MAAAA,OAAM,oBAAoB,YAAW,EAAG,kBAAkBA,OAAM,4BAA4B;AAC5F,UAAIA,OAAM,YAAY,WAAU,GAAI;AAClC,QAAAA,OAAM,oBAAoB,aAAY,EAAG,kBAAkBA,OAAM,2BAA2B;MAC9F,OAAO;AACL,QAAAA,OAAM,oBAAoB,cAAa,EAAG,kBAAkBA,OAAM,2BAA2B;MAC/F;IACF;EACF;EAEA,YAAY,SAA0B;AACpC,SAAK,oBAAmB;EAC1B;EAEA,cAAc,SAA0B;EACxC;EAEQ,sBAAmB;AACzB,QAAI,mBAAmB,cAAa,KAAM,CAAC,KAAK,oBAAoB;AAClE,WAAK,qBAAwB,iBAAY,YAAY,SAAQ,EAAG,KAAK,iBAAiB;AACtF,UAAI,KAAK,oBAAoB,KAAK,oBAAoB;AACpD,aAAK,iBAAiB,WAClB,KAAK,oBAAoB,KAAK,YAAY,WAAU,IAAK,KAAK,mBAAmB,KAAK,aAAa;MACzG;IACF;EACF;EAEQ,UAAU,QAA8B;AAC9C,QAAI,CAAC,QAAQ;AACX;IACF;AACA,UAAM,gBAAgB,OAAO,MAAU,oBAAc,aAAa;AAClE,QAAI,CAAC,eAAe;AAClB;IACF;AAEA,QAAI,cAAc,SAAQ,GAAI;AAC5B,WAAK,0BACA,cAAc,sBAAqB,CAA8C;IACxF,OAAO;AACL,WAAK,iBAAiB;AACtB,WAAK,eAAc;AACnB,WAAK,4BAA4B,WAAW,IAAI;IAClD;EACF;EAEQ,uBAAuB,EAAC,MAAM,OAAM,GAA8D;AACxG,SAAK,UAAU,MAAM;EACvB;EACA,SAAM;AACJ,WAAO,KAAK,kBAAkB;EAChC;EAES,WAAQ;AACf,IAAG,aAAQ,QAAQ,SAAQ,EAAG,UAAU,eAAc,IAAI;AAC1D,UAAM,SAAQ;AACd,QAAO,aAAQ,QAAQ,SAAQ,EAAG,OAAO,eAAe,GAAG;AACzD,MAAG,mBAAc,cAAc,SAAQ,EAAG,mBAAmB,IAAI;AACjE,oBAAa,+BAA+B,IAAI;IAClD;AACA,SAAK,WAAW,cAAc,KAAK,mBAAmB;EACxD;EAES,WAAQ;AACf,UAAM,SAAQ;AACd,IAAG,aAAQ,QAAQ,SAAQ,EAAG,UAAU,eAAc,IAAI;AAC1D,UAAM,cAAiB,aAAQ,QAAQ,SAAQ,EAAG,OAAO,eAAe;AACxE,QAAI,aAAa;AACf,kBAAY,kBAAiB;AAC7B,MAAG,mBAAc,cAAc,SAAQ,EAAG,mBAAmB,KAAK;AAClE,oBAAa,+BAA+B,IAAI;IAClD;EACF;EAEA,gBAAgB,cAAoB;AAClC,QAAI,iBAAiB,yBAAyB,iBAAiB,4BAC3D,iBAAiB,wBAAwB;AAC3C,aAAO,KAAK,oBAAoB;IAClC;AACA,WAAO,KAAK;EACd;EAEA,2BAAwB;AACtB,QAAO,aAAQ,QAAQ,SAAQ,EAAG,OAAO,eAAe,GAAG;AACzD,aAAO;IACT;AACA,QAAI,CAAI,mBAAc,cAAc,SAAQ,EAAG,eAAe,SAAS,GAAG;AACxE,aAAO;IACT;AACA,SAAQ,iBAAY,YAAY,SAAQ,EAAG,SAAS,SAAS;AAC7D,WAAO;EACT;EAES,WAAQ;AACf,QAAW,kBAAS,SAAS,SAAQ,EAAG,cAAc,kBAAkB,EAAE,IAAG,MAAO,QAAQ;AAC1F,WAAK,QAAQ,OAAM,EAAG,sBAAsB,KAAK,sBAAsB,KAAK,IAAI,CAAC;IACnF;EACF;EAES,iBAAc;AACrB,WAAO,KAAK,oBAAoB,eAAc;EAChD;EAEA,yBAAsB;AACpB,SAAK,WAAW,cAAa;EAC/B;EAEA,wBAAqB;AACnB,SAAK,YAAY,cAAa;EAChC;EAEQ,eAAe,OAA2E;AAChG,UAAM,gBAAgB,MAAM;AAC5B,UAAM,UAAU,cAAc,sBAAqB;AACnD,QAAI,CAAC,KAAK,kBACC,kBAAS,SAAS,SAAQ,EAAG,cAAc,uCAAuC,EAAE,IAAG,GAAI;AACpG,WAAK,KAAK,kBAAiB;IAC7B;AAEA,QAAO,aAAQ,QAAQ,SAAQ,EAAG,OAAW,aAAO,MAAM,MAAM,cAAc,OAAM,GAAI;AACtF,WAAK,0BAA2B,OAAmD;IACrF,WAAW,CAAC,KAAK,gBAAgB;AAC/B,MAAG,aAAQ,QAAQ,SAAQ,EAAG,UAAc,aAAO,QAAQ,cAAc,OAAM,CAAE;IACnF;EACF;EAEQ,kBAAkB,OAA6D;AACrF,UAAM,EAAC,cAAa,IAAI,MAAM;AAC9B,QAAI,CAAC,cAAc,SAAQ,GAAI;AAC7B;IACF;AAEA,UAAM,UAAU,cAAc,sBAAqB;AACnD,QAAI,WAAc,aAAQ,QAAQ,SAAQ,EAAG,OAAW,aAAO,MAAM,MAAM,cAAc,OAAM,GAAI;AACjG,WAAK,0BAA0B,OAAO;IACxC;EACF;EAEQ,0BAA0B,SAAgD;AAChF,SAAK,iBAAiB;AACtB,SAAK,KAAK,+BAA8B;AACxC,IAAG,aAAQ,QAAQ,SAAQ,EAAG,UAAc,oBAAc,uBAAuB,OAAO;AACxF,SAAK,4BAA4B,WAAW,KAAK;AACjD,SAAK,sBAAqB;AAC1B,UAAM,eAAe,QAAQ,cAAc,OAAM;AACjD,QAAI,KAAK,sBAAsB,KAAK,mBAAmB,MAAK,MAAO,gBAC/D,iBAAqB,oBAAc,cAAc,SAAQ,EAAG,kBAAiB,GAAI;AAKnF,WAAK,KAAK,kBAAkB,SAAS,KAAK,kBAAkB;IAC9D;AAEA,WAAO,MAAK;AACZ,IAAK,4BAAsB,8BAA8B,aAAY;AACrE,UAAM,cAAiB,aAAQ,QAAQ,SAAQ,EAAG,OAAW,aAAO,MAAM,GAAG,MAAU,mBAAa,YAAY,KAC5G,CAAQ,kBAAS,SAAS,SAAQ,EAAG,cAAc,8BAA8B,EAAE,IAAG;AAC1F,QAAI,eAAe,CAAC,KAAK,kBAAkB;AACzC,WAAK,mBAAmB,EAAC,uBAAuB,CAAA,GAAI,cAAc,CAAA,GAAI,gBAAgB,CAAA,EAAE;AACxF,MAAc,iCACV,KAAK,iBAAiB,uBAAuB,GAAiB,uBAAO,iBAAiB,CAAC,IAAI,MAC3F,IAAI,QAAQ,GAAG,GAAG,KAAK,EAAE,CAAC;AAC9B,MAAc,iCACV,KAAK,iBAAiB,cAAc,GAAiB,uBAAO,uBAAuB,CAAC,IACpF,KAAK,iBAAiB,uBAAuB,IAAI,QAAQ,GAAG,GAAG,IAAI,EAAE,CAAC;AAC1E,MAAc,iCACV,KAAK,iBAAiB,gBAAgB,GAAiB,uBAAO,oBAAoB,CAAC,IACnF,KAAK,iBAAiB,uBAAuB,IAAI,QAAQ,GAAG,GAAG,IAAI,EAAE,CAAC;IAC5E;AACA,SAAK,oBAAoB,IAAI,QAAQ,QAAQ,cAAc,OAAM,CAAE;EACrE;EAEQ,wBAAqB;AAC3B,QAAI,CAAC,KAAK,kBAAkB;AAC1B;IACF;AACA,UAAM,kBAAkB,CAAC,SAAS,SAAQ;AAK1C,WAAO,WAAW,MAAK;AACrB,UAAI,CAAC,KAAK,kBAAkB;AAC1B;MACF;AACA,UAAI,iBAAiB;AACnB,cAAM,UAAa,aAAQ,QAAQ,SAAQ,EAAG,OAAW,oBAAc,qBAAqB;AAC5F,QAAc,yBACV,KAAK,kBAAkB,SAAS,WAAM,SAClC,KAAK,iBAAiB,iBACtB,KAAK,iBAAiB,cAC1B,IAAI,WAAW,OAAO,CAAC;MAC7B;AACA,UAAI,CAAC,KAAK,gBAAgB;AACxB,QAAc,0BAAU,KAAK,iBAAiB,uBAAuB,IAAI,QAAQ,GAAG,GAAG,GAAG,CAAC,CAAC;AAC5F,aAAK,mBAAmB;MAC1B;IACF,GAAG,GAAG;EACR;EAEQ,gBAAgB,eAA8C;AACpE,SAAK,sBAAqB;AAC1B,UAAM,SAAS,cAAc,OAAM;AACnC,QAAO,aAAQ,QAAQ,SAAQ,EAAG,OAAW,aAAO,MAAM,MAAM,QAAQ;AACtE;IACF;AACA,SAAK,iBAAiB;AACtB,SAAK,eAAc;AACnB,SAAK,4BAA4B,WAAW,IAAI;AAChD,SAAK,8BAA8B,OAAO,WAAW,KAAK,qBAAqB,KAAK,MAAM,aAAa,GAAG,GAAG;EAC/G;EAEQ,mBAAmB,OAA2E;AACpG,UAAM,gBAAgB,MAAM;AAC5B,QAAO,aAAQ,QAAQ,SAAQ,EAAG,OAAW,aAAO,MAAM,MAAM,cAAc,OAAM,GAAI;AACtF;IACF;AAEA,SAAK,KAAK,+BAA8B;EAC1C;EAEA,IAAI,cAAW;AACb,WAAO,KAAK,oBAAoB,YAAW;EAC7C;EAEA,iBACI,cAAmD,UACnD,WAAmB;AACrB,QAAI,WAAW;AACb,UAAI,CAAC,KAAK,UAAS,KAAM,CAAI,aAAQ,QAAQ,SAAQ,EAAG,OAAO,eAAe,GAAG;AAC/E;MACF;IACF,OAAO;AACL,WAAK,WAAU;IACjB;AACA,SAAK,oBAAoB,mBAAmB,cAAc,UAAU,SAAS;EAC/E;EAEQ,aAAU;AAChB,QAAO,aAAQ,QAAQ,SAAQ,EAAG,OAAO,eAAe,GAAG;AACzD;IACF;AACA,SAAK,KAAK,kBAAiB;EAC7B;EAEA,eAAe,YAA+C,WAAmB;AAC/E,UAAM,EAAC,cAAc,YAAY,aAAY,IAAI;AACjD,SAAK,iBAAiB,cAAc,EAAC,YAAY,aAAY,GAAG,SAAS;EAC3E;EAEA,MAAM,kBAAkB,cAAmD,YAAoB;AAC7F,UAAM,cAAiB,iBAAY,YAAY,SAAQ;AACvD,eAAW,QAAQ,YAAY;MAAgB;;IAAA,GAAoD;AACjG,YAAM,gBAAgB,MAAM,KAAK,OAAM;AACvC,UAAI,yBAAyB,iBAAiB,cAAc,cAAc,aAAa,QAAO,CAAE,GAAG;AACjG,sBAAc,mBAAmB,cAAc,IAAI;AACnD,aAAK,wBAAwB,WAAU,EAAG,UAAU,KAAK,OAAM,GAAI,IAAI;AACvE,YAAI,CAAC,YAAY;AACf,eAAK,WAAW,SAAS,IAAI;AAC7B,wBAAc,MAAK;QACrB;AACA;MACF;IACF;EACF;EAEQ,sBACJ,aAAqC,YAAoB,UAAyC;AAEpG,aAAS,mBAAgB;AACvB,YAAM,UAAe,cAAQ,YAAY,UAAU,UAAU;AAC7D,MAAK,cAAQ,YAAY,WAAW,YAAY,CAAC,OAAO;AACxD,MAAK,kBAAY,kBAAkB,YAAY,OAAO;AAMtD,YAAM,uBAA8B,kBAAS,SAAS,SAAQ,EAAG,cAAc,2BAA2B;AAC1G,2BAAqB,IAAI,qBAAqB,IAAG,CAAE;IACrD;AAEA,gBAAY,mBAAmB,UAAU,kBAAkB;MACzD,SAAc,cAAQ,YAAY,UAAU,UAAU;MACtD,cAAc;MACd,cAAuB,2BAAgB,YAAY,UAAU;KAC9D;EACH;EAEQ,sBAAsB,aAAuC;AACnE,UAAM,uBAA8B,kBAAS,SAAS,SAAQ,EAAG,cAAc,2BAA2B;AAC1G,gBAAY,sBAAsB,eAAe;AACjD,gBAAY,YAAW,EAAG,mBACtBD,aAAWF,YAAU,aAAa,GAAG,MAAM,qBAAqB,IAAI,CAAC,qBAAqB,IAAG,CAAE,GAC/F,EAAC,SAAS,qBAAqB,IAAG,GAAI,cAAc,qBAAqB,KAAI,CAAC;AAElF,SAAK,sBACD,YAAY,YAAW,GAAE,8BACzBE,aAAWF,YAAU,eAAe,CAAC;AACzC,SAAK,sBACD,YAAY,YAAW,GAAE,gBAA4CE,aAAWF,YAAU,gBAAgB,CAAC;EACjH;EAEA,6BAA0B;AACxB,SAAK,uBAAuB,OAAO,YAAY,IAAG;EACpD;EAEQ,MAAM,qBAAqB,cAAgD;AACjF,UAAM,aAAa,MAAM,aAAa,WAAU;AAChD,QAAI,aAAa,WAAU,GAAI;AAC7B;IACF;AACA,QAAI,CAAC,YAAY;AACf;IACF;AACA,QAAI,OAAO,YAAY,IAAG,IAAK,KAAK,uBAAuB,yBAAyB;AAClF;IACF;AACA,SAAK,oBAAoB,mBAAmB,WAAW,cAAc,YAAY,QAAW,IAAI;EAClG;EAEQ,MAAM,mBAAgB;AAC5B,UAAM,YAAe,aAAQ,QAAQ,SAAQ,EAAG,OAAW,oBAAc,SAAS;AAClF,QAAI,CAAC,WAAW;AACd;IACF;AACA,QAAI,KAAK,uBAAuB;AAC9B,WAAK,sBAAsB,QAAO;IACpC;AACA,SAAK,wBACD,MAAe,mCAAyB,yBAAyB,SAAQ,EAAG,4BACxE,UAAU,SAAQ,GAAI,KAAK,qBAAqB,KAAK,IAAI,GAAG,KAAK,gBAAgB;EAC3F;EAEQ,MAAM,iCAA8B;AAC1C,UAAM,gBAAmB,aAAQ,QAAQ,SAAQ,EAAG,OAAW,aAAO,MAAM;AAC5E,UAAM,uBAAuB,gBAAgB,cAAc,MAAU,oBAAc,aAAa,IAAI;AACpG,QAAI,CAAC,sBAAsB;AACzB,WAAK,kBAAkB,WAAW,KAAK;AACvC,WAAK,eAAe,WAAW,KAAK;AACpC,WAAK,eAAe,WAAW,KAAK;AACpC,WAAK,cAAc,WAAW,KAAK;AACnC,WAAK,WAAW,WAAW,KAAK;IAClC,WAAW,KAAK,gBAAgB;AAC9B,WAAK,kBAAkB,WAAW,IAAI;AACtC,WAAK,kBAAkB,WAAW,IAAI;AACtC,WAAK,eAAe,WAAW,IAAI;AACnC,WAAK,eAAe,WAAW,IAAI;AACnC,WAAK,cAAc,WAAW,IAAI;AAClC,WAAK,WAAW,WAAW,IAAI;IACjC,OAAO;AACL,WAAK,kBAAkB,WAAW,KAAK;AACvC,WAAK,kBAAkB,WAAW,CAAC,qBAAqB,UAAS,CAAE;AACnE,WAAK,eAAe,WAAW,KAAK;AACpC,WAAK,eAAe,WAAW,KAAK;AACpC,WAAK,cAAc,WAAW,KAAK;AACnC,WAAK,WAAW,WAAW,KAAK;IAClC;AAEA,UAAM,UAAU,uBAAuB,qBAAqB,sBAAqB,IAAK;AACtF,UAAM,KAAK,sBAAsB,OAC7B,SAAkB,mCAAyB,yBAAyB,SAAQ,GAChE,+BAAkB,kBAAkB,SAAQ,CAAE;AAC9D,QAAI,SAAS;AACX,WAAK,sCAAqC;IAC5C;EACF;EAEQ,wCAAqC;EAC7C;EAEQ,iBAAc;AACpB,SAAK,KAAK,+BAA8B;AACxC,IAAG,aAAQ,QAAQ,SAAQ,EAAG,UAAc,oBAAc,uBAAuB,IAAI;AAErF,QAAI,KAAK,6BAA6B;AACpC,mBAAa,KAAK,2BAA2B;IAC/C;AACA,SAAK,iBAAiB,WAAU;EAClC;EAEQ,qBAAqB,eAA8C;AACzE,WAAO,KAAK;AACZ,QAAI,KAAK,kBAAkB,cAAc,SAAQ,GAAI;AACnD;IACF;AAEA,eAAWI,kBAAqB,oBAAc,cAAc,SAAQ,EAAG,OAAW,oBAAc,aAAa,GAAG;AAC9G,UAAIA,eAAc,SAAQ,GAAI;AAC5B,QAAG,aAAQ,QAAQ,SAAQ,EAAG,UAAc,aAAO,QAAQA,eAAc,OAAM,CAAE;AACjF;MACF;IACF;EACF;EAEA,aAAU;AACR,UAAM,eAAe,KAAK,oBAAoB,oBAAmB;AACjE,QAAI,cAAc;AAChB,WAAc,kCAAwB,sBAAsB,YAAY;IAC1E;EACF;EAEQ,eAAe,OAA+E;AACpG,UAAM,eAAe,MAAM;AAC3B,IAAG,aAAQ,QAAQ,SAAQ,EAAG,UAAoB,yBAAa,cAAc,YAAY;AACzF,QAAI,KAAK,WAAW,WAAU,KACnB,kBAAS,SAAS,SAAQ,EAAG,cAAc,0BAA0B,EAAE,IAAG,GAAI;AACvF,WAAK,KAAK,kBAAkB,cAAc,IAAI;IAChD;EACF;EAEA,cAAW;AACT,UAAM,SAAY,aAAQ,QAAQ,SAAQ,EAAG,OAAW,aAAO,MAAM;AACrE,QAAI,CAAC,QAAQ;AACX,aAAO;IACT;AACA,UAAM,gBAAgB,OAAO,MAAU,oBAAc,aAAa;AAClE,QAAI,CAAC,eAAe;AAClB,aAAO;IACT;AAEA,QAAI,KAAK,gBAAgB;AACvB,WAAK,iBAAiB;AACtB,oBAAc,OAAM;IACtB,OAAO;AAEL,oBAAc,MAAK;IACrB;AAEA,SAAK,eAAc;AACnB,WAAO;EACT;EAEQ,kBAAe;AACrB,QAAI,CAAC,KAAK,gBAAgB;AACxB,aAAO;IACT;AAEA,SAAK,iBAAiB;AAEtB,SAAK,eAAc;AACnB,UAAM,SAAY,aAAQ,QAAQ,SAAQ,EAAG,OAAW,aAAO,MAAM;AACrE,WAAO,SAAS,OAAO,MAAU,oBAAc,aAAa,IAAI;EAClE;EAEQ,aAAU;AAChB,UAAM,gBAAgB,KAAK,gBAAe;AAC1C,QAAI,eAAe;AACjB,oBAAc,kCAAkC,GAAG;AACnD,oBAAc,OAAM;IACtB;EACF;EAEQ,qBAAkB;AACxB,UAAM,gBAAgB,KAAK,gBAAe;AAC1C,QAAI,eAAe;AACjB,WAAK,cAAc,aAAY,EAAG,mBAAkB;AACpD,oBAAc,OAAM;IACtB;EACF;EAEA,WAAQ;AACN,UAAM,gBAAgB,KAAK,gBAAe;AAC1C,QAAI,eAAe;AACjB,WAAK,cAAc,SAAQ;IAC7B;AACA,WAAO;EACT;EAEA,WAAQ;AACN,UAAM,gBAAgB,KAAK,gBAAe;AAC1C,QAAI,eAAe;AACjB,WAAK,cAAc,SAAQ;IAC7B;AACA,WAAO;EACT;EAEA,gBAAa;AACX,UAAM,gBAAgB,KAAK,gBAAe;AAC1C,QAAI,eAAe;AACjB,oBAAc,sBAAqB;IACrC;AACA,WAAO;EACT;EAEA,UAAO;AACL,UAAM,gBAAgB,KAAK,gBAAe;AAC1C,QAAI,eAAe;AACjB,WAAK,cAAc,QAAO;IAC5B;AACA,WAAO;EACT;EAEQ,MAAM,mBAAmB,YAA6C;AAC5E,UAAM,mBAAsB,aAAQ,QAAQ,SAAQ,EAAG,OAAW,mBAAa,gBAAgB;AAC/F,QAAI,CAAC,kBAAkB;AACrB;IACF;AAEA,UAAM,eACF,MAAe,mCAAyB,yBAAyB,SAAQ,EAAG,yBACxE,WAAW,cAAc,WAAW,YAAY,CAAC;AACzD,UAAM,cAAc,aAAa,KAAK,cAAY,SAAS,kBAAkB,iBAAiB,aAAa;AAC3G,QAAI,eAAe,KAAK,gBAAe,GAAI;AACzC,kBAAY,mBAAkB;IAChC;EACF;EAEA,0BAAuB;AACrB,IAAO,kBAAS,SAAS,SAAQ,EAC5B,cAAc,oBAAoB,EAClC,IAAI,CAAQ,kBAAS,SAAS,SAAQ,EAAG,cAAc,oBAAoB,EAAE,IAAG,CAAE;EACzF;EAEQ,gCAA6B;AACnC,UAAM,SAAgB,kBAAS,SAAS,SAAQ,EAAG,cAAc,oBAAoB,EAAE,IAAG;AAC1F,SAAK,8BAA8B,WAAW,CAAC,MAAM;AACrD,SAAK,oBAAoB,6BAA6B,MAAM;EAC9D;EAEQ,qBAAkB;AACxB,UAAM,eAAe,SAAS,cAAc,kBAAkB;AAC9D,iBAAa,UAAU,IAAI,uBAAuB;AAClD,iBAAa,aACT,SACA,GAAiB,wBAAQ,OAAO,EAAE,MAAM,EAAC,SAAS,qDAAoD,CAAC,CAAC,EAAE;AAE9G,UAAM,mBACF,IAAO,aAAQ,cAAcF,aAAWF,YAAU,+BAA+B,GAAG,MAAM;AAC9F,qBAAiB,iBAAgB,SAAwC,KAAK,YAAY,IAAI;AAC9F,UAAM,2BACF,IAAO,aAAQ,cAAcE,aAAWF,YAAU,8BAA8B,GAAG,MAAM;AAC7F,6BAAyB,iBAAgB,SAAwC,KAAK,oBAAoB,IAAI;AAC9G,UAAM,oBAAuB,aAAQ,QAAQ,4BACzC,KAAK,mBAAmB,CAAC,0BAA0B,gBAAgB,GAAG,CAAA,CAAE;AAC5E,sBAAkB,cAAc,KAAK;AACrC,iBAAa,kBAAkB,iBAAiB;AAEhD,iBAAa,kBAAqB,aAAQ,QAAQ,mBAAmB,KAAK,cAAc,CAAC;AACzF,iBAAa,kBAAqB,aAAQ,QAAQ,mBAAmB,KAAK,cAAc,CAAC;AACzF,iBAAa,kBAAqB,aAAQ,QAAQ,mBAAmB,KAAK,aAAa,CAAC;AACxF,iBAAa,kBAAqB,aAAQ,QAAQ,mBAAmB,KAAK,UAAU,CAAC;AAErF,iBAAa,gBAAe;AAC5B,iBAAa,kBAAqB,aAAQ,QAAQ,mBAAmB,KAAK,6BAA6B,CAAC;AAExG,WAAO;EACT;EAEQ,2BAAwB;AAC9B,UAAM,qBAAqB,SAAS,cAAc,KAAK;AACvD,uBAAmB,UAAU,IAAI,8BAA8B;AAE/D,UAAM,QAAQE,aAAWF,YAAU,uBAAuB;AAC1D,UAAM,UAAiB,kBAAS,SAAS,SAAQ,EAAG,cAAc,2BAA2B;AAC7F,uBAAmB,YAAe,gBAAW,sBAAsB,OAAO,OAAO,CAAC;AAElF,WAAO;EACT;EAEA,sBACI,OAAc,aACd,QACmD;AACrD,QAAI,kBAA4B,yBAAa,cAAc;AACzD,WAAK,wBAAwB,OAAO,aAAa,MAAM;AACvD;IACF;AACA,QAAI,kBAAkB,mBAAmB;AACvC,WAAK,6BAA6B,aAAa,MAAM;AACrD;IACF;AACA,QAAI,kBAA4B,yBAAa,YAAY;AACvD,WAAK,sBAAsB,aAAa,MAAM;AAC9C;IACF;AACA,QAAI,kBAAsB,mBAAa,cAAc;AACnD,WAAK,wBAAwB,aAAa,MAAM;AAChD;IACF;AACA,SAAK,0BAA0B,aAAa,MAAM;EACpD;EAEQ,wBACJ,OAAc,aAAyC,cAAiD;AAC1G,QAAI,CAAC,MAAM,QAAQ;AACjB;IACF;AAEA,UAAM,cAAe,MAAM;AAC3B,QAAI,CAAC,aAAa,QAAO,EAAG,iBAAgB,KACxC,CAAC,YAAY,mBAAmB,KAAK,wBAAwB,OAAM,EAAG,OAAO,KAC7E,EAAO,cAAQ,YAAY;MAAS;;IAAA,KACxB,8BAAkB,kBAAkB,SAAQ,EAAG,0CACrD,YAAY,IAAI;AACxB,kBAAY,cAAa,EAAG,WACxBE,aAAWF,YAAU,eAAe,GAAG,KAAK,kBAAkB,KAAK,MAAM,YAAY,GAAG;QACtF,cAAc;OACf;IACP;AAEA,UAAM,qBAAqB;AAC3B,QAAO,oBAAe,eAAe,SAAQ,EAAG,UAAU,kBAAkB,GAAG;AAC7E,YAAM,gBAAgB,KAAK,QAAQ,cAAc,sBAAsB;AACvE,UAAI,CAAC,YAAY,mBAAmB,aAAa,KAAK,aAAa,YAAW,EAAG,WAAU,GAAI;AAC7F,QAAG,aAAQ,QAAQ,SAAQ,EAAG,UAAoB,yBAAa,cAAc,YAAY;AACzF,YAAS,cAAQ,WAAW,0BAA0B,SAAS;AAC7D,gBAAMK,UAAY,oBAAe,eAAe,SAAQ,EAAG,UAAU,kBAAkB;AACvF,gBAAM,UAAU,YAAY,cAAa,EAAG,kBACxCA,QAAO,MAAK,GAAI,OAAO,oBAClB,cAAQ,WAAW,+BAA+B,WAAW;AACtE,kBAAQ,eAAc,EAAG,aAAa,iCAAiCH,aAAWF,YAAU,UAAU,CAAC;AACvG,oCACI,SAASK,SAAQH,aAAWF,YAAU,iBAAiB,GAAG,6CAC1D,qBAAqB,cAAc;AACvC,oCACI,SAASK,SAAQH,aAAWF,YAAU,iBAAiB,GAAG,6BAC1D,qBAAqB,SAAS;AAClC,oCACI,SAASK,SAAQH,aAAWF,YAAU,oBAAoB,GAAG,4CAC7D,qBAAqB,QAAQ;QACnC,WAAgB,cAAQ,WAAW,uBAAuB,SAAS;AACjE,sBAAY,cAAa,EAAG,aACxB,oBAAoB,QAAW,OAAO,QACjC,cAAQ,WAAW,+BAA+B,WAAW;QACxE,OAAO;AACL,sBAAY,cAAa,EAAG,aAAa,kBAAkB;QAC7D;MACF;IACF;AAGA,QAAI,aAAa,YAAW,EAAG,WAAU,KAC5B,mCAAyB,yBAAyB,SAAQ,EAC9D,uBAAuB,YAAY,EACnC,MAAM,YAAU,OAAO,aAAY,CAAE,GAAG;AAC/C,WAAK,cAAc,oCAAoC,aAAa,YAAY;IAClF;AAEA,aAAS,0BACL,SAAiCK,SAAsC,OACvE,QAAgB,cAAoB;AACtC,cAAQ,eAAc,EAAG,WACrB,OAAO,MAAMA,QAAO,QAAQ,EAAC,OAAM,CAAC,GAAG,EAAC,UAAU,CAACA,QAAO,QAAO,GAAI,aAAY,CAAC;IACxF;EACF;EAEQ,6BAA6B,aAAyC,QAAyB;AACrG,QAAI,OAAO,aAAY,EAAG,YAAW,EAAG,gBAAe,KAAM,OAAO,WAAW,MAAM,UAAU,KAAK,OAAO;AACzG;IACF;AACA,gBAAY,aAAY,EAAG,aAAa,6BAA6B;EACvE;EAEA,sBAAsB,aAAyC,YAA6C;AAC1G,UAAM,eAAe,WAAW;AAEhC,QAAI,CAAU,mCAAyB,yBAAyB,SAAQ,EAC9D,uBAAuB,YAAY,EACnC,MAAM,YAAU,OAAO,aAAY,CAAE,GAAG;AAEhD;IACF;AACA,UAAM,cAAc,aAAa,YAAW;AAC5C,QAAI,YAAY,WAAU,GAAI;AAC5B,YAAM,SAAY,aAAQ,QAAQ,SAAQ,EAAG,OAAW,aAAO,MAAM;AACrE,YAAM,gBAAgB,SAAS,OAAO,MAAU,oBAAc,aAAa,IAAI;AAC/E,UAAI,eAAe,SAAQ,GAAI;AAC7B,oBAAY,aAAY,EAAG,WACvBH,aAAWF,YAAU,cAAc,GAAG,KAAK,mBAAmB,KAAK,MAAM,UAAU,GACnF,EAAC,cAAc,mBAAkB,CAAC;MACxC;AAEA,WAAK,cAAc,oCAAoC,aAAa,YAAY;IAClF;EACF;EAEQ,wBAAwB,aAAyC,cAA2C;AAElH,UAAM,SAAgB,kBAAS,SAAS,SAAQ,EAAG,cAAc,oBAAoB,EAAE,IAAG;AAC1F,UAAM,mBAAsB,aAAQ,QAAQ,SAAQ,EAAG,OAAW,mBAAa,gBAAgB;AAE/F,aAAS,iBAAc;AACrB,UAAI,aAAa,SAAS,QAAQ;AAChC,eAAO,aAAa;MACtB;AACA,UAAI,aAAa,YAAY,QAAQ;AACnC,eAAO;MACT;AACA,aAAO,aAAa;IACtB;AACA,UAAM,uBAAuB,eAAc;AAE3C,gBAAY,aAAY,EAAG,WACvBE,aAAWF,YAAU,qBAAqB,GAC1C,MAAM,kBAAkB,OAAM,EACnB,MAAU,mBAAa,YAAY,GAClC,mBAAmB,kBAAkB,YAAY,GAC7D,EAAC,cAAc,2BAA0B,CAAC;AAE9C,UAAM,0BAA0B,YAAY,iBAAgB;AAC5D,UAAM,wBAA6B,4BAAsB;AAEzD,QAAI,aAAa,SAAS,UAAU;AAClC,8BAAwB,WAAWE,aAAWF,YAAU,kBAAkB,GAAG,MAAK;AAChF,8BAAsB,SAAS,aAAa,KAAK;MACnD,GAAG,EAAC,cAAc,uBAAsB,CAAC;AACzC,8BAAwB,WAAWE,aAAWF,YAAU,qBAAqB,GAAG,MAAK;AACnF,8BAAsB,SAAkB,2BAAgB,kBAAkB,aAAa,KAAK,CAAC;MAC/F,GAAG,EAAC,cAAc,4BAA2B,CAAC;AAC9C,8BAAwB,WAAWE,aAAWF,YAAU,uBAAuB,GAAG,MAAK;AACrF,8BAAsB,SAAS,KAAK,UAAU,aAAa,KAAK,CAAC;MACnE,GAAG,EAAC,cAAc,8BAA6B,CAAC;IAClD,WAES,2BAA2B,IAAI,aAAa,IAAI,GAAG;AAC1D,8BAAwB,WAAWE,aAAWF,YAAU,OAAO,EAAC,KAAK,OAAO,oBAAoB,EAAC,CAAC,GAAG,MAAK;AACxG,8BAAsB,SAAS,aAAa,WAAW;MACzD,GAAG,EAAC,cAAc,iBAAgB,CAAC;IACrC,WAES,aAAa,SAAS,UAAU;AACvC,YAAM,0BAA0B,YAAyB;AACvD,cAAM,SAAS,MAAM,aAAa,iBAAiB,sBAAsB,CAAC;UACrB,OAAO;YACL,SAAS,aAAa;YACtB;;SAEH,CAAC;AACrD,8BAAsB,SAAS,MAAM;MACvC;AAEA,8BAAwB,WACpBE,aAAWF,YAAU,OAAO,EAAC,KAAK,OAAO,oBAAoB,EAAC,CAAC,GAAG,yBAClE,EAAC,cAAc,cAAa,CAAC;IACnC,WAES,aAAa,SAAS,YAAY;AACzC,kBAAY,aAAY,EAAG,WACvBE,aAAWF,YAAU,sBAAsB,GAAG,KAAK,uBAAuB,KAAK,MAAM,YAAY,GACjG,EAAC,cAAc,2BAA0B,CAAC;IAChD;AAEA,aAAS,qBAAmC,MAAuC;AACjF,YAAM,UAAU,KAAK;AACrB,YAAMM,UAAS,KAAK;AAEpB,UAAI,YAAY,OAAO;AACrB,YAAI,gBAAgB,KAAK;AACvB,gBAAM,WAAW,MAAM,KAAK,KAAK,QAAO,CAAE;AAC1C,gBAAM,UAAU,SAAS,WAAW,IAAI,KAAK,KAAK,UAAU,UAAU,MAAMA,OAAM;AAClF,iBAAO,WAAW,OAAO;QAC3B;AACA,eAAO;MACT;AACA,UAAI,YAAY,OAAO;AACrB,YAAI,gBAAgB,KAAK;AACvB,gBAAM,SAAS,MAAM,KAAK,KAAK,OAAM,CAAE;AACvC,gBAAM,UAAU,OAAO,WAAW,IAAI,KAAK,KAAK,UAAU,QAAQ,MAAMA,OAAM;AAC9E,iBAAO,WAAW,OAAO;QAC3B;AACA,eAAO;MACT;AACA,UAAI,YAAY,QAAQ;AACtB,eAAO,gBAAgB,UAAU,KAAK,YAAY;MACpD;AACA,UAAI,WAAW,OAAO,SAAS,aAAa;AAC1C,eAAO,OAAO,OAAO;MACvB;AACA,UAAI;AACF,eAAO,KAAK,UAAU,MAAM,MAAMA,OAAM;MAC1C,QAAQ;AACN,eAAO,OAAO,IAAI;MACpB;IACF;EACF;EAEQ,0BACJ,aAAyC,SAA0C;AACrF,UAAM,eAAe,KAAK,UAAU,mBAAmB,QAAQ,IAAG,CAAE;AACpE,QAAI,CAAC,cAAc;AACjB;IACF;AACA,UAAM,WAAWJ,aAAWF,YAAU,kBAAkB;AACxD,UAAM,WAAuB,KAAK,eAAe,KAAK,MAAM,aAAa,WAAW,GAAG,CAAC,CAAC;AACzF,gBAAY,cAAa,EAAG,WAAW,UAAU,UAAU,EAAC,cAAc,oBAAmB,CAAC;EAChG;EAEQ,uBAAuB,cAA2C;AACxE,SAAS,mBAAa,eAAe,iBAAiB,YAAY,EAC7D,eAAc,EACd,KACG,oBAAkB,eAAe,cAAa,EACvB,uBAAuB,cAAc,EACrC,KAAK,KAAK,sBAAsB,KAAK,IAAI,CAAC,CAAC;EAC5E;EAEQ,MAAM,sBAAsB,UAE9B;AACJ,QAAI,CAAC,UAAU,UAAU;AACvB;IACF;AAEA,UAAM,aACF,MAAe,mCAAyB,yBAAyB,SAAQ,EAAG,wBACxE,SAAS,QAAQ;AACzB,QAAI,YAAY;AACd,WAAK,eAAe,UAAU;IAChC;EACF;EAEQ,yBAAsB;AAC5B,SAAK,KAAK,kBAAiB;AAC3B,SAAK,WAAW,SAAS,IAAI;EAC/B;EAEQ,wBAAqB;AAC3B,QAAI,CAAQ,kBAAS,SAAS,SAAQ,EAAG,cAAc,uCAAuC,EAAE,IAAG,GAAI;AACrG;IACF;AACA,SAAK,KAAK,kBAAiB;AAC3B,SAAK,YAAY,SAAS,IAAI;EAChC;EAEQ,wBAAqB;AAC3B,QAAI;AACJ,UAAM,WAAkB,kBAAS,SAAS,SAAQ,EAAG,cAAc,kBAAkB,EAAE,IAAG;AAC1F,QAAI,aAAa,SAAS;AACxB,mBAAa;IACf,WAAW,aAAa,UAAU;AAChC,mBAAa;IACf,OAAO;AACL,mBAAgB,mBAAc,cAAc,SAAQ,EAAG,QAAQ,cAAc;IAC/E;AAEA,QAAI,KAAK,mBAAmB,eAAe,CAAC,KAAK,YAAY,WAAU,GAAI;AACzE;IACF;AAEA,QAAI,KAAK,iBAAiB,mBAAkB,GAAI;AAC9C;IACF;AAEA,QAAI,KAAK,iBAAiB;AACxB,WAAK,gBAAgB,OAAM;IAC7B;AAEA,SAAK,YAAY,YAAY,CAAC,UAAU;AACxC,SAAK,YAAY,QAAQ,UAAU,OAAO,+BAA+B,UAAU;AAEnF,kBAAa,+BAA+B,IAAI;AAGhD,UAAM,OAAO,IAAO,YAAO,KAAI;AAC/B,SAAK,QAAQ,YAAY,KAAK,YAAY;AAC1C,SAAK,QAAQ,YAAY,KAAK,kBAAkB;AAEhD,SAAK,4BAA4B,iBAAiB,IAAI,iBAAiB,GAAG;AAC1E,SAAK,mBAAsB,iBAAY,YAAY,SAAQ,EAAG,oBAC1D,KAAK,sBAAsB,KAAK,IAAI,GAAG,QAAW,OAAO;AAC7D,SAAK,iBAAiB,OAAM,EAAG,QAAQ,UAAU,IAAI,iBAAiB;AACtE,SAAK,iBAAiB,OAAM,EAAG,KAAK,KAAK,OAAO;AAChD,SAAK,iBAAiB,OAAM,EAAG,QAAQ,YAAY,KAAK,sBAAsB,QAAO,CAAE;AACvF,SAAK,iBAAiB,sBAAsB,qBAAqB;AAEjE,QAAI,KAAK,oBAAoB;AAC3B,WAAK,iBAAiB,WAAW,KAAK,kBAAkB;IAC1D;AAEA,UAAM,gBAAmB,iBAAY,YAAY,SAAQ,EAAG,KAAK,wBAAwB;AACzF,UAAM,iBAAoB,iBAAY,YAAY,SAAQ,EAAG,KAAK,qBAAqB;AAEvF,QAAI,KAAK,sBAAsB;AAC7B,WAAK,YAAY,iBAAiB,KAAK,oBAAoB;AAC3D,WAAK,uBAAuB;IAC9B;AAEA,QAAI,CAAC,YAAY;AAEf,WAAK,iBAAiB,WAAW,KAAK,gBAAgB;AACtD,WAAK,KAAK,iBAAiB,SAAS,aAAa;AACjD,WAAK,KAAK,iBAAiB,SAAS,cAAc;AAClD,WAAK,KAAK,iBAAiB,SAAS,KAAK,aAAa;AACtD,WAAK,iCAAiC,KAAK;AAC3C,WAAK,kBAAkB;AACvB,WAAK,YAAY,iBAAiB,KAAK,YAAY;IACrD,OAAO;AACL,YAAM,cACF,IAAO,iBAAY,YAAY,MAAM,MAAM,mDAAmD,GAAG;AACrG,kBAAY,cAAc,IAAI;AAG9B,WAAK,KAAK,iBAAiB,SAAS,aAAa;AACjD,WAAK,KAAK,iBAAiB,SAAS,KAAK,aAAa;AAEtD,YAAM,iBAAoB,iBAAY,YAAY,SAAQ,EAAG,qBACzD,KAAK,sBAAsB,KAAK,IAAI,GAAG,gCAAgC;AAC3E,kBAAY,iBAAiB,eAAe,WAAU,CAAE;AACxD,WAAK,uBAAuB,eAAe,WAAU,EAAG,cAAa;AACrE,WAAK,YAAY,eAAe,KAAK,oBAAoB;AACzD,WAAK,YAAY,eAAe,KAAK,YAAY;AACjD,qBAAe,WAAW,cAAc;AACxC,qBAAe,WAAW,KAAK,gBAAgB;AAC/C,qBAAe,sBAAsB,sBAAsB;AAC3D,WAAK,iCAAiC;AACtC,WAAK,kBAAkB;IACzB;AAEA,SAAK,iBAAiB,sBAAsB,wBAAwB;AACpE,UAAM,wBAAmC,4BAAgB,gBAAgB,SAAQ,EAAG,aAAY;AAChG,aAAS,IAAI,GAAG,IAAI,sBAAsB,QAAQ,EAAE,GAAG;AACrD,WAAK,wBAAwB,sBAAsB,CAAC,CAAC;IACvD;AAEA,SAAK,YAAY,iBAAiB,KAAK,eAAe;EACxD;EAEA,oBAAiB;AACf,WAAU,iBAAY,YAAY,SAAQ,EAAG,SAAS,SAAS;EACjE;EAEQ,0BACJ,OAA0F;AAC5F,SAAK,wBAAwB,MAAM,IAAI;EACzC;EAEQ,wBAAwBO,OAAoD;AAClF,QAAIA,MAAK,UAAS,MAAO,KAAK,MAAM;AACjC,WAAK,+BAAwD,WAAWA,KAAI;IAC/E;EACF;EAEA,cAAW;AACT,WAAO,KAAK;EACd;EAEQ,WAAW,cAA0B;AAC3C,UAAM,QAAQ,aAAa;AAC3B,QAAI,CAAC,MAAM,QAAQ;AACjB;IACF;AACA,UAAM,QAAQ,MAAM,CAAC,EAAE,iBAAgB;AACvC,QAAI,OAAO,aAAa;AACtB,MAAK,4BAAsB,8BAA8B,oCAAoC,MAAM,UAAU;AAC7G,MAAK,kBAAY,YAAiB,kBAAY,OAAO,mBAAmB;AACxE,WAAQ,iBAAY,YAAY,SAAQ,EAAG,SAAS,iBAAiB;IACvE;EACF;;AAGK,IAAM,0BAA0B;AAChC,IAAM,kBAAkB;AAEzB,IAAO,qBAAP,MAAyB;EAC7B,MAAM,OAAO,YAA+C,WAAmB;AAC7E,iBAAa,SAAQ,EAAG,eAAe,YAAY,SAAS;EAC9D;;AAGI,IAAO,0BAAP,MAAO,yBAAuB;EAClC,OAAO;EACP,OAAO,SAAS,OAA4B,EAAC,UAAU,MAAK,GAAC;AAC3D,QAAI,CAAC,yBAAwB,aAAa,KAAK,UAAU;AACvD,+BAAwB,YAAY,IAAI,yBAAuB;IACjE;AACA,WAAO,yBAAwB;EACjC;EAEA,MAAM,OAAO,iBAAyD,WAAmB;AACvF,UAAM,EAAC,cAAc,OAAO,EAAC,OAAO,MAAM,KAAK,GAAE,EAAC,IAAI;AACtD,iBAAa,SAAQ,EAAG,iBAAiB,cAAc,EAAC,MAAM,GAAE,GAAG,SAAS;EAC9E;;AAGI,IAAO,2BAAP,MAA+B;EACnC,MAAM,OAAO,aAAyC,WAAmB;AACvE,UAAM,aACF,MAAe,mCAAyB,yBAAyB,SAAQ,EAAG,wBACxE,WAAW;AACnB,QAAI,YAAY;AACd,mBAAa,SAAQ,EAAG,eAAe,YAAY,SAAS;IAC9D;EACF;;AAGI,IAAO,uBAAP,MAA2B;EAC/B,MAAM,OAAO,cAAmD,WAAmB;AACjF,iBAAa,SAAQ,EAAG,iBAAiB,cAAc,QAAW,SAAS;EAC7E;;AAGI,IAAO,gCAAP,MAAoC;EAExC,MAAM,OAAO,SAAgD;AAC3D,QAAW,kBAAS,SAAS,SAAQ,EAAG,cAAc,uCAAuC,EAAE,IAAG,GAAI;AACpG,aAAO,MAAM,aAAa,SAAQ,EAAG,kBAAiB;IACxD;EACF;;AAGI,IAAO,0BAAP,MAA8B;EAClC,aAAa,SAA6B,UAAgB;AACxD,UAAMJ,SAAQ,aAAa,SAAQ;AACnC,QAAI,CAACA,OAAM,yBAAwB,GAAI;AACrC,aAAO;IACT;AACA,YAAQ,UAAU;MAChB,KAAK,yBAAyB;AAoB5B,cAAM,+BAA+B,QAAQ,OAAU,sBAAiB,iBAAiB,KACrF,CAAQ,kBAAS,SAAS,SAAQ,EAAG,cAAc,8BAA8B,EAAE,IAAG;AAC1F,YAAI,8BAA8B;AAGhC,iBAAO;QACT;AACA,QAAAA,OAAM,YAAW;AACjB,eAAO;MACT;IACF;AACA,WAAO;EACT;;AAGI,IAAOK,kBAAP,MAAqB;EACzB,aAAa,SAA6B,UAAgB;AACxD,UAAML,SAAQ,aAAa,SAAQ;AACnC,YAAQ,UAAU;MAChB,KAAK,sBAAsB;AACzB,QAAAA,OAAM,SAAQ;AACd,eAAO;MACT;MACA,KAAK,sBAAsB;AACzB,QAAAA,OAAM,cAAa;AACnB,eAAO;MACT;MACA,KAAK,iBAAiB;AACpB,QAAAA,OAAM,SAAQ;AACd,eAAO;MACT;MACA,KAAK,qBAAqB;AACxB,QAAAA,OAAM,QAAO;AACb,eAAO;MACT;MACA,KAAK,wBAAwB;AAC3B,QAAAA,OAAM,WAAU;AAChB,eAAO;MACT;MACA,KAAK,sCAAsC;AACzC,QAAAA,OAAM,wBAAuB;AAC7B,eAAO;MACT;MACA,KAAK,+BAA+B;AAClC,cAAM,QAAQ,QAAQ,OAAO,iBAAiB;AAC9C,YAAI,OAAO;AACT,gBAAM,EAAC,OAAO,YAAW,IAAI,MAAM;AACnC,cAAI,OAAO,YAAY,SAAS,YAAY,UAAU,KAAK,MAAM,YAAY,UAAU,KAAK,EAAE;AAC9F,gBAAM,mBAAmB,QAAQ,OAAW,mBAAa,gBAAgB;AACzE,gBAAM,eAAe,kBAAkB,OAAM,EAAG,MAAU,mBAAa,YAAY;AACnF,cAAI,oBAAoB,cAAc;AACpC,kBAAM,UAAU,aAAa,kBAAkB,kBAAkB,IAAI;AACrE,mBAAgB,wBAAe,eAAe,kBAAkB,IAAI;AACpE,iBAAK,aAAa;cAAyB;cAAkB;cAAS;;cAA8B;YAAI;UAC1G;QACF;AACA,eAAO;MACT;MACA,KAAK,uCAAuC;AAC1C,cAAM,eAAeA,OAAM,YAAW,EAAG,oBAAmB;AAC5D,YAAI,iBAAiB,MAAM;AACzB,iBAAO;QACT;AACA,aAAKA,OAAM,kBAAkB,YAAY;AACzC,eAAO;MACT;MACA,KAAK,oCAAoC;AACvC,QAAAA,OAAM,uBAAsB;AAC5B,eAAO;MACT;MACA,KAAK,mCAAmC;AACtC,QAAAA,OAAM,sBAAqB;AAC3B,eAAO;MACT;MACA,KAAK,4BAA4B;AAC/B,cAAM,UAAiB,kBAAS,SAAS,SAAQ,EAAG,cAAuB,mBAAmB;AAC9F,gBAAQ,IAAI,CAAC,QAAQ,IAAG,CAAE;AAC1B,eAAO;MACT;IACF;AACA,WAAO;EACT;;AAGI,IAAO,kBAAP,MAAO,yBAA2B,YAAO,KAAI;EAChC;EACjB,cAAA;AACE,UAAM,EAAC,OAAO,GAAiB,sBAAM,eAAe,EAAE,MAAM,EAAC,QAAQ,KAAI,CAAC,CAAC,GAAE,CAAC;AAC9E,SAAK,QAAQ,UAAU,IAAI,sBAAsB;AACjD,SAAK,OAAO,aAAa,SAAQ,EAAG,YAAW;EACjD;EAES,WAAQ;AACf,IAAG,aAAQ,QAAQ,SAAQ,EAAG,UAAU,kBAAiB,IAAI;AAC7D,UAAM,SAAQ;AACd,QAAI,CAAC,aAAa,SAAQ,EAAG,UAAS,GAAI;AACxC,WAAK,kBAAiB;IACxB,OAAO;AACL,MAAG,mBAAc,cAAc,SAAQ,EAAG,mBAAmB,IAAI;IACnE;AACA,iBAAa,+BAA+B,aAAa,SAAQ,CAAE;EACrE;EAES,WAAQ;AACf,IAAG,mBAAc,cAAc,SAAQ,EAAG,mBAAmB,KAAK;AAClE,mBAAe,MAAK;AAClB,mBAAa,+BAA+B,aAAa,SAAQ,CAAE;IACrE,CAAC;AACD,UAAM,SAAQ;AACd,IAAG,aAAQ,QAAQ,SAAQ,EAAG,UAAU,kBAAiB,IAAI;EAC/D;EAEA,oBAAiB;AACf,SAAK,KAAK,KAAK,KAAK,OAAO;EAC7B;;;;ADt6CF,IAAM,EAAC,4BAA4B,2BAA0B,IAAgB;AAE7E,IAAMM,cAAY;;;;EAIhB,kCAAkC;;;;EAIlC,sBAAsB;;;;EAItB,WAAW;;;;EAIX,eAAe;;;;EAIf,0BAA0B;;;;EAI1B,aAAa;;;;EAIb,gBAAgB;;;;;EAKhB,kBAAkB;;;;EAIlB,gBAAgB;;;;;;EAMhB,mBAAmB;;;;;EAKnB,kBAAkB;;;;EAIlB,cAAc;;;;EAId,kBAAkB;;;;EAIlB,iBAAiB;;;;;EAKjB,6BAA6B;;;;EAI7B,8BACI;;;;EAIJ,6BAA6B;;;;EAI7B,kBAAkB;;;;EAIlB,iBAAiB;;;;EAIjB,uBAAuB;;;;EAIvB,oBAAoB;;;;;;EAMpB,cAAc;;;;;EAKd,mBAAmB;;;;;EAKnB,mBAAmB;;;;EAInB,aAAa;;;;EAIb,wBAAwB;;AAE1B,IAAMC,SAAY,YAAK,kBAAkB,oCAAoCD,WAAS;AACtF,IAAME,eAAkB,YAAK,mBAAmB,KAAK,QAAWD,MAAI;AAMpE,IAAM,+BAA+B;AAGrC,IAAM,sCAAsC;AAC5C,IAAM,gDAAgD;AActD,IAAM,gCAAgC,oBAAI,IAAG;AAEvC,IAAO,iBAAP,cAA8B,OAAM;EA6CnB;EA5Cb,SAAqD;;EAErD,oBAA4D;;;EAG5D,cAAc;EACd,iBAAmC;EACnC,mBAA4C;EACnC;EACA;;;EAGT,gBAAqD;EACrD;;;;;EAMA,cAAuC,CAAA;EACvC,sBAAiG;EACxF;;;;;EAKT;;;;EAIA;EACA;EACA,4BAA8C;EAC9C,yBAAoD;EAC5D,+BAAuD;EACvD,kCAAkC;EAC1B,sBAA+C;EACvD,uCAAuC;EACtB;EAEA;EAEjB,YACI,cACiB,aAAgD;AACnE,UAAM,YAAY;AADC,SAAA,cAAA;AAGnB,kCAA8B,IAAI,cAAc,IAAI;AAEpD,SAAK,eAAe,aAAa,SAAQ;AACzC,SAAK,oBAAgC,+BAAkB,kBAAkB,SAAQ;AAEjF,SAAK,kBAAkB,iBACP,+BAAkB,OAAO,iBAAiB,KAAK,kBAAkB,IAAI;AACrF,SAAK,kBAAkB,iBACP,+BAAkB,OAAO,mBAAmB,KAAK,kBAAkB,IAAI;AAEvF,SAAK,aAAa,iBAA2B,yBAAa,OAAO,oBAAoB,KAAK,oBAAoB,IAAI;AAClH,SAAK,aAAa,iBACJ,yBAAa,OAAO,sBAAsB,KAAK,sBAAsB,IAAI;AAEvF,SAAK,6BAA6B,oBAAI,IAAG;AAEzC,SAAK,SAAa,yBAAmB,mBAAmB,SAAQ;AAChE,SAAK,OAAO,iBAAgB,UACc,KAAK,6BAA6B,KAAK,IAAI,GAAG,IAAI;AAE5F,SAAK,qBAAqB,KAAK,8BAA8B,KAAK,IAAI;AACtE,IAAU,8BAAkB,kBAAkB,SAAQ,EAAG,kBAAkB,KAAK,kBAAkB;AAElG,IAAG,aAAQ,QAAQ,SAAQ,EAAG,wBAA4B,oBAAc,WAAW,KAAK,kBAAkB,IAAI;AAC9G,SAAK,mBAAmB,IAAa,uBAAa,iBAAgB;AAElE,SAAK,kBAAiB;AAEtB,SAAK,QAAQ,KAAK,aAAa,QAAO;AACtC,SAAK,mBAAmB,KAAK;AAE7B,SAAK,oBAAoB;AACzB,SAAK,8BAA6B;AAClC,eAAW,cAAc,KAAK,2BAA2B,OAAM,GAAI;AACjE,iBAAW,aAAY;IACzB;EACF;EAES,kBAAe;AAGtB,UAAM,WAAW,KAAK,iBAAgB;AAEtC,WAAO;MACM,uBAAW,eAAe,GAAG,YAAU,KAAK,eAAe,MAAM,CAAC;MAClE,uBAAW,iBAAiB;QACrC,SAAS,WAAQ;AACf,cAAI,KAAK,UAAU,KAAK,GAAG;AACzB,mBAAO;UACT;AACA,mBAAS,KAAK;AACd,iBAAO,MAAM;QACf;QACA,OAAO,WAAS,KAAK,QAAQ,KAAK;QAClC,WAAW,WAAS,KAAK,YAAY,KAAK;QAC1C,WAAW,WAAS,KAAK,YAAY,KAAK;QAC1C,UAAU,WAAS,KAAK,OAAO,KAAK;QACpC,OAAO,WAAS,KAAK,QAAQ,KAAK;OACnC;MACU,wBAAY;QACrB,kBAAkB;UAChB,OAAO,CAAC,MAAM,OAAO,UAAU,KAAK,kBAAkB,KAAK,MAAM,IAAI,OAAO,MAAM,IAAI,GAAG,KAAmB;;OAE/G;MACD;MACW,yCAA6B,oBAAoB,oBAAoB,mBAAmB;MACxF,iBAAK,OAAO,kBAAkB,KAAK;MAC9C;MACA,iBAAiB;MACN,iBAAK,OAAO,eAAe,KAAK;MAC3CE;MACA,KAAK,aAAa,QAAO,EAAG,KAAI,MAAiB,sBAAU,aAAa,WACzD,uBAAW,iBAAiB,GAAG,EAAC,OAAO,+BAA8B,CAAC,IACjF,CAAA;;EAER;EAEQ,mBAAgB;AACtB,UAAM,gBAAgB,CAAC,WAA6D;AAClF,aAAO,OAAO,MAAM,IAAI,OAAO,OAAO,MAAM,UAAU,KAAK,IAAI;IACjE;AAEA,WAAU,sBAAiB,iBAAiB,SAAQ,EAAG,oBAAoB;MACzE,8BAA8B,YAAW;AACvC,YAAI,KAAK,SAAS,CAAC,KAAK,QAAQ;AAC9B,iBAAO;QACT;AACA,cAAM,KAAK,iBAAiB,cAAc,KAAK,MAAM,GAAG,KAAK;AAC7D,eAAO;MACT;MACA,sCAAsC,YAAW;AAC/C,YAAI,KAAK,SAAS,CAAC,KAAK,QAAQ;AAC9B,iBAAO;QACT;AACA,cAAM,KAAK,iBAAiB,cAAc,KAAK,MAAM,GAAG,IAAI;AAC5D,eAAO;MACT;MACA,oCAAoC,YAAW;AAC7C,YAAI,KAAK,SAAS,CAAC,KAAK,QAAQ;AAC9B,iBAAO;QACT;AACA,cAAM,OAAO,cAAc,KAAK,MAAM;AACtC,aAAK,uBAAuB,IAAI;AAChC,eAAO;MACT;KACD;EACH;EAEA,uBAAuB,MAAuB,YAAoB;AAChE,QAAI,KAAK,OAAO;AACd;IACF;AACA,QAAI,KAAK,wBAAwB;AAC/B,WAAK,uBAAuB,cAAc,OAAO,EAAE;IACrD;AACA,UAAM,aAAa,KAAK,YAAY,KAAK,OAAK,EAAE,YAAY,KAAK,QAAQ,EAAE,YAAY,KAAK,EAAE,GAAG,cAAc;AAC/G,QAAI,eAAe,UAAa,eAAe,MAAM;AACnD,mBAAa,WAAW,WAAU;IACpC;AACA,SAAK,wBAAwB,EAAC,MAAM,YAAY,UAAU,MAAM,WAAU,CAAC;EAC7E;EAES,kBAAkB,QAAwC;AAGjE,SAAK,SAAS;AACd,6BAAyB,OAAO,OAAO,KAAK,aAAa,KAAK,YAAY,EAAE,KAAK,mBAAgB;AAC/F,UAAI,cAAc,QAAQ;AACxB,eAAO,SAAS,EAAC,SAAqB,0BAAY,qBAAqB,GAAG,aAAa,EAAC,CAAC;MAC3F;IACF,GAAG,QAAQ,KAAK;AAChB,QAAI,KAAK,mBAAmB;AAC1B,WAAK,cAAc,KAAK,iBAAiB;IAC3C;AACA,QAAI,KAAK,qBAAqB;AAC5B,WAAK,cAAc,KAAK,mBAAmB;IAC7C;AACA,QAAI,KAAK,kBAAkB;AACzB,WAAK,cAAc,KAAK,gBAAgB;IAC1C;AACA,QAAI,CAAC,KAAK,OAAO;AACf,WAAK,KAAK,mBAAkB;IAC9B;AACA,SAAK,KAAK,iBAAgB;AAE1B,SAAK,eAAe,QAAO;AAC3B,SAAK,gBACD,IAAO,mBAAc,cAAc,QAAQ,KAAK,kBAAkB,KAAK,IAAI,GAAG,2BAA2B;AAC7G,SAAK,cAAc,kBAAkB,IAAI;AACzC,SAAK,cAAc,WAAW,KAAK,GAAG;EACxC;EAEA,OAAgB,QAAQ,cAAiD;AACvE,WAAO,aAAa,YAAW,EAAG,WAAU;EAC9C;EAEQ,gCAA6B;AACnC,UAAM,eAAe,KAAK;AAC1B,QAAI,CAAC,aAAa,YAAW,EAAG,WAAU,GAAI;AAC5C;IACF;AAEA,QAAI,CAAW,8BAAkB,kBAAkB,SAAQ,EAAG,0CACtD,YAAY,GAAG;AACrB,WAAK,sBAAqB;AAC1B;IACF;AAEA,QAAI,KAAK,mBAAmB;AAC1B,WAAK,kBAAkB,QAAO;IAChC;AAEA,aAAS,eAAY;AACnB,MAAU,8BAAkB,kBAAkB,SAAQ,EAAG,yBAAyB,YAAY;IAChG;AAEA,UAAM,UAAU,IAAO,aAAQ,QAAO,WACTD,aAAWF,YAAU,gCAAgC,GAC9E;MACE;QACE,MAAME,aAAWF,YAAU,SAAS;QACpC,UACO,iBAAY,YAAY,SAAQ,EAAG,SAAS,KAAQ,iBAAY,YAAY,SAAQ,GAAI,UAAU;QACzG,SAAS;QACT,cAAc;;MAEhB;QACE,MAAME,aAAWF,YAAU,oBAAoB;QAC/C,UAAU;QACV,eAAa;QACb,SAAS;QACT,cAAc;;OAGlB,QAAW,uBAAuB;AACtC,SAAK,oBAAoB;AACzB,YAAQ,iBAAiB,MAAM,KAAK,cAAc,KAAK,iBAAiB,CAAC;AAEzE,YAAQ,wBAAwBE,aAAWF,YAAU,2BAA2B,CAAC;AAEjF,SAAK,cAAc,KAAK,iBAAiB;EAC3C;EAEA,cAAc,KAAuB;AACnC,QAAI,KAAK,QAAQ;AACf,WAAK,OAAO,SAAS,EAAC,SAAqB,0BAAY,WAAW,GAAG,GAAG,EAAC,CAAC;IAC5E;EACF;EAEA,cAAc,KAA4B;AACxC,QAAI,KAAK,UAAU,KAAK;AACtB,WAAK,OAAO,SAAS,EAAC,SAAqB,0BAAY,cAAc,GAAG,GAAG,EAAC,CAAC;IAC/E;EACF;EAEQ,wBAAqB;AAC3B,QAAI,CAAC,KAAK,mBAAmB;AAC3B;IACF;AACA,SAAK,kBAAkB,QAAO;AAC9B,SAAK,oBAAoB;EAC3B;EAES,WAAQ;AACf,SAAK,eAAe,YAAW;EACjC;EAEA,uBAAuB,EAAC,YAAY,WAAU,GAAmD;AAC/F,UAAM,EAAC,WAAU,IAAI,KAAK,YAAY,2BAA2B,WAAW,YAAY,WAAW,YAAY;AAC/G,UAAM,OAAO,KAAK,QAAQ,MAAM,IAAI,KAAK,aAAa,CAAC;AACvD,QAAI,CAAC,MAAM;AACT;IACF;AACA,SAAK,wBAAwB,EAAC,MAAM,YAAY,UAAU,MAAM,YAAY,WAAW,WAAU,EAAE,CAAC;EACtG;EAES,8BAA8B,aAAyC,kBAAwB;AACtG,UAAM,aAAa,IAAc,yBAAa,WAAW,KAAK,cAAc,kBAAkB,CAAC;AAC/F,SAAK,aAAa,sBAAsB,aAAa,UAAU;AAC/D,QAAI,KAAK,SAAS,CAAC,KAAK,QAAQ;AAC9B;IACF;AACA,UAAM,OAAO,KAAK,OAAO,MAAM,IAAI,KAAK,mBAAmB,CAAC;AAC5D,UAAM,cAAc,KAAK,gBAAgB,IAAI;AAC7C,UAAM,iCACO,mCAAyB,yBAAyB,SAAQ,EAAG,+BAClE,KAAK,YAAY;AACzB,QAAI,CAAC,YAAY,QAAQ;AACvB,UAAI,KAAK,UAAsB,0BAAY,gBAAgB,KAAK,OAAO,OAAO,IAAI,GAAG;AACnF,oBAAY,aAAY,EAAG,WACvBE,aAAWF,YAAU,aAAa,GAClC,KAAK,oBAAoB;UACrB;UAAM;UAAM;;UAA0C;;UAAuB;QAAK,GACtF,EAAC,cAAc,iBAAgB,CAAC;AACpC,YAAI,gCAAgC;AAClC,sBAAY,aAAY,EAAG,WAAWE,aAAWF,YAAU,wBAAwB,GAAG,MAAK;AACzF,iBAAK,wBAAwB,EAAC,MAAM,YAAY,MAAM,UAAU,MAAM,YAAY,MAAK,CAAC;UAC1F,GAAG,EAAC,cAAc,qBAAoB,CAAC;AACvC,sBAAY,aAAY,EAAG,WAAWE,aAAWF,YAAU,WAAW,GAAG,MAAK;AAC5E,iBAAK,wBAAwB,EAAC,MAAM,YAAY,MAAM,UAAU,MAAM,YAAY,KAAI,CAAC;UACzF,GAAG,EAAC,cAAc,eAAc,CAAC;AACjC,sBAAY,aAAY,EAAG,WACvBE,aAAWF,YAAU,cAAc,GACnC,KAAK,oBAAoB;YACrB;YAAM;YAAM;;YAA0C;;YAAuB;UAAK,GACtF,EAAC,cAAc,mBAAkB,CAAC;QACxC;MACF;IACF,OAAO;AACL,YAAM,cAAcE,aAAWF,YAAU,kBAAkB,EAAC,GAAG,YAAY,OAAM,CAAC;AAClF,kBAAY,aAAY,EAAG,WACvB,aAAa,MAAM,YAAY,QAAQ,gBAAa;AAClD,QAAK,kBAAY,YAAiB,kBAAY,OAAO,sCAAsC;AAC3F,aAAK,WAAW,OAAO,KAAK;MAC9B,CAAC,GACD,EAAC,cAAc,oBAAmB,CAAC;AACvC,UAAI,YAAY,WAAW,KAAK,gCAAgC;AAI9D,oBAAY,aAAY,EAAG,WAAWE,aAAWF,YAAU,cAAc,GAAG,MAAK;AAC/E,eAAK,wBAAwB,EAAC,MAAM,YAAY,YAAY,CAAC,GAAG,UAAU,KAAI,CAAC;QACjF,GAAG,EAAC,cAAc,kBAAiB,CAAC;MACtC;AACA,YAAM,aAAa,YAAY,KAAK,gBAAc,WAAW,QAAO,CAAE;AACtE,UAAI,YAAY;AACd,cAAM,QAAQE,aAAWF,YAAU,mBAAmB,EAAC,GAAG,YAAY,OAAM,CAAC;AAC7E,oBAAY,aAAY,EAAG,WACvB,OAAO,MAAM,YAAY,QAAQ,gBAAc,WAAW,WAAW,KAAK,CAAC,GAC3E,EAAC,cAAc,oBAAmB,CAAC;MACzC;AACA,YAAM,cAAc,YAAY,KAAK,gBAAc,CAAC,WAAW,QAAO,CAAE;AACxE,UAAI,aAAa;AACf,cAAM,QAAQE,aAAWF,YAAU,kBAAkB,EAAC,GAAG,YAAY,OAAM,CAAC;AAC5E,oBAAY,aAAY,EAAG,WACvB,OAAO,MAAM,YAAY,QAAQ,gBAAc,WAAW,WAAW,IAAI,CAAC,GAC1E,EAAC,cAAc,qBAAoB,CAAC;MAC1C;IACF;EACF;EAES,4BAA4B,aAAuC;AAC1E,aAAS,gBAAgB,YAA6D;AACpF,YAAMI,UACF,sBAAsB,4BAA4B,8BAA8B,KAAK,MAAM,UAAU,CAAC;AAC1G,MAAAA,QAAO,KAAI;IACb;AAEA,aAAS,8BACL,YAA+D,KAAoC;AACrG,UAAI,CAAC,KAAK;AACR;MACF;AACA,iBAAW,gBAAgB,GAAG;IAChC;AAEA,aAAS,gBACiB,YAA6D;AACrF,YAAMA,UACF,sBAAsB,+BAA+B,8BAA8B,KAAK,MAAM,UAAU,CAAC;AAC7G,MAAAA,QAAO,KAAI;IACb;AAEA,aAAS,8BACiB,YACtB,KAAoC;AACtC,UAAI,CAAC,KAAK;AACR;MACF;AACA,iBAAW,gBAAgB,GAAG;AAC9B,UAAI,WAAW,QAAQ,eAAe;AACpC,aAAK,iBAAiB,WAAW,QAAQ,aAAa;MACxD;IACF;AAEA,QAAI,KAAK,aAAa,QAAO,EAAG,KAAI,MAAiB,sBAAU,aAAa,WACjE,kBAAS,SAAS,SAAQ,EAAG,cAAc,wBAAwB,EAAE,IAAG,KAC/E,CAAW,8BAAkB,kBAAkB,SAAQ,EAAG,sBAAsB,KAAK,aAAa,IAAG,CAAE,GAAG;AAC5G,UAAI,KAAK,2BAA2B,MAAM;AACxC,cAAM,aACF,KAAK,2BAA2B,OAAM,EAAG,KAAI,EAAG;AACpD,cAAM,uBAAuBF,aAAWF,YAAU,YAAY;AAC9D,oBAAY,aAAY,EAAG,WACvB,sBAAsB,gBAAgB,KAAK,MAAM,UAAU,GAAG,EAAC,cAAc,iBAAgB,CAAC;AAClG,YAAI,WAAW,QAAQ,OAAM,KACzB,CAAU,mCAAyB,yBAAyB,SAAQ,EAAG,cAAc,mBACjF,WAAW,MAAM,GAAG;AAC1B,sBAAY,aAAY,EAAG,WACvBE,aAAWF,YAAU,gBAAgB,GAAG,gBAAgB,KAAK,MAAM,UAAU,GAC7E,EAAC,cAAc,sBAAqB,CAAC;QAC3C;MACF;IACF;EACF;EAEQ,qBAAkB;AACxB,QAAI,CAAC,KAAK,2BAA2B,MAAM;AACzC,WAAK,SAAS,KAAK,aAAa,QAAO,CAAE;IAC3C;EACF;EAEQ,uBAAoB;AAC1B,SAAK,aAAa,2BAA0B;AAC5C,QAAI,CAAC,KAAK,2BAA2B,MAAM;AACzC,WAAK,SAAS,KAAK;IACrB;EACF;EAEQ,eAAY;AAClB,QAAI,KAAK,kBAAiB,GAAI;AAC5B,WAAK,SAAS,KAAK;IACrB;EACF;EAEQ,mBAAgB;AACtB,SAAK,SAAS,IAAI;EACpB;EAEQ,SAASK,QAAc;AAC7B,QAAI,KAAK,kBAAkB;AACzB;IACF;AACA,QAAIA,WAAU,KAAK,OAAO;AACxB,WAAK,QAAQA;AACb,UAAI,CAACA,QAAO;AACV,aAAK,KAAK,+BAA8B;MAC1C,WAAW,KAAK,QAAQ;AACtB,aAAK,OAAO,SAAS,EAAC,SAAS,gBAAgB,GAAG,IAAI,EAAC,CAAC;MAC1D;IACF;EACF;EAEQ,oBAAiB;AACvB,eAAW,cAAc,KAAK,2BAA2B,OAAM,GAAI;AACjE,UAAI,WAAW,kBAAiB,KAAM,WAAW,cAAa,GAAI;AAChE,eAAO;MACT;IACF;AACA,WAAO;EACT;EAEQ,aAAa,WAAiB;AACpC,WAAO,cAAc,kBAAkB,cAAc,wBAAwB,cAAc,kBACvF,cAAc;EACpB;EAEQ,kBAAkB,OAA+B;AACvD,QAAI,iBAAiB,eAAe;AAClC,aAAO;IACT;AACA,QAAO,sBAAiB,iBAAiB,0BAA0B,KAAK,GAAG;AACzE,aAAO;IACT;AACA,UAAM,SAAY,aAAQ,QAAQ,SAAQ,EAAG,OAAW,aAAO,MAAM;AACrE,UAAM,gBAAgB,SAAS,OAAO,MAAU,oBAAc,aAAa,IAAI;AAC/E,UAAM,EAAC,OAAM,IAAI;AACjB,QAAI,CAAC,iBAAiB,CAAC,cAAc,SAAQ,KAAM,CAAC,QAAQ;AAC1D,aAAO;IACT;AAEA,UAAM,oBACE,aAAQ,QAAQ,SAAQ,EAAG,OAAW,oBAAc,SAAS;AACrE,QAAI,CAAC,mBAAmB;AACtB,aAAO;IACT;AAEA,QAAI,eAAe,OAAO,OAAO,YAAY,KAAK;AAClD,QAAI,CAAC,cAAc;AACjB,aAAO;IACT;AACA,UAAM,iBAAiB,OAAO,OAAO,YAAY,YAAY;AAC7D,QAAI,CAAC,kBAAkB,MAAM,UAAU,eAAe,OAAO,MAAM,UAAU,eAAe,UACxF,MAAM,UAAU,eAAe,OAAO,MAAM,MAAM,UAAU,eAAe,QAAQ,IAAI;AACzF,aAAO;IACT;AACA,QAAI,MAAM,UAAU,eAAe,QAAQ,eAAe,OAAO,MAAM,IAAI,OAAO,YAAY,EAAE,MAAM;AACpG,sBAAgB;IAClB;AAEA,UAAM,iBAAiB,6BAA6B,OAAO,OAAO,KAAK,aAAa,SAAQ,GAAI,YAAY;AAC5G,QAAI,CAAC,gBAAgB;AACnB,aAAO;IACT;AAEA,UAAM,gBAAgB,OAAO,MAAM,IAAI,OAAO,eAAe,IAAI;AACjE,QAAI,eAAe,KAAK,cAAc,IAAI;AACxC,aAAO;IACT;AAEA,UAAM,aAAa,OAAO,OAAO,YAAY,eAAe,IAAI;AAChE,UAAM,cAAc,OAAO,OAAO,YAAY,eAAe,EAAE;AAC/D,QAAI,CAAC,cAAc,CAAC,aAAa;AAC/B,aAAO;IACT;AACA,UAAM,MAAM,IAAI,UACZ,WAAW,MAAM,WAAW,MAAM,GAAG,YAAY,QAAQ,WAAW,MAAM,YAAY,SAAS,WAAW,GAAG;AACjH,UAAM,iBAAiB,OAAO,MAAM,SAAS,eAAe,MAAM,eAAe,EAAE;AAEnF,QAAI,sBAA6E;AACjF,WAAO;MACL;MACA,MAAM,OAAO,YAAmC;AAC9C,YAAI,eAAe;AACnB,YAAI,kBAAkB,OAAO,aAAY,GAAI;AAC3C,gBAAM,UAAU,MAAsB,+BAAc,wBAAwB,iBAAiB;AAC7F,cAAI;AACF,2BACI,MAAgB,8BAAoB,oBAAmB,EAAG,qBAAqB,gBAAgB,OAAO;UAC5G,QAAQ;UACR;QACF;AAUA,cAAM,oBAAoB,eAAe;AACzC,cAAM,SAAS,MAAM,kBAAkB,SAAS;UAC9C,YAAY,gBAAgB;UAC5B,aAAa;UACb,uBAAuB;UACvB,QAAQ;UACR,eAAe;UACf,iBAAiB;UACjB;UACA,SAAS;UACT,eAAe;UACf,UAAU;UACV,6BAA6B;SAC9B;AACD,YAAI,CAAC,UAAU,WAAW,UAAU,CAAC,OAAO,UACvC,OAAO,OAAO,SAAS,YAAY,OAAO,OAAO,YAAY,SAAU;AAC1E,iBAAO;QACT;AACA,8BACI,MAAe,8BAAoB,oBAAoB,mBAAmB,OAAO,QAAQ,OAAO;AACpG,cAAM,8BAAiC,aAAQ,QAAQ,SAAQ,EAAG,OAAW,oBAAc,SAAS;AACpG,YAAI,CAAC,uBAAuB,sBAAsB,6BAA6B;AAC7E,wBAAc,aAAY,EAAG,mBAAmB,SAAS;AACzD,cAAI,qBAAqB;AACvB,gCAAoB,QAAO;UAC7B;AACA,iBAAO;QACT;AACA,cAAM,aAAwB,uBAAW,IAAI,mBAAmB,MAAM,eAAe,MAAM,eAAe,EAAE,CAAC;AAC7G,eAAO,SAAS,EAAC,SAAS,eAAe,OAAO,GAAG,UAAU,EAAC,CAAC;AAC/D,eAAO;MACT;MACA,MAAM,MAAK;AACT,YAAI,qBAAqB;AACvB,8BAAoB,QAAO;QAC7B;AACA,sBAAc,aAAY,EAAG,mBAAmB,SAAS;AACzD,eAAO,SAAS,EAAC,SAAS,eAAe,OAAO,GAAc,uBAAW,IAAI,EAAC,CAAC;MACjF;;EAEJ;EAEQ,eAAe,QAA6B;AAClD,QAAI,CAAC,OAAO,QAAQ,OAAO;AAGzB,iBAAW,kBAAkB,KAAK,aAAa;AAC7C,uBAAe,WAAW,OAAO,QAAQ,OAAO,eAAe,QAAQ;MACzE;IACF;EACF;EAEQ,QAAQ,OAAiB;AAC/B,QAAI,KAAK,qBAAwB,sBAAiB,iBAAiB,0BAA0B,KAAK,GAAG;AACnG,YAAM,eAAc;IACtB;EACF;EAEQ,UAAU,OAAoB;AACpC,UAAM,WAAc,sBAAiB,iBAAiB,0BAA0B,KAAK;AACrF,QAAI,CAAC,UAAU;AACb,WAAK,eAAe,KAAK;IAC3B;AACA,QAAI,MAAM,QAAiB,6BAAkB,YAAY;AACvD,UAAI,KAAK,eAAe,iBAAgB,GAAI;AAC1C,aAAK,cAAc,YAAW;AAC9B,cAAM,QAAO;AACb,eAAO;MACT;IACF;AACA,QAAI,YAAY,KAAK,mBAAmB;AACtC,WAAK,eAAe,IAAI;IAC1B;AACA,WAAO;EACT;EAEQ,YAAY,OAAiB;AACnC,QAAI,KAAK,qBAAqB,KAAK,eAC5B,sBAAiB,iBAAiB,0BAA0B,KAAK,GAAG;AACzE,UAAI,CAAC,KAAK,qBAAqB;AAC7B,aAAK,KAAK,wBAAuB;MACnC;IACF;EACF;EAEQ,YAAY,OAAiB;AACnC,QAAI,CAAC,KAAK,qBAAqB,CAAI,sBAAiB,iBAAiB,0BAA0B,KAAK,GAAG;AACrG;IACF;AACA,QAAI,CAAC,KAAK,uBAAuB,CAAC,KAAK,QAAQ;AAC7C;IACF;AACA,UAAM,QAAO;AACb,UAAM,eAAe,KAAK,OAAO,OAAO,YAAY,KAAK;AACzD,QAAI,iBAAiB,MAAM;AACzB;IACF;AACA,eAAW,EAAC,MAAM,IAAI,MAAK,KAAK,KAAK,qBAAqB;AACxD,UAAI,QAAQ,gBAAgB,MAAM,cAAc;AAC9C,cAAK;AACL;MACF;IACF;EACF;EAEQ,OAAO,QAAa;AAC1B,SAAK,eAAe,KAAK;EAC3B;EAEQ,QAAQ,QAAqB;AACnC,SAAK,eAAe,KAAK;EAC3B;EAEQ,eAAe,OAAc;AACnC,QAAI,UAAU,KAAK,aAAa;AAC9B,WAAK,cAAc;AACnB,mBAAa,KAAK,cAAc;AAChC,WAAK,iBAAiB;AACtB,UAAI,SAAS,KAAK,mBAAmB;AACnC,aAAK,iBAAiB,OAAO,WAAW,MAAK;AAC3C,cAAI,KAAK,qBAAqB,KAAK,aAAa;AAC9C,iBAAK,KAAK,wBAAuB;UACnC;QACF,GAAG,GAAG;MACR,OAAO;AACL,aAAK,yBAAwB;MAC/B;IACF;EACF;EAEQ,wBAAwB,uBAA4C;AAC1E,UAAM,EAAC,MAAM,YAAY,UAAU,WAAU,IAAI;AACjD,QAAI,YAAY,WAAW;AAIzB;IACF;AAEA,SAAK,kCAAkC;AACvC,UAAM,wBAAwB,KAAK,gCAC/B,kBAAkB,KAAK,8BAA8B,qBAAqB;AAC9E,QAAI,uBAAuB;AAEzB;IACF;AAEA,QAAI,KAAK,wBAAwB;AAG/B,WAAK,uBAAuB,cAAa;IAC3C;AAEA,UAAM,SAAS,KAAK;AACpB,UAAM,eAAe,aAAa,WAAW,UAAS,IAAK;AAC3D,UAAM,sBAAsB,YAAY,WAAU,KAAM,QAAQ,UAAU;AAC1E,UAAM,oBAAoB,SAAS,cAAc,KAAK;AACtD,UAAM,cAAc,IAAe,wBAAW;AAC9C,UAAMD,UAAS,IAAI,qBAAqB,KAAK,SAAS,GAAG,cAAc,qBAAqB,OAAM,WAAS;AACzG,WAAK,yBAAyB;AAC9B,WAAK,+BAA+B;AACpC,MAAAA,QAAO,OAAM;AACb,aAAO,SAAS,EAAC,SAAS,YAAY,YAAY,CAAA,CAAE,EAAC,CAAC;AACtD,UAAI,CAAC,OAAO,WAAW;AACrB,qCAA6B,SAAQ,EAAG,uBAAuB,YAAY,KAAK;AAChF;MACF;AACA,mCAA6B,SAAQ,EAAG,uBAAuB,YAAY,iBAAiB,OAAO,SAAS;AAC5G,UAAI,YAAY;AACd,mBAAW,aAAa,OAAO,WAAW,OAAO,UAAU;MAC7D,WAAW,UAAU;AACnB,cAAM,KAAK;UACP,SAAS;UAAY,SAAS;UAAc,OAAO;;UAAyB;UAAM,OAAO;QAAU;MACzG,OAAO;AACL,cAAM,KAAK;UAAoB;UAAM,OAAO;;UAAyB;UAAM,OAAO;QAAU;MAC9F;IACF,CAAC;AACD,WAAO,SAAS;MACd,SAAoB,wBAAY,aAAa,GAAG,YAAY,GAAc,uBAAW,YAAY,GAClF,uBAAW,IAAI,CAAY,uBACN,OAAO;QACN,OAAO;QAAM,QAAQ,IAAI,cAAyB,uBAAU;UAC1D,QAAK;AACH,mBAAO;UACT;UACD;QACsC,MAAM;OAC9C,EACA,MAAM,KAAK,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC;KACvD;AACD,IAAAA,QAAO,QAAQ,iBAAiB,QAAQ,OAAM,UAAQ;AACpD,UAAI,CAAC,MAAM,iBACN,MAAM,iBAAiB,CAAE,MAAM,cAAuB,mBAAmBA,QAAO,OAAO,GAAI;AAC9F,aAAK,kCAAkC;AAGvC,mBAAW,MAAK;AACd,cAAI,KAAK,2BAA2BA,SAAQ;AAC1C,gBAAI,KAAK,iCAAiC;AACxC,cAAAA,QAAO,cAAa;AACpB,mBAAK,kCAAkC;YACzC,OAAO;AACL,cAAAA,QAAO,YAAW;YACpB;UACF;QACF,GAAG,GAAG;MACR;IACF,GAAG,IAAI;AAEP,IAAAA,QAAO,wBAAuB;AAC9B,IAAAA,QAAO,KAAK,iBAAiB;AAC7B,IAAAA,QAAO,YAAW;AAClB,SAAK,yBAAyBA;AAC9B,SAAK,+BAA+B;AAEpC,aAAS,kBAAkB,OAA8B,OAA4B;AACnF,UAAI,MAAM,KAAK,WAAW,MAAM,KAAK,QAAQ;AAC3C,eAAO;MACT;AACA,UAAI,MAAM,KAAK,SAAS,MAAM,KAAK,MAAM;AACvC,eAAO;MACT;AACA,UAAI,MAAM,KAAK,SAAS,MAAM,KAAK,MAAM;AACvC,eAAO;MACT;AACA,UAAI,MAAM,eAAe,MAAM,YAAY;AACzC,eAAO;MACT;AACA,UAAI,MAAM,aAAa,MAAM,UAAU;AACrC,eAAO;MACT;AACA,aAAO,MAAM,eAAe,MAAM;IACpC;EACF;;;EAIQ,MAAM,yBAAsB;AAClC,QAAI,CAAC,KAAK,QAAQ;AAChB;IACF;AACA,UAAM,cAAc,KAAK,oBAAoB,MAAM,KAAK,wBAAuB,IAAK;AAEpF,QAAI,CAAC,KAAK,QAAQ;AAChB;IACF;AACA,QAAI,eAAe,KAAK,OAAO,MAAM,MAAM,iBAAiB,KAAK,EAAE,MAAM;AACvE,WAAK,OAAO,SAAS,EAAC,SAAS,iBAAiB,OAAO,GAAG,eAA0B,uBAAW,IAAI,EAAC,CAAC;IACvG;EACF;EAEA,MAAM,2BAA2B,UAA2C,KAAoC;AAE9G,UAAM,aAAa,YACf,MAAe,mCAAyB,yBAAyB,SAAQ,EAAG,wBAAwB,QAAQ;AAChH,QAAI,CAAC,cAAc,WAAW,aAAa,IAAG,MAAO,KAAK;AACxD,aAAO;IACT;AACA,UAAM,SAAS,KAAK,QAAQ,SACxB,KAAK,YAAY,2BAA2B,WAAW,YAAY,WAAW,YAAY,CAAC;AAC/F,WAAO,UAAU;EACnB;EAEQ,MAAM,0BAAuB;AACnC,QAAI,CAAC,KAAK,QAAQ;AAChB,aAAO;IACT;AACA,QAAI,CAAQ,kBAAS,SAAS,SAAQ,EAAG,cAAc,wBAAwB,EAAE,IAAG,GAAI;AACtF,aAAO;IACT;AACA,UAAM,mBAAsB,aAAQ,QAAQ,SAAQ,EAAG,OAAW,mBAAa,gBAAgB;AAC/F,QAAI,CAAC,kBAAkB;AACrB,aAAO;IACT;AACA,UAAM,YAAe,aAAQ,QAAQ,SAAQ,EAAG,OAAW,oBAAc,SAAS;AAClF,QAAI,CAAC,WAAW;AACd,aAAO;IACT;AACA,UAAM,MAAM,KAAK,aAAa,IAAG;AAEjC,UAAM,4BAAiG,cACnG,KAAK,2BAA2B,UAAU,GAAG;AAEjD,UAAM,wBAAwB,KAAK,2BAA2B,UAAU,iBAAgB,GAAI,GAAG;AAC/F,UAAM,yBAAyB,KAAK,2BAA2B,UAAU,SAAQ,GAAI,GAAG;AACxF,UAAM,CAAC,gBAAgB,eAAe,IAAI,MAAM,QAAQ,IAAI,CAAC,uBAAuB,sBAAsB,CAAC;AAC3G,QAAI,CAAC,kBAAkB,CAAC,mBAAmB,CAAC,KAAK,QAAQ;AACvD,aAAO;IACT;AAEA,QAAI,kBAAkB,mBAAmB,kBAAkB,iBAAiB,qCAAqC;AAC/G,aAAO;IACT;AAEA,WAAkB,gCAAoB,KAAK,OAAO,MAAM,GAAG;AACzD,YAAM,IAAI,QAAQ,aAAW,OAAO,oBAAoB,OAAO,CAAC;AAEhE,UAAI,CAAC,KAAK,QAAQ;AAChB,eAAO;MACT;AACA,MAAW,6BAAiB,KAAK,OAAO,OAAO,iBAAiB,EAAE;IACpE;AAEA,UAAM,gBAAgB,uBAAuB,KAAK,OAAO,OAAO,gBAAgB,iBAAiB,eAAe;AAChH,QAAI,cAAc,WAAW,GAAG;AAC9B,aAAO;IACT;AAEA,UAAM,gBAAgB,MAAM,qBAAqB,WAAW,yBAAyB;AAErF,QAAI,CAAC,KAAK,UAAU,cAAc,WAAW,GAAG;AAC9C,aAAO;IACT;AAEA,UAAM,kBAAkB,wBAAwB,eAAe,aAAa;AAC5E,QAAI,CAAC,mBAAmB,CAAC,KAAK,QAAQ;AACpC,aAAO;IACT;AAEA,UAAM,cAA8D,CAAA;AAEpE,eAAW,CAAC,MAAM,KAAK,KAAK,iBAAiB;AAC3C,YAAM,WAAW,gBAAgB,IAAI,OAAO,CAAC;AAC7C,UAAI,WAAW,WAAW,MAAM,KAAK,KAAK,EAAE,OAAO,OAAK,SAAS,IAAI,EAAE,CAAC,CAAC,MAAM,EAAE,CAAC,CAAC,IAAI,MAAM,KAAK,KAAK;AACvG,UAAI,CAAC,SAAS,QAAQ;AACpB;MACF;AACA,UAAI,SAAS,SAAS,IAAI;AACxB,mBAAW,SAAS,MAAM,GAAG,EAAE;MACjC;AACA,kBAAY,KAAgB,uBAAW,OAAO,EAAC,QAAQ,IAAI,gBAAgB,QAAQ,GAAG,MAAM,EAAC,CAAC,EACxE,MAAM,KAAK,OAAO,MAAM,IAAI,KAAK,OAAO,CAAC,EAAE,EAAE,CAAC;IACtE;AACA,WAAkB,uBAAW,IAAI,aAAa,IAAI;EACpD;;;EAIQ,MAAM,0BAAuB;AACnC,SAAK,eAAe,YAAW;AAC/B,UAAM,mBAAsB,aAAQ,QAAQ,SAAQ,EAAG,OAAW,mBAAa,gBAAgB;AAC/F,QAAI,CAAC,oBAAoB,CAAC,KAAK,QAAQ;AACrC;IACF;AACA,UAAM,YAAe,aAAQ,QAAQ,SAAQ,EAAG,OAAW,oBAAc,SAAS;AAClF,QAAI,CAAC,WAAW;AACd;IACF;AACA,UAAM,QAAQ,UAAU,iBAAgB,KAAM,UAAU,SAAQ;AAChE,UAAM,gBAAgB,UAAU;AAEhC,UAAM,EAAC,MAAK,IAAI,KAAK;AACrB,UAAM,YAAY,MAAM,cAAc,uBAAuB,OAAO,MAAM,IAAI;AAE9E,SAAK,sBAAsB,CAAA;AAC3B,QAAI,mBAAmB;AACvB,eAAW,YAAY,UAAU,QAAO,GAAI;AAC1C,YAAM,iBAAiB,KAAK,YAAY,2BAA2B,SAAS,YAAY,SAAS,YAAY;AAC7G,UAAI,qBAAqB,eAAe,cAChC,SAAS,SAAI,UACjB,eAAe,cAAc,MAAM,IAAI,OAAO;AAChD;MACF;AACA,YAAM,OAAO,MAAM,IAAI,KAAK,eAAe,aAAa,CAAC;AACzD,YAAM,WAAW,KAAK,IAAI,KAAK,IAAI,KAAK,OAAO,eAAe,YAAY;AAC1E,UAAI,aAAwB,uBAAW,KAAK,EAAE,aAAa,UAAU,CAAC;AACtE,UAAI,WAAW,cAAc,WAAW,OAAO,KAAK,QAChD,WAAW,KAAK,KAAK,IAAI;AAC3B;MACF;AACA,UAAI,WAAW,SAAS,KAAK;AAC3B,cAAM,WAAW,WAAW,QAAQ,WAAW,IAAI,CAAC;AACpD,YAAI,SAAS,cAAc,SAAS,OAAO,KAAK,QAAQ,SAAS,KAAK,KAAK,IAAI;AAC7E;QACF;AACA,qBAAa;MACf;AACA,YAAM,aAAa,WAAW;AAC9B,YAAM,eAAe,eAAe,UAAU,eAAe,YAAY,eAAe,SACpF,eAAe,WAAW,eAAe;AAC7C,UAAI,CAAC,gBAAgB,CAAC,KAAK,aAAa,UAAU,GAAG;AACnD;MACF;AAEA,WAAK,oBAAoB,KACrB,EAAC,MAAM,WAAW,MAAM,IAAI,WAAW,IAAI,OAAO,OAAO,OAAO,MAAM,SAAS,mBAAkB,EAAE,CAAC;AACxG,UAAI,SAAS,SAAI,QAA+C;AAC9D,2BAAmB,eAAe;MACpC;AAEA,YAAM,iBACF,eAAe,KAAK,KAAK,KAAK,MAAM,WAAW,OAAO,KAAK,MAAM,WAAW,KAAK,KAAK,IAAI;AAC9F,UAAI,YAAwC;AAC5C,UAAI,mBAAmB,UAAU,WAAW,QAAQ,SAAS,oBAAoB;AAC/E,oBAAY,WAAW,OAAO;MAChC,WACI,mBAAmB,gBAAgB,mBAAmB,iBAAiB,mBAAmB,eAAe;AAC3G,oBAAY,WAAW;MACzB;AACA,UAAI,eAAe,OAAO;AACxB,cAAM,SAAS,WAAW,QAAQ,SAAS,YAAY;AACvD,YAAI,UAAU,OAAO,SAAS,kBAAkB,MAAM,SAAS,OAAO,MAAM,OAAO,EAAE,MAAM,UAAU;AACnG,sBAAY,WAAW;QACzB;MACF;AACA,UAAI,cAAc,UAAU,SAAS,oBAAoB,UAAU,SAAS,oBACxE,SAAS,SAAI,QAA+C;AAC9D,cAAM,WAAW,UAAU,SAAS,SAAS,GAAG,YAAY;AAC5D,YAAI;AACJ,YAAI,UAAU,SAAS,gBAAgB;AACrC,0BAAgB;QAClB,WAAW,UAAU,SAAS,mBAAmB,UAAU,SAAS,sBAAsB;AACxF,0BAAgB,SAAS;AACzB,cAAI,eAAe,SAAS,SAAS;AACnC,4BAAgB,cAAc;UAChC;QACF;AACA,YAAI,eAAe;AACjB,gBAAM,oBAAoB,KAAK,qBAC3B,SAAS,eAAe,KAAK,kBAAkB,cAC/C,SAAS,iBAAiB,KAAK,kBAAkB;AACrD,eAAK,oBAAoB,KAAK;YAC5B,MAAM,cAAc;YACpB,IAAI,cAAc;YAClB,OAAO;YACP,OAAO,MAAM,KAAK,YAAY,UAAU,QAAQ,iBAAiB,CAAC;WACnE;QACH;MACF;IACF;AACA,UAAM,cAAyB,uBAAW,IACtC,KAAK,oBAAoB,IAAI,SAAM;AACjC,cAAQ,IAAI,QAAQ,sBAAsB,gBAAgB,MAAM,IAAI,MAAM,IAAI,EAAE;IAClF,CAAC,GACD,IAAI;AACR,SAAK,OAAO,SAAS,EAAC,SAAS,kBAAkB,OAAO,GAAG,WAAW,EAAC,CAAC;EAC1E;EAEQ,2BAAwB;AAC9B,QAAI,KAAK,QAAQ,MAAM,MAAM,kBAAkB,KAAK,EAAE,MAAM;AAC1D,WAAK,OAAO,SAAS,EAAC,SAAS,kBAAkB,OAAO,GAAc,uBAAW,IAAI,EAAC,CAAC;IACzF;EACF;EAEQ,YAAY,UAA2C,mBAA0B;AACvF,QAAI,CAAC,mBAAmB;AACtB,eAAS,mBAAmB,WAAW;IACzC,OAAO;AACL,kBAAW;IACb;AAEA,aAAS,cAAW;AAClB,eAAS,cAAc,sBAAqB;IAC9C;EACF;EAEQ,mBAAgB;AAItB,QAAI,CAAC,KAAK,QAAQ;AAChB,aAAO,CAAA;IACT;AACA,UAAM,EAAC,OAAM,IAAI;AACjB,UAAM,sBAAsB,KAAK,kBAAkB,mCAAmC,KAAK,YAAY;AACvG,WAAO,oBAAoB,IAAI,CAAC,EAAC,YAAY,WAAU,MAAK;AAC1D,YAAM,iBACF,KAAK,YAAY,2BAA2B,WAAW,YAAY,WAAW,YAAY;AAC9F,aAAO;QACL,UAAU,OAAO,SAAS,cAAc;QACxC;;IAEJ,CAAC;EACH;EAEQ,gBAAgB,MAAqB;AAC3C,WAAO,KAAK,YAAY,OAAO,OAAK,EAAE,YAAY,KAAK,QAAQ,EAAE,YAAY,KAAK,EAAE,EAAE,IAAI,OAAK,EAAE,UAAU;EAC7G;EAEQ,MAAM,wBAAwB,MAAqB;AACzD,UAAM,QAAQ,KAAK,YAAY,2BAA2B,KAAK,SAAS,GAAG,CAAC;AAC5E,UAAM,MAAM,KAAK,YAAY,2BACzB,KAAK,SAAS,GAAG,KAAK,IAAI,KAAK,QAAQ,4BAA4B,CAAC;AACxE,UAAM,QAAQ,IAAc,qBAAU,UAClC,MAAM,YAAY,MAAM,gBAAgB,GAAG,IAAI,YAAY,IAAI,gBAAgB,CAAC;AACpF,WAAO,MAAM,KAAK,kBAAkB,oBAAoB,KAAK,cAAc,KAAK;EAClF;;;EAIQ,MAAM,4BAA4B,OAA+B,aAAoC;AAE3G,UAAM,cAA8D,CAAA;AACpE,UAAM,gBAAkE,CAAA;AACxE,UAAM,oBAAoB,oBAAI,IAAG;AACjC,UAAM,sBACF,oBAAI,IAAG;AACX,UAAM,6BAAmD,CAAA;AACzD,UAAM,wBAAwB,oBAAI,IAAG;AAErC,UAAM,kBACF,CAAC,SAAiB,cAAsB,eAAmE;AACzG,UAAI,gBAAgB,oBAAoB,IAAI,OAAO;AACnD,UAAI,CAAC,eAAe;AAClB,wBAAgB,CAAA;AAChB,4BAAoB,IAAI,SAAS,aAAa;MAChD;AACA,oBAAc,KAAK,EAAC,YAAY,QAAQ,aAAY,CAAC;IACvD;AAEJ,eAAW,EAAC,UAAU,WAAU,KAAK,aAAa;AAChD,YAAM,OAAO,MAAM,IAAI,OAAO,QAAQ;AACtC,UAAI,cAAc,kBAAkB,IAAI,KAAK,IAAI;AACjD,UAAI,CAAC,aAAa;AAChB,sBAAc,CAAA;AACd,0BAAkB,IAAI,KAAK,MAAM,WAAW;MAC9C;AACA,UAAI,WAAW,QAAO,KAAM,YAAY,MAAM,OAAK,CAAC,EAAE,QAAO,CAAE,GAAG;AAEhE,mCAA2B,KACvB,KAAK,wBAAwB,IAAI,EAAE,KAAK,eAAa,uBAAuB,MAAM,SAAS,CAAC,CAAC;MACnG;AACA,kBAAY,KAAK,UAAU;AAC3B,UAAI,WAAW,QAAO,GAAI;AACxB,8BAAsB,IAAI,QAAQ;AAClC,wBAAgB,KAAK,MAAM,WAAW,KAAK,MAAM,UAAU;MAC7D;IACF;AAEA,eAAW,CAAC,WAAW,eAAe,KAAK,mBAAmB;AAC5D,YAAM,OAAO,gBAAgB,KAAK,sBAAsB,EAAE,CAAC;AAC3D,UAAI,cAAc;AAClB,UAAI,CAAC,KAAK,QAAO,GAAI;AACnB,uBAAe;MACjB;AACA,UAAI,CAAC,KAAK,MAAK,GAAI;AACjB,uBAAe;MACjB;AACA,UAAI,KAAK,WAAU,GAAI;AACrB,uBAAe;MACjB,WAAW,KAAK,UAAS,GAAI;AAC3B,uBAAe;MACjB;AACA,oBAAc,KAAM,IAAI,uBAAuB,aAAa,WAAW,KAAK,UAAS,CAAE,EAAG,MAAM,SAAS,CAAC;IAC5G;AAEA,UAAM,yBAAyB,CAAC,MAAuB,cAAwD;AAC7G,iBAAW,YAAY,WAAW;AAChC,cAAM,iBAAiB,KAAK,YAAY,2BAA2B,SAAS,YAAY,SAAS,YAAY;AAC7G,YAAI,eAAe,eAAe,KAAK,SAAS,GAAG;AACjD;QACF;AACA,cAAM,WAAW,KAAK,IAAI,KAAK,IAAI,KAAK,OAAO,eAAe,YAAY;AAC1E,YAAI,CAAC,sBAAsB,IAAI,QAAQ,GAAG;AACxC,0BAAgB,KAAK,MAAM,eAAe,cAAc,IAAI;QAC9D;MACF;IACF;AAEA,UAAM,QAAQ,IAAI,0BAA0B;AAC5C,eAAW,CAAC,SAAS,aAAa,KAAK,qBAAqB;AAC1D,UAAI,cAAc,SAAS,GAAG;AAC5B,mBAAW,EAAC,QAAQ,WAAU,KAAK,eAAe;AAChD,gBAAM,SAAS,IAAI,uBAAuB,YAAY,IAAI;AAC1D,sBAAY,KAAgB,uBAAW,OAAO,EAAC,QAAQ,QAAQ,MAAM,GAAE,CAAC,EAAE,MAAM,UAAU,MAAM,CAAC;QACnG;MACF;IACF;AAEA,WAAO,EAAC,SAAoB,uBAAW,IAAI,aAAa,IAAI,GAAG,QAAmB,qBAAS,GAAG,eAAe,IAAI,EAAC;EACpH;;;;;;EAOQ,MAAM,iCAA8B;AAC1C,UAAM,EAAC,YAAW,IAAI;AACtB,UAAM,SAAS,KAAK;AACpB,SAAK,cAAc,CAAA;AACnB,UAAM,QAAQ,IAAI,YAAY,IAAI,OAAM,gBAAc;AACpD,YAAM,EAAC,YAAY,SAAQ,IAAI;AAC/B,YAAM,YAAY,WAAW,UAAS,GAAI,UAAU,WAAW,QAAO,GAAI,aAAa,WAAW,WAAU;AAC5G,YAAM,WAAW,OAAO,KAAK;AAC7B,YAAM,iBAAiB,OAAO,aAAa,QAAQ;AACnD,YAAM,aACF,KAAK,YAAY,2BAA2B,eAAe,YAAY,eAAe,YAAY;AACtG,YAAM,KAAK,cAAc,WAAW,YAAY,WAAW,cAAc,WAAW,SAAS,UAAU;IACzG,CAAC,CAAC;EACJ;EAEQ,MAAM,qBAAkB;AAC9B,QAAI,KAAK,QAAQ;AACf,WAAK,cAAc,KAAK,iBAAgB;AACxC,YAAM,iBAAiB,KAAK;AAC5B,YAAM,cAAc,MAAM,KAAK,4BAA4B,KAAK,OAAO,OAAO,cAAc;AAE5F,UAAI,KAAK,UAAU,KAAK,gBAAgB,mBACnC,YAAY,OAAO,QAAQ,KAAK,OAAO,MAAM,MAAM,mBAAmB,KAAK,GAAG,OAAO,OAAO;AAC/F,aAAK,OAAO,SAAS,EAAC,SAAS,kBAAkB,GAAG,WAAW,EAAC,CAAC;MACnE;IACF;EACF;EAEQ,iBACJ,OAA4F;AAC9F,UAAM,EAAC,WAAU,IAAI,MAAM;AAC3B,QAAI,WAAW,iBAAiB,KAAK,gBAAgB,KAAK,OAAO;AAC/D;IACF;AACA,eAAW,cAAc,KAAK,2BAA2B,OAAM,GAAI;AACjE,UAAI,WAAW,kBAAiB,KAAM,WAAW,cAAa,GAAI;AAChE;MACF;IACF;AAEA,WAAO,aAAa,KAAK,yBAAyB;AAClD,SAAK,4BAA4B,OAAO,WAAW,MAAM,KAAK,mBAAkB,GAAI,EAAE;EACxF;EAEA,8BAA8B,OAAmB,YAAyD;AACxG,UAAM,QAAQ,IAAI;AAClB,QAAI,YAAY;AACd,UAAI,MAAM,UAAU;AAClB,mBAAW,WAAW,CAAC,WAAW,QAAO,CAAE;MAC7C,OAAO;AACL,aAAK,WAAW,OAAO,KAAK;MAC9B;IACF,WAAW,KAAK,QAAQ;AACtB,YAAM,iBAAiB,KAAK,OAAO,OAAO,SAAS,MAAM,MAAgC;AACzF,YAAM,OAAO,KAAK,OAAO,MAAM,IAAI,OAAO,cAAc;AACxD,YAAM,aAAa,KAAK,YAAY,2BAA2B,KAAK,SAAS,GAAG,iBAAiB,KAAK,IAAI;AAC1G,WAAK,KAAK;QACN,WAAW;QAAY,WAAW;QAAc;;QAA0C;;QACzE;MAAK;IAC5B;EACF;EAEA,oCAAoC,OAAmB,YAAyD;AAE9G,UAAM,QAAQ,IAAI;AAElB,UAAM,SAAS,KAAK;AACpB,UAAM,WAAW,OAAO,OAAO,SAAS,MAAM,MAAgC;AAC9E,UAAM,OAAO,OAAO,MAAM,IAAI,OAAO,QAAQ;AAC7C,QAAI,CAAa,0BAAY,gBAAgB,OAAO,OAAO,IAAI;;IAG3D,CAAU,mCAAyB,yBAAyB,SAAQ,EAAG,+BACnE,KAAK,YAAY,GAAG;AAC1B;IACF;AACA,UAAM,cAAc,IAAO,iBAAY,YAAY,KAAK;AACxD,QAAI,YAAY;AACd,kBAAY,aAAY,EAAG,WAAWF,aAAWF,YAAU,cAAc,GAAG,MAAK;AAC/E,aAAK,wBAAwB,EAAC,MAAM,YAAY,UAAU,KAAI,CAAC;MACjE,GAAG,EAAC,cAAc,kBAAiB,CAAC;IACtC,OAAO;AACL,YAAM,aAAa,KAAK,YAAY,2BAA2B,KAAK,SAAS,GAAG,WAAW,KAAK,IAAI;AACpG,kBAAY,aAAY,EAAG,WAAWE,aAAWF,YAAU,wBAAwB,GAAG,MAAK;AACzF,aAAK,wBAAwB,EAAC,MAAM,YAAY,MAAM,UAAU,YAAY,YAAY,MAAK,CAAC;MAChG,GAAG,EAAC,cAAc,qBAAoB,CAAC;AACvC,kBAAY,aAAY,EAAG,WAAWE,aAAWF,YAAU,WAAW,GAAG,MAAK;AAC5E,aAAK,wBAAwB,EAAC,MAAM,YAAY,MAAM,UAAU,YAAY,YAAY,KAAI,CAAC;MAC/F,GAAG,EAAC,cAAc,eAAc,CAAC;AACjC,kBAAY,aAAY,EAAG,WACvBE,aAAWF,YAAU,cAAc,GACnC,MAAM,KAAK;QACP,WAAW;QAAY,WAAW;QAAc;;QAA0C;;QACzE;MAAK,GAC1B,EAAC,cAAc,mBAAkB,CAAC;IACxC;AACA,SAAK,YAAY,KAAI;EACvB;EAEQ,oBAAiB;AACvB,eAAW,iBAAqB,oBAAc,cAAc,SAAQ,EAAG,OAAW,oBAAc,aAAa,GAAG;AAC9G,YAAM,aAAsB,mCAAyB,yBAAyB,SAAQ,EAAG,WACrF,KAAK,cAAc,aAAa;AACpC,UAAI,YAAY;AACd,aAAK,iBAAiB,aAAa;MACrC;IACF;AACA,SAAK,6BAA4B;EACnC;EAEQ,iBAAiB,eAA8C;AACrE,UAAM,gBAAgB,KAAK,2BAA2B,IAAI,aAAa;AACvE,UAAM,gBAAyB,mCAAyB,yBAAyB,SAAQ,EAAG,WACxF,KAAK,cAAc,aAAa;AACpC,SAAK,2BAA2B,OAAO,aAAa;AACpD,QAAI,eAAe;AACjB,oBAAc,oBAAmB,gBAC6C,KAAK,cAAc,IAAI;AACrG,oBAAc,oBAAmB,oBACiD,KAAK,kBAAkB,IAAI;AAC7G,UAAI,KAAK,SAAS,CAAC,KAAK,aAAa,QAAO,KAAM,KAAK,kBAAiB,GAAI;AAC1E,aAAK,SAAS,KAAK;MACrB;IACF;AACA,QAAI,CAAC,eAAe;AAClB;IACF;AACA,SAAK,2BAA2B,IAAI,eAAe,aAAa;AAChE,kBAAc,iBAAgB,gBACgD,KAAK,cAAc,IAAI;AACrG,kBAAc,iBAAgB,oBACoD,KAAK,kBAAkB,IAAI;AAC7G,kBAAc,aAAY;AAE1B,SAAK,cAAc,mBAAkB,EAAG,KAAK,eAAY;AACvD,UAAI,WAAW;AACb,cAAM,UAAUE,aAAWF,YAAU,mBAAmB,EAAC,KAAK,cAAc,aAAa,IAAG,EAAE,CAAC;AAC/F,aAAK,8BAA8B,EAAC,WAAW,QAAO,CAAC;MACzD,OAAO;AACL,aAAK,8BAA8B,IAAI;MACzC;IACF,CAAC;EACH;EAEQ,8BAA8B,SAAuD;AAC3F,QAAI,KAAK,qBAAqB;AAC5B;IACF;AACA,QAAI,YAAY,MAAM;AACpB,WAAK,cAAc,KAAK,mBAAmB;AAC3C,WAAK,sBAAsB;AAC3B;IACF;AACA,SAAK,sBACE,aAAQ,QAAQ,OAAM,SAAwB,QAAQ,SAAS,CAAA,GAAI,QAAW,oBAAoB;AACzG,QAAI,CAAC,KAAK,qBAAqB;AAC7B;IACF;AACA,eAAW,YAAY,QAAQ,WAAW;AACxC,YAAM,aAAa,KAAK,qBAAqB,wBACzCE,aAAWF,YAAU,mBAAmB,EAAC,KAAY,mBAAU,UAAU,YAAY,SAAS,WAAW,EAAC,CAAC,CAAC;AAChH,UAAI,YAAY;AACd,cAAM,kBACE,yBAAmB,mBAAmB,iBAAiB,SAAS,aAAa,SAAS,SAAS;AACvG,YAAQ,yBAAmB,mBAAmB,SAAQ,EAAG,mBAAkB,EAAG,IAAI,eAAe,GAAG;AAClG,gBAAM,cAAiB,aAAQ,iBAAiBE,aAAWF,YAAU,WAAW,GAAG,MAAK;AACtF,iBAAY,kBAAS,OAAO,IAAQ,yBAAmB,YAAY,eAAe,CAAC;UACrF,GAAG;YAAC,cAAc;YAAgB,SAAO;;UAA6B,CAAC;AACvE,sBAAY,MAAM,YAAY,eAAe,MAAM;AACnD,sBAAY,QAAQE,aAAWF,YAAU,sBAAsB;AAC/D,qBAAW,YAAY,WAAW;QACpC;AACA,mBAAW,UAAU,IAAI,oBAAoB;MAC/C;IACF;AACA,SAAK,oBAAoB,iBAAiB,MAAK;AAC7C,WAAK,cAAc,KAAK,mBAAmB;AAC3C,WAAK,sBAAsB;IAC7B,CAAC;AACD,SAAK,cAAc,KAAK,mBAAmB;EAC7C;EAEQ,qBAAkB;AACxB,eAAW,iBAAqB,oBAAc,cAAc,SAAQ,EAAG,OAAW,oBAAc,aAAa,GAAG;AAC9G,YAAM,aAAsB,mCAAyB,yBAAyB,SAAQ,EAAG,WACrF,KAAK,cAAc,aAAa;AACpC,UAAI,YAAY,gBAAe,GAAI;AACjC,eAAO;MACT;IACF;AACA,WAAO;EACT;EAEQ,uBAAoB;AAC1B,UAAM,cAAc,KAAK,OAAO,mBAAkB;AAClD,eAAW,CAAC,eAAe,MAAM,KAAK,KAAK,2BAA2B,QAAO,GAAI;AAC/E,YAAM,MAAM,OAAO,QAAQ;AAC3B,UAAI,KAAK;AACP,cAAM,eAAmB,uBAAiB,iBAAiB,yBACvD,cAAc,OAAM,GAAI,OAAO,OAAO,SAAS;AACnD,cAAM,cAAqB,mBAAU,UAAU,YAAY,cAAc,GAAG;AAC5E,YAAI,aAAa;AACf,gBAAM,WAAW,YAAY,IAAQ,yBAAmB,mBAAmB,QACvE,aAAa,OAAO,OAAO,gCAA+B,CAAE,CAAC;AACjE,cAAI,UAAU;AACZ,mBAAO;UACT;QACF;MACF;IACF;AACA,WAAO;EACT;EAEQ,+BAA4B;AAClC,QAAI,KAAK,kBAAkB;AACzB;IACF;AACA,QAAI,CAAQ,kBAAS,SAAS,SAAQ,EAAG,cAAc,wBAAwB,EAAE,IAAG,GAAI;AACtF;IACF;AACA,QAAI,CAAC,KAAK,mBAAkB,GAAI;AAC9B;IACF;AAEA,UAAM,WAAW,KAAK,qBAAoB;AAC1C,QAAI,YAAY,SAAS,YAAY,MAAM;AAEzC;IACF;AAEA,QAAI,CAAC,UAAU;AACb,WAAK,mBAAsB,aAAQ,QAAQ,OAAM,QACvBE,aAAWF,YAAU,gBAAgB,GAAG,CAAA,GACvD,kBAAS,SAAS,SAAQ,EAAG,cAAc,uCAAuC,KAAK,GAC9F,oBAAoB;AACxB,UAAI,CAAC,KAAK,kBAAkB;AAC1B;MACF;AACA,WAAK,iBAAiB,wBAAwBE,aAAWF,YAAU,qBAAqB,CAAC;AACzF,WAAK,iBAAiB,wBAAwBE,aAAWF,YAAU,kBAAkB,CAAC;IACxF,WAAW,SAAS,SAAS;AAC3B,WAAK,mBAAsB,aAAQ,QAAQ,OAAM,QACvBE,aAAWF,YAAU,eAAe,GAAG,CAAA,GACtD,kBAAS,SAAS,SAAQ,EAAG,cAAc,+BAA+B,KAAK,GAAG,mBAAmB;AAChH,UAAI,CAAC,KAAK,kBAAkB;AAC1B;MACF;AACA,WAAK,iBAAiB,wBAAwBE,aAAWF,YAAU,4BAA4B,CAAC;AAChG,WAAK,iBAAiB,wBAAwBE,aAAWF,YAAU,6BAA6B;QAC9F,KAAK,OAAU,sBAAiB,iBAAiB,SAAQ,EAAG,uBAAuB,iBAAiB,CAAC;OACtG,CAAC;IACJ,OAAO;AACL,WAAK,mBAAsB,aAAQ,QAAQ,OAAM,WACpBE,aAAWF,YAAU,eAAe,GAAG,CAAA,GAAI,QAAW,mBAAmB;AACtG,UAAI,CAAC,KAAK,kBAAkB;AAC1B;MACF;AACA,WAAK,iBAAiB,wBAAwBE,aAAWF,YAAU,qBAAqB,CAAC;AACzF,UAAI,SAAS,cAAc;AACzB,aAAK,iBAAiB,wBAAwBE,aAAWF,YAAU,cAAc;UAC/E,KAAc,2BAAgB,WAAW,SAAS,KAAQ,aAAQ,yBAAyB;UAC3F,KAAK,SAAS;SACf,CAAC;MACJ;IACF;AACA,SAAK,iBAAiB,iBAAiB,MAAK;AAC1C,WAAK,cAAc,KAAK,gBAAgB;AACxC,WAAK,mBAAmB;IAC1B,CAAC;AACD,SAAK,cAAc,KAAK,gBAAgB;EAC1C;EAEQ,kBAAkB,MAAuB,OAAiB;AAChE,QAAI,KAAK,SAAS,MAAM,WAAW,KAAK,MAAM,QAAQ;AACpD,aAAO;IACT;AACA,QAAI,MAAM,WAAW,MAAM,SAAS;AAClC,WAAK,uBAAuB,MAAM,MAAM,QAAQ;AAChD,aAAO;IACT;AAEA,SAAK,KAAK,iBAAiB,MAAM,MAAM,QAAQ;AAC/C,WAAO;EACT;EAEQ,MAAM,iBAAiB,MAAuB,aAAoB;AACxE,QAAI,KAAK,OAAO;AACd;IACF;AACA,QAAI,KAAK,wBAAwB;AAC/B,WAAK,uBAAuB,cAAc,OAAO,EAAE;IACrD;AAEA,UAAM,cAAc,KAAK,gBAAgB,IAAI;AAC7C,QAAI,CAAC,YAAY,QAAQ;AACvB,YAAM,KAAK;QAAoB;QAAM;;QAA0C;;QAAuB;MAAK;AAC3G;IACF;AACA,UAAM,cAAc,YAAY,KAAK,OAAK,CAAC,EAAE,QAAO,CAAE;AACtD,eAAW,cAAc,aAAa;AACpC,UAAI,aAAa;AACf,mBAAW,WAAW,WAAW;MACnC,OAAO;AACL,QAAK,kBAAY,YAAiB,kBAAY,OAAO,iCAAiC;AACtF,aAAK,WAAW,OAAO,KAAK;MAC9B;IACF;EACF;EAEQ,MAAM,0BAA0B,MAAqB;AAG3D,QAAI,KAAK,mBAAmB;AAC1B,YAAM,0BAA0B,KAAK,YAAY,2BAC7C,KAAK,kBAAkB,YAAY,KAAK,kBAAkB,YAAY;AAC1E,UAAI,wBAAwB,eAAe,KAAK,SAAS,GAAG;AAC1D,cAAM,sBAAsB,MAAM,KAAK,wBAAwB,IAAI;AACnE,mBAAW,YAAY,qBAAqB;AAC1C,cAAI,SAAS,UAAU,KAAK,iBAAiB,MAAM,GAAG;AACpD,mBAAO,KAAK;UACd;QACF;MACF;IACF;AACA,WAAO,KAAK,YAAY,2BAA2B,KAAK,SAAS,CAAC;EACpE;EAEQ,MAAM,oBACV,MAAuB,WAAwD,SAC/E,YAAmB;AACrB,QAAI,CAAC,KAAK,UAAU,CAAa,0BAAY,gBAAgB,KAAK,OAAO,OAAO,IAAI,GAAG;AACrF;IACF;AACA,IAAK,kBAAY,YAAiB,kBAAY,OAAO,oBAAoB;AACzE,SAAK,mCAAkC;AACvC,UAAM,SAAS,MAAM,KAAK,0BAA0B,IAAI;AACxD,UAAM,KAAK,cAAc,OAAO,YAAY,OAAO,cAAc,WAAW,SAAS,UAAU;EACjG;EAEQ,MAAM,cACV,YAAoB,cAAgC,WACpD,SAAkB,YAAmB;AACvC,IAAO,kBAAS,SAAS,SAAQ,EAAG,cAAc,oBAAoB,EAAE,IAAI,IAAI;AAChF,UAAM,KAAK,MAAM,KAAK,kBAAkB;MACpC,KAAK;MAAc;MAAY;MAAc;MAAW;MAAS;MAAU;;IAAA;AAE/E,SAAK,wBAAwB,YAAY,cAAc,WAAW,OAAO;AACzE,WAAO;EACT;EAEQ,wBACJ,aAAqB,eAAiC,YAAoB,UAAiB;EAC/F;EAEQ,MAAM,mBAAgB;AAC5B,SAAK,iBAAiB,WAAU;AAChC,UAAM,YAAe,aAAQ,QAAQ,SAAQ,EAAG,OAAW,oBAAc,SAAS;AAClF,QAAI,CAAC,WAAW;AACd,WAAK,qBAAqB,IAAI;IAChC,OAAO;AACL,YAAe,mCAAyB,yBAAyB,SAAQ,EAAG,4BACxE,UAAU,SAAQ,GAAI,OAAO,iBAAoD;AAC/E,cAAM,aAAa,MAAM,aAAa,WAAU;AAChD,YAAI,cAAc,WAAW,aAAa,kBAAiB,MAAO,KAAK,aAAa,kBAAiB,GAAI;AACvG,eAAK,qBAAqB,UAAU;AACpC,eAAK,8BAA8B,UAAU,uBAAuB;AAGpE,eAAK,mCAAkC;QACzC,OAAO;AACL,eAAK,qBAAqB,IAAI;QAChC;MACF,GAAG,KAAK,gBAAgB;IAC9B;EACF;EAEQ,qBAAqB,mBAAyD;AACpF,QAAI,KAAK,sBAAsB,qBAAqB,CAAC,KAAK,QAAQ;AAChE;IACF;AACA,SAAK,oBAAoB;AAEzB,QAAI,mBAAmB;AACrB,YAAM,iBACF,KAAK,YAAY,2BAA2B,kBAAkB,YAAY,kBAAkB,YAAY;AAC5G,YAAM,iBAA4B,qBAAS,SAAS,KAAK,OAAO,MAAM,KAAK,cAAc;AACzF,WAAK,OAAO,SAAS;QACnB,SAAS;UACI,yCAA6B,uBAAuB,GAAG,cAAc;;OAEnF;AACD,WAAK,KAAK,uBAAsB;AAChC,UAAI,KAAK,aAAa;AACpB,aAAK,KAAK,wBAAuB;MACnC;IACF,OAAO;AACL,WAAK,OAAO,SAAS;QACnB,SAAS;UACP,kBAAkB,OAAO,GAAc,uBAAW,IAAI;UACtD,iBAAiB,OAAO,GAAc,uBAAW,IAAI;UAC1C,yCAA6B,yBAAyB,GAAE;;OAEtE;IACH;EACF;EAES,UAAO;AACd,SAAK,sBAAqB;AAC1B,QAAI,KAAK,kBAAkB;AACzB,WAAK,iBAAiB,QAAO;IAC/B;AACA,eAAW,UAAU,KAAK,2BAA2B,OAAM,GAAI;AAC7D,aAAO,oBAAmB,gBACoD,KAAK,cAAc,IAAI;AACrG,aAAO,oBAAmB,oBACwD,KAAK,kBAAkB,IAAI;IAC/G;AACA,SAAK,2BAA2B,MAAK;AAErC,SAAK,eAAe,YAAW;AAC/B,SAAK,eAAe,QAAO;AAC3B,SAAK,qBAAqB,IAAI;AAE9B,SAAK,kBAAkB,oBACP,+BAAkB,OAAO,iBAAiB,KAAK,kBAAkB,IAAI;AACrF,SAAK,kBAAkB,oBACP,+BAAkB,OAAO,mBAAmB,KAAK,kBAAkB,IAAI;AACvF,SAAK,aAAa,oBACJ,yBAAa,OAAO,oBAAoB,KAAK,oBAAoB,IAAI;AACnF,SAAK,aAAa,oBACJ,yBAAa,OAAO,sBAAsB,KAAK,sBAAsB,IAAI;AAEvF,IAAU,8BAAkB,kBAAkB,SAAQ,EAAG,qBAAqB,KAAK,kBAAkB;AAErG,kCAA8B,OAAO,KAAK,YAAY;AACtD,UAAM,QAAO;AAEb,WAAO,aAAa,KAAK,yBAAyB;AAGlD,SAAK,SAAS;AAEd,IAAG,aAAQ,QAAQ,SAAQ,EAAG,2BAA+B,oBAAc,WAAW,KAAK,kBAAkB,IAAI;AACjH,SAAK,iBAAiB,WAAU;EAClC;;;;;EAMA,qCAAkC;AAChC,QAAI,KAAK,sCAAsC;AAC7C;IACF;AACA,SAAK,uCAAuC;AAE5C,UAAM,WAAkB,sBAAa,aAAa,YAAY,KAAK,aAAa,IAAG,CAAE;AACrF,UAAM,YAAmB,sBAAa,aAAa,oBAC/C,YAAY,IAAI,KAAK,aAAa,YAAW,EAAG,gBAAe,GACrD,qBAAU,WAAW,KAAK,aAAa,QAAO,CAAE,GAAG,KAAK,aAAa,IAAG,EAAG,WAAW,YAAY,GAC5G,KAAK,aAAa,IAAG,EAAG,WAAW,aAAa,CAAC;AACrD,IAAK,kBAAY,yBAAyB,SAAS;EACrD;;AAGI,IAAO,6BAAP,MAAiC;EAErC,MAAM,OAAO,oBAAsE,WAA6B;AAE9G,UAAM,EAAC,WAAU,IAAI;AACrB,iBAAa,SAAQ,EAAG,eAAe,YAAY,SAAS;AAC5D,UAAM,iBAAiB,8BAA8B,IAAI,WAAW,YAAY;AAChF,QAAI,gBAAgB;AAClB,qBAAe,uBAAuB,kBAAkB;IAC1D,OAAO;AACL,mCAA6B,SAAQ,EAAG,uBAAuB,mBAAmB,YAAY,KAAK;IACrG;EACF;;AAKF,eAAe,yBACX,OAA+B,aAC/B,YAA+C;AACjD,QAAM,2BAAoC,mCAAyB,yBAAyB,SAAQ;AACpG,QAAM,cAAc,MAAM,yBAAyB,eAAe,UAAU;AAC5E,MAAI,CAAC,aAAa;AAChB,WAAO,CAAA;EACT;AACA,QAAM,gBAAgB,CAAA;AACtB,WAAS,IAAI,GAAG,IAAI,MAAM,IAAI,OAAO,KAAK;AACxC,UAAM,EAAC,WAAU,IAAI,YAAY,2BAA2B,GAAG,CAAC;AAChE,QAAI,CAAC,YAAY,IAAI,UAAU,GAAG;AAChC,oBAAc,KAAK,MAAM,IAAI,KAAK,IAAI,CAAC,EAAE,IAAI;IAC/C;EACF;AACA,SAAO;AACT;AASA,IAAM,oBAA+B,wBAAY,OAAM;AACvD,IAAM,kBAA6B,wBAAY,OAAM;AAErD,SAAS,kBAAkB,SAAuD,KAAoB;AAEpG,QAAM,aAA+D,CAAA;AACrE,UAAQ,QAAQ,GAAG,IAAI,QAAQ,CAAC,MAAM,KAAK,WAAU;AACnD,QAAI,YAAoB,OAAO;AAC/B,QAAI,CAAC,yBAAyB,KAAK,SAAS,GAAG;AAC7C,mBAAa;IACf;AACA,eAAW,KAAK,IAAI,uBACA,WAAW,MAAM,kBAAkB,yBAAyB,OAAO,YAAY,MAAS,EACvF,MAAM,IAAI,CAAC;EAClC,CAAC;AACD,SAAkB,qBAAS,GAAG,YAAY,KAAK;AACjD;AASA,IAAM,oBAA+B,uBAAW,OAA6B;EAC3E,SAAM;AACJ,WAAO,EAAC,SAAoB,qBAAS,OAAO,QAAmB,qBAAS,MAAK;EAC/E;EACA,OAAO,MAAM,IAAE;AACb,QAAI,CAAC,GAAG,QAAQ,OAAO;AACrB,aAAO,EAAC,SAAS,KAAK,QAAQ,IAAI,GAAG,OAAO,GAAG,QAAQ,KAAK,OAAO,IAAI,GAAG,OAAO,EAAC;IACpF;AACA,eAAW,UAAU,GAAG,SAAS;AAC/B,UAAI,OAAO,GAAG,iBAAiB,GAAG;AAChC,eAAO,OAAO;MAChB,WAAW,OAAO,GAAG,eAAe,GAAG;AACrC,eAAO,EAAC,SAAoB,qBAAS,OAAO,QAAQ,kBAAkB,KAAK,QAAQ,GAAG,MAAM,GAAG,EAAC;MAClG;IACF;AACA,WAAO;EACT;EACA,SAAS,WACL;IAAY,uBAAW,YAAY,KAAK,OAAO,UAAQ,KAAK,OAAO;IACvD,8BAAkB,KAAK,OAAO,UAAQ,KAAK,MAAM;EAAC;CACnE;AAED,IAAM,yBAAN,cAAgD,uBAAU;EAGnC;EAAoE;EAFzF;EAEA,YAAqB,YAAoE,QAAsB;AAC7G,UAAK;AADc,SAAA,aAAA;AAAoE,SAAA,SAAA;AAGvF,SAAK,QAAQ;AACb,QAAI,YAAY,WAAU,GAAI;AAC5B,WAAK,SAAS;IAChB,WAAW,YAAY,UAAS,GAAI;AAClC,WAAK,SAAS;IAChB;AACA,QAAI,CAAC,YAAY,QAAO,GAAI;AAC1B,WAAK,SAAS;IAChB;EACF;EAES,GAAG,OAA6B;AACvC,WAAO,MAAM,UAAU,KAAK,SAAS,MAAM,eAAe,KAAK;EACjE;EAEA,QAAK;AACH,UAAM,OAAO,SAAS,cAAc,MAAM;AAC1C,SAAK,YAAY,KAAK;AACtB,SAAK,aAAa,SAAS,GAAiB,iCAAgB,EAAG,MAAM,EAAC,OAAO,KAAI,CAAC,CAAC,EAAE;AACrF,SAAK,iBAAiB,SAAS,CAAC,UAAqB;AACnD,WAAK,OAAO,8BAA8B,OAAO,KAAK,UAAU;AAChE,YAAM,QAAO;IACf,CAAC;AACD,SAAK,iBAAiB,eAAe,CAAC,UAAqB;AACzD,WAAK,OAAO,oCAAoC,OAAO,KAAK,UAAU;AACtE,YAAM,QAAO;IACf,CAAC;AACD,WAAO;EACT;EAES,cAAW;AAClB,WAAO;EACT;;AAGF,IAAM,yBAAN,MAAM,gCAA0C,yBAAY;EAMpC;EALtB,OAAO,gBAAgB;EACd;EACA;EAET,YACsB,cAAsB,UACxC,WAAuD;AACzD,UAAK;AAFe,SAAA,eAAA;AAGpB,SAAK,YAAY;AACjB,SAAK,YAAY;EACnB;EAES,GAAG,OAA6B;AACvC,WAAO,MAAM,iBAAiB,KAAK;EACrC;EAES,MAAM,MAA2B;AACxC,UAAM,MAAM,SAAS,cAAc,KAAK;AACxC,QAAI,aAAa,SAAS,GAAiB,iCAAgB,EAAG,MAAM,EAAC,OAAO,KAAI,CAAC,CAAC,EAAE;AACpF,UAAM,OAAO,KAAK,MAAM,IAAI,OAAO,KAAK,SAAS,EAAE;AACnD,UAAM,eAAe,KAAK,MAAM,MAAkB,0BAAY,qBAAqB;AACnF,QAAI,cAAc,aAAa,MAAM,KAAK,KAAK;AAC/C,QAAI,CAAC,KAAK,WAAW;AACnB,aAAO;IACT;AACA,UAAM,YAAY,SAAS,cAAc,KAAK;AAC9C,UAAM,KAAK,yBAAyB,wBAAuB,eAAe;AAC1E,QAAI,aAAa,gBAAgB,EAAE;AACnC,cAAU,YAAY,GAAG;AACzB,UAAM,UAAU,IAAa,kBAAQ,QAAQ;MAC3C;MACA,QAAQ;MACR,cAAc;KACf;AACD,YAAQ,OAAO,KAAK,SAAS;AAC7B,cAAU,YAAY,OAAO;AAC7B,WAAO;EACT;;AAGF,SAAS,uBACL,GAA6C,GAA2C;AAC1F,MAAI,EAAE,QAAO,MAAO,EAAE,QAAO,GAAI;AAC/B,WAAO,EAAE,QAAO,IAAK,KAAK;EAC5B;AACA,MAAI,EAAE,MAAK,MAAO,EAAE,MAAK,GAAI;AAC3B,WAAO,EAAE,MAAK,IAAK,KAAK;EAC1B;AACA,MAAI,QAAQ,EAAE,UAAS,CAAE,MAAM,QAAQ,EAAE,UAAS,CAAE,GAAG;AACrD,WAAO,QAAQ,EAAE,UAAS,CAAE,IAAI,KAAK;EACvC;AACA,SAAO;AACT;AAKA,SAAS,2BAAwB;AAI/B,QAAM,SAAoB,wBAAY,OAAM;AAC5C,QAAM,QAAmB,uBAAW,OAAiC;IACnE,SAAM;AACJ,aAAkB,uBAAW;IAC/B;IACA,OAAO,MAAM,IAAE;AACb,aAAO,GAAG,QAAQ,OAAO,CAACM,OAAM,WAAW,OAAO,GAAG,MAAM,IAAI,OAAO,QAAQA,OAAM,KAAK,IAAI,GAAG,OAAO,CAAC;IAC1G;IACA,SAAS,CAAAC,WAAoB,uBAAW,YAAY,KAAKA,MAAK;GAC/D;AACD,SAAO,EAAC,QAAQ,MAAK;AACvB;AAIA,IAAM,iBAA4B,uBAAW,KAAK,EAAC,OAAO,wBAAuB,CAAC;AAClF,IAAM,sBAAiC,uBAAW,KAAK,EAAC,OAAO,oDAAmD,CAAC;AAEnH,IAAM,oBAAoB,yBAAwB;AAElD,IAAM,YAAY,CAAA;AAAlB,IAAsB,qBAAqB;EACzC,OAAO;;AAMT,IAAM,mBAA8B,uBAAW,kBAAkB,QAAQ,CAAC,kBAAkB,KAAK,GAAG,WAAQ;AAC1G,SAAO,MAAM,MAAM,kBAAkB,KAAK,EAAE,OAAO,qBAAqB;AAC1E,CAAC;AAID,IAAM,kBAAN,cAAyC,uBAAU;EAC5B;EAArB,YAAqB,OAAqD;AACxE,UAAK;AADc,SAAA,QAAA;EAErB;EAES,GAAG,OAAsB;AAChC,WAAO,KAAK,MAAM,WAAW,MAAM,MAAM,UACrC,KAAK,MAAM,MAAM,CAAC,GAAG,MAAM,EAAE,CAAC,MAAM,MAAM,MAAM,CAAC,EAAE,CAAC,KAAK,EAAE,CAAC,MAAM,MAAM,MAAM,CAAC,EAAE,CAAC,CAAC;EACzF;EAEA,QAAK;AACH,UAAM,YAAY,IAAa,uCAA6B,6BAA4B;AACxF,UAAM,SAAS,SAAS,cAAc,KAAK;AAC3C,WAAO,UAAU,IAAI,mBAAmB;AACxC,QAAI,QAAQ;AACZ,eAAW,CAAC,MAAMF,MAAK,KAAK,KAAK,OAAO;AACtC,UAAI,OAAO;AACT,gBAAQ;MACV,OAAO;AACL,QAAG,aAAQ,gBAAgB,QAAQ,IAAI;MACzC;AACA,YAAM,gBAAgB,OAAO,YAAY,MAAM;AAC/C,MAAG,aAAQ,gBAAgB,eAAe,OAAO,KAAK;AACtD,YAAM,gBAAgBA,OAAM,UAAUA,OAAM,QAAQ,WAAW,SAAS;AACxE,YAAM,aAAaA,OAAM,SAAS,UAAUA,OAAM,QAAQ,QAAQ,SAAS;AAC3E,UAAIA,OAAM,WAAW,gBAAgB,aAAa,IAAI;AACpD,kBAAU;UAAoB;UAAeA,OAAM;UAAS;;QAAmB;MACjF,OAAO;AACL,cAAM,gBAAyB,kCAAwB,wBAAwB;UAC3EA;;UAAuB;;UAAyB;QAAK;AACzD,sBAAc,YAAY,cAAc,OAAO;MACjD;IACF;AACA,WAAO;EACT;;AAGF,IAAM,mBAAmB,yBAAwB;AAEjD,SAAS,qBAAqB,WAAiB;AAC7C,SAAO,cAAc,kBAAkB,cAAc;AACvD;AAEA,SAAS,qBAAqB,WAAiB;AAC7C,SAAO,cAAc;AACvB;AAEA,SAAS,qBAAqB,WAAiB;AAC7C,SAAO,cAAc,SAAS,cAAc;AAC9C;AAEA,SAAS,YAAY,WAAiB;AACpC,SAAO,cAAc,WAAW,cAAc;AAChD;AAEA,IAAM,wBAAN,MAA2B;EACzB,YAAyB,oBAAI,IAAG;EAChC,YAA6D,CAAA;;AAGzD,SAAU,uBACZ,aAAqC,SAAiB,OACtD,YAAkB;AACpB,QAAM,WAAW,YAAY,IAAI,OAAO,OAAO;AAC/C,YAAU,KAAK,IAAI,SAAS,IAAI,OAAO;AACvC,UAAQ,YAAY,IAAI,OAAO,KAAK,EAAE;AACtC,QAAM,OAAkB,uBAAW,WAAW;AAI9C,WAAS,mBAAmB,MAA8C;AACxE,WAAO,YAAY,KAAK,IAAI,MAAM,KAAK,KAAK,cAAc,aAAa,KAAK;EAC9E;AAEA,QAAM,QAAyD,CAAA;AAC/D,MAAI,UAAU;AACd,QAAM,eAAwC,CAAA;AAC9C,MAAI,4BAAwD;AAE5D,WAAS,eAAY;AACnB,WAAO,aAAa,SAAS,aAAa,aAAa,SAAS,CAAC,EAAE,YAAY;EACjF;AAEA,OAAK,QAAQ;IACX,MAAM;IACN,IAAI;IACJ,OAAO,UAAO;AACZ,UAAI,KAAK,OAAO,SAAS;AACvB;MACF;AAEA,UAAI,qBAAqB,KAAK,IAAI,GAAG;AACnC,oCAA4B,KAAK,KAAK;AACtC;MACF;AAEA,UAAI,mBAAmB,IAAI,GAAG;AAC5B,qBAAa,KAAK,IAAI,sBAAqB,CAAE;AAC7C;MACF;AAEA,YAAM,UAAU,qBAAqB,KAAK,IAAI,KAAK,YAAY,SAAS,KAAK,MAAM,KAAK,EAAE;AAC1F,UAAI,CAAC,SAAS;AACZ;MACF;AAEA,UAAI,6BAA6B,qBAAqB,KAAK,IAAI,KAAK,aAAa,SAAS,GAAG;AAC3F,qBAAa,aAAa,SAAS,CAAC,EAAE,UAAU,IAAI,OAAO;AAC3D;MACF;AAEA,UAAI,KAAK,OAAO,QAAQ,IAAI;AAC1B,kBAAU,YAAY,IAAI,OAAO,KAAK,IAAI;MAC5C;AAEA,mBAAY,EAAG,KAAK,EAAC,MAAM,QAAQ,SAAS,GAAG,MAAM,KAAK,MAAM,IAAI,QAAO,CAAC;IAC9E;IACA,OAAO,UAAO;AACZ,UAAI,8BAA8B,KAAK,MAAM;AAC3C,oCAA4B;MAC9B,WAAW,mBAAmB,IAAI,GAAG;AACnC,cAAM,WAAW,aAAa,IAAG;AACjC,cAAM,WAAW,aAAY;AAC7B,mBAAW,SAAS,UAAU,aAAa,CAAA,GAAI;AAC7C,cAAI,CAAC,UAAU,UAAU,IAAI,MAAM,EAAE,GAAG;AACtC,qBAAS,KAAK,KAAK;UACrB;QACF;MACF;IACF;GACD;AACD,SAAO;AACT;AAEA,eAAsB,qBAClB,WACA,2BAAuF;AAEzF,QAAM,gBACuG,CAAA;AAC7G,aAAW,SAAS,UAAU,WAAU,GAAI;AAC1C,UAAM,aAAa,MAAM,0BAA0B,MAAM,MAAK,GAAI,SAAS,IAAI;AAC/E,QAAI,CAAC,YAAY;AACf;IACF;AACA,UAAM,WAAW,MAAM,0BAA0B,MAAM,MAAK,GAAI,OAAO,IAAI;AAC3E,QAAI,CAAC,UAAU;AACb;IACF;AAEA,UAAM,EAAC,WAAU,IAAI,MAAsB,+BAAc,qBAAqB,KAAK,EAAE,iBAAiB,OAAO,KAAK;AAClH,QAAI,CAAC,cAAc,WAAW,SAAS,+CAA+C;AACpF;IACF;AACA,UAAM,cAAc,IAAI,IACpB,WAAW,IAAI,OAAK,CAAC,EAAE,MAAM,EAAE,KAAK,CAA4C,CAAC;AAErF,kBAAc,KAAK,EAAC,YAAY,UAAU,YAAW,CAAC;AAGtD,QAAI,MAAM,KAAI,MAAE,SAAwC;AACtD;IACF;EACF;AACA,SAAO;AACT;AAEM,SAAU,wBACZ,eAEA,eAA8D;AAEhE,QAAM,eAAe,oBAAI,IAAG;AAC5B,aAAW,EAAC,MAAM,MAAM,GAAE,KAAK,eAAe;AAC5C,UAAM,WAAW,oBAAoB,IAAI,MAAM,aAAa;AAC5D,QAAI,CAAC,UAAU;AACb;IACF;AACA,QAAI,QAAQ,aAAa,IAAI,IAAI;AACjC,QAAI,CAAC,OAAO;AACV,cAAQ,oBAAI,IAAG;AACf,mBAAa,IAAI,MAAM,KAAK;IAC9B;AACA,UAAM,IAAI,IAAI,QAAQ;EACxB;AACA,SAAO;AAEP,WAAS,oBACL,MACA,KACAG,gBAC0G;AAE5G,eAAW,SAASA,gBAAe;AACjC,UAAI,MAAM,MAAM,cAAc,OAAO,MAAM,UAAU;AACnD;MACF;AACA,YAAMH,SAAQ,MAAM,YAAY,IAAI,IAAI;AACxC,UAAIA,QAAO;AACT,eAAOA;MACT;IACF;AACA,WAAO;EACT;AACF;AAIM,SAAU,6BAA6B,OAA+B,UAAkB,WAAiB;AAK7G,QAAM,EAAC,KAAI,IAAI,MAAM;AACrB,MAAI,CAAC,KAAK,OAAO;AACf,QAAI,YAAY,KAAK,QAAQ,KAAK,KAAK,WAAW;AAChD,aAAO;IACT;AAEA,WAAO,EAAC,MAAM,KAAK,MAAM,IAAI,KAAK,IAAI,qBAAqB,MAAK;EAClE;AAEA,QAAM,OAAkB,6BAAiB,OAAO,WAAW,IAAI,GAAI;AACnE,MAAI,CAAC,MAAM;AACT,WAAO;EACT;AAEA,QAAM,OAAO,KAAK,aAAa,WAAW,CAAC;AAE3C,MAAI,KAAK,YAAY;AACnB,WAAO;EACT;AAEA,UAAQ,UAAU;IAChB,KAAK,oBAAoB;AACvB,UAAI,KAAK,SAAS,cAAc;AAC9B,eAAO;MACT;AAMA,YAAM,sBAAsB,CAAC,SAAS,QAAQ,MAAM,QAAQ,OAAO,MAAM,SAAS,UAAU;AAC5F,eAAS,SAAqC,KAAK,QAAQ,QAAQ,SAAS,OAAO,QAAQ;AACzF,YAAI,OAAO,SAAS,OAAO;AACzB,gBAAM,aAAa,OAAO;AAC1B,gBAAM,SAAS,YAAY,SAAS,aAAa,MAAM,SAAS,WAAW,MAAM,WAAW,EAAE;AAC9F,cAAI,UAAU,oBAAoB,SAAS,MAAM,GAAG;AAClD,mBAAO;UACT;QACF;MACF;AACA,aAAO,EAAC,MAAM,KAAK,MAAM,IAAI,KAAK,IAAI,qBAAqB,MAAK;IAClE;IAEA,KAAK;IACL,KAAK;IACL,KAAK;IACL,KAAK;IACL,KAAK,uBAAuB;AAC1B,UAAI,UAAsC;AAC1C,aAAO,WAAW,QAAQ,SAAS,UAAU,QAAQ,SAAS,wBACvD,QAAQ,SAAS,kBAAkB,QAAQ,SAAS,sBACpD,EAAE,QAAQ,SAAS,kBAAkB,QAAQ,QAAQ,SAAS,qBAC5D,QAAQ,aAAa,SAAS,QAChC,EAAE,QAAQ,SAAS,wBAAwB,QAAQ,QAAQ,SAAS,cAClE,QAAQ,aAAa,SAAS,MAAM;AAC3C,kBAAU,QAAQ;MACpB;AACA,UAAI,CAAC,SAAS;AACZ,eAAO;MACT;AACA,aAAO,EAAC,MAAM,QAAQ,MAAM,IAAI,QAAQ,IAAI,qBAAqB,oBAAoB,MAAM,KAAK,OAAO,EAAC;IAC1G;IAEA,SAAS;AAGP,UAAI,KAAK,KAAK,KAAK,OAAO,MAAM,YAAY,KAAK,MAAM,SAAS,KAAK,MAAM,KAAK,EAAE,CAAC,GAAG;AACpF,eAAO;MACT;AACA,aAAO,EAAC,MAAM,KAAK,MAAM,IAAI,KAAK,IAAI,qBAAqB,MAAK;IAClE;EACF;AACF;AAEA,SAAS,oBAAoB,KAAsB,MAA2B;AAC5E,MAAII,uBAAsB;AAC1B,OAAK,OAAM,EAAG,QAAQ;IACpB,MAAM,MAA2B;AAC/B,cAAQ,KAAK,MAAM;QACjB,KAAK;QACL,KAAK,kBAAkB;AACrB,UAAAA,uBAAsB;AACtB,iBAAO;QACT;QACA,KAAK,WAAW;AACd,gBAAM,KAAK,IAAI,YAAY,KAAK,OAAO,KAAK,MAAM,KAAK,OAAO,KAAK,EAAE;AACrE,cAAI,OAAO,QAAQ,OAAO,MAAM;AAC9B,YAAAA,uBAAsB;AACtB,mBAAO;UACT;AACA;QACF;MACF;AACA,aAAO;IACT;GACD;AACD,SAAOA;AACT;AAIA,IAAM,qBAAgC,uBAAW,KAAK,EAAC,OAAO,yBAAwB,CAAC;AAEvF,IAAM,iBAAiB,yBAAwB;AAI/C,IAAMN,SAAmB,uBAAW,UAAU;EAC5C,uBAAuB;IACrB,iBAAiB;IACjB,OAAO;;EAET,2DAA2D;IACzD,4BAA4B;MAC1B,aAAa;MACb,aAAa;MACb,aAAa;MACb,aAAa;;MAEb,YAAY;MACZ,UAAU;;IAEZ,WAAW;MACT,mBAAmB,gBAAgB,WAAW,SAAS;;IAEzD,mBAAmB;MACjB,OAAO;MACP,mBAAmB,gBAAgB,WAAW,SAAS;;IAEzD,+BAA+B;MAC7B,mBAAmB,gBAAgB,WAAW,SAAS;MACvD,aAAa;QACX,SAAS;QACT,UAAU;QACV,KAAK;QACL,MAAM;;;IAGV,4BAA4B;MAC1B,mBAAmB,gBAAgB,WAAW,SAAS;MACvD,aAAa;QACX,SAAS;QACT,UAAU;QACV,KAAK;QACL,MAAM;;;;EAIZ,iEAAiE;IAC/D,WAAW;MACT,mBAAmB,gBAAgB,WAAW,SAAS;;IAEzD,mBAAmB;MACjB,mBAAmB,gBAAgB,WAAW,SAAS;;IAEzD,+BAA+B;MAC7B,mBAAmB,gBAAgB,WAAW,SAAS;;IAEzD,4BAA4B;MAC1B,mBAAmB,gBAAgB,WAAW,SAAS;;;EAG3D,mMACI;IACE,OAAO;IACP,mBAAmB,gBAAgB,WAAW,SAAS;IACvD,+BAA+B;MAC7B,OAAO;MACP,mBAAmB,gBAAgB,WAAW,SAAS;;IAEzD,4BAA4B;MAC1B,OAAO;MACP,mBAAmB,gBAAgB,WAAW,SAAS;;;EAG/D,6MACI;IACE,mBAAmB,gBAAgB,WAAW,SAAS;IACvD,+BAA+B;MAC7B,mBAAmB,gBAAgB,WAAW,SAAS;;IAEzD,4BAA4B;MAC1B,mBAAmB,gBAAgB,WAAW,SAAS;;;EAI/D,wBAAwB;IACtB,QAAQ;IACR,UAAU;IACV,KAAK;IACL,SAAS,sBAAsB,WAAW,SAAS;IACnD,QAAQ;IACR,qCAAqC;MACnC,SAAS,iCAAiC,WAAW,SAAS;;IAEhE,kCAAkC;MAChC,SAAS,oBAAoB,WAAW,SAAS;;;EAGrD,8BAA8B;IAC5B,SAAS,sBAAsB,WAAW,SAAS;IACnD,qCAAqC;MACnC,SAAS,iCAAiC,WAAW,SAAS;;IAEhE,kCAAkC;MAChC,SAAS,oBAAoB,WAAW,SAAS;;;EAGrD,iGAAiG;IAC/F,SAAS,sBAAsB,WAAW,WAAW,KAAK;IAC1D,qCAAqC;MACnC,SAAS,iCAAiC,WAAW,WAAW,KAAK;;IAEvE,kCAAkC;MAChC,SAAS,oBAAoB,WAAW,WAAW,KAAK;;;EAI5D,qBAAqB;IACnB,iBAAiB;IACjB,SAAS;IACT,4BAA4B;MAC1B,iBAAiB;;IAEnB,wBAAwB;MACtB,WAAW;;IAEb,+CAA+C;MAC7C,iBAAiB;;;EAGrB,sBAAsB;IACpB,iBAAiB;;EAEnB,4CAA4C;IAC1C,MAAM;MACJ,iBAAiB;;IAEnB,IAAI;MACF,iBAAiB;;;EAIrB,0BAA0B;IACxB,QAAQ;IACR,iBAAiB;IACjB,WAAW;MACT,iBAAiB;MACjB,QAAQ;MACR,QAAQ;;IAEV,iCAAiC;MAC/B,iBAAiB;MACjB,WAAW;QACT,iBAAiB;QACjB,QAAQ;QACR,QAAQ;;;;EAKd,2BAA2B;IACzB,iBAAiB;IACjB,QAAQ;IACR,QAAQ;;EAGV,sBAAsB;IACpB,SAAS;IACT,YAAY;IACZ,UAAU;IACV,cAAc;IACd,UAAU;IACV,SAAS;IACT,iBAAiB;IACjB,YAAY;IACZ,SAAS;IACT,YAAY;IACZ,uBAAuB;MACrB,iBAAiB;MACjB,SAAS;;;CAGd;AAED,SAAS,gBAAgB,OAAeO,UAAe;AACrD,SAAO,qIACH,mBAAmB,KAAK,CAAC,aAAa,mBAAmBA,QAAO,CAAC;AACvE;AAEA,SAAS,sBAAsB,OAAeA,UAAiB,UAAU,KAAG;AAC1E,SAAO,kRACH,mBACI,KAAK,CAAC,aAAa,mBAAmBA,QAAO,CAAC,mBAAmB,mBAAmB,OAAO,CAAC;AACtG;AAEA,SAAS,iCAAiC,OAAeA,UAAiB,UAAU,KAAG;AACrF,SAAO,oRACH,mBAAmB,KAAK,CAAC,mBAAmB,mBAAmB,OAAO,CAAC,aACvE,mBACIA,QAAO,CAAC;AAClB;AAEA,SAAS,oBAAoB,OAAeA,UAAiB,UAAU,KAAG;AACxE,SAAO,kRACH,mBAAmB,KAAK,CAAC,aAAa,mBAAmBA,QAAO,CAAC,mBACjE,mBACI,OAAO,CAAC;AAClB;;;AmBx9EA;;;;AA8BM,IAAO,wBAAP,MAA4B;EACxB;EACS;EACT;EACA;EACA;EACA;EAER,YAAY,OAAa;AACvB,SAAK,QAAQ;AACb,SAAK,iBAAiB,MAAM,YAAW;AACvC,SAAK,QAAQ,IAAI,WAAW,KAAK,GAAG;AACpC,SAAK,WAAW,IAAI,WAAW,KAAK,GAAG;AACvC,SAAK,gBAAgB;AACrB,SAAK,gBAAgB;EACvB;;;;;;;;;;;;;;;;;;;;EAqBA,eAAe,MAAc,cAA2B;AACtD,QAAI,CAAC,QAAQ,CAAC,KAAK,OAAO;AACxB,aAAO;IACT;AACA,UAAM,cAAc,KAAK,MAAM;AAC/B,UAAM,aAAa,KAAK;AACxB,QAAI,CAAC,KAAK,SAAS,KAAK,MAAM,SAAS,cAAc,YAAY;AAC/D,WAAK,QAAQ,IAAI,WAAW,cAAc,aAAa,CAAC;AACxD,WAAK,WAAW,IAAI,WAAW,cAAc,aAAa,CAAC;IAC7D;AACA,UAAM,QAAQ,KAAK;AACnB,UAAM,WAAY,KAAK;AACvB,SAAK,gBAAgB,KAAK,YAAW;AACrC,SAAK,gBAAgB,KAAK,YAAY,GAAG;AACzC,aAAS,IAAI,GAAG,IAAI,aAAa,EAAE,GAAG;AACpC,eAAS,IAAI,GAAG,IAAI,YAAY,EAAE,GAAG;AACnC,cAAM,aAAa,IAAI,aAAa;AACpC,cAAM,gBAAgB,MAAM,IAAI,IAAI,MAAM,aAAa,CAAC;AACxD,cAAM,gBAAgB,MAAM,KAAK,MAAM,IAAI,IAAI,OAAO,IAAI,KAAK,aAAa,IAAI,CAAC;AACjF,cAAM,mBAAmB,MAAM,KAAK,MAAM,IAAI,IAAI,UAAU,IAAI,KAAK,aAAa,IAAI,CAAC;AACvF,cAAM,gBAAgB,KAAK,MAAM,KAAK,OAAO,MAAM,GAAG,GAAG,gBAAgB;AACzE,YAAI,iBAAiB,gBAAgB,iBAAiB,eAAe;AACnE,mBAAS,UAAU,IAAI,mBAAmB;AAC1C,gBAAM,UAAU,IAAK,gBAAgB;QACvC,OAAO;AACL,mBAAS,UAAU,IAAI;AACvB,gBAAM,UAAU,IAAI;QACtB;MACF;IACF;AACA,QAAI,cAAc;AAChB,WAAK,oBAAoB,UAAU,aAAa,YAAY,YAAY;IAC1E;AACA,UAAM,gBAAgB;AACtB,WAAO,MAAM,cAAc,aAAa,CAAC,IAAI,iBAAiB,gBAAgB,KAAK;EACrF;EAEQ,cAAc,MAAc,GAAS;AAC3C,QAAI,MAAM,GAAG;AACX,aAAO;IACT;AAEA,UAAM,WAAW,KAAK,OAAO,IAAI,CAAC;AAClC,WAAO,aAAa,OAAO,aAAa,OAAO,aAAa,OAAO,aAAa,OAAO,aAAa,OAC/F,KAAK,IAAI,CAAC,MAAM,KAAK,cAAc,IAAI,CAAC,KAAK,KAAK,CAAC,MAAM,KAAK,cAAc,CAAC;EACpF;EAEQ,oBAAoB,UAAsB,aAAqB,YAAoB,KAAa;AACtG,QAAI,IAAI,cAAc,GAAG,IAAI,aAAa;AAC1C,WAAO,KAAK,KAAK,KAAK,GAAG;AACvB,cAAQ,SAAS,IAAI,aAAa,CAAC,GAAG;QACpC,KAAK;AACH,YAAE;AACF;QACF;AACE,cAAI,KAAK,CAAC;AACV,YAAE;AACF,YAAE;AACF;MACJ;IACF;AACA,QAAI,QAAO;EACb;EAEQ,gBAAgB,OAAe,MAAc,GAAW,GAAS;AACvE,UAAM,cAAc,KAAK,cAAc,MAAM,CAAC;AAC9C,UAAM,aAAa,IAAI,KAAK;AAC5B,UAAM,mBAAmB,MAAM,KAAK,KAAK,IAAI,CAAC,MAAM;AACpD,UAAM,cAAc,MAAM,CAAC,MAAM,KAAK,CAAC,KAAK,MAAM,CAAC,MAAM,KAAK,eAAe,CAAC;AAC9E,QAAI,QAAQ;AACZ,QAAI,kBAAkB;AACpB,eAAS;IACX;AACA,QAAI,aAAa;AACf,eAAS;IACX;AACA,QAAI,aAAa;AACf,eAAS;IACX;AACA,QAAI,YAAY;AACd,eAAS;IACX;AAEA,QAAI,MAAM,KAAK,gBAAgB,KAAK,MAAM,GAAG;AAC3C,eAAS;IACX;AACA,QAAI,cAAc,aAAa;AAC7B,eAAS;IACX;AACA,WAAO;EACT;EAEQ,kBAAkB,MAAc,GAAW,gBAAsB;AACvE,UAAM,aAAa,IAAI,KAAK;AAC5B,UAAM,mBAAmB,MAAM,KAAK,KAAK,IAAI,CAAC,MAAM;AACpD,QAAI,QAAQ;AACZ,QAAI,YAAY;AACd,eAAS;IACX;AACA,QAAI,kBAAkB;AACpB,eAAS;IACX;AACA,aAAS,iBAAiB;AAC1B,WAAO;EACT;EAEQ,MAAM,OAAe,MAAc,GAAW,GAAW,kBAAwB;AACvF,QAAI,KAAK,eAAe,CAAC,MAAM,KAAK,cAAc,CAAC,GAAG;AACpD,aAAO;IACT;AAEA,QAAI,CAAC,kBAAkB;AACrB,aAAO,KAAK,gBAAgB,OAAO,MAAM,GAAG,CAAC;IAC/C;AACA,WAAO,KAAK,kBAAkB,MAAM,IAAI,kBAAkB,gBAAgB;EAC5E;;;;ACrLF;;;;AAKA,YAAYC,YAAU;AACtB,YAAYC,WAAU;AACtB,YAAYC,mBAAiB;AAC7B,YAAYC,iBAAe;AAC3B,YAAYC,gBAAe;AAC3B,YAAYC,UAAQ;AAIpB,IAAMC,cAAY;;;;EAIhB,cAAc;;;;;EAKd,eAAe;;AAEjB,IAAMC,SAAY,YAAK,kBAAkB,sDAAsDD,WAAS;AACxG,IAAME,eAAkB,YAAK,mBAAmB,KAAK,QAAWD,MAAI;AAC9D,IAAO,mCAAP,cAA0D,8BAAmB,SAAQ;EACjF;EACA;EACA;EACA;EACS;EACT;EACR,YAAY,cAAoB;AAC9B,UAAM,YAAY;AAElB,SAAK,iCAAiC;AACtC,SAAK,gBAAgB;AACrB,SAAK,SAAS,IAAI,sBAAsB,EAAE;AAE1C,SAAK,gBAAgB,CAAA;AACrB,SAAK,kBAAkB,oBAAI,IAAG;EAChC;EAEQ,eAAe,OAAuE;AAC5F,UAAM,UAAU,MAAM;AACtB,SAAK,SAAS,OAAO;AACrB,SAAK,QAAO;EACd;EAEQ,SAAS,aAAyC;AACxD,SAAK,gBAAgB,CAAA;AACrB,SAAK,gBAAgB,MAAK;AAC1B,eAAW,WAAqB,sBAAU,cAAc,SAAQ,EAAG,SAAQ,GAAI;AAC7E,UAAI,YAAY,eAAe,KAAK,cAAc,OAAO,GAAG;AAC1D,mBAAW,gBAAgB,QAAQ,cAAa,GAAI;AAClD,cAAI,KAAK,mBAAmB,YAAY,GAAG;AACzC,iBAAK,cAAc,KAAK,YAAY;AACpC,iBAAK,gBAAgB,IAAI,aAAa,kBAAiB,CAAE;UAC3D;QACF;MACF;IACF;EACF;EAEQ,mBAAmB,cAAiD;AAC1E,QAAI,KAAK,gBAAgB,IAAI,aAAa,kBAAiB,CAAE,GAAG;AAC9D,aAAO;IACT;AACA,QAAS,cAAQ,YAAY;MAAS;;IAAA,KACxB,8BAAkB,kBAAkB,SAAQ,EAAG,0CACrD,YAAY,GAAG;AACrB,aAAO;IACT;AAEA,QAAI,aAAa,WAAU,GAAI;AAC7B,aAAO;IACT;AAEA,UAAM,UAAsB,0BAAY,gBAAgB,SAAQ,EAAG,QAAQ,YAAY;AACvF,WAAO,CAAC,WAAW,QAAQ,eAAe;EAC5C;EAEA,qBACI,eAAyD,aAAsB,eAAsB;EAEzG;EAEA,cAAc,UAAqC;AACjD,WAAO;EAET;EAES,YAAS;AAChB,WAAO,KAAK,cAAc;EAC5B;EAEA,kBAAkB,WAAiB;AACjC,WAAO,KAAK,cAAc,SAAS,EAAE,YAAW;EAClD;EAES,UAAU,WAAiB;AAClC,WAAO,KAAK,cAAc,SAAS,EAAE,IAAG;EAC1C;EAEA,iBAAiB,eAAoE;AACnF,SAAK,gBAAgB;EACvB;EAES,YAAY,WAAmB,OAAa;AACnD,UAAM,eAAe,KAAK,cAAc,SAAS;AACjD,UAAM,QAAQ,KAAK,gBAAiB,KAAK,cAAc,IAAI,YAAY,KAAK,IAAK;AACjF,QAAI,CAAC,SAAS,MAAM,SAAS,GAAG;AAC9B,aAAO;IACT;AAEA,QAAI,KAAK,UAAU,OAAO;AACxB,WAAK,QAAQ;AACb,WAAK,SAAS,IAAI,sBAAsB,KAAK;IAC/C;AAEA,QAAI,aAAa;AACjB,QAAI,aAAa,QAAO,EAAG,KAAI,MAAiB,sBAAU,aAAa,cACnE,CAAa,0BAAY,gBAAgB,SAAQ,EAAG,QAAQ,YAAY,GAAG;AAC7E,mBAAa;IACf;AAEA,QAAI,mBAAmB;AACvB,QAAI,aAAa,YAAW,EAAG,gBAAe,KAAM,CAAC,aAAa,kBAAiB,GAAI;AACrF,yBAAmB;IACrB;AACA,QAAI,aAAa,YAAW,EAAG,SAAQ,GAAI;AAGzC,UAAI,CAAW,8BAAkB,kBAAkB,SAAQ,EAAG,0CACtD,YAAY,GAAG;AACrB,4BAAoB;MACtB;IACF;AAEA,UAAM,kBAAkB,aAAa,gBAAe;AACpD,WAAO,QAAQ,cAAc,mBAAmB,KAAK,OAAO,eAAe,iBAAiB,IAAI;EAClG;EAES,WAAW,WAAmB,OAAe,cAAuB,iBAAwB;AACnG,iBAAa,eAAe,eAAe,UAAU,OAAO,eAAe,QAAQ,KAAK,CAAC;AACzF,YAAQ,KAAK,aAAa,KAAK;AAC/B,UAAM,eAAe,KAAK,cAAc,SAAS;AACjD,UAAM,kBAAkB,aAAa,gBAAe;AACpD,UAAM,UAAoB,CAAA;AAC1B,QAAI,sBAAsB,KAAK,EAAE,eAAe,iBAAiB,OAAO;AACxE,UAAM,gBAAgB,gBAAgB,YAAY,GAAG;AACrD,UAAM,iBACQ,8BAAkB,kBAAkB,SAAQ,EAAG,0CACrD,YAAY;AACpB,QAAI,cAAc;AAElB,QAAI,gBAAgB;AAClB,mBAAa,eAAe,UAAU,IAAI,kBAAkB;AAC5D,oBAAcC,aAAWF,YAAU,eAAe,EAAC,KAAK,YAAW,CAAC;IACtE;AAEA,iBAAa,cAAc,aAAa,YAAW,KAAM,KAAK,kCAAkC;AAChG,SAAK,sBAAsB,iBAAiB,gBAAgB,UAAU,GAAG,gBAAgB,CAAC,CAAC;AAC3F,IAAG,aAAQ,QAAQ,QAAS,iBAAiC,WAAW;AAExE,UAAM,SAAS,CAAA;AACf,aAAS,IAAI,GAAG,IAAI,QAAQ,QAAQ,EAAE,GAAG;AACvC,aAAO,KAAK,EAAC,QAAQ,QAAQ,CAAC,GAAG,QAAQ,EAAC,CAAC;IAC7C;AAEA,QAAI,QAAQ,CAAC,IAAI,eAAe;AAC9B,eAAS,IAAI,GAAG,IAAI,OAAO,QAAQ,EAAE,GAAG;AACtC,eAAO,CAAC,EAAE,UAAU,gBAAgB;MACtC;AACA,MAAG,aAAQ,8BAA8B,cAAc,QAAQ,WAAW;IAC5E,OAAO;AACL,MAAG,aAAQ,8BAA8B,iBAAiB,QAAQ,WAAW;IAC/E;EACF;EAEQ,sBAAsB,SAAkB,MAAY;AAC1D,YAAQ,eAAc;AACtB,QAAI,gBAAgB,KAAK,YAAY,GAAG;AACxC,UAAM,gBAAgB;AACtB,QAAI,KAAK,SAAS,eAAe;AAC/B,sBAAgB,KAAK,SAAS;IAChC;AACA,UAAM,QAAQ,QAAQ,YAAY,OAAO,YAAY;AACrD,UAAM,cAAc,KAAK,UAAU,GAAG,aAAa;AACnD,UAAM,SAAS,QAAQ,YAAY,OAAO,aAAa;AACvD,WAAO,cAAc,KAAK,UAAU,aAAa;AACjD,IAAG,aAAQ,QAAQ,QAAS,SAAyB,IAAI;EAC3D;EAES,WAAW,WAAwB,aAAmB;AAC7D,UAAM,mBAAmB,YAAY,KAAI,EAAG,MAAM,yBAAyB;AAC3E,QAAI,CAAC,kBAAkB;AACrB;IACF;AAEA,QAAI;AACJ,QAAI;AACJ,QAAI,iBAAiB,CAAC,GAAG;AACvB,mBAAa,SAAS,iBAAiB,CAAC,EAAE,OAAO,CAAC,GAAG,EAAE,IAAI;IAC7D;AACA,QAAI,iBAAiB,CAAC,GAAG;AACvB,qBAAe,SAAS,iBAAiB,CAAC,EAAE,OAAO,CAAC,GAAG,EAAE,IAAI;IAC/D;AACA,UAAM,eAAe,cAAc,OAAO,KAAK,cAAc,SAAS,IAAI;AAC1E,SAAK,qBAAqB,cAAc,YAAY,YAAY;EAClE;EAES,aAAa,OAAa;AACjC,YAAQ,QAAQ,MAAM,KAAI,IAAK;AAC/B,QAAI,CAAC,SAAS,UAAU,KAAK;AAC3B,aAAO;IACT;AACA,UAAM,kBAAkB,MAAM,MAAM,4BAA4B;AAChE,SAAK,iCAAiC,kBAAkB,gBAAgB,CAAC,IAAI;AAC7E,WAAO,kBAAkB,gBAAgB,CAAC,IAAI;EAChD;EAEQ,kBAAkB,OAA+E;AACvG,UAAM,eAAe,MAAM;AAC3B,QAAI,CAAC,KAAK,mBAAmB,YAAY,KAAK,CAAC,KAAK,cAAc,aAAa,QAAO,CAAE,GAAG;AACzF;IACF;AACA,SAAK,cAAc,KAAK,YAAY;AACpC,SAAK,gBAAgB,IAAI,aAAa,kBAAiB,CAAE;AACzD,SAAK,QAAO;EACd;EAES,eAAY;AACnB,WAAOE,aAAWF,YAAU,YAAY;EAC1C;EAES,SAAM;AACb,IAAU,sBAAU,cAAc,SAAQ,EAAG,iBAC/B,sBAAU,OAAO,mBAAmB,KAAK,mBAAmB,IAAI;AAC9E,IAAU,sBAAU,cAAc,SAAQ,EAAG,iBAC/B,sBAAU,OAAO,gBAAgB,KAAK,gBAAgB,IAAI;AACxE,SAAK,SAAQ;EACf;EAES,SAAM;AACb,IAAU,sBAAU,cAAc,SAAQ,EAAG,oBAC/B,sBAAU,OAAO,mBAAmB,KAAK,mBAAmB,IAAI;AAC9E,IAAU,sBAAU,cAAc,SAAQ,EAAG,oBAC/B,sBAAU,OAAO,gBAAgB,KAAK,gBAAgB,IAAI;AACxE,SAAK,iCAAiC;AACtC,SAAK,gBAAgB;EACvB;;;;AC7PF;;;;AAIA,YAAYG,YAAU;AACtB,YAAYC,kBAAgB;AAC5B,YAAYC,gBAAe;AAC3B,YAAYC,UAAQ;AAKpB,IAAMC,cAAY;;;;EAIhB,gBAAgB;;;;EAIhB,gBAAgB;;;;EAIhB,2BAA2B;;;;;;EAM3B,+BAA+B;;;;;EAK/B,6BAA6B;;;;;EAK7B,cAAc;;;;;;EAMd,qBAAqB;;;;;EAKrB,WAAW;;AAEb,IAAMC,SAAY,YAAK,kBAAkB,uCAAuCD,WAAS;AACzF,IAAME,eAAkB,YAAK,mBAAmB,KAAK,QAAWD,MAAI;AAE9D,IAAO,oBAAP,cAA2C,8BAAmB,SAAQ;EAC1E,mBAA6B,CAAA;EAE7B,cAAA;AACE,UAAM,aAAa;EACrB;EAES,WAAW,YAAyB,aAAmB;AAC9D,UAAM,cAAc,KAAK,mBAAkB;AAC3C,QAAI,CAAC,aAAa;AAChB;IACF;AACA,UAAM,WAAW,KAAK,cAAc,WAAW;AAC/C,QAAI,CAAC,UAAU;AACb;IACF;AACA,gBAAY,eAAe,EAAC,YAAY,SAAS,OAAO,GAAG,cAAc,SAAS,SAAS,EAAC,CAAC;EAC/F;EAES,YAAS;AAChB,WAAO,KAAK,iBAAiB;EAC/B;EAES,WAAW,WAAmB,QAAgB,cAAuB,kBAAyB;AACrG,UAAM,OAAkB,kBAAK,OAAO,OAAO;AAC3C,iBAAa,eAAe,eAAe,aAAa,MAAM,aAAa,aAAa;AACxF,IAAG,aAAQ,gBAAgB,cAAc,KAAK,iBAAiB,SAAS,CAAC;EAC3E;EAES,aAAa,QAAc;AAElC,WAAO;EACT;EAES,aAAa,OAAa;AACjC,SAAK,mBAAmB,CAAA;AACxB,UAAM,WAAW,KAAK,cAAc,KAAK;AACzC,UAAM,cAAc,KAAK,mBAAkB;AAC3C,QAAI,CAAC,UAAU;AACb,UAAI,CAAC,aAAa;AAChB,aAAK,iBAAiB,KAAKC,aAAWF,YAAU,yBAAyB,CAAC;AAC1E;MACF;AACA,YAAM,cAAc,YAAY,WAAW;AAC3C,YAAM,cAAc,YAAY;AAChC,UAAI,aAAa;AACf,cAAM,qBAAqB,YAAY,2BAA2B,YAAY,cAAc,CAAC;AAC7F,cAAM,uBAAuB,mBAAmB,SAAS,EAAE,EAAE;AAC7D,aAAK,iBAAiB,KAAKE,aAAWF,YAAU,+BAA+B;UAC7E,KAAK,IAAI,SAAS,sBAAsB,GAAG;UAC3C,KAAK,mBAAmB,SAAS,EAAE;SACpC,CAAC;AACF;MACF;AACA,YAAM,aAAa,YAAY,2BAA2B,YAAY,IAAI,QAAQ,CAAC,EAAE,aAAa;AAClG,WAAK,iBAAiB,KAAKE,aAAWF,YAAU,6BAA6B,EAAC,KAAK,WAAU,CAAC,CAAC;AAC/F;IACF;AAEA,QAAI,aAAa,iBAAiB;AAChC,WAAK,iBAAiB,KAAKE,aAAWF,YAAU,cAAc,EAAC,MAAM,SAAS,SAAS,GAAG,SAAS,EAAE,EAAC,CAAC,CAAC;AACxG;IACF;AACA,QAAI,SAAS,UAAU,SAAS,SAAS,GAAG;AAC1C,WAAK,iBAAiB,KAAKE,aAAWF,YAAU,qBAAqB,EAAC,KAAK,SAAS,MAAM,KAAK,SAAS,OAAM,CAAC,CAAC;AAChH;IACF;AACA,QAAI,eAAe,SAAS,OAAO,YAAY,WAAW,MAAM,IAAI,OAAO;AACzE;IACF;AACA,SAAK,iBAAiB,KAAKE,aAAWF,YAAU,WAAW,EAAC,KAAK,SAAS,KAAI,CAAC,CAAC;EAClF;EAES,aAAa,QAAc;AAClC,QAAI,CAAC,KAAK,mBAAkB,GAAI;AAC9B,aAAOE,aAAWF,YAAU,cAAc;IAC5C;AACA,WAAOE,aAAWF,YAAU,cAAc;EAC5C;EAEQ,cAAc,OAAa;AAIjC,UAAM,cAAc,KAAK,mBAAkB;AAC3C,QAAI,aAAa,iBAAiB;AAChC,YAAMG,SAAQ,MAAM,MAAM,kBAAkB;AAC5C,UAAI,CAACA,SAAQ,CAAC,KAAKA,OAAM,CAAC,EAAE,WAAW,MAAM,QAAQ;AACnD,eAAO;MACT;AAEA,YAAMC,UAAS,SAASD,OAAM,CAAC,GAAG,EAAE,IAAI;AACxC,aAAO,EAAC,MAAM,GAAG,QAAAC,QAAM;IACzB;AAEA,UAAM,QAAQ,MAAM,MAAM,qBAAqB;AAC/C,QAAI,CAAC,QAAQ,CAAC,KAAK,MAAM,CAAC,EAAE,WAAW,MAAM,QAAQ;AACnD,aAAO;IACT;AACA,UAAM,OAAO,SAAS,MAAM,CAAC,GAAG,EAAE;AAClC,QAAI,SAAS;AACb,QAAI,MAAM,CAAC,GAAG;AACZ,eAAS,SAAS,MAAM,CAAC,EAAE,UAAU,CAAC,GAAG,EAAE;IAC7C;AACA,WAAO,EAAC,MAAM,KAAK,IAAI,OAAO,GAAG,CAAC,GAAG,QAAQ,KAAK,IAAI,SAAS,GAAG,CAAC,EAAC;EACtE;EAEQ,qBAAkB;AACxB,UAAM,cAAiB,aAAQ,QAAQ,SAAQ,EAAG,OAAO,WAAW;AACpE,QAAI,CAAC,aAAa;AAChB,aAAO;IACT;AACA,WAAO,YAAY,mBAAkB;EACvC;;;;ACzKF;;;;AAKA,YAAYC,cAAY;AACxB,YAAYC,YAAU;AACtB,YAAYC,gBAAe;AAC3B,YAAYC,mBAAiB;AAC7B,YAAYC,iBAAe;AAC3B,YAAYC,iBAAe;AAC3B,YAAYC,UAAQ;AAWpB,IAAMC,cAAY;;;;;EAKhB,SAAS;;;;EAIT,QAAQ;;AAEV,IAAMC,SAAY,YAAK,kBAAkB,kDAAkDD,WAAS;AACpG,IAAME,eAAkB,YAAK,mBAAmB,KAAK,QAAWD,MAAI;AAEpE,IAAI;AAEE,IAAO,+BAAP,MAAO,8BAA4B;EAC/B;EACA;EACA,gCAAyE;EACjF,OAAO,SAAS,OAEZ,EAAC,UAAU,KAAI,GAAC;AAClB,UAAM,EAAC,SAAQ,IAAI;AACnB,QAAI,CAAC,wCAAwC,UAAU;AACrD,6CAAuC,IAAI,8BAA4B;IACzE;AAEA,WAAO;EACT;EAEQ,eAAe,OAA+E;AACpG,UAAM,eAAe,MAAM;AAC3B,SAAK,aAAa,YAAY;EAChC;EAEQ,aAAa,OAA6D;AAChF,UAAM,EAAC,YAAW,IAAI,MAAM;AAC5B,QAAI,aAAa;AACf,WAAK,aAAa,IAAI;IACxB;EACF;EAEQ,aAAa,cAAsD;AACzE,QAAI,KAAK,+BAA+B;AACtC,MAAO,qBAAY,qBAAqB,CAAC,KAAK,6BAA6B,CAAC;IAC9E;AACA,SAAK,gCAAgC,eACjC,aAAa,iBACC,yBAAa,OAAO,cAAc,WAAS,KAAK,aAAa,MAAM,IAAI,GAAG,IAAI,IAC5F;AACJ,UAAM,gBAAgB,KAAK,cAAc,YAAY;AACrD,SAAK,OAAO,QAAQ,UAAU,OAAO,UAAU,CAAC,aAAa;AAC7D,QAAI,gBAAgB,eAAe;AACjC,WAAK,OAAO,SAASC,aAAWF,YAAU,SAAS,EAAC,KAAK,aAAa,KAAI,EAAE,CAAC,CAAC;IAChF;EACF;EAEA,kBAAkB,aAAwB;AACxC,QAAI,KAAK,QAAQ;AACf,aAAO,KAAK;IACd;AAEA,SAAK,cAAc;AACnB,SAAK,YAAY,iBAAgB,kBAAyB,KAAK,eAAe,KAAK,IAAI,CAAC;AACxF,SAAK,YAAY,iBAAgB,gBAAuB,KAAK,aAAa,KAAK,IAAI,CAAC;AAEpF,SAAK,SAAS,IAAO,aAAQ,cAAcE,aAAWF,YAAU,MAAM,GAAG,UAAU;AACnF,SAAK,OAAO,iBAAgB,SAAwC,KAAK,qBAAqB,IAAI;AAClG,SAAK,aAAa,YAAY,oBAAmB,CAAE;AAEnD,WAAO,KAAK;EACd;EAEQ,cAAc,cAAsD;AAC1E,QAAI,CAAC,cAAc;AACjB,aAAO;IACT;AACA,QAAI,aAAa,QAAO,EAAG,kBAAiB,GAAI;AAC9C,aAAO;IACT;AACA,QAAgB,0BAAY,gBAAgB,SAAQ,EAAG,QAAQ,YAAY,MAAM,MAAM;AACrF,aAAO;IACT;AACA,WAAO;EACT;EAEQ,sBAAmB;AACzB,UAAM,cAAc,KAAK,YAAY,mBAAkB;AACvD,QAAI,CAAC,aAAa;AAChB;IACF;AACA,UAAM,eAAe,YAAY,aAAY;AAC7C,QAAI,CAAC,KAAK,cAAc,YAAY,GAAG;AACrC;IACF;AAEA,QAAI,aAAa,QAAO,GAAI;AAC1B,WAAK,KAAK,cAAc,cAAc,aAAa,aAAa,YAAW,CAAE;IAC/E,OAAO;AACL,WAAK,aAAa,mBAAkB,EAC/B,KAAK,wBAAgC,wBAAY,YAAY,OAAO,oBAAoB,EAAE,CAAC,EAC3F,KAAK,aAAU;AACd,aAAK,KAAK,cAAc,cAAc,aAAa,OAAO;MAC5D,CAAC;IACP;EACF;EAEQ,MAAM,cACV,cAAmD,aACnD,SAAe;AACjB,UAAM,EAAC,kBAAkB,iBAAgB,IACrC,MAAgB,2BAAgB,OAAO,aAAa,YAAW,GAAI,YAAY,aAAa,OAAO;AACvG,QAAI,aAAa,YAAW,MAAO,kBAAkB;AACnD;IACF;AACA,UAAM,YAAY,YAAY,WAAW,aAAa,YAAY,WAAW,MAAM,UAAU,KAAK,IAAI;AACtG,UAAM,CAAC,YAAY,YAAY,IAC3B,iBAAiB,oBAAoB,UAAU,YAAY,UAAU,YAAY;AACrF,iBAAa,eAAe,gBAAgB;AAC5C,SAAK,YAAY,mBAAmB,cAAc,EAAC,YAAY,aAAY,CAAC;EAC9E;;AAGF,qBAAqB,6BAA6B,QAAQ;;;AClJ1D;;;;AAKA,YAAYG,cAAY;AACxB,YAAYC,WAAU;AAEtB,SAAQ,cAAAC,mBAAiB;AACzB,YAAYC,kBAAgB;AAKtB,IAAO,oBAAP,cAAiC,iCAAgC;EACrE,cAAA;AACE,UAAM,aAAa;EACrB;EAES,SAAM;AACb,SAAK,iBAAiB,YAAY,0BAAyB,CAAE;AAC7D,UAAM,OAAM;EACd;EAES,qBACL,cAAwD,YAAqB,cAAqB;AACpG,IAAK,kBAAY,YAAiB,kBAAY,OAAO,wBAAwB;AAE7E,QAAI,CAAC,cAAc;AACjB;IACF;AACA,QAAI,OAAO,eAAe,UAAU;AAClC,WAAY,kBAAS,OAAO,aAAa,WAAW,YAAY,YAAY,CAAC;IAC/E,OAAO;AACL,WAAY,kBAAS,OAAO,YAAY;IAC1C;EACF;EAES,cAAc,SAAoC;AACzD,WAAO,CAAC,QAAQ,iBAAgB;EAClC;EAES,WAAW,WAAmB,OAAe,cAAuB,iBAAwB;AACnG,UAAM,WAAW,WAAW,OAAO,cAAc,eAAe;AAEhE,UAAM,cAAc,IAAe,kBAAK,KAAI;AAC5C,UAAM,WAAWC,YAAW,wBAAwB,KAAK,kBAAkB,SAAS,CAAC;AACrF,gBAAY,OAAO;MACjB,GAAG;MACH,OAAO;MACP,QAAQ;;AAEV,iBAAa,eAAe,eAAe,aAAa,aAAa,aAAa,aAAa;EACjG;EAES,kBAAe;AACtB,WAAO;EACT;;;;ACzDF;;;;;AAIA,YAAYC,YAAU;AACtB,YAAYC,iBAAgB;AAC5B,YAAYC,kBAAgB;AAC5B,YAAYC,gBAAe;AAC3B,YAAYC,UAAQ;AAKpB,IAAMC,cAAY;;;;EAIhB,gBAAgB;;;;EAIhB,+BAA+B;;;;EAI/B,gBAAgB;;AAElB,IAAMC,SAAY,YAAK,kBAAkB,sCAAsCD,WAAS;AACxF,IAAME,eAAkB,YAAK,mBAAmB,KAAK,QAAWD,MAAI;AAS9D,SAAU,QAAQ,OAA6B;AACnD,WAAS,aAAa,QAAc;AAClC,aAAS,KAAK,IAAI,GAAG,KAAK,IAAI,QAAQ,MAAM,IAAI,MAAM,CAAC;AACvD,UAAM,OAAO,MAAM,IAAI,OAAO,MAAM;AACpC,WAAO,EAAC,YAAY,KAAK,SAAS,GAAG,cAAc,SAAS,KAAK,KAAI;EACvE;AAEA,WAAS,wBAAqB;AAC5B,WAAO,OAAO,SAAS,aAAa;AAClC,aAAO,YAAW;IACpB;AACA,QAAI,aAAa;AACjB,QAAI,OAAO,SAAS,eAAe,OAAO,WAAU,GAAI;AACtD,SAAG;AACD,gBAAQ,OAAO,MAAgB;UAC7B,KAAK;AACH,0BAAc;AACd;UACF,KAAK;AACH,0BAAc;AACd;UACF,KAAK;AACH,0BAAc,MAAM,SAAS,OAAO,MAAM,OAAO,EAAE;AACnD;UACF,KAAK;AACH,0BAAc;AACd;UACF,KAAK;AACH,0BAAc;AACd;QACJ;MACF,SAAS,OAAO,YAAW;IAC7B;AACA,WAAO,IAAI,UAAU;EACvB;AAEA,QAAM,OAAkB,uBAAW,KAAK;AACxC,QAAM,QAAuB,CAAA;AAC7B,QAAM,SAAS,KAAK,OAAM;AAC1B,KAAG;AACD,YAAQ,OAAO,MAAM;;MAEnB,KAAK,WAAW;AACd,aAAK,OAAO,WAAU,KAAK,OAAO,YAAW,GAAI;AAC/C,gBAAM,QAAQ,MAAM,SAAS,OAAO,MAAM,OAAO,EAAE;AACnD,gBAAM,EAAC,YAAY,aAAY,IAAI,aAAa,OAAO,IAAI;AAC3D,gBAAM,KAAK,EAAC,OAAO,YAAY,aAAY,CAAC;AAC5C,iBAAO,YAAW;AAClB,cAAI,OAAO,SAAmB,KAAK;AACjC;UACF;QACF;AACA;MACF;;MAEA,KAAK;MACL,KAAK,qBAAqB;AACxB,YAAI,SAAS;AACb,eAAO,WAAU;AACjB,WAAG;AACD,kBAAQ,OAAO,MAAgB;YAC7B,KAAK;YACL,KAAK;YACL,KAAK;YACL,KAAK;YACL,KAAK;AACH,uBAAS,GAAG,MAAM,GAAG,OAAO,IAAI;AAChC;YACF,KAAK;AACH,wBAAU;AACV;YACF,KAAK;YACL,KAAK;YACL,KAAK,sBAAsB;AACzB,oBAAM,QAAQ,SAAS,MAAM,SAAS,OAAO,MAAM,OAAO,EAAE;AAC5D,oBAAM,EAAC,YAAY,aAAY,IAAI,aAAa,OAAO,IAAI;AAC3D,oBAAM,WAAW,sBAAqB;AACtC,oBAAM,KAAK,EAAC,OAAO,UAAU,YAAY,aAAY,CAAC;AACtD;YACF;UACF;QACF,SAAS,OAAO,YAAW;AAC3B;MACF;MACA,KAAK,YAAY;AACf,YAAI,SAAS;AACb,eAAO,WAAU;AACjB,WAAG;AACD,cAAI,OAAO,SAAmB,WAAW,OAAO,SAAmB,SAAS,OAAO,SAAmB,OAAO;AAC3G,qBAAS,GAAG,MAAM,GAAG,OAAO,IAAI;UAClC,WAAW,OAAO,SAAmB,QAAQ;AAC3C,sBAAU;UACZ,WAAW,OAAO,SAAmB,sBAAsB;AACzD,gBAAI,QAAQ,MAAM,SAAS,OAAO,MAAM,OAAO,EAAE;AACjD,kBAAM,EAAC,YAAY,aAAY,IAAI,aAAa,OAAO,IAAI;AAC3D,mBAAO,OAAO,YAAW,GAAI;AAC3B,kBAAI,OAAO,SAAmB,mBAAmB;AAC/C,wBAAQ,SAAS,KAAK;AACtB,sBAAM,KAAK,EAAC,OAAO,YAAY,aAAY,CAAC;AAC5C;cACF;AACA,kBAAI,OAAO,SAAmB,mBAAmB,OAAO,SAAmB,sBAAsB;AAC/F,uBAAO,WAAU;cACnB;AACA,kBAAI,OAAO,SAAmB,SAAS;AACrC,yBAAS,SAAS,MAAM;cAC1B,WAAW,OAAO,SAAmB,QAAQ;AAC3C,0BAAU;cACZ,WAAW,OAAO,SAAmB,aAAa;AAChD,wBAAQ,SAAS;AACjB,sBAAM,WAAW,sBAAqB;AACtC,sBAAM,KAAK,EAAC,OAAO,UAAU,YAAY,aAAY,CAAC;AACtD;cACF;YACF;AACA;UACF,OAAO;AAEL;UACF;QACF,SAAS,OAAO,YAAW;AAC3B;MACF;MACA,KAAK;MACL,KAAK,sBAAsB;AACzB,YAAI,OAAO,aAAa,CAAC,kBAAkB,CAAC,GAAG;AAC7C,gBAAM,QAAQ,WAAW,MAAM,SAAS,OAAO,MAAM,OAAO,EAAE;AAC9D,gBAAM,EAAC,YAAY,aAAY,IAAI,aAAa,OAAO,IAAI;AAC3D,gBAAM,KAAK,EAAC,OAAO,YAAY,aAAY,CAAC;QAC9C,WACI,OAAO,aAAa;UAClB;UACA;SACD,KACD,OAAO,aAAa;UAClB;SACD,GAAG;AACN,cAAI,QAAQ,MAAM,SAAS,OAAO,MAAM,OAAO,EAAE;AACjD,gBAAM,EAAC,YAAY,aAAY,IAAI,aAAa,OAAO,IAAI;AAC3D,iBAAO,OAAO,SAAmB,UAAU;AACzC,gBAAI,CAAC,OAAO,KAAI,GAAI;AAClB,qBAAO;YACT;UACF;AACA,cAAI,CAAC,OAAO,YAAW,GAAI;AACzB;UACF;AACA,cAAI,OAAO,SAAmB,mBAAmB,OAAO,SAAmB,sBAAsB;AAC/F,mBAAO,WAAU;AACjB,gBAAI,SAAS;AACb,mBAAO,OAAO,SAAmB,aAAa;AAC5C,kBAAI,OAAO,SAAmB,SAAS;AACrC,yBAAS,SAAS,MAAM;cAC1B,WAAW,OAAO,SAAmB,QAAQ;AAC3C,0BAAU;cACZ;AACA,kBAAI,CAAC,OAAO,YAAW,GAAI;AACzB;cACF;YACF;AACA,oBAAQ,SAAS;AACjB,kBAAM,WAAW,sBAAqB;AACtC,kBAAM,KAAK,EAAC,OAAO,UAAU,YAAY,aAAY,CAAC;UACxD,WAAW,OAAO,SAAmB,mBAAmB;AACtD,oBAAQ,SAAS,KAAK;AACtB,kBAAM,KAAK,EAAC,OAAO,YAAY,aAAY,CAAC;UAC9C;QACF;AACA;MACF;;MAEA,KAAK,OAAO;AACV,YAAI,OAAO,WAAU,KAAM,OAAO,YAAW,KAAM,MAAM,SAAS,OAAO,MAAM,OAAO,EAAE,MAAM,UAAU;AACtG,cAAI,OAAO,YAAW,KAAM,OAAO,SAAmB,cAAc;AAClE,kBAAM,QAAQ,MAAM,SAAS,OAAO,MAAM,OAAO,EAAE;AACnD,kBAAM,EAAC,YAAY,aAAY,IAAI,aAAa,OAAO,IAAI;AAC3D,kBAAM,KAAK,EAAC,OAAO,YAAY,aAAY,CAAC;UAC9C;AACA,aAAG;AACD,gBAAI,OAAO,SAAmB,SAAS,OAAO,WAAU,GAAI;AAC1D,kBAAI,OAAO,YAAW,KAAM,MAAM,SAAS,OAAO,MAAM,OAAO,EAAE,MAAM,UAAU,OAAO,YAAW,KAC/F,OAAO,SAAmB,cAAc;AAC1C,sBAAM,QAAQ,MAAM,SAAS,OAAO,MAAM,OAAO,EAAE;AACnD,sBAAM,EAAC,YAAY,aAAY,IAAI,aAAa,OAAO,IAAI;AAC3D,sBAAM,SAAS,CAAA;AACf,uBAAO,OAAO,YAAW,GAAI;AAC3B,sBAAI,OAAO,SAAmB,SAAS,OAAO,WAAU,GAAI;AAC1D,wBAAI,OAAO,YAAW,KAAM,MAAM,SAAS,OAAO,MAAM,OAAO,EAAE,MAAM,SAAS;AAC9E,0BAAI,OAAO,YAAW,KAAM,OAAO,SAAmB,cAAc;AAClE,+BAAO,KAAK,MAAM,SAAS,OAAO,MAAM,OAAO,EAAE,CAAC;sBACpD,OAAO;AACL,+BAAO,KAAK,IAAI,OAAO,MAAM,EAAE;sBACjC;oBACF;AACA,2BAAO,OAAM;kBACf;gBACF;AACA,sBAAM,WAAW,IAAI,OAAO,KAAK,IAAI,CAAC;AACtC,sBAAM,KAAK,EAAC,OAAO,UAAU,YAAY,aAAY,CAAC;cACxD;AACA,qBAAO,OAAM;YACf;UACF,SAAS,OAAO,YAAW;QAC7B;AACA;MACF;;MAEA,KAAK;MACL,KAAK,cAAc;AACjB,YAAI,OAAO,aAAa,CAAC,oBAAoB,CAAC,GAAG;AAC/C,gBAAM,QAAQ,MAAM,SAAS,OAAO,MAAM,OAAO,EAAE;AACnD,gBAAM,EAAC,YAAY,aAAY,IAAI,aAAa,OAAO,IAAI;AAC3D,gBAAM,KAAK,EAAC,OAAO,YAAY,aAAY,CAAC;QAC9C;AACA;MACF;MACA,KAAK,kBAAkB;AACrB,YAAI,OAAO,aAAa,CAAC,gBAAgB,CAAC,GAAG;AAC3C,gBAAM,QAAQ,SAAS,MAAM,SAAS,OAAO,MAAM,OAAO,EAAE,CAAC;AAC7D,gBAAM,EAAC,YAAY,aAAY,IAAI,aAAa,OAAO,IAAI;AAC3D,gBAAM,KAAK,EAAC,OAAO,YAAY,aAAY,CAAC;QAC9C,WAAW,OAAO,aAAa,CAAC,iBAAiB,CAAC,GAAG;AACnD,gBAAM,QAAQ,UAAU,MAAM,SAAS,OAAO,MAAM,OAAO,EAAE,CAAC;AAC9D,gBAAM,EAAC,YAAY,aAAY,IAAI,aAAa,OAAO,IAAI;AAC3D,gBAAM,KAAK,EAAC,OAAO,YAAY,aAAY,CAAC;QAC9C;AACA;MACF;MACA;AACE;IACJ;EACF,SAAS,OAAO,KAAI;AACpB,SAAO;AACT;AAEM,IAAO,mBAAP,cAA0C,8BAAmB,SAAQ;EACjE,QAAuB,CAAA;EACvB,SAAS;EAEjB,cAAA;AACE,UAAM,eAAe;EACvB;EAES,SAAM;AACb,UAAM,cAAc,KAAK,mBAAkB;AAC3C,QAAI,aAAa;AACf,WAAK,SAAS;AACd,WAAK,QAAQ,QAAQ,YAAY,WAAW,KAAK,EAAE,IAAI,CAAC,EAAC,OAAO,UAAU,YAAY,aAAY,MAAK;AACrG,SAAC,EAAC,YAAY,aAAY,IAAI,YAAY,2BAA2B,YAAY,YAAY;AAC7F,eAAO,EAAC,OAAO,UAAU,YAAY,aAAY;MACnD,CAAC;IACH,OAAO;AACL,WAAK,SAAS;AACd,WAAK,QAAQ,CAAA;IACf;EACF;EAES,SAAM;AACb,SAAK,SAAS;AACd,SAAK,QAAQ,CAAA;EACf;EAES,YAAS;AAChB,WAAO,KAAK,MAAM;EACpB;EAES,UAAU,WAAiB;AAClC,UAAM,OAAO,KAAK,MAAM,SAAS;AACjC,WAAO,KAAK,SAAS,KAAK,WAAW,KAAK,WAAW;EACvD;EAES,YAAY,WAAmB,OAAa;AACnD,UAAM,OAAO,KAAK,MAAM,SAAS;AACjC,UAAM,aAAa,MAAM,MAAM,GAAG,EAAE,CAAC;AACrC,QAAI,WAAW,YAAW,MAAO,KAAK,MAAM,YAAW,GAAI;AACzD,aAAO,KAAK,IAAI,KAAK;IACvB;AACA,WAAO,CAAC,KAAK,aAAa;EAC5B;EAES,WAAW,WAAmB,OAAe,cAAuB,kBAAyB;AACpG,UAAM,OAAO,KAAK,MAAM,SAAS;AACjC,UAAM,OAAkB,kBAAK,OAAO,UAAU;AAC9C,iBAAa,eAAe,eAAe,aAAa,MAAM,aAAa,aAAa;AACxF,iBAAa,cAAc,KAAK,SAAS,KAAK,WAAW,KAAK,WAAW;AACzE,IAAU,8BAAmB,mBAAmB,gBAAgB,cAAc,KAAK;AAEnF,UAAM,cAAc,KAAK,mBAAkB;AAC3C,QAAI,CAAC,aAAa;AAChB;IACF;AAEA,UAAM,aAAa,aAAa,eAAe,eAAe,YAAY,QAAQ,KAAK;AACvF,QAAI,CAAC,YAAY;AACf;IACF;AAEA,UAAM,cAAc,YAAY;AAChC,QAAI,aAAa;AACf,YAAM,qBAAqB,YAAY,2BAA2B,YAAY,cAAc,CAAC;AAC7F,YAAM,uBAAuB,mBAAmB,SAAS,EAAE,EAAE;AAC7D,iBAAW,cAAc,MAAM,KAAK,aAAa,SAAS,EAAE,EAAE,SAAS,sBAAsB,GAAG,CAAC;IACnG,OAAO;AACL,iBAAW,cAAc,IAAI,KAAK,aAAa,CAAC;IAClD;EACF;EAES,WAAW,WAAwB,cAAoB;AAC9D,QAAI,cAAc,MAAM;AACtB;IACF;AACA,UAAM,cAAc,KAAK,mBAAkB;AAC3C,QAAI,CAAC,aAAa;AAChB;IACF;AACA,UAAM,OAAO,KAAK,MAAM,SAAS;AACjC,gBAAY,eAAe,EAAC,YAAY,KAAK,YAAY,cAAc,KAAK,aAAY,GAAG,IAAI;EACjG;EAEQ,qBAAkB;AACxB,UAAM,cAAiB,aAAQ,QAAQ,SAAQ,EAAG,OAAO,WAAW;AACpE,WAAO,aAAa,mBAAkB,KAAM;EAC9C;EAES,eAAY;AACnB,QAAI,CAAC,KAAK,mBAAkB,GAAI;AAC9B,aAAOC,aAAWF,YAAU,cAAc;IAC5C;AACA,QAAI,CAAC,KAAK,QAAQ;AAChB,aAAOE,aAAWF,YAAU,6BAA6B;IAC3D;AACA,WAAOE,aAAWF,YAAU,cAAc;EAC5C;;;;ACjXF;;;;AAgCA,YAAYG,YAAU;AACtB,YAAYC,WAAS;AAErB,YAAYC,sBAAqB;AACjC,YAAYC,eAAc;AAC1B,YAAYC,iBAAgB;AAC5B,YAAYC,UAAQ;AACpB,YAAYC,qBAAmB;;;AClC/B,IAAO,oCAAQ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBAkCC,YAAY,QAAQ,6BAA6B,CAAC;;;ADIlE,IAAMC,cAAY;;;;EAIhB,SAAS;;;;EAIT,WAAW;;;;EAIX,aAAa;;;;;EAKb,UAAU;;;;EAIV,SAAS;;AAEX,IAAMC,SAAY,YAAK,kBAAkB,2CAA2CD,WAAS;AAC7F,IAAME,eAAkB,YAAK,mBAAmB,KAAK,QAAWD,MAAI;AACpE,IAAI;AAEE,IAAO,wBAAP,MAAO,+BAAiC,YAAO,KAAI;EACtC;EACA;EACA;EACT;EACR,mBAAyE;EAEzE,cAAA;AACE,UAAM;MACJ,OAAO,GAAiB,wBAAQ,qBAAqB,CAAC;MACtD,cAAc;KACf;AACD,SAAK,oBAAoB,iCAA2B;AAEpD,SAAK,cAAc,IAAa,kCAAwB,oCAAmC;AAC3F,SAAK,YAAY,oBAAoB,iCAA2B;AAChE,SAAK,YAAY,aAAY;AAE7B,SAAK,YAAY;;MAA2C;IAAI;AAChE,SAAK,mBACD,IAAa,kCAAwB,6CAA6C,KAAK,WAAW;AACtG,SAAK,YAAY,IAAe,sBAAU,UAAS;AACnD,SAAK,cAAc,SAAS,cAAc,KAAK;AAC/C,SAAK,YAAY,YAAY;AAC7B,SAAK,YAAY,WAAW;AAC5B,SAAK,cAAiB,aAAQ,QAAQ,SAAQ,EAAG,OAAW,oBAAc,SAAS,CAAC;EACtF;EAEA,OAAO,WAAQ;AACb,QAAI,CAAC,+BAA+B;AAClC,sCAAgC,IAAI,uBAAqB;IAC3D;AACA,WAAO;EACT;EAEA,cAAc,WAA2C;AACvD,SAAK,kBAAkB,QAAO;AAC9B,SAAK,mBAAmB;AAExB,SAAK,UAAU,MAAK;AACpB,SAAK,eAAe,eAAc;AAClC,SAAK,eAAe,YAAY,KAAK,WAAW;AAEhD,QAAI,WAAW;AAGb,WAAK,YAAY,cAAcC,aAAWF,YAAU,OAAO;AAE3D,WAAK,mBAAmB,IAAoB,iCAAgB,gBAAgB,SAAS;AACrF,WAAK,iBAAiB,iBAAgB,qBAC0B,WAAS,KAAK,sBAAsB,MAAM,IAAI,GAC1G,IAAI;IACV,OAAO;AACL,WAAK,YAAY,cAAcE,aAAWF,YAAU,SAAS;IAC/D;EACF;EAES,QAAK;AACZ,QAAI,KAAK,SAAQ,GAAI;AACnB;IACF;AAEA,QAAO,aAAQ,QAAQ,SAAQ,EAAG,OAAW,oBAAc,qBAAqB,GAAG;AACjF,WAAK,YAAY,YAAW;IAC9B;EACF;EAEQ,sBAAsB,iBAA2D;AACvF,UAAM,EAAC,WAAU,IAAI;AAErB,SAAK,YAAY,eAAc;AAE/B,SAAK,eAAe,eAAc;AAClC,SAAK,eAAe,YAAY,KAAK,YAAY,OAAO;AACxD,QAAI,kBAAkB;AACtB,eAAW,CAAC,GAAG,KAAK,KAAK,WAAW,QAAO,GAAI;AAC7C,UAAI,MAAM,KAAI,MAAE,SAAwC;AACtD,0BAAkB;MACpB;AAEA,YAAMG,WAAU,KAAK,8BAA8B,KAAK;AACxD,UAAI,MAAM,KAAI,MAAE,UAAyC;AACvD,QAAAA,SAAQ,SAAQ;MAClB,WAAW,CAAC,mBAAmB,MAAM,KAAI,MAAE,SAAwC;AACjF,QAAAA,SAAQ,OAAM;MAChB;AAEA,WAAK,YAAY,YAAYA,QAAO;AACpC,UAAI,MAAM,GAAG;AACX,QAAAA,SAAQ;;UAAuB;QAAI;MACrC;IACF;AACA,SAAK,0BAAyB;EAChC;EAEQ,8BAA8B,OAAwC;AAE5E,QAAI,mBAAyD;AAC7D,QAAI,MAAM,KAAI,MAAE,WAA0C,MAAM,KAAI,MAAE,WAA0C;AAC9G,yBAAmBD,aAAWF,YAAU,WAAW;IACrD;AAEA,QAAI,QAAQ,MAAM,SAAQ;AAC1B,QAAI,MAAM,KAAI,MAAE,WAA0C;AACxD,YAAM,YAAY,MAAM,KAAI;AAC5B,UAAI,WAAW;AACb,gBAAQE,aAAWF,YAAU,UAAU,EAAC,KAAQ,aAAQ,qBAAqB,SAAS,EAAC,CAAC;MAC1F,OAAO;AACL,gBAAQE,aAAWF,YAAU,OAAO;MACtC;IACF;AACA,QAAI,WAAwB,MAAM,YAAW;AAC7C,QAAI,CAAC,SAAS,UAAU,UAAU;AAChC,iBAAW;IACb;AACA,UAAM,OAAO,MAAM,KAAI;AAEvB,UAAM,eAAe,SAAS,cAAc,KAAK;AACjD,iBAAa,UAAU,IAAI,yCAAyC;AACpE,iBAAa,UAAU,IAAI,oBAAoB;AAC/C,QAAI,MAAM;AACR,YAAM,cAAc,SAAS,cAAc,KAAK;AAChD,kBAAY,UAAU,IAAI,uCAAuC;AACjE,kBAAY,MAAM;AAClB,mBAAa,YAAY,WAAW;IACtC;AACA,iBAAa,YAAY,OAAO,2CAA2C,EAAE,cAAc;AAC3F,iBAAa,YAAY,OAAO,wCAAwC,EAAE,cAAc;AAExF,UAAMG,WAAU,IAAa,kCAAwB,YACjD,MAAM,OAAM,GAAI,KAAK,WAAW,kBAAgB,GAChD,MAAM,gBAAe,CAAE;AAC3B,IAAAA,SAAQ,QAAQ;AAChB,IAAAA,SAAQ,gBAAgB,UAAU,IAAI,kCAAkC;AACxE,IAAAA,SAAQ,gBAAgB,aAAa,cAAc,KAAK;AACxD,SAAK,iBAAiB,aAAa,SAAS,WAAW,MAAM,WAAW,KAAKA,QAAO;AAEpF,WAAOA;EACT;EAEQ,4BAAyB;EACjC;;;;AEnNF;;wBAAAC;EAAA;;;;;;AAgCA,OAAO;AAEP,YAAYC,cAAY;AACxB,YAAYC,YAAU;AACtB,YAAYC,YAAU;AACtB,YAAYC,gBAAc;AAC1B,YAAYC,WAAS;AACrB,YAAYC,gBAAc;AAC1B,YAAYC,mBAAiB;AAC7B,YAAYC,iBAAe;AAC3B,YAAYC,iBAAe;AAC3B,YAAYC,UAAQ;AACpB,YAAYC,eAAc;;;ACvC1B,IAAO,+BAAQ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBAwBC,YAAY,QAAQ,wBAAwB,CAAC;;;ADoB7D,IAAMC,cAAY;;;;EAIhB,aAAa;;;;EAIb,kBAAkB;;;;EAIlB,kBAAkB;;;;EAIlB,uBAAuB;;;;EAIvB,oBAAoB;;;;EAIpB,0BAA0B;;;;EAI1B,kBAAkB;;;;EAIlB,uBAAuB;;;;EAIvB,YAAY;;;;EAIZ,iBAAiB;;;;EAIjB,YAAY;;;;EAIZ,kBAAkB;;;;EAIlB,KAAK;;;;EAIL,QAAQ;;;;EAIR,QAAQ;;;;EAIR,QAAQ;;;;;;EAMR,cAAc;;;;;;;;;;EAUd,yBAAyB;;AAE3B,IAAMC,SAAY,YAAK,kBAAkB,sCAAsCD,WAAS;AACxF,IAAME,eAAkB,YAAK,mBAAmB,KAAK,QAAWD,MAAI;AACpE,IAAI;AAEE,IAAO,uBAAP,MAAO,8BAA6B,cAAa;EACrD,cAAA;AACE,UAAM,qBAAqB,IAAI;AAC/B,SAAK,oBAAoB,4BAAsB;AAC/C,IAAI,oBAAc,cAAc,SAAQ,EAAG,iBAAgB,uBACP,KAAK,qBAAqB,IAAI;AAGlF,IAAK,mBAAY,YAAY,WAAW,yBAAyB;AACjE,IAAI,oBAAc,cAAc,SAAQ,EAAG,uBAAuB,KAAK,cAAc,KAAK,IAAI,CAAC;EACjG;EAEA,OAAO,SAAS,OAEZ,EAAC,UAAU,KAAI,GAAC;AAClB,UAAM,EAAC,SAAQ,IAAI;AACnB,QAAI,CAAC,gCAAgC,UAAU;AAC7C,qCAA+B,IAAI,sBAAoB;IACzD;AAEA,WAAO;EACT;EAES,cAAc,SAAoC;AACzD,WAAO,QAAQ,KAAI,MAAiB,sBAAU,aAAa,WACnD,oBAAc,cAAc,SAAQ,EAAG,UAC9B,0BAAe,eAAe,oBAAoB,OAAO,CAAC;EAC7E;EAEA,gBAAa;AACX,eAAW,WAAqB,sBAAU,cAAc,SAAQ,EAAG,SAAQ,GAAI;AAC7E,UAAI,CAAC,KAAK,cAAc,OAAO,GAAG;AAChC,aAAK,cAAc,OAAO;MAC5B,OAAO;AACL,aAAK,cAAc,OAAO;MAC5B;IACF;EACF;EAEQ,oBAAoB,OAA6D;AACvF,UAAM,aAAiB,oBAAc,cAAc,SAAQ,EAAG,YAAW;AACzE,QAAI,MAAM,SAAS,YAAY;AAC7B;IACF;AACA,UAAM,eAAe,cAAc,WAAW,aAAY;AAC1D,QAAI,CAAC,cAAc;AACjB;IACF;AACA,eAAW,gBAAgB,KAAK,UAAS,EAAG,cAAa,GAAI;AAC3D,UAAI,KAAK,cAAc,aAAa,QAAO,CAAE,KAAK,aAAa,IAAG,MAAO,cAAc;AACrF,aAAK,mBAAmB,cAAc,IAAI;MAC5C;IACF;EACF;EAES,kBAAkB,cAAiD;AAC1E,UAAM,aAAiB,oBAAc,cAAc,SAAQ,EAAG,YAAW;AACzE,UAAM,eAAe,cAAc,WAAW,aAAY;AAC1D,QAAI,CAAC,cAAc;AACjB;IACF;AACA,QAAI,aAAa,IAAG,MAAO,cAAc;AACvC,WAAK,mBAAmB,cAAc,IAAI;IAC5C;EACF;;AAGI,IAAO,qBAAP,cAAkC,cAAa;EACnD,8BAA0C,yCAA2B,2BAA2B,SAAQ;EACxG,kBAAwD,CAAA;EACxD;EAEA,cAAA;AACE,UAAM,iBAAiB;AACvB,SAAK,oBAAoB,4BAAsB;AAC/C,UAAME,eACF,IAAO,iBAAY,YAAYD,aAAWF,YAAU,WAAW,GAAGE,aAAWF,YAAU,gBAAgB,CAAC;AAC5G,SAAK,eAAeG,YAAW;AAC/B,IAAAA,aAAY,OAAO;AAEnB,UAAMC,QACC,WAAM,MAAM,OAAO,wDAAwD,0BAA0B;AAC5G,SAAK,4BACI,YAAK,yBAAyBH,QAAMD,YAAU,yBAAyB,EAAC,KAAKI,MAAI,CAAC;AAC3F,SAAK,0BAA0B,UAAU,IAAI,6BAA6B;AAC1E,SAAK,eAAe,aAAa,KAAK,2BAA2B,KAAK,eAAe,UAAU;AAE/F,UAAMC,WAAU,SAAS,cAAc,kBAAkB;AACzD,IAAAA,SAAQ,UAAU,IAAI,mBAAmB;AACzC,SAAKA,SAAQ,sBAAsB,yBAAyB,EAAE,KAAK,MAAK;AACtE,UAAI,CAACA,SAAQ,MAAK,GAAI;AACpB,aAAK,eAAe,aAAaA,UAAS,KAAK,eAAe,UAAU;MAC1E;IACF,CAAC;EACH;EAES,WAAQ;AACf,UAAM,SAAQ;AACd,SAAK,kBAAkB;MACrB,KAAK,4BAA4B,iBAAgB,8BACgC,KAAK,6BAClF,IAAI;MACR,KAAK,4BAA4B,iBAAgB,uBACuB,KAAK,sBAAsB,IAAI;;AAEzG,SAAK,4BAA4B,EAAC,MAAM,KAAK,4BAA4B,oBAAmB,CAAC;EAC/F;EAES,WAAQ;AACf,IAAO,qBAAY,qBAAqB,KAAK,eAAe;AAC5D,SAAK,4BAA4B,EAAC,MAAM,KAAI,CAAC;AAC7C,UAAM,SAAQ;EAChB;EAES,eAAe,cAAmD,aAAoB;AAC7F,IAAK,mBAAY,YAAiB,mBAAY,OAAO,uBAAuB;AAC5E,UAAM,eAAe,cAAc,WAAW;EAChD;EAES,cAAc,SAAoC;AACzD,QAAI,QAAQ,KAAI,MAAiB,sBAAU,aAAa,uBAAuB;AAC7E,aAAO;IACT;AACA,WAAO,QAAQ,KAAI,MAAiB,sBAAU,aAAa,cAC3C,yCAA2B,2BAA2B,eAAe,OAAO,MAAM,eAC9F,CAAU,kCAAwB,kBAAkB,OAAO;EACjE;EAES,kBAAkB,OAAY;AACrC,UAAM,cAAc,IAAO,iBAAY,YAAY,KAAK;AACxD,gBAAY,eAAc,EAAG,aAAa,mCAAmC,QAAW,IAAI;AAC5F,SAAK,YAAY,KAAI;EACvB;EAEA,4BACI,QAA4G;AAE9G,SAAK,qBAAqB,EAAC,MAAM,KAAK,4BAA4B,aAAY,CAAC;EACjF;EAEA,qBACI,OAC+G;AAEjH,UAAM,eAAe,MAAM;AAC3B,UAAM,EAAC,oBAAmB,IAAI,KAAK;AACnC,SAAK,0BAA0B,SAAS,wBAAwB,QAAQ,iBAAiB;EAC3F;;AAGF,IAAI;AAEE,IAAO,yBAAP,MAAO,gCAA+B,cAAa;EACtC;EACjB,cAAA;AACE,UAAM,qBAAqB;AAC3B,UAAMF,eAAc,IAAO,iBAAY,YACnCD,aAAWF,YAAU,gBAAgB,GAAGE,aAAWF,YAAU,qBAAqB,CAAC;AACvF,SAAK,eAAeG,YAAW;AAC/B,IAAAA,aAAY,OAAO;AAEnB,SAAK,UAAU,SAAS,cAAc,kBAAkB;AACxD,SAAK,QAAQ,UAAU,IAAI,mBAAmB;AAE9C,SAAK,eAAe,aAAa,KAAK,SAAS,KAAK,eAAe,UAAU;AAE7E,IAAY,wCAA0B,0BAA0B,SAAQ,EAAG,iBAAgB,kBACzB,KAAK,oBAAoB,IAAI;AAC/F,SAAK,UAAS,EAAG,iBAA2B,sBAAU,OAAO,cAAc,KAAK,uBAAuB,IAAI;AAC3G,SAAK,UAAS,EAAG,iBAA2B,sBAAU,OAAO,gBAAgB,KAAK,uBAAuB,IAAI;AAC7G,SAAK,mBAAkB;EACzB;EAEA,OAAO,SAAS,OAEZ,EAAC,UAAU,KAAI,GAAC;AAClB,UAAM,EAAC,SAAQ,IAAI;AACnB,QAAI,CAAC,kCAAkC,UAAU;AAC/C,uCAAiC,IAAI,wBAAsB;IAC7D;AAEA,WAAO;EACT;EAEQ,sBAAsB,OAAuE;AACnG,UAAM,UAAU,MAAM;AACtB,QAAI,WAAW,QAAQ,KAAI,MAAiB,sBAAU,aAAa,cACnD,yCAA2B,2BAA2B,eAAe,OAAO,MAAM,aAAa;AAC7G;IACF;AACA,SAAK,SAAQ;EACf;EAEQ,qBAAkB;AACxB,SAAK,MAAK;AACV,UAAM,UAAsB,wCAA0B,0BAA0B,SAAQ,EAAG,QAAO;AAClG,QAAI,SAAS;AACX,WAAK,cAAc,OAAO;IAC5B;AACA,SAAK,SAAQ;EACf;EAEQ,WAAQ;AACd,SAAK,QAAQ,mBAAkB;AAC/B,UAAM,UAAsB,wCAA0B,0BAA0B,SAAQ,EAAG,QAAO;AAClG,QAAI,SAAS;AACX,YAAM,iBAAiB,IAAO,aAAQ,uBAC3B,kBAAS,SAAS,SAAQ,EAAG,cAAc,uCAAuC,CAAC;AAC9F,WAAK,QAAQ,kBAAkB,cAAc;AAE7C,WAAK,QAAQ,kBAAkB,IAAO,aAAQ,iBAAiB,IAAI,CAAC;AACpE,YAAM,cAAc,IAAO,aAAQ,cAAcD,aAAWF,YAAU,kBAAkB,GAAG,OAAO;AAClG,kBAAY,iBAAgB,SAAwC,MAAK;AACvE,QAAO,kBAAS,SAAS,SAAQ,EAAG,cAAc,uCAAuC,EAAE,IAAI,KAAK;AACpG,gBAAQ,OAAM;MAChB,CAAC;AACD,WAAK,QAAQ,kBAAkB,WAAW;AAC1C;IACF;AACA,UAAM,QAAQE,aAAWF,YAAU,wBAAwB;AAC3D,UAAM,cAAc,IAAO,aAAQ,cAAc,OAAO,QAAQ,KAAK;AACrE,gBAAY,iBAAgB,SAAwC,YAAS;AAC3E,WAAK,KAAK,kBAAiB;IAC7B,GAAG,IAAI;AACP,SAAK,QAAQ,kBAAkB,WAAW;EAC5C;EAEA,MAAM,oBAAiB;AACrB,UAAM,aACF,MAAkB,wCAA0B,0BAA0B,SAAQ,EAAG,cAAc,WAAW;AAC9G,QAAI,CAAC,YAAY;AACf;IACF;AACA,IAAO,kBAAS,SAAS,SAAQ,EAAG,cAAc,uCAAuC,EAAE,IAAI,IAAI;EACrG;EAES,eAAe,cAAmD,aAAoB;AAC7F,IAAK,mBAAY,YAAiB,mBAAY,OAAO,uBAAuB;AAC5E,UAAM,eAAe,cAAc,WAAW;EAChD;EAES,cAAc,SAAoC;AACzD,WAAO,YAAwB,wCAA0B,0BAA0B,SAAQ,EAAG,QAAO;EACvG;;AAGI,IAAO,8BAAP,cAA2C,cAAa;EAC5D,cAAA;AACE,UAAM,2BAA2B;AACjC,UAAMG,eAAc,IAAO,iBAAY,YACnCD,aAAWF,YAAU,gBAAgB,GAAGE,aAAWF,YAAU,qBAAqB,CAAC;AACvF,SAAK,eAAeG,YAAW;AAC/B,IAAAA,aAAY,OAAO;EACrB;EAES,cAAc,SAAoC;AACzD,WAAO,QAAQ,KAAI,MAAiB,sBAAU,aAAa;EAC7D;;AAGI,IAAO,wBAAP,cAAqC,cAAa;EACtD,cAAA;AACE,UAAM,oBAAoB;AAC1B,UAAMA,eACF,IAAO,iBAAY,YAAYD,aAAWF,YAAU,UAAU,GAAGE,aAAWF,YAAU,eAAe,CAAC;AAC1G,SAAK,eAAeG,YAAW;AAC/B,IAAAA,aAAY,OACR;AAEJ,UAAME,WAAU,SAAS,cAAc,kBAAkB;AACzD,IAAAA,SAAQ,UAAU,IAAI,mBAAmB;AACzC,UAAM,YAAY,IAAO,aAAQ,cAC7BH,aAAWF,YAAU,UAAU,GAAG,QAAQE,aAAWF,YAAU,UAAU,GAAG,qBAAqB;AACrG,cAAU,iBAAgB,SAAwC,YAAS;AACzE,WAAK,KAAK,OACG,kCAAwB,oBAAmB,GAAI,EAA6C;IAC3G,CAAC;AACD,IAAAK,SAAQ,kBAAkB,SAAS;AACnC,SAAK,eAAe,aAAaA,UAAS,KAAK,eAAe,UAAU;EAC1E;EAES,cAAc,SAAoC;AACzD,WAAgB,kCAAwB,kBAAkB,OAAO;EACnE;EAES,kBAAkB,OAAY;AACrC,UAAM,cAAc,IAAO,iBAAY,YAAY,KAAK;AACxD,gBAAY,cAAa,EAAG,WACxBH,aAAWF,YAAU,gBAAgB,GACrC,MAAM,KAAK,OACE,kCAAwB,oBAAmB,GAAI,EAA6C,GACzG,EAAC,cAAc,qBAAoB,CAAC;AACxC,SAAK,YAAY,KAAI;EACvB;EAES,sBAAsB,OAAc,MAAmC;AAC9E,UAAM,eAAe,KAAK,aAAY;AACtC,UAAM,cAAc,IAAO,iBAAY,YAAY,KAAK;AACxD,gBAAY,cAAa,EAAG,WACxBE,aAAWF,YAAU,GAAG,GAAG,MAAe,kCAAwB,sBAAsB,YAAY,GACpG,EAAC,cAAc,MAAK,CAAC;AACzB,gBAAY,YAAW,EAAG,WACtBE,aAAWF,YAAU,MAAM,GAAG,MAAM,KAAK,OAAO,MAAM,KAAK,GAAG,EAAC,cAAc,SAAQ,CAAC;AAC1F,gBAAY,YAAW,EAAG,WACtBE,aAAWF,YAAU,MAAM,GAAG,MAAM,aAAa,QAAO,EAAG,WAAW,YAAY,GAAG,EAAC,cAAc,SAAQ,CAAC;AACjH,gBAAY,YAAW,EAAG,WACtBE,aAAWF,YAAU,MAAM,GAAG,KAAK,aAAa,KAAK,MAAM,YAAY,GAAG,EAAC,cAAc,UAAS,CAAC;AACvG,SAAK,YAAY,KAAI;EACvB;EAEQ,MAAM,aAAa,cAAiD;AAC1E,iBAAa,kBAAiB;AAC9B,UAAM,cAAc,MAAM,aAAa,mBAAkB;AACzD,QAAc,wBAAY,YAAY,QAAQ,WAAW,GAAG;AAC1D,cAAQ,MAAM,kCAAkC,aAAa,IAAG,CAAE,KAAK,WAAW,EAAE;AACpF,MAAO,iBAAQ,QAAQ,SAAQ,EAAG;QAAME,aAAWF,YAAU,YAAY;;QAAc;MAAK;AAC5F;IACF;AACA,UAAgB,wBAAY,YAAY,SAAQ,EAAG;MAC/C,KAAK,eAAe,aAAa,IAAG,CAAE;MAAG;;MAA+B;IAAI;AAChF,IAAU,wBAAY,YAAY,SAAQ,EAAG,MAAM,aAAa,IAAG,CAAE;EACvE;EAEQ,eAAe,KAAoC;AACzD,WAAc,mBAAU,UAAU,YAAY,KAAK,KAAK;EAC1D;;AAGI,IAAOM,kBAAP,MAAqB;EACzB,aAAa,UAA8B,UAAgB;AACzD,YAAQ,UAAU;MAChB,KAAK;AACH,aAAc,kCAAwB,oBAAmB,EACpD,WAAoB,wBAAa,wBAAwB,MAAM,EAAE,EACjE,KAAK,kBAAuB,kBAAS,OAAO,YAAY,CAAC;AAC9D,eAAO;MACT,KAAK;AACH,aAAiB,wCAA0B,0BAA0B,SAAQ,EAAG,cAAa;AAC7F,eAAO;IACX;AACA,WAAO;EACT;;;;AE5dF;;;;;AAmCA,YAAYC,cAAY;AACxB,YAAYC,YAAU;AACtB,YAAYC,YAAU;AACtB,YAAYC,gBAAc;AAC1B,YAAYC,WAAS;AAErB,YAAYC,gBAAe;AAC3B,YAAYC,sBAAqB;AACjC,YAAYC,cAAa;AACzB,YAAYC,eAAc;;;ACvC1B,IAAO,0BAAQ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBAyGC,YAAY,QAAQ,mBAAmB,CAAC;;;AD/DxD,YAAYC,iBAAgB;AAC5B,YAAYC,UAAQ;AACpB,YAAYC,qBAAmB;;;AE5C/B,IAAO,0CAAQ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBAkKC,YAAY,QAAQ,mCAAmC,CAAC;;;AFjHxE,IAAMC,cAAY;;;;EAIhB,oBAAoB;;;;EAIpB,yBAAyB;;;;EAIzB,oBAAoB;;;;EAIpB,2BAA2B;;;;EAI3B,wBAAwB;;;;EAIxB,uBAAuB;;;;EAIvB,cAAc;;;;EAId,WAAW;;;;EAIX,wBAAwB;;AAE1B,IAAMC,SAAY,YAAK,kBAAkB,iDAAiDD,WAAS;AACnG,IAAME,eAAkB,YAAK,mBAAmB,KAAK,QAAWD,MAAI;AACpE,IAAI;AAEE,IAAO,8BAAP,MAAO,qCAAuC,qBAAgB,gBAAe;EAGzE;EACA;EACS;EACA;EACA;EACA;EACA;EACA;EACjB,cAAA;AACE,UAAM,IAAI;AACV,SAAK,oBAAoB,yCAAmC,uBAAiB;AAK7E,SAAK,mBAAmB,CAAA;AACxB,SAAK,0BACM,kBAAS,SAAS,SAAQ,EAAG,mBAA6B,qBAAqB,CAAA,CAAE;AAE5F,SAAK,YAAY,IAAO,aAAQ,cAC5BC,aAAWF,YAAU,kBAAkB,GAAG,QAAQ,QAAW,sBAAsB;AACvF,SAAK,UAAU;MAAO;;IAAA;AACtB,SAAK,UAAU,iBAAgB,SAAwC,YAAS;AAC9E,WAAK,KAAK,iBAAgB;IAC5B,CAAC;AACD,SAAK,gBAAgB,IAAO,aAAQ,cAChCE,aAAWF,YAAU,uBAAuB,GAAG,WAAW,QAAW,2BAA2B;AACpG,SAAK,cAAc;MAAO;;IAAA;AAC1B,SAAK,cAAc,iBAAgB,SAAwC,KAAK,QAAQ,IAAI;AAE5F,SAAK,eAAe,UAAU,IAAI,mBAAmB;AACrD,SAAK,eAAe,aAAa,SAAS,GAAiB,wBAAQ,eAAe,CAAC,EAAE;AACrF,SAAK,eAAe,iBAAiB,eAAe,KAAK,YAAY,KAAK,IAAI,GAAG,KAAK;AACtF,SAAK,cAAc,IAAa,kCAAwB,oCAAmC;AAC3F,SAAK,YAAY,oBAAoB,uCAAiC;AACtE,SAAK,YAAY,aAAY;AAE7B,SAAK,YAAY;;MAA2C;IAAI;AAChE,SAAK,mBACD,IAAa,kCAAwB,6CAA6C,KAAK,WAAW;AAEtG,IAAG,aAAQ,QAAQ,SAAQ,EAAG,wBAA4B,mBAAa,kBAAkB,KAAK,QAAQ,IAAI;AAC1G,IAAG,aAAQ,QAAQ,SAAQ,EAAG,wBAA4B,oBAAc,WAAW,KAAK,QAAQ,IAAI;AACpG,SAAK,YAAY,IAAe,sBAAU,UAAS;AACnD,SAAK,OAAM;EACb;EAEA,OAAO,WAAQ;AACb,QAAI,CAAC,qCAAqC;AACxC,4CAAsC,IAAI,6BAA2B;IACvE;AACA,WAAO;EACT;EAEA,eAAY;AACV,WAAO,CAAC,KAAK,WAAW,KAAK,aAAa;EAC5C;EAES,QAAK;AACZ,QAAI,KAAK,SAAQ,GAAI;AACnB;IACF;AACA,QAAI,KAAK,iBAAiB,SAAS,GAAG;AACpC,WAAK,YAAY,YAAW;IAC9B;EACF;EAEQ,kBAAe;AACrB,UAAM,SAAS,CAAA;AACf,aAAS,IAAI,GAAG,IAAI,KAAK,iBAAiB,QAAQ,KAAK;AACrD,YAAM,aAAa,KAAK,iBAAiB,CAAC,EAAE,WAAU;AACtD,UAAI,YAAY;AACd,eAAO,KAAK,UAAU;MACxB;IACF;AAEA,SAAK,wBAAwB,IAAI,MAAM;EACzC;EAEQ,MAAM,mBAAgB;AAC5B,UAAS,iBAAY,YAAY,SAAQ,EAAG,SAAS,eAAe;AACpE,SAAK,aAAa,UAAU,IAAI,QAAQ;AACxC,SAAK,sBAAsB,IAAI,EAAE,aAAY;EAC/C;EAES,MAAM,WAAQ;AACrB,SAAK,UAAU,MAAK;AACpB,SAAK,eAAe,eAAc;AAClC,SAAK,YAAY,eAAc;AAC/B,SAAK,mBAAmB,CAAA;AACxB,SAAK,eAAe,KAAK,eAAe,YAAY,OAAO,mBAAmB;AAC9E,SAAK,aAAa,cAAcE,aAAWF,YAAU,kBAAkB;AACvE,SAAK,aAAa,WAAW;AAC7B,UAAM,yBAAyB,KAAK,wBAAwB,IAAG;AAC/D,QAAI,uBAAuB,QAAQ;AACjC,WAAK,aAAa,UAAU,IAAI,QAAQ;IAC1C;AACA,aAAS,IAAI,GAAG,IAAI,uBAAuB,QAAQ,EAAE,GAAG;AACtD,YAAM,aAAa,uBAAuB,CAAC;AAC3C,UAAI,CAAC,YAAY;AACf;MACF;AAEA,WAAK,sBAAsB,UAAU;IACvC;EACF;EAEQ,sBAAsB,YAAuB;AACnD,SAAK,eAAe,YAAY,KAAK,YAAY,OAAO;AACxD,UAAM,kBAAkB,IAAI,gBAAgB,YAAY,KAAK,kBAAkB,KAAK,SAAS;AAC7F,IAAG,eAAU,SAAS,KAAK,gBAAgBE,aAAWF,YAAU,kBAAkB,CAAC;AACnF,oBAAgB,iBAAgB,qBAA4B,KAAK,wBAAwB,IAAI;AAC7F,SAAK,YAAY,YAAY,gBAAgB,YAAW,CAAE;AAC1D,SAAK,iBAAiB,KAAK,eAAe;AAC1C,WAAO;EACT;EAEQ,uBAAuB,EAAC,MAAM,gBAAe,GAAuD;AAC1G,QAAI,CAAC,gBAAgB,WAAU,GAAI;AACjC,MAAS,0BAAe,cAAc,KAAK,kBAAkB,eAAe;AAC5E,WAAK,YAAY,YAAY,gBAAgB,YAAW,CAAE;AAC1D,WAAK,aAAa,UAAU,OAAO,UAAU,QAAQ,KAAK,iBAAiB,MAAM,CAAC;AAClF,UAAI,KAAK,iBAAiB,WAAW,GAAG;AACtC,aAAK,YAAY,QAAQ,OAAM;MACjC;IACF;AAEA,SAAK,gBAAe;EACtB;EAEQ,YAAY,OAAiB;AACnC,UAAM,cAAc,IAAO,iBAAY,YAAY,KAAK;AACxD,SAAK,oBAAoB,aAAa,KAAK;AAC3C,SAAK,YAAY,KAAI;EACvB;EAEQ,oBAAoB,aAAyC,OAAiB;AACpF,QAAI,YAAY;AAChB,eAAW,mBAAmB,KAAK,kBAAkB;AACnD,kBAAY,aAAa,gBAAgB,UAAS;IACpD;AAEA,QAAI,CAAC,WAAW;AACd,kBAAY,aAAY,EAAG,WACvBE,aAAWF,YAAU,kBAAkB,GAAG,KAAK,iBAAiB,KAAK,IAAI,GACzE,EAAC,cAAc,uBAAsB,CAAC;IAC5C;AAEA,QAAI,KAAK,iBAAiB,SAAS,GAAG;AACpC,kBAAY,aAAY,EAAG,WACvBE,aAAWF,YAAU,yBAAyB,GAAG,KAAK,uBAAuB,KAAK,IAAI,GACtF,EAAC,cAAc,+BAA8B,CAAC;IACpD;AAEA,UAAM,cAAc,KAAK,YAAY,qBAAqB,KAAK;AAC/D,QAAI,CAAC,aAAa;AAChB;IACF;AACA,UAAM,yBACF,KAAK,iBAAiB,KAAK,qBAAmB,YAAY,kBAAkB,gBAAgB,YAAW,CAAE,CAAC;AAC9G,QAAI,wBAAwB;AAC1B,6BAAuB,oBAAoB,aAAa,KAAK;IAC/D;EACF;EAEQ,yBAAsB;AAC5B,SAAK,mBAAmB,CAAA;AACxB,SAAK,gBAAe;AACpB,SAAK,OAAM;EACb;EAEQ,MAAM,6BAA6B,YAAkB;AAC3D,UAAS,iBAAY,YAAY,SAAQ,EAAG,SAAS,eAAe;AACpE,SAAK,sBAAsB,UAAU;AACrC,SAAK,gBAAe;AACpB,SAAK,OAAM;EACb;EAEA,aAAa,UAA8B,WAAiB;AAC1D,UAAM,QAAW,aAAQ,QAAQ,SAAQ,EAAG,OAAO,iBAAiB;AACpE,QAAI,CAAC,OAAO;AACV,aAAO;IACT;AACA,UAAM,EAAC,MAAK,IAAI,MAAM;AACtB,UAAM,OAAO,MAAM,SAAS,MAAM,UAAU,KAAK,MAAM,MAAM,UAAU,KAAK,EAAE;AAC9E,SAAK,KAAK,6BAA6B,IAAI;AAC3C,WAAO;EACT;EAEA,sBACI,QAAe,aACf,QAAoF;AACtF,QAAI,kBAA2B,kCAAwB,2BAA2B;AAChF,UAAI,CAAC,OAAO,SAAS,WAAW;AAC9B,oBAAY,aAAY,EAAG,WACvBE,aAAWF,YAAU,sBAAsB,GAAG,MAAM,KAAK,6BAA6B,OAAO,KAAI,CAAE,GACnG,EAAC,cAAc,6BAA4B,CAAC;MAClD;AACA;IACF;AAEA,QAAI,OAAO,WAAW,MAAM,UAAU,KAAK,OAAO;AAChD;IACF;AAEA,gBAAY,aAAY,EAAG,aAAa,sBAAsB;EAChE;;AAGI,IAAO,kBAAP,MAAO,yBAA+B,uBAAc,cAAyB;EACzE;EACA;EACA;EACA;EACS;EACT;EACA;EACA;EACA;EACA;EACA;EACR,YACI,YACA,kBACAG,YAAyC;AAC3C,UAAK;AAEL,SAAK,qBAAqB;AAC1B,SAAK,mBAAmB;AACxB,SAAK,UAAU,SAAS,cAAc,KAAK;AAC3C,SAAK,QAAQ,UAAU,IAAI,kBAAkB;AAC7C,SAAK,QAAQ,UAAU,IAAI,WAAW;AACtC,SAAK,UAAU;AACf,SAAK,YAAYA;AAEjB,SAAK,sBAAqB;AAC1B,SAAK,OAAM;EACb;EAEA,cAAW;AACT,WAAO,KAAK;EACd;EAEA,aAAU;AACR,WAAO,KAAK;EACd;EAEA,MAAM,oBAAoB,kBAAqD,YAAkB;AAE/F,UAAM,YAAY,iBAAiB,cAAc,kBAAiB;AAClE,QAAI,WAAW,OAAO,aAAY,GAAI;AACpC,YAAM,UAAU,MAAsB,+BAAc,wBAAwB,SAAS;AACrF,UAAI;AACF,qBACI,MAAgB,+BAAoB,oBAAmB,EAAG,qBAAqB,YAAY,OAAO;MACxG,QAAQ;MACR;IACF;AAEA,WAAO,MAAM,iBAAiB;MAC1B;QACE;QACA,aAAa,iBAAgB;QAC7B,uBAAuB;QACvB,QAAQ;QACR,eAAe;QACf,iBAAiB;;;MAED;;MACC;IAAK;EAC9B;EAEA,SAAM;AACJ,UAAM,0BAA6B,aAAQ,QAAQ,SAAQ,EAAG,OAAW,mBAAa,gBAAgB;AACtG,QAAI,2BAA2B,KAAK,oBAAoB;AACtD,WAAK,KAAK,oBAAoB,yBAAyB,KAAK,kBAAkB,EAAE,KAAK,YAAS;AAC5F,YAAI,YAAY,QAAQ;AACtB,eAAK,sBAAsB,OAAO,QAAQ,OAAO,gBAAgB;QACnE,OAAO;AACL,eAAK,sBAAqB;QAC5B;MACF,CAAC;IACH,OAAO;AACL,WAAK,sBAAqB;IAC5B;EACF;EAEA,eAAY;AACV,SAAK,UAAU;AACf,SAAK,oBAAoB,sBAAsB,IAAI;AACnD,SAAK,QAAQ,eAAc;AAC3B,UAAM,SAAS,KAAK,QAAQ,YAAY,KAAK;AAC7C,WAAO,cAAc,KAAK,YAAY;AACtC,SAAK,aAAa,IAAa,kCAAwB,qBAAoB;AAC3E,SAAK,WAAW,cAAa;AAC7B,UAAM,eAAgB,KAAK,WAAW,sBAAsB,QAAQ,KAAK,cAAc,KAAK,IAAI,CAAC;AACjG,SAAK,oBAAoB,gBAAgB,UAAU,IAAI,0BAA0B;AACjF,SAAK,oBAAoB,SAAQ;AACjC,iBAAa,UAAU,IAAI,oCAAoC;AAC/D,iBAAa,iBAAiB,WAAW,KAAK,cAAc,KAAK,IAAI,GAAG,KAAK;AAC7E,UAAM,YAAY,KAAK,QAAQ,sBAAqB;AACpD,QAAI,WAAW;AACb,gBAAU,kBAAkB,MAAM;IACpC;EACF;EAEA,YAAS;AACP,WAAO,QAAQ,KAAK,OAAO;EAC7B;EAEQ,cAAc,OAAc,UAAkB;AACpD,QAAI,OAAO;AACT,YAAM,QAAQ,QAAQ;IACxB;AAEA,SAAK,UAAU;AACf,SAAK,oBAAoB,sBAAsB,KAAK;AACpD,SAAK,oBAAoB,gBAAgB,UAAU,OAAO,0BAA0B;AACpF,QAAI,KAAK,YAAY;AACnB,WAAK,WAAW,OAAM;AACtB,YAAM,gBAAgB,WAAW,KAAK,qBAAqB,KAAK,WAAW,KAAI;AAC/E,WAAK,aAAa;AAClB,WAAK,QAAQ,eAAc;AAC3B,WAAK,iBAAiB,aAAa;IACrC;EACF;EAEQ,0BAA0B,OAAY;AAC5C,UAAM,QAAO;AACb,QAAI,CAAC,KAAK,UAAS,GAAI;AACrB,WAAK,aAAY;IACnB;EACF;EAEQ,iBAAiB,eAA0B;AACjD,QAAI,KAAK,oBAAoB;AAC3B,WAAK,iBAAiB,wBAAwB,KAAK,kBAAkB;IACvE;AACA,SAAK,qBAAqB;AAC1B,SAAK,OAAM;AACX,SAAK,yBAAwB,qBAA4B,IAAI;EAC/D;EAEQ,sBAAsB,OAAY;AACxC,UAAM,QAAQ,IAAI;AAClB,IAAG,eAAU,cAAc,MAAMD,aAAWF,YAAU,sBAAsB,CAAC;AAC7E,SAAK,iBAAiB,IAAI;EAC5B;EAEQ,sBACJ,QAAwC,kBAAoD;AAC9F,SAAK,SAAS,UAAU;AAExB,SAAK,QAAQ,eAAc;AAC3B,UAAM,iBAAiB,KAAK;AAC5B,SAAK,iCAAiC,QAAQ,gBAAgB;AAC9D,QAAI,gBAAgB,QAAQ;AAC1B,YAAM,OAAO,eAAe;AAC5B,YAAM,QAAQ,KAAK,aAAa,cAAc;AAC9C,WAAK,YAAY,cAAc;AAC/B,WAAK,YAAY,KAAK,qBAAqB,KAAK;IAClD;AACA,SAAK,oBAAoB,OAAM;EACjC;EAEQ,4BACJ,iBAAiD,kBAAoD;AACvG,UAAM,gBAAgB,KAAK,QAAQ,YAAY,OAAO,yBAAyB;AAC/E,UAAM,eAAe,IAAY,gBAAO,OAAM;AAC9C,iBAAa,OAAO;MAClB,SAAO;MACP,UAAU;MACV,MAAI;MACJ,cAAc;;AAEhB,iBAAa,YAAY;AACzB,IAAG,aAAQ,QAAQ,QAAQ,cAAcE,aAAWF,YAAU,qBAAqB,CAAC;AACpF,iBAAa,iBAAiB,SAAS,KAAK,sBAAsB,KAAK,IAAI,GAAG,KAAK;AACnF,iBAAa,iBAAiB,WAAW,WAAQ;AAC/C,UAAI,MAAM,QAAQ,SAAS;AACzB,aAAK,sBAAsB,KAAK;MAClC;IACF,CAAC;AAED,UAAM,eAAe,cAAc,YAAY,OAAO,2CAA2C;AACjG,iBAAa,YAAY,YAAY;AACrC,SAAK,cACQ,kCAAwB,wBAAwB,kBAAkB,KAAK,kBAAkB;AACtG,IAAG,aAAQ,QAAQ,QAAQ,KAAK,aAA4B,KAAK,kBAAkB;AACnF,QAAI,QAAQ,gBAAgB,KAAK,CAAC,iBAAiB;AACjD,WAAK,eAAe,SAAS,cAAc,MAAM;AACjD,WAAK,aAAa,UAAU,IAAI,wBAAwB;AACxD,WAAK,aAAa,UAAU,IAAI,OAAO;AACvC,mBAAa,UAAU,IAAI,QAAQ;AACnC,WAAK,aAAa,cAAcE,aAAWF,YAAU,YAAY;AACjE,UAAI,kBAAkB,WAAW,gBAAgB,QAAW;AAC1D,QAAG,aAAQ,QAAQ,QAAQ,KAAK,cAA6B,iBAAiB,UAAU,WAAW;MACrG;IACF,OAAO;AACL,YAAM,gBACO,kCAAwB,wBAAwB,qCACrD,iBAAiB,QAAQ,gBAAgB,GAAG,OAAyB,KAAK,SAAS;AAC3F,WAAK,eAAe,cAAc;IACpC;AACA,UAAM,mBAAmB,SAAS,cAAc,MAAM;AACtD,qBAAiB,UAAU,IAAI,6BAA6B;AAC5D,qBAAiB,cAAc;AAC/B,iBAAa,OAAO,KAAK,aAAa,kBAAkB,KAAK,YAAY;AAEzE,WAAO;EACT;EAEQ,iCACJ,iBAAiD,kBAAoD;AACvG,UAAM,gBAAgB,KAAK,4BAA4B,iBAAiB,gBAAgB;AAExF,QAAI,CAAC,oBAAoB,mBAAmB,gBAAgB,eAAe,CAAC,gBAAgB,cAAa,GAAI;AAC3G,oBAAc,UAAU,IAAI,gCAAgC;AAC5D,WAAK,sBAAsB,IAAa,kCAAwB,YAAY,iBAAiB,KAAK,SAAS;AAC3G,WAAK,iBAAiB,aACjB,KAAK,oBACL,KAAK,mBAAoE;AAC9E,WAAK,oBAAoB,gBAAgB;AACzC,WAAK,oBAAoB,gBAAgB,iBAAiB,SAAS,KAAK,eAAe,KAAK,IAAI,GAAG,KAAK;AACxG,WAAK,oBAAoB,gBAAgB,iBAAiB,YAAY,KAAK,0BAA0B,KAAK,IAAI,CAAC;IACjH,OAAO;AACL,oBAAc,iBAAiB,YAAY,KAAK,0BAA0B,KAAK,IAAI,CAAC;AACpF,WAAK,sBAAsB,IAAO,iBAAY,YAAW;IAC3D;AACA,SAAK,oBAAoB,QAAQ,KAAK;AACtC,SAAK,oBAAoB,gBAAgB,UAAU,IAAI,4BAA4B;AACnF,SAAK,oBAAoB,gBAAgB,iBAAiB,WAAW,WAAQ;AAC3E,UAAI,MAAM,QAAQ,WAAW,CAAC,KAAK,UAAS,GAAI;AAC9C,aAAK,aAAY;AACjB,cAAM,QAAQ,IAAI;MACpB,WAAW,MAAM,QAAQ,YAAY,CAAC,KAAK,UAAS,GAAI;AACtD,aAAK,sBAAsB,KAAK;MAClC;IACF,CAAC;EACH;EAEQ,eAAe,OAAY;AACjC,UAAM,QAAQ,IAAI;AAClB,UAAM,aAAc;AACpB,QAAI,WAAW,WAAW,GAAG;AAC3B,WAAK,sBAAsB,OAAO,WAAW,YAAY,KAAK,IAAI,GAAG,GAAG;IAC1E,WAAW,KAAK,wBAAwB,QAAW;AACjD,aAAO,aAAa,KAAK,mBAAmB;AAC5C,WAAK,sBAAsB;IAC7B;AAEA,aAAS,cAAW;AAClB,UAAI,CAAC,KAAK,qBAAqB;AAC7B;MACF;AAEA,UAAI,KAAK,oBAAoB,UAAU;AACrC,aAAK,oBAAoB,SAAQ;MACnC,WAAW,CAAC,KAAK,SAAS;AACxB,aAAK,oBAAoB,OAAM;MACjC;IACF;EACF;EAEQ,cAAc,OAAoB;AACxC,UAAM,cAAuB,6BAAkB,SAAS,KAAK;AAC7D,QAAI,MAAM,QAAQ,WAAW,aAAa;AACxC,WAAK,cAAc,OAAO,WAAW;IACvC;EACF;EAEA,oBAAoB,aAAyC,OAAY;AACvE,QAAI,CAAC,KAAK,UAAS,GAAI;AACrB,kBAAY,YAAW,EAAG,WACtBE,aAAWF,YAAU,qBAAqB,GAAG,KAAK,iBAAiB,KAAK,MAAM,IAAI,GAClF,EAAC,cAAc,0BAAyB,CAAC;IAC/C;AAEA,QAAI,CAAC,KAAK,UAAS,KAAM,KAAK,WAAW,KAAK,OAAO,SAAS,YAAY,KAAK,OAAO,SAAS,WAAW;AACxG,kBAAY,iBAAgB,EAAG,WAC3BE,aAAWF,YAAU,SAAS,GAAG,KAAK,uBAAuB,KAAK,IAAI,GACtE,EAAC,cAAc,8BAA6B,CAAC;IACnD;AAEA,UAAM,SAAY,aAAQ,qBAAqB,KAAK;AACpD,QAAI,UAAU,KAAK,aAAa,iBAAiB,MAAM,KAAK,KAAK,QAAQ;AACvE,kBAAY,sBAAsB,KAAK,MAAM;IAC/C;EACF;EAEQ,yBAAsB;AAC5B,IAAK,6BAAsB,8BAA8B,SAAS,KAAK,aAAa,WAAW;EACjG;EAEQ,OAAgB,qBAAqB;;",
  "names": ["value", "i18n", "UI", "UIStrings", "str_", "i18nString", "i18n", "UI", "VisualLogging", "UIStrings", "str_", "i18nString", "toolbar", "keymap", "link", "DEFAULT_VIEW", "Common", "i18n", "Platform", "assertNotNullOrUndefined", "SDK", "Workspace", "UI", "VisualLogging", "Common", "url", "html", "render", "UIStrings", "str_", "i18nString", "value", "assertNotNullOrUndefined", "DEFAULT_VIEW", "breakpointItems", "Common", "Host", "i18n", "Platform", "SDK", "Bindings", "Workspace", "IconButton", "UI", "VisualLogging", "UIStrings", "str_", "i18nString", "item", "icon", "i18n", "SDK", "UIStrings", "str_", "i18n", "SDK", "TextUtils", "CodeMirror", "SourceFrame", "UI", "UIStrings", "str_", "i18nString", "markers", "Common", "i18n", "assertNotNullOrUndefined", "SDK", "Bindings", "Workspace", "CodeMirror", "IconButton", "UI", "VisualLogging", "UIStrings", "str_", "i18nString", "assertNotNullOrUndefined", "value", "from", "to", "theme", "cssModel", "dialog", "Common", "i18n", "SDK", "IconButton", "UI", "VisualLogging", "UIStrings", "str_", "i18nString", "i18nLazyString", "messageWrapper", "Common", "Host", "i18n", "Platform", "SDK", "Bindings", "Breakpoints", "SourceMapScopes", "TextUtils", "Workspace", "CodeMirror", "Buttons", "TextEditor", "Tooltips", "ObjectUI", "SourceFrame", "UI", "VisualLogging", "ActionDelegate", "Common", "Host", "i18n", "Platform", "Root", "SDK", "Bindings", "Breakpoints", "Extensions", "Workspace", "UI", "VisualLogging", "Snippets", "Common", "Host", "i18n", "Platform", "SDK", "Bindings", "Persistence", "TextUtils", "Workspace", "Buttons", "IconButton", "UI", "VisualLogging", "ActionDelegate", "Revealer", "Common", "UI", "Common", "Platform", "Bindings", "Persistence", "TextUtils", "Workspace", "ActionDelegate", "Revealer", "UIStrings", "str_", "i18nString", "placeholder", "node", "action", "ActionDelegate", "Common", "Host", "i18n", "Platform", "SDK", "Bindings", "Persistence", "Workspace", "IconButton", "SourceFrame", "UI", "VisualLogging", "Components", "Workspace", "SourceFrame", "Common", "i18n", "Platform", "Persistence", "TextUtils", "Workspace", "IconButton", "SourceFrame", "UI", "VisualLogging", "Snippets", "Common", "Host", "Persistence", "TextUtils", "Workspace", "CodeMirror", "IconButton", "TextEditor", "SourceFrame", "UI", "i18n", "Platform", "CodeMirror", "SourceFrame", "UIStrings", "str_", "i18nString", "value", "markers", "theme", "type", "i18n", "Bindings", "UI", "UIStrings", "str_", "i18nString", "link", "Host", "i18n", "TextEditor", "UI", "Snippets", "UIStrings", "str_", "i18nString", "row", "value", "UIStrings", "str_", "i18nString", "tabId", "tooltip", "link", "UIStrings", "str_", "i18nString", "placeholder", "action", "name", "namePrefix", "ActionDelegate", "i18n", "SDK", "IconButton", "UI", "VisualLogging", "UIStrings", "str_", "i18nString", "UIStrings", "str_", "i18nString", "panel", "debuggerModel", "action", "indent", "pane", "ActionDelegate", "UIStrings", "str_", "i18nString", "theme", "dialog", "value", "deco", "field", "scopeMappings", "containsSideEffects", "outline", "i18n", "Root", "Persistence", "Workspace", "QuickOpen", "UI", "UIStrings", "str_", "i18nString", "i18n", "IconButton", "QuickOpen", "UI", "UIStrings", "str_", "i18nString", "parts", "column", "Common", "i18n", "Formatter", "Persistence", "TextUtils", "Workspace", "UI", "UIStrings", "str_", "i18nString", "Common", "Host", "PanelUtils", "IconButton", "PanelUtils", "i18n", "CodeMirror", "IconButton", "QuickOpen", "UI", "UIStrings", "str_", "i18nString", "i18n", "SDK", "SourceMapScopes", "ObjectUI", "Components", "UI", "VisualLogging", "UIStrings", "str_", "i18nString", "section", "ActionDelegate", "Common", "Host", "i18n", "Platform", "SDK", "Bindings", "Persistence", "TextUtils", "Workspace", "UI", "Snippets", "UIStrings", "str_", "i18nString", "placeholder", "link", "toolbar", "ActionDelegate", "Common", "Host", "i18n", "Platform", "SDK", "Formatter", "SourceMapScopes", "Buttons", "ObjectUI", "Components", "UI", "VisualLogging", "UIStrings", "str_", "i18nString", "linkifier"]
}
