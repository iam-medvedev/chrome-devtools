{"version":3,"file":"SearchSourcesView.js","sourceRoot":"","sources":["../../../../../../front_end/panels/sources/SearchSourcesView.ts"],"names":[],"mappings":"AAAA,4DAA4D;AAC5D,yEAAyE;AACzE,6BAA6B;AAE7B,OAAO,KAAK,MAAM,MAAM,6BAA6B,CAAC;AACtD,OAAO,KAAK,EAAE,MAAM,2BAA2B,CAAC;AAChD,OAAO,KAAK,MAAM,MAAM,qBAAqB,CAAC;AAE9C,OAAO,EAAC,kBAAkB,EAAC,MAAM,yBAAyB,CAAC;AAE3D,IAAI,yBAA4C,CAAC;AAEjD,MAAM,OAAO,iBAAkB,SAAQ,MAAM,CAAC,UAAU,CAAC,UAAU;IACjE;QACE,KAAK,CAAC,SAAS,EAAE,IAAI,MAAM,CAAC,SAAS,CAAC,SAAS,CAAC,eAAe,CAAC,GAAG,CAAC,CAAC,CAAC;IACxE,CAAC;IAED,MAAM,CAAC,QAAQ;QACb,IAAI,CAAC,yBAAyB,EAAE;YAC9B,yBAAyB,GAAG,IAAI,iBAAiB,EAAE,CAAC;SACrD;QACD,OAAO,yBAAyB,CAAC;IACnC,CAAC;IAED,MAAM,CAAC,KAAK,CAAC,UAAU,CAAC,KAAa,EAAE,iBAA2B;QAChE,MAAM,IAAI,GAAG,EAAE,CAAC,WAAW,CAAC,WAAW,CAAC,QAAQ,EAAE,CAAC,IAAI,CAAC,4BAA4B,CAAC,CAAC;QACtF,oEAAoE;QACpE,8BAA8B;QAC9B,oEAAoE;QACpE,8DAA8D;QAC9D,MAAM,QAAQ,GAAI,MAAM,EAAE,CAAC,WAAW,CAAC,WAAW,CAAC,QAAQ,EAAE,CAAC,eAAe,CAAC,aAAa,CAAS,CAAC;QACrG,QAAQ,CAAC,UAAU,CAAC,IAAI,CAAC,CAAC;QAC1B,MAAM,EAAE,CAAC,WAAW,CAAC,WAAW,CAAC,QAAQ,EAAE,CAAC,UAAU,CAAC,IAAI,CAAC,CAAC;QAC7D,MAAM,MAAM,GAAI,MAAM,IAAI,CAAC,MAAM,EAAmC,CAAC;QACrE,MAAM,CAAC,MAAM,CAAC,KAAK,EAAE,OAAO,CAAC,iBAAiB,CAAC,CAAC,CAAC;QACjD,OAAO,MAAM,CAAC;IAChB,CAAC;IAEQ,WAAW;QAClB,OAAO,IAAI,kBAAkB,EAAE,CAAC;IAClC,CAAC;CACF;AAED,MAAM,OAAO,cAAc;IACzB,YAAY,CAAC,QAA4B,EAAE,SAAiB;QAC1D,KAAK,IAAI,CAAC,UAAU,EAAE,CAAC;QACvB,OAAO,IAAI,CAAC;IACd,CAAC;IAEO,UAAU;QAChB,MAAM,SAAS,GAAG,EAAE,CAAC,aAAa,CAAC,aAAa,CAAC,QAAQ,EAAE,CAAC,OAAO,CAAC,MAAM,EAAE,CAAC,YAAY,EAAE,CAAC;QAC5F,IAAI,cAAc,GAAG,EAAE,CAAC;QACxB,IAAI,SAAS,IAAI,SAAS,CAAC,UAAU,EAAE;YACrC,cAAc,GAAG,SAAS,CAAC,QAAQ,EAAE,CAAC,OAAO,CAAC,SAAS,EAAE,EAAE,CAAC,CAAC;SAC9D;QAED,OAAO,iBAAiB,CAAC,UAAU,CAAC,cAAc,CAAC,CAAC;IACtD,CAAC;CACF","sourcesContent":["// Copyright 2018 The Chromium Authors. All rights reserved.\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\n\nimport * as Common from '../../core/common/common.js';\nimport * as UI from '../../ui/legacy/legacy.js';\nimport * as Search from '../search/search.js';\n\nimport {SourcesSearchScope} from './SourcesSearchScope.js';\n\nlet searchSourcesViewInstance: SearchSourcesView;\n\nexport class SearchSourcesView extends Search.SearchView.SearchView {\n  private constructor() {\n    super('sources', new Common.Throttler.Throttler(/* timeoutMs */ 200));\n  }\n\n  static instance(): SearchSourcesView {\n    if (!searchSourcesViewInstance) {\n      searchSourcesViewInstance = new SearchSourcesView();\n    }\n    return searchSourcesViewInstance;\n  }\n\n  static async openSearch(query: string, searchImmediately?: boolean): Promise<UI.Widget.Widget> {\n    const view = UI.ViewManager.ViewManager.instance().view('sources.search-sources-tab');\n    // Deliberately use target location name so that it could be changed\n    // based on the setting later.\n    // TODO(crbug.com/1172300) Ignored during the jsdoc to ts migration)\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    const location = (await UI.ViewManager.ViewManager.instance().resolveLocation('drawer-view') as any);\n    location.appendView(view);\n    await UI.ViewManager.ViewManager.instance().revealView(view);\n    const widget = (await view.widget() as Search.SearchView.SearchView);\n    widget.toggle(query, Boolean(searchImmediately));\n    return widget;\n  }\n\n  override createScope(): Search.SearchScope.SearchScope {\n    return new SourcesSearchScope();\n  }\n}\n\nexport class ActionDelegate implements UI.ActionRegistration.ActionDelegate {\n  handleAction(_context: UI.Context.Context, _actionId: string): boolean {\n    void this.showSearch();\n    return true;\n  }\n\n  private showSearch(): Promise<UI.Widget.Widget> {\n    const selection = UI.InspectorView.InspectorView.instance().element.window().getSelection();\n    let queryCandidate = '';\n    if (selection && selection.rangeCount) {\n      queryCandidate = selection.toString().replace(/\\r?\\n.*/, '');\n    }\n\n    return SearchSourcesView.openSearch(queryCandidate);\n  }\n}\n"]}