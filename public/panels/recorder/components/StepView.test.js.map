{"version":3,"file":"StepView.test.js","sourceRoot":"","sources":["../../../../../../../front_end/panels/recorder/components/StepView.test.ts"],"names":[],"mappings":"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","sourcesContent":["// Copyright 2023 The Chromium Authors\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\n\nimport {\n  getEventPromise,\n} from '../../../testing/DOMHelpers.js';\nimport {\n  describeWithEnvironment,\n} from '../../../testing/EnvironmentHelpers.js';\nimport {createViewFunctionStub, type ViewFunctionStub} from '../../../testing/ViewFunctionHelpers.js';\nimport * as Menus from '../../../ui/components/menus/menus.js';\nimport * as Converters from '../converters/converters.js';\nimport * as Models from '../models/models.js';\n\nimport * as Components from './components.js';\n\ndescribeWithEnvironment('StepView', () => {\n  const step = {type: Models.Schema.StepType.Scroll as const};\n  const section = {title: 'test', steps: [step], url: 'https://example.com'};\n\n  async function createStepView(\n      viewFunction: ViewFunctionStub<typeof Components.StepView.StepView>,\n      opts: Partial<Components.StepView.ViewInput> = {},\n      ): Promise<Components.StepView.StepView> {\n    const component = new Components.StepView.StepView(undefined, viewFunction);\n    component.step = opts.step !== undefined ? step : undefined;\n    component.section = opts.section !== undefined ? section : undefined;\n    component.state = Components.StepView.State.DEFAULT;\n    component.isEndOfGroup = opts.isEndOfGroup ?? false;\n    component.isStartOfGroup = opts.isStartOfGroup ?? false;\n    component.isFirstSection = opts.isFirstSection ?? false;\n    component.isLastSection = opts.isLastSection ?? false;\n    component.stepIndex = opts.stepIndex ?? 0;\n    component.sectionIndex = opts.sectionIndex ?? 0;\n    component.isRecording = opts.isRecording ?? false;\n    component.isPlaying = opts.isPlaying ?? false;\n    component.hasBreakpoint = opts.hasBreakpoint ?? false;\n    component.removable = opts.removable ?? false;\n    component.builtInConverters = opts.builtInConverters || [\n      new Converters.JSONConverter.JSONConverter('  '),\n    ];\n    component.extensionConverters = opts.extensionConverters || [];\n    component.isSelected = opts.isSelected ?? false;\n    component.recorderSettings = new Models.RecorderSettings.RecorderSettings();\n    component.performUpdate();\n    return component;\n  }\n\n  describe('Step and section actions menu', () => {\n    it('should produce actions for a step', async () => {\n      const viewFunction = createViewFunctionStub(Components.StepView.StepView);\n      await createStepView(viewFunction, {step});\n      assert.deepEqual(viewFunction.input.actions, [\n        {id: 'add-step-before', label: 'Add step before', group: 'stepManagement', groupTitle: 'Manage steps'},\n        {id: 'add-step-after', label: 'Add step after', group: 'stepManagement', groupTitle: 'Manage steps'},\n        {\n          id: 'add-breakpoint',\n          label: 'Add breakpoint',\n          group: 'breakPointManagement',\n          groupTitle: 'Breakpoints',\n        },\n        {id: 'copy-step-as-json', label: 'JSON', group: 'copy', groupTitle: 'Copy as'},\n      ]);\n    });\n\n    it('should produce actions for a section', async () => {\n      const viewFunction = createViewFunctionStub(Components.StepView.StepView);\n      await createStepView(viewFunction, {section});\n      assert.deepEqual(viewFunction.input.actions, [\n        {id: 'add-step-after', label: 'Add step after', group: 'stepManagement', groupTitle: 'Manage steps'},\n      ]);\n    });\n\n    it('should dispatch \"AddStep before\" events on steps', async () => {\n      const viewFunction = createViewFunctionStub(Components.StepView.StepView);\n      const component = await createStepView(viewFunction, {step});\n      const eventPromise = getEventPromise<Components.StepView.AddStep>(\n          component.contentElement,\n          'addstep',\n      );\n      viewFunction.input.handleStepAction(new Menus.Menu.MenuItemSelectedEvent('add-step-before'));\n      const event = await eventPromise;\n\n      assert.strictEqual(event.position, 'before');\n      assert.deepEqual(event.stepOrSection, step);\n    });\n\n    it('should dispatch \"AddStep before\" events on sections', async () => {\n      const viewFunction = createViewFunctionStub(Components.StepView.StepView);\n      const component = await createStepView(viewFunction, {section});\n\n      const eventPromise = getEventPromise<Components.StepView.AddStep>(\n          component.contentElement,\n          'addstep',\n      );\n      viewFunction.input.handleStepAction(new Menus.Menu.MenuItemSelectedEvent('add-step-before'));\n      const event = await eventPromise;\n\n      assert.strictEqual(event.position, 'before');\n      assert.deepEqual(event.stepOrSection, section);\n    });\n\n    it('should dispatch \"AddStep after\" events on steps', async () => {\n      const viewFunction = createViewFunctionStub(Components.StepView.StepView);\n      const component = await createStepView(viewFunction, {step});\n\n      const eventPromise = getEventPromise<Components.StepView.AddStep>(\n          component.contentElement,\n          'addstep',\n      );\n      viewFunction.input.handleStepAction(new Menus.Menu.MenuItemSelectedEvent('add-step-after'));\n      const event = await eventPromise;\n\n      assert.strictEqual(event.position, 'after');\n      assert.deepEqual(event.stepOrSection, step);\n    });\n\n    it('should dispatch \"Remove steps\" events on steps', async () => {\n      const viewFunction = createViewFunctionStub(Components.StepView.StepView);\n      const component = await createStepView(viewFunction, {step});\n\n      const eventPromise = getEventPromise<Components.StepView.RemoveStep>(\n          component.contentElement,\n          'removestep',\n      );\n      viewFunction.input.handleStepAction(new Menus.Menu.MenuItemSelectedEvent('remove-step'));\n      const event = await eventPromise;\n\n      assert.deepEqual(event.step, step);\n    });\n\n    it('should dispatch \"Add breakpoint\" event on steps', async () => {\n      const viewFunction = createViewFunctionStub(Components.StepView.StepView);\n      const component = await createStepView(viewFunction, {step});\n\n      const eventPromise = getEventPromise<Components.StepView.AddBreakpointEvent>(\n          component.contentElement,\n          'addbreakpoint',\n      );\n      viewFunction.input.handleStepAction(new Menus.Menu.MenuItemSelectedEvent('add-breakpoint'));\n      const event = await eventPromise;\n\n      assert.deepEqual(event.index, 0);\n    });\n\n    it('should dispatch \"Remove breakpoint\" event on steps', async () => {\n      const viewFunction = createViewFunctionStub(Components.StepView.StepView);\n      const component = await createStepView(viewFunction, {step});\n\n      const eventPromise = getEventPromise<Components.StepView.AddBreakpointEvent>(\n          component.contentElement,\n          'removebreakpoint',\n      );\n      viewFunction.input.handleStepAction(new Menus.Menu.MenuItemSelectedEvent('remove-breakpoint'));\n      const event = await eventPromise;\n\n      assert.deepEqual(event.index, 0);\n    });\n\n    it('should dispatch copy step as JSON events', async () => {\n      const viewFunction = createViewFunctionStub(Components.StepView.StepView);\n      const component = await createStepView(viewFunction, {step});\n\n      const eventPromise = getEventPromise<Components.StepView.CopyStepEvent>(\n          component.contentElement,\n          'copystep',\n      );\n\n      viewFunction.input.handleStepAction(new Menus.Menu.MenuItemSelectedEvent('copy-step-as-json'));\n\n      await eventPromise;\n    });\n  });\n\n  describe('Breakpoint events', () => {\n    it('should dispatch \"Add breakpoint\" event on breakpoint icon click if there is not a breakpoint on the step',\n       async () => {\n         const viewFunction = createViewFunctionStub(Components.StepView.StepView);\n         const component = await createStepView(viewFunction, {step});\n         const eventPromise = getEventPromise<Components.StepView.AddBreakpointEvent>(\n             component.contentElement,\n             'addbreakpoint',\n         );\n         viewFunction.input.onBreakpointClick();\n         const event = await eventPromise;\n\n         assert.deepEqual(event.index, 0);\n       });\n\n    it('should dispatch \"Remove breakpoint\" event on breakpoint icon click if there already is a breakpoint on the step',\n       async () => {\n         const viewFunction = createViewFunctionStub(Components.StepView.StepView);\n         const component = await createStepView(viewFunction, {hasBreakpoint: true, step});\n         const eventPromise = getEventPromise<Components.StepView.RemoveBreakpointEvent>(\n             component.contentElement,\n             'removebreakpoint',\n         );\n\n         viewFunction.input.onBreakpointClick();\n         const event = await eventPromise;\n\n         assert.deepEqual(event.index, 0);\n       });\n  });\n});\n"]}