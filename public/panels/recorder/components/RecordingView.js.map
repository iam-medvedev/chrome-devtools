{"version":3,"file":"RecordingView.js","sourceRoot":"","sources":["../../../../../../../front_end/panels/recorder/components/RecordingView.ts"],"names":[],"mappings":"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","sourcesContent":["// Copyright 2023 The Chromium Authors. All rights reserved.\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\n/* eslint-disable rulesdir/no-lit-render-outside-of-view */\n\nimport '../../../ui/components/icon_button/icon_button.js';\nimport './ExtensionView.js';\nimport './ControlButton.js';\nimport './ReplaySection.js';\n\nimport * as Host from '../../../core/host/host.js';\nimport * as i18n from '../../../core/i18n/i18n.js';\nimport * as Platform from '../../../core/platform/platform.js';\nimport * as SDK from '../../../core/sdk/sdk.js';\nimport type * as PublicExtensions from '../../../models/extensions/extensions.js';\nimport * as CodeMirror from '../../../third_party/codemirror.next/codemirror.next.js';\nimport type * as PuppeteerReplay from '../../../third_party/puppeteer-replay/puppeteer-replay.js';\nimport * as Buttons from '../../../ui/components/buttons/buttons.js';\nimport * as CodeHighlighter from '../../../ui/components/code_highlighter/code_highlighter.js';\nimport * as Dialogs from '../../../ui/components/dialogs/dialogs.js';\nimport * as Input from '../../../ui/components/input/input.js';\nimport type * as Menus from '../../../ui/components/menus/menus.js';\nimport * as TextEditor from '../../../ui/components/text_editor/text_editor.js';\nimport * as UI from '../../../ui/legacy/legacy.js';\nimport * as Lit from '../../../ui/lit/lit.js';\nimport * as VisualLogging from '../../../ui/visual_logging/visual_logging.js';\nimport type * as Converters from '../converters/converters.js';\nimport type * as Extensions from '../extensions/extensions.js';\nimport * as Models from '../models/models.js';\nimport {PlayRecordingSpeed} from '../models/RecordingPlayer.js';\nimport * as Actions from '../recorder-actions/recorder-actions.js';\n\nimport recordingViewStyles from './recordingView.css.js';\nimport type {ReplaySectionData, StartReplayEvent} from './ReplaySection.js';\nimport {\n  type CopyStepEvent,\n  State,\n  type StepView,\n  type StepViewData,\n} from './StepView.js';\n\nconst {html} = Lit;\n\nconst UIStrings = {\n  /**\n   * @description Depicts that the recording was done on a mobile device (e.g., a smartphone or tablet).\n   */\n  mobile: 'Mobile',\n  /**\n   * @description Depicts that the recording was done on a desktop device (e.g., on a PC or laptop).\n   */\n  desktop: 'Desktop',\n  /**\n   * @description Network latency in milliseconds.\n   * @example {10} value\n   */\n  latency: 'Latency: {value} ms',\n  /**\n   * @description Upload speed.\n   * @example {42 kB} value\n   */\n  upload: 'Upload: {value}',\n  /**\n   * @description Download speed.\n   * @example {8 kB} value\n   */\n  download: 'Download: {value}',\n  /**\n   * @description Title of the button to edit replay settings.\n   */\n  editReplaySettings: 'Edit replay settings',\n  /**\n   * @description Title of the section that contains replay settings.\n   */\n  replaySettings: 'Replay settings',\n  /**\n   * @description The string is shown when a default value is used for some replay settings.\n   */\n  default: 'Default',\n  /**\n   * @description The title of the section with environment settings.\n   */\n  environment: 'Environment',\n  /**\n   * @description The title of the screenshot image that is shown for every section in the recordign view.\n   */\n  screenshotForSection: 'Screenshot for this section',\n  /**\n   * @description The title of the button that edits the current recording's title.\n   */\n  editTitle: 'Edit title',\n  /**\n   * @description The error for when the title is missing.\n   */\n  requiredTitleError: 'Title is required',\n  /**\n   * @description The status text that is shown while the recording is ongoing.\n   */\n  recording: 'Recording…',\n  /**\n   * @description The title of the button to end the current recording.\n   */\n  endRecording: 'End recording',\n  /**\n   * @description The title of the button while the recording is being ended.\n   */\n  recordingIsBeingStopped: 'Stopping recording…',\n  /**\n   * @description The text that describes a timeout setting of {value} milliseconds.\n   * @example {1000} value\n   */\n  timeout: 'Timeout: {value} ms',\n  /**\n   * @description The label for the input that allows entering network throttling configuration.\n   */\n  network: 'Network',\n  /**\n   * @description The label for the input that allows entering timeout (a number in ms) configuration.\n   */\n  timeoutLabel: 'Timeout',\n  /**\n   * @description The text in a tooltip for the timeout input that explains what timeout settings do.\n   */\n  timeoutExplanation:\n      'The timeout setting (in milliseconds) applies to every action when replaying the recording. For example, if a DOM element identified by a CSS selector does not appear on the page within the specified timeout, the replay fails with an error.',\n  /**\n   * @description The label for the button that cancels replaying.\n   */\n  cancelReplay: 'Cancel replay',\n  /**\n   * @description Button title that shows the code view when clicked.\n   */\n  showCode: 'Show code',\n  /**\n   * @description Button title that hides the code view when clicked.\n   */\n  hideCode: 'Hide code',\n  /**\n   * @description Button title that adds an assertion to the step editor.\n   */\n  addAssertion: 'Add assertion',\n  /**\n   * @description The title of the button that open current recording in Performance panel.\n   */\n  performancePanel: 'Performance panel',\n} as const;\nconst str_ = i18n.i18n.registerUIStrings(\n    'panels/recorder/components/RecordingView.ts',\n    UIStrings,\n);\nconst i18nString = i18n.i18n.getLocalizedString.bind(undefined, str_);\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    'devtools-recording-view': RecordingView;\n  }\n}\n\nexport interface ReplayState {\n  isPlaying: boolean;             // Replay is in progress\n  isPausedOnBreakpoint: boolean;  // Replay is in progress and is in stopped state\n}\n\nexport interface RecordingViewData {\n  replayState: ReplayState;\n  isRecording: boolean;\n  recordingTogglingInProgress: boolean;\n  recording: Models.Schema.UserFlow;\n  currentStep?: Models.Schema.Step;\n  currentError?: Error;\n  sections: Models.Section.Section[];\n  settings?: Models.RecordingSettings.RecordingSettings;\n  recorderSettings?: Models.RecorderSettings.RecorderSettings;\n  lastReplayResult?: Models.RecordingPlayer.ReplayResult;\n  replayAllowed: boolean;\n  breakpointIndexes: Set<number>;\n  builtInConverters: Converters.Converter.Converter[];\n  extensionConverters: Converters.Converter.Converter[];\n  replayExtensions: Extensions.ExtensionManager.Extension[];\n  extensionDescriptor?: PublicExtensions.RecorderPluginManager.ViewDescriptor;\n}\n\nexport class RecordingFinishedEvent extends Event {\n  static readonly eventName = 'recordingfinished';\n\n  constructor() {\n    super(RecordingFinishedEvent.eventName);\n  }\n}\n\nexport const enum TargetPanel {\n  PERFORMANCE_PANEL = 'timeline',\n  DEFAULT = 'chrome-recorder',\n}\n\ninterface PlayRecordingEventData {\n  targetPanel: TargetPanel;\n  speed: PlayRecordingSpeed;\n  extension?: Extensions.ExtensionManager.Extension;\n}\n\nexport class PlayRecordingEvent extends Event {\n  static readonly eventName = 'playrecording';\n  readonly data: PlayRecordingEventData;\n  constructor(\n      data: PlayRecordingEventData = {\n        targetPanel: TargetPanel.DEFAULT,\n        speed: PlayRecordingSpeed.NORMAL,\n      },\n  ) {\n    super(PlayRecordingEvent.eventName);\n    this.data = data;\n  }\n}\n\nexport class AbortReplayEvent extends Event {\n  static readonly eventName = 'abortreplay';\n  constructor() {\n    super(AbortReplayEvent.eventName);\n  }\n}\n\nexport class RecordingChangedEvent extends Event {\n  static readonly eventName = 'recordingchanged';\n  data: {currentStep: Models.Schema.Step, newStep: Models.Schema.Step};\n  constructor(currentStep: Models.Schema.Step, newStep: Models.Schema.Step) {\n    super(RecordingChangedEvent.eventName);\n    this.data = {currentStep, newStep};\n  }\n}\n\nexport class AddAssertionEvent extends Event {\n  static readonly eventName = 'addassertion';\n  constructor() {\n    super(AddAssertionEvent.eventName);\n  }\n}\n\nexport class RecordingTitleChangedEvent extends Event {\n  static readonly eventName = 'recordingtitlechanged';\n  title: string;\n\n  constructor(title: string) {\n    super(RecordingTitleChangedEvent.eventName, {});\n    this.title = title;\n  }\n}\n\nexport class NetworkConditionsChanged extends Event {\n  static readonly eventName = 'networkconditionschanged';\n  data?: SDK.NetworkManager.Conditions;\n  constructor(data?: SDK.NetworkManager.Conditions) {\n    super(NetworkConditionsChanged.eventName, {\n      composed: true,\n      bubbles: true,\n    });\n    this.data = data;\n  }\n}\n\nexport class TimeoutChanged extends Event {\n  static readonly eventName = 'timeoutchanged';\n  data?: number;\n  constructor(data?: number) {\n    super(TimeoutChanged.eventName, {composed: true, bubbles: true});\n    this.data = data;\n  }\n}\n\nconst networkConditionPresets = [\n  SDK.NetworkManager.NoThrottlingConditions,\n  SDK.NetworkManager.OfflineConditions,\n  SDK.NetworkManager.Slow3GConditions,\n  SDK.NetworkManager.Slow4GConditions,\n  SDK.NetworkManager.Fast4GConditions,\n];\n\nfunction converterIdToFlowMetric(\n    converterId: string,\n    ): Host.UserMetrics.RecordingCopiedToClipboard {\n  switch (converterId) {\n    case Models.ConverterIds.ConverterIds.PUPPETEER:\n    case Models.ConverterIds.ConverterIds.PUPPETEER_FIREFOX:\n      return Host.UserMetrics.RecordingCopiedToClipboard.COPIED_RECORDING_WITH_PUPPETEER;\n    case Models.ConverterIds.ConverterIds.JSON:\n      return Host.UserMetrics.RecordingCopiedToClipboard.COPIED_RECORDING_WITH_JSON;\n    case Models.ConverterIds.ConverterIds.REPLAY:\n      return Host.UserMetrics.RecordingCopiedToClipboard.COPIED_RECORDING_WITH_REPLAY;\n    default:\n      return Host.UserMetrics.RecordingCopiedToClipboard.COPIED_RECORDING_WITH_EXTENSION;\n  }\n}\n\nfunction converterIdToStepMetric(\n    converterId: string,\n    ): Host.UserMetrics.RecordingCopiedToClipboard {\n  switch (converterId) {\n    case Models.ConverterIds.ConverterIds.PUPPETEER:\n    case Models.ConverterIds.ConverterIds.PUPPETEER_FIREFOX:\n      return Host.UserMetrics.RecordingCopiedToClipboard.COPIED_STEP_WITH_PUPPETEER;\n    case Models.ConverterIds.ConverterIds.JSON:\n      return Host.UserMetrics.RecordingCopiedToClipboard.COPIED_STEP_WITH_JSON;\n    case Models.ConverterIds.ConverterIds.REPLAY:\n      return Host.UserMetrics.RecordingCopiedToClipboard.COPIED_STEP_WITH_REPLAY;\n    default:\n      return Host.UserMetrics.RecordingCopiedToClipboard.COPIED_STEP_WITH_EXTENSION;\n  }\n}\n\nexport class RecordingView extends HTMLElement {\n  readonly #shadow = this.attachShadow({mode: 'open'});\n  #replayState: ReplayState = {isPlaying: false, isPausedOnBreakpoint: false};\n  #userFlow: Models.Schema.UserFlow|null = null;\n  #isRecording = false;\n  #recordingTogglingInProgress = false;\n  #isTitleInvalid = false;\n  #currentStep?: Models.Schema.Step;\n  #steps: Models.Schema.Step[] = [];\n  #currentError?: Error;\n  #sections: Models.Section.Section[] = [];\n  #settings?: Models.RecordingSettings.RecordingSettings;\n  #recorderSettings?: Models.RecorderSettings.RecorderSettings;\n  #lastReplayResult?: Models.RecordingPlayer.ReplayResult;\n  #breakpointIndexes = new Set<number>();\n  #selectedStep?: Models.Schema.Step|null;\n\n  #replaySettingsExpanded = false;\n  #replayAllowed = true;\n  #builtInConverters: Converters.Converter.Converter[] = [];\n  #extensionConverters: Converters.Converter.Converter[] = [];\n  #replayExtensions?: Extensions.ExtensionManager.Extension[];\n  #showCodeView = false;\n  #code = '';\n  #converterId = '';\n  #editorState?: CodeMirror.EditorState;\n  #sourceMap: PuppeteerReplay.SourceMap|undefined;\n  #extensionDescriptor?: PublicExtensions.RecorderPluginManager.ViewDescriptor;\n\n  #onCopyBound = this.#onCopy.bind(this);\n\n  constructor() {\n    super();\n  }\n\n  set data(data: RecordingViewData) {\n    this.#isRecording = data.isRecording;\n    this.#replayState = data.replayState;\n    this.#recordingTogglingInProgress = data.recordingTogglingInProgress;\n    this.#currentStep = data.currentStep;\n\n    this.#userFlow = data.recording;\n    this.#steps = this.#userFlow.steps;\n    this.#sections = data.sections;\n    this.#settings = data.settings;\n    this.#recorderSettings = data.recorderSettings;\n\n    this.#currentError = data.currentError;\n    this.#lastReplayResult = data.lastReplayResult;\n    this.#replayAllowed = data.replayAllowed;\n    this.#isTitleInvalid = false;\n    this.#breakpointIndexes = data.breakpointIndexes;\n    this.#builtInConverters = data.builtInConverters;\n    this.#extensionConverters = data.extensionConverters;\n    this.#replayExtensions = data.replayExtensions;\n    this.#extensionDescriptor = data.extensionDescriptor;\n\n    this.#converterId = this.#recorderSettings?.preferredCopyFormat ?? data.builtInConverters[0]?.getId();\n    void this.#convertToCode();\n\n    this.#render();\n  }\n\n  connectedCallback(): void {\n    document.addEventListener('copy', this.#onCopyBound);\n    this.#render();\n  }\n\n  disconnectedCallback(): void {\n    document.removeEventListener('copy', this.#onCopyBound);\n  }\n\n  scrollToBottom(): void {\n    const wrapper = this.shadowRoot?.querySelector('.sections');\n    if (!wrapper) {\n      return;\n    }\n    wrapper.scrollTop = wrapper.scrollHeight;\n  }\n\n  #dispatchAddAssertionEvent(): void {\n    this.dispatchEvent(new AddAssertionEvent());\n  }\n\n  #dispatchRecordingFinished(): void {\n    this.dispatchEvent(new RecordingFinishedEvent());\n  }\n\n  #handleAbortReplay(): void {\n    this.dispatchEvent(new AbortReplayEvent());\n  }\n\n  #handleTogglePlaying(event: StartReplayEvent): void {\n    this.dispatchEvent(\n        new PlayRecordingEvent({\n          targetPanel: TargetPanel.DEFAULT,\n          speed: event.speed,\n          extension: event.extension,\n        }),\n    );\n  }\n\n  #getStepState(step: Models.Schema.Step): State {\n    if (!this.#currentStep) {\n      return State.DEFAULT;\n    }\n    if (step === this.#currentStep) {\n      if (this.#currentError) {\n        return State.ERROR;\n      }\n      if (!this.#replayState.isPlaying) {\n        return State.SUCCESS;\n      }\n\n      if (this.#replayState.isPausedOnBreakpoint) {\n        return State.STOPPED;\n      }\n\n      return State.CURRENT;\n    }\n    const currentIndex = this.#steps.indexOf(this.#currentStep);\n    if (currentIndex === -1) {\n      return State.DEFAULT;\n    }\n\n    const index = this.#steps.indexOf(step);\n    return index < currentIndex ? State.SUCCESS : State.OUTSTANDING;\n  }\n\n  #getSectionState(section: Models.Section.Section): State {\n    const currentStep = this.#currentStep;\n    if (!currentStep) {\n      return State.DEFAULT;\n    }\n\n    const currentSection = this.#sections.find(\n                               section => section.steps.includes(currentStep),\n                               ) as Models.Section.Section;\n\n    if (!currentSection) {\n      if (this.#currentError) {\n        return State.ERROR;\n      }\n    }\n\n    if (section === currentSection) {\n      return State.SUCCESS;\n    }\n\n    const index = this.#sections.indexOf(currentSection);\n    const ownIndex = this.#sections.indexOf(section);\n    return index >= ownIndex ? State.SUCCESS : State.OUTSTANDING;\n  }\n\n  #renderStep(\n      section: Models.Section.Section,\n      step: Models.Schema.Step,\n      isLastSection: boolean,\n      ): Lit.TemplateResult {\n    const stepIndex = this.#steps.indexOf(step);\n    // clang-format off\n    return html`\n      <devtools-step-view\n      @click=${this.#onStepClick}\n      @mouseover=${this.#onStepHover}\n      @copystep=${this.#onCopyStepEvent}\n      .data=${\n        {\n          step,\n          state: this.#getStepState(step),\n          error: this.#currentStep === step ? this.#currentError : undefined,\n          isFirstSection: false,\n          isLastSection:\n            isLastSection && this.#steps[this.#steps.length - 1] === step,\n          isStartOfGroup: false,\n          isEndOfGroup: section.steps[section.steps.length - 1] === step,\n          stepIndex,\n          hasBreakpoint: this.#breakpointIndexes.has(stepIndex),\n          sectionIndex: -1,\n          isRecording: this.#isRecording,\n          isPlaying: this.#replayState.isPlaying,\n          removable: this.#steps.length > 1,\n          builtInConverters: this.#builtInConverters,\n          extensionConverters: this.#extensionConverters,\n          isSelected: this.#selectedStep === step,\n          recorderSettings: this.#recorderSettings,\n        } as StepViewData\n      }\n      jslog=${VisualLogging.section('step').track({click: true})}\n      ></devtools-step-view>\n    `;\n    // clang-format on\n  }\n\n  #onStepHover = (event: MouseEvent): void => {\n    const stepView = event.target as StepView;\n    const step = stepView.step || stepView.section?.causingStep;\n    if (!step || this.#selectedStep) {\n      return;\n    }\n    this.#highlightCodeForStep(step);\n  };\n\n  #onStepClick(event: Event): void {\n    event.stopPropagation();\n    const stepView = event.target as StepView;\n    const selectedStep = stepView.step || stepView.section?.causingStep || null;\n    if (this.#selectedStep === selectedStep) {\n      return;\n    }\n    this.#selectedStep = selectedStep;\n    this.#render();\n    if (selectedStep) {\n      this.#highlightCodeForStep(selectedStep, /* scroll=*/ true);\n    }\n  }\n\n  #onWrapperClick(): void {\n    if (this.#selectedStep === undefined) {\n      return;\n    }\n    this.#selectedStep = undefined;\n    this.#render();\n  }\n\n  #onReplaySettingsKeydown(event: Event): void {\n    if ((event as KeyboardEvent).key !== 'Enter') {\n      return;\n    }\n    event.preventDefault();\n    this.#onToggleReplaySettings(event);\n  }\n\n  #onToggleReplaySettings(event: Event): void {\n    event.stopPropagation();\n    this.#replaySettingsExpanded = !this.#replaySettingsExpanded;\n    this.#render();\n  }\n\n  #onNetworkConditionsChange(event: Event): void {\n    const throttlingMenu = event.target;\n    if (throttlingMenu instanceof HTMLSelectElement) {\n      const preset = networkConditionPresets.find(\n          preset => preset.i18nTitleKey === throttlingMenu.value,\n      );\n      this.dispatchEvent(\n          new NetworkConditionsChanged(\n              preset?.i18nTitleKey === SDK.NetworkManager.NoThrottlingConditions.i18nTitleKey ? undefined : preset,\n              ),\n      );\n    }\n  }\n\n  #onTimeoutInput(event: Event): void {\n    const target = event.target as HTMLInputElement;\n    if (!target.checkValidity()) {\n      target.reportValidity();\n      return;\n    }\n    this.dispatchEvent(new TimeoutChanged(Number(target.value)));\n  }\n\n  #onTitleBlur = (event: Event): void => {\n    const target = event.target as HTMLInputElement;\n    const title = target.value.trim();\n    if (!title) {\n      this.#isTitleInvalid = true;\n      this.#render();\n      return;\n    }\n    this.dispatchEvent(new RecordingTitleChangedEvent(title));\n  };\n\n  #onTitleInputKeyDown = (event: KeyboardEvent): void => {\n    switch (event.code) {\n      case 'Escape':\n      case 'Enter':\n        (event.target as HTMLElement).blur();\n        event.stopPropagation();\n        break;\n    }\n  };\n\n  #onEditTitleButtonClick = (): void => {\n    const input = this.#shadow.getElementById('title-input') as HTMLInputElement;\n    input.focus();\n  };\n\n  #onSelectMenuLabelClick = (event: Event): void => {\n    const target = event.target as HTMLElement;\n    if (target.matches('.wrapping-label')) {\n      target.querySelector('devtools-select-menu')?.click();\n    }\n  };\n\n  async #copyCurrentSelection(step?: Models.Schema.Step|null): Promise<void> {\n    let converter =\n        [\n          ...this.#builtInConverters,\n          ...this.#extensionConverters,\n        ]\n            .find(\n                converter => converter.getId() === this.#recorderSettings?.preferredCopyFormat,\n            );\n    if (!converter) {\n      converter = this.#builtInConverters[0];\n    }\n    if (!converter) {\n      throw new Error('No default converter found');\n    }\n\n    let text = '';\n    if (step) {\n      text = await converter.stringifyStep(step);\n    } else if (this.#userFlow) {\n      [text] = await converter.stringify(this.#userFlow);\n    }\n\n    Host.InspectorFrontendHost.InspectorFrontendHostInstance.copyText(text);\n    const metric = step ? converterIdToStepMetric(converter.getId()) : converterIdToFlowMetric(converter.getId());\n    Host.userMetrics.recordingCopiedToClipboard(metric);\n  }\n\n  #onCopyStepEvent(event: CopyStepEvent): void {\n    event.stopPropagation();\n    void this.#copyCurrentSelection(event.step);\n  }\n\n  async #onCopy(event: ClipboardEvent): Promise<void> {\n    if (event.target !== document.body) {\n      return;\n    }\n\n    event.preventDefault();\n    await this.#copyCurrentSelection(this.#selectedStep);\n    Host.userMetrics.keyboardShortcutFired(Actions.RecorderActions.COPY_RECORDING_OR_STEP);\n  }\n\n  #renderSettings(): Lit.TemplateResult {\n    if (!this.#settings) {\n      return html``;\n    }\n    const environmentFragments = [];\n    if (this.#settings.viewportSettings) {\n      // clang-format off\n      environmentFragments.push(\n        html`<div>${\n          this.#settings.viewportSettings.isMobile\n            ? i18nString(UIStrings.mobile)\n            : i18nString(UIStrings.desktop)\n        }</div>`,\n      );\n      environmentFragments.push(html`<div class=\"separator\"></div>`);\n      environmentFragments.push(\n        html`<div>${this.#settings.viewportSettings.width}×${\n          this.#settings.viewportSettings.height\n        } px</div>`,\n      );\n      // clang-format on\n    }\n    const replaySettingsFragments = [];\n    if (!this.#replaySettingsExpanded) {\n      if (this.#settings.networkConditionsSettings) {\n        if (this.#settings.networkConditionsSettings.title) {\n          // clang-format off\n          replaySettingsFragments.push(\n            html`<div>${\n              this.#settings.networkConditionsSettings.title\n            }</div>`,\n          );\n          // clang-format on\n        } else {\n          // clang-format off\n          replaySettingsFragments.push(html`<div>\n            ${i18nString(UIStrings.download, {\n              value: i18n.ByteUtilities.bytesToString(\n                this.#settings.networkConditionsSettings.download,\n              ),\n            })},\n            ${i18nString(UIStrings.upload, {\n              value: i18n.ByteUtilities.bytesToString(\n                this.#settings.networkConditionsSettings.upload,\n              ),\n            })},\n            ${i18nString(UIStrings.latency, {\n              value: this.#settings.networkConditionsSettings.latency,\n            })}\n          </div>`);\n          // clang-format on\n        }\n      } else {\n        // clang-format off\n        replaySettingsFragments.push(\n          html`<div>${\n            SDK.NetworkManager.NoThrottlingConditions.title instanceof Function\n              ? SDK.NetworkManager.NoThrottlingConditions.title()\n              : SDK.NetworkManager.NoThrottlingConditions.title\n          }</div>`,\n        );\n        // clang-format on\n      }\n      // clang-format off\n      replaySettingsFragments.push(html`<div class=\"separator\"></div>`);\n      replaySettingsFragments.push(\n        html`<div>${i18nString(UIStrings.timeout, {\n          value: this.#settings.timeout || Models.RecordingPlayer.defaultTimeout,\n        })}</div>`,\n      );\n      // clang-format on\n    } else {\n      // clang-format off\n      const selectedOption =\n        this.#settings.networkConditionsSettings?.i18nTitleKey ||\n        SDK.NetworkManager.NoThrottlingConditions.i18nTitleKey;\n      const selectedOptionTitle = networkConditionPresets.find(\n        preset => preset.i18nTitleKey === selectedOption,\n      );\n      let menuButtonTitle = '';\n      if (selectedOptionTitle) {\n        menuButtonTitle =\n          selectedOptionTitle.title instanceof Function\n            ? selectedOptionTitle.title()\n            : selectedOptionTitle.title;\n      }\n\n      replaySettingsFragments.push(html`<div class=\"editable-setting\">\n        <label class=\"wrapping-label\" @click=${this.#onSelectMenuLabelClick}>\n          ${i18nString(UIStrings.network)}\n          <select\n              title=${menuButtonTitle}\n              jslog=${VisualLogging.dropDown('network-conditions').track({change: true})}\n              @change=${this.#onNetworkConditionsChange}>\n        ${networkConditionPresets.map(condition => html`\n          <option jslog=${VisualLogging.item(Platform.StringUtilities.toKebabCase(condition.i18nTitleKey || ''))}\n                  value=${condition.i18nTitleKey || ''} ?selected=${selectedOption === condition.i18nTitleKey}>\n                  ${\n                    condition.title instanceof Function\n                      ? condition.title()\n                      : condition.title\n                  }\n          </option>`)}\n      </select>\n        </label>\n      </div>`);\n      replaySettingsFragments.push(html`<div class=\"editable-setting\">\n        <label class=\"wrapping-label\" title=${i18nString(\n          UIStrings.timeoutExplanation,\n        )}>\n          ${i18nString(UIStrings.timeoutLabel)}\n          <input\n            @input=${this.#onTimeoutInput}\n            required\n            min=${Models.SchemaUtils.minTimeout}\n            max=${Models.SchemaUtils.maxTimeout}\n            value=${\n              this.#settings.timeout || Models.RecordingPlayer.defaultTimeout\n            }\n            jslog=${VisualLogging.textField('timeout').track({change: true})}\n            class=\"devtools-text-input\"\n            type=\"number\">\n        </label>\n      </div>`);\n      // clang-format on\n    }\n    const isEditable = !this.#isRecording && !this.#replayState.isPlaying;\n    const replaySettingsButtonClassMap = {\n      'settings-title': true,\n      expanded: this.#replaySettingsExpanded,\n    };\n    const replaySettingsClassMap = {\n      expanded: this.#replaySettingsExpanded,\n      settings: true,\n    };\n    // clang-format off\n    return html`\n      <div class=\"settings-row\">\n        <div class=\"settings-container\">\n          <div\n            class=${Lit.Directives.classMap(replaySettingsButtonClassMap)}\n            @keydown=${isEditable && this.#onReplaySettingsKeydown}\n            @click=${isEditable && this.#onToggleReplaySettings}\n            tabindex=\"0\"\n            role=\"button\"\n            jslog=${VisualLogging.action('replay-settings').track({click: true})}\n            aria-label=${i18nString(UIStrings.editReplaySettings)}>\n            <span>${i18nString(UIStrings.replaySettings)}</span>\n            ${\n              isEditable\n                ? html`<devtools-icon\n                    class=\"chevron\"\n                    name=\"triangle-down\">\n                  </devtools-icon>`\n                : ''\n            }\n          </div>\n          <div class=${Lit.Directives.classMap(replaySettingsClassMap)}>\n            ${\n              replaySettingsFragments.length\n                ? replaySettingsFragments\n                : html`<div>${i18nString(UIStrings.default)}</div>`\n            }\n          </div>\n        </div>\n        <div class=\"settings-container\">\n          <div class=\"settings-title\">${i18nString(UIStrings.environment)}</div>\n          <div class=\"settings\">\n            ${\n              environmentFragments.length\n                ? environmentFragments\n                : html`<div>${i18nString(UIStrings.default)}</div>`\n            }\n          </div>\n        </div>\n      </div>\n    `;\n    // clang-format on\n  }\n\n  #getCurrentConverter(): Converters.Converter.Converter|undefined {\n    const currentConverter = [\n      ...(this.#builtInConverters || []),\n      ...(this.#extensionConverters || []),\n    ].find(converter => converter.getId() === this.#converterId);\n    if (!currentConverter) {\n      return this.#builtInConverters[0];\n    }\n    return currentConverter;\n  }\n\n  #renderTimelineArea(): Lit.LitTemplate {\n    if (this.#extensionDescriptor) {\n      // clang-format off\n      return html`\n        <devtools-recorder-extension-view .descriptor=${this.#extensionDescriptor}>\n        </devtools-recorder-extension-view>\n      `;\n      // clang-format on\n    }\n    const currentConverter = this.#getCurrentConverter();\n    const converterFormatName = currentConverter?.getFormatName();\n    // clang-format off\n    return html`\n        <devtools-split-view\n          direction=\"auto\"\n          sidebar-position=\"second\"\n          sidebar-initial-size=\"300\"\n          sidebar-visibility=${this.#showCodeView ? '' : 'hidden'}\n        >\n          <div slot=\"main\">\n            ${this.#renderSections()}\n          </div>\n          <div slot=\"sidebar\" jslog=${VisualLogging.pane('source-code').track({resize: true})}>\n            ${this.#showCodeView ? html`\n            <div class=\"section-toolbar\" jslog=${VisualLogging.toolbar()}>\n              <devtools-select-menu\n                @selectmenuselected=${this.#onCodeFormatChange}\n                .showDivider=${true}\n                .showArrow=${true}\n                .sideButton=${false}\n                .showSelectedItem=${true}\n                .position=${Dialogs.Dialog.DialogVerticalPosition.BOTTOM}\n                .buttonTitle=${converterFormatName || ''}\n                .jslogContext=${'code-format'}\n              >\n                ${this.#builtInConverters.map(converter => {\n                  return html`<devtools-menu-item\n                    .value=${converter.getId()}\n                    .selected=${this.#converterId === converter.getId()}\n                    jslog=${VisualLogging.action().track({click: true}).context(`converter-${Platform.StringUtilities.toKebabCase(converter.getId())}`)}\n                  >\n                    ${converter.getFormatName()}\n                  </devtools-menu-item>`;\n                })}\n                ${this.#extensionConverters.map(converter => {\n                  return html`<devtools-menu-item\n                    .value=${converter.getId()}\n                    .selected=${this.#converterId === converter.getId()}\n                    jslog=${VisualLogging.action().track({click: true}).context('converter-extension')}\n                  >\n                    ${converter.getFormatName()}\n                  </devtools-menu-item>`;\n                })}\n              </devtools-select-menu>\n              <devtools-button\n                title=${Models.Tooltip.getTooltipForActions(\n                  i18nString(UIStrings.hideCode),\n                  Actions.RecorderActions.TOGGLE_CODE_VIEW,\n                )}\n                .data=${\n                  {\n                    variant: Buttons.Button.Variant.ICON,\n                    size: Buttons.Button.Size.SMALL,\n                    iconName: 'cross',\n                  } as Buttons.Button.ButtonData\n                }\n                @click=${this.showCodeToggle}\n                jslog=${VisualLogging.close().track({click: true})}\n              ></devtools-button>\n            </div>\n            ${this.#renderTextEditor()}`\n            : Lit.nothing}\n          </div>\n        </devtools-split-view>\n      `;\n    // clang-format on\n  }\n\n  #renderTextEditor(): Lit.TemplateResult {\n    if (!this.#editorState) {\n      throw new Error('Unexpected: trying to render the text editor without editorState');\n    }\n    // clang-format off\n    return html`\n      <div class=\"text-editor\" jslog=${VisualLogging.textField().track({change: true})}>\n        <devtools-text-editor .state=${this.#editorState}></devtools-text-editor>\n      </div>\n    `;\n    // clang-format on\n  }\n\n  #renderScreenshot(\n      section: Models.Section.Section,\n      ): Lit.TemplateResult|null {\n    if (!section.screenshot) {\n      return null;\n    }\n\n    // clang-format off\n    return html`\n      <img class=\"screenshot\" src=${section.screenshot} alt=${i18nString(\n      UIStrings.screenshotForSection,\n    )} />\n    `;\n    // clang-format on\n  }\n\n  #renderReplayOrAbortButton(): Lit.TemplateResult {\n    if (this.#replayState.isPlaying) {\n      return html`\n        <devtools-button .jslogContext=${'abort-replay'} @click=${\n          this.#handleAbortReplay} .iconName=${'pause'} .variant=${Buttons.Button.Variant.OUTLINED}>\n          ${i18nString(UIStrings.cancelReplay)}\n        </devtools-button>`;\n    }\n\n    // clang-format off\n    return html`<devtools-replay-section\n        .data=${\n          {\n            settings: this.#recorderSettings,\n            replayExtensions: this.#replayExtensions,\n          } as ReplaySectionData\n        }\n        .disabled=${this.#replayState.isPlaying}\n        @startreplay=${this.#handleTogglePlaying}\n        >\n      </devtools-replay-section>`;\n    // clang-format on\n  }\n\n  #handleMeasurePerformanceClickEvent(event: Event): void {\n    event.stopPropagation();\n\n    this.dispatchEvent(\n        new PlayRecordingEvent({\n          targetPanel: TargetPanel.PERFORMANCE_PANEL,\n          speed: PlayRecordingSpeed.NORMAL,\n        }),\n    );\n  }\n\n  showCodeToggle = (): void => {\n    this.#showCodeView = !this.#showCodeView;\n    Host.userMetrics.recordingCodeToggled(\n        this.#showCodeView ? Host.UserMetrics.RecordingCodeToggled.CODE_SHOWN :\n                             Host.UserMetrics.RecordingCodeToggled.CODE_HIDDEN,\n    );\n    void this.#convertToCode();\n  };\n\n  #convertToCode = async(): Promise<void> => {\n    if (!this.#userFlow) {\n      return;\n    }\n    const converter = this.#getCurrentConverter();\n    if (!converter) {\n      return;\n    }\n    const [code, sourceMap] = await converter.stringify(this.#userFlow);\n    this.#code = code;\n    this.#sourceMap = sourceMap;\n    this.#sourceMap?.shift();\n    const mediaType = converter.getMediaType();\n    const languageSupport = mediaType ? await CodeHighlighter.CodeHighlighter.languageFromMIME(mediaType) : null;\n    this.#editorState = CodeMirror.EditorState.create({\n      doc: this.#code,\n      extensions: [\n        TextEditor.Config.baseConfiguration(this.#code),\n        CodeMirror.EditorState.readOnly.of(true),\n        CodeMirror.EditorView.lineWrapping,\n        languageSupport ? languageSupport : [],\n      ],\n    });\n    this.#render();\n    // Used by tests.\n    this.dispatchEvent(new Event('code-generated'));\n  };\n\n  #highlightCodeForStep = (step: Models.Schema.Step, scroll = false): void => {\n    if (!this.#sourceMap) {\n      return;\n    }\n\n    const stepIndex = this.#steps.indexOf(step);\n    if (stepIndex === -1) {\n      return;\n    }\n\n    const editor = this.#shadow.querySelector('devtools-text-editor') as | TextEditor.TextEditor.TextEditor | undefined;\n    if (!editor) {\n      return;\n    }\n\n    const cm = editor.editor;\n    if (!cm) {\n      return;\n    }\n\n    const line = this.#sourceMap[stepIndex * 2];\n    const length = this.#sourceMap[stepIndex * 2 + 1];\n\n    let selection = editor.createSelection(\n        {lineNumber: line + length, columnNumber: 0},\n        {lineNumber: line, columnNumber: 0},\n    );\n    const lastLine = editor.state.doc.lineAt(selection.main.anchor);\n    selection = editor.createSelection(\n        {lineNumber: line + length - 1, columnNumber: lastLine.length + 1},\n        {lineNumber: line, columnNumber: 0},\n    );\n\n    cm.dispatch({\n      selection,\n      effects: scroll ?\n          [\n            CodeMirror.EditorView.scrollIntoView(selection.main, {\n              y: 'nearest',\n            }),\n          ] :\n          undefined,\n    });\n  };\n\n  #onCodeFormatChange = (event: Menus.SelectMenu.SelectMenuItemSelectedEvent): void => {\n    this.#converterId = event.itemValue as string;\n    if (this.#recorderSettings) {\n      this.#recorderSettings.preferredCopyFormat = event.itemValue as string;\n    }\n\n    void this.#convertToCode();\n  };\n\n  #renderSections(): Lit.LitTemplate {\n    // clang-format off\n    return html`\n      <div class=\"sections\">\n      ${\n        !this.#showCodeView\n          ? html`<div class=\"section-toolbar\">\n        <devtools-button\n          @click=${this.showCodeToggle}\n          class=\"show-code\"\n          .data=${\n            {\n              variant: Buttons.Button.Variant.OUTLINED,\n              title: Models.Tooltip.getTooltipForActions(\n                i18nString(UIStrings.showCode),\n                Actions.RecorderActions.TOGGLE_CODE_VIEW,\n              ),\n            } as Buttons.Button.ButtonData\n          }\n          jslog=${VisualLogging.toggleSubpane(Actions.RecorderActions.TOGGLE_CODE_VIEW).track({click: true})}\n        >\n          ${i18nString(UIStrings.showCode)}\n        </devtools-button>\n      </div>`\n          : ''\n      }\n      ${this.#sections.map(\n        (section, i) => html`\n            <div class=\"section\">\n              <div class=\"screenshot-wrapper\">\n                ${this.#renderScreenshot(section)}\n              </div>\n              <div class=\"content\">\n                <div class=\"steps\">\n                  <devtools-step-view\n                    @click=${this.#onStepClick}\n                    @mouseover=${this.#onStepHover}\n                    .data=${\n                      {\n                        section,\n                        state: this.#getSectionState(section),\n                        isStartOfGroup: true,\n                        isEndOfGroup: section.steps.length === 0,\n                        isFirstSection: i === 0,\n                        isLastSection:\n                          i === this.#sections.length - 1 &&\n                          section.steps.length === 0,\n                        isSelected:\n                          this.#selectedStep === (section.causingStep || null),\n                        sectionIndex: i,\n                        isRecording: this.#isRecording,\n                        isPlaying: this.#replayState.isPlaying,\n                        error:\n                          this.#getSectionState(section) === State.ERROR\n                            ? this.#currentError\n                            : undefined,\n                        hasBreakpoint: false,\n                        removable: this.#steps.length > 1 && section.causingStep,\n                      } as StepViewData\n                    }\n                  >\n                  </devtools-step-view>\n                  ${section.steps.map(step =>\n                    this.#renderStep(\n                      section,\n                      step,\n                      i === this.#sections.length - 1,\n                    ),\n                  )}\n                  ${!this.#recordingTogglingInProgress && this.#isRecording && i === this.#sections.length - 1 ? html`<devtools-button\n                    class=\"step add-assertion-button\"\n                    .data=${\n                      {\n                        variant: Buttons.Button.Variant.OUTLINED,\n                        title: i18nString(UIStrings.addAssertion),\n                        jslogContext: 'add-assertion',\n                      } as Buttons.Button.ButtonData\n                    }\n                    @click=${this.#dispatchAddAssertionEvent}\n                  >${i18nString(UIStrings.addAssertion)}</devtools-button>` : undefined}\n                  ${\n                    this.#isRecording && i === this.#sections.length - 1\n                      ? html`<div class=\"step recording\">${i18nString(\n                          UIStrings.recording,\n                        )}</div>`\n                      : null\n                  }\n                </div>\n              </div>\n            </div>\n      `,\n      )}\n      </div>\n    `;\n    // clang-format on\n  }\n\n  #renderHeader(): Lit.LitTemplate|string {\n    if (!this.#userFlow) {\n      return '';\n    }\n    const {title} = this.#userFlow;\n    const isTitleEditable = !this.#replayState.isPlaying && !this.#isRecording;\n    // clang-format off\n    return html`\n      <div class=\"header\">\n        <div class=\"header-title-wrapper\">\n          <div class=\"header-title\">\n            <input @blur=${this.#onTitleBlur}\n                  @keydown=${this.#onTitleInputKeyDown}\n                  id=\"title-input\"\n                  jslog=${VisualLogging.value('title').track({change: true})}\n                  class=${Lit.Directives.classMap({\n                    'has-error': this.#isTitleInvalid,\n                    disabled: !isTitleEditable,\n                  })}\n                  .value=${Lit.Directives.live(title)}\n                  .disabled=${!isTitleEditable}\n                  >\n            <div class=\"title-button-bar\">\n              <devtools-button\n                @click=${this.#onEditTitleButtonClick}\n                .data=${\n                  {\n                    disabled: !isTitleEditable,\n                    variant: Buttons.Button.Variant.TOOLBAR,\n                    iconName: 'edit',\n                    title: i18nString(UIStrings.editTitle),\n                    jslogContext: 'edit-title',\n                  } as Buttons.Button.ButtonData\n                }\n              ></devtools-button>\n            </div>\n          </div>\n          ${\n            this.#isTitleInvalid\n              ? html`<div class=\"title-input-error-text\">\n            ${\n              i18nString(UIStrings.requiredTitleError)\n            }\n          </div>`\n              : ''\n          }\n        </div>\n        ${\n          !this.#isRecording && this.#replayAllowed\n            ? html`<div class=\"actions\">\n                <devtools-button\n                  @click=${this.#handleMeasurePerformanceClickEvent}\n                  .data=${\n                    {\n                      disabled: this.#replayState.isPlaying,\n                      variant: Buttons.Button.Variant.OUTLINED,\n                      iconName: 'performance',\n                      title: i18nString(UIStrings.performancePanel),\n                      jslogContext: 'measure-performance',\n                    } as Buttons.Button.ButtonData\n                  }\n                >\n                  ${i18nString(UIStrings.performancePanel)}\n                </devtools-button>\n                <div class=\"separator\"></div>\n                ${this.#renderReplayOrAbortButton()}\n              </div>`\n            : ''\n        }\n      </div>`;\n    // clang-format on\n  }\n\n  #renderFooter(): Lit.LitTemplate|string {\n    if (!this.#isRecording) {\n      return '';\n    }\n    const translation = this.#recordingTogglingInProgress ? i18nString(UIStrings.recordingIsBeingStopped) :\n                                                            i18nString(UIStrings.endRecording);\n    // clang-format off\n    return html`\n      <div class=\"footer\">\n        <div class=\"controls\">\n          <devtools-control-button\n            jslog=${VisualLogging.toggle('toggle-recording').track({click: true})}\n            @click=${this.#dispatchRecordingFinished}\n            .disabled=${this.#recordingTogglingInProgress}\n            .shape=${'square'}\n            .label=${translation}\n            title=${Models.Tooltip.getTooltipForActions(\n              translation,\n              Actions.RecorderActions.START_RECORDING,\n            )}\n          >\n          </devtools-control-button>\n        </div>\n      </div>\n    `;\n    // clang-format on\n  }\n\n  #render(): void {\n    const classNames = {\n      wrapper: true,\n      'is-recording': this.#isRecording,\n      'is-playing': this.#replayState.isPlaying,\n      'was-successful': this.#lastReplayResult === Models.RecordingPlayer.ReplayResult.SUCCESS,\n      'was-failure': this.#lastReplayResult === Models.RecordingPlayer.ReplayResult.FAILURE,\n    };\n\n    // clang-format off\n    Lit.render(\n      html`\n      <style>${UI.inspectorCommonStyles}</style>\n      <style>${recordingViewStyles}</style>\n      <style>${Input.textInputStyles}</style>\n      <div @click=${this.#onWrapperClick} class=${Lit.Directives.classMap(\n        classNames,\n      )}>\n        <div class=\"main\">\n          ${this.#renderHeader()}\n          ${\n            this.#extensionDescriptor\n              ? html`\n            <devtools-recorder-extension-view .descriptor=${\n                  this.#extensionDescriptor\n                }>\n            </devtools-recorder-extension-view>\n          `\n              : html`\n            ${this.#renderSettings()}\n            ${this.#renderTimelineArea()}\n          `\n          }\n          ${this.#renderFooter()}\n        </div>\n      </div>\n    `,\n      this.#shadow,\n      { host: this },\n    );\n    // clang-format on\n  }\n}\n\ncustomElements.define(\n    'devtools-recording-view',\n    RecordingView,\n);\n"]}