{"version":3,"file":"ReplaySection.js","sourceRoot":"","sources":["../../../../../../../front_end/panels/recorder/components/ReplaySection.ts"],"names":[],"mappings":"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","sourcesContent":["// Copyright 2023 The Chromium Authors\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\n/* eslint-disable @devtools/no-lit-render-outside-of-view */\n\nimport * as Host from '../../../core/host/host.js';\nimport * as i18n from '../../../core/i18n/i18n.js';\nimport * as Platform from '../../../core/platform/platform.js';\nimport * as Buttons from '../../../ui/components/buttons/buttons.js';\nimport * as UI from '../../../ui/legacy/legacy.js';\nimport * as Lit from '../../../ui/lit/lit.js';\nimport * as VisualLogging from '../../../ui/visual_logging/visual_logging.js';\nimport type * as Extensions from '../extensions/extensions.js';\nimport * as Models from '../models/models.js';\nimport {PlayRecordingSpeed} from '../models/RecordingPlayer.js';\nimport * as Actions from '../recorder-actions/recorder-actions.js';\n\nimport replaySectionStyles from './replaySection.css.js';\n\nconst {html, Directives: {ifDefined, repeat}} = Lit;\n\nconst UIStrings = {\n  /**\n   * @description Replay button label\n   */\n  Replay: 'Replay',\n  /**\n   * @description Button label for the normal speed replay option\n   */\n  ReplayNormalButtonLabel: 'Normal speed',\n  /**\n   * @description Item label for the normal speed replay option\n   */\n  ReplayNormalItemLabel: 'Normal (Default)',\n  /**\n   * @description Button label for the slow speed replay option\n   */\n  ReplaySlowButtonLabel: 'Slow speed',\n  /**\n   * @description Item label for the slow speed replay option\n   */\n  ReplaySlowItemLabel: 'Slow',\n  /**\n   * @description Button label for the very slow speed replay option\n   */\n  ReplayVerySlowButtonLabel: 'Very slow speed',\n  /**\n   * @description Item label for the very slow speed replay option\n   */\n  ReplayVerySlowItemLabel: 'Very slow',\n  /**\n   * @description Button label for the extremely slow speed replay option\n   */\n  ReplayExtremelySlowButtonLabel: 'Extremely slow speed',\n  /**\n   * @description Item label for the slow speed replay option\n   */\n  ReplayExtremelySlowItemLabel: 'Extremely slow',\n  /**\n   * @description Label for a group of items in the replay menu that indicate various replay speeds (e.g., Normal, Fast, Slow).\n   */\n  speedGroup: 'Speed',\n  /**\n   * @description Label for a group of items in the replay menu that indicate various extensions that can be used for replay.\n   */\n  extensionGroup: 'Extensions',\n} as const;\n\nconst replaySpeedToMetricSpeedMap = {\n  [PlayRecordingSpeed.NORMAL]: Host.UserMetrics.RecordingReplaySpeed.NORMAL,\n  [PlayRecordingSpeed.SLOW]: Host.UserMetrics.RecordingReplaySpeed.SLOW,\n  [PlayRecordingSpeed.VERY_SLOW]: Host.UserMetrics.RecordingReplaySpeed.VERY_SLOW,\n  [PlayRecordingSpeed.EXTREMELY_SLOW]: Host.UserMetrics.RecordingReplaySpeed.EXTREMELY_SLOW,\n} as const;\n\nconst str_ = i18n.i18n.registerUIStrings(\n    'panels/recorder/components/ReplaySection.ts',\n    UIStrings,\n);\nconst i18nString = i18n.i18n.getLocalizedString.bind(undefined, str_);\n\nconst REPLAY_EXTENSION_PREFIX = 'extension';\n\ninterface Item {\n  value: string;\n  buttonIconName: string;\n  buttonLabel?: () => Platform.UIString.LocalizedString;\n  label: () => Platform.UIString.LocalizedString;\n}\n\ninterface Group {\n  name: string;\n  items: Item[];\n}\n\ninterface ViewInput {\n  disabled: boolean;\n  groups: Group[];\n  selectedItem: Item;\n  actionTitle: string;\n  onButtonClick: () => void;\n  onItemSelected: (item: string) => void;\n}\n\nexport type ViewOutput = undefined;\n\nexport const DEFAULT_VIEW = (input: ViewInput, _output: ViewOutput, target: HTMLElement): void => {\n  const {disabled, groups, selectedItem, actionTitle, onButtonClick, onItemSelected} = input;\n  const buttonVariant = Buttons.Button.Variant.PRIMARY;\n\n  const handleClick = (ev: Event): void => {\n    ev.stopPropagation();\n    onButtonClick();\n  };\n\n  const handleSelectMenuSelect = (\n      event: Event,\n      ): void => {\n    if (event.target instanceof HTMLSelectElement) {\n      onItemSelected(event.target.value);\n    }\n  };\n\n  // clang-format off\n  Lit.render(\n    html`\n      <style>\n        ${UI.inspectorCommonStyles}\n      </style>\n      <style>\n        ${replaySectionStyles}\n      </style>\n      <div\n        class=\"select-button\"\n        title=${ifDefined(actionTitle)}\n      >\n        <label>\n          ${groups.length > 1\n            ? html`\n                <div\n                  class=\"groups-label\"\n                  >${groups\n                    .map(group => {\n                      return group.name;\n                    })\n                    .join(' & ')}</div>`\n            : Lit.nothing}\n          <select\n            class=\"primary\"\n            ?disabled=${disabled}\n            jslog=${VisualLogging.dropDown('network-conditions').track({\n              change: true,\n            })}\n            @change=${handleSelectMenuSelect}\n          >\n            ${repeat(groups, group => group.name, group =>\n              html`\n                <optgroup label=${group.name}>\n                  ${repeat(group.items, item => item.value, item => {\n                    const selected = item.value === selectedItem.value;\n                    return html`\n                      <option\n                        .title=${item.label()}\n                        value=${item.value}\n                        ?selected=${selected}\n                        jslog=${VisualLogging.item(Platform.StringUtilities.toKebabCase(item.value)).track({click: true})}\n                      >\n                        ${(selected && item.buttonLabel) ? item.buttonLabel() : item.label()}\n                      </option>\n                    `;\n                  })}\n                </optgroup>\n              `,\n            )}\n          </select>\n        </label>\n        <devtools-button\n          .disabled=${disabled}\n          .variant=${buttonVariant}\n          .iconName=${selectedItem.buttonIconName}\n          @click=${handleClick}\n          jslog=${VisualLogging.action(Actions.RecorderActions.REPLAY_RECORDING).track({click: true})}\n        >\n          ${i18nString(UIStrings.Replay)}\n        </devtools-button>\n      </div>`,\n    target,\n    { host: target },\n  );\n  // clang-format on\n};\n\n/**\n * This presenter combines built-in replay speeds and extensions into a single\n * select menu + a button.\n */\nexport class ReplaySection extends UI.Widget.Widget {\n  onStartReplay?: (speed: PlayRecordingSpeed, extension?: Extensions.ExtensionManager.Extension) => void;\n\n  #disabled = false;\n  #settings?: Models.RecorderSettings.RecorderSettings;\n  #replayExtensions: Extensions.ExtensionManager.Extension[] = [];\n  #view: typeof DEFAULT_VIEW;\n  #groups: Group[] = [];\n\n  constructor(element?: HTMLElement, view?: typeof DEFAULT_VIEW) {\n    super(element, {useShadowDom: true});\n    this.#view = view || DEFAULT_VIEW;\n    this.#groups = this.#computeGroups();\n  }\n\n  set settings(settings: Models.RecorderSettings.RecorderSettings|undefined) {\n    this.#settings = settings;\n    this.performUpdate();\n  }\n\n  set replayExtensions(replayExtensions: Extensions.ExtensionManager.Extension[]) {\n    this.#replayExtensions = replayExtensions;\n    this.#groups = this.#computeGroups();\n    this.performUpdate();\n  }\n\n  get disabled(): boolean {\n    return this.#disabled;\n  }\n\n  set disabled(disabled: boolean) {\n    this.#disabled = disabled;\n    this.performUpdate();\n  }\n\n  override wasShown(): void {\n    super.wasShown();\n    this.performUpdate();\n  }\n\n  override performUpdate(): void {\n    const selectedItem = this.#getSelectedItem();\n    this.#view(\n        {\n          disabled: this.#disabled,\n          groups: this.#groups,\n          selectedItem,\n          actionTitle:\n              Models.Tooltip.getTooltipForActions(selectedItem.label(), Actions.RecorderActions.REPLAY_RECORDING),\n          onButtonClick: () => this.#onStartReplay(),\n          onItemSelected: (item: string) => this.#onItemSelected(item),\n        },\n        undefined,\n        this.contentElement,\n    );\n  }\n\n  #computeGroups(): Group[] {\n    const groups: Group[] = [{\n      name: i18nString(UIStrings.speedGroup),\n      items: [\n        {\n          value: PlayRecordingSpeed.NORMAL,\n          buttonIconName: 'play',\n          buttonLabel: () => i18nString(UIStrings.ReplayNormalButtonLabel),\n          label: () => i18nString(UIStrings.ReplayNormalItemLabel),\n        },\n        {\n          value: PlayRecordingSpeed.SLOW,\n          buttonIconName: 'play',\n          buttonLabel: () => i18nString(UIStrings.ReplaySlowButtonLabel),\n          label: () => i18nString(UIStrings.ReplaySlowItemLabel),\n        },\n        {\n          value: PlayRecordingSpeed.VERY_SLOW,\n          buttonIconName: 'play',\n          buttonLabel: () => i18nString(UIStrings.ReplayVerySlowButtonLabel),\n          label: () => i18nString(UIStrings.ReplayVerySlowItemLabel),\n        },\n        {\n          value: PlayRecordingSpeed.EXTREMELY_SLOW,\n          buttonIconName: 'play',\n          buttonLabel: () => i18nString(UIStrings.ReplayExtremelySlowButtonLabel),\n          label: () => i18nString(UIStrings.ReplayExtremelySlowItemLabel),\n        },\n      ]\n    }];\n    if (this.#replayExtensions.length) {\n      groups.push({\n        name: i18nString(UIStrings.extensionGroup),\n        items: this.#replayExtensions.map((extension, idx) => {\n          return {\n            value: (REPLAY_EXTENSION_PREFIX + idx),\n            buttonIconName: 'play',\n            buttonLabel: () => extension.getName() as Platform.UIString.LocalizedString,\n            label: () => extension.getName() as Platform.UIString.LocalizedString,\n          };\n        }),\n      });\n    }\n    return groups;\n  }\n\n  #getSelectedItem(): Item {\n    const value = this.#settings?.replayExtension || this.#settings?.speed || '';\n    for (const group of this.#groups) {\n      for (const item of group.items) {\n        if (item.value === value) {\n          return item;\n        }\n      }\n    }\n    return this.#groups[0].items[0];\n  }\n\n  #onStartReplay(): void {\n    const value = this.#settings?.replayExtension || this.#settings?.speed || '';\n    if (value?.startsWith(REPLAY_EXTENSION_PREFIX)) {\n      const extensionIdx = Number(\n          value.substring(REPLAY_EXTENSION_PREFIX.length),\n      );\n      const extension = this.#replayExtensions[extensionIdx];\n      if (this.#settings) {\n        this.#settings.replayExtension = REPLAY_EXTENSION_PREFIX + extensionIdx;\n      }\n      if (this.onStartReplay) {\n        this.onStartReplay(PlayRecordingSpeed.NORMAL, extension);\n      }\n    } else if (this.onStartReplay) {\n      this.onStartReplay(this.#settings ? this.#settings.speed : PlayRecordingSpeed.NORMAL);\n    }\n    this.performUpdate();\n  }\n\n  #onItemSelected(item: string): void {\n    const speed = item as PlayRecordingSpeed;\n    if (this.#settings && speed) {\n      this.#settings.speed = speed;\n      this.#settings.replayExtension = '';\n    }\n\n    if (replaySpeedToMetricSpeedMap[speed]) {\n      Host.userMetrics.recordingReplaySpeed(replaySpeedToMetricSpeedMap[speed]);\n    }\n    this.performUpdate();\n  }\n}\n"]}