{"version":3,"file":"WebauthnPane.js","sourceRoot":"","sources":["../../../../../../front_end/panels/webauthn/WebauthnPane.ts"],"names":[],"mappings":"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","sourcesContent":["// Copyright 2020 The Chromium Authors\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\n\nimport '../../ui/legacy/legacy.js';\nimport '../../ui/legacy/components/data_grid/data_grid.js';\n\nimport * as Common from '../../core/common/common.js';\nimport * as Host from '../../core/host/host.js';\nimport * as i18n from '../../core/i18n/i18n.js';\nimport type * as Platform from '../../core/platform/platform.js';\nimport * as SDK from '../../core/sdk/sdk.js';\nimport * as Protocol from '../../generated/protocol.js';\nimport * as Buttons from '../../ui/components/buttons/buttons.js';\nimport * as Input from '../../ui/components/input/input.js';\nimport * as UI from '../../ui/legacy/legacy.js';\nimport * as Lit from '../../ui/lit/lit.js';\nimport * as VisualLogging from '../../ui/visual_logging/visual_logging.js';\n\nimport webauthnPaneStyles from './webauthnPane.css.js';\n\nconst {render, html, Directives: {ref, repeat, classMap}} = Lit;\nconst {widgetConfig} = UI.Widget;\n\nconst UIStrings = {\n  /**\n   * @description Label for button that allows user to download the private key related to a credential.\n   */\n  export: 'Export',\n  /**\n   * @description Label for an item to remove something\n   */\n  remove: 'Remove',\n  /**\n   * @description Label for empty credentials table.\n   * @example {navigator.credentials.create()} PH1\n   */\n  noCredentialsTryCallingSFromYour: 'No credentials. Try calling {PH1} from your website.',\n  /**\n   * @description Label for checkbox to toggle the virtual authenticator environment allowing user to interact with software-based virtual authenticators.\n   */\n  enableVirtualAuthenticator: 'Enable virtual authenticator environment',\n  /**\n   * @description Label for ID field for credentials.\n   */\n  id: 'ID',\n  /**\n   * @description Label for field that describes whether a credential is a resident credential.\n   */\n  isResident: 'Is Resident',\n  /**\n   * @description Label for credential field that represents the Relying Party ID that the credential is scoped to.\n   */\n  rpId: 'RP ID',\n  /**\n   * @description Label for a column in a table. A field/unique ID that represents the user a credential is mapped to.\n   */\n  userHandle: 'User Handle',\n  /**\n   * @description Label for signature counter field for credentials which represents the number of successful assertions.\n   * See https://w3c.github.io/webauthn/#signature-counter.\n   */\n  signCount: 'Signature Count',\n  /**\n   * @description Label for column with actions for credentials.\n   */\n  actions: 'Actions',\n  /**\n   * @description Title for the table that holds the credentials that a authenticator has registered.\n   */\n  credentials: 'Credentials',\n  /**\n   * @description Text that shows before the virtual environment is enabled.\n   */\n  noAuthenticator: 'No authenticator set up',\n  /**\n   * @description That that shows before virtual environment is enabled explaining the panel.\n   */\n  useWebauthnForPhishingresistant: 'Use WebAuthn for phishing-resistant authentication.',\n  /**\n   * @description Title for section of interface that allows user to add a new virtual authenticator.\n   */\n  newAuthenticator: 'New authenticator',\n  /**\n   * @description Text for security or network protocol\n   */\n  protocol: 'Protocol',\n  /**\n   * @description Label for input to select which transport option to use on virtual authenticators, e.g. USB or Bluetooth.\n   */\n  transport: 'Transport',\n  /**\n   * @description Label for checkbox that toggles resident key support on virtual authenticators.\n   */\n  supportsResidentKeys: 'Supports resident keys',\n  /**\n   * @description Label for checkbox that toggles large blob support on virtual authenticators. Large blobs are opaque data associated\n   * with a WebAuthn credential that a website can store, like an SSH certificate or a symmetric encryption key.\n   * See https://w3c.github.io/webauthn/#sctn-large-blob-extension\n   */\n  supportsLargeBlob: 'Supports large blob',\n  /**\n   * @description Text to add something\n   */\n  add: 'Add',\n  /**\n   * @description Label for radio button that toggles whether an authenticator is active.\n   */\n  active: 'Active',\n  /**\n   * @description Title for button that enables user to customize name of authenticator.\n   */\n  editName: 'Edit name',\n  /**\n   * @description Placeholder for the input box to customize name of authenticator.\n   */\n  enterNewName: 'Enter new name',\n  /**\n   * @description Title for button that enables user to save name of authenticator after editing it.\n   */\n  saveName: 'Save name',\n  /**\n   * @description Title for a user-added virtual authenticator which is uniquely identified with its AUTHENTICATORID.\n   * @example {8c7873be-0b13-4996-a794-1521331bbd96} PH1\n   */\n  authenticatorS: 'Authenticator {PH1}',\n  /**\n   * @description Name for generated file which user can download. A private key is a secret code which enables encoding and decoding of a credential. .pem is the file extension.\n   */\n  privateKeypem: 'Private key.pem',\n  /**\n   * @description Label for field that holds an authenticator's universally unique identifier (UUID).\n   */\n  uuid: 'UUID',\n  /**\n   * @description Label for checkbox that toggles user verification support on virtual authenticators.\n   */\n  supportsUserVerification: 'Supports user verification',\n  /**\n   * @description Text in Timeline indicating that input has happened recently\n   */\n  yes: 'Yes',\n  /**\n   * @description Text in Timeline indicating that input has not happened recently\n   */\n  no: 'No',\n  /**\n   * @description Title of radio button that sets an authenticator as active.\n   * @example {Authenticator ABCDEF} PH1\n   */\n  setSAsTheActiveAuthenticator: 'Set {PH1} as the active authenticator',\n} as const;\nconst str_ = i18n.i18n.registerUIStrings('panels/webauthn/WebauthnPane.ts', UIStrings);\nconst i18nString = i18n.i18n.getLocalizedString.bind(undefined, str_);\nconst i18nTemplate = Lit.i18nTemplate.bind(undefined, str_);\n\nconst WEB_AUTHN_EXPLANATION_URL =\n    'https://developer.chrome.com/docs/devtools/webauthn' as Platform.DevToolsPath.UrlString;\n\nfunction renderCredentialsDataGrid(\n    authenticatorId: Protocol.WebAuthn.AuthenticatorId, credentials: Protocol.WebAuthn.Credential[],\n    onExport: (credential: Protocol.WebAuthn.Credential) => void,\n    onRemove: (credentialId: string) => void): Lit.TemplateResult {\n  // clang-format off\n  return html`\n    <devtools-data-grid name=${i18nString(UIStrings.credentials)} inline striped>\n      <table>\n        <thead>\n          <tr>\n            <th id=\"credentialId\" weight=\"24\" text-overflow=\"ellipsis\">${i18nString(UIStrings.id)}</th>\n            <th id=\"isResidentCredential\" type=\"boolean\" weight=\"10\">${i18nString(UIStrings.isResident)}</th>\n            <th id=\"rpId\" weight=\"16.5\">${i18nString(UIStrings.rpId)}</th>\n            <th id=\"userHandle\" weight=\"16.5\">${i18nString(UIStrings.userHandle)}</th>\n            <th id=\"signCount\" weight=\"16.5\">${i18nString(UIStrings.signCount)}</th>\n            <th id=\"actions\" weight=\"16.5\">${i18nString(UIStrings.actions)}</th>\n          </tr>\n        </thead>\n        <tbody>\n        ${credentials.length ? repeat(credentials, c => c.credentialId, credential => html`\n          <tr>\n            <td>${credential.credentialId}</td>\n            <td>${credential.isResidentCredential}</td>\n            <td>${credential.rpId}</td>\n            <td>${credential.userHandle}</td>\n            <td>${credential.signCount}</td>\n            <td>\n              <devtools-button .variant=${Buttons.Button.Variant.OUTLINED}\n                  part=\"action-button\"\n                  @click=${() => onExport(credential)}\n                  .jslogContext=${'webauthn.export-credential'}>\n                ${i18nString(UIStrings.export)}\n              </devtools-button>\n              <devtools-button .variant=${Buttons.Button.Variant.OUTLINED}\n                  part=\"action-button\"\n                  @click=${() => onRemove(credential.credentialId)}\n                  .jslogContext=${'webauthn.remove-credential'}>\n                ${i18nString(UIStrings.remove)}\n              </devtools-button>\n            </td>\n          </tr>`) : html`\n          <tr>\n            <td class=\"center\" colspan=6>\n              ${i18nTemplate(UIStrings.noCredentialsTryCallingSFromYour,\n                            {PH1: html`<span class=\"code\">navigator.credentials.create()</span>`})}\n            </td>\n          </tr>`}\n        </tbody>\n      </table>\n    </devtools-data-grid>`;\n  // clang-format on\n}\n\ntype AvailableAuthenticatorOptions = Protocol.WebAuthn.VirtualAuthenticatorOptions&{\n  active: boolean,\n  authenticatorId: Protocol.WebAuthn.AuthenticatorId,\n};\n\n// We extrapolate this variable as otherwise git detects a private key, even though we\n// perform string manipulation. If we extract the name, then the regex doesn't match\n// and we can upload as expected.\nconst PRIVATE_NAME = 'PRIVATE';\nconst PRIVATE_KEY_HEADER = `-----BEGIN ${PRIVATE_NAME} KEY-----\n`;\nconst PRIVATE_KEY_FOOTER = `-----END ${PRIVATE_NAME} KEY-----`;\n\nconst PROTOCOL_AUTHENTICATOR_VALUES: Protocol.EnumerableEnum<typeof Protocol.WebAuthn.AuthenticatorProtocol> = {\n  Ctap2: Protocol.WebAuthn.AuthenticatorProtocol.Ctap2,\n  U2f: Protocol.WebAuthn.AuthenticatorProtocol.U2f,\n};\n\ninterface Authenticator {\n  name: string;\n  options: Protocol.WebAuthn.VirtualAuthenticatorOptions;\n  credentials: Protocol.WebAuthn.Credential[];\n}\n\ninterface Authenticator {\n  name: string;\n  options: Protocol.WebAuthn.VirtualAuthenticatorOptions;\n  credentials: Protocol.WebAuthn.Credential[];\n}\n\ninterface ViewInput {\n  enabled: boolean;\n  onToggleEnabled: () => void;\n  authenticators: Map<Protocol.WebAuthn.AuthenticatorId, Authenticator>;\n  activeAuthenticatorId: Protocol.WebAuthn.AuthenticatorId|null;\n  editingAuthenticatorId: Protocol.WebAuthn.AuthenticatorId|null;\n  newAuthenticatorOptions: Protocol.WebAuthn.VirtualAuthenticatorOptions;\n  internalTransportAvailable: boolean;\n  updateNewAuthenticatorOptions: (change: Partial<Protocol.WebAuthn.VirtualAuthenticatorOptions>) => void;\n  addAuthenticator: () => void;\n  onActivateAuthenticator: (id: Protocol.WebAuthn.AuthenticatorId) => void;\n  onEditName: (id: Protocol.WebAuthn.AuthenticatorId) => void;\n  onSaveName: (id: Protocol.WebAuthn.AuthenticatorId, name: string) => void;\n  onRemoveAuthenticator: (id: Protocol.WebAuthn.AuthenticatorId) => void;\n  onExportCredential: (credential: Protocol.WebAuthn.Credential) => void;\n  onRemoveCredential: (id: Protocol.WebAuthn.AuthenticatorId, credentialId: string) => void;\n}\n\ninterface ViewOutput {\n  revealSection: Map<string, () => void>;\n}\n\ntype ViewFunction = (input: ViewInput, output: ViewOutput, target: HTMLElement) => void;\n\nfunction renderToolbar(enabled: boolean, onToggle: () => void): Lit.TemplateResult {\n  const enableCheckboxTitle = i18nString(UIStrings.enableVirtualAuthenticator);\n  // clang-format off\n  return html`\n    <div class=\"webauthn-toolbar-container\" jslog=${VisualLogging.toolbar()} role=\"toolbar\">\n      <devtools-toolbar class=\"webauthn-toolbar\" role=\"presentation\">\n        <devtools-checkbox title=${enableCheckboxTitle}\n            @click=${onToggle}\n            .jslogContext=${'virtual-authenticators'}\n            .checked=${enabled}>\n          ${enableCheckboxTitle}\n        </devtools-checkbox>\n      </devtools-toolbar>\n    </div>`;\n  // clang-format on\n}\n\nfunction renderLearnMoreView(): Lit.TemplateResult {\n  // clang-format off\n  return html`\n    <devtools-widget class=\"learn-more\" .widgetConfig=${widgetConfig(UI.EmptyWidget.EmptyWidget, {\n        header: i18nString(UIStrings.noAuthenticator),\n        text: i18nString(UIStrings.useWebauthnForPhishingresistant),\n        link: WEB_AUTHN_EXPLANATION_URL})}>\n    </devtools-widget>`;\n  // clang-format on\n}\n\nfunction renderNewAuthenticatorSection(\n    options: Protocol.WebAuthn.VirtualAuthenticatorOptions, internalTransportAvailable: boolean,\n    onUpdate: (change: Partial<Protocol.WebAuthn.VirtualAuthenticatorOptions>) => void,\n    onAdd: () => void): Lit.TemplateResult {\n  const isCtap2 = options.protocol === Protocol.WebAuthn.AuthenticatorProtocol.Ctap2;\n  // clang-format off\n  return html`\n    <div class=\"new-authenticator-container\">\n      <label class=\"new-authenticator-title\">\n        ${i18nString(UIStrings.newAuthenticator)}\n      </label>\n      <div class=\"new-authenticator-form\" jslog=${VisualLogging.section('new-authenticator')}>\n        <div class=\"authenticator-option\">\n          <label class=\"authenticator-option-label\" for=\"protocol\">\n            ${i18nString(UIStrings.protocol)}\n          </label>\n          <select id=\"protocol\" jslog=${VisualLogging.dropDown('protocol').track({change: true})}\n              value=${options.protocol}\n              @change=${(e:Event) => onUpdate({protocol: (e.target as HTMLSelectElement).value as Protocol.WebAuthn.AuthenticatorProtocol})}>\n            ${Object.values(PROTOCOL_AUTHENTICATOR_VALUES).sort().map(option => html`\n              <option value=${option} jslog=${VisualLogging.item(option).track({click: true})}>\n                ${option}\n              </option>`)}\n          </select>\n        </div>\n        <div class=\"authenticator-option\">\n          <label for=\"transport\" class=\"authenticator-option-label\">\n            ${i18nString(UIStrings.transport)}\n          </label>\n          <select id=\"transport\"\n              value=${options.transport}\n              jslog=${VisualLogging.dropDown('transport').track({change: true})}\n              @change=${(e: Event) => onUpdate({transport: (e.target as HTMLSelectElement).value as Protocol.WebAuthn.AuthenticatorTransport})}>\n            ${[\n              Protocol.WebAuthn.AuthenticatorTransport.Usb,\n              Protocol.WebAuthn.AuthenticatorTransport.Ble,\n              Protocol.WebAuthn.AuthenticatorTransport.Nfc,\n                ...(isCtap2 ? [Protocol.WebAuthn.AuthenticatorTransport.Internal] : [])\n            ].map(option => html`\n                <option value=${option} jslog=${VisualLogging.item(option).track({click: true})}\n                        .selected=${options.transport === option}\n                        .disabled=${!internalTransportAvailable\n                            &&  option === Protocol.WebAuthn.AuthenticatorTransport.Internal}>\n                  ${option}\n                </option>`)\n            }\n          </select>\n        </div>\n        <div class=\"authenticator-option\">\n          <label for=\"resident-key\" class=\"authenticator-option-label\">\n            ${i18nString(UIStrings.supportsResidentKeys)}\n          </label>\n          <input id=\"resident-key\" class=\"authenticator-option-checkbox\" type=\"checkbox\"\n              jslog=${VisualLogging.toggle('resident-key').track({change: true})}\n              @change=${(e:Event) => onUpdate({hasResidentKey: (e.target as HTMLInputElement).checked})}\n              .checked=${Boolean(options.hasResidentKey && isCtap2)} .disabled=${!isCtap2}>\n        </div>\n        <div class=\"authenticator-option\">\n          <label for=\"user-verification\" class=\"authenticator-option-label\">\n            ${i18nString(UIStrings.supportsUserVerification)}\n          </label>\n          <input id=\"user-verification\" class=\"authenticator-option-checkbox\" type=\"checkbox\"\n              jslog=${VisualLogging.toggle('user-verification').track({change: true})}\n              @change=${(e: Event) => onUpdate({hasUserVerification: (e.target as HTMLInputElement).checked})}\n              .checked=${Boolean(options.hasUserVerification && isCtap2)}\n              .disabled=${!isCtap2}>\n        </div>\n        <div class=\"authenticator-option\">\n          <label for=\"large-blob\" class=\"authenticator-option-label\">\n            ${i18nString(UIStrings.supportsLargeBlob)}\n          </label>\n          <input id=\"large-blob\" class=\"authenticator-option-checkbox\" type=\"checkbox\"\n              jslog=${VisualLogging.toggle('large-blob').track({change: true})}\n              @change=${(e: Event) => onUpdate({hasLargeBlob: (e.target as HTMLInputElement).checked})}\n              .checked=${Boolean(options.hasLargeBlob && isCtap2 && options.hasResidentKey)}\n              .disabled=${!options.hasResidentKey || !isCtap2}>\n        </div>\n        <div class=\"authenticator-option\">\n          <div class=\"authenticator-option-label\"></div>\n          <devtools-button @click=${onAdd}\n              id=\"add-authenticator\"\n              .jslogContext=${'webauthn.add-authenticator'}\n              .variant=${Buttons.Button.Variant.OUTLINED}>\n            ${i18nString(UIStrings.add)}\n          </devtools-button>\n        </div>\n      </div>\n    </div>`;\n}\n\nfunction renderAuthenticatorSection(\n    authenticatorId: Protocol.WebAuthn.AuthenticatorId,\n    authenticator: Authenticator,  active: boolean, editing: boolean,\n    onActivate: () => void, onEditName: () => void, onSaveName: (name: string) => void, onRemove: () => void,\n    onExportCredential : (credential: Protocol.WebAuthn.Credential) => void,\n    onRemoveCredential : (credentialId: string) => void,\n    output: ViewOutput): Lit.TemplateResult {\n  function revealSection(section: Element|undefined): void {\n    if (!section) {\n      return;\n    }\n    const mediaQueryList = window.matchMedia('(prefers-reduced-motion: reduce)');\n    const prefersReducedMotion = mediaQueryList.matches;\n    section.scrollIntoView({block: 'nearest', behavior: prefersReducedMotion ? 'auto' : 'smooth'});\n  }\n  // clang-format off\n  return html`\n    <div class=\"authenticator-section\" data-authenticator-id=${authenticatorId}\n         jslog=${VisualLogging.section('authenticator')}\n          ${ref(e => { output.revealSection.set(authenticatorId, revealSection.bind(null, e));})}>\n      <div class=\"authenticator-section-header\">\n        <div class=\"authenticator-section-title\" role=\"heading\" aria-level=\"2\">\n          <devtools-toolbar class=\"edit-name-toolbar\">\n            <devtools-button title=${i18nString(UIStrings.editName)}\n                class=${classMap({hidden: editing})}\n                @click=${onEditName}\n                .iconName=${'edit'} .variant=${Buttons.Button.Variant.TOOLBAR}\n                .jslogContext=${'edit-name'}></devtools-button>\n            <devtools-button title=${i18nString(UIStrings.saveName)}\n                @click=${(e: Event) => onSaveName(((e.target as HTMLElement).parentElement?.nextSibling as HTMLInputElement).value)}\n                .iconName=${'checkmark'} .variant=${Buttons.Button.Variant.TOOLBAR}\n                class=${classMap({hidden: !editing})}\n                .jslogContext=${'save-name'}></devtools-button>\n          </devtools-toolbar>\n          <input class=\"authenticator-name-field\"\n              placeholder=${i18nString(UIStrings.enterNewName)}\n              jslog=${VisualLogging.textField('name').track({keydown: 'Enter', change: true})}\n              value=${i18nString(UIStrings.authenticatorS, {PH1: authenticator.name})} .disabled=${!editing}\n              ${ref(e => { if(e instanceof HTMLInputElement && editing) { e.focus(); } })}\n              @focusout=${(e: Event) => onSaveName((e.target as HTMLInputElement).value)}\n              @keydown=${(event: KeyboardEvent) => {\n                if (event.key === 'Enter') {\n                  onSaveName((event.target as HTMLInputElement).value);\n                }\n              }}>\n        </div>\n        <div class=\"active-button-container\">\n          <label title=${i18nString(UIStrings.setSAsTheActiveAuthenticator, {PH1: authenticator.name})}>\n            <input type=\"radio\" .checked=${active} @change=${(e:Event) => { if ((e.target as HTMLInputElement).checked) { onActivate(); }}}\n                  jslog=${VisualLogging.toggle('webauthn.active-authenticator').track({change: true})}>\n            ${i18nString(UIStrings.active)}\n          </label>\n        </div>\n        <button class=\"text-button\" @click=${onRemove}\n            jslog=${VisualLogging.action('webauthn.remove-authenticator').track({click: true})}>\n          ${i18nString(UIStrings.remove)}\n        </button>\n      </div>\n      ${renderAuthenticatorFields(authenticatorId, authenticator.options)}\n      <div class=\"credentials-title\">${i18nString(UIStrings.credentials)}</div>\n      ${renderCredentialsDataGrid(authenticatorId, authenticator.credentials, onExportCredential, onRemoveCredential)}\n      <div class=\"divider\"></div>\n    </div>`;\n  // clang-format on\n}\n\n/**\n * Creates the fields describing the authenticator in the front end.\n */\nfunction renderAuthenticatorFields(\n    authenticatorId: string, options: Protocol.WebAuthn.VirtualAuthenticatorOptions): Lit.TemplateResult {\n  // clang-format off\n  return html`\n    <div class=\"authenticator-fields\">\n      <div class=\"authenticator-field\">\n        <label class=\"authenticator-option-label\">${i18nString(UIStrings.uuid)}</label>\n        <div class=\"authenticator-field-value\">${authenticatorId}</div>\n      </div>\n      <div class=\"authenticator-field\">\n        <label class=\"authenticator-option-label\">${i18nString(UIStrings.protocol)}</label>\n        <div class=\"authenticator-field-value\">${options.protocol}</div>\n      </div>\n      <div class=\"authenticator-field\">\n        <label class=\"authenticator-option-label\">${i18nString(UIStrings.transport)}</label>\n        <div class=\"authenticator-field-value\">${options.transport}</div>\n      </div>\n      <div class=\"authenticator-field\">\n        <label class=\"authenticator-option-label\">\n          ${i18nString(UIStrings.supportsResidentKeys)}\n        </label>\n        <div class=\"authenticator-field-value\">\n          ${options.hasResidentKey ? i18nString(UIStrings.yes) : i18nString(UIStrings.no)}\n        </div>\n      </div>\n      <div class=\"authenticator-field\">\n        <label class=\"authenticator-option-label\">\n          ${i18nString(UIStrings.supportsLargeBlob)}\n        </label>\n        <div class=\"authenticator-field-value\">\n          ${options.hasLargeBlob ? i18nString(UIStrings.yes) : i18nString(UIStrings.no)}\n        </div>\n      </div>\n      <div class=\"authenticator-field\">\n        <label class=\"authenticator-option-label\">\n          ${i18nString(UIStrings.supportsUserVerification)}\n        </label>\n        <div class=\"authenticator-field-value\">\n          ${options.hasUserVerification ? i18nString(UIStrings.yes) : i18nString(UIStrings.no)}\n        </div>\n      </div>\n    </div>`;\n  // clang-format on\n}\n\nexport const DEFAULT_VIEW: ViewFunction = (input, output, target) => {\n  // clang-format off\n  render(html`\n    <style>${Input.checkboxStyles}</style>\n    <style>${webauthnPaneStyles}</style>\n    <div class=\"webauthn-pane flex-auto ${classMap({enabled: input.enabled})}\">\n      ${renderToolbar(input.enabled, input.onToggleEnabled)}\n      <div class=\"authenticators-view\">\n         ${repeat([...input.authenticators.entries()],\n                  ([id]) => id,\n                  ([id, authenticator]) => renderAuthenticatorSection(\n                      id, authenticator,\n                      input.activeAuthenticatorId === id,\n                      input.editingAuthenticatorId === id,\n                      input.onActivateAuthenticator.bind(input, id),\n                      input.onEditName.bind(input, id),\n                      input.onSaveName.bind(input, id),\n                      input.onRemoveAuthenticator.bind(input, id),\n                      input.onExportCredential,\n                      input.onRemoveCredential.bind(input, id),\n                      output))}\n      </div>\n      ${renderLearnMoreView()}\n      ${renderNewAuthenticatorSection(\n          input.newAuthenticatorOptions, input.internalTransportAvailable,  input.updateNewAuthenticatorOptions, input.addAuthenticator)}\n    </div>`,\n    target);\n  // clang-format on\n};\n\nexport class WebauthnPaneImpl extends UI.Panel.Panel implements\n    SDK.TargetManager.SDKModelObserver<SDK.WebAuthnModel.WebAuthnModel> {\n  async #addAuthenticator(options: Protocol.WebAuthn.VirtualAuthenticatorOptions):\n      Promise<Protocol.WebAuthn.AuthenticatorId> {\n    if (!this.#model) {\n      throw new Error('WebAuthn model is not available.');\n    }\n\n    const authenticatorId = await this.#model.addAuthenticator(options);\n    const userFriendlyName = authenticatorId.slice(-5);  // User friendly name defaults to last 5 chars of UUID.\n    this.#authenticators.set(authenticatorId, {\n      name: userFriendlyName,\n      options,\n      credentials: [],\n    });\n    this.requestUpdate();\n    this.#model.addEventListener(\n        SDK.WebAuthnModel.Events.CREDENTIAL_ADDED, this.#addCredential.bind(this, authenticatorId));\n    this.#model.addEventListener(\n        SDK.WebAuthnModel.Events.CREDENTIAL_ASSERTED, this.#updateCredential.bind(this, authenticatorId));\n    this.#model.addEventListener(\n        SDK.WebAuthnModel.Events.CREDENTIAL_UPDATED, this.#updateCredential.bind(this, authenticatorId));\n    this.#model.addEventListener(\n        SDK.WebAuthnModel.Events.CREDENTIAL_DELETED, this.#deleteCredential.bind(this, authenticatorId));\n    return authenticatorId;\n  }\n\n  #activeAuthId: Protocol.WebAuthn.AuthenticatorId|null = null;\n  #editingAuthId: Protocol.WebAuthn.AuthenticatorId|null = null;\n  #hasBeenEnabled = false;\n  readonly #authenticators = new Map<Protocol.WebAuthn.AuthenticatorId, Authenticator>();\n  #enabled = false;\n  readonly #availableAuthenticatorSetting: Common.Settings.Setting<AvailableAuthenticatorOptions[]>;\n  #model?: SDK.WebAuthnModel.WebAuthnModel;\n  #newAuthenticatorOptions: Protocol.WebAuthn.VirtualAuthenticatorOptions = {\n    protocol: Protocol.WebAuthn.AuthenticatorProtocol.Ctap2,\n    ctap2Version: Protocol.WebAuthn.Ctap2Version.Ctap2_1,\n    transport: Protocol.WebAuthn.AuthenticatorTransport.Usb,\n    hasResidentKey: false,\n    hasUserVerification: false,\n    hasLargeBlob: false,\n    automaticPresenceSimulation: true,\n    isUserVerified: true,\n  };\n  #hasInternalAuthenticator = false;\n  #isEnabling?: Promise<void>;\n  #view: ViewFunction;\n  #viewOutput: ViewOutput = {\n    revealSection: new Map(),\n  };\n\n  constructor(view = DEFAULT_VIEW) {\n    super('webauthn');\n\n    this.#view = view;\n\n    SDK.TargetManager.TargetManager.instance().observeModels(SDK.WebAuthnModel.WebAuthnModel, this, {scoped: true});\n\n    this.#availableAuthenticatorSetting =\n        Common.Settings.Settings.instance().createSetting<AvailableAuthenticatorOptions[]>(\n            'webauthn-authenticators', []);\n    this.#updateInternalTransportAvailability();\n\n    this.performUpdate();\n  }\n\n  override performUpdate(): void {\n    const viewInput = {\n      enabled: this.#enabled,\n      onToggleEnabled: this.#handleCheckboxToggle.bind(this),\n      authenticators: this.#authenticators,\n      activeAuthenticatorId: this.#activeAuthId,\n      editingAuthenticatorId: this.#editingAuthId,\n      newAuthenticatorOptions: this.#newAuthenticatorOptions,\n      internalTransportAvailable: !this.#hasInternalAuthenticator,\n      updateNewAuthenticatorOptions: this.#updateNewAuthenticatorSectionOptions.bind(this),\n      addAuthenticator: this.#handleAddAuthenticatorButton.bind(this),\n      onActivateAuthenticator: this.#setActiveAuthenticator.bind(this),\n      onEditName: this.#handleEditNameButton.bind(this),\n      onSaveName: this.#handleSaveNameButton.bind(this),\n      onRemoveAuthenticator: this.removeAuthenticator.bind(this),\n      onExportCredential: this.#exportCredential.bind(this),\n      onRemoveCredential: this.#removeCredential.bind(this),\n    };\n    this.#view(viewInput, this.#viewOutput, this.contentElement);\n  }\n\n  modelAdded(model: SDK.WebAuthnModel.WebAuthnModel): void {\n    if (model.target() === model.target().outermostTarget()) {\n      this.#model = model;\n    }\n  }\n\n  modelRemoved(model: SDK.WebAuthnModel.WebAuthnModel): void {\n    if (model.target() === model.target().outermostTarget()) {\n      this.#model = undefined;\n    }\n  }\n\n  async #loadInitialAuthenticators(): Promise<void> {\n    let activeAuthenticatorId: Protocol.WebAuthn.AuthenticatorId|null = null;\n    const availableAuthenticators = this.#availableAuthenticatorSetting.get();\n    for (const options of availableAuthenticators) {\n      if (!this.#model) {\n        continue;\n      }\n\n      const authenticatorId = await this.#addAuthenticator(options);\n      // Update the authenticatorIds in the options.\n      options.authenticatorId = authenticatorId;\n      if (options.active) {\n        activeAuthenticatorId = authenticatorId;\n      }\n    }\n\n    // Update the settings to reflect the new authenticatorIds.\n    this.#availableAuthenticatorSetting.set(availableAuthenticators);\n    if (activeAuthenticatorId) {\n      void this.#setActiveAuthenticator(activeAuthenticatorId);\n    }\n  }\n\n  override async ownerViewDisposed(): Promise<void> {\n    this.#enabled = false;\n    await this.#setVirtualAuthEnvEnabled(false);\n  }\n\n  #addCredential(authenticatorId: Protocol.WebAuthn.AuthenticatorId, {\n    data: event,\n  }: Common.EventTarget.EventTargetEvent<Protocol.WebAuthn.CredentialAddedEvent>): void {\n    const authenticator = this.#authenticators.get(authenticatorId);\n    if (!authenticator) {\n      return;\n    }\n    authenticator.credentials.push(event.credential);\n    this.requestUpdate();\n  }\n\n  #updateCredential(\n      authenticatorId: Protocol.WebAuthn.AuthenticatorId,\n      {\n        data: event,\n      }: Common.EventTarget\n          .EventTargetEvent<Protocol.WebAuthn.CredentialAssertedEvent&Protocol.WebAuthn.CredentialUpdatedEvent>): void {\n    const authenticator = this.#authenticators.get(authenticatorId);\n    if (!authenticator) {\n      return;\n    }\n    const credential =\n        authenticator.credentials.find(credential => credential.credentialId === event.credential.credentialId);\n    if (!credential) {\n      return;\n    }\n    Object.assign(credential, event.credential);\n    this.requestUpdate();\n  }\n\n  #deleteCredential(authenticatorId: Protocol.WebAuthn.AuthenticatorId, {\n    data: event,\n  }: Common.EventTarget.EventTargetEvent<Protocol.WebAuthn.CredentialDeletedEvent>): void {\n    const authenticator = this.#authenticators.get(authenticatorId);\n    if (!authenticator) {\n      return;\n    }\n    const credentialIndex =\n        authenticator.credentials.findIndex(credential => credential.credentialId === event.credentialId);\n    if (credentialIndex < 0) {\n      return;\n    }\n    authenticator.credentials.splice(credentialIndex, 1);\n    this.requestUpdate();\n  }\n\n  async #setVirtualAuthEnvEnabled(enable: boolean): Promise<void> {\n    await this.#isEnabling;\n    this.#isEnabling = new Promise<void>(async (resolve: (value: void) => void) => {\n      if (enable && !this.#hasBeenEnabled) {\n        // Ensures metric is only tracked once per session.\n        Host.userMetrics.actionTaken(Host.UserMetrics.Action.VirtualAuthenticatorEnvironmentEnabled);\n        this.#hasBeenEnabled = true;\n      }\n      if (this.#model) {\n        await this.#model.setVirtualAuthEnvEnabled(enable);\n      }\n\n      if (enable) {\n        await this.#loadInitialAuthenticators();\n      } else {\n        this.#removeAuthenticatorSections();\n      }\n\n      this.#isEnabling = undefined;\n      this.#enabled = enable;\n      this.requestUpdate();\n      resolve();\n    });\n  }\n\n  #removeAuthenticatorSections(): void {\n    this.#authenticators.clear();\n  }\n\n  #handleCheckboxToggle(): void {\n    void this.#setVirtualAuthEnvEnabled(!this.#enabled);\n  }\n\n  #updateNewAuthenticatorSectionOptions(change: Partial<Protocol.WebAuthn.VirtualAuthenticatorOptions>): void {\n    Object.assign(this.#newAuthenticatorOptions, change);\n    this.requestUpdate();\n  }\n\n  #updateInternalTransportAvailability(): void {\n    this.#hasInternalAuthenticator = Boolean(this.#availableAuthenticatorSetting.get().find(\n        authenticator => authenticator.transport === Protocol.WebAuthn.AuthenticatorTransport.Internal));\n    if (this.#hasInternalAuthenticator &&\n        this.#newAuthenticatorOptions.transport === Protocol.WebAuthn.AuthenticatorTransport.Internal) {\n      this.#newAuthenticatorOptions.transport = Protocol.WebAuthn.AuthenticatorTransport.Nfc;\n    }\n    this.requestUpdate();\n  }\n\n  async #handleAddAuthenticatorButton(): Promise<void> {\n    const options = {...this.#newAuthenticatorOptions};\n    if (this.#model) {\n      const authenticatorId = await this.#addAuthenticator(options);\n      this.#activeAuthId = authenticatorId;  // Newly added authenticator is automatically set as active.\n      const availableAuthenticators = this.#availableAuthenticatorSetting.get();\n      availableAuthenticators.push({authenticatorId, active: true, ...options});\n      this.#availableAuthenticatorSetting.set(\n          availableAuthenticators.map(a => ({...a, active: a.authenticatorId === authenticatorId})));\n      this.#updateInternalTransportAvailability();\n      await this.updateComplete;\n      this.#viewOutput.revealSection.get(authenticatorId)?.();\n    }\n  }\n\n  #exportCredential(credential: Protocol.WebAuthn.Credential): void {\n    let pem = PRIVATE_KEY_HEADER;\n    for (let i = 0; i < credential.privateKey.length; i += 64) {\n      pem += credential.privateKey.substring(i, i + 64) + '\\n';\n    }\n    pem += PRIVATE_KEY_FOOTER;\n\n    /* eslint-disable-next-line @devtools/no-imperative-dom-api */\n    const link = document.createElement('a');\n    link.download = i18nString(UIStrings.privateKeypem);\n    link.href = 'data:application/x-pem-file,' + encodeURIComponent(pem);\n    link.click();\n  }\n\n  #removeCredential(authenticatorId: Protocol.WebAuthn.AuthenticatorId, credentialId: string): void {\n    const authenticator = this.#authenticators.get(authenticatorId);\n    if (!authenticator) {\n      return;\n    }\n\n    const authenticatorIndex =\n        authenticator.credentials.findIndex(credential => credential.credentialId === credentialId);\n    if (authenticatorIndex < 0) {\n      return;\n    }\n    authenticator.credentials.splice(authenticatorIndex, 1);\n    this.requestUpdate();\n\n    if (this.#model) {\n      void this.#model.removeCredential(authenticatorId, credentialId);\n    }\n  }\n\n  #handleEditNameButton(authenticatorId: Protocol.WebAuthn.AuthenticatorId): void {\n    this.#editingAuthId = authenticatorId;\n    this.requestUpdate();\n  }\n\n  #handleSaveNameButton(authenticatorId: Protocol.WebAuthn.AuthenticatorId, name: string): void {\n    const authenticator = this.#authenticators.get(authenticatorId);\n    if (!authenticator) {\n      return;\n    }\n    authenticator.name = name;\n    this.#editingAuthId = null;\n    this.requestUpdate();\n  }\n\n  /**\n   * Removes both the authenticator and its respective UI element.\n   */\n  removeAuthenticator(authenticatorId: Protocol.WebAuthn.AuthenticatorId): void {\n    this.#authenticators.delete(authenticatorId);\n    this.requestUpdate();\n    if (this.#model) {\n      void this.#model.removeAuthenticator(authenticatorId);\n    }\n\n    // Update available authenticator setting.\n    const prevAvailableAuthenticators = this.#availableAuthenticatorSetting.get();\n    const newAvailableAuthenticators = prevAvailableAuthenticators.filter(a => a.authenticatorId !== authenticatorId);\n    this.#availableAuthenticatorSetting.set(newAvailableAuthenticators);\n\n    if (this.#activeAuthId === authenticatorId) {\n      const availableAuthenticatorIds = Array.from(this.#authenticators.keys());\n      if (availableAuthenticatorIds.length) {\n        void this.#setActiveAuthenticator(availableAuthenticatorIds[0]);\n      } else {\n        this.#activeAuthId = null;\n      }\n    }\n    this.#updateInternalTransportAvailability();\n  }\n\n  /**\n   * Sets the given authenticator as active.\n   * Note that a newly added authenticator will automatically be set as active.\n   */\n  async #setActiveAuthenticator(authenticatorId: Protocol.WebAuthn.AuthenticatorId): Promise<void> {\n    await this.#clearActiveAuthenticator();\n    if (this.#model) {\n      await this.#model.setAutomaticPresenceSimulation(authenticatorId, true);\n    }\n    this.#activeAuthId = authenticatorId;\n\n    const prevAvailableAuthenticators = this.#availableAuthenticatorSetting.get();\n    const newAvailableAuthenticators =\n        prevAvailableAuthenticators.map(a => ({...a, active: a.authenticatorId === authenticatorId}));\n    this.#availableAuthenticatorSetting.set(newAvailableAuthenticators);\n\n    this.requestUpdate();\n  }\n\n  async #clearActiveAuthenticator(): Promise<void> {\n    if (this.#activeAuthId && this.#model) {\n      await this.#model.setAutomaticPresenceSimulation(this.#activeAuthId, false);\n    }\n    this.#activeAuthId = null;\n    this.requestUpdate();\n  }\n}\n"]}