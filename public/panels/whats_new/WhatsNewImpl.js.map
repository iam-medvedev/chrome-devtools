{"version":3,"file":"WhatsNewImpl.js","sourceRoot":"","sources":["../../../../../../front_end/panels/whats_new/WhatsNewImpl.ts"],"names":[],"mappings":"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","sourcesContent":["// Copyright 2024 The Chromium Authors. All rights reserved.\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\n\nimport * as Common from '../../core/common/common.js';\nimport * as Host from '../../core/host/host.js';\nimport type * as Platform from '../../core/platform/platform.js';\nimport * as UI from '../../ui/legacy/legacy.js';\n\nimport {getReleaseNote} from './ReleaseNoteText.js';\n\nexport const releaseVersionSeen = 'releaseNoteVersionSeen';\n\nexport const releaseNoteViewId = 'release-note';\n\nlet releaseNoteVersionSetting: Common.Settings.Setting<number>;\n\nexport function showReleaseNoteIfNeeded(): boolean {\n  const releaseNoteVersionSetting = Common.Settings.Settings.instance().createSetting(releaseVersionSeen, 0);\n  const releaseNoteVersionSettingValue = releaseNoteVersionSetting.get();\n  const releaseNote = getReleaseNote();\n  return innerShowReleaseNoteIfNeeded(\n      releaseNoteVersionSettingValue, releaseNote.version,\n      Common.Settings.Settings.instance().moduleSetting('help.show-release-note').get());\n}\n\nexport function getReleaseNoteVersionSetting(): Common.Settings.Setting<number> {\n  if (!releaseNoteVersionSetting) {\n    releaseNoteVersionSetting = Common.Settings.Settings.instance().createSetting(releaseVersionSeen, 0);\n  }\n  return releaseNoteVersionSetting;\n}\n\nfunction innerShowReleaseNoteIfNeeded(\n    lastSeenVersion: number, latestVersion: number, showReleaseNoteSettingEnabled: boolean): boolean {\n  const releaseNoteVersionSetting = Common.Settings.Settings.instance().createSetting(releaseVersionSeen, 0);\n  if (!lastSeenVersion) {\n    releaseNoteVersionSetting.set(latestVersion);\n    return false;\n  }\n  if (!showReleaseNoteSettingEnabled) {\n    return false;\n  }\n  if (lastSeenVersion >= latestVersion) {\n    return false;\n  }\n  releaseNoteVersionSetting.set(latestVersion);\n  void UI.ViewManager.ViewManager.instance().showView(releaseNoteViewId, true);\n  return true;\n}\n\nlet helpLateInitializationInstance: HelpLateInitialization;\nexport class HelpLateInitialization implements Common.Runnable.Runnable {\n  static instance(opts: {forceNew: boolean|null} = {forceNew: null}): HelpLateInitialization {\n    const {forceNew} = opts;\n    if (!helpLateInitializationInstance || forceNew) {\n      helpLateInitializationInstance = new HelpLateInitialization();\n    }\n    return helpLateInitializationInstance;\n  }\n\n  async run(): Promise<void> {\n    if (!Host.InspectorFrontendHost.isUnderTest()) {\n      showReleaseNoteIfNeeded();\n    }\n  }\n}\n\nlet releaseNotesActionDelegateInstance: ReleaseNotesActionDelegate;\nexport class ReleaseNotesActionDelegate implements UI.ActionRegistration.ActionDelegate {\n  handleAction(_context: UI.Context.Context, _actionId: string): boolean {\n    const releaseNote = getReleaseNote();\n    Host.InspectorFrontendHost.InspectorFrontendHostInstance.openInNewTab(\n        releaseNote.link as Platform.DevToolsPath.UrlString);\n    return true;\n  }\n  static instance(opts: {forceNew: boolean|null} = {forceNew: null}): ReleaseNotesActionDelegate {\n    const {forceNew} = opts;\n    if (!releaseNotesActionDelegateInstance || forceNew) {\n      releaseNotesActionDelegateInstance = new ReleaseNotesActionDelegate();\n    }\n\n    return releaseNotesActionDelegateInstance;\n  }\n}\n\nlet reportIssueActionDelegateInstance: ReportIssueActionDelegate;\nexport class ReportIssueActionDelegate implements UI.ActionRegistration.ActionDelegate {\n  handleAction(_context: UI.Context.Context, _actionId: string): boolean {\n    Host.InspectorFrontendHost.InspectorFrontendHostInstance.openInNewTab(\n        'https://goo.gle/devtools-bug' as Platform.DevToolsPath.UrlString);\n    return true;\n  }\n  static instance(opts: {forceNew: boolean|null} = {forceNew: null}): ReportIssueActionDelegate {\n    const {forceNew} = opts;\n    if (!reportIssueActionDelegateInstance || forceNew) {\n      reportIssueActionDelegateInstance = new ReportIssueActionDelegate();\n    }\n\n    return reportIssueActionDelegateInstance;\n  }\n}\n"]}