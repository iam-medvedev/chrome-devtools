{"version":3,"file":"CookieReportView.js","sourceRoot":"","sources":["../../../../../../front_end/panels/security/CookieReportView.ts"],"names":[],"mappings":"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","sourcesContent":["// Copyright 2024 The Chromium Authors. All rights reserved.\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\n\nimport * as i18n from '../../core/i18n/i18n.js';\nimport * as UI from '../../ui/legacy/legacy.js';\nimport * as LitHtml from '../../ui/lit-html/lit-html.js';\nimport * as VisualLogging from '../../ui/visual_logging/visual_logging.js';\n\nimport cookieReportViewStyles from './cookieReportView.css.js';\n\nconst {render, html, Directives: {ref}} = LitHtml;\n\nconst UIStrings = {\n  /**\n   *@description Title in the header for the third-party cookie report in the Security & Privacy Panel\n   */\n  title: 'Third-party cookies',\n  /**\n   *@description Explaination in the header about the cookies listed in the report\n   */\n  body:\n      'Third-party cookies that might be restricted by users, depending on their settings. If a user chooses to restrict cookies, then this site might not work for them.',\n  /**\n   *@description A link the user can follow to learn more about third party cookie usage\n   */\n  learnMoreLink: 'Learn more about how third-party cookies are used',\n  /**\n   *@description Status string in the cookie report for a third-party cookie that is allowed without any sort of exception. This is also used as filter chip text to allow the user to filter the table based on cookie status\n   */\n  allowed: 'Allowed',\n  /**\n   *@description Status string in the cookie report for a third-party cookie that is allowed due to a grace period or heuristic exception. Otherwise, this would have been blocked. This is also used as filter chip text to allow the user to filter the table based on cookie status\n   */\n  allowedByException: 'Allowed By Exception',\n  /**\n   *@description Status string in the cookie report for a third-party cookie that was blocked. This is also used as filter chip text to allow the user to filter the table based on cookie status\n   */\n  blocked: 'Blocked',\n};\nconst str_ = i18n.i18n.registerUIStrings('panels/security/CookieReportView.ts', UIStrings);\nexport const i18nString = i18n.i18n.getLocalizedString.bind(undefined, str_);\n\nexport interface ViewInput {}\nexport interface ViewOutput {\n  namedBitSetFilterUI?: UI.FilterBar.NamedBitSetFilterUI;\n}\n\nexport interface CookieReportNodeData {\n  name: string;\n  domain: string;\n  type: string;\n  platform: string;\n  status: string;\n  recommendation: string;\n}\n\nexport type View = (input: ViewInput, output: ViewOutput, target: HTMLElement) => void;\n\nconst filterItems: UI.FilterBar.Item[] = [\n  {\n    name: UIStrings.blocked,\n    label: () => i18nString(UIStrings.blocked),\n    title: UIStrings.blocked,\n    jslogContext: UIStrings.blocked,\n  },\n  {\n    name: UIStrings.allowed,\n    label: () => i18nString(UIStrings.allowed),\n    title: UIStrings.allowed,\n    jslogContext: UIStrings.allowed,\n  },\n  {\n    name: UIStrings.allowedByException,\n    label: () => i18nString(UIStrings.allowedByException),\n    title: UIStrings.allowedByException,\n    jslogContext: UIStrings.allowedByException,\n  },\n];\n\nexport class CookieReportView extends UI.Widget.VBox {\n  namedBitSetFilterUI?: UI.FilterBar.NamedBitSetFilterUI;\n  #view: View;\n\n  constructor(element?: HTMLElement, view: View = (input, output, target) => {\n    // clang-format off\n    render(html `\n        <div class=\"report overflow-auto\">\n            <div class=\"header\">\n              <div class=\"title\">${i18nString(UIStrings.title)}</div>\n              <div class=\"body\">${i18nString(UIStrings.body)} <x-link class=\"x-link\" href=\"https://developers.google.com/privacy-sandbox/cookies/prepare/audit-cookies\" jslog=${VisualLogging.link('learn-more').track({click: true})}>${i18nString(UIStrings.learnMoreLink)}</x-link></div>\n            </div>\n            <devtools-named-bit-set-filter\n              class=\"filter\"\n              .options=${{items: filterItems}}\n              ${ref((el?: Element) => {\n                  if(el instanceof UI.FilterBar.NamedBitSetFilterUIElement){\n                    output.namedBitSetFilterUI = el.getOrCreateNamedBitSetFilterUI();\n                  }\n              })}\n            ></devtools-named-bit-set-filter>\n        </div>\n    `, target, {host: this});\n    // clang-format on\n  }) {\n    super(true, undefined, element);\n    this.#view = view;\n\n    this.doUpdate();\n  }\n\n  doUpdate(): void {\n    this.#view(this, this, this.contentElement);\n  }\n\n  override wasShown(): void {\n    super.wasShown();\n    this.registerCSSFiles([cookieReportViewStyles]);\n  }\n}\n"]}