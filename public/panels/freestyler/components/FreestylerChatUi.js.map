{"version":3,"file":"FreestylerChatUi.js","sourceRoot":"","sources":["../../../../../../../front_end/panels/freestyler/components/FreestylerChatUi.ts"],"names":[],"mappings":"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","sourcesContent":["// Copyright 2024 The Chromium Authors. All rights reserved.\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\n\nimport '../../../ui/components/spinners/spinners.js';\nimport './UserActionRow.js';\n\nimport * as Common from '../../../core/common/common.js';\nimport * as Host from '../../../core/host/host.js';\nimport * as i18n from '../../../core/i18n/i18n.js';\nimport type * as Platform from '../../../core/platform/platform.js';\nimport * as SDK from '../../../core/sdk/sdk.js';\nimport type * as Workspace from '../../../models/workspace/workspace.js';\nimport * as TimelineUtils from '../../../panels/timeline/utils/utils.js';\nimport * as Marked from '../../../third_party/marked/marked.js';\nimport * as Buttons from '../../../ui/components/buttons/buttons.js';\nimport type * as IconButton from '../../../ui/components/icon_button/icon_button.js';\nimport * as MarkdownView from '../../../ui/components/markdown_view/markdown_view.js';\nimport * as UI from '../../../ui/legacy/legacy.js';\nimport * as LitHtml from '../../../ui/lit-html/lit-html.js';\nimport * as VisualLogging from '../../../ui/visual_logging/visual_logging.js';\nimport {PanelUtils} from '../../utils/utils.js';\nimport {AgentType, type ContextDetail, ErrorType} from '../AiAgent.js';\n\nimport freestylerChatUiStyles from './freestylerChatUi.css.js';\nimport type {UserActionRowProps} from './UserActionRow.js';\n\nconst {html, Directives: {ifDefined}} = LitHtml;\n\nconst UIStrings = {\n  /**\n   * @description The error message when the user is not logged in into Chrome.\n   */\n  notLoggedIn: 'This feature is only available when you are signed into Chrome with your Google account',\n  /**\n   * @description Message shown when the user is offline.\n   */\n  offline: 'Check your internet connection and try again',\n  /**\n   *@description Disclaimer text right after the chat input.\n   */\n  inputDisclaimerForEmptyState: 'This is an experimental AI feature and won\\'t always get it right.',\n  /**\n   * @description Text for a link to Chrome DevTools Settings.\n   */\n  settingsLink: 'AI assistance in Settings',\n  /**\n   * @description Placeholder text for an inactive text field. When active, it's used for the user's input to the GenAI assistance.\n   */\n  followTheSteps: 'Follow the steps above to ask a question',\n  /**\n   *@description Text for asking the user to turn the AI assistance feature in settings first before they are able to use it.\n   *@example {AI assistance in Settings} PH1\n   */\n  turnOnForStyles: 'Turn on {PH1} to get help with understanding CSS styles',\n  /**\n   *@description Text for asking the user to turn the AI assistance feature in settings first before they are able to use it.\n   *@example {AI assistance in Settings} PH1\n   */\n  turnOnForStylesAndRequests: 'Turn on {PH1} to get help with styles and network requests',\n  /**\n   *@description Text for asking the user to turn the AI assistance feature in settings first before they are able to use it.\n   *@example {AI assistance in Settings} PH1\n   */\n  turnOnForStylesRequestsAndFiles: 'Turn on {PH1} to get help with styles, network requests, and files',\n  /**\n   *@description Text for asking the user to turn the AI assistance feature in settings first before they are able to use it.\n   *@example {AI assistance in Settings} PH1\n   */\n  turnOnForStylesRequestsPerformanceAndFiles:\n      'Turn on {PH1} to get help with styles, network requests, performance, and files',\n  /**\n   *@description The footer disclaimer that links to more information about the AI feature.\n   */\n  learnAbout: 'Learn about AI in DevTools',\n};\n\n/*\n* Strings that don't need to be translated at this time.\n*/\nconst UIStringsNotTranslate = {\n  /**\n   *@description Disclaimer text right after the chat input.\n   */\n  inputDisclaimerForFreestylerAgent:\n      'Chat messages and any data the inspected page can access via Web APIs are sent to Google and may be seen by human reviewers to improve this feature. This is an experimental AI feature and won’t always get it right.',\n  /**\n   *@description Disclaimer text right after the chat input.\n   */\n  inputDisclaimerForDrJonesNetworkAgent:\n      'Chat messages and the selected network request are sent to Google and may be seen by human reviewers to improve this feature. This is an experimental AI feature and won’t always get it right.',\n  /**\n   *@description Disclaimer text right after the chat input.\n   */\n  inputDisclaimerForDrJonesFileAgent:\n      'Chat messages and the selected file are sent to Google and may be seen by human reviewers to improve this feature. This is an experimental AI feature and won\\'t always get it right.',\n  /**\n   *@description Disclaimer text right after the chat input.\n   */\n  inputDisclaimerForDrJonesPerformanceAgent:\n      'Chat messages and the selected call tree are sent to Google and may be seen by human reviewers to improve this feature. This is an experimental AI feature and won\\'t always get it right.',\n  /**\n   *@description Placeholder text for the chat UI input.\n   */\n  inputPlaceholderForFreestylerAgent: 'Ask a question about the selected element',\n  /**\n   *@description Placeholder text for the chat UI input.\n   */\n  inputPlaceholderForDrJonesNetworkAgent: 'Ask a question about the selected network request',\n  /**\n   *@description Placeholder text for the chat UI input.\n   */\n  inputPlaceholderForDrJonesFileAgent: 'Ask a question about the selected file',\n  /**\n   *@description Placeholder text for the chat UI input.\n   */\n  inputPlaceholderForDrJonesPerformanceAgent: 'Ask a question about the selected item and its call tree',\n  /**\n   *@description Title for the send icon button.\n   */\n  sendButtonTitle: 'Send',\n  /**\n   *@description Title for the cancel icon button.\n   */\n  cancelButtonTitle: 'Cancel',\n  /**\n   *@description Label for the \"select an element\" button.\n   */\n  selectAnElement: 'Select an element',\n  /**\n   *@description Label for the \"select an element\" button.\n   */\n  noElementSelected: 'No element selected',\n  /**\n   *@description Text for the empty state of the AI assistance panel.\n   */\n  emptyStateText: 'How can I help you?',\n  /**\n   * @description The error message when the LLM loop is stopped for some reason (Max steps reached or request to LLM failed)\n   */\n  systemError:\n      'Something unforeseen happened and I can no longer continue. Try your request again and see if that resolves the issue.',\n  /**\n   * @description The error message when the LLM loop is stopped for some reason (Max steps reached or request to LLM failed)\n   */\n  maxStepsError: 'Seems like I am stuck with the investigation. It would be better if you start over.',\n  /**\n   *@description Displayed when the user stop the response\n   */\n  stoppedResponse: 'You stopped this response',\n  /**\n   * @description Prompt for user to confirm code execution that may affect the page.\n   */\n  sideEffectConfirmationDescription: 'This code may modify page content. Continue?',\n  /**\n   * @description Button text that confirm code execution that may affect the page.\n   */\n  positiveSideEffectConfirmation: 'Continue',\n  /**\n   * @description Button text that cancels code execution that may affect the page.\n   */\n  negativeSideEffectConfirmation: 'Cancel',\n  /**\n   *@description The generic name of the AI agent (do not translate)\n   */\n  ai: 'AI',\n  /**\n   *@description The fallback text when we can't find the user full name\n   */\n  you: 'You',\n  /**\n   *@description The fallback text when a step has no title yet\n   */\n  investigating: 'Investigating',\n  /**\n   *@description Prefix to the title of each thinking step of a user action is required to continue\n   */\n  paused: 'Paused',\n  /**\n   *@description Heading text for the code block that shows the executed code.\n   */\n  codeExecuted: 'Code executed',\n  /**\n   *@description Heading text for the code block that shows the code to be executed after side effect confirmation.\n   */\n  codeToExecute: 'Code to execute',\n  /**\n   *@description Heading text for the code block that shows the returned data.\n   */\n  dataReturned: 'Data returned',\n  /**\n   *@description Aria label for the check mark icon to be read by screen reader\n   */\n  completed: 'Completed',\n  /**\n   *@description Aria label for the loading icon to be read by screen reader\n   */\n  inProgress: 'In progress',\n  /**\n   *@description Aria label for the cancel icon to be read by screen reader\n   */\n  canceled: 'Canceled',\n  /*\n   * @description Header text for instructions on how to use the AI assistance feature.\n   */\n  getStarted: 'Hi! Here’s how to get started:',\n  /**\n   * @description AI assistance for CSS.\n   */\n  cssHelp: 'CSS help:',\n  /**\n   * @description Explanation on how to use AI assistance for DOM elements.\n   */\n  cssHelpExplainer:\n      'Navigate to the Elements panel, right-click a DOM element, and select \"Ask AI assistant\". I’ll be happy to explain its styles or behavior.',\n  /**\n   * @description AI assistance for files.\n   */\n  fileHelp: 'File insights:',\n  /**\n   * @description Explanation on how to use AI assistance for files in the Sources panel.\n   */\n  fileHelpExplainer:\n      'Open the Sources panel, right-click a file, and select \"Ask AI\". I can provide insights into its purpose or origin.',\n  /**\n   * @description AI assistance for network requests.\n   */\n  networkHelp: 'Network request insights:',\n  /**\n   * @description Explanation on how to use AI assistance for network requests.\n   */\n  networkHelpExplainer:\n      'In the Network panel, right-click any request and select \"Ask AI assistant\". I’ll help break down what’s happening with each request.',\n  /**\n   * @description AI assistance for performance traces.\n   */\n  performanceHelp: 'Performance analysis:',\n  /**\n   * @description Explanation on how to use AI assistance for performance traces.\n   */\n  performanceHelpExplainer:\n      'In the Performance panel, run a trace. Then, right-click any function in the timeline and select \"Ask AI\". I’ll help you analyze its performance impact and suggest improvements.',\n};\n\nconst str_ = i18n.i18n.registerUIStrings('panels/freestyler/components/FreestylerChatUi.ts', UIStrings);\nconst i18nString = i18n.i18n.getLocalizedString.bind(undefined, str_);\nconst lockedString = i18n.i18n.lockedString;\n\nfunction getInputPlaceholderString(state: State, agentType?: AgentType): Platform.UIString.LocalizedString {\n  if (state === State.CONSENT_VIEW || !agentType) {\n    return i18nString(UIStrings.followTheSteps);\n  }\n  switch (agentType) {\n    case AgentType.FREESTYLER:\n      return lockedString(UIStringsNotTranslate.inputPlaceholderForFreestylerAgent);\n    case AgentType.DRJONES_FILE:\n      return lockedString(UIStringsNotTranslate.inputPlaceholderForDrJonesFileAgent);\n    case AgentType.DRJONES_NETWORK_REQUEST:\n      return lockedString(UIStringsNotTranslate.inputPlaceholderForDrJonesNetworkAgent);\n    case AgentType.DRJONES_PERFORMANCE:\n      return lockedString(UIStringsNotTranslate.inputPlaceholderForDrJonesPerformanceAgent);\n  }\n}\n\nexport interface Step {\n  isLoading: boolean;\n  thought?: string;\n  title?: string;\n  code?: string;\n  output?: string;\n  canceled?: boolean;\n  sideEffect?: ConfirmSideEffectDialog;\n  contextDetails?: [ContextDetail, ...ContextDetail[]];\n}\n\ninterface ConfirmSideEffectDialog {\n  onAnswer: (result: boolean) => void;\n}\n\nexport const enum ChatMessageEntity {\n  MODEL = 'model',\n  USER = 'user',\n}\n\nexport interface UserChatMessage {\n  entity: ChatMessageEntity.USER;\n  text: string;\n}\nexport interface ModelChatMessage {\n  entity: ChatMessageEntity.MODEL;\n  steps: Step[];\n  suggestions?: [string, ...string[]];\n  answer?: string;\n  error?: ErrorType;\n  rpcId?: number;\n}\n\nexport type ChatMessage = UserChatMessage|ModelChatMessage;\n\nexport const enum State {\n  CONSENT_VIEW = 'consent-view',\n  CHAT_VIEW = 'chat-view',\n}\n\nexport interface Props {\n  onTextSubmit: (text: string) => void;\n  onInspectElementClick: () => void;\n  onFeedbackSubmit: (rpcId: number, rate: Host.AidaClient.Rating, feedback?: string) => void;\n  onCancelClick: () => void;\n  onSelectedNetworkRequestClick: () => void | Promise<void>;\n  onSelectedFileRequestClick: () => void | Promise<void>;\n  inspectElementToggled: boolean;\n  state: State;\n  aidaAvailability: Host.AidaClient.AidaAccessPreconditions;\n  messages: ChatMessage[];\n  selectedElement: SDK.DOMModel.DOMNode|null;\n  selectedFile: Workspace.UISourceCode.UISourceCode|null;\n  selectedNetworkRequest: SDK.NetworkRequest.NetworkRequest|null;\n  selectedAiCallTree: TimelineUtils.AICallTree.AICallTree|null;\n  isLoading: boolean;\n  canShowFeedbackForm: boolean;\n  userInfo: Pick<Host.InspectorFrontendHostAPI.SyncInformation, 'accountImage'|'accountFullName'>;\n  agentType?: AgentType;\n}\n\n// The model returns multiline code blocks in an erroneous way with the language being in new line.\n// This renderer takes that into account and correctly updates the parsed multiline token with the language\n// correctly identified and stripped from the content.\n// Example:\n// ```\n// css <-- This should have been on the first line.\n// * {\n//   color: red;\n// }\n// ```\nclass MarkdownRendererWithCodeBlock extends MarkdownView.MarkdownView.MarkdownInsightRenderer {\n  override templateForToken(token: Marked.Marked.MarkedToken): LitHtml.TemplateResult|null {\n    if (token.type === 'code') {\n      const lines = (token.text as string).split('\\n');\n      if (lines[0]?.trim() === 'css') {\n        token.lang = 'css';\n        token.text = lines.slice(1).join('\\n');\n      }\n    }\n\n    return super.templateForToken(token);\n  }\n}\n\nexport class FreestylerChatUi extends HTMLElement {\n  readonly #shadow = this.attachShadow({mode: 'open'});\n  readonly #markdownRenderer = new MarkdownRendererWithCodeBlock();\n  #scrollTop?: number;\n  #props: Props;\n\n  constructor(props: Props) {\n    super();\n    this.#props = props;\n  }\n\n  set props(props: Props) {\n    this.#props = props;\n    this.#render();\n  }\n\n  connectedCallback(): void {\n    this.#shadow.adoptedStyleSheets = [freestylerChatUiStyles];\n    this.#render();\n  }\n\n  focusTextInput(): void {\n    const textArea = this.#shadow.querySelector('.chat-input') as HTMLTextAreaElement;\n    if (!textArea) {\n      return;\n    }\n\n    textArea.focus();\n  }\n\n  restoreScrollPosition(): void {\n    if (this.#scrollTop === undefined) {\n      return;\n    }\n\n    const scrollContainer = this.#shadow.querySelector('.chat-ui main') as HTMLElement;\n    if (!scrollContainer) {\n      return;\n    }\n\n    scrollContainer.scrollTop = this.#scrollTop;\n  }\n\n  scrollToLastMessage(): void {\n    const message = this.#shadow.querySelector('.chat-message:last-child') as HTMLDivElement;\n    if (!message) {\n      return;\n    }\n    message.scrollIntoViewIfNeeded();\n  }\n\n  #setInputText(text: string): void {\n    const textArea = this.#shadow.querySelector('.chat-input') as HTMLTextAreaElement;\n    if (!textArea) {\n      return;\n    }\n\n    textArea.value = text;\n  }\n\n  #isTextInputDisabled = (): boolean => {\n    const isAidaAvailable = this.#props.aidaAvailability === Host.AidaClient.AidaAccessPreconditions.AVAILABLE;\n    const isConsentView = this.#props.state === State.CONSENT_VIEW;\n    const showsSideEffects = this.#props.messages.some(message => {\n      return message.entity === ChatMessageEntity.MODEL && message.steps.some(step => {\n        return Boolean(step.sideEffect);\n      });\n    });\n\n    const isInputDisabledCheckForFreestylerAgent = !Boolean(this.#props.selectedElement) || showsSideEffects;\n    const isInputDisabledCheckForDrJonesNetworkAgent = !Boolean(this.#props.selectedNetworkRequest);\n    const isInputDisabledCheckForDrJonesFileAgent =\n        !Boolean(this.#props.selectedFile) || !this.#props.selectedFile?.contentType().isTextType();\n\n    return (this.#props.agentType === AgentType.FREESTYLER && isInputDisabledCheckForFreestylerAgent) ||\n        (this.#props.agentType === AgentType.DRJONES_NETWORK_REQUEST && isInputDisabledCheckForDrJonesNetworkAgent) ||\n        (this.#props.agentType === AgentType.DRJONES_FILE && isInputDisabledCheckForDrJonesFileAgent) ||\n        !isAidaAvailable || isConsentView || !this.#props.agentType;\n  };\n\n  #handleScroll = (ev: Event): void => {\n    if (!ev.target || !(ev.target instanceof HTMLElement)) {\n      return;\n    }\n\n    this.#scrollTop = ev.target.scrollTop;\n  };\n\n  #handleSubmit = (ev: SubmitEvent): void => {\n    ev.preventDefault();\n    const textArea = this.#shadow.querySelector('.chat-input') as HTMLTextAreaElement;\n    if (!textArea || !textArea.value) {\n      return;\n    }\n    this.#props.onTextSubmit(textArea.value);\n    textArea.value = '';\n  };\n\n  #handleTextAreaKeyDown = (ev: KeyboardEvent): void => {\n    if (!ev.target || !(ev.target instanceof HTMLTextAreaElement)) {\n      return;\n    }\n\n    if (ev.key === 'Enter' && !ev.shiftKey) {\n      // Do not go to a new line whenver Shift + Enter is pressed.\n      ev.preventDefault();\n      // Only submit the text when there isn't a request already in flight.\n      if (!this.#props.isLoading) {\n        this.#props.onTextSubmit(ev.target.value);\n        ev.target.value = '';\n      }\n    }\n  };\n\n  #handleCancel = (ev: SubmitEvent): void => {\n    ev.preventDefault();\n\n    if (!this.#props.isLoading) {\n      return;\n    }\n\n    this.#props.onCancelClick();\n  };\n\n  #handleSuggestionClick = (suggestion: string): void => {\n    this.#setInputText(suggestion);\n    this.focusTextInput();\n    Host.userMetrics.actionTaken(Host.UserMetrics.Action.AiAssistanceDynamicSuggestionClicked);\n  };\n\n  #renderUserActionRow(rpcId?: number, suggestions?: [string, ...string[]]): LitHtml.TemplateResult {\n    // clang-format off\n    return html`<devtools-user-action-row\n      .props=${{\n        showRateButtons: rpcId !== undefined,\n        onFeedbackSubmit: (rating, feedback) => {\n          if (!rpcId) {\n            return;\n          }\n          this.#props.onFeedbackSubmit(rpcId, rating, feedback);\n        },\n        suggestions,\n        handleSuggestionClick: this.#handleSuggestionClick,\n        canShowFeedbackForm: this.#props.canShowFeedbackForm,\n      } as UserActionRowProps}\n      ></devtools-user-action-row>`;\n    // clang-format on\n  }\n\n  #renderTextAsMarkdown(text: string): LitHtml.TemplateResult {\n    let tokens = [];\n    try {\n      tokens = Marked.Marked.lexer(text);\n      for (const token of tokens) {\n        // Try to render all the tokens to make sure that\n        // they all have a template defined for them. If there\n        // isn't any template defined for a token, we'll fallback\n        // to rendering the text as plain text instead of markdown.\n        this.#markdownRenderer.renderToken(token);\n      }\n    } catch (err) {\n      // The tokens were not parsed correctly or\n      // one of the tokens are not supported, so we\n      // continue to render this as text.\n      return html`${text}`;\n    }\n\n    // clang-format off\n    return html`<devtools-markdown-view\n      .data=${{tokens, renderer: this.#markdownRenderer} as MarkdownView.MarkdownView.MarkdownViewData}>\n    </devtools-markdown-view>`;\n    // clang-format on\n  }\n\n  #renderTitle(step: Step): LitHtml.LitTemplate {\n    const paused = step.sideEffect ? html`<span class=\"paused\">${lockedString(UIStringsNotTranslate.paused)}: </span>` :\n                                     LitHtml.nothing;\n    const actionTitle = step.title ?? `${lockedString(UIStringsNotTranslate.investigating)}…`;\n\n    return html`<span class=\"title\">${paused}${actionTitle}</span>`;\n  }\n\n  #renderStepCode(step: Step): LitHtml.LitTemplate {\n    if (!step.code && !step.output) {\n      return LitHtml.nothing;\n    }\n\n    // If there is no \"output\" yet, it means we didn't execute the code yet (e.g. maybe it is still waiting for confirmation from the user)\n    // thus we show \"Code to execute\" text rather than \"Code executed\" text on the heading of the code block.\n    const codeHeadingText = (step.output && !step.canceled) ? lockedString(UIStringsNotTranslate.codeExecuted) :\n                                                              lockedString(UIStringsNotTranslate.codeToExecute);\n\n    // If there is output, we don't show notice on this code block and instead show\n    // it in the data returned code block.\n    // clang-format off\n    const code = step.code ? html`<div class=\"action-result\">\n        <devtools-code-block\n          .code=${step.code.trim()}\n          .codeLang=${'js'}\n          .displayNotice=${!Boolean(step.output)}\n          .header=${codeHeadingText}\n          .showCopyButton=${true}\n        ></devtools-code-block>\n    </div>` :\n                             LitHtml.nothing;\n    const output = step.output ? html`<div class=\"js-code-output\">\n      <devtools-code-block\n        .code=${step.output}\n        .codeLang=${'js'}\n        .displayNotice=${true}\n        .header=${lockedString(UIStringsNotTranslate.dataReturned)}\n        .showCopyButton=${false}\n      ></devtools-code-block>\n    </div>` :\n                                 LitHtml.nothing;\n\n    return html`<div class=\"step-code\">${code}${output}</div>`;\n    // clang-format on\n  }\n\n  #renderStepDetails(step: Step, options: {isLast: boolean}): LitHtml.LitTemplate {\n    const sideEffects =\n        options.isLast && step.sideEffect ? this.#renderSideEffectConfirmationUi(step) : LitHtml.nothing;\n    const thought = step.thought ? html`<p>${this.#renderTextAsMarkdown(step.thought)}</p>` : LitHtml.nothing;\n\n    // clang-format off\n    const contextDetails = step.contextDetails ?\n    html`${LitHtml.Directives.repeat(\n      step.contextDetails,\n        contextDetail => {\n          return html`<div class=\"context-details\">\n        <devtools-code-block\n          .code=${contextDetail.text}\n          .codeLang=${contextDetail.codeLang || ''}\n          .displayNotice=${false}\n          .header=${contextDetail.title}\n          .showCopyButton=${true}\n        ></devtools-code-block>\n      </div>`;\n        },\n      )}` : LitHtml.nothing;\n\n    return html`<div class=\"step-details\">\n      ${thought}\n      ${this.#renderStepCode(step)}\n      ${sideEffects}\n      ${contextDetails}\n    </div>`;\n    // clang-format on\n  }\n\n  #renderStepBadge(step: Step, options: {isLast: boolean}): LitHtml.LitTemplate {\n    if (this.#props.isLoading && options.isLast && !step.sideEffect) {\n      return html`<devtools-spinner></devtools-spinner>`;\n    }\n\n    let iconName: string = 'checkmark';\n    let ariaLabel: string|undefined = lockedString(UIStringsNotTranslate.completed);\n    let role: 'button'|undefined = 'button';\n    if (options.isLast && step.sideEffect) {\n      role = undefined;\n      ariaLabel = undefined;\n      iconName = 'pause-circle';\n    } else if (step.canceled) {\n      ariaLabel = lockedString(UIStringsNotTranslate.canceled);\n      iconName = 'cross';\n    }\n\n    return html`<devtools-icon\n        class=\"indicator\"\n        role=${ifDefined(role)}\n        aria-label=${ifDefined(ariaLabel)}\n        .name=${iconName}\n      ></devtools-icon>`;\n  }\n\n  #renderStep(step: Step, options: {isLast: boolean}): LitHtml.LitTemplate {\n    const stepClasses = LitHtml.Directives.classMap({\n      step: true,\n      empty: !step.thought && !step.code && !step.contextDetails,\n      paused: Boolean(step.sideEffect),\n      canceled: Boolean(step.canceled),\n    });\n    // clang-format off\n    return html`\n      <details class=${stepClasses}\n        jslog=${VisualLogging.section('step')}\n        .open=${Boolean(step.sideEffect)}>\n        <summary>\n          <div class=\"summary\">\n            ${this.#renderStepBadge(step, options)}\n            ${this.#renderTitle(step)}\n            <devtools-icon\n              class=\"arrow\"\n              .name=${'chevron-down'}\n            ></devtools-icon>\n          </div>\n        </summary>\n        ${this.#renderStepDetails(step, {\n          isLast: options.isLast,\n        })}\n      </details>`;\n    // clang-format on\n  }\n\n  #renderSideEffectConfirmationUi(step: Step): LitHtml.LitTemplate {\n    if (!step.sideEffect) {\n      return LitHtml.nothing;\n    }\n\n    const sideEffectAction = (answer: boolean): void => {\n      step.sideEffect?.onAnswer(answer);\n      step.sideEffect = undefined;\n      this.#render();\n    };\n\n    // clang-format off\n    return html`<div\n      class=\"side-effect-confirmation\"\n      jslog=${VisualLogging.section('side-effect-confirmation')}\n    >\n      <p>${lockedString(UIStringsNotTranslate.sideEffectConfirmationDescription)}</p>\n      <div class=\"side-effect-buttons-container\">\n        <devtools-button\n          .data=${\n            {\n              variant: Buttons.Button.Variant.OUTLINED,\n              jslogContext: 'decline-execute-code',\n            } as Buttons.Button.ButtonData\n          }\n          @click=${() => sideEffectAction(false)}\n        >${lockedString(\n          UIStringsNotTranslate.negativeSideEffectConfirmation,\n        )}</devtools-button>\n        <devtools-button\n          .data=${\n            {\n              variant: Buttons.Button.Variant.PRIMARY,\n              jslogContext: 'accept-execute-code',\n              iconName: 'play',\n            } as Buttons.Button.ButtonData\n          }\n          @click=${() => sideEffectAction(true)}\n        >${\n            lockedString(UIStringsNotTranslate.positiveSideEffectConfirmation)\n        }</devtools-button>\n      </div>\n    </div>`;\n    // clang-format on\n  }\n\n  #renderError(message: ModelChatMessage): LitHtml.LitTemplate {\n    if (message.error) {\n      let errorMessage;\n      switch (message.error) {\n        case ErrorType.UNKNOWN:\n          errorMessage = UIStringsNotTranslate.systemError;\n          break;\n        case ErrorType.MAX_STEPS:\n          errorMessage = UIStringsNotTranslate.maxStepsError;\n          break;\n        case ErrorType.ABORT:\n          return html`<p class=\"aborted\" jslog=${VisualLogging.section('aborted')}>${\n              lockedString(UIStringsNotTranslate.stoppedResponse)}</p>`;\n      }\n\n      return html`<p class=\"error\" jslog=${VisualLogging.section('error')}>${lockedString(errorMessage)}</p>`;\n    }\n\n    return LitHtml.nothing;\n  }\n\n  #renderChatMessage = (message: ChatMessage, {isLast}: {isLast: boolean}): LitHtml.TemplateResult => {\n    if (message.entity === ChatMessageEntity.USER) {\n      const name = this.#props.userInfo.accountFullName || lockedString(UIStringsNotTranslate.you);\n      const image = this.#props.userInfo.accountImage ?\n          html`<img src=\"data:image/png;base64, ${this.#props.userInfo.accountImage}\" alt=\"Account avatar\" />` :\n          html`<devtools-icon\n            .name=${'profile'}\n          ></devtools-icon>`;\n      // clang-format off\n      return html`<section\n        class=\"chat-message query\"\n        jslog=${VisualLogging.section('question')}\n      >\n        <div class=\"message-info\">\n          ${image}\n          <div class=\"message-name\">\n            <h2>${name}</h2>\n          </div>\n        </div>\n        <div class=\"message-content\">${this.#renderTextAsMarkdown(message.text)}</div>\n      </section>`;\n      // clang-format on\n    }\n\n    const shouldShowSuggestions = (isLast && !this.#props.isLoading && message.suggestions);\n    // clang-format off\n    return html`\n      <section class=\"chat-message answer\" jslog=${VisualLogging.section('answer')}>\n        <div class=\"message-info\">\n          <devtools-icon\n            name=\"smart-assistant\"\n          ></devtools-icon>\n          <div class=\"message-name\">\n            <h2>${lockedString(UIStringsNotTranslate.ai)}</h2>\n          </div>\n        </div>\n        ${LitHtml.Directives.repeat(\n          message.steps,\n          (_, index) => index,\n          step => {\n            return this.#renderStep(step, {\n              isLast: [...message.steps.values()].at(-1) === step && isLast,\n            });\n          },\n        )}\n        ${\n          message.answer\n            ? html`<p>${this.#renderTextAsMarkdown(message.answer)}</p>`\n            : LitHtml.nothing\n        }\n        ${this.#renderError(message)}\n        <div class=\"actions\">\n          ${this.#renderUserActionRow(message.rpcId, shouldShowSuggestions ? message.suggestions : undefined)}\n        </div>\n      </section>\n    `;\n    // clang-format on\n  };\n\n  #renderSelection(): LitHtml.LitTemplate {\n    if (!this.#props.agentType) {\n      return LitHtml.nothing;\n    }\n    switch (this.#props.agentType) {\n      case AgentType.FREESTYLER:\n        return this.#renderSelectAnElement();\n      case AgentType.DRJONES_FILE:\n        return this.#renderSelectedFileName();\n      case AgentType.DRJONES_NETWORK_REQUEST:\n        return this.#renderSelectedNetworkRequest();\n      case AgentType.DRJONES_PERFORMANCE:\n        return this.#renderSelectedTask();\n    }\n  }\n\n  #renderSelectedFileName(): LitHtml.TemplateResult {\n    const resourceClass = LitHtml.Directives.classMap({\n      'not-selected': !this.#props.selectedFile,\n      'resource-link': true,\n    });\n\n    if (!this.#props.selectedFile) {\n      return html`${LitHtml.nothing}`;\n    }\n\n    const icon = PanelUtils.getIconForSourceFile(this.#props.selectedFile);\n\n    // clang-format off\n    return html`<div class=\"select-element\">\n    <div role=button class=${resourceClass}\n    @click=${this.#props.onSelectedFileRequestClick}>\n      ${icon}${this.#props.selectedFile?.displayName()}\n    </div></div>`;\n    // clang-format on\n  }\n\n  #renderSelectedNetworkRequest = (): LitHtml.TemplateResult => {\n    const resourceClass = LitHtml.Directives.classMap({\n      'not-selected': !this.#props.selectedNetworkRequest,\n      'resource-link': true,\n    });\n\n    if (!this.#props.selectedNetworkRequest) {\n      return html`${LitHtml.nothing}`;\n    }\n\n    const icon = PanelUtils.getIconForNetworkRequest(this.#props.selectedNetworkRequest);\n    // clang-format off\n    return html`<div class=\"select-element\">\n    <div role=button class=${resourceClass}\n    @click=${this.#props.onSelectedNetworkRequestClick}>\n      ${icon}${this.#props.selectedNetworkRequest?.name()}\n    </div></div>`;\n    // clang-format on\n  };\n\n  #renderSelectAnElement = (): LitHtml.TemplateResult => {\n    const resourceClass = LitHtml.Directives.classMap({\n      'not-selected': !this.#props.selectedElement,\n      'resource-link': true,\n    });\n\n    // clang-format off\n    return html`\n      <div class=\"select-element\">\n        <devtools-button\n          .data=${{\n              variant: Buttons.Button.Variant.ICON_TOGGLE,\n              size: Buttons.Button.Size.REGULAR,\n              iconName: 'select-element',\n              toggledIconName: 'select-element',\n              toggleType: Buttons.Button.ToggleType.PRIMARY,\n              toggled: this.#props.inspectElementToggled,\n              title: lockedString(UIStringsNotTranslate.selectAnElement),\n              jslogContext: 'select-element',\n          } as Buttons.Button.ButtonData}\n          @click=${this.#props.onInspectElementClick}\n        ></devtools-button>\n        <div class=${resourceClass}>${\n          this.#props.selectedElement\n            ? LitHtml.Directives.until(\n                  Common.Linkifier.Linkifier.linkify(this.#props.selectedElement),\n                )\n            : html`<span>${\n              lockedString(UIStringsNotTranslate.noElementSelected)\n            }</span>`\n        }</div>\n      </div>`;\n    // clang-format on\n  };\n\n  #renderSelectedTask = (): LitHtml.TemplateResult => {\n    const resourceClass = LitHtml.Directives.classMap({\n      'not-selected': !this.#props.selectedAiCallTree,\n      'resource-task': true,\n    });\n\n    if (!this.#props.selectedAiCallTree) {\n      return html`${LitHtml.nothing}`;\n    }\n\n    const {event} = this.#props.selectedAiCallTree.selectedNode;\n    if (!event) {\n      return html`${LitHtml.nothing}`;\n    }\n\n    const displayName = TimelineUtils.EntryName.nameForEntry(event);\n    const handleClick = (): void => {\n      const trace = new SDK.TraceObject.RevealableEvent(event);\n      void Common.Revealer.reveal(trace);\n    };\n\n    const iconData = {\n      iconName: 'performance',\n      color: 'var(--sys-color-on-surface-subtle)',\n    };\n    const icon = PanelUtils.createIconElement(iconData, 'Performance');\n    icon.classList.add('icon');\n\n    // clang-format off\n    return html`<div class=\"select-element\">\n      <div role=button class=${resourceClass} @click=${handleClick}>\n        ${icon}${displayName}\n      </div>\n    </div>`;\n    // clang-format on\n  };\n\n  #renderMessages = (): LitHtml.TemplateResult => {\n    // clang-format off\n    return html`\n      <div class=\"messages-container\">\n        ${this.#props.messages.map((message, _, array) =>\n          this.#renderChatMessage(message, {\n            isLast: array.at(-1) === message,\n          }),\n        )}\n      </div>\n    `;\n    // clang-format on\n  };\n\n  #renderEmptyState = (): LitHtml.TemplateResult => {\n    const suggestions = this.#getEmptyStateSuggestions();\n\n    // clang-format off\n    return html`<div class=\"empty-state-container\">\n      <div class=\"header\">\n        <div class=\"icon\">\n          <devtools-icon\n            name=\"smart-assistant\"\n          ></devtools-icon>\n        </div>\n        <h1>${lockedString(UIStringsNotTranslate.emptyStateText)}</h1>\n      </div>\n      <div class=\"suggestions\">\n        ${suggestions.map(suggestion => {\n          return html`<devtools-button\n            class=\"suggestion\"\n            @click=${() => this.#handleSuggestionClick(suggestion)}\n            .data=${\n              {\n                variant: Buttons.Button.Variant.OUTLINED,\n                size: Buttons.Button.Size.REGULAR,\n                title: suggestion,\n                jslogContext: 'suggestion',\n                disabled: this.#isTextInputDisabled(),\n              } as Buttons.Button.ButtonData\n            }\n          >${suggestion}</devtools-button>`;\n        })}\n      </div>\n    </div>`;\n    // clang-format on\n  };\n\n  #getEmptyStateSuggestions = (): string[] => {\n    if (!this.#props.agentType) {\n      return [];\n    }\n    switch (this.#props.agentType) {\n      case AgentType.FREESTYLER:\n        return [\n          'What can you help me with?',\n          'Why isn’t this element visible?',\n          'How do I center this element?',\n        ];\n      case AgentType.DRJONES_FILE:\n        return [\n          'What does this script do?',\n          'Is the script optimized for performance?',\n          'Does the script handle user input safely?',\n        ];\n      case AgentType.DRJONES_NETWORK_REQUEST:\n        return [\n          'Why is this network request taking so long?',\n          'Are there any security headers present?',\n          'Why is the request failing?',\n        ];\n      case AgentType.DRJONES_PERFORMANCE:\n        return [\n          'Identify performance issues in this call tree',\n          'Where is most of the time being spent in this call tree?',\n          'How can I reduce the time of this call tree?',\n        ];\n    }\n  };\n\n  #renderChatInput = (): LitHtml.TemplateResult => {\n    // clang-format off\n    return html`\n      <div class=\"chat-input-container\">\n        <textarea class=\"chat-input\"\n          .disabled=${this.#isTextInputDisabled()}\n          wrap=\"hard\"\n          @keydown=${this.#handleTextAreaKeyDown}\n          placeholder=${getInputPlaceholderString(this.#props.state, this.#props.agentType)}\n          jslog=${VisualLogging.textField('query').track({ keydown: 'Enter' })}></textarea>\n          ${this.#props.isLoading\n            ? html`<devtools-button\n              class=\"chat-input-button\"\n              aria-label=${lockedString(UIStringsNotTranslate.cancelButtonTitle)}\n              @click=${this.#handleCancel}\n              .data=${\n                {\n                  variant: Buttons.Button.Variant.ICON,\n                  size: Buttons.Button.Size.REGULAR,\n                  disabled: this.#isTextInputDisabled(),\n                  iconName: 'record-stop',\n                  title: lockedString(UIStringsNotTranslate.cancelButtonTitle),\n                  jslogContext: 'stop',\n                } as Buttons.Button.ButtonData\n              }\n            ></devtools-button>`\n            : html`<devtools-button\n              class=\"chat-input-button\"\n              aria-label=${lockedString(UIStringsNotTranslate.sendButtonTitle)}\n              .data=${\n                {\n                  type: 'submit',\n                  variant: Buttons.Button.Variant.ICON,\n                  size: Buttons.Button.Size.REGULAR,\n                  disabled: this.#isTextInputDisabled(),\n                  iconName: 'send',\n                  title: lockedString(UIStringsNotTranslate.sendButtonTitle),\n                  jslogContext: 'send',\n                } as Buttons.Button.ButtonData\n              }\n            ></devtools-button>`}\n      </div>`;\n    // clang-format on\n  };\n\n  #getDisclaimerText = (): Platform.UIString.LocalizedString => {\n    if (this.#props.state === State.CONSENT_VIEW || !this.#props.agentType) {\n      return i18nString(UIStrings.inputDisclaimerForEmptyState);\n    }\n    switch (this.#props.agentType) {\n      case AgentType.FREESTYLER:\n        return lockedString(UIStringsNotTranslate.inputDisclaimerForFreestylerAgent);\n      case AgentType.DRJONES_FILE:\n        return lockedString(UIStringsNotTranslate.inputDisclaimerForDrJonesFileAgent);\n      case AgentType.DRJONES_NETWORK_REQUEST:\n        return lockedString(UIStringsNotTranslate.inputDisclaimerForDrJonesNetworkAgent);\n      case AgentType.DRJONES_PERFORMANCE:\n        return lockedString(UIStringsNotTranslate.inputDisclaimerForDrJonesPerformanceAgent);\n    }\n  };\n\n  #getConsentViewContents(): LitHtml.TemplateResult {\n    const settingsLink = document.createElement('button');\n    settingsLink.textContent = i18nString(UIStrings.settingsLink);\n    settingsLink.classList.add('link');\n    UI.ARIAUtils.markAsLink(settingsLink);\n    settingsLink.addEventListener('click', () => {\n      void UI.ViewManager.ViewManager.instance().showView('chrome-ai');\n    });\n    settingsLink.setAttribute('jslog', `${VisualLogging.action('open-ai-settings').track({click: true})}`);\n    return html`${i18n.i18n.getFormatLocalizedString(str_, this.#getStringForConsentView(), {PH1: settingsLink})}`;\n  }\n\n  #getStringForConsentView(): string {\n    const config = Common.Settings.Settings.instance().getHostConfig();\n    if (config.devToolsAiAssistancePerformanceAgent?.enabled ||\n        config.devToolsAiAssistancePerformanceAgentDogfood?.enabled) {\n      return UIStrings.turnOnForStylesRequestsPerformanceAndFiles;\n    }\n    if (config.devToolsAiAssistanceFileAgent?.enabled || config.devToolsAiAssistanceFileAgentDogfood?.enabled) {\n      return UIStrings.turnOnForStylesRequestsAndFiles;\n    }\n    if (config.devToolsAiAssistanceNetworkAgent?.enabled || config.devToolsExplainThisResourceDogfood?.enabled) {\n      return UIStrings.turnOnForStylesAndRequests;\n    }\n    return UIStrings.turnOnForStyles;\n  }\n\n  #getUnavailableAidaAvailabilityContents(\n      aidaAvailability:\n          Exclude<Host.AidaClient.AidaAccessPreconditions, Host.AidaClient.AidaAccessPreconditions.AVAILABLE>):\n      LitHtml.TemplateResult {\n    switch (aidaAvailability) {\n      case Host.AidaClient.AidaAccessPreconditions.NO_ACCOUNT_EMAIL:\n      case Host.AidaClient.AidaAccessPreconditions.SYNC_IS_PAUSED: {\n        return html`${i18nString(UIStrings.notLoggedIn)}`;\n      }\n      case Host.AidaClient.AidaAccessPreconditions.NO_INTERNET: {\n        return html`${i18nString(UIStrings.offline)}`;\n      }\n    }\n  }\n\n  #renderDisabledState(contents: LitHtml.TemplateResult): LitHtml.TemplateResult {\n    // clang-format off\n    return html`\n      <div class=\"empty-state-container\">\n        <div class=\"disabled-view\">\n          <div class=\"disabled-view-icon-container\">\n            <devtools-icon .data=${{\n              iconName: 'smart-assistant',\n              width: 'var(--sys-size-8)',\n              height: 'var(--sys-size-8)',\n            } as IconButton.Icon.IconData}>\n            </devtools-icon>\n          </div>\n          <div>\n            ${contents}\n          </div>\n        </div>\n      </div>\n    `;\n    // clang-format on\n  }\n\n  #renderNoAgentState(): LitHtml.TemplateResult {\n    const config = Common.Settings.Settings.instance().getHostConfig();\n\n    // clang-format off\n    return html`\n      <div class=\"messages-container\">\n        <section class=\"no-agent-message\" jslog=${VisualLogging.section('no-agent-entrypoint')}>\n          <div class=\"header\">\n            <devtools-icon name=\"smart-assistant\"></devtools-icon>\n            <h2>${lockedString(UIStringsNotTranslate.ai)}</h2>\n          </div>\n          <div class=\"instructions\">\n            <p>${lockedString(UIStringsNotTranslate.getStarted)}</p>\n            ${config.devToolsFreestyler?.enabled ? html`\n              <p><strong>${lockedString(UIStringsNotTranslate.cssHelp)}</strong> ${lockedString(UIStringsNotTranslate.cssHelpExplainer)}</p>\n            ` : LitHtml.nothing}\n            ${(config.devToolsAiAssistanceFileAgent?.enabled || config.devToolsAiAssistanceFileAgentDogfood?.enabled) ? html`\n              <p><strong>${lockedString(UIStringsNotTranslate.fileHelp)}</strong> ${lockedString(UIStringsNotTranslate.fileHelpExplainer)}</p>\n            ` : LitHtml.nothing}\n            ${(config.devToolsAiAssistanceNetworkAgent?.enabled  || config.devToolsExplainThisResourceDogfood?.enabled) ? html`\n              <p><strong>${lockedString(UIStringsNotTranslate.networkHelp)}</strong> ${lockedString(UIStringsNotTranslate.networkHelpExplainer)}</p>\n            ` : LitHtml.nothing}\n            ${(config.devToolsAiAssistancePerformanceAgent?.enabled || config.devToolsAiAssistancePerformanceAgentDogfood?.enabled) ? html`\n              <p><strong>${lockedString(UIStringsNotTranslate.performanceHelp)}</strong> ${lockedString(UIStringsNotTranslate.performanceHelpExplainer)}</p>\n            ` : LitHtml.nothing}\n          </div>\n        </section>\n      </div>\n    `;\n    // clang-format on\n  }\n\n  #renderMainContents(): LitHtml.TemplateResult {\n    if (this.#props.state === State.CONSENT_VIEW) {\n      return this.#renderDisabledState(this.#getConsentViewContents());\n    }\n\n    if (this.#props.aidaAvailability !== Host.AidaClient.AidaAccessPreconditions.AVAILABLE) {\n      return this.#renderDisabledState(this.#getUnavailableAidaAvailabilityContents(this.#props.aidaAvailability));\n    }\n\n    if (!this.#props.agentType) {\n      return this.#renderNoAgentState();\n    }\n\n    if (this.#props.messages.length > 0) {\n      return this.#renderMessages();\n    }\n\n    return this.#renderEmptyState();\n  }\n\n  #render(): void {\n    // clang-format off\n    LitHtml.render(html`\n      <div class=\"chat-ui\">\n        <main @scroll=${this.#handleScroll}>\n          ${this.#renderMainContents()}\n          <form class=\"input-form\" @submit=${this.#handleSubmit}>\n            ${this.#props.state !== State.CONSENT_VIEW ? html`\n              <div class=\"input-header\">\n                <div class=\"header-link-container\">\n                  ${this.#renderSelection()}\n                </div>\n              </div>\n            ` : LitHtml.nothing}\n            ${this.#renderChatInput()}\n          </form>\n        </main>\n        <footer class=\"disclaimer\">\n          <p class=\"disclaimer-text\">\n            ${this.#getDisclaimerText()}\n            <button\n              class=\"link\"\n              role=\"link\"\n              jslog=${VisualLogging.link('open-ai-settings').track({\n                click: true,\n              })}\n              @click=${() => {\n                void UI.ViewManager.ViewManager.instance().showView('chrome-ai');\n              }}\n            >${i18nString(UIStrings.learnAbout)}</button>\n          </p>\n        </footer>\n      </div>\n    `, this.#shadow, {host: this});\n    // clang-format on\n  }\n}\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    'devtools-freestyler-chat-ui': FreestylerChatUi;\n  }\n}\n\nexport const FOR_TEST = {\n  MarkdownRendererWithCodeBlock,\n};\n\ncustomElements.define('devtools-freestyler-chat-ui', FreestylerChatUi);\n"]}