{"version":3,"file":"ConsoleInsight.js","sourceRoot":"","sources":["../../../../../../../front_end/panels/explain/components/ConsoleInsight.ts"],"names":[],"mappings":"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","sourcesContent":["// Copyright 2023 The Chromium Authors. All rights reserved.\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\n\nimport * as Common from '../../../core/common/common.js';\nimport * as Host from '../../../core/host/host.js';\nimport * as i18n from '../../../core/i18n/i18n.js';\nimport type * as Platform from '../../../core/platform/platform.js';\nimport * as SDK from '../../../core/sdk/sdk.js';\nimport * as Marked from '../../../third_party/marked/marked.js';\nimport * as Buttons from '../../../ui/components/buttons/buttons.js';\nimport * as IconButton from '../../../ui/components/icon_button/icon_button.js';\nimport * as Input from '../../../ui/components/input/input.js';\nimport * as MarkdownView from '../../../ui/components/markdown_view/markdown_view.js';\nimport * as UI from '../../../ui/legacy/legacy.js';\nimport * as LitHtml from '../../../ui/lit-html/lit-html.js';\nimport * as VisualLogging from '../../../ui/visual_logging/visual_logging.js';\nimport {type PromptBuilder, type Source, SourceType} from '../PromptBuilder.js';\n\nimport styles from './consoleInsight.css.js';\nimport listStyles from './consoleInsightSourcesList.css.js';\n\nconst UIStrings = {\n  /**\n   * @description The title of the insight source \"Console message\".\n   */\n  consoleMessage: 'Console message',\n  /**\n   * @description The title of the insight source \"Stacktrace\".\n   */\n  stackTrace: 'Stacktrace',\n  /**\n   * @description The title of the insight source \"Network request\".\n   */\n  networkRequest: 'Network request',\n  /**\n   * @description The title of the insight source \"Related code\".\n   */\n  relatedCode: 'Related code',\n  /**\n   * @description The title that is shown while the insight is being generated.\n   */\n  generating: 'Generating explanation…',\n  /**\n   * @description The header that indicates that the content shown is a console\n   * insight.\n   */\n  insight: 'Explanation',\n  /**\n   * @description The title of the a button that closes the insight pane.\n   */\n  closeInsight: 'Close explanation',\n  /**\n   * @description The title of the list of source data that was used to generate the insight.\n   */\n  inputData: 'Data used to understand this message',\n  /**\n   * @description The title of the button that allows submitting positive\n   * feedback about the console insight.\n   */\n  thumbsUp: 'Thumbs up',\n  /**\n   * @description The title of the button that allows submitting negative\n   * feedback about the console insight.\n   */\n  thumbsDown: 'Thumbs down',\n  /**\n   * @description The title of the button that opens a page to report a legal\n   * issue with the console insight.\n   */\n  report: 'Report legal issue',\n  /**\n   * @description The title of the link that allows submitting more feedback.\n   */\n  submitFeedback: 'Submit feedback',\n  /**\n   * @description The text of the header inside the console insight pane when there was an error generating an insight.\n   */\n  error: 'DevTools has encountered an error',\n  /**\n   * @description The message shown when an error has been encountered.\n   */\n  errorBody: 'Something went wrong. Try again.',\n  /**\n   * @description Label for screenreaders that is added to the end of the link\n   * title to indicate that the link will be opened in a new tab.\n   */\n  opensInNewTab: '(opens in a new tab)',\n  /**\n   * @description The title of a link that allows the user to learn more about\n   * the feature.\n   */\n  learnMore: 'Learn more',\n  /**\n   * @description The title of the message when the console insight is not available for some reason.\n   */\n  notAvailable: 'This feature is not available',\n  /**\n   * @description The error message when the user is not logged in into Chrome.\n   */\n  notLoggedIn: 'This feature is only available when you sign into Chrome with your Google account.',\n  /**\n   * @description The error message when the user is not logged in into Chrome.\n   */\n  syncIsOff: 'This feature requires you to turn on Chrome sync.',\n  /**\n   * @description The title of the button that opens Chrome settings.\n   */\n  updateSettings: 'Update Settings',\n  /**\n   * @description The header shown when the internet connection is not\n   * available.\n   */\n  offlineHeader: 'DevTools can’t reach the internet',\n  /**\n   * @description Message shown when the user is offline.\n   */\n  offline: 'Check your internet connection and try again.',\n  /**\n   * @description The message shown if the user is not logged in.\n   */\n  signInToUse: 'Sign in to use this feature',\n  /**\n   * @description The title of the button that cancels a console insight flow.\n   */\n  cancel: 'Cancel',\n};\nconst str_ = i18n.i18n.registerUIStrings('panels/explain/components/ConsoleInsight.ts', UIStrings);\nconst i18nString = i18n.i18n.getLocalizedString.bind(undefined, str_);\n\nconst {render, html, Directives} = LitHtml;\n\nexport class CloseEvent extends Event {\n  static readonly eventName = 'close';\n\n  constructor() {\n    super(CloseEvent.eventName, {composed: true, bubbles: true});\n  }\n}\n\ntype PublicPromptBuilder = Pick<PromptBuilder, 'buildPrompt'|'getSearchQuery'>;\ntype PublicAidaClient = Pick<Host.AidaClient.AidaClient, 'fetch'>;\n\nfunction localizeType(sourceType: SourceType): string {\n  switch (sourceType) {\n    case SourceType.MESSAGE:\n      return i18nString(UIStrings.consoleMessage);\n    case SourceType.STACKTRACE:\n      return i18nString(UIStrings.stackTrace);\n    case SourceType.NETWORK_REQUEST:\n      return i18nString(UIStrings.networkRequest);\n    case SourceType.RELATED_CODE:\n      return i18nString(UIStrings.relatedCode);\n  }\n}\n\nconst DOGFOODFEEDBACK_URL = 'http://go/console-insights-experiment-general-feedback' as Platform.DevToolsPath.UrlString;\nconst DOGFOODINFO_URL = 'http://go/console-insights-experiment' as Platform.DevToolsPath.UrlString;\nconst REPORT_URL = 'https://support.google.com/legal/troubleshooter/1114905?hl=en#ts=1115658%2C13380504' as\n    Platform.DevToolsPath.UrlString;\n\nfunction buildRatingFormLink(\n    rating: 'Positive'|'Negative', comment: string, explanation: string, consoleMessage: string, stackTrace: string,\n    relatedCode: string, networkData: string): Platform.DevToolsPath.UrlString {\n  const params: {[key: string]: string} = rating === 'Negative' ? {\n    'entry.1465663861': rating,\n    'entry.1232404632': explanation,\n    'entry.37285503': stackTrace,\n    'entry.542010749': consoleMessage,\n    'entry.420621380': relatedCode,\n    'entry.822323774': networkData,\n  } :\n                                                                  {\n                                                                    'entry.1465663861': rating,\n                                                                    'entry.1805879004': explanation,\n                                                                    'entry.720239045': stackTrace,\n                                                                    'entry.623054399': consoleMessage,\n                                                                    'entry.1520357991': relatedCode,\n                                                                    'entry.1966708581': networkData,\n                                                                  };\n  return `http://go/console-insights-experiment-rating?usp=pp_url&${\n             Object.keys(params)\n                 .map(param => {\n                   return `${param}=${encodeURIComponent(params[param])}`;\n                 })\n                 .join('&')}` as Platform.DevToolsPath.UrlString;\n}\n\nconst enum State {\n  INSIGHT = 'insight',\n  LOADING = 'loading',\n  ERROR = 'error',\n  CONSENT_ONBOARDING = 'consent-onboarding',\n  CONSENT_REMINDER = 'consent-reminder',\n  NOT_LOGGED_IN = 'not-logged-in',\n  SYNC_IS_OFF = 'sync-is-off',\n  OFFLINE = 'offline',\n}\n\nconst enum ConsentOnboardingPage {\n  PAGE1 = 'private',\n  PAGE2 = 'legal',\n}\n\ntype StateData = {\n  type: State.LOADING,\n  consentOnboardingFinished: boolean,\n  consentReminderConfirmed: boolean,\n}|{\n  type: State.INSIGHT,\n  tokens: MarkdownView.MarkdownView.MarkdownViewData['tokens'],\n  validMarkdown: boolean,\n  sources: Source[],\n}&Host.AidaClient.AidaResponse|{\n  type: State.ERROR,\n  error: string,\n}|{\n  type: State.CONSENT_REMINDER,\n  sources: Source[],\n}|{\n  type: State.CONSENT_ONBOARDING,\n  page: ConsentOnboardingPage,\n}|{\n  type: State.NOT_LOGGED_IN,\n}|{\n  type: State.SYNC_IS_OFF,\n}|{\n  type: State.OFFLINE,\n};\n\nexport class ConsoleInsight extends HTMLElement {\n  static async create(promptBuilder: PublicPromptBuilder, aidaClient: PublicAidaClient): Promise<ConsoleInsight> {\n    const syncData = await new Promise<Host.InspectorFrontendHostAPI.SyncInformation>(resolve => {\n      Host.InspectorFrontendHost.InspectorFrontendHostInstance.getSyncInformation(syncInfo => {\n        resolve(syncInfo);\n      });\n    });\n\n    return new ConsoleInsight(promptBuilder, aidaClient, syncData);\n  }\n\n  static readonly litTagName = LitHtml.literal`devtools-console-insight`;\n  readonly #shadow = this.attachShadow({mode: 'open'});\n\n  #promptBuilder: PublicPromptBuilder;\n  #aidaClient: PublicAidaClient;\n  #renderer = new MarkdownRenderer();\n\n  // Main state.\n  #state: StateData;\n\n  // Rating sub-form state.\n  #selectedRating?: boolean;\n\n  constructor(\n      promptBuilder: PublicPromptBuilder, aidaClient: PublicAidaClient,\n      syncInfo?: Host.InspectorFrontendHostAPI.SyncInformation) {\n    super();\n    this.#promptBuilder = promptBuilder;\n    this.#aidaClient = aidaClient;\n    this.#state = {\n      type: State.NOT_LOGGED_IN,\n    };\n    if (syncInfo?.accountEmail && syncInfo.isSyncActive) {\n      this.#state = {\n        type: State.LOADING,\n        consentReminderConfirmed: false,\n        consentOnboardingFinished: this.#getOnboardingCompletedSetting().get(),\n      };\n    } else if (!syncInfo?.accountEmail) {\n      this.#state = {\n        type: State.NOT_LOGGED_IN,\n      };\n    } else if (!syncInfo?.isSyncActive) {\n      this.#state = {\n        type: State.SYNC_IS_OFF,\n      };\n    }\n    if (!navigator.onLine) {\n      this.#state = {\n        type: State.OFFLINE,\n      };\n    }\n    this.#render();\n    // Stop keyboard event propagation to avoid Console acting on the events\n    // inside the insight component.\n    this.addEventListener('keydown', e => {\n      e.stopPropagation();\n    });\n    this.addEventListener('keyup', e => {\n      e.stopPropagation();\n    });\n    this.addEventListener('keypress', e => {\n      e.stopPropagation();\n    });\n    this.addEventListener('click', e => {\n      e.stopPropagation();\n    });\n    this.tabIndex = 0;\n    this.focus();\n    // Measure the height of the element after an animation. `--actual-height` can\n    // be used as the `from` value for the subsequent animation.\n    this.addEventListener('animationend', () => {\n      this.style.setProperty('--actual-height', `${this.offsetHeight}px`);\n    });\n  }\n\n  #getOnboardingCompletedSetting(): Common.Settings.Setting<boolean> {\n    return Common.Settings.Settings.instance().createLocalSetting('console-insights-onboarding-finished', false);\n  }\n\n  connectedCallback(): void {\n    this.#shadow.adoptedStyleSheets = [styles, Input.checkboxStyles];\n    this.classList.add('opening');\n    void this.#generateInsightIfNeeded();\n  }\n\n  #transitionTo(newState: StateData): void {\n    const previousState = this.#state;\n    this.#state = newState;\n    if (newState.type !== previousState.type && previousState.type === State.LOADING) {\n      this.classList.add('loaded');\n    }\n    this.#render();\n  }\n\n  async #generateInsightIfNeeded(): Promise<void> {\n    if (this.#state.type !== State.LOADING) {\n      return;\n    }\n    if (!this.#state.consentOnboardingFinished) {\n      this.#transitionTo({\n        type: State.CONSENT_ONBOARDING,\n        page: ConsentOnboardingPage.PAGE1,\n      });\n      return;\n    }\n    if (!this.#state.consentReminderConfirmed) {\n      const {sources} = await this.#promptBuilder.buildPrompt();\n      this.#transitionTo({\n        type: State.CONSENT_REMINDER,\n        sources,\n      });\n      return;\n    }\n  }\n\n  #onClose(): void {\n    this.dispatchEvent(new CloseEvent());\n    this.classList.add('closing');\n  }\n\n  #openFeedbackFrom(): void {\n    if (this.#state.type !== State.INSIGHT) {\n      throw new Error('Unexpected state');\n    }\n    const link = buildRatingFormLink(\n        this.#selectedRating ? 'Positive' : 'Negative', this.#shadow.querySelector('textarea')?.value || '',\n        this.#state.explanation,\n        this.#state.sources.filter(s => s.type === SourceType.MESSAGE).map(s => s.value).join('\\n'),\n        this.#state.sources.filter(s => s.type === SourceType.STACKTRACE).map(s => s.value).join('\\n'),\n        this.#state.sources.filter(s => s.type === SourceType.RELATED_CODE).map(s => s.value).join('\\n'),\n        this.#state.sources.filter(s => s.type === SourceType.NETWORK_REQUEST).map(s => s.value).join('\\n'));\n    Host.InspectorFrontendHost.InspectorFrontendHostInstance.openInNewTab(link);\n  }\n\n  #onRating(event: Event): void {\n    if (this.#state.type !== State.INSIGHT) {\n      throw new Error('Unexpected state');\n    }\n    this.#selectedRating = (event.target as HTMLElement).dataset.rating === 'true';\n    if (this.#selectedRating) {\n      Host.userMetrics.actionTaken(Host.UserMetrics.Action.InsightRatedPositive);\n    } else {\n      Host.userMetrics.actionTaken(Host.UserMetrics.Action.InsightRatedNegative);\n    }\n    Host.InspectorFrontendHost.InspectorFrontendHostInstance.registerAidaClientEvent(JSON.stringify({\n      client: 'CHROME_DEVTOOLS',\n      event_time: new Date().toISOString(),\n      corresponding_aida_rpc_global_id: this.#state.metadata?.rpcGlobalId,\n      do_conversation_client_event: {\n        user_feedback: {\n          sentiment: this.#selectedRating ? 'POSITIVE' : 'NEGATIVE',\n        },\n      },\n    }));\n    this.#openFeedbackFrom();\n  }\n\n  #onReport(): void {\n    Host.InspectorFrontendHost.InspectorFrontendHostInstance.openInNewTab(REPORT_URL);\n  }\n\n  #onSearch(): void {\n    const query = this.#promptBuilder.getSearchQuery();\n    Host.InspectorFrontendHost.InspectorFrontendHostInstance.openSearchResultsInNewTab(query);\n  }\n\n  async #onConsentReminderConfirmed(): Promise<void> {\n    this.#transitionTo({\n      type: State.LOADING,\n      consentReminderConfirmed: true,\n      consentOnboardingFinished: this.#getOnboardingCompletedSetting().get(),\n    });\n    try {\n      for await (const {sources, explanation, metadata} of this.#getInsight()) {\n        const tokens = this.#validateMarkdown(explanation);\n        const valid = tokens !== false;\n        this.#transitionTo({\n          type: State.INSIGHT,\n          tokens: valid ? tokens : [],\n          validMarkdown: valid,\n          explanation,\n          sources,\n          metadata,\n        });\n      }\n      Host.userMetrics.actionTaken(Host.UserMetrics.Action.InsightGenerated);\n    } catch (err) {\n      Host.userMetrics.actionTaken(Host.UserMetrics.Action.InsightErrored);\n      this.#transitionTo({\n        type: State.ERROR,\n        error: err.message,\n      });\n    }\n  }\n\n  /**\n   * Validates the markdown by trying to render it.\n   */\n  #validateMarkdown(text: string): Marked.Marked.TokensList|false {\n    try {\n      const tokens = Marked.Marked.lexer(text);\n      for (const token of tokens) {\n        this.#renderer.renderToken(token);\n      }\n      return tokens;\n    } catch {\n      Host.userMetrics.actionTaken(Host.UserMetrics.Action.InsightErroredMarkdown);\n      return false;\n    }\n  }\n\n  async * #getInsight(): AsyncGenerator<{sources: Source[]}&Host.AidaClient.AidaResponse, void, void> {\n    const {prompt, sources} = await this.#promptBuilder.buildPrompt();\n    try {\n      for await (const response of this.#aidaClient.fetch(prompt)) {\n        yield {sources, ...response};\n      }\n    } catch (err) {\n      Host.userMetrics.actionTaken(Host.UserMetrics.Action.InsightErroredApi);\n      throw err;\n    }\n  }\n\n  #onGoToSettings(): void {\n    const rootTarget = SDK.TargetManager.TargetManager.instance().rootTarget();\n    if (rootTarget === null) {\n      return;\n    }\n    const url = 'chrome://settings' as Platform.DevToolsPath.UrlString;\n    void rootTarget.targetAgent().invoke_createTarget({url}).then(result => {\n      if (result.getError()) {\n        Host.InspectorFrontendHost.InspectorFrontendHostInstance.openInNewTab(url);\n      }\n    });\n  }\n\n  #onDisableFeature(): void {\n    try {\n      Common.Settings.moduleSetting('console-insights-enabled').set(false);\n    } finally {\n      this.#onClose();\n      UI.InspectorView.InspectorView.instance().displayReloadRequiredWarning('Reload for the change to apply.');\n    }\n  }\n\n  #goToNextPage(): void {\n    this.#transitionTo({\n      type: State.CONSENT_ONBOARDING,\n      page: ConsentOnboardingPage.PAGE2,\n    });\n  }\n\n  #termsChecked(): boolean {\n    const checkbox = this.#shadow.querySelector('.terms') as HTMLInputElement | undefined;\n    if (!checkbox?.checked) {\n      return false;\n    }\n    return true;\n  }\n\n  #onConsentOnboardingConfirmed(): void {\n    if (!this.#termsChecked()) {\n      return;\n    }\n    this.#getOnboardingCompletedSetting().set(true);\n    this.#transitionTo({\n      type: State.LOADING,\n      consentReminderConfirmed: false,\n      consentOnboardingFinished: this.#getOnboardingCompletedSetting().get(),\n    });\n    void this.#generateInsightIfNeeded();\n  }\n\n  #goToPrevPage(): void {\n    this.#transitionTo({\n      type: State.CONSENT_ONBOARDING,\n      page: ConsentOnboardingPage.PAGE1,\n    });\n  }\n\n  #renderCancelButton(): LitHtml.TemplateResult {\n    // clang-format off\n    return html`<${Buttons.Button.Button.litTagName}\n      class=\"cancel-button\"\n      @click=${this.#onClose}\n      .data=${\n        {\n          variant: Buttons.Button.Variant.SECONDARY,\n          jslogContext: 'cancel',\n        } as Buttons.Button.ButtonData\n      }\n    >\n      ${UIStrings.cancel}\n    </${Buttons.Button.Button.litTagName}>`;\n    // clang-format on\n  }\n\n  #renderDisableFeatureButton(): LitHtml.TemplateResult {\n    // clang-format off\n    return html`<${Buttons.Button.Button.litTagName}\n      @click=${this.#onDisableFeature}\n      class=\"disable-button\"\n      .data=${\n        {\n          variant: Buttons.Button.Variant.SECONDARY,\n          jslogContext: 'disable',\n        } as Buttons.Button.ButtonData\n      }\n    >\n      Disable this feature\n    </${Buttons.Button.Button.litTagName}>`;\n    // clang-format on\n  }\n\n  #renderNextButton(): LitHtml.TemplateResult {\n    // clang-format off\n    return html`<${Buttons.Button.Button.litTagName}\n      class=\"next-button\"\n      @click=${this.#goToNextPage}\n      .data=${\n        {\n          variant: Buttons.Button.Variant.PRIMARY,\n          jslogContext: 'next',\n        } as Buttons.Button.ButtonData\n      }\n    >\n      Next\n    </${Buttons.Button.Button.litTagName}>`;\n    // clang-format on\n  }\n\n  #renderBackButton(): LitHtml.TemplateResult {\n    // clang-format off\n    return html`<${Buttons.Button.Button.litTagName}\n      @click=${this.#goToPrevPage}\n      .data=${\n        {\n          variant: Buttons.Button.Variant.SECONDARY,\n          jslogContext: 'back',\n        } as Buttons.Button.ButtonData\n      }\n    >\n      Back\n    </${Buttons.Button.Button.litTagName}>`;\n    // clang-format on\n  }\n\n  #renderContinueButton(handler: (event: Event) => void, disabled = false): LitHtml.TemplateResult {\n    // clang-format off\n    return html`<${Buttons.Button.Button.litTagName}\n      @click=${handler}\n      class=\"continue-button\"\n      .data=${\n        {\n          variant: Buttons.Button.Variant.PRIMARY,\n          disabled,\n          jslogContext: 'continue',\n        } as Buttons.Button.ButtonData\n      }\n    >\n      Continue\n    </${Buttons.Button.Button.litTagName}>`;\n    // clang-format on\n  }\n\n  #renderSearchButton(): LitHtml.TemplateResult {\n    // clang-format off\n    return html`<${Buttons.Button.Button.litTagName}\n      @click=${this.#onSearch}\n      class=\"search-button\"\n      .data=${\n        {\n          variant: Buttons.Button.Variant.SECONDARY,\n        } as Buttons.Button.ButtonData\n      }\n    >\n      Use search instead\n    </${Buttons.Button.Button.litTagName}>`;\n    // clang-format on\n  }\n\n  #renderLearnMoreAboutInsights(): LitHtml.TemplateResult {\n    // clang-format off\n    return html`<x-link href=${DOGFOODINFO_URL} class=\"link\" jslog=${VisualLogging.link('learn-more').track({click: true})}>Learn more</x-link>`;\n    // clang-format on\n  }\n\n  #onTermsChange(): void {\n    this.#render();\n  }\n\n  #renderMain(): LitHtml.TemplateResult {\n    // clang-format off\n    switch (this.#state.type) {\n      case State.LOADING:\n        return html`<main>\n            <div role=\"presentation\" class=\"loader\" style=\"clip-path: url('#clipPath');\">\n              <svg width=\"100%\" height=\"64\">\n                <clipPath id=\"clipPath\">\n                  <rect x=\"0\" y=\"0\" width=\"100%\" height=\"16\" rx=\"8\"></rect>\n                  <rect x=\"0\" y=\"24\" width=\"100%\" height=\"16\" rx=\"8\"></rect>\n                  <rect x=\"0\" y=\"48\" width=\"100%\" height=\"16\" rx=\"8\"></rect>\n                </clipPath>\n              </svg>\n            </div>\n          </main>`;\n      case State.INSIGHT:\n        return html`\n        <main>\n          ${\n            this.#state.validMarkdown ? html`<${MarkdownView.MarkdownView.MarkdownView.litTagName}\n              .data=${{tokens: this.#state.tokens, renderer: this.#renderer} as MarkdownView.MarkdownView.MarkdownViewData}>\n            </${MarkdownView.MarkdownView.MarkdownView.litTagName}>`: this.#state.explanation\n          }\n          <details style=\"--list-height: ${this.#state.sources.length * 20}px;\">\n            <summary>${i18nString(UIStrings.inputData)}</summary>\n            <${ConsoleInsightSourcesList.litTagName} .sources=${this.#state.sources}>\n            </${ConsoleInsightSourcesList.litTagName}>\n          </details>\n          <div class=\"buttons\">\n            ${this.#renderSearchButton()}\n          </div>\n        </main>`;\n      case State.ERROR:\n        return html`\n        <main>\n          <div class=\"error\">${i18nString(UIStrings.errorBody)}</div>\n        </main>`;\n      case State.CONSENT_REMINDER:\n        return html`\n          <main>\n            <p>The following data will be sent to Google to understand the context for the console message.\n            Human reviewers may process this information for quality purposes.\n            Don’t submit sensitive information. Read Google’s <x-link href=\"https://policies.google.com/terms\" class=\"link\" jslog=${VisualLogging.link('terms-of-service').track({click: true})}>Terms of Service</x-link> and\n            the <x-link href=${'https://policies.google.com/terms/gener' + 'ative-ai'} class=\"link\" jslog=${VisualLogging.link('gener' + 'ative-ai-terms-of-service').track({click: true})}>${'Gener' + 'ative'} AI Additional Terms of Service</x-link>.</p>\n            <${ConsoleInsightSourcesList.litTagName} .sources=${this.#state.sources}>\n            </${ConsoleInsightSourcesList.litTagName}>\n          </main>\n        `;\n      case State.CONSENT_ONBOARDING:\n        switch (this.#state.page) {\n          case ConsentOnboardingPage.PAGE1:\n            return html`<main>\n              <p>This notice and our <x-link href=\"https://policies.google.com/privacy\" class=\"link\" jslog=${VisualLogging.link('privacy-notice').track({click: true})}>privacy notice</x-link> describe how Chrome DevTools handles your data. Please read them carefully.</p>\n\n              <p>Chrome DevTools uses the console message, associated stack trace, related source code, and the associated network headers as input data. When you use \"Understand this message\", Google collects this input data, generated output, related feature usage information, and your feedback. Google uses this data to provide, improve, and develop Google products and services and machine learning technologies, including Google's enterprise products such as Google Cloud.</p>\n\n              <p>To help with quality and improve our products, human reviewers may read, annotate, and process the above-mentioned input data, generated output, related feature usage information, and your feedback. <strong>Please do not include sensitive (e.g., confidential) or personal information that can be used to identify you or others in your prompts or feedback.</strong> Your data will be stored in a way where Google cannot tell who provided it and can no longer fulfill any deletion requests and will be retained for up to 18 months.</p>\n            </main>`;\n          case ConsentOnboardingPage.PAGE2:\n            return html`<main>\n            <p>As you try \"Understand this message\", here are key things to know:\n\n            <ul>\n              <li>Chrome DevTools uses console message, associated stack trace, related source code, and the associated network headers to provide answers.</li>\n              <li>Chrome DevTools uses experimental technology, and may generate inaccurate or offensive information that doesn't represent Google's views. Voting on the responses will help make Console insights better.</li>\n              <li>This feature is an experimental feature and subject to future changes.</li>\n              <li><strong><x-link class=\"link\" href=\"https://support.google.com/legal/answer/13505487\" jslog=${VisualLogging.link('use-code-with-caution').track({click: true})}>Use generated code snippets with caution</x-link>.</strong></li>\n            </ul>\n            </p>\n\n            <p>\n            <label>\n              <input class=\"terms\" @change=${this.#onTermsChange} type=\"checkbox\" jslog=${VisualLogging.toggle('terms-of-service-accepted')}>\n              <span>I accept my use of \"Understand this message\" is subject to the <x-link href=\"https://policies.google.com/terms\" class=\"link\" jslog=${VisualLogging.link('terms-of-service').track({click: true})}>Google Terms of Service</x-link> and the <x-link href=${'https://policies.google.com/terms/gener' + 'ative-ai'} class=\"link\" jslog=${VisualLogging.link('gener' + 'ative-ai-terms-of-service').track({click: true})}>${'Gener' + 'ative'} AI Additional Terms of Service</x-link>.</span>\n            </label>\n            </p>\n            </main>`;\n        }\n      case State.NOT_LOGGED_IN:\n        return html`\n          <main>\n            <div class=\"error\">${i18nString(UIStrings.notLoggedIn)}</div>\n          </main>`;\n      case State.SYNC_IS_OFF:\n        return html`\n          <main>\n            <div class=\"error\">${i18nString(UIStrings.syncIsOff)}</div>\n          </main>`;\n      case State.OFFLINE:\n        return html`\n          <main>\n            <div class=\"error\">${i18nString(UIStrings.offline)}</div>\n          </main>`;\n    }\n    // clang-format on\n  }\n\n  #renderDogfoodFeedbackLink(): LitHtml.TemplateResult {\n    // clang-format off\n    return html`<x-link href=${DOGFOODFEEDBACK_URL} class=\"link\" jslog=${VisualLogging.link('feedback').track({click: true})}>${i18nString(UIStrings.submitFeedback)}</x-link>`;\n    // clang-format on\n  }\n\n  #renderFooter(): LitHtml.LitTemplate {\n    const showFeedbackLink = (): boolean =>\n        this.#state.type === State.INSIGHT || this.#state.type === State.ERROR || this.#state.type === State.OFFLINE;\n    // clang-format off\n    const disclaimer =\n        LitHtml\n            .html`<span>\n                This feature may display inaccurate or offensive information that doesn't represent Google's views.\n                <x-link href=${DOGFOODINFO_URL} class=\"link\" jslog=${VisualLogging.link('learn-more').track({click: true})}>${i18nString(UIStrings.learnMore)}</x-link>\n                ${showFeedbackLink() ? LitHtml.html` - ${this.#renderDogfoodFeedbackLink()}`: LitHtml.nothing}\n            </span>`;\n    switch (this.#state.type) {\n      case State.LOADING:\n        return LitHtml.nothing;\n      case State.ERROR:\n      case State.OFFLINE:\n        return html`<footer>\n          <div class=\"disclaimer\">\n            ${disclaimer}\n          </div>\n        </footer>`;\n      case State.NOT_LOGGED_IN:\n      case State.SYNC_IS_OFF:\n        return html`<footer>\n        <div class=\"filler\"></div>\n        <div>\n          <${Buttons.Button.Button.litTagName}\n            @click=${this.#onGoToSettings}\n            .data=${\n              {\n                variant: Buttons.Button.Variant.PRIMARY,\n                jslogContext: 'update-settings',\n              } as Buttons.Button.ButtonData\n            }\n          >\n            ${UIStrings.updateSettings}\n          </${Buttons.Button.Button.litTagName}>\n        </div>\n      </footer>`;\n      case State.CONSENT_REMINDER:\n        return html`<footer>\n          <div class=\"disclaimer\">\n            ${disclaimer}\n          </div>\n          <div class=\"filler\"></div>\n          <div class=\"buttons\">\n            ${this.#renderCancelButton()}\n            ${this.#renderContinueButton(this.#onConsentReminderConfirmed)}\n          </div>\n        </footer>`;\n      case State.CONSENT_ONBOARDING:\n        switch (this.#state.page) {\n          case ConsentOnboardingPage.PAGE1:\n            return html`<footer>\n                <div class=\"disclaimer\">\n                  ${this.#renderLearnMoreAboutInsights()}\n                </div>\n                <div class=\"filler\"></div>\n                <div class=\"buttons\">\n                    ${this.#renderCancelButton()}\n                    ${this.#renderDisableFeatureButton()}\n                    ${this.#renderNextButton()}\n                  </div>\n              </footer>`;\n          case ConsentOnboardingPage.PAGE2:\n            return html`<footer>\n            <div class=\"disclaimer\">\n              ${this.#renderLearnMoreAboutInsights()}\n            </div>\n            <div class=\"filler\"></div>\n            <div class=\"buttons\">\n                ${this.#renderBackButton()}\n                ${this.#renderDisableFeatureButton()}\n                ${this.#renderContinueButton(this.#onConsentOnboardingConfirmed, !this.#termsChecked())}\n              </div>\n          </footer>`;\n        }\n      case State.INSIGHT:\n        return html`<footer>\n        <div class=\"disclaimer\">\n          ${disclaimer}\n        </div>\n        <div class=\"filler\"></div>\n        <div class=\"rating\">\n          <${Buttons.Button.Button.litTagName}\n            data-rating=${'true'}\n            .data=${\n              {\n                variant: Buttons.Button.Variant.ROUND,\n                size: Buttons.Button.Size.SMALL,\n                iconName: 'thumb-up',\n                active: this.#selectedRating,\n                title: i18nString(UIStrings.thumbsUp),\n                jslogContext: 'thumbs-up',\n              } as Buttons.Button.ButtonData\n            }\n            @click=${this.#onRating}\n          ></${Buttons.Button.Button.litTagName}>\n          <${Buttons.Button.Button.litTagName}\n            data-rating=${'false'}\n            .data=${\n              {\n                variant: Buttons.Button.Variant.ROUND,\n                size: Buttons.Button.Size.SMALL,\n                iconName: 'thumb-down',\n                active: this.#selectedRating !== undefined && !this.#selectedRating,\n                title: i18nString(UIStrings.thumbsDown),\n                jslogContext: 'thumbs-down',\n              } as Buttons.Button.ButtonData\n            }\n            @click=${this.#onRating}\n          ></${Buttons.Button.Button.litTagName}>\n          <${Buttons.Button.Button.litTagName}\n            .data=${\n              {\n                variant: Buttons.Button.Variant.ROUND,\n                size: Buttons.Button.Size.SMALL,\n                iconName: 'report',\n                title: i18nString(UIStrings.report),\n                jslogContext: 'report',\n              } as Buttons.Button.ButtonData\n            }\n            @click=${this.#onReport}\n          ></${Buttons.Button.Button.litTagName}>\n        </div>\n\n      </footer>`;\n    }\n    // clang-format on\n  }\n\n  #getHeader(): string {\n    switch (this.#state.type) {\n      case State.NOT_LOGGED_IN:\n        return i18nString(UIStrings.signInToUse);\n      case State.SYNC_IS_OFF:\n        return i18nString(UIStrings.notAvailable);\n      case State.OFFLINE:\n        return i18nString(UIStrings.offlineHeader);\n      case State.LOADING:\n        return i18nString(UIStrings.generating);\n      case State.INSIGHT:\n        return i18nString(UIStrings.insight);\n      case State.ERROR:\n        return i18nString(UIStrings.error);\n      case State.CONSENT_REMINDER:\n        return 'Data used to understand this message';\n      case State.CONSENT_ONBOARDING:\n        switch (this.#state.page) {\n          case ConsentOnboardingPage.PAGE1:\n            return 'Privacy notice';\n          case ConsentOnboardingPage.PAGE2:\n            return 'Legal notice';\n        }\n    }\n  }\n\n  #render(): void {\n    // clang-format off\n    render(html`\n      <div class=\"wrapper\" jslog=${VisualLogging.pane('console-insights').track({resize: true})}>\n        <header>\n          <div class=\"filler\">\n            <h2>\n              ${this.#getHeader()}\n            </h2>\n          </div>\n          <div>\n            <${Buttons.Button.Button.litTagName}\n              .data=${\n                {\n                  variant: Buttons.Button.Variant.ROUND,\n                  size: Buttons.Button.Size.SMALL,\n                  iconName: 'cross',\n                  title: i18nString(UIStrings.closeInsight),\n                } as Buttons.Button.ButtonData\n              }\n              jslog=${VisualLogging.close().track({click: true})}\n              @click=${this.#onClose}\n            ></${Buttons.Button.Button.litTagName}>\n          </div>\n        </header>\n        ${this.#renderMain()}\n        ${this.#renderFooter()}\n      </div>\n    `, this.#shadow, {\n      host: this,\n    });\n    // clang-format on\n  }\n}\n\nclass ConsoleInsightSourcesList extends HTMLElement {\n  static readonly litTagName = LitHtml.literal`devtools-console-insight-sources-list`;\n  readonly #shadow = this.attachShadow({mode: 'open'});\n  #sources: Source[] = [];\n\n  constructor() {\n    super();\n    this.#shadow.adoptedStyleSheets = [listStyles, Input.checkboxStyles];\n  }\n\n  #render(): void {\n    // clang-format off\n     render(html`\n      <ul>\n        ${Directives.repeat(this.#sources, item => item.value, item => {\n          return html`<li><x-link class=\"link\" title=\"${localizeType(item.type)} ${i18nString(UIStrings.opensInNewTab)}\" href=\"data:text/plain,${encodeURIComponent(item.value)}\" jslog=${VisualLogging.link('source-' + item.type).track({click: true})}>\n            <${IconButton.Icon.Icon.litTagName} name=\"open-externally\"></${IconButton.Icon.Icon.litTagName}>\n            ${localizeType(item.type)}\n          </x-link></li>`;\n        })}\n      </ul>\n    `, this.#shadow, {\n      host: this,\n    });\n    // clang-format on\n  }\n\n  set sources(values: Source[]) {\n    this.#sources = values;\n    this.#render();\n  }\n}\n\ncustomElements.define('devtools-console-insight', ConsoleInsight);\ncustomElements.define('devtools-console-insight-sources-list', ConsoleInsightSourcesList);\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    'devtools-console-insight': ConsoleInsight;\n    'devtools-console-insight-sources-list': ConsoleInsightSourcesList;\n  }\n}\n\nexport class MarkdownRenderer extends MarkdownView.MarkdownView.MarkdownLitRenderer {\n  override renderToken(token: Marked.Marked.Token): LitHtml.TemplateResult {\n    const template = this.templateForToken(token);\n    if (template === null) {\n      return LitHtml.html`${token.raw}`;\n    }\n    return template;\n  }\n\n  override templateForToken(token: Marked.Marked.Token): LitHtml.TemplateResult|null {\n    switch (token.type) {\n      case 'heading':\n        return html`<strong>${this.renderText(token)}</strong>`;\n      case 'link':\n      case 'image':\n        return LitHtml.html`${UI.XLink.XLink.create(token.href, token.text, undefined, undefined, 'token')}`;\n      case 'code':\n        return LitHtml.html`<${MarkdownView.CodeBlock.CodeBlock.litTagName}\n          .code=${this.unescape(token.text)}\n          .codeLang=${token.lang}\n          .displayNotice=${true}>\n        </${MarkdownView.CodeBlock.CodeBlock.litTagName}>`;\n    }\n    return super.templateForToken(token);\n  }\n}\n"]}