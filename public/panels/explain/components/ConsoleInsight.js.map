{"version":3,"file":"ConsoleInsight.js","sourceRoot":"","sources":["../../../../../../../front_end/panels/explain/components/ConsoleInsight.ts"],"names":[],"mappings":"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","sourcesContent":["// Copyright 2023 The Chromium Authors. All rights reserved.\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\n\nimport * as Host from '../../../core/host/host.js';\nimport * as i18n from '../../../core/i18n/i18n.js';\nimport type * as Platform from '../../../core/platform/platform.js';\nimport * as Marked from '../../../third_party/marked/marked.js';\nimport * as Buttons from '../../../ui/components/buttons/buttons.js';\nimport * as ComponentHelpers from '../../../ui/components/helpers/helpers.js';\nimport * as IconButton from '../../../ui/components/icon_button/icon_button.js';\nimport * as MarkdownView from '../../../ui/components/markdown_view/markdown_view.js';\nimport * as UI from '../../../ui/legacy/legacy.js';\nimport * as LitHtml from '../../../ui/lit-html/lit-html.js';\nimport {type InsightProvider} from '../InsightProvider.js';\nimport {type PromptBuilder, type Source, SourceType} from '../PromptBuilder.js';\n\nimport styles from './consoleInsight.css.js';\nimport listStyles from './consoleInsightSourcesList.css.js';\n\nconst UIStrings = {\n  /**\n   * @description The title of the button that allows providing the feebdack that a\n   * console message insight was inaccruate.\n   */\n  inaccurate: 'Inaccurate',\n  /**\n   * @description The title of the button that allows providing the feebdack that a\n   *console message insight was irrelevant.\n   */\n  irrelevant: 'Irrelevant',\n  /**\n   * @description The title of the button that allows providing the feebdack that a\n   *console message insight was inappropriate.\n   */\n  inappropriate: 'Inappropriate',\n  /**\n   * @description The title of the button that allows providing the feebdack that a\n   *console message insight was helpful.\n   */\n  notHelpful: 'Not helpful',\n  /**\n   * @description The title of the button that allows providing the feebdack that a\n   *console message insight was not good for an unknown \"other\" reason.\n   */\n  other: 'Other',\n  /**\n   * @description The title of the insight source \"Console message\".\n   */\n  consoleMessage: 'Console message',\n  /**\n   * @description The title of the insight source \"Stacktrace\".\n   */\n  stackTrace: 'Stacktrace',\n  /**\n   * @description The title of the insight source \"Network request\".\n   */\n  networkRequest: 'Network request',\n  /**\n   * @description The title of the insight source \"Related code\".\n   */\n  relatedCode: 'Related code',\n  /**\n   * @description The text appearing before the list of sources that DevTools\n   * could collect based on a console message. If the user clicks the button\n   * related to the text, these sources will be used to generate insights.\n   */\n  refineButtonHint:\n      'Click this button to send the following data to the AI model running on Google\\'s servers, so it can generate a more accurate and relevant response:',\n  /**\n   * @description The title that is shown while the insight is being generated.\n   */\n  generating: 'Generating…',\n  /**\n   * @description The header that indicates that the content shown is a console\n   * insight.\n   */\n  insight: 'Insight',\n  /**\n   * @description The title of the a button that closes the rating form.\n   */\n  close: 'Close',\n  /**\n   * @description The title of the a button that closes the insight pane.\n   */\n  closeInsight: 'Close insight',\n  /**\n   * @description The title of the list of source data that was used to generate the insight.\n   */\n  sources: 'Sources',\n  /**\n   * @description The title of the button that allows the user to include more\n   * sources for the generation of the console insight.\n   */\n  refine: 'Give context to personalize insight',\n  /**\n   * @description The title of the button that is shown while the console\n   * insight is being re-generated.\n   */\n  refining: 'Personalizing insight…',\n  /**\n   * @description The title of the button that allows submitting positive\n   * feedback about the console insight.\n   */\n  thumbUp: 'Thumb up',\n  /**\n   * @description The title of the button that allows submitting negative\n   * feedback about the console insight.\n   */\n  thumbDown: 'Thumb down',\n  /**\n   * @description The title of the link that allows submitting more feedback.\n   */\n  submitFeedback: 'Submit feedback',\n  /**\n   * @description The title indicating the dogfood phase of the feature.\n   */\n  dogfood: 'Dogfood',\n  /**\n   * @description The title of the rating form that asks for the reason for the rating.\n   */\n  reason: 'Why did you choose this rating? (optional)',\n  /**\n   * @description The placeholder for the textarea for providing additional\n   * feedback.\n   */\n  additionalFeedback: 'Provide additional feedback (optional)',\n  /**\n   * @description The title of the button that submits the feedback.\n   */\n  submit: 'Submit',\n  /**\n   * @description The text of the header inside the console insight pane when there was an error generating an insight.\n   */\n  error: 'Something went wrong…',\n  /**\n   * @description Title of the info icon button that shows more details about\n   * how refining a console insight will work. It shows a tooltip with\n   * additional info when hovered or pressed.\n   */\n  refineInfo: 'Learn how personalizing of insights works',\n\n  /**\n   * @description Label for screenreaders that is added to the end of the link\n   * title to indicate that the link will be opened in a new tab.\n   */\n  opensInNewTab: '(opens in a new tab)',\n};\nconst str_ = i18n.i18n.registerUIStrings('panels/explain/components/ConsoleInsight.ts', UIStrings);\nconst i18nString = i18n.i18n.getLocalizedString.bind(undefined, str_);\nconst i18nLazyString = i18n.i18n.getLazilyComputedLocalizedString.bind(undefined, str_);\n\nconst {render, html, Directives} = LitHtml;\n\nexport class CloseEvent extends Event {\n  static readonly eventName = 'close';\n\n  constructor() {\n    super(CloseEvent.eventName, {composed: true, bubbles: true});\n  }\n}\n\ntype PublicPromptBuilder = Pick<PromptBuilder, 'buildPrompt'>;\ntype PublicInsightProvider = Pick<InsightProvider, 'getInsights'>;\n\n// key => localized string.\nconst negativeRatingReasons: Array<[string, () => Platform.UIString.LocalizedString]> = [\n  ['inaccurate', i18nLazyString(UIStrings.inaccurate)],\n  ['irrelevant', i18nLazyString(UIStrings.irrelevant)],\n  ['inapproprate', i18nLazyString(UIStrings.inappropriate)],\n  ['not-helpful', i18nLazyString(UIStrings.notHelpful)],\n  ['other', i18nLazyString(UIStrings.other)],\n];\n\nfunction localizeType(sourceType: SourceType): string {\n  switch (sourceType) {\n    case SourceType.MESSAGE:\n      return i18nString(UIStrings.consoleMessage);\n    case SourceType.STACKTRACE:\n      return i18nString(UIStrings.stackTrace);\n    case SourceType.NETWORK_REQUEST:\n      return i18nString(UIStrings.networkRequest);\n    case SourceType.RELATED_CODE:\n      return i18nString(UIStrings.relatedCode);\n  }\n}\n\nconst DOGFOODFEEDBACK_URL = 'http://go/console-insights-experiment-general-feedback';\n\nfunction buildRatingFormLink(\n    rating: 'Positive'|'Negative', comment: string, explanation: string, consoleMessage: string, stackTrace: string,\n    relatedCode: string, networkData: string): Platform.DevToolsPath.UrlString {\n  const params: {[key: string]: string} = rating === 'Negative' ? {\n    'entry.1465663861': rating,\n    'entry.1232404632': explanation,\n    'entry.37285503': stackTrace,\n    'entry.542010749': consoleMessage,\n    'entry.420621380': relatedCode,\n    'entry.822323774': networkData,\n  } :\n                                                                  {\n                                                                    'entry.1465663861': rating,\n                                                                    'entry.1805879004': explanation,\n                                                                    'entry.720239045': stackTrace,\n                                                                    'entry.623054399': consoleMessage,\n                                                                    'entry.1520357991': relatedCode,\n                                                                    'entry.1966708581': networkData,\n                                                                  };\n  return `http://go/console-insights-experiment-rating?usp=pp_url&${\n             Object.keys(params)\n                 .map(param => {\n                   return `${param}=${encodeURIComponent(params[param])}`;\n                 })\n                 .join('&')}` as Platform.DevToolsPath.UrlString;\n}\n\nconst enum State {\n  INSIGHT = 'insight',\n  LOADING = 'loading',\n  REFINING = 'refining',\n  ERROR = 'error',\n}\n\ntype StateData = {\n  type: State.LOADING,\n}|{\n  type: State.REFINING | State.INSIGHT,\n  explanation: string,\n  tokens: MarkdownView.MarkdownView.MarkdownViewData['tokens'],\n  sources: Source[],\n  refined: boolean,\n}|{\n  type: State.ERROR,\n  error: string,\n};\n\nlet nextInstanceId = 0;\n\nexport class ConsoleInsight extends HTMLElement {\n  static readonly litTagName = LitHtml.literal`devtools-console-insight`;\n  readonly #shadow = this.attachShadow({mode: 'open'});\n\n  // Flip to false to enable non-dogfood branding. Note that rating is not\n  // implemented.\n  #dogfood = true;\n  // Flip to false to enable a refine button.\n  readonly #refinedByDefault = false;\n\n  #promptBuilder: PublicPromptBuilder;\n  #insightProvider: PublicInsightProvider;\n  #renderer = new MarkdownRenderer();\n\n  // Main state.\n  #state: StateData = {\n    type: State.LOADING,\n  };\n\n  // Rating sub-form state.\n  #ratingFormOpened = false;\n  #selectedRating?: boolean;\n  #selectedRatingReasons = new Set<string>();\n\n  #popover: UI.PopoverHelper.PopoverHelper;\n  #id: number;\n  #popoverInitiatedViaKeyboard = false;\n\n  constructor(promptBuilder: PublicPromptBuilder, insightProvider: PublicInsightProvider) {\n    super();\n    this.#promptBuilder = promptBuilder;\n    this.#insightProvider = insightProvider;\n    this.#render();\n    // Stop keyboard event propagation to avoid Console acting on the events\n    // inside the insight component.\n    this.addEventListener('keydown', e => {\n      e.stopPropagation();\n    });\n    this.addEventListener('keyup', e => {\n      e.stopPropagation();\n    });\n    this.addEventListener('keypress', e => {\n      e.stopPropagation();\n    });\n    this.tabIndex = 0;\n    this.#id = nextInstanceId++;\n    this.focus();\n    this.#popover = new UI.PopoverHelper.PopoverHelper(this, this.#onPopoverRequest.bind(this));\n    this.#popover.setTimeout(300);\n    this.#popover.setHasPadding(true);\n    // Measure the height of the element after an animation. `--actual-height` can\n    // be used as the `from` value for the subsequent animation.\n    this.addEventListener('animationend', () => {\n      this.style.setProperty('--actual-height', `${this.offsetHeight}px`);\n    });\n  }\n\n  #onPopoverRequest(event: MouseEvent): UI.PopoverHelper.PopoverRequest|null {\n    const hoveredNode = event.composedPath()[0] as Element;\n    if (!hoveredNode || !hoveredNode.isSelfOrDescendant(this.#shadow.querySelector('.info'))) {\n      return null;\n    }\n\n    const trapFocus = this.#popoverInitiatedViaKeyboard || event.type !== 'mousemove';\n\n    return {\n      box: hoveredNode.boxInWindow(),\n      show: async(popover: UI.GlassPane.GlassPane): Promise<boolean> => {\n        const {sources} = await this.#promptBuilder.buildPrompt();\n\n        const dialogId = `dialog-${this.#id}`;\n\n        const container = document.createElement('div');\n        container.style.display = 'flex';\n        container.style.flexDirection = 'column';\n        container.style.fontSize = '13px';\n        container.style.lineHeight = '20px';\n        container.setAttribute('aria-modal', 'true');\n        container.tabIndex = -1;\n        container.role = 'dialog';\n\n        if (trapFocus) {\n          container.addEventListener('keydown', event => {\n            const keyboardEvent = event as KeyboardEvent;\n\n            if (keyboardEvent.key === 'Tab') {\n              const focusableElements = getFocusableElements(popover);\n              const focusedElement = getFocusedElement(popover);\n              // Trap focus for the tab navigation inside the dialog.\n              if (focusedElement) {\n                const focusedItemIdx = focusableElements.indexOf(focusedElement);\n                if (event.shiftKey && focusedItemIdx === 0) {\n                  focusableElements.at(-1)?.focus();\n                  event.preventDefault();\n                } else if (!event.shiftKey && focusedItemIdx === focusableElements.length - 1) {\n                  focusableElements.at(0)?.focus();\n                  event.preventDefault();\n                }\n              }\n            } else if (keyboardEvent.key === 'Escape') {\n              event.consume(true);\n              // Restore focus to the info icon.\n              this.#popover.hidePopover();\n              (this.#shadow.querySelector('.info') as HTMLElement)?.focus();\n            }\n          });\n        }\n\n        const doc = document.createElement('div');\n        doc.role = 'document';\n        doc.tabIndex = 0;\n        doc.setAttribute('aria-describedby', dialogId);\n        container.append(doc);\n\n        const text = document.createElement('p');\n        text.id = dialogId;\n        text.innerText = i18nString(UIStrings.refineButtonHint);\n        text.style.margin = '0';\n        doc.append(text);\n\n        const list = document.createElement('devtools-console-insight-sources-list');\n        list.sources = sources;\n        doc.append(list);\n\n        popover.contentElement.append(container);\n        popover.setAnchorBehavior(UI.GlassPane.AnchorBehavior.PreferBottom);\n\n        if (trapFocus) {\n          const origShow = popover.show;\n          popover.show = (document: Document): void => {\n            origShow.call(popover, document);\n            (popover.contentElement.querySelector('[role=document]') as HTMLElement)?.focus();\n          };\n          const origHide = popover.hide;\n          popover.hide = (): void => {\n            origHide.call(popover);\n            (this.#shadow.querySelector('.info') as HTMLElement)?.focus();\n          };\n        }\n        return true;\n      },\n    };\n  }\n\n  connectedCallback(): void {\n    this.#shadow.adoptedStyleSheets = [styles];\n    this.classList.add('opening');\n  }\n\n  disonnectedCallback(): void {\n    this.#popover.dispose();\n  }\n\n  set dogfood(value: boolean) {\n    this.#dogfood = value;\n    this.#render();\n  }\n\n  get dogfood(): boolean {\n    return this.#dogfood;\n  }\n\n  #transitionTo(newState: StateData): void {\n    const previousState = this.#state;\n    this.#state = newState;\n    if (newState.type !== previousState.type && previousState.type === State.LOADING) {\n      this.classList.add('loaded');\n    }\n    this.#render();\n  }\n\n  async update(includeContext = this.#refinedByDefault): Promise<void> {\n    this.#transitionTo(\n        this.#state.type === State.INSIGHT ? {\n          ...this.#state,\n          type: State.REFINING,\n        } :\n                                             {\n                                               type: State.LOADING,\n                                             });\n    try {\n      const requestedSources = includeContext ? undefined : [SourceType.MESSAGE];\n      const {prompt, sources} = await this.#promptBuilder.buildPrompt(requestedSources);\n      const explanation = await this.#insightProvider.getInsights(prompt);\n      this.#transitionTo({\n        type: State.INSIGHT,\n        tokens: Marked.Marked.lexer(explanation),\n        explanation,\n        sources,\n        refined: includeContext,\n      });\n    } catch (err) {\n      Host.userMetrics.actionTaken(Host.UserMetrics.Action.InsightErrored);\n      this.#transitionTo({\n        type: State.ERROR,\n        error: err.message,\n      });\n    }\n  }\n\n  #onClose(): void {\n    this.dispatchEvent(new CloseEvent());\n    this.classList.add('closing');\n  }\n\n  #onCloseRating(): void {\n    this.#ratingFormOpened = false;\n    this.#selectedRating = undefined;\n    this.#selectedRatingReasons.clear();\n    this.#render();\n  }\n\n  #onSubmit(): void {\n    if (this.#dogfood) {\n      this.#openFeedbackFrom();\n    }\n    this.#onCloseRating();\n  }\n\n  #openFeedbackFrom(): void {\n    if (this.#state.type !== State.INSIGHT) {\n      throw new Error('Unexpected state');\n    }\n    const link = buildRatingFormLink(\n        this.#selectedRating ? 'Positive' : 'Negative', this.#shadow.querySelector('textarea')?.value || '',\n        this.#state.explanation,\n        this.#state.sources.filter(s => s.type === SourceType.MESSAGE).map(s => s.value).join('\\n'),\n        this.#state.sources.filter(s => s.type === SourceType.STACKTRACE).map(s => s.value).join('\\n'),\n        this.#state.sources.filter(s => s.type === SourceType.RELATED_CODE).map(s => s.value).join('\\n'),\n        this.#state.sources.filter(s => s.type === SourceType.NETWORK_REQUEST).map(s => s.value).join('\\n'));\n    Host.InspectorFrontendHost.InspectorFrontendHostInstance.openInNewTab(link);\n  }\n\n  #onRating(event: Event): void {\n    this.#selectedRating = (event.target as HTMLElement).dataset.rating === 'true';\n    if (this.#selectedRating) {\n      Host.userMetrics.actionTaken(Host.UserMetrics.Action.InsightRatedPositive);\n    } else {\n      Host.userMetrics.actionTaken(Host.UserMetrics.Action.InsightRatedNegative);\n    }\n    if (this.#dogfood) {\n      this.#openFeedbackFrom();\n      return;\n    }\n    this.#ratingFormOpened = true;\n\n    this.#render();\n  }\n\n  #onReason(event: Event): void {\n    const target = event.target as Buttons.Button.Button;\n    if (!target.active) {\n      this.#selectedRatingReasons.add(target.dataset.reason as string);\n    } else {\n      this.#selectedRatingReasons.delete(target.dataset.reason as string);\n    }\n    this.#render();\n  }\n\n  #onRefine(): void {\n    if (this.#state.type !== State.INSIGHT) {\n      throw new Error('Unexpected state');\n    }\n    Host.userMetrics.actionTaken(Host.UserMetrics.Action.InsightRefined);\n    void this.update(true);\n  }\n\n  #onInfoKeyDown(event: Event): void {\n    if (event instanceof KeyboardEvent) {\n      switch (event.key) {\n        case 'Escape':\n          event.consume(true);\n          this.#popover.hidePopover();\n          break;\n        case 'Enter':\n        case ' ':\n          event.consume(true);\n          this.#popoverInitiatedViaKeyboard = true;\n          try {\n            event.target?.dispatchEvent(new MouseEvent('mousedown', {\n              bubbles: true,\n              composed: true,\n              cancelable: true,\n              clientX: (event.target as HTMLElement).getBoundingClientRect().x,\n              clientY: (event.target as HTMLElement).getBoundingClientRect().y,\n            }));\n          } finally {\n            this.#popoverInitiatedViaKeyboard = false;\n          }\n          break;\n      }\n    }\n  }\n\n  #renderMain(): LitHtml.TemplateResult {\n    // clang-format off\n    switch (this.#state.type) {\n      case State.LOADING:\n        return html`<main>\n            <div role=\"presentation\" class=\"loader\" style=\"clip-path: url('#clipPath');\">\n              <svg width=\"100%\" height=\"64\">\n                <clipPath id=\"clipPath\">\n                  <rect x=\"0\" y=\"0\" width=\"100%\" height=\"16\" rx=\"8\"></rect>\n                  <rect x=\"0\" y=\"24\" width=\"100%\" height=\"16\" rx=\"8\"></rect>\n                  <rect x=\"0\" y=\"48\" width=\"100%\" height=\"16\" rx=\"8\"></rect>\n                </clipPath>\n              </svg>\n            </div>\n          </main>`;\n      case State.REFINING:\n      case State.INSIGHT:\n        return html`\n        <main>\n          <${MarkdownView.MarkdownView.MarkdownView.litTagName}\n            .data=${{tokens: this.#state.tokens, renderer: this.#renderer} as MarkdownView.MarkdownView.MarkdownViewData}>\n          </${MarkdownView.MarkdownView.MarkdownView.litTagName}>\n          <details style=\"--list-height: ${this.#state.sources.length * 20}px;\">\n            <summary>${i18nString(UIStrings.sources)}</summary>\n            <${ConsoleInsightSourcesList.litTagName} .sources=${this.#state.sources}>\n            </${ConsoleInsightSourcesList.litTagName}>\n          </details>\n          ${!this.#state.refined ? html`<div class=\"refine-container\">\n            <${Buttons.Button.Button.litTagName}\n                class=\"refine-button\"\n                .data=${\n                  {\n                    variant: Buttons.Button.Variant.TONAL,\n                    size: Buttons.Button.Size.MEDIUM,\n                    iconName: 'spark',\n                  } as Buttons.Button.ButtonData\n                }\n                @click=${this.#onRefine}\n              >\n              ${this.#state.type === State.REFINING ? i18nString(UIStrings.refining) : i18nString(UIStrings.refine)}\n            </${Buttons.Button.Button.litTagName}>\n            <${Buttons.Button.Button.litTagName}\n              class=\"info\"\n              .data=${\n                {\n                  variant: Buttons.Button.Variant.ROUND,\n                  size: Buttons.Button.Size.SMALL,\n                  iconName: 'info',\n                  title: i18nString(UIStrings.refineInfo),\n                } as Buttons.Button.ButtonData\n              }\n              @keydown=${this.#onInfoKeyDown}\n            ></${Buttons.Button.Button.litTagName}>\n          </div>\n          ` : ''}\n        </main>`;\n      case State.ERROR:\n        return html`\n        <main>\n          <div class=\"error\">${this.#state.error}</div>\n        </main>`;\n    }\n    // clang-format on\n  }\n\n  #renderFooter(): LitHtml.LitTemplate {\n    // clang-format off\n    switch (this.#state.type) {\n      case State.LOADING:\n      case State.ERROR:\n        return LitHtml.nothing;\n      case State.INSIGHT:\n      case State.REFINING:\n        return html`<footer>\n        <div>\n          <${Buttons.Button.Button.litTagName}\n            data-rating=${'true'}\n            .data=${\n              {\n                variant: Buttons.Button.Variant.ROUND,\n                size: Buttons.Button.Size.SMALL,\n                iconName: 'thumb-up',\n                active: this.#selectedRating,\n                title: i18nString(UIStrings.thumbUp),\n              } as Buttons.Button.ButtonData\n            }\n            @click=${this.#onRating}\n          ></${Buttons.Button.Button.litTagName}>\n          <${Buttons.Button.Button.litTagName}\n            data-rating=${'false'}\n            .data=${\n              {\n                variant: Buttons.Button.Variant.ROUND,\n                size: Buttons.Button.Size.SMALL,\n                iconName: 'thumb-down',\n                active: this.#selectedRating !== undefined && !this.#selectedRating,\n                title: i18nString(UIStrings.thumbDown),\n              } as Buttons.Button.ButtonData\n            }\n            @click=${this.#onRating}\n          ></${Buttons.Button.Button.litTagName}>\n        </div>\n        <div class=\"filler\"></div>\n        ${this.#dogfood ? html`<div class=\"dogfood-feedback\">\n            <${IconButton.Icon.Icon.litTagName} name=\"dog-paw\"></${IconButton.Icon.Icon.litTagName}>\n            <span>${i18nString(UIStrings.dogfood)} - </span>\n            <x-link href=${DOGFOODFEEDBACK_URL} class=\"link\">${i18nString(UIStrings.submitFeedback)}</x-link>\n        </div>`: ''}\n      </footer>`;\n    }\n    // clang-format on\n  }\n\n  #getHeader(): string {\n    switch (this.#state.type) {\n      case State.LOADING:\n        return i18nString(UIStrings.generating);\n      case State.INSIGHT:\n      case State.REFINING:\n        return i18nString(UIStrings.insight);\n      case State.ERROR:\n        return i18nString(UIStrings.error);\n    }\n  }\n\n  #render(): void {\n    const topWrapper = Directives.classMap({\n      wrapper: true,\n      top: this.#ratingFormOpened,\n    });\n    const bottomWrapper = Directives.classMap({\n      wrapper: true,\n      bottom: this.#ratingFormOpened,\n    });\n    // clang-format off\n    render(html`\n      <div class=${topWrapper}>\n        <header>\n          <div>\n            <${IconButton.Icon.Icon.litTagName} name=\"spark\"></${IconButton.Icon.Icon.litTagName}>\n          </div>\n          <div class=\"filler\">\n            <h2>\n              ${this.#getHeader()}\n            </h2>\n          </div>\n          <div>\n            <${Buttons.Button.Button.litTagName}\n              .data=${\n                {\n                  variant: Buttons.Button.Variant.ROUND,\n                  size: Buttons.Button.Size.SMALL,\n                  iconName: 'cross',\n                  title: i18nString(UIStrings.closeInsight),\n                } as Buttons.Button.ButtonData\n              }\n              @click=${this.#onClose}\n            ></${Buttons.Button.Button.litTagName}>\n          </div>\n        </header>\n        ${this.#renderMain()}\n        ${this.#renderFooter()}\n      </div>\n      ${this.#ratingFormOpened ? html`\n        <div class=${bottomWrapper}>\n          <header>\n            <div class=\"filler\">${i18nString(UIStrings.reason)}</div>\n            <div>\n              <${Buttons.Button.Button.litTagName}\n                .data=${\n                  {\n                    variant: Buttons.Button.Variant.ROUND,\n                    size: Buttons.Button.Size.SMALL,\n                    iconName: 'cross',\n                    title: i18nString(UIStrings.close),\n                  } as Buttons.Button.ButtonData\n                }\n                @click=${this.#onCloseRating}\n              ></${Buttons.Button.Button.litTagName}>\n            </div>\n          </header>\n          <main>\n            ${!this.#selectedRating ? html`\n                <div class=\"buttons\">\n                  ${Directives.repeat(negativeRatingReasons, ([key, label]) => {\n                    return html`\n                      <${Buttons.Button.Button.litTagName}\n                        data-reason=${key}\n                        @click=${this.#onReason}\n                        .data=${\n                          {\n                            variant: Buttons.Button.Variant.SECONDARY,\n                            size: Buttons.Button.Size.MEDIUM,\n                            active: this.#selectedRatingReasons.has(key),\n                          } as Buttons.Button.ButtonData\n                        }\n                      >\n                        ${label()}\n                      </${Buttons.Button.Button.litTagName}>\n                    `;\n                  })}\n                </div>\n            ` : ''}\n            <textarea placeholder=${i18nString(UIStrings.additionalFeedback)}></textarea>\n          </main>\n          <footer>\n            <div class=\"filler\"></div>\n            <div>\n              <${Buttons.Button.Button.litTagName}\n                .data=${\n                  {\n                    variant: Buttons.Button.Variant.PRIMARY,\n                    size: Buttons.Button.Size.MEDIUM,\n                    title: i18nString(UIStrings.submit),\n                  } as Buttons.Button.ButtonData\n                }\n                @click=${this.#onSubmit}\n              >\n                ${i18nString(UIStrings.submit)}\n              </${Buttons.Button.Button.litTagName}>\n            </div>\n          </footer>\n        </div>\n      ` : ''}\n    `, this.#shadow, {\n      host: this,\n    });\n    // clang-format on\n  }\n}\n\nclass ConsoleInsightSourcesList extends HTMLElement {\n  static readonly litTagName = LitHtml.literal`devtools-console-insight-sources-list`;\n  readonly #shadow = this.attachShadow({mode: 'open'});\n  #sources: Source[] = [];\n\n  constructor() {\n    super();\n    this.#shadow.adoptedStyleSheets = [listStyles];\n  }\n\n  #render(): void {\n    // clang-format off\n     render(html`\n      <ul>\n        ${Directives.repeat(this.#sources, item => item.value, item => {\n          const icon = new IconButton.Icon.Icon();\n          icon.data = {iconName: 'open-externally', color: 'var(--sys-color-primary)', width: '14px', height: '14px'};\n          return html`<li><x-link class=\"link\" title=\"${localizeType(item.type)} ${i18nString(UIStrings.opensInNewTab)}\" href=${`data:text/plain,${encodeURIComponent(item.value)}`}>${localizeType(item.type)}${icon}</x-link></li>`;\n        })}\n      </ul>\n    `, this.#shadow, {\n      host: this,\n    });\n    // clang-format on\n  }\n\n  set sources(values: Source[]) {\n    this.#sources = values;\n    this.#render();\n  }\n}\n\nComponentHelpers.CustomElements.defineComponent('devtools-console-insight', ConsoleInsight);\nComponentHelpers.CustomElements.defineComponent('devtools-console-insight-sources-list', ConsoleInsightSourcesList);\n\ndeclare global {\n  // eslint-disable-next-line @typescript-eslint/no-unused-vars\n  interface HTMLElementTagNameMap {\n    'devtools-console-insight': ConsoleInsight;\n    'devtools-console-insight-sources-list': ConsoleInsightSourcesList;\n  }\n}\n\nexport class MarkdownRenderer extends MarkdownView.MarkdownView.MarkdownLitRenderer {\n  override renderToken(token: Marked.Marked.Token): LitHtml.TemplateResult {\n    const template = this.templateForToken(token);\n    if (template === null) {\n      console.warn(`Markdown token type '${token.type}' not supported.`);\n      return LitHtml.html``;\n    }\n    return template;\n  }\n\n  override templateForToken(token: Marked.Marked.Token): LitHtml.TemplateResult|null {\n    switch (token.type) {\n      case 'heading':\n        return html`<strong>${this.renderText(token)}</strong>`;\n      case 'link':\n      case 'image':\n        return LitHtml.html`${UI.XLink.XLink.create(token.href, token.text, undefined, undefined, 'token')}`;\n    }\n    return super.templateForToken(token);\n  }\n}\n\nfunction getFocusedElement(popover: UI.GlassPane.GlassPane): HTMLElement|undefined {\n  const root = popover.contentElement.getComponentRoot();\n  if (!(root instanceof ShadowRoot)) {\n    throw new Error('Expected a shadow root');\n  }\n  let focusedElement = root.activeElement;\n  while (focusedElement && focusedElement.shadowRoot?.activeElement) {\n    focusedElement = focusedElement.shadowRoot?.activeElement;\n  }\n  return focusedElement as HTMLElement | undefined;\n}\n\nfunction getFocusableElements(popover: UI.GlassPane.GlassPane): HTMLElement[] {\n  const root = popover.contentElement.getComponentRoot();\n  if (!(root instanceof ShadowRoot)) {\n    throw new Error('Expected a shadow root');\n  }\n\n  const focusableSelectors = [\n    'x-link',\n    '[role=document]',\n  ];\n\n  const result: HTMLElement[] = [];\n\n  function walk(root: Node): void {\n    const iter = document.createTreeWalker(root, NodeFilter.SHOW_ELEMENT);\n    do {\n      const currentNode = iter.currentNode as HTMLElement;\n      if (currentNode.shadowRoot) {\n        walk(currentNode.shadowRoot);\n      }\n      if (currentNode instanceof ShadowRoot) {\n        continue;\n      }\n      if (currentNode !== root && focusableSelectors.some(selector => currentNode.matches(selector))) {\n        result.push(currentNode);\n      }\n    } while (iter.nextNode());\n  }\n\n  walk(root.host);\n\n  return result;\n}\n"]}