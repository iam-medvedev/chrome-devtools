{"version":3,"file":"ConsoleInsight.test.js","sourceRoot":"","sources":["../../../../../../../front_end/panels/explain/components/ConsoleInsight.test.ts"],"names":[],"mappings":"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","sourcesContent":["// Copyright 2023 The Chromium Authors\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\n\nimport * as Common from '../../../core/common/common.js';\nimport * as Host from '../../../core/host/host.js';\nimport type * as Platform from '../../../core/platform/platform.js';\nimport {createConsoleInsightWidget} from '../../../testing/ConsoleInsightHelpers.js';\nimport {\n  assertScreenshot,\n  getCleanTextContentFromElements,\n  renderElementIntoDOM,\n} from '../../../testing/DOMHelpers.js';\nimport {describeWithEnvironment, updateHostConfig} from '../../../testing/EnvironmentHelpers.js';\nimport * as MarkdownView from '../../../ui/components/markdown_view/markdown_view.js';\nimport * as Lit from '../../../ui/lit/lit.js';\nimport * as Console from '../../console/console.js';\nimport * as Explain from '../explain.js';\n\ntype Insight = Extract<Explain.ViewInput['state'], {type: Explain.State.INSIGHT}>;\n\ndescribeWithEnvironment('ConsoleInsight', () => {\n  let component: Explain.ConsoleInsight|undefined;\n\n  function createConsoleInsight(\n      promptBuilder: Explain.PublicPromptBuilder,\n      aidaClient: Explain.PublicAidaClient,\n      aidaPreconditions: Host.AidaClient.AidaAccessPreconditions,\n  ) {\n    const checkAccessPreconditionsStub = sinon.stub(Host.AidaClient.AidaClient, 'checkAccessPreconditions');\n    checkAccessPreconditionsStub.callsFake(() => Promise.resolve(aidaPreconditions));\n    const component = new Explain.ConsoleInsight(promptBuilder, aidaClient, aidaPreconditions);\n    return {component, checkAccessPreconditionsStub};\n  }\n\n  const containerCss = `\n      box-sizing: border-box;\n      background-color: aqua;\n    `;\n\n  beforeEach(() => {\n    sinon.stub(Host.AidaClient.HostConfigTracker.instance(), 'pollAidaAvailability').callsFake(async () => {});\n  });\n\n  afterEach(() => {\n    component?.detach();\n    Common.Settings.settingForTest('console-insights-enabled').set(true);\n    Common.Settings.settingForTest('console-insights-onboarding-finished').set(true);\n  });\n\n  function getTestPromptBuilder() {\n    return {\n      async buildPrompt() {\n        return {\n          prompt: '',\n          sources: [\n            {\n              type: Console.PromptBuilder.SourceType.MESSAGE,\n              value: 'error message',\n            },\n          ],\n          isPageReloadRecommended: true,\n        };\n      },\n      getSearchQuery() {\n        return '';\n      },\n    };\n  }\n\n  it('shows opt-in teaser when setting is turned off', async () => {\n    Common.Settings.settingForTest('console-insights-enabled').set(false);\n    const {view, component} = await createConsoleInsightWidget();\n\n    assert.strictEqual(view.input.state.type, Explain.State.LOADING);\n\n    component.wasShown();\n    const nextInput = await view.nextInput;\n\n    assert.strictEqual(nextInput.state.type, Explain.State.SETTING_IS_NOT_TRUE);\n  });\n\n  it('shows opt-in teaser when blocked by age', async () => {\n    updateHostConfig({\n      aidaAvailability: {\n        blockedByAge: true,\n      },\n      devToolsConsoleInsights: {\n        enabled: true,\n      },\n    });\n\n    const {view, component} = await createConsoleInsightWidget();\n\n    assert.strictEqual(view.input.state.type, Explain.State.LOADING);\n\n    component.wasShown();\n    const nextInput = await view.nextInput;\n\n    assert.strictEqual(nextInput.state.type, Explain.State.SETTING_IS_NOT_TRUE);\n  });\n\n  it('generates an explanation when the user logs in', async () => {\n    const {view, component, stubAidaCheckAccessPreconditions} = await createConsoleInsightWidget({\n      aidaAvailability: Host.AidaClient.AidaAccessPreconditions.NO_ACCOUNT_EMAIL,\n    });\n\n    assert.strictEqual(view.input.state.type, Explain.State.NOT_LOGGED_IN);\n\n    component.wasShown();\n\n    stubAidaCheckAccessPreconditions(Host.AidaClient.AidaAccessPreconditions.AVAILABLE);\n    Host.AidaClient.HostConfigTracker.instance().dispatchEventToListeners(\n        Host.AidaClient.Events.AIDA_AVAILABILITY_CHANGED);\n\n    const nextInput = await view.nextInput;\n\n    assert.strictEqual(nextInput.state.type, Explain.State.INSIGHT);\n  });\n\n  it('shows opt-in teaser when setting is disabled via disabledCondition', async () => {\n    const setting = Common.Settings.settingForTest('console-insights-enabled');\n    setting.setRegistration({\n      settingName: 'console-insights-enabled',\n      settingType: Common.Settings.SettingType.BOOLEAN,\n      defaultValue: true,\n      disabledCondition: () => {\n        return {disabled: true, reasons: ['disabled for test' as Platform.UIString.LocalizedString]};\n      },\n    });\n\n    const {view, component} = await createConsoleInsightWidget();\n\n    assert.strictEqual(view.input.state.type, Explain.State.LOADING);\n\n    component.wasShown();\n    const nextInput = await view.nextInput;\n\n    assert.strictEqual(nextInput.state.type, Explain.State.SETTING_IS_NOT_TRUE);\n\n    setting.setRegistration({\n      settingName: 'console-insights-enabled',\n      settingType: Common.Settings.SettingType.BOOLEAN,\n      defaultValue: false,\n    });\n  });\n\n  it('shows reminder on first run of console insights', async () => {\n    Common.Settings.settingForTest('console-insights-onboarding-finished').set(false);\n    const {view, component} = await createConsoleInsightWidget();\n\n    assert.strictEqual(view.input.state.type, Explain.State.LOADING);\n\n    component.wasShown();\n    let nextInput = await view.nextInput;\n\n    assert.strictEqual(nextInput.state.type, Explain.State.CONSENT_REMINDER);\n\n    await view.input.callbacks.onConsentReminderConfirmed();\n    nextInput = await view.nextInput;\n\n    assert.strictEqual(nextInput.state.type, Explain.State.INSIGHT);\n  });\n\n  it('shows an error message on timeout', async () => {\n    function getAidaClientWithTimeout() {\n      return {\n        async *\n            doConversation() {\n              yield {\n                explanation: 'test',\n                metadata: {\n                  rpcGlobalId: 0,\n                },\n                completed: true,\n              };\n              throw new Error('doAidaConversation timed out');\n            },\n        registerClientEvent: sinon.spy(),\n      };\n    }\n\n    const {view, component} = await createConsoleInsightWidget({\n      aidaClient: getAidaClientWithTimeout(),\n    });\n\n    assert.strictEqual(view.input.state.type, Explain.State.LOADING);\n\n    component.wasShown();\n    const nextInput = await view.nextInput;\n\n    assert.strictEqual(nextInput.state.type, Explain.State.INSIGHT);\n    const insight = nextInput.state as Insight;\n    assert.isTrue(insight.timedOut);\n  });\n\n  const reportsRating = (positive: boolean, disallowLogging: boolean) => async () => {\n    updateHostConfig({\n      aidaAvailability: {\n        disallowLogging,\n      },\n    });\n    const actionTaken = sinon.stub(Host.userMetrics, 'actionTaken');\n    const {view, component, testAidaClient} = await createConsoleInsightWidget();\n\n    component.wasShown();\n    await view.nextInput;\n\n    await view.input.callbacks.onRating(positive);\n    await view.nextInput;\n\n    sinon.assert.calledOnce(testAidaClient.registerClientEvent);\n    sinon.assert.match(testAidaClient.registerClientEvent.firstCall.firstArg, sinon.match({\n      corresponding_aida_rpc_global_id: 0,\n      disable_user_content_logging: disallowLogging,\n      do_conversation_client_event: {\n        user_feedback: {sentiment: positive ? 'POSITIVE' : 'NEGATIVE'},\n      },\n    }));\n    sinon.assert.calledWith(\n        actionTaken,\n        positive ? Host.UserMetrics.Action.InsightRatedPositive : Host.UserMetrics.Action.InsightRatedNegative);\n\n    await view.input.callbacks.onRating(positive);\n\n    sinon.assert.calledOnce(testAidaClient.registerClientEvent);\n  };\n\n  it('report if the user is not logged in', async () => {\n    const {view} = await createConsoleInsightWidget({\n      aidaAvailability: Host.AidaClient.AidaAccessPreconditions.NO_ACCOUNT_EMAIL,\n    });\n\n    assert.strictEqual(view.input.state.type, Explain.State.NOT_LOGGED_IN);\n  });\n\n  it('report if the navigator is offline', async () => {\n    const {view} = await createConsoleInsightWidget({\n      aidaAvailability: Host.AidaClient.AidaAccessPreconditions.NO_INTERNET,\n    });\n    assert.strictEqual(view.input.state.type, Explain.State.OFFLINE);\n  });\n\n  it('displays factuality metadata as related content', async () => {\n    function getAidaClientWithMetadata() {\n      return {\n        async *\n            doConversation() {\n              yield {\n                explanation: 'test',\n                metadata: {\n                  rpcGlobalId: 0,\n                  factualityMetadata: {\n                    facts: [\n                      {sourceUri: 'https://www.firstSource.test/someInfo'},\n                      {sourceUri: 'https://www.anotherSource.test/page'},\n                    ],\n                  },\n                },\n                completed: true,\n              };\n            },\n        registerClientEvent: sinon.spy(),\n      };\n    }\n\n    const {view, component} = await createConsoleInsightWidget({\n      aidaClient: getAidaClientWithMetadata(),\n    });\n    component.wasShown();\n    const nextInput = await view.nextInput;\n    assert.strictEqual(nextInput.state.type, Explain.State.INSIGHT);\n    const insight = nextInput.state as Insight;\n    assert.deepEqual(insight.relatedUrls, [\n      'https://www.firstSource.test/someInfo',\n      'https://www.anotherSource.test/page',\n    ]);\n  });\n\n  it('displays direct citations', async () => {\n    function getAidaClientWithMetadata() {\n      return {\n        async *\n            doConversation() {\n              yield {\n                explanation: 'This is not a real answer, it is just a test.',\n                metadata: {\n                  rpcGlobalId: 0,\n                  attributionMetadata: {\n                    attributionAction: Host.AidaClient.RecitationAction.CITE,\n                    citations: [\n                      {\n                        startIndex: 0,\n                        endIndex: 10,\n                        uri: 'https://www.wiki.test/directSource',\n                        sourceType: Host.AidaClient.CitationSourceType.WORLD_FACTS,\n                      },\n                      {\n                        startIndex: 20,\n                        endIndex: 25,\n                        uri: 'https://www.world-fact.test/',\n                        sourceType: Host.AidaClient.CitationSourceType.WORLD_FACTS,\n                      },\n                    ],\n                  },\n                  factualityMetadata: {\n                    facts: [\n                      {sourceUri: 'https://www.firstSource.test/someInfo'},\n                    ],\n                  },\n                },\n                completed: true,\n              };\n            },\n        registerClientEvent: sinon.spy(),\n      };\n    }\n\n    ({component} = createConsoleInsight(\n         getTestPromptBuilder(), getAidaClientWithMetadata(), Host.AidaClient.AidaAccessPreconditions.AVAILABLE));\n    renderElementIntoDOM(component);\n    await component.updateComplete;\n\n    const markdownView = component.contentElement!.querySelector('devtools-markdown-view');\n    assert.strictEqual(\n        getCleanTextContentFromElements(markdownView!.shadowRoot!, '.message')[0],\n        'This is not[1] a real answer[2], it is just a test.');\n    const details = component.contentElement!.querySelector('details');\n    assert.strictEqual(details!.querySelector('summary')!.textContent?.trim(), 'Sources and related content');\n    const directCitations = details!.querySelectorAll('ol x-link');\n    assert.lengthOf(directCitations, 2);\n    assert.strictEqual(directCitations[0].textContent?.trim(), 'https://www.wiki.test/directSource');\n    assert.strictEqual(directCitations[0].getAttribute('href'), 'https://www.wiki.test/directSource');\n    assert.strictEqual(directCitations[1].textContent?.trim(), 'https://www.world-fact.test/');\n    assert.strictEqual(directCitations[1].getAttribute('href'), 'https://www.world-fact.test/');\n    const relatedContent = details!.querySelectorAll('ul x-link');\n    assert.lengthOf(relatedContent, 1);\n    assert.strictEqual(relatedContent[0].textContent?.trim(), 'https://www.firstSource.test/someInfo');\n    assert.strictEqual(relatedContent[0].getAttribute('href'), 'https://www.firstSource.test/someInfo');\n\n    assert.isFalse(details?.hasAttribute('open'));\n    assert.isFalse(directCitations[0].classList.contains('highlighted'));\n    const link = markdownView!.shadowRoot?.querySelector('sup button') as HTMLElement;\n    link.click();\n    await component.updateComplete;\n    assert.isTrue(details?.hasAttribute('open'));\n    assert.isTrue(directCitations[0].classList.contains('highlighted'));\n  });\n\n  it('displays direct citations in code blocks', async () => {\n    function getAidaClientWithMetadata() {\n      return {\n        async *\n            doConversation() {\n              yield {\n                explanation: `before\n\n\\`\\`\\`\\`\\`\nconst foo = document.querySelector('.some-class');\n\\`\\`\\`\\`\\`\n\nafter\n`,\n                metadata: {\n                  rpcGlobalId: 0,\n                  attributionMetadata: {\n                    attributionAction: Host.AidaClient.RecitationAction.CITE,\n                    citations: [\n                      {\n                        startIndex: 20,\n                        endIndex: 25,\n                        uri: 'https://www.wiki.test/directSource',\n                        sourceType: Host.AidaClient.CitationSourceType.WORLD_FACTS,\n                      },\n                      {\n                        startIndex: 30,\n                        endIndex: 38,\n                        uri: 'https://www.world-fact.test/',\n                        sourceType: Host.AidaClient.CitationSourceType.WORLD_FACTS,\n                      },\n                    ],\n                  },\n                  factualityMetadata: {\n                    facts: [\n                      {sourceUri: 'https://www.firstSource.test/someInfo'},\n                    ],\n                  },\n                },\n                completed: true,\n              };\n            },\n        registerClientEvent: sinon.spy(),\n      };\n    }\n\n    ({component} = createConsoleInsight(\n         getTestPromptBuilder(), getAidaClientWithMetadata(), Host.AidaClient.AidaAccessPreconditions.AVAILABLE));\n    renderElementIntoDOM(component);\n    await component.updateComplete;\n\n    const markdownView = component.contentElement!.querySelector('devtools-markdown-view');\n    const codeBlock = markdownView!.shadowRoot!.querySelector('devtools-code-block');\n    const citations = codeBlock!.shadowRoot!.querySelectorAll('button.citation');\n    assert.lengthOf(citations, 2);\n    assert.strictEqual(citations[0].textContent, '[1]');\n    assert.strictEqual(citations[1].textContent, '[2]');\n\n    const details = component.contentElement!.querySelector('details');\n    const directCitations = details!.querySelectorAll('ol x-link');\n    assert.lengthOf(directCitations, 2);\n    assert.strictEqual(directCitations[0].textContent?.trim(), 'https://www.wiki.test/directSource');\n    assert.strictEqual(directCitations[0].getAttribute('href'), 'https://www.wiki.test/directSource');\n    assert.strictEqual(directCitations[1].textContent?.trim(), 'https://www.world-fact.test/');\n    assert.strictEqual(directCitations[1].getAttribute('href'), 'https://www.world-fact.test/');\n\n    assert.isFalse(details?.hasAttribute('open'));\n    assert.isFalse(directCitations[0].classList.contains('highlighted'));\n    (citations[0] as HTMLElement).click();\n    await component.updateComplete;\n    assert.isTrue(details?.hasAttribute('open'));\n    assert.isTrue(directCitations[0].classList.contains('highlighted'));\n  });\n\n  it('displays training data citations', async () => {\n    function getAidaClientWithMetadata() {\n      return {\n        async *\n            doConversation() {\n              yield {\n                explanation: 'This is not a real answer, it is just a test.',\n                metadata: {\n                  rpcGlobalId: 0,\n                  attributionMetadata: {\n                    attributionAction: Host.AidaClient.RecitationAction.CITE,\n                    citations: [\n                      {\n                        startIndex: 5,\n                        endIndex: 9,\n                        uri: 'https://www.training.test/',\n                        sourceType: Host.AidaClient.CitationSourceType.TRAINING_DATA,\n                      },\n                      {\n                        startIndex: 15,\n                        endIndex: 22,\n                        repository: 'chromedevtools/devtools-frontend',\n                        sourceType: Host.AidaClient.CitationSourceType.TRAINING_DATA,\n                      },\n                    ],\n                  },\n                  factualityMetadata: {\n                    facts: [\n                      {sourceUri: 'https://www.firstSource.test/someInfo'},\n                    ],\n                  },\n                },\n                completed: true,\n              };\n            },\n        registerClientEvent: sinon.spy(),\n      };\n    }\n\n    const {view, component} = await createConsoleInsightWidget({\n      aidaClient: getAidaClientWithMetadata(),\n    });\n    component.wasShown();\n    const nextInput = await view.nextInput;\n    assert.strictEqual(nextInput.state.type, Explain.State.INSIGHT);\n    const insight = nextInput.state as Insight;\n\n    assert.lengthOf(insight.relatedUrls, 3);\n    assert.strictEqual(insight.relatedUrls[0], 'https://www.firstSource.test/someInfo');\n    assert.strictEqual(insight.relatedUrls[1], 'https://www.training.test/');\n    assert.strictEqual(insight.relatedUrls[2], 'https://www.github.com/chromedevtools/devtools-frontend');\n  });\n\n  it('deduplicates citation URLs', async () => {\n    function getAidaClientWithMetadata() {\n      return {\n        async *\n            doConversation() {\n              yield {\n                explanation: 'This is not a real answer, it is just a test.',\n                metadata: {\n                  rpcGlobalId: 0,\n                  attributionMetadata: {\n                    attributionAction: Host.AidaClient.RecitationAction.CITE,\n                    citations: [\n                      {\n                        startIndex: 5,\n                        endIndex: 9,\n                        uri: 'https://www.training-and-factuality.test/',\n                        sourceType: Host.AidaClient.CitationSourceType.TRAINING_DATA,\n                      },\n                      {\n                        startIndex: 10,\n                        endIndex: 12,\n                        uri: 'https://www.all-three.test/',\n                        sourceType: Host.AidaClient.CitationSourceType.TRAINING_DATA,\n                      },\n                      {\n                        startIndex: 20,\n                        endIndex: 25,\n                        uri: 'https://www.world-fact-and-factuality.test/',\n                        sourceType: Host.AidaClient.CitationSourceType.WORLD_FACTS,\n                      },\n                      {\n                        startIndex: 26,\n                        endIndex: 30,\n                        uri: 'https://www.all-three.test/',\n                        sourceType: Host.AidaClient.CitationSourceType.WORLD_FACTS,\n                      },\n                    ],\n                  },\n                  factualityMetadata: {\n                    facts: [\n                      {sourceUri: 'https://www.training-and-factuality.test/'},\n                      {sourceUri: 'https://www.world-fact-and-factuality.test/'},\n                      {sourceUri: 'https://www.factuality.test/'},\n                      {sourceUri: 'https://www.all-three.test/'},\n                    ],\n                  },\n                },\n                completed: true,\n              };\n            },\n        registerClientEvent: sinon.spy(),\n      };\n    }\n\n    const {view, component} = await createConsoleInsightWidget({\n      aidaClient: getAidaClientWithMetadata(),\n    });\n    component.wasShown();\n    const nextInput = await view.nextInput;\n    assert.strictEqual(nextInput.state.type, Explain.State.INSIGHT);\n    const insight = nextInput.state as Insight;\n\n    assert.lengthOf(insight.directCitationUrls, 2);\n    assert.lengthOf(insight.relatedUrls, 2);\n    assert.strictEqual(insight.directCitationUrls[0], 'https://www.world-fact-and-factuality.test/');\n    assert.strictEqual(insight.directCitationUrls[1], 'https://www.all-three.test/');\n    assert.strictEqual(insight.relatedUrls[0], 'https://www.training-and-factuality.test/');\n    assert.strictEqual(insight.relatedUrls[1], 'https://www.factuality.test/');\n  });\n\n  const DEFAULT_INPUT: Explain.ViewInput = {\n    state: {type: Explain.State.LOADING},\n    closing: false,\n    disableAnimations: true,\n    renderer: new MarkdownView.MarkdownView.MarkdownInsightRenderer(),\n    citationClickHandler: () => {},\n    noLogging: false,\n    areReferenceDetailsOpen: false,\n    highlightedCitationIndex: -1,\n    callbacks: {\n      onClose: () => {},\n      onAnimationEnd: () => {},\n      onCitationAnimationEnd: () => {},\n      onSearch: () => {},\n      onRating: (_isPositive: boolean) => undefined,\n      onReport: () => {},\n      onGoToSignIn: () => {},\n      onConsentReminderConfirmed: async () => {},\n      onToggleReferenceDetails: (_event: Event) => {},\n      onDisclaimerSettingsLink: () => {},\n      onReminderSettingsLink: () => {},\n      onEnableInsightsInSettingsLink: () => {},\n      onReferencesOpen: () => {},\n    }\n  };\n\n  const createViewOutput = (): Explain.ViewOutput => ({\n    headerRef: Lit.Directives.createRef<HTMLHeadingElement>(),\n    citationLinks: [],\n  });\n\n  function createTarget(width: string, height: string) {\n    const container = document.createElement('div');\n    container.style.cssText = containerCss;\n\n    const target = document.createElement('div');\n    target.style.width = width;\n    target.style.height = height;\n\n    container.appendChild(target);\n    renderElementIntoDOM(container);\n\n    return target;\n  }\n\n  it('renders the opt-in teaser', async () => {\n    const target = createTarget('574px', '64px');\n    Explain.DEFAULT_VIEW(\n        {\n          ...DEFAULT_INPUT,\n          state: {type: Explain.State.SETTING_IS_NOT_TRUE},\n        },\n        createViewOutput(), target);\n\n    await assertScreenshot('explain/console_insight_optin.png');\n  });\n\n  it('renders the consent reminder', async () => {\n    const target = createTarget('574px', '271px');\n    Explain.DEFAULT_VIEW(\n        {\n          ...DEFAULT_INPUT,\n          state: {type: Explain.State.CONSENT_REMINDER},\n        },\n        createViewOutput(), target);\n\n    await assertScreenshot('explain/console_insight_reminder.png');\n  });\n\n  const rendersInsight = (noLogging: boolean, golden: string) => async () => {\n    const target = createTarget('574px', '530px');\n    Explain.DEFAULT_VIEW(\n        {\n          ...DEFAULT_INPUT,\n          noLogging,\n          state: {\n            type: Explain.State.INSIGHT,\n            tokens: [\n              {\n                type: 'heading',\n                raw: '## Result\\n\\n',\n                depth: 2,\n                text: 'Result',\n                tokens: [{type: 'text', raw: 'Result', text: 'Result'}]\n              },\n              {\n                type: 'paragraph',\n                raw: 'Some text with `code`. Some code:\\n',\n                text: 'Some text with `code`. Some code:',\n                tokens: [\n                  {type: 'text', raw: 'Some text with ', text: 'Some text with '},\n                  {type: 'codespan', raw: '`code`', text: 'code'},\n                  {type: 'text', raw: '. Some code:', text: '. Some code:'}\n                ]\n              },\n              {\n                type: 'code',\n                raw: '```ts\\nconsole.log(\\'test\\');\\ndocument.querySelector(\\'test\\').style = \\'black\\';\\n```',\n                lang: 'ts',\n                text: 'console.log(\\'test\\');\\ndocument.querySelector(\\'test\\').style = \\'black\\';'\n              },\n              {type: 'space', raw: '\\n\\n'}, {\n                type: 'code',\n                raw:\n                    '```\\n<!DOCTYPE html>\\n<div>Hello world</div>\\n<script>\\n  console.log(\\'Hello World\\');\\n</script>\\n```',\n                lang: '',\n                text: '<!DOCTYPE html>\\n<div>Hello world</div>\\n<script>\\n  console.log(\\'Hello World\\');\\n</script>'\n              },\n              {type: 'space', raw: '\\n\\n'}, {\n                type: 'paragraph',\n                raw:\n                    'Links: [https://example.com](https://example.com)\\nImages: ![https://example.com](https://example.com)\\n',\n                text:\n                    'Links: [https://example.com](https://example.com)\\nImages: ![https://example.com](https://example.com)',\n                tokens: [\n                  {type: 'text', raw: 'Links: ', text: 'Links: '}, {\n                    type: 'link',\n                    raw: '[https://example.com](https://example.com)',\n                    href: 'https://example.com',\n                    title: null,\n                    text: 'https://example.com',\n                    tokens: [{type: 'text', raw: 'https://example.com', text: 'https://example.com'}]\n                  },\n                  {type: 'text', raw: '\\nImages: ', text: '\\nImages: '}, {\n                    type: 'image',\n                    raw: '![https://example.com](https://example.com)',\n                    href: 'https://example.com',\n                    title: null,\n                    text: 'https://example.com'\n                  }\n                ]\n              }\n            ],\n            validMarkdown: true,\n            explanation:\n                '## Result\\n\\nSome text with `code`. Some code:\\n```ts\\nconsole.log(\\'test\\');\\ndocument.querySelector(\\'test\\').style = \\'black\\';\\n```\\n\\n```\\n<!DOCTYPE html>\\n<div>Hello world</div>\\n<script>\\n  console.log(\\'Hello World\\');\\n</script>\\n```\\n\\nLinks: [https://example.com](https://example.com)\\nImages: ![https://example.com](https://example.com)\\n',\n            sources:\n                [\n                  {\n                    type: Console.PromptBuilder.SourceType.MESSAGE,\n                    value: 'Something went wrong\\n\\nSomething went wrong'\n                  },\n                  {type: Console.PromptBuilder.SourceType.STACKTRACE, value: 'Stacktrace line1\\nStacketrace line2'},\n                  {type: Console.PromptBuilder.SourceType.RELATED_CODE, value: 'RelatedCode'}, {\n                    type: Console.PromptBuilder.SourceType.NETWORK_REQUEST,\n                    value:\n                        'Request: https://example.com/data.html\\n\\nRequest headers:\\n:authority: example.com\\nuser-agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/121.0.0.0 Safari/537.36\\n\\nResponse headers:\\nResponse status: 404'\n                  }\n                ],\n            metadata: {},\n            isPageReloadRecommended: false,\n            completed: true,\n            directCitationUrls: [],\n            relatedUrls: []\n          }\n        },\n        createViewOutput(), target);\n\n    await assertScreenshot(golden);\n  };\n\n  describe('without logging', () => {\n    it('reports positive rating', reportsRating(true, true));\n    it('reports negative rating', reportsRating(false, true));\n    // formerly 'has thumbs up/down buttons if logging is disabled'\n    it('renders the insight', rendersInsight(true, 'explain/console_insight_no_logging.png'));\n  });\n\n  describe('with logging', () => {\n    it('reports positive rating', reportsRating(true, false));\n    it('reports negative rating', reportsRating(false, false));\n    it('renders the insight', rendersInsight(false, 'explain/console_insight.png'));\n  });\n\n  it('renders insights with references', async () => {\n    const target = createTarget('576px', '463px');\n    Explain.DEFAULT_VIEW(\n        {\n          ...DEFAULT_INPUT,\n          areReferenceDetailsOpen: true,\n          state: {\n            type: Explain.State.INSIGHT,\n            tokens: [\n              {\n                type: 'heading',\n                raw: '## Result\\n\\n',\n                depth: 2,\n                text: 'Result',\n                tokens: [{type: 'text', raw: 'Result', text: 'Result'}]\n              },\n              {\n                type: 'paragraph',\n                raw: 'Here is a text which contains both direct[^1] and indirect citations.',\n                text: 'Here is a text which contains both direct[^1] and indirect citations.',\n                tokens: [\n                  {\n                    type: 'text',\n                    raw: 'Here is a text which contains both direct',\n                    text: 'Here is a text which contains both direct'\n                  },\n                  {type: 'citation', raw: '[^1]', linkText: 1},\n                  {type: 'text', raw: ' and indirect citations.', text: ' and indirect citations.'}\n                ]\n              },\n              {type: 'space', raw: '\\n\\n'}, {\n                type: 'paragraph',\n                raw: 'An indirect citation is a link to a reference which applies to the whole response.',\n                text: 'An indirect citation is a link to a reference which applies to the whole response.',\n                tokens: [{\n                  type: 'text',\n                  raw: 'An indirect citation is a link to a reference which applies to the whole response.',\n                  text: 'An indirect citation is a link to a reference which applies to the whole response.'\n                }]\n              },\n              {type: 'space', raw: '\\n\\n'}, {\n                type: 'paragraph',\n                raw:\n                    'A direct citation[^2] is a link to a reference, but it only applies to a specific part of the response. Direct citations are numbered and are shown as a number within square brackets in the response text.\\n',\n                text:\n                    'A direct citation[^2] is a link to a reference, but it only applies to a specific part of the response. Direct citations are numbered and are shown as a number within square brackets in the response text.',\n                tokens: [\n                  {type: 'text', raw: 'A direct citation', text: 'A direct citation'},\n                  {type: 'citation', raw: '[^2]', linkText: 2}, {\n                    type: 'text',\n                    raw:\n                        ' is a link to a reference, but it only applies to a specific part of the response. Direct citations are numbered and are shown as a number within square brackets in the response text.',\n                    text:\n                        ' is a link to a reference, but it only applies to a specific part of the response. Direct citations are numbered and are shown as a number within square brackets in the response text.'\n                  }\n                ]\n              }\n            ],\n            validMarkdown: true,\n            explanation:\n                '## Result\\n\\nHere is a text which contains both direct and indirect citations.\\n\\nAn indirect citation is a link to a reference which applies to the whole response.\\n\\nA direct citation is a link to a reference, but it only applies to a specific part of the response. Direct citations are numbered and are shown as a number within square brackets in the response text.\\n',\n            sources: [\n              {type: Console.PromptBuilder.SourceType.MESSAGE, value: 'Something went wrong\\n\\nSomething went wrong'},\n              {type: Console.PromptBuilder.SourceType.STACKTRACE, value: 'Stacktrace line1\\nStacketrace line2'},\n              {type: Console.PromptBuilder.SourceType.RELATED_CODE, value: 'RelatedCode'}, {\n                type: Console.PromptBuilder.SourceType.NETWORK_REQUEST,\n                value:\n                    'Request: https://example.com/data.html\\n\\nRequest headers:\\n:authority: example.com\\nuser-agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/121.0.0.0 Safari/537.36\\n\\nResponse headers:\\nResponse status: 404'\n              }\n            ],\n            metadata: {\n              attributionMetadata: {\n                attributionAction: Host.AidaClient.RecitationAction.CITE,\n                citations: [\n                  {\n                    startIndex: 20,\n                    endIndex: 50,\n                    uri: 'https://www.direct-citation.dev',\n                    sourceType: Host.AidaClient.CitationSourceType.WORLD_FACTS,\n                  },\n                  {\n                    startIndex: 170,\n                    endIndex: 176,\n                    uri: 'https://www.another-direct-citation.dev',\n                    sourceType: Host.AidaClient.CitationSourceType.WORLD_FACTS,\n                  }\n                ]\n              },\n              factualityMetadata: {\n                facts: [\n                  {sourceUri: 'https://www.indirect-citation.dev'}, {sourceUri: 'https://www.the-whole-world.dev'},\n                  {sourceUri: 'https://www.even-more-content.dev'}\n                ]\n              }\n            },\n            isPageReloadRecommended: false,\n            completed: true,\n            directCitationUrls: ['https://www.direct-citation.dev', 'https://www.another-direct-citation.dev'],\n            relatedUrls: [\n              'https://www.indirect-citation.dev', 'https://www.the-whole-world.dev',\n              'https://www.even-more-content.dev'\n            ]\n          }\n        },\n        createViewOutput(), target);\n\n    await assertScreenshot('explain/console_insight_references.png');\n  });\n});\n"]}