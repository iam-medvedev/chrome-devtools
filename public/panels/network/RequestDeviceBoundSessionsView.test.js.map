{"version":3,"file":"RequestDeviceBoundSessionsView.test.js","sourceRoot":"","sources":["../../../../../../front_end/panels/network/RequestDeviceBoundSessionsView.test.ts"],"names":[],"mappings":"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","sourcesContent":["// Copyright 2026 The Chromium Authors\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\n\nimport * as Platform from '../../core/platform/platform.js';\nimport * as SDK from '../../core/sdk/sdk.js';\nimport * as Protocol from '../../generated/protocol.js';\nimport {\n  assertScreenshot,\n  renderElementIntoDOM,\n} from '../../testing/DOMHelpers.js';\nimport {setupLocaleHooks} from '../../testing/LocaleHelpers.js';\nimport {describeWithMockConnection} from '../../testing/MockConnection.js';\nimport {createViewFunctionStub} from '../../testing/ViewFunctionHelpers.js';\n\nimport * as Network from './network.js';\n\nconst {RequestDeviceBoundSessionsView} = Network;\nconst {urlString} = Platform.DevToolsPath;\n\ndescribeWithMockConnection('RequestDeviceBoundSessionsView', () => {\n  setupLocaleHooks();\n\n  it('renders device bound sessions', async () => {\n    const container = document.createElement('div');\n    renderElementIntoDOM(container);\n    RequestDeviceBoundSessionsView.DEFAULT_VIEW(\n        {\n          deviceBoundSessionUsages: [\n            {\n              sessionKey: {site: 'https://example.com', id: 'session-1'},\n              usage: Protocol.Network.DeviceBoundSessionWithUsageUsage.Deferred,\n            },\n            {\n              sessionKey: {site: 'https://example.com', id: 'session-2'},\n              usage: Protocol.Network.DeviceBoundSessionWithUsageUsage.NotInScope,\n            },\n            {\n              sessionKey: {site: 'https://example.com', id: 'session-3'},\n              usage: Protocol.Network.DeviceBoundSessionWithUsageUsage.InScopeRefreshNotYetNeeded,\n            },\n            {\n              sessionKey: {site: 'https://example.com', id: 'session-4'},\n              usage: Protocol.Network.DeviceBoundSessionWithUsageUsage.InScopeRefreshNotAllowed,\n            },\n            {\n              sessionKey: {site: 'https://example.com', id: 'session-5'},\n              usage: Protocol.Network.DeviceBoundSessionWithUsageUsage.ProactiveRefreshNotPossible,\n            },\n            {\n              sessionKey: {site: 'https://example.com', id: 'session-6'},\n              usage: Protocol.Network.DeviceBoundSessionWithUsageUsage.ProactiveRefreshAttempted,\n            },\n          ],\n        },\n        {}, container);\n    await assertScreenshot('network/request_device_bound_sessions_view.png');\n  });\n\n  it('updates when the request headers change', async () => {\n    const request = SDK.NetworkRequest.NetworkRequest.create(\n        'requestId' as Protocol.Network.RequestId, urlString`https://www.example.com`, urlString``, null, null, null);\n\n    const view = createViewFunctionStub(RequestDeviceBoundSessionsView.RequestDeviceBoundSessionsView);\n    const component = new RequestDeviceBoundSessionsView.RequestDeviceBoundSessionsView(request, view);\n    renderElementIntoDOM(component);\n    component.wasShown();\n\n    assert.deepEqual(view.input.deviceBoundSessionUsages, []);\n\n    request.addExtraRequestInfo({\n      deviceBoundSessionUsages: [\n        {\n          sessionKey: {site: 'https://example.com', id: 'session-1'},\n          usage: Protocol.Network.DeviceBoundSessionWithUsageUsage.Deferred,\n        },\n      ],\n      blockedRequestCookies: [],\n      includedRequestCookies: [],\n      connectTiming: {requestTime: 0},\n      requestHeaders: [],\n    } as SDK.NetworkRequest.ExtraRequestInfo);\n\n    request.dispatchEventToListeners(SDK.NetworkRequest.Events.RESPONSE_HEADERS_CHANGED);\n\n    assert.deepEqual(view.input.deviceBoundSessionUsages, [\n      {\n        sessionKey: {site: 'https://example.com', id: 'session-1'},\n        usage: Protocol.Network.DeviceBoundSessionWithUsageUsage.Deferred,\n      },\n    ]);\n  });\n});\n"]}