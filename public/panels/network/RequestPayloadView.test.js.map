{"version":3,"file":"RequestPayloadView.test.js","sourceRoot":"","sources":["../../../../../../front_end/panels/network/RequestPayloadView.test.ts"],"names":[],"mappings":"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","sourcesContent":["// Copyright 2023 The Chromium Authors\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\nimport * as Platform from '../../core/platform/platform.js';\nimport * as SDK from '../../core/sdk/sdk.js';\nimport type * as Protocol from '../../generated/protocol.js';\nimport {assertScreenshot, renderElementIntoDOM} from '../../testing/DOMHelpers.js';\nimport {describeWithEnvironment} from '../../testing/EnvironmentHelpers.js';\nimport * as UI from '../../ui/legacy/legacy.js';\nimport {render} from '../../ui/lit/lit.js';\n\nimport * as Network from './network.js';\n\nconst {urlString} = Platform.DevToolsPath;\n\ndescribeWithEnvironment('RequestPayloadView', () => {\n  it('decodes headers', async () => {\n    const encoded = 'Test+%21%40%23%24%25%5E%26*%28%29_%2B+parameters.';\n    const parameterElement = document.createDocumentFragment();\n    render(Network.RequestPayloadView.RequestPayloadView.formatParameter(encoded, '', true), parameterElement);\n    assert.strictEqual(parameterElement.textContent?.trim(), 'Test !@#$%^&*()_+ parameters.');\n  });\n\n  it('does not decode headers if decodeParameters is false', async () => {\n    const encoded = 'Test+%21%40%23%24%25%5E%26*%28%29_%2B+parameters.';\n    const parameterElement = document.createDocumentFragment();\n    render(Network.RequestPayloadView.RequestPayloadView.formatParameter(encoded, '', false), parameterElement);\n    assert.strictEqual(parameterElement.textContent?.trim(), encoded);\n  });\n\n  it('adds the class name to the element', async () => {\n    const parameterElement = document.createDocumentFragment();\n    render(Network.RequestPayloadView.RequestPayloadView.formatParameter('test', 'test-class', true), parameterElement);\n    const div = parameterElement.firstElementChild;\n    assert.isNotNull(div);\n    assert.isTrue(div?.classList.contains('test-class'));\n  });\n\n  it('adds the empty-value class when value is empty', async () => {\n    const parameterElement = document.createDocumentFragment();\n    render(Network.RequestPayloadView.RequestPayloadView.formatParameter('', '', true), parameterElement);\n    const div = parameterElement.firstElementChild;\n    assert.isNotNull(div);\n    assert.isTrue(div?.classList.contains('empty-value'));\n  });\n\n  it('shows error message when decoding fails', async () => {\n    const invalidEncoded = '%E0%A4%A';  // Invalid URI sequence\n    const parameterElement = document.createDocumentFragment();\n    render(Network.RequestPayloadView.RequestPayloadView.formatParameter(invalidEncoded, '', true), parameterElement);\n    const errorSpan = parameterElement.querySelector('.payload-decode-error');\n    assert.isNotNull(errorSpan);\n    assert.strictEqual(errorSpan?.textContent, '(unable to decode value)');\n  });\n\n  it('displays query string parameters', async () => {\n    const request = SDK.NetworkRequest.NetworkRequest.create(\n        'requestId' as Protocol.Network.RequestId, urlString`https://example.com/api?foo=bar&baz=qux`, urlString``,\n        null, null, null);\n    const view = new Network.RequestPayloadView.RequestPayloadView(request);\n    renderElementIntoDOM(view);\n    view.wasShown();\n\n    await assertScreenshot('network/request-payload-query-params.png');\n  });\n\n  it('displays form data parameters', async () => {\n    const request = SDK.NetworkRequest.NetworkRequest.create(\n        'requestId' as Protocol.Network.RequestId, urlString`https://example.com/api`, urlString``, null, null, null);\n    request.setRequestHeaders([{name: 'Content-Type', value: 'application/x-www-form-urlencoded'}]);\n    // Mock requestFormData to return URL-encoded form data.\n    sinon.stub(request, 'requestFormData').resolves('foo=bar&baz=qux');\n\n    const view = new Network.RequestPayloadView.RequestPayloadView(request);\n    renderElementIntoDOM(view);\n    view.wasShown();\n\n    // TODO(crbug.com/407751697) Replace with updateComplete.\n    await new Promise(resolve => setTimeout(resolve, 0));\n    await assertScreenshot('network/request-payload-data-params.png');\n  });\n\n  it('toggles URL decoding', async () => {\n    const request = SDK.NetworkRequest.NetworkRequest.create(\n        'requestId' as Protocol.Network.RequestId, urlString`https://example.com/api?foo=bar%20baz`, urlString``, null,\n        null, null);\n    const view = new Network.RequestPayloadView.RequestPayloadView(request);\n    renderElementIntoDOM(view);\n    view.wasShown();\n\n    const treeOutline = view.element.querySelector<HTMLElement>('.request-payload-tree');\n    assert.isNotNull(treeOutline);\n    const shadowRoot = treeOutline.shadowRoot;\n    assert.isNotNull(shadowRoot);\n\n    const getPayloadValues = () => {\n      return Array.from(shadowRoot.querySelectorAll('.payload-value')).map(el => el.textContent).join(' ');\n    };\n\n    // Initial state: Decoded\n    assert.include(getPayloadValues(), 'bar baz');\n\n    const toggleButton = shadowRoot.querySelectorAll<HTMLElement>('.payload-toggle').item(1);\n    assert.exists(toggleButton);\n    toggleButton.click();\n\n    // Take the screenshot before checking contents, this forces the widget to render.\n    await assertScreenshot('network/request-payload-url-decoding.png');\n\n    // Toggled state: Encoded\n    assert.include(getPayloadValues(), 'bar%20baz');\n  });\n\n  it('toggles between parsed and source view', async () => {\n    const request = SDK.NetworkRequest.NetworkRequest.create(\n        'requestId' as Protocol.Network.RequestId, urlString`https://example.com/api?foo=bar`, urlString``, null, null,\n        null);\n    const view = new Network.RequestPayloadView.RequestPayloadView(request);\n    renderElementIntoDOM(view);\n    view.wasShown();\n\n    const treeOutline = view.element.querySelector<HTMLElement>('.request-payload-tree');\n    const shadowRoot = treeOutline?.shadowRoot;\n    assert.exists(shadowRoot);\n\n    const getTextContent = () => {\n      const names = Array.from(shadowRoot.querySelectorAll('.payload-name')).map(el => el.textContent);\n      const values = Array.from(shadowRoot.querySelectorAll('.payload-value')).map(el => el.textContent);\n      return [...names, ...values].join(' ');\n    };\n\n    // Initial state: Parsed (foo: bar)\n    const initialText = getTextContent();\n    assert.include(initialText, 'foo');\n    assert.include(initialText, 'bar');\n\n    // Find \"View source\" button.\n    const buttons = shadowRoot.querySelectorAll<HTMLElement>('.payload-toggle');\n    const viewSourceButton = Array.from(buttons).find(b => b.textContent?.includes('View source'));\n    assert.exists(viewSourceButton);\n\n    viewSourceButton.click();\n    await assertScreenshot('network/request-payload-url-source-view.png');\n\n    // Source state: \"foo=bar\"\n    const sourceText = getTextContent();\n    assert.include(sourceText, 'foo=bar');\n\n    // Toggle back\n    const viewParsedButton = Array.from(shadowRoot.querySelectorAll<HTMLElement>('.payload-toggle'))\n                                 .find(b => b.textContent?.includes('View parsed'));\n    assert.exists(viewParsedButton);\n    viewParsedButton.click();\n\n    const finalText = getTextContent();\n    assert.include(finalText, 'foo');\n    assert.include(finalText, 'bar');\n  });\n\n  it('truncates long source text and in a ShowMore widget', async () => {\n    const text = 'A'.repeat(3010);\n    const request = SDK.NetworkRequest.NetworkRequest.create(\n        'requestId' as Protocol.Network.RequestId, urlString`https://example.com/api?foo=${text}`, urlString``, null,\n        null, null);\n    const view = new Network.RequestPayloadView.RequestPayloadView(request);\n    renderElementIntoDOM(view);\n    view.wasShown();\n\n    const treeOutline = view.element.querySelector<HTMLElement>('.request-payload-tree');\n    assert.exists(treeOutline);\n    const shadowRoot = treeOutline?.shadowRoot;\n    assert.exists(shadowRoot);\n\n    // Switch to View Source\n    const buttons = shadowRoot.querySelectorAll<HTMLElement>('.payload-toggle');\n    const viewSourceButton = Array.from(buttons).find(b => b.textContent?.includes('View source'));\n    assert.exists(viewSourceButton);\n    viewSourceButton.click();\n\n    const payloadValue = shadowRoot.querySelector('.payload-value');\n    assert.exists(payloadValue);\n    const payloadValueWidget = UI.Widget.Widget.get(payloadValue);\n    assert.instanceOf(payloadValueWidget, Network.ShowMoreDetailsWidget.ShowMoreDetailsWidget);\n    assert.strictEqual(payloadValueWidget.text, `foo=${text}`);\n    await assertScreenshot('network/request-payload-show-more.png');\n  });\n\n  it('displays JSON payload and toggles between parsed and source view', async () => {\n    const request = SDK.NetworkRequest.NetworkRequest.create(\n        'requestId' as Protocol.Network.RequestId, urlString`https://example.com/api`, urlString``, null, null, null);\n    request.setRequestHeaders([{name: 'Content-Type', value: 'application/json'}]);\n    sinon.stub(request, 'requestFormData').resolves('{\"foo\": \"bar\"}');\n\n    const view = new Network.RequestPayloadView.RequestPayloadView(request);\n    renderElementIntoDOM(view);\n    view.wasShown();\n\n    // TODO(crbug.com/407751697) Replace with updateComplete.\n    await new Promise(resolve => setTimeout(resolve, 0));\n\n    const treeOutline = view.element.querySelector<HTMLElement>('.request-payload-tree');\n    assert.exists(treeOutline);\n    const shadowRoot = treeOutline.shadowRoot;\n    assert.exists(shadowRoot);\n\n    const getButton = (text: string) => {\n      const buttons = shadowRoot.querySelectorAll<HTMLElement>('.payload-toggle');\n      return Array.from(buttons).find(b => b.textContent?.includes(text));\n    };\n\n    // Initial state: Parsed.\n    // Check that \"View source\" button exists\n    const viewSourceButton = getButton('View source');\n    assert.exists(viewSourceButton);\n    await assertScreenshot('network/request-payload-json.png');\n\n    // Toggle to source\n    viewSourceButton?.click();\n\n    // Check for source text\n    const payloadValue = shadowRoot.querySelector('.payload-value');\n    assert.exists(payloadValue);\n    const payloadValueWidget = UI.Widget.Widget.get(payloadValue);\n    assert.instanceOf(payloadValueWidget, Network.ShowMoreDetailsWidget.ShowMoreDetailsWidget);\n    assert.strictEqual(payloadValueWidget.text, '{\"foo\": \"bar\"}');\n\n    // Check that \"View parsed\" button exists\n    const viewParsedButton = getButton('View parsed');\n    assert.exists(viewParsedButton);\n    await assertScreenshot('network/request-payload-json-source.png');\n\n    // Click \"View parsed\"\n    viewParsedButton?.click();\n\n    // Check that \"View source\" button exists again\n    assert.exists(getButton('View source'));\n    // And check that source text is gone\n    assert.isNull(shadowRoot.querySelector('.payload-value'));\n  });\n});\n"]}