{"version":3,"file":"WebBundleInfoView.js","sourceRoot":"","sources":["../../../../../../../front_end/panels/network/components/WebBundleInfoView.ts"],"names":[],"mappings":"AAAA,4DAA4D;AAC5D,yEAAyE;AACzE,6BAA6B;AAE7B,OAAO,sDAAsD,CAAC;AAC9D,OAAO,mDAAmD,CAAC;AAE3D,OAAO,KAAK,MAAM,MAAM,gCAAgC,CAAC;AACzD,OAAO,KAAK,IAAI,MAAM,4BAA4B,CAAC;AAEnD,OAAO,EAAC,UAAU,EAAC,MAAM,gCAAgC,CAAC;AAE1D,OAAO,KAAK,aAAa,MAAM,yDAAyD,CAAC;AACzF,OAAO,EAAC,IAAI,EAAE,MAAM,EAAC,MAAM,wBAAwB,CAAC;AACpD,OAAO,KAAK,aAAa,MAAM,8CAA8C,CAAC;AAE9E,OAAO,0BAA0B,MAAM,4BAA4B,CAAC;AAEpE,4EAA4E;AAC5E,MAAM,uBAAuB,GAAG,IAAI,aAAa,EAAE,CAAC;AACpD,uBAAuB,CAAC,WAAW,CAAC,0BAA0B,CAAC,UAAU,CAAC,CAAC;AAE3E,MAAM,EAAC,WAAW,EAAE,oBAAoB,EAAE,YAAY,EAAC,GAAG,MAAM,CAAC,YAAY,CAAC,YAAY,CAAC;AAC3F,MAAM,EAAC,uBAAuB,EAAC,GAAG,UAAU,CAAC;AAI7C,MAAM,SAAS,GAAG;IAChB;;OAEG;IACH,eAAe,EAAE,kBAAkB;CAC3B,CAAC;AACX,MAAM,IAAI,GAAG,IAAI,CAAC,IAAI,CAAC,iBAAiB,CAAC,gDAAgD,EAAE,SAAS,CAAC,CAAC;AACtG,MAAM,UAAU,GAAG,IAAI,CAAC,IAAI,CAAC,kBAAkB,CAAC,IAAI,CAAC,SAAS,EAAE,IAAI,CAAC,CAAC;AAEtE,MAAM,OAAO,iBAAkB,SAAQ,aAAa,CAAC,aAAa,CAAC,kBAAkB;IAC1E,OAAO,GAAG,IAAI,CAAC,YAAY,CAAC,EAAC,IAAI,EAAE,MAAM,EAAC,CAAC,CAAC;IACrD,cAAc,CAA6C;IAC3D,cAAc,CAAmB;IACjC,YAAY,OAA0C;QACpD,KAAK,EAAE,CAAC;QACR,MAAM,aAAa,GAAG,OAAO,CAAC,aAAa,EAAE,CAAC;QAC9C,IAAI,CAAC,aAAa,EAAE,CAAC;YACnB,MAAM,IAAI,KAAK,CAAC,2DAA2D,CAAC,CAAC;QAC/E,CAAC;QAED,IAAI,CAAC,cAAc,GAAG,aAAa,CAAC;QACpC,IAAI,CAAC,cAAc,GAAG,OAAO,CAAC,SAAS,CAAC,iBAAiB,CAAC;QAC1D,IAAI,CAAC,YAAY,CAAC,OAAO,EAAE,GAAG,aAAa,CAAC,IAAI,CAAC,WAAW,CAAC,CAAC,KAAK,CAAC,EAAC,MAAM,EAAE,IAAI,EAAC,CAAC,EAAE,CAAC,CAAC;IACzF,CAAC;IAED,iBAAiB;QACf,IAAI,CAAC,OAAO,CAAC,kBAAkB,GAAG,CAAC,uBAAuB,CAAC,CAAC;IAC9D,CAAC;IAEQ,KAAK,CAAC,MAAM;QACnB,mBAAmB;QACnB,MAAM,CAAC,IAAI,CAAA;;;kBAGG,EAAC,KAAK,EAAE,qBAAqB,EAAE,QAAQ,EAAE,QAAQ,EAAE,KAAK,EAAE,MAAM,EAAa;;gBAE/E,IAAI,CAAC,cAAc;;kBAEjB,aAAa,CAAC,IAAI,CAAC,qBAAqB,CAAC,CAAC,KAAK,CAAC;YACxD,KAAK,EAAE,IAAI;SACZ,CAAC;;oBAEU,EAAC,KAAK,EAAE,qBAAqB,EAAE,QAAQ,EAAE,MAAM,EAAE,KAAK,EAAE,MAAM,EAAa;;;;;;6BAMlE,UAAU,CAAC,SAAS,CAAC,eAAe,CAAC;YACtD,IAAI,CAAC,cAAc,CAAC,YAAY,EAAE,GAAG,CAAC,GAAG,CAAC,EAAE;YAC5C,MAAM,QAAQ,GAAG,WAAW,CAAC,GAAG,CAAC,IAAI,IAAI,CAAC;YAC1C,MAAM,YAAY,GAAG,oBAAoB,CAAC,QAAQ,CAAC,IAAI,YAAY,CAAC,QAAQ,CAAC,CAAC;YAC9E,MAAM,QAAQ,GAAG,uBAAuB,CAAC,YAAY,CAAC,CAAC;YACvD,OAAO,IAAI,CAAA;;sDAE+B,EAAC,GAAG,QAAQ,EAAE,KAAK,EAAE,MAAM,EAAa;;0BAEpE,GAAG;iCACI,CAAC;QAC1B,CAAC,CAAC;;4BAEkB,EACpB,IAAI,CAAC,OAAO,EAAE,EAAC,IAAI,EAAE,IAAI,EAAC,CAAC,CAAC;QAChC,kBAAkB;IACpB,CAAC;CACF;AAED,cAAc,CAAC,MAAM,CAAC,0BAA0B,EAAE,iBAAiB,CAAC,CAAC","sourcesContent":["// Copyright 2018 The Chromium Authors. All rights reserved.\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\n\nimport '../../../ui/legacy/components/data_grid/data_grid.js';\nimport '../../../ui/components/icon_button/icon_button.js';\n\nimport * as Common from '../../../core/common/common.js';\nimport * as i18n from '../../../core/i18n/i18n.js';\nimport type * as SDK from '../../../core/sdk/sdk.js';\nimport {PanelUtils} from '../../../panels/utils/utils.js';\nimport type * as IconButton from '../../../ui/components/icon_button/icon_button.js';\nimport * as LegacyWrapper from '../../../ui/components/legacy_wrapper/legacy_wrapper.js';\nimport {html, render} from '../../../ui/lit/lit.js';\nimport * as VisualLogging from '../../../ui/visual_logging/visual_logging.js';\n\nimport webBundleInfoViewStylesRaw from './WebBundleInfoView.css.js';\n\n// TODO(crbug.com/391381439): Fully migrate off of constructed style sheets.\nconst webBundleInfoViewStyles = new CSSStyleSheet();\nwebBundleInfoViewStyles.replaceSync(webBundleInfoViewStylesRaw.cssContent);\n\nconst {mimeFromURL, fromMimeTypeOverride, fromMimeType} = Common.ResourceType.ResourceType;\nconst {iconDataForResourceType} = PanelUtils;\n\ntype IconData = IconButton.Icon.IconData;\n\nconst UIStrings = {\n  /**\n   *@description Header for the column that contains URL of the resource in a web bundle.\n   */\n  bundledResource: 'Bundled resource',\n} as const;\nconst str_ = i18n.i18n.registerUIStrings('panels/network/components/WebBundleInfoView.ts', UIStrings);\nconst i18nString = i18n.i18n.getLocalizedString.bind(undefined, str_);\n\nexport class WebBundleInfoView extends LegacyWrapper.LegacyWrapper.WrappableComponent {\n  readonly #shadow = this.attachShadow({mode: 'open'});\n  #webBundleInfo: Readonly<SDK.NetworkRequest.WebBundleInfo>;\n  #webBundleName: Readonly<string>;\n  constructor(request: SDK.NetworkRequest.NetworkRequest) {\n    super();\n    const webBundleInfo = request.webBundleInfo();\n    if (!webBundleInfo) {\n      throw new Error('Trying to render a Web Bundle info without providing data');\n    }\n\n    this.#webBundleInfo = webBundleInfo;\n    this.#webBundleName = request.parsedURL.lastPathComponent;\n    this.setAttribute('jslog', `${VisualLogging.pane('webbundle').track({resize: true})}`);\n  }\n\n  connectedCallback(): void {\n    this.#shadow.adoptedStyleSheets = [webBundleInfoViewStyles];\n  }\n\n  override async render(): Promise<void> {\n    // clang-format off\n    render(html`\n      <div class=\"header\">\n        <devtools-icon class=\"icon\"\n          .data=${{color: 'var(--icon-default)', iconName: 'bundle', width: '20px'} as IconData}>\n        </devtools-icon>\n        <span>${this.#webBundleName}</span>\n        <x-link href=\"https://web.dev/web-bundles/#explaining-web-bundles\"\n          jslog=${VisualLogging.link('webbundle-explainer').track({\n          click: true,\n        })}>\n          <devtools-icon class=\"icon\"\n            .data=${{color: 'var(--icon-default)', iconName: 'help', width: '16px'} as IconData}>\n          </devtools-icon>\n        </x-link>\n      </div>\n      <devtools-data-grid striped>\n        <table>\n          <tr><th id=\"url\">${i18nString(UIStrings.bundledResource)}</th></tr>\n          ${this.#webBundleInfo.resourceUrls?.map(url => {\n            const mimeType = mimeFromURL(url) || null;\n            const resourceType = fromMimeTypeOverride(mimeType) || fromMimeType(mimeType);\n            const iconData = iconDataForResourceType(resourceType);\n            return html`<tr><td>\n                <div style=\"display: flex;\">\n                  <devtools-icon class=\"icon\" .data=${{...iconData, width: '20px'} as IconData}>\n                  </devtools-icon>\n                  <span>${url}</span>\n                </div></td></tr>`;\n        })}\n        </table>\n      </devtools-data-grid>`,\n        this.#shadow, {host: this});\n    // clang-format on\n  }\n}\n\ncustomElements.define('devtools-web-bundle-info', WebBundleInfoView);\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    'devtools-web-bundle-info': WebBundleInfoView;\n  }\n}\n"]}