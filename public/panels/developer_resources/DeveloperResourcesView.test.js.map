{"version":3,"file":"DeveloperResourcesView.test.js","sourceRoot":"","sources":["../../../../../../front_end/panels/developer_resources/DeveloperResourcesView.test.ts"],"names":[],"mappings":"AAAA,sCAAsC;AACtC,yEAAyE;AACzE,6BAA6B;AAE7B,OAAO,KAAK,QAAQ,MAAM,iCAAiC,CAAC;AAC5D,OAAO,KAAK,GAAG,MAAM,uBAAuB,CAAC;AAC7C,OAAO,EAAC,uBAAuB,EAAC,MAAM,qCAAqC,CAAC;AAE5E,OAAO,KAAK,kBAAkB,MAAM,0BAA0B,CAAC;AAE/D,MAAM,EAAC,SAAS,EAAC,GAAG,QAAQ,CAAC,YAAY,CAAC;AAE1C,uBAAuB,CAAC,wBAAwB,EAAE,GAAG,EAAE;IACrD,EAAE,CAAC,4BAA4B,EAAE,KAAK,IAAI,EAAE;QAC1C,MAAM,WAAW,GAAG,aAAa,CAAC;QAClC,MAAM,SAAS,GAAG,EAAC,MAAM,EAAE,IAAI,EAAE,OAAO,EAAE,IAAI,EAAE,WAAW,EAAE,YAAY,EAAE,SAAS,CAAA,GAAG,WAAW,EAAE,EAAC,CAAC;QAEtG,MAAM,UAAU,GAAG,EAAC,OAAO,EAAE,IAAI,EAAE,SAAS,EAAE,IAAI,EAAE,EAAE,EAAE,QAAQ,EAAE,EAAE,EAAC,CAAC;QACtE,MAAM,SAAS,GAAG,EAAC,GAAG,EAAE,SAAS,CAAA,6BAA6B,EAAE,GAAG,UAAU,EAAC,CAAC;QAC/E,MAAM,SAAS,GAAG,EAAC,GAAG,EAAE,SAAS,CAAA,8BAA8B,EAAE,GAAG,UAAU,EAAC,CAAC;QAChF,MAAM,SAAS,GAAG,EAAC,GAAG,EAAE,SAAS,CAAA,8BAA8B,EAAE,GAAG,UAAU,EAAC,CAAC;QAEhF,MAAM,MAAM,GAAG,GAAG,CAAC,kBAAkB,CAAC,kBAAkB,CAAC,QAAQ,EAAE,CAAC;QACpE,MAAM,CAAC,8BAA8B,CAAC,SAAS,CAAC,CAAC;QACjD,MAAM,CAAC,8BAA8B,CAAC,SAAS,CAAC,CAAC;QAEjD,MAAM,sBAAsB,GAAG,IAAI,kBAAkB,CAAC,sBAAsB,CAAC,sBAAsB,EAAE,CAAC;QAEtG,0DAA0D;QAC1D,KAAK,CAAC,IAAI,CAAC,sBAAsB,EAAE,WAAW,CAAC,CAAC,SAAS,CAAC,GAAG,EAAE;YAC7D,OAAO,IAAI,CAAC;QACd,CAAC,CAAC,CAAC;QAEH,MAAM,CAAC,MAAM,CAAC,MAAM,sBAAsB,CAAC,YAAY,EAAE,CAAC,CAAC;QAC3D,sBAAsB,CAAC,MAAM,EAAE,CAAC;QAEhC,MAAM,sBAAsB,CAAC,MAAM,CAAC,SAAS,CAAC,CAAC;QAC/C,MAAM,CAAC,SAAS,CAAC,MAAM,sBAAsB,CAAC,YAAY,EAAE,EAAE,SAAS,CAAC,CAAC;QAEzE,MAAM,CAAC,8BAA8B,CAAC,SAAS,CAAC,CAAC;QACjD,MAAM,CAAC,SAAS,CAAC,MAAM,sBAAsB,CAAC,YAAY,EAAE,EAAE,SAAS,CAAC,CAAC;IAC3E,CAAC,CAAC,CAAC;AACL,CAAC,CAAC,CAAC","sourcesContent":["// Copyright 2024 The Chromium Authors\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\n\nimport * as Platform from '../../core/platform/platform.js';\nimport * as SDK from '../../core/sdk/sdk.js';\nimport {describeWithEnvironment} from '../../testing/EnvironmentHelpers.js';\n\nimport * as DeveloperResources from './developer_resources.js';\n\nconst {urlString} = Platform.DevToolsPath;\n\ndescribeWithEnvironment('DeveloperResourcesView', () => {\n  it('allows selecting resources', async () => {\n    const extensionId = 'extensionId';\n    const initiator = {target: null, frameId: null, extensionId, initiatorUrl: urlString`${extensionId}`};\n\n    const commonInfo = {success: true, initiator, size: 10, duration: 20};\n    const resource1 = {url: urlString`http://www.test.com/test.js`, ...commonInfo};\n    const resource2 = {url: urlString`http://www.test.com/test2.js`, ...commonInfo};\n    const resource3 = {url: urlString`http://www.test.com/test3.js`, ...commonInfo};\n\n    const loader = SDK.PageResourceLoader.PageResourceLoader.instance();\n    loader.resourceLoadedThroughExtension(resource1);\n    loader.resourceLoadedThroughExtension(resource2);\n\n    const developerResourcesView = new DeveloperResources.DeveloperResourcesView.DeveloperResourcesView();\n\n    // This is required, as otherwise the view is not updated.\n    sinon.stub(developerResourcesView, 'isShowing').callsFake(() => {\n      return true;\n    });\n\n    assert.isNull(await developerResourcesView.selectedItem());\n    developerResourcesView.update();\n\n    await developerResourcesView.select(resource2);\n    assert.deepEqual(await developerResourcesView.selectedItem(), resource2);\n\n    loader.resourceLoadedThroughExtension(resource3);\n    assert.deepEqual(await developerResourcesView.selectedItem(), resource2);\n  });\n});\n"]}