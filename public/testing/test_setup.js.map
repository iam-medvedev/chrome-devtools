{"version":3,"file":"test_setup.js","sourceRoot":"","sources":["../../../../../front_end/testing/test_setup.ts"],"names":[],"mappings":"AAAA,4DAA4D;AAC5D,yEAAyE;AACzE,6BAA6B;AAO7B,OAAO,KAAK,WAAW,MAAM,0BAA0B,CAAC;AACxD,OAAO,KAAK,QAAQ,MAAM,gCAAgC,CAAC;AAC3D,OAAO,KAAK,YAAY,MAAM,6CAA6C,CAAC;AAE5E,OAAO,EAAC,YAAY,EAAC,MAAM,iBAAiB,CAAC;AAC7C,OAAO,EACL,uBAAuB,EACvB,0BAA0B,EAC1B,yBAAyB,GAC1B,MAAM,2BAA2B,CAAC;AAEnC,UAAU,CAAC,GAAG,EAAE;IACd,YAAY,EAAE,CAAC;IACf,+EAA+E;IAC/E,KAAK,MAAM,OAAO,IAAI,MAAM,CAAC,MAAM,CAAC,WAAW,CAAC,QAAQ,CAAC,aAAa,CAAC,EAAE,CAAC;QACxE,OAAO,CAAC,KAAK,EAAE,CAAC;IAClB,CAAC;IACD,QAAQ,CAAC,kBAAkB,CAAC,kBAAkB,CAAC,sBAAsB,EAAE,CAAC;IAExE,mFAAmF;IACnF,oEAAoE;IACpE,MAAM,OAAO,GAAG;QACd,GAAG;YACD,OAAO,SAAS,CAAC;QACnB,CAAC;KACiC,CAAC;IACrC,YAAY,CAAC,YAAY,CAAC,QAAQ,CAAC,EAAC,QAAQ,EAAE,IAAI,EAAE,OAAO,EAAC,CAAC,CAAC;IAE9D,0BAA0B,EAAE,CAAC;AAC/B,CAAC,CAAC,CAAC;AAEH,SAAS,CAAC,KAAK,IAAI,EAAE;IACnB,MAAM,uBAAuB,EAAE,CAAC;IAChC,KAAK,CAAC,OAAO,EAAE,CAAC;IAChB,yBAAyB,EAAE,CAAC;IAC5B,+DAA+D;AACjE,CAAC,CAAC,CAAC","sourcesContent":["// Copyright 2020 The Chromium Authors. All rights reserved.\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\n\n/*\n * This file is automatically loaded and run by Karma because it automatically\n * loads and injects all *.js files it finds.\n */\nimport type * as Common from '../core/common/common.js';\nimport * as TraceEngine from '../models/trace/trace.js';\nimport * as Timeline from '../panels/timeline/timeline.js';\nimport * as ThemeSupport from '../ui/legacy/theme_support/theme_support.js';\n\nimport {resetTestDOM} from './DOMHelpers.js';\nimport {\n  checkForPendingActivity,\n  startTrackingAsyncActivity,\n  stopTrackingAsyncActivity,\n} from './TrackAsyncOperations.js';\n\nbeforeEach(() => {\n  resetTestDOM();\n  // Ensure that no trace data leaks between tests when testing the trace engine.\n  for (const handler of Object.values(TraceEngine.Handlers.ModelHandlers)) {\n    handler.reset();\n  }\n  Timeline.SourceMapsResolver.SourceMapsResolver.clearResolvedNodeNames();\n\n  // Some unit tests exercise code that assumes a ThemeSupport instance is available.\n  // Run this in a beforeEach in case an individual test overrides it.\n  const setting = {\n    get() {\n      return 'default';\n    },\n  } as Common.Settings.Setting<string>;\n  ThemeSupport.ThemeSupport.instance({forceNew: true, setting});\n\n  startTrackingAsyncActivity();\n});\n\nafterEach(async () => {\n  await checkForPendingActivity();\n  sinon.restore();\n  stopTrackingAsyncActivity();\n  // Clear out any Sinon stubs or spies between individual tests.\n});\n"]}